// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.9/esri/copyright.txt for details.
//>>built
/*

 Copyright 2000, Silicon Graphics, Inc. All Rights Reserved.
 Copyright 2015, Google Inc. All Rights Reserved.

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to
 deal in the Software without restriction, including without limitation the
 rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 sell copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice including the dates of first publication and
 either this permission notice or a reference to http://oss.sgi.com/projects/FreeB/
 shall be included in all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 SILICON GRAPHICS, INC. BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
 WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR
 IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

 Original Code. The Original Code is: OpenGL Sample Implementation,
 Version 1.2.1, released January 26, 2000, developed by Silicon Graphics,
 Inc. The Original Code is Copyright (c) 1991-2000 Silicon Graphics, Inc.
 Copyright in any portions created by third parties is as indicated
 elsewhere herein. All Rights Reserved.
*/
require({cache:{"esri/core/tsSupport/declareExtendsHelper":function(){define(["require","exports"],function(c,a){return function(a,b){a.__bases__=b.__bases__}})},"esri/core/tsSupport/decorateHelper":function(){define([],function(){return function(c,a,f,b){var d=arguments.length,l=3>d?a:null===b?b=Object.getOwnPropertyDescriptor(a,f):b,k;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)l=Reflect.decorate(c,a,f,b);else for(var e=c.length-1;0<=e;e--)if(k=c[e])l=(3>d?k(l):3<d?k(a,f,
l):k(a,f))||l;return 3<d&&l&&Object.defineProperty(a,f,l),l}})},"esri/core/Accessor":function(){define("./declare ./accessorSupport/Properties ./accessorSupport/get ./accessorSupport/introspection ./accessorSupport/set ./accessorSupport/watch".split(" "),function(c,a,f,b,d,l){a=a.default;c.before(function(a,d){c.hasMixin(a,k)&&b.processPrototype(d)});c.after(function(a){c.hasMixin(a,k)&&(b.processClass(a),Object.defineProperties(a.prototype,{initialized:{get:function(){return this.__accessor__&&this.__accessor__.initialized||
!1}},constructed:{get:function(){return this.__accessor__&&2===this.__accessor__.lifecycle||!1}},destroyed:{get:function(){return this.__accessor__&&this.__accessor__.destroyed||!1}}}))});var k=c(null,{declaredClass:"esri.core.Accessor","-chains-":{initialize:"after",destroy:"before"},constructor:function(){if(this.constructor===k)throw Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{value:new a(this)});
if(0<arguments.length&&this.normalizeCtorArgs){for(var b=[],d=0;d<arguments.length;d++)b.push(arguments[d]);this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,b)}},__accessor__:null,postscript:function(a){var b=this.__accessor__;a=b.ctorArgs||a;var d;null!=this.getDefaults&&(d=this.getDefaults(a||{}),this.set(d));b.initialize();a&&(this.set(a),b.ctorArgs=null);b.constructed();this.initialize()},initialize:function(){},destroy:function(){if(this.destroyed)try{throw Error("instance is already destroyed");
}catch(e){console.warn(e.stack)}else l.removeTarget(this),this.__accessor__.destroy()},get:function(a){return f.get(this,a)},hasOwnProperty:function(a){return this.__accessor__?this.__accessor__.has(a):Object.prototype.hasOwnProperty.call(this,a)},keys:function(){return this.__accessor__?this.__accessor__.keys():[]},set:function(a,b){d.set(this,a,b);return this},watch:function(a,b,d){return l.watch(this,a,b,d)},_clearOverride:function(a){return this.__accessor__.clearOverride(a)},_override:function(a,
b){return this.__accessor__.override(a,b)},_isOverridden:function(a){return this.__accessor__.isOverridden(a)},notifyChange:function(a){this.__accessor__.propertyInvalidated(a)},_get:function(a){return this.__accessor__.internalGet(a)},_set:function(a,b){return this.__accessor__.internalSet(a,b)}});return k})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(c,a,f){function b(a,b){a&&!Array.isArray(a)&&"function"!==typeof a&&(b=a,a=null);a=a||[];b=b||{};return d([this].concat(a),
b)}function d(a,d){a&&!Array.isArray(a)&&"function"!==typeof a&&(d=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);d=d||{};var c,g;c=0;for(g=l.length;c<g;c++)l[c](a,d);a=f(a,d);a.createSubclass=b;c=0;for(g=k.length;c<g;c++)k[c](a);return a}var l=[],k=[];(function(a){a.hasMixin=function(a,b){a=Array.isArray(a)?a.reduce(function(a,b){return b._meta?a.concat(b._meta.bases):a},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof b)for(var d=a.length-1;0<=d;d--)if(a[d].prototype.declaredClass===
b)return!0;return-1!==a.indexOf(b)};a.safeMixin=function(a,b){return f.safeMixin(a,b)};a.before=function(a){l.push(a)};a.after=function(a){k.push(a)}})(d||(d={}));return d})},"esri/core/accessorSupport/Properties":function(){define("require exports ../has ../Logger ../ObjectPool ./extensions ./PropertyOrigin ./Store".split(" "),function(c,a,f,b,d,l,k,e){Object.defineProperty(a,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.Properties");c=function(){function a(a){this.host=a;this._origin=
k.OriginId.USER;this.ctorArgs=this.cursors=null;this.destroyed=!1;this.dirties={};this.lifecycle=0;this.overridden=null;this.store=new e.default;a=this.host.constructor.__accessorMetadata__;this.metadatas=a.properties;this.autoDestroy=a.autoDestroy}a.prototype.initialize=function(){this.lifecycle=1;l.instanceCreated(this.host,this.metadatas)};a.prototype.constructed=function(){this.lifecycle=2};a.prototype.destroy=function(){this.destroyed=!0;var a=this.cursors;if(this.cursors)for(var b=0,d=Object.getOwnPropertyNames(a);b<
d.length;b++){var c=d[b],e=a[c];if(e){for(;0<e.length;)e.pop().propertyDestroyed(this,c);a[c]=null}}if(this.autoDestroy)for(c in this.metadatas)(a=this.internalGet(c))&&a&&"function"===typeof a.destroy&&(a.destroy(),this.metadatas[c].nonNullable||this.internalSet(c,null))};Object.defineProperty(a.prototype,"initialized",{get:function(){return 0!==this.lifecycle},enumerable:!0,configurable:!0});a.prototype.clearOverride=function(a){this.isOverridden(a)&&(this.overridden[a]=!1,this.propertyInvalidated(a))};
a.prototype.get=function(a){var b=this.metadatas[a];if(this.store.has(a)&&!this.dirties[a])return this.store.get(a);var d=b.get;return d?(b=d.call(this.host),this.store.set(a,b,k.OriginId.COMPUTED),this.propertyCommitted(a),b):b.value};a.prototype.originOf=function(a){var b=this.store.originOf(a);return void 0===b&&(a=this.metadatas[a])&&a.hasOwnProperty("value")?"defaults":k.idToName(b)};a.prototype.has=function(a){return this.metadatas[a]?this.store.has(a):!1};a.prototype.internalGet=function(a){if(this.metadatas[a]){var b=
this.store;return b.has(a)?b.get(a):this.metadatas[a].value}};a.prototype.internalSet=function(a,b){if(this.metadatas[a]){var d=this.initialized?this._origin:k.OriginId.DEFAULTS,c=this.store.get(a,d);if(b!==c||!this.store.has(a,d)||this.isOverridden(a))this.propertyInvalidated(a),this.store.set(a,b,d),this.propertyCommitted(a)}};a.prototype.isOverridden=function(a){return null!=this.overridden&&!0===this.overridden[a]};a.prototype.keys=function(){return this.store.keys()};a.prototype.override=function(a,
b){if(this.metadatas[a]){this.overridden||(this.overridden={});var d=this.metadatas[a];if(!d.nonNullable||null!=b){if(d=d.cast){b=this.cast(d,b);var d=b.valid,c=b.value;h.release(b);if(!d)return;b=c}this.overridden[a]=!0;this.internalSet(a,b)}}};a.prototype.set=function(a,b){if(this.metadatas[a]){var d=this.metadatas[a];if(!d.nonNullable||null!=b){var c=d.set;if(d=d.cast){b=this.cast(d,b);var d=b.valid,e=b.value;h.release(b);if(!d)return;b=e}c?c.call(this.host,b):this.internalSet(a,b)}}};a.prototype.setDefaultOrigin=
function(a){this._origin=k.nameToId(a)};a.prototype.propertyInvalidated=function(a){var b=this.dirties,d=this.isOverridden(a),c=this.cursors&&this.cursors[a],e=this.metadatas[a].computes;if(c)for(var g=0;g<c.length;g++)c[g].propertyInvalidated(this,a);d||(b[a]=!0);if(e)for(a=0;a<e.length;a++)this.propertyInvalidated(e[a])};a.prototype.propertyCommitted=function(a){var b=this.cursors&&this.cursors[a];this.dirties[a]=!1;if(b)for(var d=0;d<b.length;d++)b[d].propertyCommitted(this,a)};a.prototype.addCursor=
function(a,b){this.cursors||(this.cursors={});var d=this.cursors[a];d||(this.cursors[a]=d=[]);d.push(b)};a.prototype.removeCursor=function(a,b){var d=this.cursors[a];this.cursors[a]&&(d.splice(d.indexOf(b),1),0===d.length&&(this.cursors[a]=null))};a.prototype.cast=function(a,b){var d=h.acquire();d.valid=!0;d.value=b;a&&(d.value=a.call(this.host,b,d));return d};return a}();f=function(){function a(){this.value=null;this.valid=!0}a.prototype.acquire=function(){this.valid=!0};a.prototype.release=function(){this.value=
null};return a}();var h=new d(f);a.default=c})},"esri/core/Logger":function(){define(["require","exports","./has"],function(c,a,f){var b={info:0,warn:1,error:2};c=function(){function a(b){void 0===b&&(b={});this.module=b.module||"";this.writer=b.writer||null;this.level=b.level||null;null!=b.enabled&&(this.enabled=!!b.enabled);a._loggers[this.module]=this;b=this.module.lastIndexOf(".");-1!==b&&(this.parent=a.getLogger(this.module.slice(0,b)))}a.prototype.log=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-
1]=arguments[d];this._isEnabled()&&this._matchLevel(a)&&(d=this._inheritedWriter())&&d.apply(void 0,[a,this.module].concat(b))};a.prototype.error=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["error"].concat(a))};a.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["warn"].concat(a))};a.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];this.log.apply(this,["info"].concat(a))};
a.prototype.getLogger=function(b){return a.getLogger(this.module+"."+b)};a.getLogger=function(b){var d=a._loggers[b];d||(d=new a({module:b}));return d};a.prototype._parentWithMember=function(a,b){for(var d=this;d&&null==d[a];)d=d.parent;return d?d[a]:b};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=function(a,b){for(var d=[],c=2;c<arguments.length;c++)d[c-2]=arguments[c];console[a].apply(console,["["+b+"]"].concat(d))};
a.prototype._matchLevel=function(a){return b[this._parentWithMember("level","error")]<=b[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",!0)};a._loggers={};return a}();c.getLogger("esri").level="warn";return c})},"esri/core/ObjectPool":function(){define(["require","exports"],function(c,a){var f=function(){return function(){}}();return function(){function a(a,b,c,e,h){void 0===e&&(e=1);void 0===h&&(h=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=b;this.releaseFunction=
c;this.growthSize=e;!0===b?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof b&&(this.acquireFunction=b);this._pool=Array(h);this._set=new Set;this._initialSize=h;for(a=0;a<h;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(e,1)}a.prototype.acquire=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];b=this.classConstructor||f;if(0===this._pool.length)for(var c=this.growthSize,e=0;e<c;e++)this._pool[e]=new b;b=this._pool.pop();this.acquireFunction?
this.acquireFunction.apply(this,[b].concat(a)):b&&b.acquire&&"function"===typeof b.acquire&&b.acquire.apply(b,a);this._set.delete(b);return b};a.prototype.release=function(a){a&&!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"===typeof a.release&&a.release(),this._pool.push(a),this._set.add(a))};a.prototype.prune=function(a){void 0===a&&(a=this._initialSize);if(!(this._pool.length<=a))for(var b;a>this._pool.length;)b=this._pool.shift(),this._set.delete(b),
b.dispose&&"function"===typeof b.dispose&&b.dispose()};a.prototype._constructorAcquireFunction=function(a){for(var b=[],d=1;d<arguments.length;d++)b[d-1]=arguments[d];var c;(c=this.classConstructor).call.apply(c,[a].concat(b))};return a}()})},"esri/core/accessorSupport/extensions":function(){define(["require","exports","./extensions/aliasedProperty","./extensions/computedProperty","./extensions/serializableProperty"],function(c,a,f,b,d){Object.defineProperty(a,"__esModule",{value:!0});var l=[f.default,
b.default,d.default];a.processPrototypeMetadatas=function(a,b){for(var d=Object.getOwnPropertyNames(a),c=0;c<l.length;c++){var e=l[c];if(e.processPrototypePropertyMetadata)for(var q=0,k=d;q<k.length;q++){var f=k[q];e.processPrototypePropertyMetadata(f,a[f],a,b)}}};a.processClassMetadatas=function(a,b){for(var d=Object.getOwnPropertyNames(a),c=0;c<l.length;c++){var e=l[c];if(e.processClassPropertyMetadata)for(var q=0,k=d;q<k.length;q++){var f=k[q];e.processClassPropertyMetadata(f,a[f],a,b)}}};a.instanceCreated=
function(a,b){for(var d=Object.getOwnPropertyNames(b),c=0;c<l.length;c++){var e=l[c];e.instanceCreated&&e.instanceCreated(a,b,d)}}})},"esri/core/accessorSupport/extensions/aliasedProperty":function(){define("require exports ../../has ../get ../set ../utils ../wire".split(" "),function(c,a,f,b,d,l,k){function e(a,b,d){var c=l.getProperties(a);return k.wire(a,d.aliasOf,function(){c.propertyInvalidated(b)})}Object.defineProperty(a,"__esModule",{value:!0});a.AliasedPropertyExtension={processClassPropertyMetadata:function(a,
c,e,q){var g=c.aliasOf;if(g&&(a=g.split(".")[0],null!=e[a]&&!c.set&&!c.get)){var p;c.get=function(){var a=b.default(this,g);if("function"===typeof a){p||(p=g.split(".").slice(0,-1).join("."));var d=b.default(this,p);d&&(a=a.bind(d))}return a};c.readOnly||(c.set=function(a){return d.default(this,g,a)})}},instanceCreated:function(a,b,d){for(var c=0;c<d.length;c++){var g=d[c],p=b[g];p.aliasOf&&e(a,g,p)}}};a.default=a.AliasedPropertyExtension})},"esri/core/accessorSupport/get":function(){define(["require",
"exports","./utils"],function(c,a,f){function b(a,b,d){if(null!=d.getItemAt||Array.isArray(d)){var c=parseInt(a,10);if(!isNaN(c))return Array.isArray(d)?d[c]:d.getItemAt(c)}c=f.getProperties(d);return b?f.isPropertyDeclared(c,a)?c.get(a):d[a]:f.isPropertyDeclared(c,a)?c.internalGet(a):d[a]}function d(a,c,p,g){if(null==a)return a;if((a=b(c[g],p,a))||!(g<c.length-1))return g===c.length-1?a:d(a,c,p,g+1)}function l(a,c,p,g){void 0===p&&(p=!1);void 0===g&&(g=0);return"string"===typeof c&&-1===c.indexOf(".")?
b(c,p,a):d(a,f.pathToArray(c),p,g)}function k(a,b){return l(a,b,!0)}Object.defineProperty(a,"__esModule",{value:!0});a.valueOf=l;a.get=k;a.exists=function(a,b){return void 0!==l(b,a,!0)};a.default=k})},"esri/core/accessorSupport/utils":function(){define(["require","exports","../lang"],function(c,a,f){function b(a,d,c){return d?Object.keys(d).reduce(function(a,e){var g=null,p="merge";c&&(g=c.path?c.path+"."+e:e,p=c.policy(g));if("replace"===p)return a[e]=d[e],a;if(void 0===a[e])return a[e]=f.clone(d[e]),
a;var h=a[e],p=d[e];if(h===p)return a;if(Array.isArray(p)||Array.isArray(a))h=h?Array.isArray(h)?a[e]=h.concat():a[e]=[h]:a[e]=[],p&&(Array.isArray(p)||(p=[p]),p.forEach(function(a){-1===h.indexOf(a)&&h.push(a)}));else if(p&&"object"===typeof p)if(c){var q=c.path;c.path=g;a[e]=b(h,p,c);c.path=q}else a[e]=b(h,p,null);else if(!a.hasOwnProperty(e)||d.hasOwnProperty(e))a[e]=p;return a},a||{}):a}function d(a){return Array.isArray(a)?a:a.split(".")}function l(a){if(Array.isArray(a)||-1<a.indexOf(",")){a=
Array.isArray(a)?a:a.split(",");for(var b=0;b<a.length;b++)a[b]=a[b].trim();return 1===a.length?a[0]:a}return a.trim()}function k(a){var b=!1;return function(){b||(b=!0,a())}}Object.defineProperty(a,"__esModule",{value:!0});a.getProperties=function(a){return a?a.__accessor__?a.__accessor__:a.propertyInvalidated?a:null:null};a.isPropertyDeclared=function(a,b){return a&&a.metadatas&&null!=a.metadatas[b]};a.merge=function(a,d,c){return c?b(a,d,{policy:c,path:""}):b(a,d,null)};a.pathToStringOrArray=function(a){return a?
"string"===typeof a&&-1===a.indexOf(".")?a:d(a):a};a.pathToArray=d;a.splitPath=l;a.parseConditionalPath=function(a){if(-1===a.indexOf("?"))return null;a=d(a);for(var b=Array(a.length),c=0;c<a.length;c++){var e=a[c];b[c]="?"===e[e.length-1];b[c]&&(a[c]=e.slice(0,-1))}return{fullPath:a.join("."),conditional:b}};a.parse=function(a,b,d,c){b=l(b);if(Array.isArray(b)){var e=b.map(function(b){return c(a,b.trim(),d)});return{remove:k(function(){return e.forEach(function(a){return a.remove()})})}}return c(a,
b.trim(),d)};a.once=k})},"esri/core/accessorSupport/set":function(){define(["require","exports","../has","../Logger","./get"],function(c,a,f,b,d){function l(a,b,c){if(a&&b)if("object"===typeof b){c=0;for(var e=Object.getOwnPropertyNames(b);c<e.length;c++){var g=e[c];l(a,g,b[g])}}else"_"!==b[0]&&(-1!==b.indexOf(".")?(b=b.split("."),g=b.splice(b.length-1,1)[0],l(d.default(a,b),g,c)):a[b]=c)}Object.defineProperty(a,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.set");a.set=l;a.default=
l})},"esri/core/accessorSupport/wire":function(){define(["require","exports","./utils"],function(c,a,f){function b(a,b,c){b=f.splitPath(b);if(Array.isArray(b)){for(var g=[],p=0;p<b.length;p++)g.push((new d(b[p],c)).install(a));return new e(g)}a=(new d(b,c)).install(a);return new h(a)}Object.defineProperty(a,"__esModule",{value:!0});var d=function(){function a(a,b){this.path=a;this.callback=b;this.conditional=this.chain=null;if(-1<a.indexOf(".")){if(a=f.parseConditionalPath(a))this.path=a.fullPath,
this.conditional=a.conditional;this.chain=f.pathToArray(this.path)}this.callback=b;return this}a.prototype.install=function(a){a=this.chain?new k(this,a):new l(this,a);return a};a.prototype.notify=function(a){this.callback(a,this.path)};return a}(),l=function(){function a(a,b){this.binding=a;this.target=b;f.getProperties(b).addCursor(this.binding.path,this)}a.prototype.destroy=function(){this.target&&(f.getProperties(this.target).removeCursor(this.binding.path,this),this.target=this.binding=null)};
a.prototype.propertyDestroyed=function(a,b){f.getProperties(this.target).removeCursor(b,this)};a.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,b){this.binding&&this.binding.notify(this.target)};return a}(),k=function(){function a(a,b){this.binding=a;this.target=b;this.stack=[];this.properties=f.getProperties(b);this.stack.push({properties:this.properties,propertyName:a.chain[0]});this.properties.addCursor(a.chain[0],
this);this.moveForward();return this}a.prototype.destroy=function(){for(;;){var a=this.stack.pop();if(null==a)break;a.properties.removeCursor(a.propertyName,this)}this.target=this.binding=null};a.prototype.propertyDestroyed=function(a,b){this.moveBackward(a,b)};a.prototype.propertyInvalidated=function(a,b){this.binding&&this.binding.notify(this.target)};a.prototype.propertyCommitted=function(a,b){this.binding&&(this.moveBackward(a,b),this.moveForward(),this.binding.notify(this.target))};a.prototype.moveBackward=
function(a,b){for(var d=this.stack,c=d[d.length-1];c.properties!==a&&c.propertyName!==b;)c.properties.removeCursor(c.propertyName,this),d.pop(),c=d[d.length-1]};a.prototype.moveForward=function(){var a=this.stack,b=a[a.length-1],b=b.properties.internalGet(b.propertyName);if((b=f.getProperties(b))&&a.length<this.binding.chain.length){var d=this.binding.chain[a.length];this.binding.conditional&&this.binding.conditional[a.length]&&!b.metadatas[d]||(this.stack.push({properties:b,propertyName:d}),b.addCursor(d,
this),this.moveForward())}};return a}(),e=function(){function a(a){this.cursors=a}a.prototype.remove=function(){for(var a=this.cursors;0<a.length;)a.pop().destroy();this.cursors=null};return a}(),h=function(){function a(a){this.cursor=a}a.prototype.remove=function(){this.cursor.destroy();this.cursor=null};return a}();a.create=function(a,b){a=f.splitPath(a);if(Array.isArray(a)){for(var c=[],g=0;g<a.length;g++)c.push(new d(a[g],b));return function(a){for(var b=[],d=0;d<c.length;d++)b[d]=c[d].install(a);
return new e(b)}}var p=new d(a,b);return function(a){return new h(p.install(a))}};a.wire=b;a.default=b})},"esri/core/accessorSupport/extensions/computedProperty":function(){define("require exports ../../has ../../Logger ../utils ../wire".split(" "),function(c,a,f,b,d,l){Object.defineProperty(a,"__esModule",{value:!0});b.getLogger("esri.core.accessorSupport.extensions.computedProperty");a.ComputedPropertyExtension={processClassPropertyMetadata:function(a,b,c,p){b.dependsOn&&(c=void 0,c=b.dependsOn.slice())&&
(b.wire=l.create(c,function(b){return d.getProperties(b).propertyInvalidated(a)}))},instanceCreated:function(a,b,d){for(var c=0;c<d.length;c++){var e=b[d[c]];e.wire&&e.wire(a)}}};a.default=a.ComputedPropertyExtension})},"esri/core/accessorSupport/extensions/serializableProperty":function(){define("require exports ../ensureType ./serializableProperty/originAliases ./serializableProperty/reader ./serializableProperty/shorthands ./serializableProperty/writer".split(" "),function(c,a,f,b,d,l,k){function e(a,
b,d){var c=a&&a.json;a&&a.json&&a.json.origins&&d&&(a=a.json.origins[d.origin])&&b in a&&(c=a);return c}Object.defineProperty(a,"__esModule",{value:!0});a.originSpecificReadPropertyDefinition=function(a,b){return e(a,"read",b)};a.originSpecificWritePropertyDefinition=function(a,b){return e(a,"write",b)};a.SerializablePropertyExtension={processPrototypePropertyMetadata:function(a,c,e,q){if(l.process(c)){b.process(c);e=c.type;q=0;if(!f.isOneOf(e))for(;Array.isArray(e);)e=e[0],q++;if(c.json.origins)for(var g in c.json.origins){var p=
c.json.origins[g];d.create(e,q,a,p);k.create(e,q,a,p)}d.create(e,q,a,c.json);k.create(e,q,a,c.json)}}};a.default=a.SerializablePropertyExtension})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(c,a,f){function b(a,n){return n.isInstanceOf?n.isInstanceOf(a):n instanceof a}function d(a){return null==a?a:new Date(a)}function l(a){return null==a?a:!!a}function k(a){return null==a?a:a.toString()}function e(a){return null==a?a:parseFloat(a)}function h(a){return null==
a?a:Math.round(parseFloat(a))}function p(a){return a&&a.constructor&&void 0!==a.constructor._meta}function g(a,n){return null!=n&&a&&!b(a,n)}function q(a){return a&&("isCollection"in a||a._meta&&a._meta.bases&&a._meta.bases.some(function(a){return"isCollection"in a}))}function v(a){return a&&a.Type?"function"===typeof a.Type?a.Type:a.Type.base:null}function y(a,n){if(!n||!n.constructor||!q(n.constructor))return C(a,n)?n:new a(n);var b=v(a.prototype.itemType),t=v(n.constructor.prototype.itemType);
if(!b)return n;if(!t)return new a(n);if(b===t)return n;if((t=t._meta&&t._meta.bases)&&-1!==t.indexOf(b))return new a(n);C(a,n);return n}function C(a,n){return p(n)?(G.error("Accessor#set","Assigning an instance of '"+(n.declaredClass||"unknown")+"' which is not a subclass of '"+(a&&a.prototype&&a.prototype.declaredClass||"unknown")+"'"),!0):!1}function B(a,n){return null==n?n:q(a)?y(a,n):g(a,n)?C(a,n)?n:new a(n):n}function r(a){switch(a){case Number:return e;case F:return h;case Boolean:return l;
case String:return k;case Date:return d;default:return B.bind(null,a)}}function A(a,n){var b=r(a);return 1===arguments.length?b:b(n)}function u(a,n){return 1===arguments.length?u.bind(null,a):n?Array.isArray(n)?n.map(a):[a(n)]:n}function n(a,b,t){return 0!==b&&Array.isArray(t)?t.map(function(t){return n(a,b-1,t)}):a(t)}function t(a,b,d){if(2===arguments.length)return t.bind(null,a,b);if(!d)return d;d=n(a,b,d);for(var c=b,x=d;0<c&&Array.isArray(x);)c--,x=x[0];if(void 0!==x)for(x=0;x<c;x++)d=[d];return d}
function x(a,n){if(2===arguments.length)return x(a).call(null,n);for(var b=new Set,t=0;t<a.length;t++)b.add(a[t]);var d=null;return function(n,t){if(null==n)return n;b.has(n)||(d||(d=a.map(function(a){return"string"===typeof a?"'"+a+"'":""+a}).join(", ")),G.error("Accessor#set","'"+n+"' is not a valid value for this property, only the following values are valid: "+d),t&&(t.valid=!1));return n}}function D(a,n){if(2===arguments.length)return D(a).call(null,n);var b={},t=[],d=[],c;for(c in a.typeMap){var x=
a.typeMap[c];b[c]=A(x);t.push(x&&x.prototype&&x.prototype.declaredClass||"unknown");d.push(c)}var e="string"===typeof a.key?function(n){return n[a.key]}:a.key;return function(n){if(a.base&&!g(a.base,n))return n;var c=e(n)||a.defaultKeyValue,x=b[c];if(!x)return G.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+t.join("', '")+"'")+", or a plain object that can autocast (having .type \x3d "+("'"+d.join("', '")+"'")+")"),null;if(!g(a.typeMap[c],n))return n;if("string"!==
typeof a.key||p(n))return x(n);var c={},A;for(A in n)A!==a.key&&(c[A]=n[A]);return x(c)}}Object.defineProperty(a,"__esModule",{value:!0});var G=f.getLogger("esri.core.Accessor");a.isInstanceOf=b;a.ensureDate=d;a.ensureBoolean=l;a.ensureString=k;a.ensureNumber=e;a.ensureInteger=h;a.isClassedType=p;a.requiresType=g;a.ensureClass=B;a.ensureType=A;a.ensureArrayTyped=u;a.ensureArray=function(a,n){return 1===arguments.length?u(A.bind(null,a)):u(A.bind(null,a),n)};a.ensureNArrayTyped=t;a.ensureNArray=function(a,
n,b){return 2===arguments.length?t(A.bind(null,a),n):t(A.bind(null,a),n,b)};a.isOneOf=function(a){if(!Array.isArray(a))return!1;a=typeof a[0];return"string"===a||"number"===a};a.ensureOneOf=x;a.ensureOneOfType=D;var F=function(){return function(){}}();a.Integer=F;a.default=A})},"esri/core/accessorSupport/extensions/serializableProperty/originAliases":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){if(a.json&&a.json.origins){var b=
a.json.origins,d={"web-document":["web-scene","web-map"]};a=function(a){if(b[a]){var c=b[a];d[a].forEach(function(a){b[a]=c});delete b[a]}};for(var c in d)a(c)}}})},"esri/core/accessorSupport/extensions/serializableProperty/reader":function(){define(["require","exports","../../../object","./type"],function(c,a,f,b){function d(a,b,d,c){if(1<b)return e(a,b);if(1===b)return h(a);if(p(a)){var g=h(a.prototype.itemType.Type);return function(b,d,c){return(b=g(b,d,c))?new a(b):b}}return l(a)}function l(a){return a.prototype.read?
function(b,d,c){return null==b?b:(new a).read(b,c)}:a.fromJSON}function k(a,b,d,c){return 0!==c&&Array.isArray(b)?b.map(function(b){return k(a,b,d,c-1)}):a(b,null,d)}function e(a,b){a=l(a);var d=k.bind(null,a);return function(a,c,e){if(null==a)return a;a=d(a,e,b);c=b;for(e=a;0<c&&Array.isArray(e);)c--,e=e[0];if(void 0!==e)for(e=0;e<c;e++)a=[a];return a}}function h(a){var b=l(a);return function(a,d,c){return null==a?a:Array.isArray(a)?a.map(function(a){return b(a,null,c)}):[b(a,null,c)]}}function p(a){return b.isCollection(a)?
(a=a.prototype.itemType)&&a.Type&&"function"===typeof a.Type?g(a.Type):!1:!1}function g(a){return Array.isArray(a)?!1:!!a&&a.prototype&&("read"in a.prototype||"fromJSON"in a||p(a))}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(a,b,c,e){(!e.read||!e.read.reader&&!1!==e.read.enabled)&&g(a)&&f.setDeepValue("read.reader",d(a,b,c,e),e)}})},"esri/core/object":function(){define(["require","exports"],function(c,a){function f(a,d,c){for(var b=0;b<a.length;b++){var e=a[b];if(!(e in c))if(d)c[e]=
{};else return;c=c[e]}return c}Object.defineProperty(a,"__esModule",{value:!0});a.getDeepValue=function(a,d){return f(a.split("."),!1,d)};a.setDeepValue=function(a,d,c){var b=a.split(".");a=b.pop();(c=f(b,!0,c))&&a&&(c[a]=d)}})},"esri/core/accessorSupport/extensions/serializableProperty/type":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.isCollection=function(a){return!!a&&a.prototype&&a.prototype.declaredClass&&0===a.prototype.declaredClass.indexOf("esri.core.Collection")}})},
"esri/core/accessorSupport/extensions/serializableProperty/shorthands":function(){define(["require","exports"],function(c,a){function f(a){"boolean"===typeof a.read?a.read={enabled:a.read}:"function"===typeof a.read?a.read={enabled:!0,reader:a.read}:a.read&&"object"===typeof a.read&&void 0===a.read.enabled&&(a.read.enabled=!0)}function b(a){"boolean"===typeof a.write?a.write={enabled:a.write}:"function"===typeof a.write?a.write={enabled:!0,writer:a.write}:a.write&&"object"===typeof a.write&&void 0===
a.write.enabled&&(a.write.enabled=!0)}Object.defineProperty(a,"__esModule",{value:!0});a.process=function(a){a.json||(a.json={});f(a.json);b(a.json);if(a.json.origins)for(var c in a.json.origins)f(a.json.origins[c]),b(a.json.origins[c]);return!0}})},"esri/core/accessorSupport/extensions/serializableProperty/writer":function(){define(["require","exports","../../../object","./type"],function(c,a,f,b){function d(a,b,c,d){f.setDeepValue(c,l(a,d),b)}function l(a,b){return a&&"function"===typeof a.write?
a.write({},b):a&&"function"===typeof a.toJSON?a.toJSON():"number"===typeof a?-Infinity===a?-Number.MAX_VALUE:Infinity===a?Number.MAX_VALUE:isNaN(a)?null:a:a}function k(a,b,c,d){null===a?a=null:a&&"function"===typeof a.map?(a=a.map(function(a){return l(a,d)}),"function"===typeof a.toArray&&(a=a.toArray())):a=[l(a,d)];f.setDeepValue(c,a,b)}function e(a,b,c){return 0!==c&&Array.isArray(a)?a.map(function(a){return e(a,b,c-1)}):l(a,b)}function h(a){return function(b,c,d,p){if(null===b)b=null;else{b=e(b,
p,a);p=a;for(var g=b;0<p&&Array.isArray(g);)p--,g=g[0];if(void 0!==g)for(g=0;g<p;g++)b=[b]}f.setDeepValue(d,b,c)}}Object.defineProperty(a,"__esModule",{value:!0});a.create=function(a,c,e,f){f.write&&!f.write.writer&&!1!==f.write.enabled&&(1===c||b.isCollection(a)?f.write.writer=k:f.write.writer=1<c?h(c):d)}})},"esri/core/accessorSupport/PropertyOrigin":function(){define(["require","exports"],function(c,a){function f(a){switch(a){case "defaults":return d.DEFAULTS;case "service":return d.SERVICE;case "portal-item":return d.PORTAL_ITEM;
case "web-scene":return d.WEB_SCENE;case "web-map":return d.WEB_MAP;case "user":return d.USER}}function b(a){switch(a){case d.DEFAULTS:return"defaults";case d.SERVICE:return"service";case d.PORTAL_ITEM:return"portal-item";case d.WEB_SCENE:return"web-scene";case d.WEB_MAP:return"web-map";case d.USER:return"user"}}Object.defineProperty(a,"__esModule",{value:!0});var d;(function(a){a[a.DEFAULTS=0]="DEFAULTS";a[a.COMPUTED=1]="COMPUTED";a[a.SERVICE=2]="SERVICE";a[a.PORTAL_ITEM=3]="PORTAL_ITEM";a[a.WEB_SCENE=
4]="WEB_SCENE";a[a.WEB_MAP=5]="WEB_MAP";a[a.USER=6]="USER";a[a.NUM=7]="NUM"})(d=a.OriginId||(a.OriginId={}));a.nameToId=f;a.idToName=b;a.readableNameToId=function(a){return f(a)};a.idToReadableName=function(a){return b(a)};a.writableNameToId=function(a){return f(a)};a.idToWritableName=function(a){return b(a)}})},"esri/core/accessorSupport/Store":function(){define(["require","exports","./PropertyOrigin"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){this._values=
{}}a.prototype.get=function(a){return this._values[a]};a.prototype.originOf=function(a){return f.OriginId.USER};a.prototype.keys=function(){return Object.keys(this._values)};a.prototype.set=function(a,b){this._values[a]=b};a.prototype.clear=function(a){delete this._values[a]};a.prototype.has=function(a){return a in this._values};return a}();a.default=c})},"esri/core/accessorSupport/introspection":function(){define("require exports ../object ./ensureType ./extensions ./metadata ./utils ./decorators/cast".split(" "),
function(c,a,f,b,d,l,k,e){function h(a){return y.test(a)?"replace":"merge"}Object.defineProperty(a,"__esModule",{value:!0});var p=Object.prototype.hasOwnProperty,g=/^_([a-zA-Z0-9]+)(Getter|Setter|Reader|Writer|Caster)$/,q={Getter:"get",Setter:"set",Reader:"json.read.reader",Writer:"json.write.writer",Caster:"cast"},v=/^_(set|get)([a-zA-Z0-9]+)Attr$/;a.processPrototype=function(a){for(var c=a.declaredClass,e=a.properties||{},A=0,h=Object.getOwnPropertyNames(e);A<h.length;A++){var n=h[A],t=e[n],x=typeof t;
null==t?l.setPropertyMetadata(a,n,{value:t}):Array.isArray(t)?l.setPropertyMetadata(a,n,{type:[t[0]],value:null}):"object"===x?k.getProperties(t)||t instanceof Date?l.setPropertyMetadata(a,n,{type:t.constructor,value:t}):l.setPropertyMetadata(a,n,t):"boolean"===x?l.setPropertyMetadata(a,n,{type:Boolean,value:t}):"string"===x?l.setPropertyMetadata(a,n,{type:String,value:t}):"number"===x?l.setPropertyMetadata(a,n,{type:Number,value:t}):"function"===x&&l.setPropertyMetadata(a,n,{type:t,value:null})}A=
0;for(h=Object.getOwnPropertyNames(a);A<h.length;A++){var x=h[A],t=a[x],e=n=void 0,y=g.exec(x);if(y)n=y[1],e=q[y[2]];else if(y=v.exec(x))n=y[2][0].toLowerCase()+y[2].substr(1),e=y[1].toLowerCase();n&&e&&(n=l.getPropertyMetadata(a,n),f.setDeepValue(e,t,n))}A=0;for(h=Object.getOwnPropertyNames(l.getPropertiesMetadata(a));A<h.length;A++)if(n=h[A],t=l.getPropertyMetadata(a,n),e=t.type,x=t.types,void 0===t.value&&p.call(a,n)&&(t.value=a[n]),!t.cast&&e){n=t;if(b.isOneOf(e))e=b.ensureOneOf(e);else{t=0;for(x=
e;Array.isArray(x);)x=x[0],t++;e=1===t?b.ensureArray(x):1<t?b.ensureNArray(x,t):b.ensureType(e)}n.cast=e}else!t.cast&&x&&(Array.isArray(x)?t.cast=b.ensureArrayTyped(b.ensureOneOfType(x[0])):t.cast=b.ensureOneOfType(x));d.processPrototypeMetadatas(l.getPropertiesMetadata(a),c);return l.getPropertiesMetadata(a)};var y=/^properties\.[^.]+\.(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;a.processClass=function(a){for(var b=a.prototype,c=b.declaredClass,g=a._meta.bases,p={},n=g.length-1;0<=
n;n--)k.merge(p,l.getMetadata(g[n].prototype),h);var t=p.properties;d.processClassMetadatas(t,c);Object.defineProperty(a,"__accessorMetadata__",{value:{properties:t,autoDestroy:!!p.autoDestroy}});for(var x={},c=function(a){var n=t[a];x[a]={enumerable:!0,configurable:!0,get:function(){return this.__accessor__?this.__accessor__.get(a):n.value},set:function(b){var c=this.__accessor__;if(!c)Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!0,value:b});else if(!Object.isFrozen(this)){if(c.initialized&&
n.readOnly)throw new TypeError("[accessor] cannot assign to read-only property '"+a+"' of "+this.declaredClass);if(2===c.lifecycle&&n.constructOnly)throw new TypeError("[accessor] cannot assign to construct-only property '"+a+"' of "+this.declaredClass);c.set(a,b)}}}},g=0,n=Object.getOwnPropertyNames(t);g<n.length;g++)c(n[g]);Object.defineProperties(a.prototype,x);if(p.parameters)for(a=0,c=Object.getOwnPropertyNames(p.parameters);a<c.length;a++)g=c[a],n=Object.getOwnPropertyDescriptor(b,g)||{value:b[g]},
(n=e.autocastMethod(b,g,n))&&Object.defineProperty(b,g,n);return p}})},"esri/core/accessorSupport/metadata":function(){define(["require","exports"],function(c,a){function f(a){return null!=a.__accessorMetadata__}function b(a){return f(a)&&null!=d(a).properties}function d(a){a.__accessorMetadata__||Object.defineProperty(a,"__accessorMetadata__",{value:{},enumerable:!0,configurable:!0,writable:!0});return a.__accessorMetadata__}function l(a){a=d(a);var b=a.properties;b||(b=a.properties={});return b}
function k(a,b){var c=d(a);a=c.parameters;a||(a=c.parameters={});c=a[b];c||(c=[],a[b]=c);return c}Object.defineProperty(a,"__esModule",{value:!0});a.hasMetadata=f;a.hasPropertiesMetadata=b;a.hasPropertyMetadata=function(a,c){return b(a)&&null!=l(a)[c]};a.hasParametersMetadata=function(a,b){return f(a)&&null!=d(a).parameters&&null!=d(a).parameters[b]};a.getMetadata=d;a.getPropertiesMetadata=l;a.getPropertyMetadata=function(a,b){a=l(a);var c=a[b];c||(c=a[b]={});return c};a.setPropertyMetadata=function(a,
b,c){l(a)[b]=c};a.getParametersMetadata=k;a.getParameterMetadata=function(a,b,c){var d=k(a,b)[c];d||(k(a,b)[c]=d={index:c});return d}})},"esri/core/accessorSupport/decorators/cast":function(){define(["require","exports","../ensureType","../metadata"],function(c,a,f,b){function d(a){var b="_meta"in a?f.ensureType(a):a;return function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];a.push(b);return"number"===typeof a[2]?k.apply(this,a):l.apply(this,a)}}function l(a,c,d,e){b.getPropertyMetadata(a,
c).cast=e}function k(a,c,d,e){b.getParameterMetadata(a,c,d).cast=e}function e(a){return function(c,d,e){b.getPropertyMetadata(c,a).cast=c[d]}}Object.defineProperty(a,"__esModule",{value:!0});var h=Object.prototype.toString;a.autocastMethod=function(a,c,d){if(b.hasParametersMetadata(a,c)){var e=b.getParametersMetadata(a,c).filter(function(a){return null!=a.cast});if(e.length){var g=d.value;d.value=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];for(b=0;b<e.length;b++){var c=e[b];
a[c.index]=c.cast(a[c.index])}return g.apply(this,a)};return d}console.warn("Method "+a.declaredClass+"::"+c+" is decorated with @cast but no parameters are decorated")}};a.cast=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(3!==a.length||"string"!==typeof a[1]){if(1===a.length&&"[object Function]"===h.call(a[0]))return d(a[0]);if(1===a.length&&"string"===typeof a[0])return e(a[0])}}})},"esri/core/accessorSupport/watch":function(){define("require exports ../ArrayPool ../lang ../ObjectPool ../scheduling ./get ./utils ./wire".split(" "),
function(c,a,f,b,d,l,k,e,h){function p(a){A.has(a)?u.splice(u.indexOf(a),1):A.add(a);u.push(a);n||(n=l.schedule(q))}function g(a){if(!a.removed){var n=a.callback,c=a.path,t=a.oldValue,d=a.target,x=k.valueOf(d,a.propertyPath,!0);b.equals(t,x)||(a.oldValue=x,n.call(d,x,t,c,d))}}function q(){if(n){n=null;var a=u;u=r.acquire();A.clear();for(var b=r.acquire(),c=0;c<a.length;c++){var d=a[c];g(d);d.removed&&b.push(d)}for(c=0;c<u.length;c++)d=u[c],d.removed&&(b.push(d),A.delete(d),u.splice(c,1),--c);for(c=
0;c<b.length;c++)B.pool.release(b[c]);r.release(a);r.release(b);t.forEach(function(a){return a()})}}function v(a,n,b){var c=e.parse(a,n,b,function(a,n,b){var t=k.valueOf(a,n,!0),d,x=h.wire(a,n,function(a,n){a.__accessor__.destroyed?c.remove():(d||(d=B.pool.acquire(a,n,t,b),t=null),p(d))});return{remove:e.once(function(){x.remove();d&&(d.removed=!0,p(d),d=null);c=x=t=null})}});return c}function y(a,n,c){var t=e.parse(a,n,c,function(a,n,c){var d=k.valueOf(a,n,!0),x=!1;return h.wire(a,n,function(a,n){if(a.__accessor__.destroyed)t.remove();
else if(!x){x=!0;var e=k.valueOf(a,n,!0);b.equals(d,e)||c.call(a,e,d,n,a);d=k.valueOf(a,n,!0);x=!1}})});return t}function C(a,n,b,c){void 0===c&&(c=!1);return!a.__accessor__||a.__accessor__.destroyed?{remove:function(){}}:c?y(a,n,b):v(a,n,b)}Object.defineProperty(a,"__esModule",{value:!0});var B=function(){function a(a,n,b,c){this.target=a;this.path=n;this.oldValue=b;this.callback=c;this.removed=!1;this.propertyPath=e.pathToStringOrArray(n)}a.prototype.release=function(){this.target=this.path=this.propertyPath=
this.callback=this.oldValue=null;this.removed=!0};a.pool=new d(a,!0);return a}(),r=new f,A=new Set,u=r.acquire(),n;a.dispatchTarget=function(a){for(var n=r.copy(u),b=0;b<n.length;b++){var c=n[b];c.target===a&&(g(c),A.delete(c),u.splice(u.indexOf(c),1))}};a.removeTarget=function(a){for(var n=0;n<u.length;n++){var b=u[n];b.target===a&&(b.removed=!0)}};a.dispatch=q;var t=new Set;a.afterDispatch=function(a){t.add(a);return{remove:function(){t.delete(a)}}};a.watch=C;a.isValueInUse=function(a){return u.some(function(n){return n.oldValue===
a})};a.default=C})},"esri/core/ArrayPool":function(){define(["require","exports","./ObjectPool"],function(c,a,f){function b(a){a.length=0}var d=Array.prototype.splice;c=function(){function a(a,c){void 0===a&&(a=50);void 0===c&&(c=50);this._pool=new f(Array,!1,b,c,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.copy=function(a){var b=this.acquire();a.unshift(0,0);d.apply(b,a);a.splice(0,2);return b};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return l.acquire()};
a.copy=function(a){return l.copy(a)};a.release=function(a){return l.release(a)};return a}();var l=new c(100);return c})},"esri/core/scheduling":function(){define(["require","exports","./nextTick","./now","./requestAnimationFrame"],function(c,a,f,b,d){function l(b){void 0===b&&(b=a.now());a.debug.rafId=null;0<n.length&&(a.debug.rafId=k());if(0<v){var c=b-v;B=Math.min(c,B);if(c<y)return}a.debug.executeFrameTasks(b)}function k(){return a.debug.requestNextFrame?a.debug.requestNextFrame(p):p()}function e(){for(var a=
0;a<n.length;){var b=n[a];a++;if(b.removed){n.splice(a-1,1);for(var c=0;c<A.length;c++){var d=A[c];if(b.phases[d]){var d=t[d],x=d.indexOf(b);-1!==x&&d.splice(x,1)}}}}}function h(){for(;u.length;){var n=u.shift();n.isActive&&(n.isActive=!1,n.callback())}a.debug.willDispatch=!1}function p(){return d(l)}Object.defineProperty(a,"__esModule",{value:!0});a.now=b;var g=function(){return function(a){this.phases=a;this.paused=!1;this.pausedAt=0;this.epoch=-1;this.dt=0;this.ticks=-1;this.removed=!1}}(),q=function(){function a(a){this.callback=
a;this.isActive=!0}a.prototype.remove=function(){this.isActive=!1};return a}(),v=-1,y=0,C=0,B=Number.POSITIVE_INFINITY,r={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0,spendInTask:0},A=["prepare","preRender","render","postRender","update"],u=[],n=[],t={prepare:[],preRender:[],render:[],postRender:[],update:[]},x=function(){function n(a){this._task=a}n.prototype.remove=function(){this._task.removed=!0};n.prototype.pause=function(){this._task.paused||(this._task.paused=!0,this._task.pausedAt=
a.now())};n.prototype.resume=function(){this._task.paused&&(this._task.paused=!1,-1!==this._task.epoch&&(this._task.epoch+=a.now()-this._task.pausedAt))};return n}();a.FrameTaskHandle=x;a.debug={frameTasks:n,rafId:null,requestNextFrame:null,willDispatch:!1,clearFrameTasks:function(a){void 0===a&&(a=!1);for(var b=0;b<n.length;b++)n[b].removed=!0;a&&e()},dispatch:h,executeFrameTasks:function(b){void 0===b&&(b=a.now());0>v&&(v=b);var c=b-v,d=0<C?C:B,x=Math.max(0,c-d);v=b;for(var g=0;g<n.length;g++){var p=
n[g];-1!==p.epoch&&(p.dt=c)}for(g=0;g<A.length;g++)for(var c=A[g],h=t[c],q=0;q<h.length;q++)p=h[(q+D)%h.length],p.paused||p.removed||(0===g&&p.ticks++,-1===p.epoch&&(p.epoch=b),r.time=b,r.deltaTime=p.dt,r.elapsedFrameTime=a.now()-b,r.frameDuration=d-x,r.spendInTask=b-p.epoch,p.phases[c].call(p,r));e();++D}};a.schedule=function(n){n=new q(n);u.push(n);a.debug.willDispatch||(a.debug.willDispatch=!0,f(h));return n};a.addFrameTask=function(b){var c=new g(b);n.push(c);for(var d=0,e=A;d<e.length;d++){var p=
e[d];b[p]&&t[p].push(c)}a.debug.rafId||(v=-1,a.debug.rafId=k());return new x(c)};a.setFrameRate=function(a){if(0>=a)C=y=0;else{var n=1.05*B;a=Math.ceil(1E3/a/n);y=(a-1)*n;C=a*B}};var D=0;a.requestNextFrame=k})},"esri/core/nextTick":function(){define(["require","exports","./global"],function(c,a,f){function b(){if(f.postMessage&&!f.importScripts){var a=f.onmessage,b=!0;f.onmessage=function(){b=!1};f.postMessage("","*");f.onmessage=a;return b}return!1}var d=f.MutationObserver||f.WebKitMutationObserver;
return function(){var a;if(f.process&&f.process.nextTick)a=function(a){f.process.nextTick(a)};else if(f.Promise)a=function(a){f.Promise.resolve().then(a)};else if(d){var c=[],e=document.createElement("div");(new d(function(){for(;0<c.length;)c.shift()()})).observe(e,{attributes:!0});a=function(a){c.push(a);e.setAttribute("queueStatus","1")}}else if(b()){var h=[];f.addEventListener("message",function(a){if(a.source===f&&"esri-nexttick-message"===a.data)for(a.stopPropagation();h.length;)h.shift()()},
!0);a=function(a){h.push(a);f.postMessage("esri-nexttick-message","*")}}else a=f.setImmediate?function(a){return f.setImmediate(a)}:function(a){return f.setTimeout(a,0)};return a}()})},"esri/core/now":function(){define(["require","exports","./global"],function(c,a,f){return function(){var a=f.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};if(a.msNow)return function(){return a.msNow()};
if(a.oNow)return function(){return a.oNow()};var c;c=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-c}}()})},"esri/core/requestAnimationFrame":function(){define(["require","exports","./global","./now"],function(c,a,f,b){var d=b();c=f.requestAnimationFrame;if(!c){a=["ms","moz","webkit","o"];for(var l=0;l<a.length&&!c;++l)c=f[a[l]+"RequestAnimationFrame"];c||(c=function(a){var c=b(),h=Math.max(0,16-(c-d)),p=f.setTimeout(function(){a(b())},
h);d=c+h;return p})}return c})},"esri/core/accessorSupport/decorators":function(){define("require exports ./decorators/aliasOf ./decorators/autoDestroy ./decorators/cast ./decorators/declared ./decorators/enumeration ./decorators/property ./decorators/reader ./decorators/shared ./decorators/subclass ./decorators/writer".split(" "),function(c,a,f,b,d,l,k,e,h,p,g,q){function v(b){for(var c in b)a.hasOwnProperty(c)||(a[c]=b[c])}Object.defineProperty(a,"__esModule",{value:!0});v(f);v(b);v(d);v(l);v(k);
v(e);v(h);v(p);v(g);v(q)})},"esri/core/accessorSupport/decorators/aliasOf":function(){define(["require","exports","../metadata"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.aliasOf=function(a){return function(b,c){f.getPropertyMetadata(b,c).aliasOf=a}}})},"esri/core/accessorSupport/decorators/autoDestroy":function(){define(["require","exports","../metadata"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.autoDestroy=function(){return function(a,c,l){f.getMetadata(a).autoDestroy=
!0;return a[c]}}})},"esri/core/accessorSupport/decorators/declared":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.declared=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];c=function(){return this||{}};c.__bases__=[a].concat(b);return c}})},"esri/core/accessorSupport/decorators/enumeration":function(){define(["require","exports","../../kebabDictionary","./property"],function(c,a,f,b){function d(a){return b.property({type:a})}
Object.defineProperty(a,"__esModule",{value:!0});a.enumeration=d;(function(a){a.serializable=function(){return function(a){a=a instanceof f.KebabDictionary?a:new f.KebabDictionary(a,{ignoreUnknown:!0});return b.property({type:a.apiValues,json:{type:a.jsonValues,read:{reader:a.read},write:{writer:a.write}}})}}})(d=a.enumeration||(a.enumeration={}))})},"esri/core/kebabDictionary":function(){define(["require","exports"],function(c,a){function f(a,c){void 0===c&&(c={});return new b(a,c)}var b=function(){function a(a,
b){var c=this;this.jsonToAPI=a;this.options=b;this.apiValues=[];this.jsonValues=[];this.apiToJSON=this.invertMap(a);this.apiValues=this.getKeysSorted(this.apiToJSON);this.jsonValues=this.getKeysSorted(this.jsonToAPI);this.read=function(a){return c.fromJSON(a)};this.write=function(a,b,d){a=c.toJSON(a);void 0!==a&&(b[d]=a)}}a.prototype.toJSON=function(a){return this.apiToJSON.hasOwnProperty(a)?this.apiToJSON[a]:this.options.ignoreUnknown?void 0:a};a.prototype.fromJSON=function(a){return this.jsonToAPI.hasOwnProperty(a)?
this.jsonToAPI[a]:this.options.ignoreUnknown?void 0:a};a.prototype.invertMap=function(a){var b={},c;for(c in a)b[a[c]]=c;return b};a.prototype.getKeysSorted=function(a){var b=[],c;for(c in a)b.push(c);b.sort();return b};return a}();(function(a){a.strict=function(){return function(b){return new a.KebabDictionary(b,{ignoreUnknown:!0})}};a.KebabDictionary=b})(f||(f={}));return f})},"esri/core/accessorSupport/decorators/property":function(){define("require exports ../../has ../../lang ../../Logger ../metadata".split(" "),
function(c,a,f,b,d,l){Object.defineProperty(a,"__esModule",{value:!0});d.getLogger("esri.core.accessorSupport.decorators.property");a.property=function(a){void 0===a&&(a={});return function(c,d){var e=c.constructor.prototype;if(e!==Function.prototype){(c=Object.getOwnPropertyDescriptor(c,d))&&(c.get||c.set)?(a=b.clone(a),c.set&&(a.set=c.set),c.get&&(a.get=c.get)):c&&c.hasOwnProperty("value")&&(a=b.clone(a),a.value=c.value);d=l.getPropertyMetadata(e,d);for(var g in a)e=a[g],Array.isArray(e)&&"type"!==
g?d[g]=(d[g]||[]).concat(e):d[g]=e}}};a.propertyJSONMeta=function(a,b,c){a=l.getPropertyMetadata(a.constructor.prototype,c);a.json||(a.json={});a=a.json;void 0!==b&&(a.origins||(a.origins={}),a.origins[b]||(a.origins[b]={}),a=a.origins[b]);return a}})},"esri/core/accessorSupport/decorators/reader":function(){define(["require","exports","../../object","./property"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});a.reader=function(a,c,k){var d,h;void 0===c||Array.isArray(c)?(h=a,
k=c,d=[void 0]):(h=c,d=Array.isArray(a)?a:[a]);return function(a,c,e){var g=a.constructor.prototype;d.forEach(function(d){d=b.propertyJSONMeta(a,d,h);d.read&&"object"!==typeof d.read&&(d.read={});f.setDeepValue("read.reader",g[c],d);k&&(d.read.source=(d.read.source||[]).concat(k))})}}})},"esri/core/accessorSupport/decorators/shared":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.shared=function(a){return function(b,c){b[c]=a}}})},"esri/core/accessorSupport/decorators/subclass":function(){define(["require",
"exports","../../declare","../metadata"],function(c,a,f,b){function d(a,b){a.read&&("function"===typeof a.read?b.push(a.read):"object"===typeof a.read&&a.read.reader&&b.push(a.read.reader))}function l(a,b){a.write&&("function"===typeof a.write?b.push(a.write):"object"===typeof a.write&&a.write.writer&&b.push(a.write.writer))}function k(a){var c=[];a=b.getPropertiesMetadata(a.prototype);if(!a)return c;for(var e in a){var g=a[e];g.cast&&c.push(g.cast);g.copy&&c.push(g.copy);if(g=g.json)if(d(g,c),l(g,
c),g=g.origins)for(var p in g){var h=g[p];d(h,c);l(h,c)}}return c}function e(a){var c={values:{},descriptors:{}},d=["__bases__"],e=b.getPropertiesMetadata(a.prototype),g=k(a);Object.getOwnPropertyNames(a.prototype).filter(function(b){return-1!==d.indexOf(b)||e&&e.hasOwnProperty(b)||!p(Object.getOwnPropertyDescriptor(a.prototype,b))&&-1!==g.indexOf(a.prototype[b])?!1:!0}).forEach(function(b){var d=Object.getOwnPropertyDescriptor(a.prototype,b);p(d)?c.descriptors[b]=d:c.values[b]=a.prototype[b]});return c}
function h(a){var b=Object.getOwnPropertyNames(a),c=Object.getPrototypeOf(a.prototype).constructor,d=Object.getOwnPropertyNames(Function);d.push("__bases__");var e=Object.getOwnPropertyNames(c),g={values:{},descriptors:{}};b.filter(function(b){return-1!==d.indexOf(b)?!1:-1===e.indexOf(b)||c[b]!==a[b]?!0:!1}).forEach(function(b){var c=Object.getOwnPropertyDescriptor(a,b);p(c)?g.descriptors[b]=c:g.values[b]=a[b]});return g}function p(a){return a&&!(!a.get&&!a.set)}Object.defineProperty(a,"__esModule",
{value:!0});a.subclass=function(a){return function(b){var c=e(b),d=h(b);null!=a&&(c.values.declaredClass=a);b=f(b.__bases__,c.values);Object.defineProperties(b.prototype,c.descriptors);for(var g in d.values)b[g]=d.values[g];Object.defineProperties(b,d.descriptors);return b}}})},"esri/core/accessorSupport/decorators/writer":function(){define(["require","exports","../../object","./property"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});a.writer=function(a,c,k){var d,h;void 0===
c?(h=a,d=[void 0]):"string"!==typeof c?(h=a,d=[void 0],k=c):(h=c,d=Array.isArray(a)?a:[a]);return function(a,c,e){var g=a.constructor.prototype;d.forEach(function(d){d=b.propertyJSONMeta(a,d,h);d.write&&"object"!==typeof d.write&&(d.write={});k&&f.setDeepValue("write.target",k,d);f.setDeepValue("write.writer",g[c],d)})}}})},"esri/layers/support/TileInfo":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ../../geometry/support/aaBoundingRect ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C){var B=e({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc"});return function(a){function c(n){n=a.call(this)||this;n.dpi=96;n.format=null;n.origin=null;n.minScale=0;n.maxScale=0;n.size=null;n.spatialReference=null;return n}b(c,a);e=c;c.create=function(a){void 0===a&&(a={size:256,spatialReference:l.SpatialReference.WebMercator});
var n=a.resolutionFactor||1,b=a.scales,c=a.size||256;a=a.spatialReference||l.SpatialReference.WebMercator;var d=v.getInfo(a),d=d?new l.Point(d.origin[0],d.origin[1],a):new l.Point(0,0,a),g=1/(39.37*q.getMetersPerUnitForSR(a)*96),A=[];if(b)for(var p=0;p<b.length;p++){var h=b[p],k=h*g;A.push({level:p,scale:h,resolution:k})}else for(h=v.isGeographic(a)?512/c*1.47748799285417E8:256/c*5.91657527591555E8,b=Math.ceil(24/n),A.push({level:0,scale:h,resolution:h*g}),p=1;p<b;p++)h/=Math.pow(2,n),k=h*g,A.push({level:p,
scale:h,resolution:k});return new e({dpi:96,lods:A,origin:d,size:c,spatialReference:a})};Object.defineProperty(c.prototype,"isWrappable",{get:function(){var a=this.spatialReference,b=this.origin;if(a&&b){var c=v.getInfo(a);return a.isWrappable&&Math.abs(c.origin[0]-b.x)<=c.dx}return!1},enumerable:!0,configurable:!0});c.prototype.readOrigin=function(a,b){return l.Point.fromJSON(f({spatialReference:b.spatialReference},a))};Object.defineProperty(c.prototype,"lods",{set:function(a){var n=this,b=0,c=0,
d=[];this._levelToLOD={};a&&(b=-Infinity,c=Infinity,a.forEach(function(a){d.push(a.scale);b=a.scale>b?a.scale:b;c=a.scale<c?a.scale:c;n._levelToLOD[a.level]=a}));this._set("scales",d);this._set("minScale",b);this._set("maxScale",c);this._set("lods",a);this._initializeUpsampleLevels()},enumerable:!0,configurable:!0});c.prototype.readSize=function(a,b){return[b.cols,b.rows]};c.prototype.writeSize=function(a,b){b.cols=a[0];b.rows=a[0]};c.prototype.zoomToScale=function(a){var n=this.scales;if(0>=a)return n[0];
if(a>=n.length)return n[n.length-1];var b=Math.round(a);return n[b]+(b-a)*(n[Math.round(a-.5)]-n[b])};c.prototype.scaleToZoom=function(a){for(var n=this.scales,b=n.length-1,c=0;c<b;c++){var d=n[c],e=n[c+1];if(d<=a)break;if(e===a)return c+1;if(d>a&&e<a)return c+1-(a-e)/(d-e)}return c};c.prototype.snapScale=function(a,b){void 0===b&&(b=.95);a=this.scaleToZoom(a);return a%Math.floor(a)>=b?this.zoomToScale(Math.ceil(a)):this.zoomToScale(Math.floor(a))};c.prototype.tileAt=function(a,b,c,d){var n=this.lodAt(a);
if(!n)return null;var t;if("number"===typeof b)t=b,b=c;else{if(v.equals(b.spatialReference,this.spatialReference))t=b.x,b=b.y;else{d=y.project(b,this.spatialReference);if(!d)return null;t=d.x;b=d.y}d=c}c=n.resolution*this.size[0];n=n.resolution*this.size[1];d||(d={id:null,level:0,row:0,col:0,extent:g.create()});d.level=a;d.row=Math.floor((this.origin.y-b)/n+.001);d.col=Math.floor((t-this.origin.x)/c+.001);this.updateTileInfo(d);return d};c.prototype.updateTileInfo=function(a){var n=this.lodAt(a.level);
if(n){var b=n.resolution*this.size[0],n=n.resolution*this.size[1];a.id=a.level+"/"+a.row+"/"+a.col;a.extent||(a.extent=g.create());a.extent[0]=this.origin.x+a.col*b;a.extent[1]=this.origin.y-(a.row+1)*n;a.extent[2]=a.extent[0]+b;a.extent[3]=a.extent[1]+n}};c.prototype.upsampleTile=function(a){var b=this._upsampleLevels[a.level];if(!b||-1===b.parentLevel)return!1;a.level=b.parentLevel;a.row=Math.floor(a.row/b.factor+.001);a.col=Math.floor(a.col/b.factor+.001);this.updateTileInfo(a);return!0};c.prototype.getTileBounds=
function(a,b){var n=this.lodAt(b.level).resolution,c=n*this.size[0],n=n*this.size[1];a[0]=this.origin.x+b.col*c;a[1]=this.origin.y-(b.row+1)*n;a[2]=a[0]+c;a[3]=a[1]+n;return a};c.prototype.lodAt=function(a){return this._levelToLOD&&this._levelToLOD[a]||null};c.prototype.clone=function(){return e.fromJSON(this.write({}))};c.prototype._initializeUpsampleLevels=function(){var a=this.lods;this._upsampleLevels=[];for(var b=null,c=0;c<a.length;c++){var d=a[c];this._upsampleLevels[d.level]={parentLevel:b?
b.level:-1,factor:b?b.resolution/d.resolution:0};b=d}};var e;d([h.property({type:Number,json:{write:!0}})],c.prototype,"compressionQuality",void 0);d([h.property({type:Number,json:{write:!0}})],c.prototype,"dpi",void 0);d([h.property({type:String,json:{read:B.read,write:B.write}})],c.prototype,"format",void 0);d([h.property({readOnly:!0,dependsOn:["spatialReference","origin"]})],c.prototype,"isWrappable",null);d([h.property({type:l.Point,json:{write:!0}})],c.prototype,"origin",void 0);d([h.reader("origin")],
c.prototype,"readOrigin",null);d([h.property({type:[C],value:null,json:{write:!0}})],c.prototype,"lods",null);d([h.property({readOnly:!0})],c.prototype,"minScale",void 0);d([h.property({readOnly:!0})],c.prototype,"maxScale",void 0);d([h.property({readOnly:!0})],c.prototype,"scales",void 0);d([h.property({cast:function(a){return Array.isArray(a)?a:"number"===typeof a?[a,a]:[256,256]}})],c.prototype,"size",void 0);d([h.reader("size",["rows","cols"])],c.prototype,"readSize",null);d([h.writer("size",
{cols:{type:p.Integer},rows:{type:p.Integer}})],c.prototype,"writeSize",null);d([h.property({type:l.SpatialReference,json:{write:!0}})],c.prototype,"spatialReference",void 0);return c=e=d([h.subclass("esri.layers.support.TileInfo")],c)}(h.declared(k))})},"esri/geometry":function(){define("require exports ./geometry/Extent ./geometry/Geometry ./geometry/Mesh ./geometry/Multipoint ./geometry/Point ./geometry/Polygon ./geometry/Polyline ./geometry/ScreenPoint ./geometry/SpatialReference ./geometry/support/jsonUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q){Object.defineProperty(a,"__esModule",{value:!0});a.Extent=f;a.BaseGeometry=b;a.Mesh=d;a.Multipoint=l;a.Point=k;a.Polygon=e;a.Polyline=h;a.ScreenPoint=p;a.SpatialReference=g;a.isGeometry=function(b){return b instanceof a.BaseGeometry};a.fromJSON=q.fromJSON})},"esri/geometry/Extent":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Geometry ./Point ./SpatialReference ./support/contains ./support/intersects ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v){function y(a,b,c){return null==b?c:null==c?b:a(b,c)}c=function(a){function c(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.type="extent";b.xmin=0;b.ymin=0;b.mmin=void 0;b.zmin=void 0;b.xmax=0;b.ymax=0;b.mmax=void 0;b.zmax=void 0;return b}f(c,a);k=c;c.prototype.normalizeCtorArgs=function(a,b,n,c,d){return!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?"object"===typeof a?(a.spatialReference=null!=a.spatialReference?a.spatialReference:
h.WGS84,a):{xmin:a,ymin:b,xmax:n,ymax:c,spatialReference:null!=d?d:h.WGS84}:{spatialReference:a,xmin:0,ymin:0,xmax:0,ymax:0}};Object.defineProperty(c.prototype,"center",{get:function(){var a=new e({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});this.hasZ&&(a.z=.5*(this.zmin+this.zmax));this.hasM&&(a.m=.5*(this.mmin+this.mmax));return a},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extent",{get:function(){return this.clone()},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"hasM",{get:function(){return null!=this.mmin&&null!=this.mmax},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"hasZ",{get:function(){return null!=this.zmin&&null!=this.zmax},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"height",{get:function(){return Math.abs(this.ymax-this.ymin)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"width",{get:function(){return Math.abs(this.xmax-this.xmin)},
enumerable:!0,configurable:!0});c.prototype.centerAt=function(a){var b=this.center;return null!=a.z&&this.hasZ?this.offset(a.x-b.x,a.y-b.y,a.z-b.z):this.offset(a.x-b.x,a.y-b.y)};c.prototype.clone=function(){var a=new k;a.xmin=this.xmin;a.ymin=this.ymin;a.xmax=this.xmax;a.ymax=this.ymax;a.spatialReference=this.spatialReference;null!=this.zmin&&(a.zmin=this.zmin,a.zmax=this.zmax);null!=this.mmin&&(a.mmin=this.mmin,a.mmax=this.mmax);return a};c.prototype.contains=function(a){if(!a)return!1;var b=this.spatialReference,
n=a.spatialReference;b&&n&&!b.equals(n)&&v.canProject(b,n)&&(a=b.isWebMercator?v.geographicToWebMercator(a):v.webMercatorToGeographic(a,!0));return"point"===a.type?p.extentContainsPoint(this,a):"extent"===a.type?p.extentContainsExtent(this,a):!1};c.prototype.equals=function(a){if(!a)return!1;var b=this.spatialReference,n=a.spatialReference;b&&n&&!b.equals(n)&&v.canProject(b,n)&&(a=b.isWebMercator?v.geographicToWebMercator(a):v.webMercatorToGeographic(a,!0));return this.xmin===a.xmin&&this.ymin===
a.ymin&&this.zmin===a.zmin&&this.mmin===a.mmin&&this.xmax===a.xmax&&this.ymax===a.ymax&&this.zmax===a.zmax&&this.mmax===a.mmax};c.prototype.expand=function(a){a=.5*(1-a);var b=this.width*a,n=this.height*a;this.xmin+=b;this.ymin+=n;this.xmax-=b;this.ymax-=n;this.hasZ&&(b=(this.zmax-this.zmin)*a,this.zmin+=b,this.zmax-=b);this.hasM&&(a*=this.mmax-this.mmin,this.mmin+=a,this.mmax-=a);return this};c.prototype.intersects=function(a){if(!a)return!1;var b=this.spatialReference,n=a.spatialReference;b&&n&&
!b.equals(n)&&v.canProject(b,n)&&(a=b.isWebMercator?v.geographicToWebMercator(a):v.webMercatorToGeographic(a,!0));b=g.getExtentIntersector(a.type);return"mesh"!==a.type?b(this,a):b(this,a.extent)};c.prototype.normalize=function(){var a=this._normalize(!1,!0);return Array.isArray(a)?a:[a]};c.prototype.offset=function(a,b,n){this.xmin+=a;this.ymin+=b;this.xmax+=a;this.ymax+=b;null!=n&&(this.zmin+=n,this.zmax+=n);return this};c.prototype.shiftCentralMeridian=function(){return this._normalize(!0)};c.prototype.union=
function(a){this.xmin=Math.min(this.xmin,a.xmin);this.ymin=Math.min(this.ymin,a.ymin);this.xmax=Math.max(this.xmax,a.xmax);this.ymax=Math.max(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=y(Math.min,this.zmin,a.zmin),this.zmax=y(Math.max,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=y(Math.min,this.mmin,a.mmin),this.mmax=y(Math.max,this.mmax,a.mmax);return this};c.prototype.intersection=function(a){if(!this.intersects(a))return null;this.xmin=Math.max(this.xmin,a.xmin);this.ymin=Math.max(this.ymin,
a.ymin);this.xmax=Math.min(this.xmax,a.xmax);this.ymax=Math.min(this.ymax,a.ymax);if(this.hasZ||a.hasZ)this.zmin=y(Math.max,this.zmin,a.zmin),this.zmax=y(Math.min,this.zmax,a.zmax);if(this.hasM||a.hasM)this.mmin=y(Math.max,this.mmin,a.mmin),this.mmax=y(Math.min,this.mmax,a.mmax);return this};c.prototype.toJSON=function(a){return this.write(null,a)};c.prototype._shiftCM=function(a){void 0===a&&(a=q.getInfo(this.spatialReference));if(!a||!this.spatialReference)return this;var b=this.spatialReference,
n=this._getCM(a);if(n){var c=b.isWebMercator?v.webMercatorToGeographic(n):n;this.xmin-=n.x;this.xmax-=n.x;b.isWebMercator||(c.x=this._normalizeX(c.x,a).x);this.spatialReference=new h(d.substitute({Central_Meridian:c.x},b.isWGS84?a.altTemplate:a.wkTemplate))}return this};c.prototype._getCM=function(a){var b=null,n=a.valid;a=n[0];var n=n[1],c=this.xmin,d=this.xmax;c>=a&&c<=n&&d>=a&&d<=n||(b=this.center);return b};c.prototype._normalize=function(a,b,n){var c=this.spatialReference;if(!c)return this;n=
n||q.getInfo(c);if(!n)return this;var d=this._getParts(n).map(function(a){return a.extent});if(2>d.length)return d[0]||this;if(2<d.length)return a?this._shiftCM(n):this.set({xmin:n.valid[0],xmax:n.valid[1]});if(a)return this._shiftCM(n);if(b)return d;var e=!0,g=!0;d.forEach(function(a){a.hasZ||(e=!1);a.hasM||(g=!1)});return{rings:d.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(e)for(var n=(a.zmax-a.zmin)/2,c=0;c<b.length;c++)b[c].push(n);
if(g)for(a=(a.mmax-a.mmin)/2,c=0;c<b.length;c++)b[c].push(a);return b}),hasZ:e,hasM:g,spatialReference:c}};c.prototype._getParts=function(a){var b=this.cache._parts;if(!b){var b=[],n=this.ymin,c=this.ymax,d=this.spatialReference,e=this.width,g=this.xmin,p=this.xmax,h=void 0;a=a||q.getInfo(d);var A=a.valid,f=A[0],v=A[1],h=this._normalizeX(this.xmin,a),l=h.x,A=h.frameId,h=this._normalizeX(this.xmax,a),y=h.x;a=h.frameId;h=l===y&&0<e;if(e>2*v){e=new k(g<p?l:y,n,v,c,d);g=new k(f,n,g<p?y:l,c,d);p=new k(0,
n,v,c,d);n=new k(f,n,0,c,d);c=[];d=[];e.contains(p)&&c.push(A);e.contains(n)&&d.push(A);g.contains(p)&&c.push(a);g.contains(n)&&d.push(a);for(f=A+1;f<a;f++)c.push(f),d.push(f);b.push({extent:e,frameIds:[A]},{extent:g,frameIds:[a]},{extent:p,frameIds:c},{extent:n,frameIds:d})}else l>y||h?b.push({extent:new k(l,n,v,c,d),frameIds:[A]},{extent:new k(f,n,y,c,d),frameIds:[a]}):b.push({extent:new k(l,n,y,c,d),frameIds:[A]});this.cache._parts=b}a=this.hasZ;n=this.hasM;if(a||n)for(A={},a&&(A.zmin=this.zmin,
A.zmax=this.zmax),n&&(A.mmin=this.mmin,A.mmax=this.mmax),a=0;a<b.length;a++)b[a].extent.set(A);return b};c.prototype._normalizeX=function(a,b){var n=b.valid;b=n[0];var c=n[1],n=2*c,d=0;a>c?(b=Math.ceil(Math.abs(a-c)/n),a-=b*n,d=b):a<b&&(b=Math.ceil(Math.abs(a-b)/n),a+=b*n,d=-b);return{x:a,frameId:d}};var k;b([l.property({dependsOn:"xmin ymin zmin mmin xmax ymax zmax mmax spatialReference".split(" ")})],c.prototype,"cache",void 0);b([l.property({readOnly:!0,dependsOn:["cache"]})],c.prototype,"center",
null);b([l.property({readOnly:!0,dependsOn:["cache"]})],c.prototype,"extent",null);b([l.property({readOnly:!0,dependsOn:["mmin","mmax"],json:{write:{enabled:!1,overridePolicy:null}}})],c.prototype,"hasM",null);b([l.property({readOnly:!0,dependsOn:["zmin","zmax"],json:{write:{enabled:!1,overridePolicy:null}}})],c.prototype,"hasZ",null);b([l.property({readOnly:!0,dependsOn:["ymin","ymax"]})],c.prototype,"height",null);b([l.property({readOnly:!0,dependsOn:["xmin","xmax"]})],c.prototype,"width",null);
b([l.property({type:Number,json:{write:!0}})],c.prototype,"xmin",void 0);b([l.property({type:Number,json:{write:!0}})],c.prototype,"ymin",void 0);b([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],c.prototype,"mmin",void 0);b([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],c.prototype,"zmin",void 0);b([l.property({type:Number,json:{write:!0}})],
c.prototype,"xmax",void 0);b([l.property({type:Number,json:{write:!0}})],c.prototype,"ymax",void 0);b([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],c.prototype,"mmax",void 0);b([l.property({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],c.prototype,"zmax",void 0);return c=k=b([l.subclass("esri.geometry.Extent")],c)}(l.declared(k));c.prototype.toJSON.isDefaultToJSON=
!0;return c})},"esri/geometry/Geometry":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators ./SpatialReference".split(" "),function(c,a,f,b,d,l,k){return function(a){function c(){var b=a.call(this)||this;b.type=null;b.extent=null;b.hasM=!1;b.hasZ=!1;b.spatialReference=k.WGS84;return b}f(c,a);Object.defineProperty(c.prototype,"cache",{get:function(){return{}},enumerable:!0,configurable:!0});
c.prototype.readSpatialReference=function(a,b){if(a instanceof k)return a;if(null!=a){var c=new k;c.read(a,b);return c}return a};c.prototype.clone=function(){console.warn(".clone() is not implemented for "+this.declaredClass);return null};c.prototype.clearCache=function(){this.notifyChange("cache")};c.prototype.getCacheValue=function(a){return this.cache[a]};c.prototype.setCacheValue=function(a,b){this.cache[a]=b};b([l.property()],c.prototype,"type",void 0);b([l.property({readOnly:!0,dependsOn:["spatialReference"]})],
c.prototype,"cache",null);b([l.property({readOnly:!0,dependsOn:["spatialReference"]})],c.prototype,"extent",void 0);b([l.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],c.prototype,"hasM",void 0);b([l.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],c.prototype,"hasZ",void 0);b([l.property({type:k,json:{write:!0}})],c.prototype,"spatialReference",void 0);b([l.reader("spatialReference")],c.prototype,"readSpatialReference",
null);return c=b([l.subclass("esri.geometry.Geometry")],c)}(l.declared(d))})},"esri/core/JSONSupport":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper ./Accessor ./declare ./accessorSupport/decorators ./accessorSupport/read ./accessorSupport/write".split(" "),function(c,a,f,b,d,l,k,e,h){function p(a,b){if(!a)return null;if(a.declaredClass)throw Error("JSON object is already hydrated");var c=new this;c.read(a,b);return c}var g=function(a){function c(){return null!==
a&&a.apply(this,arguments)||this}f(c,a);c.prototype.read=function(a,b){e.default(this,a,b);return this};c.prototype.write=function(a,b){return h.default(this,a||{},b)};c.prototype.toJSON=function(a){return this.write(null,a)};c.fromJSON=function(a,b){return p.call(this,a,b)};return c=b([k.subclass("esri.core.JSONSupport")],c)}(k.declared(d));g.prototype.toJSON.isDefaultToJSON=!0;l.after(function(a){l.hasMixin(a,g)&&(a.fromJSON=p.bind(a))});return g})},"esri/core/accessorSupport/read":function(){define("require exports ../tsSupport/assignHelper ./get ./utils ./extensions/serializableProperty".split(" "),
function(c,a,f,b,d,l){function k(a,c,g){void 0===g&&(g=e);if(c&&"object"===typeof c){for(var p=d.getProperties(a),h=p.metadatas,k={},f=0,B=Object.getOwnPropertyNames(c);f<B.length;f++){var r=k,A=h,u=B[f],n=c,t=g,x=l.originSpecificReadPropertyDefinition(A[u],t);x&&(!x.read||!1!==x.read.enabled&&!x.read.source)&&(r[u]=!0);for(var D=0,G=Object.getOwnPropertyNames(A);D<G.length;D++){var F=G[D],x=l.originSpecificReadPropertyDefinition(A[F],t),J;a:{J=u;var E=n;if(x&&x.read&&!1!==x.read.enabled&&x.read.source)if(x=
x.read.source,"string"===typeof x){if(x===J||-1<x.indexOf(".")&&0===x.indexOf(J)&&b.exists(x,E)){J=!0;break a}}else for(var N=0;N<x.length;N++){var Z=x[N];if(Z===J||-1<Z.indexOf(".")&&0===Z.indexOf(J)&&b.exists(Z,E)){J=!0;break a}}J=!1}J&&(r[F]=!0)}}p.setDefaultOrigin(g.origin);B=0;for(r=Object.getOwnPropertyNames(k);B<r.length;B++)f=r[B],u=(A=l.originSpecificReadPropertyDefinition(h[f],g).read)&&A.source,n=void 0,n=u&&"string"===typeof u?b.valueOf(c,u):c[f],A&&A.reader&&(n=A.reader.call(a,n,c,g)),
void 0!==n&&p.set(f,n);c=0;for(h=Object.getOwnPropertyNames(h);c<h.length;c++)f=h[c],k[f]||(B=a,r=p,A=g,u=(u=l.originSpecificReadPropertyDefinition(r.metadatas[f],A))&&u.read&&u.read.default,void 0!==u&&(B="function"===typeof u?u.call(B,f,A):u,void 0!==B&&r.set(f,B)));p.setDefaultOrigin("user")}}Object.defineProperty(a,"__esModule",{value:!0});var e={origin:"service"};a.read=k;a.readLoadable=function(a,b,c,d){void 0===d&&(d=e);b=f({},d,{messages:[]});c(b);b.messages.forEach(function(b){"warning"!==
b.type||a.loaded?d&&d.messages.push(b):a.loadWarnings.push(b)})};a.default=k})},"esri/core/accessorSupport/write":function(){define("require exports ../Error ../Logger ./PropertyOrigin ./utils ./extensions/serializableProperty".split(" "),function(c,a,f,b,d,l,k){function e(a,b,c,e,h,k){if(!e||!e.write)return!1;var g=a.get(c);if(void 0===g)return!1;if(!h&&e.write.overridePolicy){var A=e.write.overridePolicy.call(a,g,c,k);void 0!==A&&(h=A)}h||(h=e.write);if(!h||!1===h.enabled)return!1;if(null===g){if(h.allowNull)return!0;
h.isRequired&&((a=new f("web-document-write:property-required","Missing value for required property '"+c+"' on '"+a.declaredClass+"'",{propertyName:c,target:a}),k)&&k.messages?k.messages.push(a):a&&!k&&p.error(a.name,a.message));return!1}return!h.ignoreOrigin&&k&&k.origin&&b.store.originOf(c)<d.nameToId(k.origin)?!1:!0}function h(a,b,c){if(a&&"function"===typeof a.toJSON&&(!a.toJSON.isDefaultToJSON||!a.write))return l.merge(b,a.toJSON());var g=l.getProperties(a),h=g.metadatas,p;for(p in h){var f=
k.originSpecificWritePropertyDefinition(h[p],c);if(e(a,g,p,f,null,c)){var A=a.get(p),q={};f.write.writer.call(a,A,q,"string"===typeof f.write.target?f.write.target:p,c);f=q;0<Object.keys(f).length&&(b=l.merge(b,f),c&&c.writtenProperties&&c.writtenProperties.push({target:a,propName:p,oldOrigin:d.idToReadableName(g.store.originOf(p)),newOrigin:c.origin}))}}return b}Object.defineProperty(a,"__esModule",{value:!0});var p=b.getLogger("esri.core.accessorSupport.write");a.willPropertyWrite=function(a,b,
c,d){var g=l.getProperties(a),h=k.originSpecificWritePropertyDefinition(g.metadatas[b],d);return h?e(a,g,b,h,c,d):!1};a.write=h;a.disableWriteDefaultPolicy=function(a){return function(b){return{enabled:b!==a}}};a.default=h})},"esri/geometry/SpatialReference":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators ./support/spatialReferenceUtils".split(" "),function(c,a,f,b,d,l,k,
e){c=function(a){function c(b){b=a.call(this)||this;b.latestWkid=null;b.wkid=null;b.wkt=null;return b}f(c,a);d=c;c.fromJSON=function(a){if(!a)return null;if(a.wkid){if(102100===a.wkid)return d.WebMercator;if(4326===a.wkid)return d.WGS84}var b=new d;b.read(a);return b};c.prototype.normalizeCtorArgs=function(a){var b;return a&&"object"===typeof a?a:(b={},b["string"===typeof a?"wkt":"wkid"]=a,b)};Object.defineProperty(c.prototype,"isWGS84",{get:function(){return e.isWGS84(this)},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"isWebMercator",{get:function(){return e.isWebMercator(this)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isGeographic",{get:function(){return e.isGeographic(this)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isWrappable",{get:function(){return e.isWrappable(this)},enumerable:!0,configurable:!0});c.prototype.writeWkt=function(a,b){this.wkid||(b.wkt=a)};c.prototype.clone=function(){if(this===d.WGS84)return d.WGS84;if(this===
d.WebMercator)return d.WebMercator;var a=new d;null!=this.wkid?(a.wkid=this.wkid,null!=this.latestWkid&&(a.latestWkid=this.latestWkid),null!=this.vcsWkid&&(a.vcsWkid=this.vcsWkid),null!=this.latestVcsWkid&&(a.latestVcsWkid=this.latestVcsWkid)):null!=this.wkt&&(a.wkt=this.wkt);return a};c.prototype.equals=function(a){return e.equals(this,a)};c.prototype.toJSON=function(a){return this.write(null,a)};var d;c.GCS_NAD_1927=null;c.WGS84=null;c.WebMercator=null;b([k.property({dependsOn:["wkid"],readOnly:!0})],
c.prototype,"isWGS84",null);b([k.property({dependsOn:["wkid"],readOnly:!0})],c.prototype,"isWebMercator",null);b([k.property({dependsOn:["wkid","wkt"],readOnly:!0})],c.prototype,"isGeographic",null);b([k.property({dependsOn:["wkid"],readOnly:!0})],c.prototype,"isWrappable",null);b([k.property({type:Number,json:{write:!0}})],c.prototype,"latestWkid",void 0);b([k.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkt?!0:!1}}}}}}})],
c.prototype,"wkid",void 0);b([k.property({type:String,json:{origins:{"web-scene":{write:{overridePolicy:function(){return{isRequired:null===this.wkid?!0:!1}}}}}}})],c.prototype,"wkt",void 0);b([k.writer("wkt"),k.writer("web-scene","wkt")],c.prototype,"writeWkt",null);b([k.property({type:Number,json:{write:!0}})],c.prototype,"vcsWkid",void 0);b([k.property({type:Number,json:{write:!0}})],c.prototype,"latestVcsWkid",void 0);return c=d=b([k.subclass("esri.geometry.SpatialReference")],c)}(k.declared(d));
c.prototype.toJSON.isDefaultToJSON=!0;c.GCS_NAD_1927=new c({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'});c.WGS84=new c(4326);c.WGS84.wkt=l.substitute({Central_Meridian:"0.0"},e.getInfo(c.WGS84).wkTemplate);c.WebMercator=new c({wkid:102100,latestWkid:3857});Object.freeze&&(Object.freeze(c.GCS_NAD_1927),Object.freeze(c.WGS84),Object.freeze(c.WebMercator));return c})},
"esri/geometry/support/spatialReferenceUtils":function(){define(["require","exports","./WKIDUnitConversion"],function(c,a,f){function b(a){return a.wkid&&!0===d[a.wkid]}Object.defineProperty(a,"__esModule",{value:!0});var d={102113:!0,102100:!0,3857:!0,3785:!0},l={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0};c=[-2.0037508342788905E7,2.0037508342788905E7];var k=[-2.0037508342787E7,2.0037508342787E7],e={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',
valid:c,origin:k,dx:1E-5},102100:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',valid:c,origin:k,
dx:1E-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:c,origin:k,dx:1E-5},3857:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',
valid:c,origin:k,dx:1E-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',
valid:[-180,180],origin:[-180,180],dx:1E-5}};a.equals=function(a,c){if(c){if(a===c)return!0;if(null!=a.wkid||null!=c.wkid)return a.wkid===c.wkid||b(a)&&b(c)||null!=c.latestWkid&&a.wkid===c.latestWkid||null!=a.latestWkid&&c.wkid===a.latestWkid;if(a.wkt&&c.wkt)return a.wkt.toUpperCase()===c.wkt.toUpperCase()}return!1};a.getInfo=function(a){return a.wkid?e[a.wkid]:null};a.isGeographic=function(a){return a.wkid?null==f[a.wkid]:a.wkt?!!/^\s*GEOGCS/i.test(a.wkt):!1};a.isWGS84=function(a){return 4326===
a.wkid};a.isWebMercator=b;a.isWrappable=function(a){return a.wkid&&!0===l[a.wkid]}})},"esri/geometry/support/WKIDUnitConversion":function(){define([],function(){var c,a={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.116756,5E4,15E4],units:"Meter Foot Foot_US Foot_Clarke Yard_Clarke Link_Clarke Yard_Sears Foot_Sears Chain_Sears Chain_Benoit_1895_B Yard_Indian Yard_Indian_1937 Foot_Gold_Coast Chain_Sears_1922_Truncated 50_Kilometers 150_Kilometers".split(" "),
2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:13,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,
3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,
3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,
3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,
5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,
6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,
6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,
6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,
6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,
7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,
7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8058:0,8059:0,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,
8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25E3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,
26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53034:0,53048:0,53049:0,
54034:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:14,102069:15,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,
103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,
103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,
103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,
103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103695:2};for(c=2E3;2045>=c;c++)a[c]=0;for(c=2056;2065>=c;c++)a[c]=0;for(c=2067;2135>=c;c++)a[c]=0;for(c=2137;2154>=c;c++)a[c]=0;for(c=2161;2170>=c;c++)a[c]=0;for(c=2172;2193>=c;c++)a[c]=0;for(c=2195;2198>=c;c++)a[c]=0;for(c=2200;2203>=c;c++)a[c]=0;for(c=2205;2217>=c;c++)a[c]=0;for(c=2222;2224>=c;c++)a[c]=1;for(c=2225;2250>=c;c++)a[c]=2;
for(c=2251;2253>=c;c++)a[c]=1;for(c=2257;2264>=c;c++)a[c]=2;for(c=2274;2279>=c;c++)a[c]=2;for(c=2280;2282>=c;c++)a[c]=1;for(c=2283;2289>=c;c++)a[c]=2;for(c=2290;2292>=c;c++)a[c]=0;for(c=2308;2313>=c;c++)a[c]=0;for(c=2315;2491>=c;c++)a[c]=0;for(c=2494;2866>=c;c++)a[c]=0;for(c=2867;2869>=c;c++)a[c]=1;for(c=2870;2888>=c;c++)a[c]=2;for(c=2891;2895>=c;c++)a[c]=2;for(c=2896;2898>=c;c++)a[c]=1;for(c=2902;2908>=c;c++)a[c]=2;for(c=2915;2920>=c;c++)a[c]=2;for(c=2921;2923>=c;c++)a[c]=1;for(c=2924;2930>=c;c++)a[c]=
2;for(c=2931;2962>=c;c++)a[c]=0;for(c=2964;2968>=c;c++)a[c]=2;for(c=2969;2973>=c;c++)a[c]=0;for(c=2975;2991>=c;c++)a[c]=0;for(c=2995;3051>=c;c++)a[c]=0;for(c=3054;3079>=c;c++)a[c]=0;for(c=3081;3088>=c;c++)a[c]=0;for(c=3092;3101>=c;c++)a[c]=0;for(c=3106;3138>=c;c++)a[c]=0;for(c=3146;3151>=c;c++)a[c]=0;for(c=3153;3166>=c;c++)a[c]=0;for(c=3168;3172>=c;c++)a[c]=0;for(c=3174;3203>=c;c++)a[c]=0;for(c=3294;3358>=c;c++)a[c]=0;for(c=3367;3403>=c;c++)a[c]=0;for(c=3408;3416>=c;c++)a[c]=0;for(c=3417;3438>=c;c++)a[c]=
2;for(c=3441;3446>=c;c++)a[c]=2;for(c=3447;3450>=c;c++)a[c]=0;for(c=3451;3459>=c;c++)a[c]=2;for(c=3460;3478>=c;c++)a[c]=0;for(c=3554;3559>=c;c++)a[c]=0;for(c=3560;3570>=c;c++)a[c]=2;for(c=3571;3581>=c;c++)a[c]=0;for(c=3594;3597>=c;c++)a[c]=0;for(c=3601;3604>=c;c++)a[c]=0;for(c=3637;3639>=c;c++)a[c]=0;for(c=3665;3667>=c;c++)a[c]=0;for(c=3693;3695>=c;c++)a[c]=0;for(c=3701;3727>=c;c++)a[c]=0;for(c=3728;3739>=c;c++)a[c]=2;for(c=3740;3751>=c;c++)a[c]=0;for(c=3753;3760>=c;c++)a[c]=2;for(c=3761;3773>=c;c++)a[c]=
0;for(c=3775;3777>=c;c++)a[c]=0;for(c=3779;3781>=c;c++)a[c]=0;for(c=3783;3785>=c;c++)a[c]=0;for(c=3788;3791>=c;c++)a[c]=0;for(c=3797;3802>=c;c++)a[c]=0;for(c=3814;3816>=c;c++)a[c]=0;for(c=3825;3829>=c;c++)a[c]=0;for(c=3832;3841>=c;c++)a[c]=0;for(c=3844;3852>=c;c++)a[c]=0;for(c=3873;3885>=c;c++)a[c]=0;for(c=3890;3893>=c;c++)a[c]=0;for(c=3907;3912>=c;c++)a[c]=0;for(c=3942;3950>=c;c++)a[c]=0;for(c=3968;3970>=c;c++)a[c]=0;for(c=3973;3976>=c;c++)a[c]=0;for(c=3986;3989>=c;c++)a[c]=0;for(c=3994;3997>=c;c++)a[c]=
0;for(c=4048;4051>=c;c++)a[c]=0;for(c=4056;4063>=c;c++)a[c]=0;for(c=4093;4096>=c;c++)a[c]=0;for(c=4390;4398>=c;c++)a[c]=0;for(c=4399;4413>=c;c++)a[c]=2;for(c=4418;4433>=c;c++)a[c]=2;for(c=4455;4457>=c;c++)a[c]=2;for(c=4484;4489>=c;c++)a[c]=0;for(c=4491;4554>=c;c++)a[c]=0;for(c=4568;4589>=c;c++)a[c]=0;for(c=4652;4656>=c;c++)a[c]=0;for(c=4766;4800>=c;c++)a[c]=0;for(c=5014;5016>=c;c++)a[c]=0;for(c=5069;5072>=c;c++)a[c]=0;for(c=5105;5130>=c;c++)a[c]=0;for(c=5173;5188>=c;c++)a[c]=0;for(c=5253;5259>=c;c++)a[c]=
0;for(c=5269;5275>=c;c++)a[c]=0;for(c=5292;5311>=c;c++)a[c]=0;for(c=5329;5331>=c;c++)a[c]=0;for(c=5343;5349>=c;c++)a[c]=0;for(c=5355;5357>=c;c++)a[c]=0;for(c=5387;5389>=c;c++)a[c]=0;for(c=5459;5463>=c;c++)a[c]=0;for(c=5479;5482>=c;c++)a[c]=0;for(c=5518;5520>=c;c++)a[c]=0;for(c=5530;5539>=c;c++)a[c]=0;for(c=5550;5552>=c;c++)a[c]=0;for(c=5562;5583>=c;c++)a[c]=0;for(c=5623;5625>=c;c++)a[c]=2;for(c=5631;5639>=c;c++)a[c]=0;for(c=5649;5653>=c;c++)a[c]=0;for(c=5663;5680>=c;c++)a[c]=0;for(c=5682;5685>=c;c++)a[c]=
0;for(c=5875;5877>=c;c++)a[c]=0;for(c=5921;5940>=c;c++)a[c]=0;for(c=6050;6125>=c;c++)a[c]=0;for(c=6244;6275>=c;c++)a[c]=0;for(c=6328;6348>=c;c++)a[c]=0;for(c=6350;6356>=c;c++)a[c]=0;for(c=6366;6372>=c;c++)a[c]=0;for(c=6381;6387>=c;c++)a[c]=0;for(c=6393;6404>=c;c++)a[c]=0;for(c=6480;6483>=c;c++)a[c]=0;for(c=6511;6514>=c;c++)a[c]=0;for(c=6579;6581>=c;c++)a[c]=0;for(c=6619;6624>=c;c++)a[c]=0;for(c=6625;6627>=c;c++)a[c]=2;for(c=6628;6632>=c;c++)a[c]=0;for(c=6634;6637>=c;c++)a[c]=0;for(c=6669;6692>=c;c++)a[c]=
0;for(c=6707;6709>=c;c++)a[c]=0;for(c=6720;6723>=c;c++)a[c]=0;for(c=6732;6738>=c;c++)a[c]=0;for(c=6931;6933>=c;c++)a[c]=0;for(c=6956;6959>=c;c++)a[c]=0;for(c=7005;7007>=c;c++)a[c]=0;for(c=7057;7070>=c;c++)a[c]=2;for(c=7074;7082>=c;c++)a[c]=0;for(c=7109;7118>=c;c++)a[c]=0;for(c=7119;7127>=c;c++)a[c]=1;for(c=7374;7376>=c;c++)a[c]=0;for(c=7528;7586>=c;c++)a[c]=0;for(c=7587;7645>=c;c++)a[c]=2;for(c=7755;7787>=c;c++)a[c]=0;for(c=7791;7795>=c;c++)a[c]=0;for(c=7799;7801>=c;c++)a[c]=0;for(c=7803;7805>=c;c++)a[c]=
0;for(c=7825;7831>=c;c++)a[c]=0;for(c=7845;7859>=c;c++)a[c]=0;for(c=8013;8032>=c;c++)a[c]=0;for(c=20002;20032>=c;c++)a[c]=0;for(c=20062;20092>=c;c++)a[c]=0;for(c=20135;20138>=c;c++)a[c]=0;for(c=20248;20258>=c;c++)a[c]=0;for(c=20348;20358>=c;c++)a[c]=0;for(c=20436;20440>=c;c++)a[c]=0;for(c=20822;20824>=c;c++)a[c]=0;for(c=20934;20936>=c;c++)a[c]=0;for(c=21035;21037>=c;c++)a[c]=0;for(c=21095;21097>=c;c++)a[c]=0;for(c=21148;21150>=c;c++)a[c]=0;for(c=21413;21423>=c;c++)a[c]=0;for(c=21473;21483>=c;c++)a[c]=
0;for(c=21780;21782>=c;c++)a[c]=0;for(c=21891;21894>=c;c++)a[c]=0;for(c=21896;21899>=c;c++)a[c]=0;for(c=22171;22177>=c;c++)a[c]=0;for(c=22181;22187>=c;c++)a[c]=0;for(c=22191;22197>=c;c++)a[c]=0;for(c=22234;22236>=c;c++)a[c]=0;for(c=22521;22525>=c;c++)a[c]=0;for(c=22991;22994>=c;c++)a[c]=0;for(c=23028;23038>=c;c++)a[c]=0;for(c=23830;23853>=c;c++)a[c]=0;for(c=23866;23872>=c;c++)a[c]=0;for(c=23877;23884>=c;c++)a[c]=0;for(c=23886;23894>=c;c++)a[c]=0;for(c=23946;23948>=c;c++)a[c]=0;for(c=24311;24313>=
c;c++)a[c]=0;for(c=24342;24347>=c;c++)a[c]=0;for(c=24370;24374>=c;c++)a[c]=10;for(c=24375;24381>=c;c++)a[c]=0;for(c=24718;24721>=c;c++)a[c]=0;for(c=24817;24821>=c;c++)a[c]=0;for(c=24877;24882>=c;c++)a[c]=0;for(c=24891;24893>=c;c++)a[c]=0;for(c=25391;25395>=c;c++)a[c]=0;for(c=25828;25838>=c;c++)a[c]=0;for(c=26191;26195>=c;c++)a[c]=0;for(c=26391;26393>=c;c++)a[c]=0;for(c=26701;26722>=c;c++)a[c]=0;for(c=26729;26799>=c;c++)a[c]=2;for(c=26801;26803>=c;c++)a[c]=2;for(c=26811;26813>=c;c++)a[c]=2;for(c=26847;26870>=
c;c++)a[c]=2;for(c=26891;26899>=c;c++)a[c]=0;for(c=26901;26923>=c;c++)a[c]=0;for(c=26929;26946>=c;c++)a[c]=0;for(c=26948;26998>=c;c++)a[c]=0;for(c=27037;27040>=c;c++)a[c]=0;for(c=27205;27232>=c;c++)a[c]=0;for(c=27258;27260>=c;c++)a[c]=0;for(c=27391;27398>=c;c++)a[c]=0;for(c=27561;27564>=c;c++)a[c]=0;for(c=27571;27574>=c;c++)a[c]=0;for(c=27581;27584>=c;c++)a[c]=0;for(c=27591;27594>=c;c++)a[c]=0;for(c=28191;28193>=c;c++)a[c]=0;for(c=28348;28358>=c;c++)a[c]=0;for(c=28402;28432>=c;c++)a[c]=0;for(c=28462;28492>=
c;c++)a[c]=0;for(c=29118;29122>=c;c++)a[c]=0;for(c=29168;29172>=c;c++)a[c]=0;for(c=29177;29185>=c;c++)a[c]=0;for(c=29187;29195>=c;c++)a[c]=0;for(c=29900;29903>=c;c++)a[c]=0;for(c=30161;30179>=c;c++)a[c]=0;for(c=30491;30494>=c;c++)a[c]=0;for(c=30729;30732>=c;c++)a[c]=0;for(c=31251;31259>=c;c++)a[c]=0;for(c=31265;31268>=c;c++)a[c]=0;for(c=31275;31279>=c;c++)a[c]=0;for(c=31281;31297>=c;c++)a[c]=0;for(c=31461;31469>=c;c++)a[c]=0;for(c=31491;31495>=c;c++)a[c]=0;for(c=31917;31922>=c;c++)a[c]=0;for(c=31965;32E3>=
c;c++)a[c]=0;for(c=32001;32003>=c;c++)a[c]=2;for(c=32005;32031>=c;c++)a[c]=2;for(c=32033;32060>=c;c++)a[c]=2;for(c=32064;32067>=c;c++)a[c]=2;for(c=32074;32077>=c;c++)a[c]=2;for(c=32081;32086>=c;c++)a[c]=0;for(c=32107;32130>=c;c++)a[c]=0;for(c=32133;32158>=c;c++)a[c]=0;for(c=32164;32167>=c;c++)a[c]=2;for(c=32180;32199>=c;c++)a[c]=0;for(c=32201;32260>=c;c++)a[c]=0;for(c=32301;32360>=c;c++)a[c]=0;for(c=32601;32662>=c;c++)a[c]=0;for(c=32664;32667>=c;c++)a[c]=2;for(c=32701;32761>=c;c++)a[c]=0;for(c=53001;53004>=
c;c++)a[c]=0;for(c=53008;53019>=c;c++)a[c]=0;for(c=53021;53032>=c;c++)a[c]=0;for(c=53042;53046>=c;c++)a[c]=0;for(c=53074;53080>=c;c++)a[c]=0;for(c=54001;54004>=c;c++)a[c]=0;for(c=54008;54019>=c;c++)a[c]=0;for(c=54021;54032>=c;c++)a[c]=0;for(c=54042;54046>=c;c++)a[c]=0;for(c=54048;54053>=c;c++)a[c]=0;for(c=54074;54080>=c;c++)a[c]=0;for(c=102001;102040>=c;c++)a[c]=0;for(c=102042;102063>=c;c++)a[c]=0;for(c=102065;102067>=c;c++)a[c]=0;for(c=102070;102117>=c;c++)a[c]=0;for(c=102122;102216>=c;c++)a[c]=
0;for(c=102221;102377>=c;c++)a[c]=0;for(c=102382;102388>=c;c++)a[c]=0;for(c=102389;102398>=c;c++)a[c]=2;for(c=102399;102444>=c;c++)a[c]=0;for(c=102445;102447>=c;c++)a[c]=2;for(c=102448;102458>=c;c++)a[c]=0;for(c=102459;102468>=c;c++)a[c]=2;for(c=102469;102497>=c;c++)a[c]=0;for(c=102500;102519>=c;c++)a[c]=1;for(c=102520;102524>=c;c++)a[c]=0;for(c=102525;102529>=c;c++)a[c]=2;for(c=102530;102568>=c;c++)a[c]=0;for(c=102570;102588>=c;c++)a[c]=0;for(c=102590;102598>=c;c++)a[c]=0;for(c=102601;102603>=c;c++)a[c]=
0;for(c=102605;102628>=c;c++)a[c]=0;for(c=102629;102646>=c;c++)a[c]=2;for(c=102648;102700>=c;c++)a[c]=2;for(c=102701;102703>=c;c++)a[c]=0;for(c=102707;102730>=c;c++)a[c]=2;for(c=102733;102758>=c;c++)a[c]=2;for(c=102767;102900>=c;c++)a[c]=0;for(c=102965;102969>=c;c++)a[c]=0;for(c=102971;102973>=c;c++)a[c]=0;for(c=102975;102989>=c;c++)a[c]=0;for(c=102990;102992>=c;c++)a[c]=1;for(c=102997;103002>=c;c++)a[c]=0;for(c=103003;103008>=c;c++)a[c]=2;for(c=103009;103011>=c;c++)a[c]=0;for(c=103012;103014>=c;c++)a[c]=
2;for(c=103019;103021>=c;c++)a[c]=0;for(c=103022;103024>=c;c++)a[c]=2;for(c=103029;103031>=c;c++)a[c]=0;for(c=103032;103034>=c;c++)a[c]=2;for(c=103065;103068>=c;c++)a[c]=0;for(c=103074;103076>=c;c++)a[c]=0;for(c=103077;103079>=c;c++)a[c]=1;for(c=103080;103082>=c;c++)a[c]=0;for(c=103083;103085>=c;c++)a[c]=2;for(c=103090;103093>=c;c++)a[c]=0;for(c=103097;103099>=c;c++)a[c]=0;for(c=103100;103102>=c;c++)a[c]=2;for(c=103107;103109>=c;c++)a[c]=0;for(c=103110;103112>=c;c++)a[c]=2;for(c=103113;103116>=c;c++)a[c]=
0;for(c=103117;103120>=c;c++)a[c]=2;for(c=103153;103157>=c;c++)a[c]=0;for(c=103158;103162>=c;c++)a[c]=2;for(c=103163;103165>=c;c++)a[c]=0;for(c=103166;103168>=c;c++)a[c]=1;for(c=103169;103171>=c;c++)a[c]=2;for(c=103186;103188>=c;c++)a[c]=0;for(c=103189;103191>=c;c++)a[c]=2;for(c=103192;103195>=c;c++)a[c]=0;for(c=103196;103199>=c;c++)a[c]=2;for(c=103200;103224>=c;c++)a[c]=0;for(c=103225;103227>=c;c++)a[c]=1;for(c=103232;103237>=c;c++)a[c]=0;for(c=103238;103243>=c;c++)a[c]=2;for(c=103244;103246>=c;c++)a[c]=
0;for(c=103247;103249>=c;c++)a[c]=2;for(c=103254;103256>=c;c++)a[c]=0;for(c=103257;103259>=c;c++)a[c]=2;for(c=103264;103266>=c;c++)a[c]=0;for(c=103267;103269>=c;c++)a[c]=2;for(c=103300;103375>=c;c++)a[c]=0;for(c=103381;103383>=c;c++)a[c]=0;for(c=103384;103386>=c;c++)a[c]=1;for(c=103387;103389>=c;c++)a[c]=0;for(c=103390;103392>=c;c++)a[c]=2;for(c=103397;103399>=c;c++)a[c]=0;for(c=103400;103471>=c;c++)a[c]=2;for(c=103476;103478>=c;c++)a[c]=0;for(c=103479;103481>=c;c++)a[c]=2;for(c=103486;103488>=c;c++)a[c]=
0;for(c=103489;103491>=c;c++)a[c]=2;for(c=103492;103495>=c;c++)a[c]=0;for(c=103496;103499>=c;c++)a[c]=2;for(c=103528;103543>=c;c++)a[c]=0;for(c=103544;103548>=c;c++)a[c]=2;for(c=103549;103551>=c;c++)a[c]=0;for(c=103552;103554>=c;c++)a[c]=1;for(c=103555;103557>=c;c++)a[c]=2;for(c=103558;103560>=c;c++)a[c]=0;for(c=103571;103573>=c;c++)a[c]=0;for(c=103574;103576>=c;c++)a[c]=2;for(c=103577;103580>=c;c++)a[c]=0;for(c=103581;103583>=c;c++)a[c]=2;for(c=103600;103694>=c;c++)a[c]=0;for(c=103700;103793>=c;c++)a[c]=
2;for(c=103794;103871>=c;c++)a[c]=0;for(c=103900;103971>=c;c++)a[c]=2;return a})},"esri/geometry/Point":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Logger ../core/accessorSupport/decorators ./Geometry ./SpatialReference ./support/spatialReferenceUtils ./support/webMercatorUtils".split(" "),function(c,a,f,b,d,l,k,e,h,p){function g(a){return a&&("esri.geometry.SpatialReference"===a.declaredClass||null!=a.wkid)}var q=[0,0],v=d.getLogger("esri.geometry.Point");
c=function(a){function c(b,c,d,n,t){b=a.call(this)||this;b.x=0;b.y=0;b.z=void 0;b.m=void 0;b.type="point";return b}f(c,a);d=c;c.copy=function(a,b){b.x=a.x;b.y=a.y;b.z=a.z;b.m=a.m;b.spatialReference=Object.isFrozen(a.spatialReference)?a.spatialReference:a.spatialReference.clone()};c.distance=function(a,b){var c=a.x-b.x,n=a.y-b.y;a=a.hasZ&&b.hasZ?a.z-b.z:0;return Math.sqrt(c*c+n*n+a*a)};c.prototype.normalizeCtorArgs=function(a,b,c,n,d){var t;if(Array.isArray(a))t=a,d=b,a=t[0],b=t[1],c=t[2],n=t[3];else if(a&&
"object"===typeof a){if(t=a,a=null!=t.x?t.x:t.longitude,b=null!=t.y?t.y:t.latitude,c=null!=t.z?t.z:t.altitude,n=t.m,(d=t.spatialReference)&&"esri.geometry.SpatialReference"!==d.declaredClass&&(d=new e(d)),null!=t.longitude||null!=t.latitude)null==t.longitude?v.warn(".longitude\x3d","Latitude was defined without longitude"):null==t.latitude?v.warn(".latitude\x3d","Longitude was defined without latitude"):!t.declaredClass&&d&&d.isWebMercator&&(b=p.lngLatToXY(t.longitude,t.latitude,q),a=b[0],b=b[1])}else g(c)?
(d=c,c=null):g(n)&&(d=n,n=null);a={x:a,y:b};null==a.x&&null!=a.y?v.warn(".y\x3d","Y coordinate was defined without an X coordinate"):null==a.y&&null!=a.x&&v.warn(".x\x3d","X coordinate was defined without a Y coordinate");null!=d&&(a.spatialReference=d);null!=c&&(a.z=c);null!=n&&(a.m=n);return a};Object.defineProperty(c.prototype,"hasM",{get:function(){return void 0!==this.m},set:function(a){var b=this._get("hasM");a!==b&&(this._set("m",a?0:void 0),this._set("hasM",a))},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"hasZ",{get:function(){return void 0!==this.z},set:function(a){var b=this._get("hasZ");a!==b&&(this._set("z",a?0:void 0),this._set("hasZ",a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"latitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return p.xyToLngLat(this.x,this.y,q)[1];if(a.isWGS84)return this._get("y")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("y",
p.lngLatToXY(this.x,a,q)[1]):b.isWGS84&&this._set("y",a),this._set("latitude",a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"longitude",{get:function(){var a=this._get("spatialReference");if(a){if(a.isWebMercator)return p.xyToLngLat(this._get("x"),this._get("y"),q)[0];if(a.isWGS84)return this._get("x")}return null},set:function(a){var b=this._get("spatialReference");b&&(b.isWebMercator?this._set("x",p.lngLatToXY(a,this._get("y"),q)[0]):b.isWGS84&&this._set("x",a),this._set("longitude",
a))},enumerable:!0,configurable:!0});c.prototype.clone=function(){var a=new d;a.x=this.x;a.y=this.y;a.z=this.z;a.m=this.m;a.spatialReference=this.spatialReference;return a};c.prototype.copy=function(a){d.copy(a,this);return this};c.prototype.equals=function(a){var b;if(!a)return!1;var c=this.x,n=this.y,d=this.z,x=this.m,e=this.spatialReference,g=a.z,h=a.m,k=a.x;b=a.y;a=a.spatialReference;if(!e.equals(a))if(e.isWebMercator&&a.isWGS84)b=p.lngLatToXY(k,b),k=b[0],b=b[1],a=e;else if(e.isWGS84&&a.isWebMercator)b=
p.xyToLngLat(k,b),k=b[0],b=b[1],a=e;else return!1;return c===k&&n===b&&d===g&&x===h&&e.wkid===a.wkid};c.prototype.offset=function(a,b,c){this.x+=a;this.y+=b;null!=c&&this.hasZ&&(this.z+=c);return this};c.prototype.normalize=function(){if(!this.spatialReference)return this;var a=h.getInfo(this.spatialReference);if(!a)return this;var b=this.x,c=a.valid,a=c[0],n=c[1],c=2*n;b>n?(a=Math.ceil(Math.abs(b-n)/c),b-=a*c):b<a&&(a=Math.ceil(Math.abs(b-a)/c),b+=a*c);this._set("x",b);return this};c.prototype.distance=
function(a){return d.distance(this,a)};c.prototype.toArray=function(){var a=this.hasZ,b=this.hasM;return a&&b?[this.x,this.y,this.z,this.m]:a?[this.x,this.y,this.z]:b?[this.x,this.y,this.m]:[this.x,this.y]};c.prototype.toJSON=function(a){return this.write(null,a)};var d;b([l.property({dependsOn:["x","y","z","m","spatialReference"]})],c.prototype,"cache",void 0);b([l.property({type:Boolean,dependsOn:["m"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],c.prototype,"hasM",null);b([l.property({type:Boolean,
dependsOn:["z"],json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],c.prototype,"hasZ",null);b([l.property({type:Number,dependsOn:["y"]})],c.prototype,"latitude",null);b([l.property({type:Number,dependsOn:["x"]})],c.prototype,"longitude",null);b([l.property({type:Number,json:{write:{isRequired:!0}}})],c.prototype,"x",void 0);b([l.property({type:Number,json:{write:!0}})],c.prototype,"y",void 0);b([l.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasZ}}}}})],c.prototype,
"z",void 0);b([l.property({type:Number,json:{write:{overridePolicy:function(){return{enabled:this.hasM}}}}})],c.prototype,"m",void 0);return c=d=b([l.subclass("esri.geometry.Point")],c)}(l.declared(k));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/geometry/support/webMercatorUtils":function(){define("require exports ../../core/lang ../../core/wgs84Constants ../SpatialReference ./spatialReferenceUtils".split(" "),function(c,a,f,b,d,l){function k(a,b,c,d,e){var g;if("x"in a&&"x"in e)b=b(a.x,
a.y,q,0,d),e.x=b[0],e.y=b[1];else if("xmin"in a&&"xmin"in e)g=b(a.xmin,a.ymin,q,0,d),e.xmin=g[0],e.ymin=g[1],b=b(a.xmax,a.ymax,q,0,d),e.xmax=b[0],e.ymax=b[1];else if("paths"in a&&"paths"in e||"rings"in a&&"rings"in e){g="paths"in a?a.paths:a.rings;var h=[],n=void 0;for(a=0;a<g.length;a++){var t=g[a],n=[];h.push(n);for(var x=0;x<t.length;x++)n.push(b(t[x][0],t[x][1],[0,0],0,d)),2<t[x].length&&n[x].push(t[x][2]),3<t[x].length&&n[x].push(t[x][3])}"paths"in e?e.paths=h:e.rings=h}else if("points"in a&&
"points"in e){g=a.points;h=[];for(a=0;a<g.length;a++)h[a]=b(g[a][0],g[a][1],[0,0],0,d),2<g[a].length&&h[a].push(g[a][2]),3<g[a].length&&h[a].push(g[a][3]);e.points=h}else if("type"in a&&"mesh"===a.type&&"type"in e&&"mesh"===e.type&&(g=a.vertexAttributes&&a.vertexAttributes.position,h=e.vertexAttributes&&e.vertexAttributes.position,g))for(n=[0,0],a=0;a<g.length;a+=3)b(g[a],g[a+1],n,0,d),h[a]=n[0],h[a+1]=n[1];e.spatialReference=c;return e}function e(a,b){a=a&&(null!=a.wkid||null!=a.wkt?a:a.spatialReference);
b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return a&&b?l.equals(b,a)?!0:l.isWebMercator(b)&&l.isWGS84(a)||l.isWebMercator(a)&&l.isWGS84(b):!1}function h(a,b,c,d){void 0===c&&(c=[0,0]);void 0===d&&(d=0);89.99999<b?b=89.99999:-89.99999>b&&(b=-89.99999);b*=.017453292519943;c[d]=.017453292519943*a*g;c[d+1]=.5*g*Math.log((1+Math.sin(b))/(1-Math.sin(b)));return c}function p(a,b,c,d,e){void 0===c&&(c=[0,0]);void 0===d&&(d=0);void 0===e&&(e=!1);a=a/g*57.29577951308232;c[d]=e?a:a-360*Math.floor((a+
180)/360);c[d+1]=57.29577951308232*(Math.PI/2-2*Math.atan(Math.exp(-1*b/g)));return c}Object.defineProperty(a,"__esModule",{value:!0});var g=b.wgs84Radius,q=[0,0];a.canProject=e;a.project=function(a,b){var c=a&&a.spatialReference;b=b&&(null!=b.wkid||null!=b.wkt?b:b.spatialReference);return e(c,b)?l.equals(c,b)?f.clone(a):l.isWebMercator(b)?k(a,h,d.WebMercator,!1,f.clone(a)):l.isWGS84(b)?k(a,p,d.WGS84,!1,f.clone(a)):null:null};a.lngLatToXY=h;a.xyToLngLat=p;a.geographicToWebMercator=function(a,b,c){void 0===
b&&(b=!1);void 0===c&&(c=f.clone(a));return k(a,h,d.WebMercator,b,c)};a.webMercatorToGeographic=function(a,b,c){void 0===b&&(b=!1);void 0===c&&(c=f.clone(a));return k(a,p,d.WGS84,b,c)}})},"esri/geometry/support/contains":function(){define(["require","exports"],function(c,a){function f(a,b,c,d){return b>=a.xmin&&b<=a.xmax&&c>=a.ymin&&c<=a.ymax?null!=d&&a.hasZ?d>=a.zmin&&d<=a.zmax:!0:!1}function b(a,b){if(a=a.rings)if(Array.isArray(a[0][0])){for(var c=!1,h=0,p=a.length;h<p;h++)c=d(c,a[h],b);b=c}else b=
d(!1,a,b);else b=!1;return b}function d(a,b,c){var d=c[0];c=c[1];for(var e=0,g=0,k=b.length;g<k;g++){e++;e===k&&(e=0);var f=b[g],l=f[0],f=f[1],C=b[e],B=C[0],C=C[1];(f<c&&C>=c||C<c&&f>=c)&&l+(c-f)/(C-f)*(B-l)<d&&(a=!a)}return a}Object.defineProperty(a,"__esModule",{value:!0});a.extentContainsPoint=function(a,b){return f(a,b.x,b.y,b.z)};a.extentContainsExtent=function(a,b){var c=b.xmin,d=b.ymin,p=b.zmin,g=b.xmax,k=b.ymax,l=b.zmax;return a.hasZ&&b.hasZ?f(a,c,d,p)&&f(a,c,k,p)&&f(a,g,k,p)&&f(a,g,d,p)&&
f(a,c,d,l)&&f(a,c,k,l)&&f(a,g,k,l)&&f(a,g,d,l):f(a,c,d)&&f(a,c,k)&&f(a,g,k)&&f(a,g,d)};a.extentContainsCoords2D=function(a,b){return f(a,b[0],b[1])};a.extentContainsCoords3D=function(a,b){return f(a,b[0],b[1],b[2])};a.polygonContainsPoint=function(a,c){return b(a,[c.x,c.y])};a.polygonContainsCoords=b})},"esri/geometry/support/intersects":function(){define(["require","exports","./contains"],function(c,a,f){function b(a,b){return f.extentContainsPoint(a,b)}function d(a,b){var c=a.hasZ&&b.hasZ,d;if(a.xmin<=
b.xmin){if(d=b.xmin,a.xmax<d)return!1}else if(d=a.xmin,b.xmax<d)return!1;if(a.ymin<=b.ymin){if(d=b.ymin,a.ymax<d)return!1}else if(d=a.ymin,b.ymax<d)return!1;if(c&&b.hasZ)if(a.zmin<=b.zmin){if(c=b.zmin,a.zmax<c)return!1}else if(c=a.zmin,b.zmax<c)return!1;return!0}function l(a,b){var c=b.hasZ?f.extentContainsCoords3D:f.extentContainsCoords2D,d=0;for(b=b.points;d<b.length;d++)if(c(a,b[d]))return!0;return!1}function k(a,b){g[0]=a.xmin;g[1]=a.ymax;q[0]=a.xmax;q[1]=a.ymax;v[0]=a.xmin;v[1]=a.ymin;y[0]=a.xmax;
y[1]=a.ymin;for(var c=0,d=C;c<d.length;c++)if(f.polygonContainsCoords(b,d[c]))return!0;c=0;for(b=b.rings;c<b.length;c++)if(d=b[c],d.length){var e=d[0];if(f.extentContainsCoords2D(a,e))return!0;for(var p=1;p<d.length;p++){var k=d[p];if(f.extentContainsCoords2D(a,k)||h(e,k,B))return!0;e=k}}return!1}function e(a,b){g[0]=a.xmin;g[1]=a.ymax;q[0]=a.xmax;q[1]=a.ymax;v[0]=a.xmin;v[1]=a.ymin;y[0]=a.xmax;y[1]=a.ymin;b=b.paths;for(var c=0;c<b.length;c++){var d=b[c];if(b.length){var e=d[0];if(f.extentContainsCoords2D(a,
e))return!0;for(var p=1;p<d.length;p++){var k=d[p];if(f.extentContainsCoords2D(a,k)||h(e,k,B))return!0;e=k}}}return!1}function h(a,b,c){for(var n=0;n<c.length;n++)if(p(a,b,c[n][0],c[n][1]))return!0;return!1}function p(a,b,c,d,e){var n=a[0];a=a[1];var t=b[0];b=b[1];var x=c[0],g=c[1];c=d[0]-x;var x=n-x,h=t-n;d=d[1]-g;var g=a-g,p=b-a,f=d*h-c*p;if(0===f)return!1;c=(c*g-d*x)/f;x=(h*g-p*x)/f;return 0<=c&&1>=c&&0<=x&&1>=x?(e&&(e[0]=n+c*(t-n),e[1]=a+c*(b-a)),!0):!1}Object.defineProperty(a,"__esModule",{value:!0});
a.extentIntersectsPoint=b;a.extentIntersectsExtent=d;a.extentIntersectsMultipoint=l;var g=[0,0],q=[0,0],v=[0,0],y=[0,0],C=[g,q,v,y],B=[[v,g],[g,q],[q,y],[y,v]];a.extentIntersectsPolygon=k;a.extentIntersectsPolyline=e;var r=[0,0];a.isSelfIntersecting=function(a){for(var b=0;b<a.length;b++){for(var c=a[b],d=0;d<c.length-1;d++)for(var e=c[d],g=c[d+1],h=b+1;h<a.length;h++)for(var f=0;f<a[h].length-1;f++){var k=a[h][f],q=a[h][f+1],A=p(e,g,k,q,r);if(A&&!(r[0]===e[0]&&r[1]===e[1]||r[0]===k[0]&&r[1]===k[1]||
r[0]===g[0]&&r[1]===g[1]||r[0]===q[0]&&r[1]===q[1]))return!0}f=c.length;if(!(4>=f))for(d=0;d<f-3;d++){var l=f-1;0===d&&(l=f-2);e=c[d];g=c[d+1];for(h=d+2;h<l;h++)if(k=c[h],q=c[h+1],(A=p(e,g,k,q,r))&&!(r[0]===e[0]&&r[1]===e[1]||r[0]===k[0]&&r[1]===k[1]||r[0]===g[0]&&r[1]===g[1]||r[0]===q[0]&&r[1]===q[1]))return!0}}return!1};a.segmentIntersects=p;a.getExtentIntersector=function(a){switch(a){case "esriGeometryEnvelope":case "extent":return d;case "esriGeometryMultipoint":case "multipoint":return l;case "esriGeometryPoint":case "point":return b;
case "esriGeometryPolygon":case "polygon":return k;case "esriGeometryPolyline":case "polyline":return e;case "mesh":return d}}})},"esri/geometry/Mesh":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/lang ../core/Logger ../core/accessorSupport/decorators ./Extent ./Geometry ./support/MeshComponent ./support/MeshVertexAttributes ./support/triangulationUtils ./support/meshUtils/centerAt ./support/meshUtils/offset ./support/meshUtils/primitives ./support/meshUtils/rotate".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r){var A=k.getLogger("esri.geometry.Mesh");c=function(a){function c(b){b=a.call(this)||this;b.components=null;b.hasZ=!0;b.hasM=!1;b.vertexAttributes=new q.MeshVertexAttributes;b.type="mesh";return b}f(c,a);p=c;Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.spatialReference,b=this.vertexAttributes&&this.vertexAttributes.position;if(!b||0===b.length||this.components&&0===this.components.length)return new h({xmin:0,ymin:0,zmin:0,xmax:0,
ymax:0,zmax:0,spatialReference:a});a={xmin:Infinity,xmax:-Infinity,ymin:Infinity,ymax:-Infinity,zmin:Infinity,zmax:-Infinity,spatialReference:a};if(!this.components)return new h(this.extendExtent(a,b,null));for(var c=0,n=this.components;c<n.length;c++){var d=n[c];if(d.faces)this.extendExtent(a,b,d.faces);else{this.extendExtent(a,b,null);break}}return new h(a)},enumerable:!0,configurable:!0});c.prototype.addComponent=function(a){this.components||(this.components=[]);this.components.push(a);this.clearCache()};
c.prototype.removeComponent=function(a){if(this.components&&(a=this.components.indexOf(a),-1!==a)){this.components=this.components.splice(a,1);return}A.error("removeComponent()","Provided component is not part of the list of components")};c.prototype.rotate=function(a,b,c,n){r.axisAngleFrom(u.x,a/180*Math.PI,t);r.axisAngleFrom(u.y,b/180*Math.PI,x);r.axisAngleFrom(u.z,c/180*Math.PI,D);r.axisAngleMultiply(t,x,t);r.axisAngleMultiply(t,D,t);r.rotate(this,t,n);return this};c.prototype.offset=function(a,
b,c,d){n[0]=a;n[1]=b;n[2]=c;C.offset(this,n,d);return this};c.prototype.centerAt=function(a,b){y.centerAt(this,a,b);return this};c.prototype.clone=function(){return new p({components:l.clone(this.components),spatialReference:this.spatialReference,vertexAttributes:l.clone(this.vertexAttributes)})};c.prototype.vertexAttributesChanged=function(){this.clearCache()};c.prototype.toJSON=function(a){return this.write(null,a)};c.prototype.forEachVertex=function(a,b,c){if(b)for(d=0;d<b.length;d++){var n=3*
b[d];c(a[n+0],a[n+1],a[n+2])}else for(var d=0;d<a.length;d+=3)c(a[d+0],a[d+1],a[d+2])};c.prototype.extendExtent=function(a,b,c){this.forEachVertex(b,c,function(b,c,n){a.xmin=Math.min(a.xmin,b);a.xmax=Math.max(a.xmax,b);a.ymin=Math.min(a.ymin,c);a.ymax=Math.max(a.ymax,c);a.zmin=Math.min(a.zmin,n);a.zmax=Math.max(a.zmax,n)});return a};c.createBox=function(a,b){a=new p(B.convertUnitGeometry(B.createUnitSizeBox(),a,b));if(b&&b.imageFace&&"all"!==b.imageFace){var c=a.components[0],n=c.faces,d=B.boxFaceOrder[b.imageFace],
t=6*d;b=new Uint32Array(6);for(var e=new Uint32Array(n.length-6),x=0,h=0,f=0;f<n.length;f++)f>=t&&f<t+6?b[x++]=n[f]:e[h++]=n[f];n=new Float32Array(a.vertexAttributes.uv);d*=8;t=[0,1,1,1,1,0,0,0];for(f=0;f<t.length;f++)n[d+f]=t[f];a.vertexAttributes.uv=n;a.components=[new g({faces:b,material:c.material}),new g({faces:e})]}return a};c.createSphere=function(a,b){return new p(B.convertUnitGeometry(B.createUnitSizeSphere(b&&b.densificationFactor||0),a,b))};c.createCylinder=function(a,b){return new p(B.convertUnitGeometry(B.createUnitSizeCylinder(b&&
b.densificationFactor||0),a,b))};c.createPlane=function(a,b){return new p(B.convertUnitGeometry(B.createUnitSizePlane(b&&b.facing||"up"),a,b))};c.createFromPolygon=function(a,b){var c=v.triangulate(a);return new p({vertexAttributes:{position:c.position},components:[{faces:c.faces,shading:"flat",material:b&&b.material||null}],spatialReference:a.spatialReference})};var p;b([e.property({dependsOn:["vertexAttributes","vertexAttributes.position","components"],json:{read:!1}})],c.prototype,"cache",void 0);
b([e.property({type:[g]})],c.prototype,"components",void 0);b([e.property({dependsOn:["cache"],readOnly:!0,json:{read:!1}})],c.prototype,"extent",null);b([e.property({readOnly:!0,json:{read:!1,write:!1}})],c.prototype,"hasZ",void 0);b([e.property({readOnly:!0,json:{read:!1,write:!1}})],c.prototype,"hasM",void 0);b([e.property({type:q.MeshVertexAttributes,nonNullable:!0,json:{write:!0}})],c.prototype,"vertexAttributes",void 0);b([d(0,e.cast(g))],c.prototype,"addComponent",null);return c=p=b([e.subclass("esri.geometry.Mesh")],
c)}(e.declared(p));c.prototype.toJSON.isDefaultToJSON=!0;var u={x:[1,0,0],y:[0,1,0],z:[0,0,1]},n=[0,0,0],t=[0,0,0,0],x=[0,0,0,0],D=[0,0,0,0];return c})},"esri/core/tsSupport/paramHelper":function(){define([],function(){return function(c,a){return function(f,b){a(f,b,c)}}})},"esri/geometry/support/MeshComponent":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators ./MeshMaterial ./MeshVertexAttributes".split(" "),
function(c,a,f,b,d,l,k,e,h,p){var g=k.getLogger("esri.geometry.support.MeshComponent");return function(a){function c(b){b=a.call(this)||this;b.faces=null;b.material=null;b.shading="source";return b}f(c,a);d=c;c.prototype.castFaces=function(a){return p.castArray(a,Uint32Array,[Uint16Array],{loggerTag:".faces\x3d",stride:3},g)};c.prototype.clone=function(){return new d({faces:l.clone(this.faces),shading:this.shading,material:l.clone(this.material)})};var d;b([e.property({json:{write:!0}})],c.prototype,
"faces",void 0);b([e.cast("faces")],c.prototype,"castFaces",null);b([e.property({type:h.MeshMaterial,json:{write:!0}})],c.prototype,"material",void 0);b([e.property({type:String,json:{write:!0}})],c.prototype,"shading",void 0);return c=d=b([e.subclass("esri.geometry.support.MeshComponent")],c)}(e.declared(d))})},"esri/geometry/support/MeshMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType ./ImageMeshColor ./MeshColor ./ValueMeshColor".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q){Object.defineProperty(a,"__esModule",{value:!0});var v={base:g.default,key:"type",defaultKeyValue:"value",typeMap:{value:q,image:p}};c=function(a){function c(b){b=a.call(this)||this;b.color=null;return b}f(c,a);g=c;c.prototype.castColor=function(a){return a?"string"===typeof a?y.test(a)||d.named[a]?new q({value:a}):new p({url:a}):Array.isArray(a)?new q({value:a}):a instanceof HTMLImageElement||a instanceof HTMLCanvasElement||a instanceof ImageData?new p({data:a}):
h.ensureOneOfType(v,a):a};c.prototype.readColor=function(a,b,c){if(a)switch(a.type){case "image":return new p(a);case "value":return new q(a)}};c.prototype.clone=function(){return new g({color:k.clone(this.color)})};var g;b([e.property({types:v,json:{write:!0}})],c.prototype,"color",void 0);b([e.cast("color")],c.prototype,"castColor",null);b([e.reader("color")],c.prototype,"readColor",null);return c=g=b([e.subclass("esri.geometry.support.MeshResources")],c)}(e.declared(l));a.MeshMaterial=c;var y=
/^\s*(#|rgba?\()/;a.default=c})},"esri/Color":function(){define(["./core/declare","./core/accessorSupport/ensureType","dojo/colors"],function(c,a,f){function b(b){return Math.max(0,Math.min(a.ensureInteger(b),255))}var d=c([f],{declaredClass:"esri.Color",toJSON:function(){return[b(this.r),b(this.g),b(this.b),1<this.a?this.a:b(255*this.a)]},clone:function(){return new d(this.toRgba())}});d.toJSON=function(a){return a&&[b(a.r),b(a.g),b(a.b),1<a.a?a.a:b(255*a.a)]};d.fromJSON=function(a){return a&&new d([a[0],
a[1],a[2],a[3]/255])};d.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/255]};d.toUnitRGBA=function(a){return[a.r/255,a.g/255,a.b/255,null!=a.a?a.a:1]};var l="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(c=0;c<l.length;c++)d[l[c]]=f[l[c]];d.named.rebeccapurple=[102,51,153];return d})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(c,a,f,b){var d={};a.setObject("dojo.colors",d);var l=function(a,b,c){0>c&&++c;1<c&&
--c;var d=6*c;return 1>d?a+(b-a)*d:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a};c.colorFromRgb=f.fromRgb=function(a,c){var d=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(d){a=d[2].split(/\s*,\s*/);var e=a.length,d=d[1];if("rgb"==d&&3==e||"rgba"==d&&4==e)return d=a[0],"%"==d.charAt(d.length-1)?(d=b.map(a,function(a){return 2.56*parseFloat(a)}),4==e&&(d[3]=a[3]),f.fromArray(d,c)):f.fromArray(a,c);if("hsl"==d&&3==e||"hsla"==d&&4==e){var d=(parseFloat(a[0])%360+360)%360/360,h=parseFloat(a[1])/
100,k=parseFloat(a[2])/100,h=.5>=k?k*(h+1):k+h-k*h,k=2*k-h,d=[256*l(k,h,d+1/3),256*l(k,h,d),256*l(k,h,d-1/3),1];4==e&&(d[3]=a[3]);return f.fromArray(d,c)}}return null};var k=function(a,b,c){a=Number(a);return isNaN(a)?c:a<b?b:a>c?c:a};f.prototype.sanitize=function(){this.r=Math.round(k(this.r,0,255));this.g=Math.round(k(this.g,0,255));this.b=Math.round(k(this.b,0,255));this.a=k(this.a,0,1);return this};d.makeGrey=f.makeGrey=function(a,b){return f.fromArray([a,a,a,b])};a.mixin(f.named,{aliceblue:[240,
248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,
0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],
forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,
211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,
250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,
221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,
245,245],yellowgreen:[154,205,50]});return f})},"esri/geometry/support/ImageMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Identifiable ../../core/urlUtils ../../core/accessorSupport/decorators ./MeshColor ../../views/support/screenshotUtils".split(" "),function(c,a,f,b,d,l,k,e,h){return function(a){function c(b){b=a.call(this)||this;b.type="image";return b}f(c,a);d=c;Object.defineProperty(c.prototype,"url",{get:function(){return this._get("url")||
null},set:function(a){this._set("url",a);a&&this._set("data",null)},enumerable:!0,configurable:!0});c.prototype.writeUrl=function(a,b,c,d){b[c]=l.write(a,d)};Object.defineProperty(c.prototype,"data",{get:function(){return this._get("data")||null},set:function(a){this._set("data",a);a&&this._set("url",null)},enumerable:!0,configurable:!0});c.prototype.writeData=function(a,b,c,d){a instanceof HTMLImageElement?a={type:"image-element",src:l.write(a.src,d)}:a instanceof HTMLCanvasElement?(a=a.getContext("2d").getImageData(0,
0,a.width,a.height),a={type:"canvas-element",imageData:this.encodeImageData(a)}):a={type:"image-data",imageData:this.encodeImageData(a)};b[c]=a};c.prototype.readData=function(a,b){switch(a.type){case "image-element":return b=new Image,b.src=a.src,b;case "canvas-element":return a=this.decodeImageData(a.imageData),b=document.createElement("canvas"),b.width=a.width,b.height=a.height,b.getContext("2d").putImageData(a,0,0),b;case "image-data":return this.decodeImageData(a.imageData)}};Object.defineProperty(c.prototype,
"transparent",{get:function(){var a=this.data;return a instanceof HTMLCanvasElement?this.imageDataContainsTransparent(a.getContext("2d").getImageData(0,0,a.width,a.height)):a instanceof ImageData?this.imageDataContainsTransparent(a):!1},set:function(a){null!=a?this._override("transparent",a):this._clearOverride("transparent")},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new d({url:this.url,data:this.data})};c.prototype.encodeImageData=function(a){for(var b="",c=0;c<a.data.length;c++)b+=
String.fromCharCode(a.data[c]);return{data:btoa(b),width:a.width,height:a.height}};c.prototype.decodeImageData=function(a){for(var b=atob(a.data),c=new Uint8ClampedArray(b.length),d=0;d<b.length;d++)c[d]=b.charCodeAt(d);return h.wrapImageData(c,a.width,a.height)};c.prototype.imageDataContainsTransparent=function(a){for(var b=3;b<a.data.length;b+=4)if(255!==a.data[b])return!0;return!1};var d;b([k.property()],c.prototype,"type",void 0);b([k.property({type:String,json:{write:!0}})],c.prototype,"url",
null);b([k.writer("url")],c.prototype,"writeUrl",null);b([k.property({json:{write:{overridePolicy:function(){return{enabled:!this.url}}}}}),k.property()],c.prototype,"data",null);b([k.writer("data")],c.prototype,"writeData",null);b([k.reader("data")],c.prototype,"readData",null);b([k.property({type:Boolean,dependsOn:["data"],json:{write:{overridePolicy:function(){return{enabled:this._isOverridden("transparent")}}}}})],c.prototype,"transparent",null);return c=d=b([k.subclass("esri.geometry.support.ImageMeshColor")],
c)}(k.declared(e.default,d))})},"esri/core/Identifiable":function(){define(["./declare"],function(c){var a=0;return c(null,{constructor:function(){Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+a++})}})})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper dojo/io-query dojo/_base/url ../config ./Error ./global ./lang ./Logger".split(" "),function(c,a,f,b,d,l,k,e,h,p){function g(a){var c={path:null,query:null},n=
new d(a),t=a.indexOf("?");null===n.query?c.path=a:(c.path=a.substring(0,t),c.query=b.queryToObject(n.query));n.fragment&&(c.hash=n.fragment,null===n.query&&(c.path=c.path.substring(0,c.path.length-(n.fragment.length+1))));return c}function q(a){var b=a.indexOf("?");-1!==b?(ba.path=a.slice(0,b),ba.query=a.slice(b+1)):(ba.path=a,ba.query=null);return ba}function v(a){a=q(a).path;a&&"/"===a[a.length-1]||(a+="/");a=S(a,!0);return a=a.toLowerCase()}function y(a){var b=X.proxyRules;a=v(a);for(var c=0;c<
b.length;c++)if(0===a.indexOf(b[c].urlPrefix))return b[c]}function C(a){a=u(a);var b=a.indexOf("/sharing");return 0<b?a.substring(0,b):a.replace(/\/+$/,"")}function B(a,b,c){void 0===c&&(c=!1);a=T(a);b=T(b);return c||a.scheme===b.scheme?a.host.toLowerCase()===b.host.toLowerCase()&&a.port===b.port:!1}function r(b,c,d){void 0===c&&(c=a.appBaseUrl);if(J(b))return d&&d.preserveProtocolRelative?b:"http"===a.appUrl.scheme&&a.appUrl.authority===t(b).slice(2)?"http:"+b:"https:"+b;if(E(b))return b;d=n;if("/"===
b[0]){var e=c.indexOf("//"),e=c.indexOf("/",e+2);c=-1===e?c:c.slice(0,e)}return d(c,b)}function A(b,c,n){void 0===c&&(c=a.appBaseUrl);if(!x(b))return b;var d=u(b),t=d.toLowerCase();c=u(c).toLowerCase().replace(/\/+$/,"");if((n=n?u(n).toLowerCase().replace(/\/+$/,""):null)&&0!==c.indexOf(n))return b;for(var e=function(a,b,c){c=a.indexOf(b,c);return-1===c?a.length:c},g=e(t,"/",t.indexOf("//")+2),h=-1;t.slice(0,g+1)===c.slice(0,g)+"/";){h=g+1;if(g===t.length)break;g=e(t,"/",g+1)}if(-1===h||n&&h<n.length)return b;
b=d.slice(h);d=c.slice(h-1).replace(/[^/]+/g,"").length;if(0<d)for(t=0;t<d;t++)b="../"+b;else b="./"+b;return b}function u(a){a=a.trim();a=r(a);if(/^https?:\/\//i.test(a)){var b=q(a);a=b.path.replace(/\/{2,}/g,"/");a=a.replace("/","//");b.query&&(a+="?"+b.query)}a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");return a=O(a)}function n(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(a&&a.length){b=[];if(x(a[0])){var c=a[0],n=c.indexOf("//");b.push(c.slice(0,n+1));Y.test(a[0])&&
(b[0]+="/");a[0]=c.slice(n+2)}else"/"===a[0][0]&&b.push("");a=a.reduce(function(a,b){return b?a.concat(b.split("/")):a},[]);for(c=0;c<a.length;c++)n=a[c],".."===n&&0<b.length?b.pop():!n||"."===n&&0!==b.length||b.push(n);return b.join("/")}}function t(a){if(D(a)||G(a))return null;var b=a.indexOf("://");if(-1===b&&J(a))b=2;else if(-1!==b)b+=3;else return null;b=a.indexOf("/",b);return-1===b?a:a.slice(0,b)}function x(a){return J(a)||E(a)}function D(a){return"blob:"===a.slice(0,5)}function G(a){return"data:"===
a.slice(0,5)}function F(a){return(a=a.match(ea))?{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null}function J(a){return a&&"/"===a[0]&&"/"===a[1]}function E(a){return M.test(a)}function N(b){return aa.test(b)||"http"===a.appUrl.scheme&&J(b)}function Z(a){return J(a)?"https:"+a:a.replace(aa,"https:")}function ia(){return"https"===a.appUrl.scheme}function S(a,b){void 0===b&&(b=!1);if(J(a))return a.slice(2);a=a.replace(M,"");b&&1<a.length&&"/"===a[0]&&"/"===a[1]&&(a=a.slice(2));return a}function O(b){var c=
X.httpsDomains;if(!N(b))return b;var n=b.indexOf("/",7),d;d=-1===n?b:b.slice(0,n);d=d.toLowerCase().slice(7);if(ca.test(d))if(h.endsWith(d,":80"))d=d.slice(0,-3),b=b.replace(":80","");else return b;if("http"===a.appUrl.scheme&&d===a.appUrl.authority&&!fa.test(b))return b;if(ia()&&d===a.appUrl.authority||c&&c.some(function(a){return d===a||h.endsWith(d,"."+a)})||ia()&&!y(b))b=Z(b);return b}function ha(a,b,c){if(!(b&&c&&a&&x(a)))return a;var n=a.indexOf("//"),d=a.indexOf("/",n+2),t=a.indexOf(":",n+
2),d=Math.min(0>d?a.length:d,0>t?a.length:t);if(a.slice(n+2,d).toLowerCase()!==b.toLowerCase())return a;b=a.slice(0,n+2);a=a.slice(d);return""+b+c+a}function T(b){if("string"===typeof b)return new d(r(b));b.scheme||(b.scheme=a.appUrl.scheme);return b}Object.defineProperty(a,"__esModule",{value:!0});var qa=p.getLogger("esri.core.urlUtils"),X=l.request,M=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,aa=/^\s*http:/i,K=/^\s*https:/i,Y=/^\s*file:/i,ca=/:\d+$/,fa=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;a.appUrl=
new d(e.location);a.trustedServersUrlCache={};a.appBaseUrl=function(){var b=a.appUrl.path,b=b.substring(0,b.lastIndexOf(b.split("/")[b.split("/").length-1]));return""+(a.appUrl.scheme+"://"+a.appUrl.host+(null!=a.appUrl.port?":"+a.appUrl.port:""))+b}();a.urlToObject=g;a.getProxyUrl=function(b){void 0===b&&(b=!1);var c,n=X.proxyUrl;if("string"===typeof b){if(c=b,c=K.test(c)||"https"===a.appUrl.scheme&&J(c),b=y(b))n=b.proxyUrl}else c=!!b;if(!n)throw qa.warn("esri/config: esriConfig.request.proxyUrl is not set."),
new k("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set.");c&&ia()&&(n=Z(n));return g(n)};a.addProxy=function(a){var c=y(a),n,d;c&&(d=q(c.proxyUrl),n=d.path,d=d.query?b.queryToObject(d.query):null);n&&(c=g(a),a=n+"?"+c.path,(n=b.objectToQuery(f({},d,c.query)))&&(a=a+"?"+n));return a};var ba={path:"",query:""};a.addProxyRule=function(a){a={proxyUrl:a.proxyUrl,urlPrefix:v(a.urlPrefix)};for(var b=X.proxyRules,c=a.urlPrefix,n=b.length,d=0;d<b.length;d++){var t=b[d].urlPrefix;
if(0===c.indexOf(t)){if(c.length===t.length)return-1;n=d;break}0===t.indexOf(c)&&(n=d+1)}b.splice(n,0,a);return n};a.getProxyRule=y;a.hasSamePortal=function(a,b){a=C(a);b=C(b);return S(a)===S(b)};a.getInterceptor=function(a){var b=function(b){return null==b||b instanceof RegExp&&b.test(a)||"string"===typeof b&&h.startsWith(a,b)},c=X.interceptors;if(c)for(var n=0;n<c.length;n++){var d=c[n];if(Array.isArray(d.urls)){if(d.urls.some(b))return d}else if(b(d.urls))return d}return null};a.hasSameOrigin=
B;a.isTrustedServer=function(b){if("string"===typeof b)if(x(b))b=T(b);else return!0;for(var c=X.trustedServers||[],n=0;n<c.length;n++){var t;t=c[n];a.trustedServersUrlCache[t]||(E(t)||J(t)?a.trustedServersUrlCache[t]=[new d(r(t))]:a.trustedServersUrlCache[t]=[new d("http://"+t),new d("https://"+t)]);t=a.trustedServersUrlCache[t];for(var e=0;e<t.length;e++)if(B(b,t[e]))return!0}return!1};a.makeAbsolute=r;a.makeRelative=A;a.normalize=u;a.join=n;a.getOrigin=t;a.isAbsolute=x;a.isBlobProtocol=D;a.isDataProtocol=
G;a.dataToArrayBuffer=function(a){a=F(a);if(!a||!a.isBase64)return null;a=atob(a.data);for(var b=new Uint8Array(a.length),c=0;c<a.length;c++)b[c]=a.charCodeAt(c);return b.buffer};var ea=/^data:(.*?)(;base64)?,(.*)$/;a.dataComponents=F;a.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};a.isProtocolRelative=J;a.hasProtocol=E;a.toHTTP=function(a){return J(a)?"http:"+a:a.replace(K,"http:")};a.toHTTPS=Z;a.removeFile=function(a){var b=0;if(x(a)){var c=
a.indexOf("//");-1!==c&&(b=c+2)}c=a.lastIndexOf("/");return c<b?a:a.slice(0,c+1)};a.removeTrailingSlash=function(a){return a.replace(/\/+$/,"")};a.changeDomain=ha;a.read=function(b,c){var n=c&&c.url&&c.url.path;b&&n&&(b=r(b,n,{preserveProtocolRelative:!0}));(c=c&&c.portal)&&!c.isPortal&&c.urlKey&&c.customBaseUrl?(n=c.urlKey+"."+c.customBaseUrl,c=B(a.appUrl,a.appUrl.scheme+"://"+n)?ha(b,c.portalHostname,n):ha(b,n,c.portalHostname)):c=b;return c};a.write=function(a,b){if(!a)return a;!x(a)&&b&&b.blockedRelativeUrls&&
b.blockedRelativeUrls.push(a);var c=r(a);if(b){var n=b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.rootPath||b.url&&b.url.path;n&&(c=A(c,n,n),c!==a&&b.verifyItemRelativeUrls&&b.verifyItemRelativeUrls.writtenUrls.push(c))}a=c;c=(b=b&&b.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?ha(a,b.urlKey+"."+b.customBaseUrl,b.portalHostname):a;return c};a.writeOperationalLayerUrl=function(a,b){a&&J(a)&&(a="https:"+a);b.url=a?u(a):a};a.isSVG=function(a){return oa.test(a)};a.removeQueryParameters=function(a,
b){a=g(a);var c=Object.keys(a.query||{});0<c.length&&b&&b.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+c.join(", ")+".");return a.path};a.addQueryParameter=function(a,c,n){a=g(a);var d=a.query||{};d[c]=n;return a.path+"?"+b.objectToQuery(d)};a.addQueryParameters=function(a,c){a=g(a);var n=a.query||{},d;for(d in c)n[d]=c[d];return(c=b.objectToQuery(n))?a.path+"?"+c:a.path};a.removeQueryParameter=function(a,c){var n=g(a),d=n.path,
n=n.query;if(!n)return a;delete n[c];return(a=b.objectToQuery(n))?d+"?"+a:d};var oa=/(^data:image\/svg|\.svg$)/i})},"dojo/_base/url":function(){define(["./kernel"],function(c){var a=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,f=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,b=function(){for(var c=arguments,l=[c[0]],k=1;k<c.length;k++)if(c[k]){var e=new b(c[k]+""),l=new b(l[0]+"");if(""==e.path&&!e.scheme&&!e.authority&&!e.query)null!=e.fragment&&(l.fragment=e.fragment),
e=l;else if(!e.scheme&&(e.scheme=l.scheme,!e.authority&&(e.authority=l.authority,"/"!=e.path.charAt(0)))){for(var l=(l.path.substring(0,l.path.lastIndexOf("/")+1)+e.path).split("/"),h=0;h<l.length;h++)"."==l[h]?h==l.length-1?l[h]="":(l.splice(h,1),h--):0<h&&(1!=h||""!=l[0])&&".."==l[h]&&".."!=l[h-1]&&(h==l.length-1?(l.splice(h,1),l[h-1]=""):(l.splice(h-1,2),h-=2));e.path=l.join("/")}l=[];e.scheme&&l.push(e.scheme,":");e.authority&&l.push("//",e.authority);l.push(e.path);e.query&&l.push("?",e.query);
e.fragment&&l.push("#",e.fragment)}this.uri=l.join("");c=this.uri.match(a);this.scheme=c[2]||(c[1]?"":null);this.authority=c[4]||(c[3]?"":null);this.path=c[5];this.query=c[7]||(c[6]?"":null);this.fragment=c[9]||(c[8]?"":null);null!=this.authority&&(c=this.authority.match(f),this.user=c[3]||null,this.password=c[4]||null,this.host=c[6]||c[7],this.port=c[9]||null)};b.prototype.toString=function(){return this.uri};return c._Url=b})},"esri/geometry/support/MeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(c,a,f,b,d,l){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(b){return a.call(this)||this}f(c,a);c.prototype.clone=function(){throw Error("not implemented");};b([l.property({readOnly:!0,json:{read:!1,write:{isRequired:!0,ignoreOrigin:!0,enabled:!0}}})],c.prototype,"type",void 0);return c=b([l.subclass("esri.geometry.support.MeshColor")],c)}(l.declared(d));a.MeshColor=c;a.default=c})},"esri/views/support/screenshotUtils":function(){define(["require","exports","../../core/tsSupport/assignHelper"],
function(c,a,f){function b(a,b){var c=a||{},d=c.format,e=c.quality,c=c.rotation,h=b.padding||v,n;n=b.width-h.left-h.right;b=b.height-h.top-h.bottom;var t=0,h=0,x=n,p=b;if(a&&a.area){var t=Math.floor(a.area.x)||0,h=Math.floor(a.area.y)||0,f=null!=a.area.width?Math.floor(a.area.width):null,l=null!=a.area.height?Math.floor(a.area.height):null,x=x-t,p=p-h;null!=f&&null!=l?(x=Math.min(x,f),p=Math.min(p,l)):null==f&&null!=l?(f=Math.min(x,f),p*=f/x,x=f):null!=f&&null==l&&(f=Math.min(p,l),x*=f/p,p=f)}a&&
null!=a.width&&null!=a.height&&(f=a.width/a.height,l=x/p,l!==f&&(l<f?x=Math.floor(p*f):p=Math.floor(x/f)));t=Math.floor(Math.max(t,0));h=Math.floor(Math.max(h,0));n={x:t,y:h,width:Math.floor(Math.min(x,n-t)),height:Math.floor(Math.min(p,b-h))};b=n.width/n.height;h=x/p;h!==b&&(h>b?(b=Math.floor(n.width/h),n={x:n.x,y:Math.floor(n.y+(n.height-b)/2),width:n.width,height:b}):(b=Math.floor(n.height*h),n={x:Math.floor(n.x+(n.width-b)/2),y:n.y,width:b,height:n.height}));b=k(a,n);a=b.width;b=b.height;a:switch(d){case "png":case "jpg":case "jpeg":break a;
default:d=g}h=q[d];e=null!=e?e:h;return{format:d,quality:0>e?0:100<e?100:e,area:n,width:a,height:b,rotation:c}}function d(a,b){return a.toDataURL(p[b.format],b.quality/100)}function l(a,b,c){c||(e||(e=document.createElement("canvas"),e.width=1,e.height=1),c=e);return c.getContext("2d").createImageData(a,b)}function k(a,b){if(!a)return b;var c=a.width;a=a.height;if(null!=c&&null!=a)return{width:Math.floor(c),height:Math.floor(a)};if(null==c&&null==a)return b;b=b.width/b.height;return null==a?{width:Math.floor(c),
height:Math.floor(c/b)}:{width:Math.floor(a*b),height:Math.floor(a)}}Object.defineProperty(a,"__esModule",{value:!0});a.completeUserSettings=b;a.toRenderSettings=function(a,c){a=b(a,c);var d=a.area,e=a.width/d.width,g=c.padding,h=g.left+g.right,n=g.top+g.bottom;return{framebufferWidth:Math.floor((c.width-h)*e+h),framebufferHeight:Math.floor((c.height-n)*e+n),region:{x:Math.floor(d.x*e)+g.left,y:Math.floor(d.y*e)+g.top,width:a.width,height:a.height},format:a.format,quality:a.quality,rotation:a.rotation,
pixelRatio:e}};a.encodeResult=function(a,b,c,e){if(e.premultipliedAlpha)for(var g=a.data,h=g.length,n=0;n<h;n+=4){var t=g[n+3];0<t&&(t/=255,g[n+0]/=t,g[n+1]/=t,g[n+2]/=t)}c.width=a.width;c.height=a.height;g=c.getContext("2d");g.putImageData(a,0,0);e.flipY&&(g.save(),g.globalCompositeOperation="copy",g.scale(1,-1),g.translate(0,-g.canvas.height),g.drawImage(g.canvas,0,0),g.restore());a=g.getImageData(0,0,a.width,a.height);b=d(c,b);c.width=0;c.height=0;return{dataUrl:b,data:a}};a.toDataUrl=d;a.createEmptyImageData=
function(a,b,c){if(!a||!b)throw Error("Cannot construct image data without dimensions");if(h)try{return new ImageData(a,b)}catch(r){h=!1}return l(a,b,c)};a.wrapImageData=function(a,b,c,d){if(!b||!c)throw Error("Cannot construct image data without dimensions");if(h)try{return new ImageData(a,b,c)}catch(A){h=!1}b=l(b,c,d);b.data.set(a,0);return b};a.resampleHermite=function(a,b,c,d,e,g,n,t){void 0===d&&(d=0);void 0===e&&(e=0);void 0===g&&(g=a.width-d);void 0===n&&(n=a.height-e);void 0===t&&(t=!1);var x=
a.data,h=b.width,p=b.height,f=b.data;g/=h;n/=p;var k=Math.ceil(g/2),q=Math.ceil(n/2);a=a.width;for(var A=0;A<p;A++)for(var l=0;l<h;l++){for(var u=4*(l+(t?p-A-1:A)*h),v=0,y=0,r=0,C=0,B=0,X=0,M=(A+.5)*n,aa=Math.floor(A*n);aa<(A+1)*n;aa++)for(var K=Math.abs(M-(aa+.5))/q,Y=(l+.5)*g,K=K*K,ca=Math.floor(l*g);ca<(l+1)*g;ca++){var fa=Math.abs(Y-(ca+.5))/k,fa=Math.sqrt(K+fa*fa);if(!(1<=fa)){var fa=2*fa*fa*fa-3*fa*fa+1,ba=4*(d+ca+(e+aa)*a),X=X+fa*x[ba+3],y=y+fa;!c&&255>x[ba+3]&&(fa=fa*x[ba+3]/255);r+=fa*x[ba];
C+=fa*x[ba+1];B+=fa*x[ba+2];v+=fa}}f[u]=r/v;f[u+1]=C/v;f[u+2]=B/v;f[u+3]=X/y}return b};var e=null,h=!0,p={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},g="jpg",q={png:100,jpg:98,jpeg:98},v={top:0,right:0,bottom:0,left:0}})},"esri/geometry/support/ValueMeshColor":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/accessorSupport/decorators ./MeshColor".split(" "),function(c,a,f,b,d,l,k,e){return function(a){function c(b){b=
a.call(this)||this;b.type="value";b.value=null;return b}f(c,a);e=c;c.prototype.clone=function(){return new e({value:l.clone(this.value)})};var e;b([k.property()],c.prototype,"type",void 0);b([k.property({type:d})],c.prototype,"value",void 0);return c=e=b([k.subclass("esri.geometry.support.ValueMeshColor")],c)}(k.declared(e.default))})},"esri/geometry/support/MeshVertexAttributes":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/lang ../../core/Logger ../../core/accessorSupport/decorators".split(" "),
function(c,a,f,b,d,l,k,e){function h(a,b,c,d){var e=b.loggerTag;b=b.stride;return 0!==a.length%b?(d.error(e,"Invalid array length, expected a multiple of "+b),new c([])):a}function p(a,b,c,d,e){if(!a)return a;if(a instanceof b)return h(a,d,b,e);for(var g=0;g<c.length;g++)if(a instanceof c[g])return h(new b(a),d,b,e);if(Array.isArray(a))return h(new b(a),d,b,e);c=c.map(function(a){return"'"+a.name+"'"});e.error("Failed to set property, expected one of "+c+", but got "+a.constructor.name);return new b([])}
function g(a,b,c){for(var d=Array(a.length),e=0;e<a.length;e++)d[e]=a[e];b[c]=d}Object.defineProperty(a,"__esModule",{value:!0});var q=k.getLogger("esri.geometry.support.MeshVertexAttributes");c=function(a){function c(b){b=a.call(this)||this;b.color=null;b.position=new Float64Array(0);b.uv=null;b.normal=null;return b}f(c,a);d=c;c.prototype.castColor=function(a){return p(a,Uint8Array,[Uint8ClampedArray],{loggerTag:".color\x3d",stride:4},q)};c.prototype.castPosition=function(a){a&&a instanceof Float32Array&&
q.warn(".position\x3d","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array");return p(a,Float64Array,[Float32Array],{loggerTag:".position\x3d",stride:3},q)};c.prototype.castUv=function(a){return p(a,Float32Array,[Float64Array],{loggerTag:".uv\x3d",stride:2},q)};c.prototype.castNormal=function(a){return p(a,Float32Array,[Float64Array],{loggerTag:".normal\x3d",stride:3},q)};c.prototype.clone=function(){return new d({position:l.clone(this.position),
uv:l.clone(this.uv),normal:l.clone(this.normal)})};var d;b([e.property({json:{write:g}})],c.prototype,"color",void 0);b([e.cast("color")],c.prototype,"castColor",null);b([e.property({nonNullable:!0,json:{write:g}})],c.prototype,"position",void 0);b([e.cast("position")],c.prototype,"castPosition",null);b([e.property({json:{write:g}})],c.prototype,"uv",void 0);b([e.cast("uv")],c.prototype,"castUv",null);b([e.property({json:{write:g}})],c.prototype,"normal",void 0);b([e.cast("normal")],c.prototype,"castNormal",
null);return c=d=b([e.subclass("esri.geometry.support.MeshVertexAttributes")],c)}(e.declared(d));a.MeshVertexAttributes=c;a.castArray=p;a.default=c})},"esri/geometry/support/triangulationUtils":function(){define(["require","exports","../../core/libs/earcut/earcut","./coordsUtils"],function(c,a,f,b){function d(a,b,c){if(1===a.length)return a[0];b=new Float64Array(b);c=new Uint32Array(c);for(var d=0,e=0,h=0;h<a.length;h++){for(var f=a[h],p=0;p<f.position.length;p++)b[d++]=f.position[p];for(p=0;p<f.faces.length;p++)c[e++]=
f.faces[p]}return{position:b,faces:c}}function l(a,c){for(var d=a.length,e=Array(d),h=Array(d),f=Array(d),l=0,C=0,B=0,r=0,A=0;A<d;++A)r+=a[A].length;for(var r=new Float64Array(3*r),u=0,n=d-1;0<=n;n--){var t=a[n];if(b.isClockwise(t,!1,!1)||1===d){for(var x=t.length,A=0;A<l;++A)x+=e[A].length;A={index:u,pathLengths:Array(l+1),count:x,holeIndices:Array(l)};A.pathLengths[0]=t.length;0<t.length&&(f[B++]={index:u,count:t.length});u=k(t,0,r,u,t.length,c);for(t=0;t<l;++t)x=e[t],A.holeIndices[t]=u,A.pathLengths[t+
1]=x.length,0<x.length&&(f[B++]={index:u,count:x.length}),u=k(x,0,r,u,x.length,c);l=0;0<A.count&&(h[C++]=A)}else e[l++]=t}for(t=0;t<l;++t)x=e[t],0<x.length&&(f[B++]={index:u,count:x.length}),u=k(x,0,r,u,x.length,c);C<d&&(h.length=C);B<d&&(f.length=B);return{position:r,polygons:h,outlines:f}}function k(a,b,c,d,f,k){d*=3;for(var e=0;e<f;++e){var g=a[b++];c[d++]=g[0];c[d++]=g[1];c[d++]=k?g[2]:0}return d/3}Object.defineProperty(a,"__esModule",{value:!0});a.triangulate=function(a){var b=l(a.rings,a.hasZ),
c=[],e=0,k=0;a=function(a){var d=a.index,g=new Float64Array(b.position.buffer,3*d*b.position.BYTES_PER_ELEMENT,3*a.count);a=a.holeIndices.map(function(a){return a-d});a=new Uint32Array(f(g,a,3));c.push({position:g,faces:a});e+=g.length;k+=a.length};for(var v=0,y=b.polygons;v<y.length;v++)a(y[v]);return d(c,e,k)};a.pathsToTriangulationInfo=l})},"esri/core/libs/earcut/earcut":function(){define([],function(){function c(c,d,e){e=e||2;n=c.length/e+(d?2*d.length:0);t=!1;var x=d&&d.length,g=x?d[0]*e:c.length,
p=a(c,0,g,e,!0),q=[];if(!p)return q;var A,u,v,y;if(x)a:{var D=e,x=[],r,B,G;y=0;for(r=d.length;y<r;y++)B=d[y]*D,G=y<r-1?d[y+1]*D:c.length,B=a(c,B,G,D,!1),B===B.next&&(B.steiner=!0),x.push(h(B));x.sort(l);for(y=0;y<x.length;y++){if(!p){p=null;break a}d=x[y];D=p;if(D=k(d,D))d=C(D,d),f(d,d.next);p=f(p,p.next)}}if(t)return q;if(c.length>80*e){A=v=c[0];u=x=c[1];for(D=e;D<g;D+=e)y=c[D],d=c[D+1],y<A&&(A=y),d<u&&(u=d),y>v&&(v=y),d>x&&(x=d);v=Math.max(v-A,x-u)}b(p,q,e,A,u,v);return q}function a(a,b,c,n,d){var t;
if(d===0<u(a,b,c,n))for(d=b;d<c;d+=n)t=B(d,a[d],a[d+1],t);else for(d=c-n;d>=b;d-=n)t=B(d,a[d],a[d+1],t);t&&q(t,t.next)&&(r(t),t=t.next);return t}function f(a,b){if(!a)return a;b||(b=a);var c,d=0,e=n*n/2;do{c=!1;if(a.steiner||!q(a,a.next)&&0!==g(a.prev,a,a.next))a=a.next;else{r(a);a=b=a.prev;if(a===a.next)return null;c=!0}if(d++>e)return t=!0,null}while(c||a!==b);return b}function b(a,c,n,h,k,A,l){if(a){if(!l&&A){var x=a,u=x;do null===u.z&&(u.z=e(u.x,u.y,h,k,A)),u.prevZ=u.prev,u=u.nextZ=u.next;while(u!==
x);u.prevZ.nextZ=null;u.prevZ=null;var x=u,D,B,F,G,J,E,M=1;do{u=x;F=x=null;for(G=0;u;){G++;B=u;for(D=J=0;D<M&&(J++,B=B.nextZ,B);D++);for(E=M;0<J||0<E&&B;)0===J?(D=B,B=B.nextZ,E--):0!==E&&B?u.z<=B.z?(D=u,u=u.nextZ,J--):(D=B,B=B.nextZ,E--):(D=u,u=u.nextZ,J--),F?F.nextZ=D:x=D,D.prevZ=F,F=D;u=B}F.nextZ=null;M*=2}while(1<G)}for(x=a;a.prev!==a.next;){u=a.prev;B=a.next;if(A)a:{F=a;E=h;var aa=k,N=A;G=F.prev;J=F;M=F.next;if(0<=g(G,J,M))F=!1;else{var Y=G.x>J.x?G.x>M.x?G.x:M.x:J.x>M.x?J.x:M.x,ca=G.y>J.y?G.y>
M.y?G.y:M.y:J.y>M.y?J.y:M.y;D=e(G.x<J.x?G.x<M.x?G.x:M.x:J.x<M.x?J.x:M.x,G.y<J.y?G.y<M.y?G.y:M.y:J.y<M.y?J.y:M.y,E,aa,N);E=e(Y,ca,E,aa,N);for(aa=F.nextZ;aa&&aa.z<=E;){if(aa!==F.prev&&aa!==F.next&&p(G.x,G.y,J.x,J.y,M.x,M.y,aa.x,aa.y)&&0<=g(aa.prev,aa,aa.next)){F=!1;break a}aa=aa.nextZ}for(aa=F.prevZ;aa&&aa.z>=D;){if(aa!==F.prev&&aa!==F.next&&p(G.x,G.y,J.x,J.y,M.x,M.y,aa.x,aa.y)&&0<=g(aa.prev,aa,aa.next)){F=!1;break a}aa=aa.prevZ}F=!0}}else F=d(a);if(F)c.push(u.i/n),c.push(a.i/n),c.push(B.i/n),r(a),
x=a=B.next;else{if(t)break;a=B;if(a===x){if(!l)b(f(a),c,n,h,k,A,1);else if(1===l){l=c;x=n;u=a;do B=u.prev,F=u.next.next,!q(B,F)&&v(B,u,u.next,F)&&y(B,F)&&y(F,B)&&(l.push(B.i/x),l.push(u.i/x),l.push(F.i/x),r(u),r(u.next),u=a=F),u=u.next;while(u!==a);a=u;b(a,c,n,h,k,A,2)}else if(2===l)a:{l=a;do{for(x=l.next.next;x!==l.prev;){if(u=l.i!==x.i){u=l;B=x;F=void 0;if(F=u.next.i!==B.i&&u.prev.i!==B.i){F=void 0;b:{F=u;do{if(F.i!==u.i&&F.next.i!==u.i&&F.i!==B.i&&F.next.i!==B.i&&v(F,F.next,u,B)){F=!0;break b}F=
F.next}while(F!==u);F=!1}F=!F}G=void 0;if(G=F&&y(u,B)&&y(B,u)){F=u;G=!1;J=(u.x+B.x)/2;B=(u.y+B.y)/2;do F.y>B!==F.next.y>B&&J<(F.next.x-F.x)*(B-F.y)/(F.next.y-F.y)+F.x&&(G=!G),F=F.next;while(F!==u)}u=G}if(u){a=C(l,x);l=f(l,l.next);a=f(a,a.next);b(l,c,n,h,k,A);b(a,c,n,h,k,A);break a}x=x.next}l=l.next}while(l!==a)}break}}}}}function d(a){var b=a.prev,c=a.next;if(0<=g(b,a,c))return!1;for(var d=a.next.next,e=0;d!==a.prev;){if(p(b.x,b.y,a.x,a.y,c.x,c.y,d.x,d.y)&&0<=g(d.prev,d,d.next))return!1;d=d.next;
if(e++>n)return t=!0,!1}return!0}function l(a,b){return a.x-b.x}function k(a,b){var c=b,n=a.x,d=a.y,t=-Infinity,e;do{if(!c)return null;if(d<=c.y&&d>=c.next.y){var x=c.x+(d-c.y)*(c.next.x-c.x)/(c.next.y-c.y);if(x<=n&&x>t){t=x;if(x===n){if(d===c.y)return c;if(d===c.next.y)return c.next}e=c.x<c.next.x?c:c.next}}c=c.next}while(c!==b);if(!e)return null;if(n===t)return e.prev;b=e;for(var x=e.x,g=e.y,h=Infinity,f,c=e.next;c!==b;)n>=c.x&&c.x>=x&&p(d<g?n:t,d,x,g,d<g?t:n,d,c.x,c.y)&&(f=Math.abs(d-c.y)/(n-c.x),
(f<h||f===h&&c.x>e.x)&&y(c,a)&&(e=c,h=f)),c=c.next;return e}function e(a,b,c,n,d){a=32767*(a-c)/d;b=32767*(b-n)/d;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;b=(b|b<<8)&16711935;b=(b|b<<4)&252645135;b=(b|b<<2)&858993459;return(a|a<<1)&1431655765|((b|b<<1)&1431655765)<<1}function h(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function p(a,b,c,n,d,t,e,g){return 0<=(d-e)*(b-g)-(a-e)*(t-g)&&0<=(a-e)*(n-g)-(c-e)*(b-g)&&0<=(c-e)*(t-g)-(d-e)*(n-g)}function g(a,b,c){return(b.y-
a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function q(a,b){return a.x===b.x&&a.y===b.y}function v(a,b,c,n){return q(a,b)&&q(c,n)||q(a,n)&&q(c,b)?!0:0<g(a,b,c)!==0<g(a,b,n)&&0<g(c,n,a)!==0<g(c,n,b)}function y(a,b){return 0>g(a.prev,a,a.next)?0<=g(a,b,a.next)&&0<=g(a,a.prev,b):0>g(a,b,a.prev)||0>g(a,a.next,b)}function C(a,b){var c=new A(a.i,a.x,a.y),n=new A(b.i,b.x,b.y),d=a.next,t=b.prev;a.next=b;b.prev=a;c.next=d;d.prev=c;n.next=c;c.prev=n;t.next=n;n.prev=t;return n}function B(a,b,c,n){a=new A(a,b,c);n?(a.next=
n.next,a.prev=n,n.next.prev=a,n.next=a):(a.prev=a,a.next=a);return a}function r(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function A(a,b,c){this.i=a;this.x=b;this.y=c;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=!1}function u(a,b,c,n){for(var d=0,t=c-n;b<c;b+=n)d+=(a[t]-a[b])*(a[b+1]+a[t+1]),t=b;return d}var n,t;c.deviation=function(a,b,c,n){var d=b&&b.length,t=Math.abs(u(a,0,d?b[0]*c:a.length,c));if(d)for(var d=
0,e=b.length;d<e;d++)t-=Math.abs(u(a,b[d]*c,d<e-1?b[d+1]*c:a.length,c));for(d=b=0;d<n.length;d+=3){var e=n[d]*c,g=n[d+1]*c,x=n[d+2]*c;b+=Math.abs((a[e]-a[x])*(a[g+1]-a[e+1])-(a[e]-a[g])*(a[x+1]-a[e+1]))}return 0===t&&0===b?0:Math.abs((b-t)/t)};c.flatten=function(a){for(var b=a[0][0].length,c={vertices:[],holes:[],dimensions:b},n=0,d=0;d<a.length;d++){for(var t=0;t<a[d].length;t++)for(var e=0;e<b;e++)c.vertices.push(a[d][t][e]);0<d&&(n+=a[d-1].length,c.holes.push(n))}return c};return c})},"esri/geometry/support/coordsUtils":function(){define(["require",
"exports"],function(c,a){function f(a,b){var c=b[0]-a[0],d=b[1]-a[1];return 2<a.length&&2<b.length?(a=a[2]-b[2],Math.sqrt(c*c+d*d+a*a)):Math.sqrt(c*c+d*d)}function b(a,b,c){var d=a[0]+c*(b[0]-a[0]),h=a[1]+c*(b[1]-a[1]);return 2<a.length&&2<b.length?[d,h,a[2]+c*(b[2]-a[2])]:[d,h]}Object.defineProperty(a,"__esModule",{value:!0});a.geometryToCoordinates=function(a){if(!a)return null;if(Array.isArray(a))return a;var b=a.hasZ,c=a.hasM;if("point"===a.type)return c&&b?[a.x,a.y,a.z,a.m]:b?[a.x,a.y,a.z]:c?
[a.x,a.y,a.m]:[a.x,a.y];if("polygon"===a.type)return a.rings.slice(0);if("polyline"===a.type)return a.paths.slice(0);if("multipoint"===a.type)return a.points.slice(0);if("extent"===a.type){a=a.clone().normalize();if(!a)return null;var d=!1,h=!1;a.forEach(function(a){a.hasZ&&(d=!0);a.hasM&&(h=!0)});return a.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(d&&a.hasZ)for(var c=.5*(a.zmax-a.zmin),e=0;e<b.length;e++)b[e].push(c);if(h&&a.hasM)for(a=
.5*(a.mmax-a.mmin),e=0;e<b.length;e++)b[e].push(a);return b})}return null};a.getLength=f;a.getMidpoint=function(a,c){return b(a,c,.5)};a.getPathLength=function(a){for(var b=a.length,c=0,d=0;d<b-1;++d)c+=f(a[d],a[d+1]);return c};a.getPointOnPath=function(a,c){if(0>=c)return a[0];for(var d=a.length,e=0,h=0;h<d-1;++h){var p=f(a[h],a[h+1]);if(c-e<p)return b(a[h],a[h+1],(c-e)/p);e+=p}return a[d-1]};a.isClockwise=function(a,b,c){for(var d=a.length,h=0,f=0,g=0,k=0;k<d;k++){var l=a[k],y=a[(k+1)%d],C=2,h=
h+(l[0]*y[1]-y[0]*l[1]);2<l.length&&2<y.length&&c&&(f+=l[0]*y[2]-y[0]*l[2],C=3);l.length>C&&y.length>C&&b&&(g+=l[0]*y[C]-y[0]*l[C])}return 0>=h&&0>=f&&0>=g}})},"esri/geometry/support/meshUtils/centerAt":function(){define("require exports ../../../core/Logger ./projection ../../../views/3d/lib/gl-matrix ../../../views/3d/support/projectionUtils".split(" "),function(c,a,f,b,d,l){Object.defineProperty(a,"__esModule",{value:!0});var k=f.getLogger("esri.geometry.support.meshUtils.centerAt");a.centerAt=
function(a,c,f){if(a.vertexAttributes&&a.vertexAttributes.position){var q=a.spatialReference,v=f&&f.origin||a.extent.center;if(q.isWGS84||q.isWebMercator&&(!f||!1!==f.geographic)){f=a.spatialReference;var q=h,y=e;if(l.pointToVector(c,y,l.SphericalECEFSpatialReference)){l.pointToVector(v,q,l.SphericalECEFSpatialReference)||l.pointToVector(a.extent.center,q,l.SphericalECEFSpatialReference);v=a.vertexAttributes.position;c=a.vertexAttributes.normal;var A=new Float64Array(v.length),u=new Float32Array(c?
c.length:0);b.projectToECEF(v,f,A);c&&b.projectNormalToECEF(c,v,A,f,u);l.computeLinearTransformation(l.SphericalECEFSpatialReference,q,p,l.SphericalECEFSpatialReference);l.computeLinearTransformation(l.SphericalECEFSpatialReference,y,g,l.SphericalECEFSpatialReference);d.mat4d.inverse(p);d.mat4d.multiply(g,p,g);b.transformBufferInPlace(A,g);d.mat4d.inverse(g);d.mat4d.transpose(g);c&&b.transformBufferInPlace(u,g,!0);b.projectFromECEF(A,v,f);c&&b.projectNormalFromECEF(u,v,A,f,c);a.clearCache()}else k.error("Failed to project centerAt location (wkid:"+
c.spatialReference.wkid+") to ECEF")}else if(f=h,q=e,l.pointToVector(c,q,a.spatialReference)){l.pointToVector(v,f,a.spatialReference)||(c=a.extent.center,f[0]=c.x,f[1]=c.y,f[2]=c.z,k.error("Failed to project specified origin (wkid:"+v.spatialReference.wkid+") to mesh spatial reference (wkid:"+a.spatialReference.wkid+"). Using mesh extent.center instead"));if(v=a.vertexAttributes.position)for(c=0;c<v.length;c+=3)for(y=0;3>y;y++)v[c+y]+=q[y]-f[y];a.clearCache()}else k.error("Failed to project centerAt location (wkid:"+
c.spatialReference.wkid+") to mesh spatial reference (wkid:"+a.spatialReference.wkid+")")}};var e=d.vec3d.create(),h=d.vec3d.create(),p=d.mat4d.create(),g=d.mat4d.create()})},"esri/geometry/support/meshUtils/projection":function(){define(["require","exports","../../../core/Logger","../../../views/3d/lib/gl-matrix","../../../views/3d/support/projectionUtils"],function(c,a,f,b,d){function l(a,c,f,k,l,r){if(c){l=l.isWGS84;for(var q=0;q<c.length;q+=3){for(var u=0;3>u;u++)e[u]=k[q+u],h[u]=c[q+u];d.computeLinearTransformation(d.SphericalECEFSpatialReference,
e,p,d.SphericalECEFSpatialReference);b.mat4d.toMat3(p,g);l?b.mat3d.multiplyVec3(g,h):(u=d.webMercator.y2lat(f[q+1]),u=Math.cos(u),0===a&&(u=1/u),g[0]*=u,g[1]*=u,g[2]*=u,g[3]*=u,g[4]*=u,g[5]*=u,1===a&&b.mat3d.transpose(g),b.mat3d.multiplyVec3(g,h),b.vec3d.normalize(h));for(u=0;3>u;u++)r[q+u]=h[u]}return r}}Object.defineProperty(a,"__esModule",{value:!0});var k=f.getLogger("esri.geometry.support.meshUtils.normalProjection");a.projectNormalToECEF=function(a,b,c,d,e){return d.isWebMercator||d.isWGS84?
l(0,a,b,c,d,e):(k.error("Cannot convert PCS spatial reference buffer to ECEF"),e)};a.projectNormalFromECEF=function(a,b,c,d,e){return d.isWebMercator||d.isWGS84?l(1,a,b,c,d,e):(k.error("Cannot convert to PCS spatial reference buffer from ECEF"),e)};a.projectToECEF=function(a,b,c){d.bufferToBuffer(a,b,0,c,d.SphericalECEFSpatialReference,0,a.length/3);return c};a.projectFromECEF=function(a,b,c){d.bufferToBuffer(a,d.SphericalECEFSpatialReference,0,b,c,0,a.length/3);return b};a.transformBufferInPlace=
function(a,c,d){void 0===d&&(d=!1);if(a)for(var g=0;g<a.length;g+=3){for(var h=0;3>h;h++)e[h]=a[g+h];b.mat4d.multiplyVec3(c,e);d&&b.vec3d.normalize(e);for(h=0;3>h;h++)a[g+h]=e[h]}};var e=b.vec3d.create(),h=b.vec3d.create(),p=b.mat4d.create(),g=b.mat3d.create()})},"esri/views/3d/lib/gl-matrix":function(){define([],function(){var c={};(function(a,c){c(a,!0);c(a,!1)})(c,function(a,c){var b={};(function(){if("undefined"!=typeof Float32Array){var a=new Float32Array(1),c=new Int32Array(a.buffer);b.invsqrt=
function(b){a[0]=b;c[0]=1597463007-(c[0]>>1);var n=a[0];return n*(1.5-.5*b*n*n)}}else b.invsqrt=function(a){return 1/Math.sqrt(a)}})();var d=Array;"undefined"!=typeof Float32Array&&(d=c?Float32Array:Array);var f={create:function(a){var b=new d(3);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0;return b},createFrom:function(a,b,c){var n=new d(3);n[0]=a;n[1]=b;n[2]=c;return n},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},set3:function(a,b,c,d){d[0]=a;d[1]=b;d[2]=c;return d},equal:function(a,
b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&1E-6>Math.abs(a[2]-b[2])},max:function(a,b,c){c[0]=Math.max(a[0],b[0]);c[1]=Math.max(a[1],b[1]);c[2]=Math.max(a[2],b[2]);return c},min:function(a,b,c){c[0]=Math.min(a[0],b[0]);c[1]=Math.min(a[1],b[1]);c[2]=Math.min(a[2],b[2]);return c},add:function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];return c},subtract:function(a,b,c){if(!c||a===c)return a[0]-=b[0],a[1]-=b[1],
a[2]-=b[2],a;c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];return c},multiply:function(a,b,c){if(!c||a===c)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=a[2]*b[2];return c},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b},scale:function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;return c},normalize:function(a,b){b||(b=a);var c=a[0],n=a[1];a=a[2];var d=Math.sqrt(c*c+n*n+a*a);if(!d)return b[0]=0,b[1]=
0,b[2]=0,b;if(1===d)return b[0]=c,b[1]=n,b[2]=a,b;d=1/d;b[0]=c*d;b[1]=n*d;b[2]=a*d;return b},cross:function(a,b,c){c||(c=a);var n=a[0],d=a[1];a=a[2];var t=b[0],e=b[1];b=b[2];c[0]=d*b-a*e;c[1]=a*t-n*b;c[2]=n*e-d*t;return c},length:function(a){var b=a[0],c=a[1];a=a[2];return Math.sqrt(b*b+c*c+a*a)},length2:function(a){var b=a[0],c=a[1];a=a[2];return b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var n=a[0]-b[0],d=a[1]-b[1];a=a[2]-b[2];b=Math.sqrt(n*
n+d*d+a*a);if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/b;c[0]=n*b;c[1]=d*b;c[2]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);return d},dist:function(a,b){var c=b[0]-a[0],n=b[1]-a[1];a=b[2]-a[2];return Math.sqrt(c*c+n*n+a*a)},dist2:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];a=b[2]-a[2];return c*c+d*d+a*a}},k=null,e=new d(4);f.unproject=function(a,b,c,d,g){g||(g=a);k||(k=B.create());var n=k;e[0]=2*(a[0]-d[0])/d[2]-1;e[1]=2*(a[1]-d[1])/
d[3]-1;e[2]=2*a[2]-1;e[3]=1;B.multiply(c,b,n);if(!B.inverse(n))return null;B.multiplyVec4(n,e);if(0===e[3])return null;g[0]=e[0]/e[3];g[1]=e[1]/e[3];g[2]=e[2]/e[3];return g};var h=f.createFrom(1,0,0),p=f.createFrom(0,1,0),g=f.createFrom(0,0,1),q=f.create();f.rotationTo=function(a,b,c){c||(c=r.create());var d=f.dot(a,b);if(1<=d)r.set(A,c);else if(-.999999>d)f.cross(h,a,q),1E-6>f.length(q)&&f.cross(p,a,q),1E-6>f.length(q)&&f.cross(g,a,q),f.normalize(q),r.fromAngleAxis(Math.PI,q,c);else{var d=Math.sqrt(2*
(1+d)),n=1/d;f.cross(a,b,q);c[0]=q[0]*n;c[1]=q[1]*n;c[2]=q[2]*n;c[3]=.5*d;r.normalize(c)}1<c[3]?c[3]=1:-1>c[3]&&(c[3]=-1);return c};var v=f.create(),y=f.create();f.project=function(a,b,c,d){d||(d=a);f.direction(b,c,v);f.subtract(a,b,y);a=f.dot(v,y);f.scale(v,a,d);f.add(d,b,d)};f.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var C={create:function(a){var b=new d(9);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=
b[6]=b[7]=b[8]=0;return b},createFrom:function(a,b,c,e,g,h,f,p,k){var n=new d(9);n[0]=a;n[1]=b;n[2]=c;n[3]=e;n[4]=g;n[5]=h;n[6]=f;n[7]=p;n[8]=k;return n},add:function(a,b,c){c||(c=a);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];c[4]=a[4]+b[4];c[5]=a[5]+b[5];c[6]=a[6]+b[6];c[7]=a[7]+b[7];c[8]=a[8]+b[8];return c},subtract:function(a,b,c){c||(c=a);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];c[4]=a[4]-b[4];c[5]=a[5]-b[5];c[6]=a[6]-b[6];c[7]=a[7]-b[7];c[8]=a[8]-b[8];return c},
determinant:function(a){var b=a[3],c=a[4],d=a[5],n=a[6],e=a[7],g=a[8];return a[0]*(g*c-d*e)+a[1]*(-g*b+d*n)+a[2]*(e*b-c*n)},inverse:function(a,b){var c=a[0],d=a[1],n=a[2],e=a[3],t=a[4],g=a[5],h=a[6],f=a[7];a=a[8];var p=a*t-g*f,k=-a*e+g*h,q=f*e-t*h,A=c*p+d*k+n*q;if(!A)return null;A=1/A;b||(b=C.create());b[0]=p*A;b[1]=(-a*d+n*f)*A;b[2]=(g*d-n*t)*A;b[3]=k*A;b[4]=(a*c-n*h)*A;b[5]=(-g*c+n*e)*A;b[6]=q*A;b[7]=(-f*c+d*h)*A;b[8]=(t*c-d*e)*A;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],n=a[1],e=a[2],
t=a[3],g=a[4],h=a[5],f=a[6],x=a[7];a=a[8];var p=b[0],k=b[1],q=b[2],A=b[3],l=b[4],u=b[5],v=b[6],y=b[7];b=b[8];c[0]=p*d+k*t+q*f;c[1]=p*n+k*g+q*x;c[2]=p*e+k*h+q*a;c[3]=A*d+l*t+u*f;c[4]=A*n+l*g+u*x;c[5]=A*e+l*h+u*a;c[6]=v*d+y*t+b*f;c[7]=v*n+y*g+b*x;c[8]=v*e+y*h+b*a;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[3]+a[6];c[1]=d*a[1]+b*a[4]+a[7];return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],n=b[1];b=b[2];c[0]=d*a[0]+n*a[3]+b*a[6];c[1]=d*a[1]+n*a[4]+b*a[7];
c[2]=d*a[2]+n*a[5]+b*a[8];return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&1E-6>Math.abs(a[2]-b[2])&&1E-6>Math.abs(a[3]-b[3])&&1E-6>Math.abs(a[4]-b[4])&&1E-6>Math.abs(a[5]-b[5])&&1E-6>Math.abs(a[6]-b[6])&&1E-6>Math.abs(a[7]-b[7])&&1E-6>Math.abs(a[8]-b[8])},identity:function(a){a||(a=C.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=
0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],d=a[5];a[1]=a[3];a[2]=a[6];a[3]=b;a[5]=a[7];a[6]=c;a[7]=d;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b},toMat4:function(a,b){b||(b=B.create());b[15]=1;b[14]=0;b[13]=0;b[12]=0;b[11]=0;b[10]=a[8];b[9]=a[7];b[8]=a[6];b[7]=0;b[6]=a[5];b[5]=a[4];b[4]=a[3];b[3]=0;b[2]=a[2];b[1]=a[1];b[0]=a[0];return b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+
", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},B={create:function(a){var b=new d(16);4===arguments.length?(b[0]=arguments[0],b[1]=arguments[1],b[2]=arguments[2],b[3]=arguments[3],b[4]=arguments[4],b[5]=arguments[5],b[6]=arguments[6],b[7]=arguments[7],b[8]=arguments[8],b[9]=arguments[9],b[10]=arguments[10],b[11]=arguments[11],b[12]=arguments[12],b[13]=arguments[13],b[14]=arguments[14],b[15]=arguments[15]):a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],
b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b},createFrom:function(a,b,c,e,g,h,f,p,k,q,A,l,u,v,y,r){var n=new d(16);n[0]=a;n[1]=b;n[2]=c;n[3]=e;n[4]=g;n[5]=h;n[6]=f;n[7]=p;n[8]=k;n[9]=q;n[10]=A;n[11]=l;n[12]=u;n[13]=v;n[14]=y;n[15]=r;return n},createFromMatrixRowMajor:function(a){var b=new d(16);b[0]=a[0];b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=
a[13];b[11]=a[14];b[15]=a[15];return b},createFromMatrix:function(a){var b=new d(16);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},setRowMajor:function(a,b){b[0]=a[0];
b[4]=a[1];b[8]=a[2];b[12]=a[3];b[1]=a[4];b[5]=a[5];b[9]=a[6];b[13]=a[7];b[2]=a[8];b[6]=a[9];b[10]=a[10];b[14]=a[11];b[3]=a[12];b[7]=a[13];b[11]=a[14];b[15]=a[15];return b},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&1E-6>Math.abs(a[2]-b[2])&&1E-6>Math.abs(a[3]-b[3])&&1E-6>Math.abs(a[4]-b[4])&&1E-6>Math.abs(a[5]-b[5])&&1E-6>Math.abs(a[6]-b[6])&&1E-6>Math.abs(a[7]-b[7])&&1E-6>Math.abs(a[8]-b[8])&&1E-6>Math.abs(a[9]-b[9])&&1E-6>Math.abs(a[10]-b[10])&&1E-6>Math.abs(a[11]-
b[11])&&1E-6>Math.abs(a[12]-b[12])&&1E-6>Math.abs(a[13]-b[13])&&1E-6>Math.abs(a[14]-b[14])&&1E-6>Math.abs(a[15]-b[15])},identity:function(a){a||(a=B.create());a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(!b||a===b){b=a[1];var c=a[2],d=a[3],n=a[6],e=a[7],g=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=b;a[6]=a[9];a[7]=a[13];a[8]=c;a[9]=n;a[11]=a[14];a[12]=d;a[13]=e;a[14]=g;return a}b[0]=a[0];b[1]=
a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b},determinant:function(a){var b=a[0],c=a[1],d=a[2],n=a[3],e=a[4],g=a[5],h=a[6],f=a[7],p=a[8],k=a[9],q=a[10],A=a[11],l=a[12],u=a[13],v=a[14];a=a[15];return l*k*h*n-p*u*h*n-l*g*q*n+e*u*q*n+p*g*v*n-e*k*v*n-l*k*d*f+p*u*d*f+l*c*q*f-b*u*q*f-p*c*v*f+b*k*v*f+l*g*d*A-e*u*d*A-l*c*h*A+b*u*h*A+e*c*v*A-b*g*v*A-p*g*d*a+e*k*d*a+p*c*h*a-b*k*h*a-e*c*q*
a+b*g*q*a},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],n=a[2],e=a[3],g=a[4],t=a[5],h=a[6],f=a[7],p=a[8],k=a[9],q=a[10],A=a[11],l=a[12],u=a[13],v=a[14];a=a[15];var y=c*t-d*g,r=c*h-n*g,B=c*f-e*g,C=d*h-n*t,ca=d*f-e*t,fa=n*f-e*h,ba=p*u-k*l,ea=p*v-q*l,oa=p*a-A*l,ra=k*v-q*u,sa=k*a-A*u,Ea=q*a-A*v,na=y*Ea-r*sa+B*ra+C*oa-ca*ea+fa*ba;if(!na)return null;na=1/na;b[0]=(t*Ea-h*sa+f*ra)*na;b[1]=(-d*Ea+n*sa-e*ra)*na;b[2]=(u*fa-v*ca+a*C)*na;b[3]=(-k*fa+q*ca-A*C)*na;b[4]=(-g*Ea+h*oa-f*ea)*na;b[5]=(c*Ea-n*oa+e*
ea)*na;b[6]=(-l*fa+v*B-a*r)*na;b[7]=(p*fa-q*B+A*r)*na;b[8]=(g*sa-t*oa+f*ba)*na;b[9]=(-c*sa+d*oa-e*ba)*na;b[10]=(l*ca-u*B+a*y)*na;b[11]=(-p*ca+k*B-A*y)*na;b[12]=(-g*ra+t*ea-h*ba)*na;b[13]=(c*ra-d*ea+n*ba)*na;b[14]=(-l*C+u*r-v*y)*na;b[15]=(p*C-k*r+q*y)*na;return b},toRotationMat:function(a,b){b||(b=B.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},toMat3:function(a,b){b||(b=
C.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b},toInverseMat3:function(a,b){var c=a[0],d=a[1],n=a[2],e=a[4],g=a[5],h=a[6],f=a[8],t=a[9];a=a[10];var p=a*g-h*t,k=-a*e+h*f,q=t*e-g*f,A=c*p+d*k+n*q;if(!A)return null;A=1/A;b||(b=C.create());b[0]=p*A;b[1]=(-a*d+n*t)*A;b[2]=(h*d-n*g)*A;b[3]=k*A;b[4]=(a*c-n*f)*A;b[5]=(-h*c+n*e)*A;b[6]=q*A;b[7]=(-t*c+d*f)*A;b[8]=(g*c-d*e)*A;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],n=a[1],e=a[2],
g=a[3],h=a[4],f=a[5],t=a[6],p=a[7],k=a[8],x=a[9],q=a[10],A=a[11],l=a[12],u=a[13],v=a[14];a=a[15];var y=b[0],r=b[1],B=b[2],C=b[3];c[0]=y*d+r*h+B*k+C*l;c[1]=y*n+r*f+B*x+C*u;c[2]=y*e+r*t+B*q+C*v;c[3]=y*g+r*p+B*A+C*a;y=b[4];r=b[5];B=b[6];C=b[7];c[4]=y*d+r*h+B*k+C*l;c[5]=y*n+r*f+B*x+C*u;c[6]=y*e+r*t+B*q+C*v;c[7]=y*g+r*p+B*A+C*a;y=b[8];r=b[9];B=b[10];C=b[11];c[8]=y*d+r*h+B*k+C*l;c[9]=y*n+r*f+B*x+C*u;c[10]=y*e+r*t+B*q+C*v;c[11]=y*g+r*p+B*A+C*a;y=b[12];r=b[13];B=b[14];C=b[15];c[12]=y*d+r*h+B*k+C*l;c[13]=
y*n+r*f+B*x+C*u;c[14]=y*e+r*t+B*q+C*v;c[15]=y*g+r*p+B*A+C*a;return c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],n=b[1];b=b[2];c[0]=a[0]*d+a[4]*n+a[8]*b+a[12];c[1]=a[1]*d+a[5]*n+a[9]*b+a[13];c[2]=a[2]*d+a[6]*n+a[10]*b+a[14];return c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],n=b[1],e=b[2];b=b[3];c[0]=a[0]*d+a[4]*n+a[8]*e+a[12]*b;c[1]=a[1]*d+a[5]*n+a[9]*e+a[13]*b;c[2]=a[2]*d+a[6]*n+a[10]*e+a[14]*b;c[3]=a[3]*d+a[7]*n+a[11]*e+a[15]*b;return c},translate:function(a,b,c){var d=b[0],n=b[1];
b=b[2];var e,g,h,f,t,p,k,x,q,A,l,u;if(!c||a===c)return a[12]=a[0]*d+a[4]*n+a[8]*b+a[12],a[13]=a[1]*d+a[5]*n+a[9]*b+a[13],a[14]=a[2]*d+a[6]*n+a[10]*b+a[14],a[15]=a[3]*d+a[7]*n+a[11]*b+a[15],a;e=a[0];g=a[1];h=a[2];f=a[3];t=a[4];p=a[5];k=a[6];x=a[7];q=a[8];A=a[9];l=a[10];u=a[11];c[0]=e;c[1]=g;c[2]=h;c[3]=f;c[4]=t;c[5]=p;c[6]=k;c[7]=x;c[8]=q;c[9]=A;c[10]=l;c[11]=u;c[12]=e*d+t*n+q*b+a[12];c[13]=g*d+p*n+A*b+a[13];c[14]=h*d+k*n+l*b+a[14];c[15]=f*d+x*n+u*b+a[15];return c},scale:function(a,b,c){var d=b[0],
n=b[1];b=b[2];if(!c||a===c)return a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=n,a[5]*=n,a[6]*=n,a[7]*=n,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;c[0]=a[0]*d;c[1]=a[1]*d;c[2]=a[2]*d;c[3]=a[3]*d;c[4]=a[4]*n;c[5]=a[5]*n;c[6]=a[6]*n;c[7]=a[7]*n;c[8]=a[8]*b;c[9]=a[9]*b;c[10]=a[10]*b;c[11]=a[11]*b;c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},maxScale:function(a){return Math.max(Math.max(Math.sqrt(a[0]*a[0]+a[4]*a[4]+a[8]*a[8]),Math.sqrt(a[1]*a[1]+a[5]*a[5]+a[9]*a[9])),Math.sqrt(a[2]*a[2]+a[6]*a[6]+a[10]*
a[10]))},rotate:function(a,b,c,d){var n=c[0],e=c[1];c=c[2];var g=Math.sqrt(n*n+e*e+c*c),h,f,t,p,k,x,q,A,l,u,y,v,r,D,B,C,ba,ea,oa,ra;if(!g)return null;1!==g&&(g=1/g,n*=g,e*=g,c*=g);h=Math.sin(b);f=Math.cos(b);t=1-f;b=a[0];g=a[1];p=a[2];k=a[3];x=a[4];q=a[5];A=a[6];l=a[7];u=a[8];y=a[9];v=a[10];r=a[11];D=n*n*t+f;B=e*n*t+c*h;C=c*n*t-e*h;ba=n*e*t-c*h;ea=e*e*t+f;oa=c*e*t+n*h;ra=n*c*t+e*h;n=e*c*t-n*h;e=c*c*t+f;d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=b*D+x*B+u*C;d[1]=g*D+q*B+y*
C;d[2]=p*D+A*B+v*C;d[3]=k*D+l*B+r*C;d[4]=b*ba+x*ea+u*oa;d[5]=g*ba+q*ea+y*oa;d[6]=p*ba+A*ea+v*oa;d[7]=k*ba+l*ea+r*oa;d[8]=b*ra+x*n+u*e;d[9]=g*ra+q*n+y*e;d[10]=p*ra+A*n+v*e;d[11]=k*ra+l*n+r*e;return d},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var n=a[4],e=a[5],g=a[6],h=a[7],f=a[8],t=a[9],p=a[10],k=a[11];c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[4]=n*b+f*d;c[5]=e*b+t*d;c[6]=g*b+p*d;c[7]=h*b+k*d;c[8]=n*-d+f*b;c[9]=e*-d+t*b;
c[10]=g*-d+p*b;c[11]=h*-d+k*b;return c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var n=a[0],e=a[1],g=a[2],h=a[3],f=a[8],p=a[9],t=a[10],k=a[11];c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=n*b+f*-d;c[1]=e*b+p*-d;c[2]=g*b+t*-d;c[3]=h*b+k*-d;c[8]=n*d+f*b;c[9]=e*d+p*b;c[10]=g*d+t*b;c[11]=h*d+k*b;return c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],n=a[1],g=a[2],h=a[3],f=a[4],p=a[5],t=a[6],k=a[7];c?a!==
c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=e*b+f*d;c[1]=n*b+p*d;c[2]=g*b+t*d;c[3]=h*b+k*d;c[4]=e*-d+f*b;c[5]=n*-d+p*b;c[6]=g*-d+t*b;c[7]=h*-d+k*b;return c},frustum:function(a,b,c,d,e,g,h){h||(h=B.create());var n=b-a,f=d-c,p=g-e;h[0]=2*e/n;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2*e/f;h[6]=0;h[7]=0;h[8]=(b+a)/n;h[9]=(d+c)/f;h[10]=-(g+e)/p;h[11]=-1;h[12]=0;h[13]=0;h[14]=-(g*e*2)/p;h[15]=0;return h},perspective:function(a,b,c,d,e){a=c*Math.tan(a*
Math.PI/360);b*=a;return B.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,g,h){h||(h=B.create());var n=b-a,f=d-c,p=g-e;h[0]=2/n;h[1]=0;h[2]=0;h[3]=0;h[4]=0;h[5]=2/f;h[6]=0;h[7]=0;h[8]=0;h[9]=0;h[10]=-2/p;h[11]=0;h[12]=-(a+b)/n;h[13]=-(d+c)/f;h[14]=-(g+e)/p;h[15]=1;return h},lookAt:function(a,b,c,d){d||(d=B.create());var e,n,g,h,f,p,k,t,q=a[0],A=a[1];a=a[2];g=c[0];h=c[1];n=c[2];k=b[0];c=b[1];e=b[2];if(q===k&&A===c&&a===e)return B.identity(d);b=q-k;c=A-c;k=a-e;t=1/Math.sqrt(b*b+c*c+k*k);b*=t;c*=
t;k*=t;e=h*k-n*c;n=n*b-g*k;g=g*c-h*b;(t=Math.sqrt(e*e+n*n+g*g))?(t=1/t,e*=t,n*=t,g*=t):g=n=e=0;h=c*g-k*n;f=k*e-b*g;p=b*n-c*e;(t=Math.sqrt(h*h+f*f+p*p))?(t=1/t,h*=t,f*=t,p*=t):p=f=h=0;d[0]=e;d[1]=h;d[2]=b;d[3]=0;d[4]=n;d[5]=f;d[6]=c;d[7]=0;d[8]=g;d[9]=p;d[10]=k;d[11]=0;d[12]=-(e*q+n*A+g*a);d[13]=-(h*q+f*A+p*a);d[14]=-(b*q+c*A+k*a);d[15]=1;return d},fromRotationTranslation:function(a,b,c){c||(c=B.create());var d=a[0],e=a[1],n=a[2],g=a[3],h=d+d,f=e+e,p=n+n;a=d*h;var k=d*f,d=d*p,t=e*f,e=e*p,n=n*p,h=g*
h,f=g*f,g=g*p;c[0]=1-(t+n);c[1]=k+g;c[2]=d-f;c[3]=0;c[4]=k-g;c[5]=1-(a+n);c[6]=e+h;c[7]=0;c[8]=d+f;c[9]=e-h;c[10]=1-(a+t);c[11]=0;c[12]=b[0];c[13]=b[1];c[14]=b[2];c[15]=1;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},r={create:function(a){var b=new d(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,
b,c,e){var n=new d(4);n[0]=a;n[1]=b;n[2]=c;n[3]=e;return n},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&1E-6>Math.abs(a[2]-b[2])&&1E-6>Math.abs(a[3]-b[3])},identity:function(a){a||(a=r.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},A=r.identity();r.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];if(!b||a===b)return a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a;b[0]=c;b[1]=d;b[2]=e;b[3]=-Math.sqrt(Math.abs(1-
c*c-d*d-e*e));return b};r.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};r.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],n=a[3],c=(c=c*c+d*d+e*e+n*n)?1/c:0;if(!b||a===b)return a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a;b[0]=-a[0]*c;b[1]=-a[1]*c;b[2]=-a[2]*c;b[3]=a[3]*c;return b};r.conjugate=function(a,b){if(!b||a===b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};r.length=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*
d+a*a)};r.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2];a=a[3];var n=Math.sqrt(c*c+d*d+e*e+a*a);if(0===n)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;n=1/n;b[0]=c*n;b[1]=d*n;b[2]=e*n;b[3]=a*n;return b};r.add=function(a,b,c){if(!c||a===c)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a;c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c};r.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],n=a[2];a=a[3];var g=b[0],h=b[1],f=b[2];b=b[3];c[0]=d*b+a*g+e*f-n*h;c[1]=e*b+a*h+n*g-
d*f;c[2]=n*b+a*f+d*h-e*g;c[3]=a*b-d*g-e*h-n*f;return c};r.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],g=b[2];b=a[0];var n=a[1],h=a[2];a=a[3];var f=a*d+n*g-h*e,p=a*e+h*d-b*g,k=a*g+b*e-n*d,d=-b*d-n*e-h*g;c[0]=f*a+d*-b+p*-h-k*-n;c[1]=p*a+d*-n+k*-b-f*-h;c[2]=k*a+d*-h+f*-n-p*-b;return c};r.scale=function(a,b,c){if(!c||a===c)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c};r.toMat3=function(a,b){b||(b=C.create());var c=a[0],d=a[1],e=a[2],g=a[3],
n=c+c,h=d+d,f=e+e;a=c*n;var p=c*h,c=c*f,k=d*h,d=d*f,e=e*f,n=g*n,h=g*h,g=g*f;b[0]=1-(k+e);b[1]=p+g;b[2]=c-h;b[3]=p-g;b[4]=1-(a+e);b[5]=d+n;b[6]=c+h;b[7]=d-n;b[8]=1-(a+k);return b};r.toMat4=function(a,b){b||(b=B.create());var c=a[0],d=a[1],e=a[2],g=a[3],n=c+c,h=d+d,f=e+e;a=c*n;var p=c*h,c=c*f,k=d*h,d=d*f,e=e*f,n=g*n,h=g*h,g=g*f;b[0]=1-(k+e);b[1]=p+g;b[2]=c-h;b[3]=0;b[4]=p-g;b[5]=1-(a+e);b[6]=d+n;b[7]=0;b[8]=c+h;b[9]=d-n;b[10]=1-(a+k);b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};r.slerp=function(a,
b,c,d){d||(d=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3],g,n;if(1<=Math.abs(e))return d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d;g=Math.acos(e);n=Math.sqrt(1-e*e);if(.001>Math.abs(n))return d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d;e=Math.sin((1-c)*g)/n;c=Math.sin(c*g)/n;d[0]=a[0]*e+b[0]*c;d[1]=a[1]*e+b[1]*c;d[2]=a[2]*e+b[2]*c;d[3]=a[3]*e+b[3]*c;return d};r.fromRotationMatrix=function(a,b){b||(b=r.create());var c=a[0]+a[4]+a[8],d;if(0<c)d=Math.sqrt(c+
1),b[3]=.5*d,d=.5/d,b[0]=(a[7]-a[5])*d,b[1]=(a[2]-a[6])*d,b[2]=(a[3]-a[1])*d;else{d=r.fromRotationMatrix.s_iNext=r.fromRotationMatrix.s_iNext||[1,2,0];c=0;a[4]>a[0]&&(c=1);a[8]>a[3*c+c]&&(c=2);var e=d[c],g=d[e];d=Math.sqrt(a[3*c+c]-a[3*e+e]-a[3*g+g]+1);b[c]=.5*d;d=.5/d;b[3]=(a[3*g+e]-a[3*e+g])*d;b[e]=(a[3*e+c]+a[3*c+e])*d;b[g]=(a[3*g+c]+a[3*c+g])*d}return b};C.toQuat4=r.fromRotationMatrix;(function(){var a=C.create();r.fromAxes=function(b,c,d,e){a[0]=c[0];a[3]=c[1];a[6]=c[2];a[1]=d[0];a[4]=d[1];a[7]=
d[2];a[2]=b[0];a[5]=b[1];a[8]=b[2];return r.fromRotationMatrix(a,e)}})();r.identity=function(a){a||(a=r.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};r.fromAngleAxis=function(a,b,c){c||(c=r.create());a*=.5;var d=Math.sin(a);c[3]=Math.cos(a);c[0]=d*b[0];c[1]=d*b[1];c[2]=d*b[2];return c};r.toAngleAxis=function(a,c){c||(c=a);var d=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];0<d?(c[3]=2*Math.acos(a[3]),d=b.invsqrt(d),c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d):(c[3]=0,c[0]=1,c[1]=0,c[2]=0);return c};r.str=function(a){return"["+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var u={create:function(a){var b=new d(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0;return b},createFrom:function(a,b,c,e){var g=new d(4);g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&1E-6>Math.abs(a[2]-b[2])&&1E-6>Math.abs(a[3]-b[3])},identity:function(a){a||(a=u.create());a[0]=1;a[1]=0;a[2]=
0;a[3]=1;return a},transpose:function(a,b){if(!b||a===b)return b=a[1],a[1]=a[2],a[2]=b,a;b[0]=a[0];b[1]=a[2];b[2]=a[1];b[3]=a[3];return b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2];a=a[3];var g=c*a-e*d;if(!g)return null;g=1/g;b[0]=a*g;b[1]=-d*g;b[2]=-e*g;b[3]=c*g;return b},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];c[0]=d*b[0]+e*b[2];c[1]=d*b[1]+e*b[3];c[2]=g*b[0]+a*b[2];c[3]=g*b[1]+a*b[3];return c},rotate:function(a,
b,c){c||(c=a);var d=a[0],e=a[1],g=a[2];a=a[3];var h=Math.sin(b);b=Math.cos(b);c[0]=d*b+e*h;c[1]=d*-h+e*b;c[2]=g*b+a*h;c[3]=g*-h+a*b;return c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];b=b[1];c[0]=d*a[0]+b*a[1];c[1]=d*a[2]+b*a[3];return c},scale:function(a,b,c){c||(c=a);var d=a[1],e=a[2],g=a[3],h=b[0];b=b[1];c[0]=a[0]*h;c[1]=d*b;c[2]=e*h;c[3]=g*b;return c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};c=c?"":"d";a["glMath"+c]=b;a["vec2"+c]={create:function(a){var b=new d(2);
a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0);return b},createFrom:function(a,b){var c=new d(2);c[0]=a;c[1]=b;return c},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;return c},dist:function(a,b){var c=b[0]-a[0];
a=b[1]-a[1];return Math.sqrt(c*c+a*a)},dist2:function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a},set:function(a,b){b[0]=a[0];b[1]=a[1];return b},set2:function(a,b,c){c[0]=a;c[1]=b;return c},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])},negate:function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];return b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];0<c?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0;return b},cross:function(a,b,c){a=a[0]*b[1]-
a[1]*b[0];if(!c)return a;c[0]=c[1]=0;c[2]=a;return c},length:function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)},length2:function(a){var b=a[0];a=a[1];return b*b+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];a=a[1]-b[1];b=d*d+a*a;if(!b)return c[0]=0,c[1]=0,c[2]=0,c;b=1/Math.sqrt(b);c[0]=d*b;c[1]=a*b;return c},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);return d},str:function(a){return"["+a[0]+", "+a[1]+
"]"}};a["vec3"+c]=f;a["vec4"+c]={create:function(a){var b=new d(4);a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0);return b},createFrom:function(a,b,c,e){var g=new d(4);g[0]=a;g[1]=b;g[2]=c;g[3]=e;return g},add:function(a,b,c){c||(c=b);c[0]=a[0]+b[0];c[1]=a[1]+b[1];c[2]=a[2]+b[2];c[3]=a[3]+b[3];return c},subtract:function(a,b,c){c||(c=b);c[0]=a[0]-b[0];c[1]=a[1]-b[1];c[2]=a[2]-b[2];c[3]=a[3]-b[3];return c},multiply:function(a,b,c){c||(c=b);c[0]=a[0]*b[0];c[1]=a[1]*b[1];c[2]=
a[2]*b[2];c[3]=a[3]*b[3];return c},divide:function(a,b,c){c||(c=b);c[0]=a[0]/b[0];c[1]=a[1]/b[1];c[2]=a[2]/b[2];c[3]=a[3]/b[3];return c},scale:function(a,b,c){c||(c=a);c[0]=a[0]*b;c[1]=a[1]*b;c[2]=a[2]*b;c[3]=a[3]*b;return c},set:function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},set4:function(a,b,c,d,e){e[0]=a;e[1]=b;e[2]=c;e[3]=d;return e},equal:function(a,b){return a===b||1E-6>Math.abs(a[0]-b[0])&&1E-6>Math.abs(a[1]-b[1])&&1E-6>Math.abs(a[2]-b[2])&&1E-6>Math.abs(a[3]-b[3])},negate:function(a,
b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b},length:function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return Math.sqrt(b*b+c*c+d*d+a*a)},length2:function(a){var b=a[0],c=a[1],d=a[2];a=a[3];return b*b+c*c+d*d+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},lerp:function(a,b,c,d){d||(d=a);d[0]=a[0]+c*(b[0]-a[0]);d[1]=a[1]+c*(b[1]-a[1]);d[2]=a[2]+c*(b[2]-a[2]);d[3]=a[3]+c*(b[3]-a[3]);return d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};a["mat2"+
c]=u;a["mat3"+c]=C;a["mat4"+c]=B;a["quat4"+c]=r});return c})},"esri/views/3d/support/projectionUtils":function(){define("require exports ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/aaBoundingRect ../lib/gl-matrix ./earthUtils ./mathUtils ../webgl-engine/lib/BufferVectorMath".split(" "),function(c,a,f,b,d,l,k,e,h){function p(a,b,c,d){2===a.length?(E[0]=a[0],E[1]=a[1],E[2]=0,a=E):a===c&&(l.vec3d.set(a,E),a=E);return g(a,b,0,c,d,0,1)}function g(a,b,c,d,e,g,h){void 0===
h&&(h=1);r!==b&&(A=q(b),r=b);u!==e&&(n=q(e),u=e);h=c+3*h;if(A!==n||A===B.UNKNOWN&&!b.equals(e))if(A>B.UNKNOWN&&n>B.UNKNOWN)if(n!==B.WGS84)if(b=t[n],A!==B.WGS84)for(e=x[A];c<h;c+=3,g+=3)e(a,c,N,0),b(N,0,d,g);else for(;c<h;c+=3,g+=3)b(a,c,d,g);else for(e=x[A];c<h;c+=3,g+=3)e(a,c,d,g);else return!1;else if(d!==a||c!==g)for(;c<h;c++,g++)d[g]=a[c];return!0}function q(b){return b.wkt===a.SphericalECEFSpatialReference.wkt?B.SPHERICAL_ECEF:b.isWGS84?B.WGS84:b.isWebMercator?B.WEBMERC:b.wkt===a.WGS84ECEFSpatialReference.wkt?
B.WGS84_ECEF:B.UNKNOWN}function v(a,b,c,d){c[d++]=a[b++];c[d++]=a[b++];c[d]=a[b]}function y(a,b,c,d){var g=.4999999*Math.PI,g=e.clamp(D*a[b+1],-g,g),g=Math.sin(g);c[d++]=D*a[b]*F;c[d++]=F/2*Math.log((1+g)/(1-g));c[d]=a[b+2]}function C(a,b,c,d){var e=F+a[b+2],g=D*a[b+1];a=D*a[b];b=Math.cos(g);c[d++]=Math.cos(a)*b*e;c[d++]=Math.sin(a)*b*e;c[d]=Math.sin(g)*e}Object.defineProperty(a,"__esModule",{value:!0});a.SphericalECEFSpatialReference=new b({wkt:'GEOCCS["Spherical geocentric",\n  DATUM["Not specified",\n    SPHEROID["Sphere",\' + earthUtils.earthRadius + \',0]],\n  PRIMEM["Greenwich",0.0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",EAST],\n  AXIS["Geocentric Z",NORTH]\n]'});
a.WGS84ECEFSpatialReference=new b({wkt:'GEOCCS["WGS 84",\n  DATUM["WGS_1984",\n    SPHEROID["WGS 84",6378137,298.257223563,\n      AUTHORITY["EPSG","7030"]],\n    AUTHORITY["EPSG","6326"]],\n  PRIMEM["Greenwich",0,\n    AUTHORITY["EPSG","8901"]],\n  UNIT["m",1.0,\n    AUTHORITY["EPSG","9001"]],\n  AXIS["Geocentric X",OTHER],\n  AXIS["Geocentric Y",OTHER],\n  AXIS["Geocentric Z",NORTH],\n  AUTHORITY["EPSG","4978"]\n]'});var B;(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.SPHERICAL_ECEF=1]="SPHERICAL_ECEF";
a[a.WGS84=2]="WGS84";a[a.WEBMERC=3]="WEBMERC";a[a.WGS84_ECEF=4]="WGS84_ECEF"})(B||(B={}));var r,A,u,n;a.vectorToVector=p;a.pointToVector=function(a,b,c){E[0]=a.x;E[1]=a.y;var d=a.z;E[2]=void 0!==d?d:0;return g(E,a.spatialReference,0,b,c,0,1)};a.vectorToPoint=function(a,b,c,d){"esri.geometry.SpatialReference"===c.declaredClass?(d=c,c=new f({spatialReference:d})):d=d||c.spatialReference;return g(a,b,0,E,d,0,1)?(c.x=E[0],c.y=E[1],c.z=E[2],c.spatialReference=d,c):null};a.xyzToVector=function(a,b,c,d,
e,h){E[0]=a;E[1]=b;E[2]=c;return g(E,d,0,e,h,0,1)};a.bufferToBuffer=g;a.computeLinearTransformation=function(a,b,c,d){var e=q(a),g=q(d);if(e===g&&g!==B.SPHERICAL_ECEF&&(e!==B.UNKNOWN||a.equals(d)))return l.mat4d.identity(c),l.mat4d.translate(c,b),!0;if(g===B.SPHERICAL_ECEF){if(a=x[e])return a(b,0,N,0),C(N,0,Z,0),d=D*N[0],a=D*N[1],b=Math.sin(d),d=Math.cos(d),e=Math.sin(a),a=Math.cos(a),c[0]=-b,c[4]=-e*d,c[8]=a*d,c[12]=Z[0],c[1]=d,c[5]=-e*b,c[9]=a*b,c[13]=Z[1],c[2]=0,c[6]=a,c[10]=e,c[14]=Z[2],c[3]=
0,c[7]=0,c[11]=0,c[15]=1,!0}else if(g===B.WEBMERC&&(e===B.WGS84||e===B.SPHERICAL_ECEF))return x[e](b,0,N,0),b=D*N[1],y(N,0,Z,0),l.mat4d.identity(c),l.mat4d.translate(c,Z),b=1/Math.cos(b),l.mat4d.scale(c,[b,b,1]),!0;return!1};a.transformDirection=function(a,b,c,d,e){l.vec3d.set(a,ia);l.vec3d.add(a,b,S);p(ia,c,ia,e);p(S,c,S,e);l.vec3d.subtract(S,ia,d);l.vec3d.normalize(d)};a.mbsToMbs=function(a,b,c,d){var e=q(b),g=q(d);if(e===g&&(e!==B.UNKNOWN||b.equals(d)))return c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=
a[3],!0;if(g===B.SPHERICAL_ECEF){if(b=x[e])return b(a,0,N,0),C(N,0,c,0),c[3]=a[3],!0}else if(g===B.WEBMERC&&(e===B.WGS84||e===B.SPHERICAL_ECEF))return x[e](a,0,N,0),b=Math.abs(D*N[1])+Math.asin(a[3]/(F+a[2])),y(N,0,c,0),c[3]=b>.9999*Math.PI?Number.MAX_VALUE:1/Math.cos(b)*a[3],!0;return!1};a.extentToBoundingBox=function(a,b,c){if(null==a)return!1;var d;E[0]=null!=a.xmin?a.xmin:0;E[1]=null!=a.ymin?a.ymin:0;E[2]=null!=a.zmin?a.zmin:0;d=g(E,a.spatialReference,0,b,c,0,1);E[0]=null!=a.xmax?a.xmax:0;E[1]=
null!=a.ymax?a.ymax:0;E[2]=null!=a.zmax?a.zmax:0;d=d&&g(E,a.spatialReference,0,b,c,3,1);null==a.xmin&&(b[0]=-Infinity);null==a.ymin&&(b[1]=-Infinity);null==a.zmin&&(b[2]=-Infinity);null==a.xmax&&(b[3]=Infinity);null==a.ymax&&(b[4]=Infinity);null==a.zmax&&(b[5]=Infinity);return d};a.extentToBoundingRect=function(a,b,c){if(null==a)return!1;var d;E[0]=null!=a.xmin?a.xmin:0;E[1]=null!=a.ymin?a.ymin:0;E[2]=null!=a.zmin?a.zmin:0;d=g(E,a.spatialReference,0,E,c,0,1);b[0]=E[0];b[1]=E[1];E[0]=null!=a.xmax?
a.xmax:0;E[1]=null!=a.ymax?a.ymax:0;E[2]=null!=a.zmax?a.zmax:0;d=d&&g(E,a.spatialReference,0,E,c,0,1);b[2]=E[0];b[3]=E[1];null==a.xmin&&(b[0]=-Infinity);null==a.ymin&&(b[1]=-Infinity);null==a.xmax&&(b[2]=Infinity);null==a.ymax&&(b[3]=Infinity);return d};a.boundingRectToBoundingRect=function(a,b,c,e){if(null==a)return!1;if(b.equals(e))return d.set(c,a),!0;var h;E[0]=a[0];E[1]=a[1];E[2]=0;h=g(E,b,0,E,e,0,1);c[0]=E[0];c[1]=E[1];E[0]=a[2];E[1]=a[3];E[2]=0;h=h&&g(E,b,0,E,e,0,1);c[2]=E[0];c[3]=E[1];return h};
(function(a){a.x2lon=function(a){return a/F};a.y2lat=function(a){return Math.PI/2-2*Math.atan(Math.exp(-1*a/F))};a.lon2x=function(a){return a*F};a.lat2y=function(a){a=Math.sin(a);return F/2*Math.log((1+a)/(1-a))}})(a.webMercator||(a.webMercator={}));var t=[void 0,C,v,y,function(a,b,c,d){var e=J,g=D*a[b],h=D*a[b+1];a=a[b+2];b=Math.sin(h);var h=Math.cos(h),f=e.a/Math.sqrt(1-e.e2*b*b);c[d++]=(f+a)*h*Math.cos(g);c[d++]=(f+a)*h*Math.sin(g);c[d++]=(f*(1-e.e2)+a)*b}],x=[void 0,function(a,b,c,d){var g=h.Vec3Compact.length(a,
b),f=e.asin(a[b+2]/g);a=(0<a[b+1]?1:-1)*e.acos(a[b]/(Math.cos(f)*g));c[d++]=G*a;c[d++]=G*f;c[d]=g-F},v,function(a,b,c,d){c[d++]=G*(a[b++]/F);c[d++]=G*(Math.PI/2-2*Math.atan(Math.exp(-1*a[b++]/F)));c[d]=a[b]},function(a,b,c,d){var e=J,g=a[b],h=a[b+1];a=a[b+2];var f,p,k,n,q,A;b=Math.abs(a);f=g*g+h*h;p=Math.sqrt(f);k=f+a*a;n=Math.sqrt(k);g=Math.atan2(h,g);q=a*a/k;k=f/k;h=e.a2/n;f=e.a3-e.a4/n;.3<k?(q=b/n*(1+k*(e.a1+h+q*f)/n),n=Math.asin(q),h=q*q,k=Math.sqrt(1-h)):(k=p/n*(1-q*(e.a5-h-k*f)/n),n=Math.acos(k),
h=1-k*k,q=Math.sqrt(h));A=1-e.e2*h;h=e.a/Math.sqrt(A);e=e.a6*h;h=p-h*k;f=b-e*q;b=k*h+q*f;p=k*f-q*h;e=p/(e/A+b);n+=e;0>a&&(n=-n);c[d++]=G*g;c[d++]=G*n;c[d]=b+p*e/2}],D=e.deg2rad(1),G=e.rad2deg(1),F=k.earthRadius,J={a:6378137,e2:.006694379990137799,a1:42697.67270715754,a2:1.8230912546075456E9,a3:142.91722289812412,a4:4.557728136518864E9,a5:42840.589930055656,a6:.9933056200098622},E=l.vec3d.create(),N=l.vec3d.create(),Z=l.vec3d.create(),ia=l.vec3d.create(),S=l.vec3d.create()})},"esri/geometry/support/aaBoundingRect":function(){define(["require",
"exports","../Extent"],function(c,a,f){function b(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3]]}function d(a){return a[0]>=a[2]?0:a[2]-a[0]}function l(a){return a[1]>=a[3]?0:a[3]-a[1]}function k(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a}function e(a){return 4===a.length}function h(a,b,c){return a<b?b:a>c?c:a}Object.defineProperty(a,"__esModule",{value:!0});a.create=b;a.clone=function(a){return[a[0],a[1],a[2],a[3]]};a.fromValues=function(a,c,d,e,h){void 0===h&&(h=b());h[0]=a;h[1]=
c;h[2]=d;h[3]=e;return h};a.fromExtent=function(a,c){void 0===c&&(c=b());c[0]=a.xmin;c[1]=a.ymin;c[2]=a.xmax;c[3]=a.ymax;return c};a.toExtent=function(a,b){return new f({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:b})};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])};a.expand=function(a,b,c){void 0===c&&(c=a);if("length"in b)if(e(b))c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[2]),
c[3]=Math.max(a[3],b[3]);else{if(2===b.length||3===b.length)c[0]=Math.min(a[0],b[0]),c[1]=Math.min(a[1],b[1]),c[2]=Math.max(a[2],b[0]),c[3]=Math.max(a[3],b[1])}else switch(b.type){case "extent":c[0]=Math.min(a[0],b.xmin);c[1]=Math.min(a[1],b.ymin);c[2]=Math.max(a[2],b.xmax);c[3]=Math.max(a[3],b.ymax);break;case "point":c[0]=Math.min(a[0],b.x),c[1]=Math.min(a[1],b.y),c[2]=Math.max(a[2],b.x),c[3]=Math.max(a[3],b.y)}return c};a.expandWithNestedArray=function(a,b,c){void 0===c&&(c=a);var d=b.length,e=
a[0],g=a[1],h=a[2];a=a[3];for(var f=0;f<d;f++){var k=b[f],e=Math.min(e,k[0]),g=Math.min(g,k[1]),h=Math.max(h,k[0]);a=Math.max(a,k[1])}c[0]=e;c[1]=g;c[2]=h;c[3]=a;return c};a.allFinite=function(a){for(var b=0;4>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=d;a.height=l;a.diameter=function(a){var b=d(a);a=l(a);return Math.sqrt(b*b+a*a)};a.area=function(a){return d(a)*l(a)};a.center=function(a,b){void 0===b&&(b=[0,0]);b[0]=a[0]+d(a)/2;b[1]=a[1]+l(a)/2;return b};a.containsPoint=function(a,b){return b[0]>=
a[0]&&b[1]>=a[1]&&b[0]<=a[2]&&b[1]<=a[3]};a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[0]<=a[2]+c&&b[1]<=a[3]+c};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[2],a[2])&&Math.max(b[1],a[1])<=Math.min(b[3],a[3])};a.contains=function(a,b){return b[0]>=a[0]&&b[2]<=a[2]&&b[1]>=a[1]&&b[3]<=a[3]};a.intersection=function(a,b,c){void 0===c&&(c=a);var d=b[0],e=b[1],g=b[2];b=b[3];c[0]=h(a[0],d,g);c[1]=h(a[1],e,b);c[2]=h(a[2],d,g);c[3]=h(a[3],e,b);return c};
a.distance=function(a,b){var c=(a[1]+a[3])/2,e=Math.max(Math.abs(b[0]-(a[0]+a[2])/2)-d(a)/2,0);a=Math.max(Math.abs(b[1]-c)-l(a)/2,0);return Math.sqrt(e*e+a*a)};a.offset=function(a,b,c,d){void 0===d&&(d=a);d[0]=a[0]+b;d[1]=a[1]+c;d[2]=a[2]+b;d[3]=a[3]+c;return d};a.pad=function(a,b,c){void 0===c&&(c=a);c[0]=a[0]-b;c[1]=a[1]-b;c[2]=a[2]+b;c[3]=a[3]+b;return c};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c!==a&&(c[2]=a[2],c[3]=a[3]);return c};a.setMax=function(a,b,c){void 0===c&&(c=
a);c[2]=b[0];c[3]=b[1];c!==a&&(c[0]=a[0],c[1]=a[1]);return a};a.set=k;a.empty=function(c){return c?k(c,a.NEGATIVE_INFINITY):b(a.NEGATIVE_INFINITY)};a.is=e;a.isPoint=function(a){return(0===d(a)||!isFinite(a[0]))&&(0===l(a)||!isFinite(a[1]))};a.equals=function(a,b,c){if(null==a||null==b)return a===b;if(!e(a)||!e(b))return!1;if(c)for(var d=0;d<a.length;d++){if(!c(a[d],b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,Infinity,Infinity];
a.NEGATIVE_INFINITY=[Infinity,Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0]})},"esri/views/3d/support/earthUtils":function(){define("require exports ../../../core/wgs84Constants ../../../geometry/Point ../../../geometry/SpatialReference ../../../geometry/support/webMercatorUtils ../lib/gl-matrix ./mathUtils".split(" "),function(c,a,f,b,d,l,k,e){function h(c,d,g,h){var f,k;c instanceof b&&d instanceof b&&(g=d.longitude,h=d.latitude,k=c.latitude,f=c.longitude);c=e.deg2rad(k);h=e.deg2rad(h);f=e.deg2rad(f);
d=e.deg2rad(g);g=Math.sin((c-h)/2);f=Math.sin((f-d)/2);g=2*e.asin(Math.sqrt(g*g+Math.cos(c)*Math.cos(h)*f*f))*a.earthRadius;return Math.round(1E4*g)/1E4}function p(b,c,d){b=d/a.earthRadius;c=e.deg2rad(c);b=Math.sin(b/2);c=Math.cos(c);c=2*e.asin(Math.sqrt(b*b/(c*c)));return e.rad2deg(c)}function g(b,c,d){return e.rad2deg(d/a.earthRadius)}function q(a,b){a/=15;b||(a=Math.round(a));return a}Object.defineProperty(a,"__esModule",{value:!0});a.earthRadius=f.wgs84Radius;a.halfEarthCircumference=Math.PI*
a.earthRadius;a.earthCircumference=2*a.halfEarthCircumference;a.metersPerDegree=a.halfEarthCircumference/180;var v=new b(0,0,d.WGS84);a.getGreatCircleDistance=h;a.getGreatCircleSpanAt=function(a,c,d){var e=c.spatialReference,g=new b(c.x,a.y,e),f=new b(d.x,a.y,e);c=new b(a.x,c.y,e);a=new b(a.x,d.y,e);return{lon:h(g,f),lat:h(c,a)}};a.getLonDeltaForDistance=p;a.getLatDeltaForDistance=g;a.getLatLonDeltaForDistance=function(a,b,c){return{lat:g(a,b,c),lon:p(a,b,c)}};a.getMaxCameraAltitude=function(b){b=
e.deg2rad(b/2);return(1-Math.sin(b))*a.earthRadius/Math.sin(b)};a.getViewExtentDistance=function(b,c){c=e.deg2rad(c/2);return 2*e.acos((Math.pow(b+a.earthRadius,2)+Math.pow(a.earthRadius,2)-Math.pow((b+a.earthRadius)*Math.cos(c)-Math.sqrt(Math.pow(Math.cos(c)*(b+a.earthRadius),2)-b*b-2*b*a.earthRadius),2))/(2*(b+a.earthRadius)*a.earthRadius))*a.earthRadius};a.computeCarthesianDistance=function(b,c){function d(b){var c=e.deg2rad(b.latitude),d=e.deg2rad(b.longitude),g=Math.cos(c);b=a.earthRadius+(b.z||
0);return[Math.cos(d)*g*b,Math.sin(c)*b,-Math.sin(d)*g*b]}b=d(b);c=d(c);c=[c[0]-b[0],c[1]-b[1],c[2]-b[2]];return Math.sqrt(c[0]*c[0]+c[1]*c[1]+c[2]*c[2])};a.longitudeToTimezone=q;a.positionToTimezone=function(a,b){a.spatialReference.wkid!==d.WGS84.wkid?l.webMercatorToGeographic(a,!1,v):(v.x=a.x,v.y=a.y);v.z=a.z;b||(b={hours:0,minutes:0,seconds:0});b.hours=q(v.x,!0);a=b.hours%1;b.hours-=a;b.minutes=60*a;a=b.minutes%1;b.minutes-=a;b.seconds=Math.round(60*a);return b};a.distanceToIdealHorizon=function(b,
c){c=c||a.earthRadius;b=k.vec3d.dot(b,b);return Math.sqrt(Math.abs(b-c*c))}})},"esri/views/3d/support/mathUtils":function(){define(["require","exports","../lib/gl-matrix"],function(c,a,f){function b(a){return Math.asin(1<a?1:-1>a?-1:a)}function d(a){return Math.acos(1<a?1:-1>a?-1:a)}function l(a,b,c){return a<b?b:a>c?c:a}function k(a){for(var b in a){var c=a[b];c instanceof Function&&(a[b]=c.bind(a))}return a}Object.defineProperty(a,"__esModule",{value:!0});a.deg2rad=function(a){return a*Math.PI/
180};a.rad2deg=function(a){return 180*a/Math.PI};a.asin=b;a.acos=d;a.sign=Math.sign||function(a){return+(0<a)-+(0>a)||+a};a.log2=Math.log2||function(a){return Math.log(a)/Math.LN2};a.isPowerOfTwo=function(a){return 0===(a&a-1)};a.nextHighestPowerOfTwo=function(a){--a;for(var b=1;32>b;b<<=1)a|=a>>b;return a+1};a.nextHighestPowerOfTen=function(a){return Math.pow(10,Math.ceil(Math.LOG10E*Math.log(a)))};a.fovx2fovy=function(a,b,c){return 2*Math.atan(c*Math.tan(.5*a)/b)};a.fovy2fovx=function(a,b,c){return 2*
Math.atan(b*Math.tan(.5*a)/c)};a.makeOrthonormal=function(a,b,c){c=c||a;var d=f.vec3d.dot(a,b);f.vec3d.set3(a[0]-d*b[0],a[1]-d*b[1],a[2]-d*b[2],c);f.vec3d.normalize(c)};a.tangentFrame=function(a,b,c){Math.abs(a[0])>Math.abs(a[1])?f.vec3d.set3(0,1,0,b):f.vec3d.set3(1,0,0,b);f.vec3d.cross(a,b,c);f.vec3d.normalize(b);f.vec3d.cross(c,a,b);f.vec3d.normalize(c)};a.cartesianToSpherical=function(a,c){var d=f.vec3d.length(a),e=b(a[2]/d);f.vec3d.set3(d,e,Math.atan2(a[1]/d,a[0]/d),c)};a.sphericalToCartesian=
function(a,b){var c=a[0],d=a[1];a=a[2];var e=Math.cos(d);f.vec3d.set3(c*e*Math.cos(a),c*e*Math.sin(a),c*Math.sin(d),b)};a.lerp=function(a,b,c){return a+(b-a)*c};a.bilerp=function(a,b,c,d,e,g){a+=(b-a)*e;return a+(c+(d-c)*e-a)*g};a.slerp=function(a,b,c,d){void 0===d&&(d=a);var e=f.vec3d.length(a),h=f.vec3d.length(b),k=f.vec3d.dot(a,b)/(e*h);if(.9999999999999999>k){var k=Math.acos(k),n=((1-c)*e+c*h)/Math.sin(k),h=n/h*Math.sin(c*k);f.vec3d.scale(a,n/e*Math.sin((1-c)*k),g);f.vec3d.scale(b,h,q);return f.vec3d.add(g,
q,d)}return f.vec3d.lerp(a,b,c,d)};a.angle=function(a,b,c){a=f.vec3d.normalize(a,g);b=f.vec3d.normalize(b,q);var e=d(f.vec3d.dot(a,b));return c&&(a=f.vec3d.cross(a,b,p),0>f.vec3d.dot(a,c))?-e:e};a.clamp=l;a.isFinite=Number.isFinite||function(a){return"number"===typeof a&&window.isFinite(a)};a.isNaN=Number.isNaN||function(a){return a!==a};a.makePiecewiseLinearFunction=function(a){var b=a.length;return function(c){if(c<=a[0][0])return a[0][1];if(c>=a[b-1][0])return a[b-1][1];for(var d=1;c>a[d][0];)d++;
var e=a[d][0];c=(e-c)/(e-a[d-1][0]);return c*a[d-1][1]+(1-c)*a[d][1]}};a.vectorEquals=function(a,b){if(null==a||null==b)return a!==b;if(a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!==b[c])return!1;return!0};a.floatEqualRelative=function(b,c,d){void 0===d&&(d=1E-6);if(a.isNaN(b)||a.isNaN(c))return!1;if(b===c)return!0;var e=Math.abs(b-c),g=Math.abs(b),h=Math.abs(c);if(0===b||0===c||1E-12>g&&1E-12>h){if(e>.01*d)return!1}else if(e/(g+h)>d)return!1;return!0};a.floatEqualAbsolute=function(b,
c,d){void 0===d&&(d=1E-6);return a.isNaN(b)||a.isNaN(c)?!1:(b>c?b-c:c-b)<=d};c=function(){function a(a,b){this.min=a;this.max=b;this.range=b-a}a.prototype.ndiff=function(a,b){void 0===b&&(b=0);return Math.ceil((a-b)/this.range)*this.range+b};a.prototype._normalize=function(a,b,c,d){void 0===d&&(d=0);c-=d;c<a?c+=this.ndiff(a-c):c>b&&(c-=this.ndiff(c-b));return c+d};a.prototype.normalize=function(a,b){return this._normalize(this.min,this.max,a,b)};a.prototype.clamp=function(a,b){void 0===b&&(b=0);return l(a-
b,this.min,this.max)+b};a.prototype.monotonic=function(a,b,c){return a<b?b:b+this.ndiff(a-b,c)};a.prototype.minimalMonotonic=function(a,b,c){return this._normalize(a,a+this.range,b,c)};a.prototype.center=function(a,b,c){b=this.monotonic(a,b,c);return this.normalize((a+b)/2,c)};a.prototype.diff=function(a,b,c){return this.monotonic(a,b,c)-a};a.prototype.contains=function(a,b,c){b=this.minimalMonotonic(a,b);c=this.minimalMonotonic(a,c);return c>a&&c<b};return a}();a.Cyclical=c;a.planeFromPoints=function(a,
b,c,d){f.vec3d.subtract(b,a,e);f.vec3d.subtract(c,a,h);f.vec3d.cross(e,h,d);f.vec3d.normalize(d,d);d[3]=-f.vec3d.dot(a,d)};var e=f.vec3d.create(),h=f.vec3d.create();a.cyclical2PI=k(new c(0,2*Math.PI));a.cyclicalPI=k(new c(-Math.PI,Math.PI));a.cyclicalDeg=k(new c(0,360));var p=f.vec3d.create(),g=f.vec3d.create(),q=f.vec3d.create()})},"esri/views/3d/webgl-engine/lib/BufferVectorMath":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});(function(a){a.length=
function(a,c){var b=a[c],d=a[c+1];a=a[c+2];return Math.sqrt(b*b+d*d+a*a)};a.normalize=function(a,c){var b=a[c],d=a[c+1],e=a[c+2],b=1/Math.sqrt(b*b+d*d+e*e);a[c]*=b;a[c+1]*=b;a[c+2]*=b};a.scale=function(a,c,f){a[c]*=f;a[c+1]*=f;a[c+2]*=f};a.add=function(a,c,f,k,e,h){void 0===h&&(h=c);e=e||a;e[h]=a[c]+f[k];e[h+1]=a[c+1]+f[k+1];e[h+2]=a[c+2]+f[k+2]};a.subtract=function(a,c,f,k,e,h){void 0===h&&(h=c);e=e||a;e[h]=a[c]-f[k];e[h+1]=a[c+1]-f[k+1];e[h+2]=a[c+2]-f[k+2]}})(a.Vec3Compact||(a.Vec3Compact={}))})},
"esri/geometry/support/meshUtils/offset":function(){define(["require","exports","./projection","../../../views/3d/lib/gl-matrix","../../../views/3d/support/projectionUtils"],function(c,a,f,b,d){function l(a,b){if(a)for(var c=0;c<a.length;c+=3)for(var d=0;3>d;d++)a[c+d]+=b[d]}Object.defineProperty(a,"__esModule",{value:!0});a.offset=function(a,c,q){if(a.vertexAttributes&&a.vertexAttributes.position){var g=a.spatialReference;if(g.isWGS84||g.isWebMercator&&(!q||!1!==q.geographic)){q=a.spatialReference;
var g=a.vertexAttributes.position,p=a.vertexAttributes.normal,C=new Float64Array(g.length),B=new Float32Array(p?p.length:0),r=a.extent.center,A=k;d.computeLinearTransformation(q,[r.x,r.y,r.z],e,d.SphericalECEFSpatialReference);b.mat4d.toMat3(e,h);b.mat3d.multiplyVec3(h,c,A);f.projectToECEF(g,q,C);p&&f.projectNormalToECEF(p,g,C,q,B);l(C,A);f.projectFromECEF(C,g,q);p&&f.projectNormalFromECEF(B,g,C,q,p)}else l(a.vertexAttributes.position,c);a.clearCache()}};var k=b.vec3d.create(),e=b.mat4d.create(),
h=b.mat3d.create()})},"esri/geometry/support/meshUtils/primitives":function(){define(["require","exports","./georeference","../../../views/3d/lib/gl-matrix"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});a.createUnitSizeBox=function(){for(var a=l.faceDescriptions,b=l.faceVertexOffsets,c=l.uvScales,d=4*a.length,e=new Float64Array(3*d),f=new Float32Array(3*d),d=new Float32Array(2*d),k=new Uint32Array(6*a.length),B=0,r=0,A=0,u=0,n=0;n<a.length;n++){for(var t=a[n],x=B/3,D=0,G=b;D<
G.length;D++){var F=G[D];k[u++]=x+F}x=t.corners;for(D=0;4>D;D++){G=x[D];F=0;d[A++]=.25*c[D][0]+t.uvOrigin[0];d[A++]=t.uvOrigin[1]-.25*c[D][1];for(var J=0;3>J;J++)0!==t.axis[J]?(e[B++]=.5*t.axis[J],f[r++]=t.axis[J]):(e[B++]=.5*G[F++],f[r++]=0)}}return{position:e,normal:f,uv:d,faces:k}};a.createUnitSizeSphere=function(a){void 0===a&&(a=0);a=Math.round(8*Math.pow(2,a));for(var b=2*a,c=(a-1)*(b+1)+2*b,d=new Float64Array(3*c),e=new Float32Array(3*c),c=new Float32Array(2*c),h=new Uint32Array((a-1)*b*6),
f=0,l=0,r=0,A=0,u=0,n=0;n<=a;n++){var t=n/a*Math.PI+.5*Math.PI,x=Math.cos(t);k[2]=Math.sin(t);for(var D=(t=0===n||n===a)?b-1:b,G=0;G<=D;G++){var F=G/D*2*Math.PI;k[0]=-Math.sin(F)*x;k[1]=Math.cos(F)*x;for(F=0;3>F;F++)d[f++]=.5*k[F],e[l++]=k[F];c[r++]=(G+(t?.5:0))/b;c[r++]=n/a;0!==n&&G!==b&&(n!==a&&(h[A++]=u,h[A++]=u+1,h[A++]=u-b),1!==n&&(h[A++]=u,h[A++]=u-b,h[A++]=u-b-1));u++}}return{position:d,normal:e,uv:c,faces:h}};a.createUnitSizeCylinder=function(a){void 0===a&&(a=0);a=Math.round(16*Math.pow(2,
a));for(var b=4*(a+1)+2*a,c=new Float64Array(3*b),d=new Float32Array(3*b),b=new Float32Array(2*b),e=new Uint32Array(12*a),h=0,f=0,l=0,r=0,A=0,u=0;5>=u;u++)for(var n=0===u||5===u,t=1>=u||4<=u,x=2===u||4===u,D=n?a-1:a,G=0;G<=D;G++){var F=G/D*2*Math.PI,J=n?0:.5;k[0]=J*Math.sin(F);k[1]=J*-Math.cos(F);k[2]=2>=u?.5:-.5;for(F=0;3>F;F++)c[h++]=k[F],t?d[f++]=2===F?1>=u?1:-1:0:d[f++]=2===F?0:k[F]/J;b[l++]=(G+(n?.5:0))/a;1>=u?b[l++]=1*u/3:3>=u?b[l++]=1*(u-2)/3+1/3:b[l++]=1*(u-4)/3+2/3;x||0===u||G===a||(5!==
u&&(e[r++]=A,e[r++]=A+1,e[r++]=A-a),1!==u&&(e[r++]=A,e[r++]=A-a,e[r++]=A-a-1));A++}return{position:c,normal:d,uv:b,faces:e}};a.createUnitSizePlane=function(a){a=d.facingAxisOrderSwap[a];for(var b=d.position,c=d.normal,e=new Float64Array(b.length),h=new Float32Array(c.length),f=0,k=0;4>k;k++)for(var l=f,r=0;3>r;r++){var A=a[r],u=Math.abs(A)-1,A=0<=A?1:-1;e[f]=b[l+u]*A;h[f]=c[l+u]*A;f++}return{position:e,normal:h,uv:new Float32Array(d.uv),faces:new Uint32Array(d.faces)}};var d={position:[-.5,-.5,0,
.5,-.5,0,.5,.5,0,-.5,.5,0],normal:[0,0,1,0,0,1,0,0,1,0,0,1],uv:[0,1,1,1,1,0,0,0],faces:[0,1,2,0,2,3],facingAxisOrderSwap:{east:[3,1,2],west:[-3,-1,2],north:[-1,3,2],south:[1,-3,2],up:[1,2,3],down:[1,-2,-3]}};a.convertUnitGeometry=function(a,c,d){for(var g=0;g<a.position.length;g+=3)a.position[g+2]+=.5;g=d&&d.size;if(null!=g){g="number"===typeof g?[g,g,g]:[null!=g.width?g.width:1,null!=g.depth?g.depth:1,null!=g.height?g.height:1];e[0]=g[0];e[4]=g[1];e[8]=g[2];for(var h=0;h<a.position.length;h+=3){for(var p=
0;3>p;p++)k[p]=a.position[h+p];b.mat3d.multiplyVec3(e,k);for(p=0;3>p;p++)a.position[h+p]=k[p]}if(g[0]!==g[1]||g[1]!==g[2])for(e[0]=1/g[0],e[4]=1/g[1],e[8]=1/g[2],h=0;h<a.normal.length;h+=3){for(p=0;3>p;p++)k[p]=a.normal[h+p];b.mat3d.multiplyVec3(e,k);b.vec3d.normalize(k);for(p=0;3>p;p++)a.normal[h+p]=k[p]}}g=f.georeference(a,c,d);return{vertexAttributes:{position:g.position,normal:g.normal,uv:a.uv},components:[{faces:a.faces,material:d&&d.material||null}],spatialReference:c.spatialReference}};var l=
{faceDescriptions:[{axis:[0,-1,0],uvOrigin:[0,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[1,0,0],uvOrigin:[.25,.625],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,1,0],uvOrigin:[.5,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[-1,0,0],uvOrigin:[.75,.625],corners:[[1,-1],[-1,-1],[-1,1],[1,1]]},{axis:[0,0,1],uvOrigin:[0,.375],corners:[[-1,-1],[1,-1],[1,1],[-1,1]]},{axis:[0,0,-1],uvOrigin:[0,.875],corners:[[-1,1],[1,1],[1,-1],[-1,-1]]}],uvScales:[[0,0],[1,0],[1,1],[0,1]],faceVertexOffsets:[0,
1,2,0,2,3]};a.boxFaceOrder={south:0,east:1,north:2,west:3,up:4,down:5};var k=b.vec3d.create(),e=b.mat3d.identity()})},"esri/geometry/support/meshUtils/georeference":function(){define(["require","exports","../../../views/3d/lib/gl-matrix","../../../views/3d/support/projectionUtils"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});a.georeference=function(a,c,h){var e=c.spatialReference;if(e.isWGS84||e.isWebMercator&&(!h||!1!==h.geographic)){h=c.spatialReference;b.computeLinearTransformation(c.spatialReference,
[c.x,c.y,c.z||0],d,b.SphericalECEFSpatialReference);var e=a.position,g=d,k=c.spatialReference,v=new Float64Array(e.length);for(c=0;c<e.length;c+=3){for(var y=0;3>y;y++)l[y]=e[c+y];f.mat4d.multiplyVec3(g,l);for(y=0;3>y;y++)v[c+y]=l[y]}c=new Float64Array(e.length);b.bufferToBuffer(v,b.SphericalECEFSpatialReference,0,c,k,0,v.length/3);a=a.normal;if(h.isWebMercator&&a){h=new Float32Array(a.length);for(e=0;e<a.length;e+=3)for(g=b.webMercator.y2lat(c[e+1]),g=Math.cos(g),l[0]=a[e+0]*g,l[1]=a[e+1]*g,l[2]=
a[e+2],f.vec3d.normalize(l),g=0;3>g;g++)h[e+g]=l[g];a=h}a={position:c,normal:a}}else{h=new Float64Array(a.position.length);e=a.position;for(g=0;g<e.length;g+=3)h[g+0]=e[g+0]+c.x,h[g+1]=e[g+1]+c.y,h[g+2]=e[g+2]+(c.z||0);a={position:h,normal:a.normal}}return a};var d=f.mat4d.create(),l=f.vec3d.create()})},"esri/geometry/support/meshUtils/rotate":function(){define("require exports ../../../core/Logger ./projection ../../../views/3d/lib/gl-matrix ../../../views/3d/support/projectionUtils".split(" "),
function(c,a,f,b,d,l){function k(a,b,c){void 0===c&&(c=C);if(a)for(d.mat4d.identity(v),d.mat4d.rotate(v,b[3],b),b=0;b<a.length;b+=3){for(var e=0;3>e;e++)h[e]=a[b+e]-c[e];d.mat4d.multiplyVec3(v,h);for(e=0;3>e;e++)a[b+e]=h[e]+c[e]}}Object.defineProperty(a,"__esModule",{value:!0});var e=f.getLogger("esri.geometry.support.meshUtils.rotate");a.rotate=function(a,c,g){if(a.vertexAttributes&&a.vertexAttributes.position&&0!==c[3]){var h=a.spatialReference,f=g&&g.origin||a.extent.center;if(h.isWGS84||h.isWebMercator&&
(!g||!1!==g.geographic)){g=a.spatialReference;h=B;l.pointToVector(f,h,l.SphericalECEFSpatialReference)||l.pointToVector(a.extent.center,h,l.SphericalECEFSpatialReference);var f=a.vertexAttributes.position,A=a.vertexAttributes.normal,q=new Float64Array(f.length),u=new Float32Array(A?A.length:0);l.computeLinearTransformation(l.SphericalECEFSpatialReference,h,v,l.SphericalECEFSpatialReference);d.mat4d.toMat3(v,y);var r=d.mat3d.multiplyVec3(y,c,p);r[3]=c[3];b.projectToECEF(f,g,q);A&&b.projectNormalToECEF(A,
f,q,g,u);k(q,r,h);b.projectFromECEF(q,f,g);A&&(k(u,r),b.projectNormalFromECEF(u,f,q,g,A))}else g=B,l.pointToVector(f,g,a.spatialReference)||(h=a.extent.center,g[0]=h.x,g[1]=h.y,g[2]=h.z,e.error("Failed to project specified origin (wkid:"+f.spatialReference.wkid+") to mesh spatial reference (wkid:"+a.spatialReference.wkid+"). Using mesh extent.center instead")),k(a.vertexAttributes.position,c,g),k(a.vertexAttributes.normal,c);a.clearCache()}};a.axisAngleFrom=function(a,b,c){d.vec3d.set(a,c);c[3]=b;
return c};a.axisAngleMultiply=function(a,b,c){d.quat4d.fromAngleAxis(a[3],a,g);d.quat4d.fromAngleAxis(b[3],b,q);d.quat4d.multiply(q,g,g);d.quat4d.toAngleAxis(g,c);return c};var h=d.vec3d.create(),p=d.vec4d.create(),g=d.quat4d.create(),q=d.quat4d.create(),v=d.mat4d.create(),y=d.mat3d.create(),C=[0,0,0],B=[0,0,0]})},"esri/geometry/Multipoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./support/zmUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p){function g(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}c=function(a){function c(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.points=[];b.type="multipoint";return b}f(c,a);e=c;c.prototype.normalizeCtorArgs=function(a,b){if(!a&&!b)return null;var c={};Array.isArray(a)?(c.points=a,c.spatialReference=b):!a||"esri.geometry.SpatialReference"!==a.declaredClass&&null==a.wkid?(a.points&&(c.points=a.points),a.spatialReference&&(c.spatialReference=
a.spatialReference),a.hasZ&&(c.hasZ=a.hasZ),a.hasM&&(c.hasM=a.hasM)):c.spatialReference=a;if(a=c.points&&c.points[0])void 0===c.hasZ&&void 0===c.hasM?(c.hasZ=2<a.length,c.hasM=!1):void 0===c.hasZ?c.hasZ=3<a.length:void 0===c.hasM&&(c.hasM=3<a.length);return c};Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.points;if(!a.length)return null;for(var b=new k,c=this.hasZ,d=this.hasM,e=c?3:2,h=a[0],f=g(Math.min),p=g(Math.max),q=h[0],l=h[1],y=h[0],h=h[1],v,E,N,Z,ia=0,S=a.length;ia<
S;ia++){var O=a[ia],ha=O[0],T=O[1],q=f(q,ha),l=f(l,T),y=p(y,ha),h=p(h,T);c&&2<O.length&&(ha=O[2],v=f(v,ha),N=p(N,ha));d&&O.length>e&&(O=O[e],E=f(E,O),Z=p(Z,O))}b.xmin=q;b.ymin=l;b.xmax=y;b.ymax=h;b.spatialReference=this.spatialReference;c?(b.zmin=v,b.zmax=N):(b.zmin=null,b.zmax=null);d?(b.mmin=E,b.mmax=Z):(b.mmin=null,b.mmax=null);return b},enumerable:!0,configurable:!0});c.prototype.writePoints=function(a,b,c,e){b.points=d.clone(this.points)};c.prototype.addPoint=function(a){this.clearCache();p.updateSupportFromPoint(this,
a);Array.isArray(a)?this.points.push(a):this.points.push(a.toArray());return this};c.prototype.clone=function(){var a={points:d.clone(this.points),spatialReference:this.spatialReference};this.hasZ&&(a.hasZ=!0);this.hasM&&(a.hasM=!0);return new e(a)};c.prototype.getPoint=function(a){if(!this._validateInputs(a))return null;a=this.points[a];var b={x:a[0],y:a[1],spatialReference:this.spatialReference},c=2;this.hasZ&&(b.z=a[2],c=3);this.hasM&&(b.m=a[c]);return new h(b)};c.prototype.removePoint=function(a){if(!this._validateInputs(a))return null;
this.clearCache();return new h(this.points.splice(a,1)[0],this.spatialReference)};c.prototype.setPoint=function(a,b){if(!this._validateInputs(a))return this;this.clearCache();p.updateSupportFromPoint(b);this.points[a]=b.toArray();return this};c.prototype.toJSON=function(a){return this.write(null,a)};c.prototype._validateInputs=function(a){return null!=a&&0<=a&&a<this.points.length};var e;b([l.property({dependsOn:["points","hasZ","hasM","spatialReference"]})],c.prototype,"cache",void 0);b([l.property({dependsOn:["cache"]})],
c.prototype,"extent",null);b([l.property({type:[[Number]],json:{write:{isRequired:!0}}})],c.prototype,"points",void 0);b([l.writer("points")],c.prototype,"writePoints",null);return c=e=b([l.subclass("esri.geometry.Multipoint")],c)}(l.declared(e));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/geometry/support/zmUtils":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.updateSupportFromPoint=function(a,b,c){void 0===c&&(c=!1);var d=a.hasM,
f=a.hasZ;Array.isArray(b)?4!==b.length||d||f?3===b.length&&c&&!d?(f=!0,d=!1):3===b.length&&d&&f&&(f=d=!1):f=d=!0:(f=!f&&b.hasZ&&(!d||b.hasM),d=!d&&b.hasM&&(!f||b.hasZ));a.hasZ=f;a.hasM=d}})},"esri/geometry/Polygon":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/centroid ./support/contains ./support/coordsUtils ./support/intersects ./support/webMercatorUtils ./support/zmUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B){function r(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var A=r(Math.min),u=r(Math.max);c=function(a){function c(){for(var b=0;b<arguments.length;b++);b=a.call(this)||this;b.rings=[];b.type="polygon";return b}f(c,a);e=c;c.createEllipse=function(a){var b=a.center.x,c=a.center.y,d=a.center.z,g=a.center.m,h=a.center.hasZ,f=a.center.hasM,k=a.longAxis,n=a.shortAxis,p=a.numberOfPoints;a=a.view;for(var A=[],q=2*Math.PI/p,l=h?3:2,u=0;u<p;u++){var t=
a.toMap(k*Math.cos(u*q)+b,n*Math.sin(u*q)+c),t=[t.x,t.y];h&&(t[2]=d);f&&(t[l]=g);A.push(t)}A.push(A[0]);return new e({rings:[A],spatialReference:a.spatialReference})};c.createCircle=function(a){return e.createEllipse({center:a.center,longAxis:a.r,shortAxis:a.r,numberOfPoints:a.numberOfPoints,view:a.view})};c.fromExtent=function(a){var b=a.clone().normalize();a=a.spatialReference;var c=!1,d=!1;b.map(function(a){a.hasZ&&(c=!0);a.hasM&&(d=!0)});b={rings:b.map(function(a){var b=[[a.xmin,a.ymin],[a.xmin,
a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(c&&a.hasZ)for(var e=a.zmin+.5*(a.zmax-a.zmin),g=0;g<b.length;g++)b[g].push(e);if(d&&a.hasM)for(a=a.mmin+.5*(a.mmax-a.mmin),g=0;g<b.length;g++)b[g].push(a);return b}),spatialReference:a};c&&(b.hasZ=!0);d&&(b.hasM=!0);return new e(b)};c.prototype.normalizeCtorArgs=function(a,b){var c=null,d,e,g=null;a&&!Array.isArray(a)?(c=a.rings?a.rings:null,b||(a.spatialReference?b=a.spatialReference:a.rings||(b=a)),d=a.hasZ,e=a.hasM):c=a;c=c||[];b=b||p.WGS84;
c.length&&c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(g=c[0]&&c[0][0])void 0===d&&void 0===e?(d=2<g.length,e=!1):void 0===d?d=!e&&3<g.length:void 0===e&&(e=!d&&3<g.length);return{rings:c,spatialReference:b,hasZ:d,hasM:e}};Object.defineProperty(c.prototype,"centroid",{get:function(){var a=g.polygonCentroid(this);if(!a||isNaN(a[0])||isNaN(a[1])||this.hasZ&&isNaN(a[2]))return null;var b=new h;b.x=a[0];b.y=a[1];b.spatialReference=this.spatialReference;this.hasZ&&(b.z=a[2]);return b},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,d=this.rings,e=a?3:2;if(!d.length||!d[0].length)return null;for(var g=d[0][0],h=g[0],g=g[1],f=d[0][0],n=f[0],f=f[1],p=void 0,q=void 0,l=void 0,t=void 0,x=[],y=0;y<d.length;y++){for(var v=d[y],r=v[0],B=r[0],r=r[1],C=v[0],fa=C[0],C=C[1],ba=void 0,ea=void 0,oa=void 0,ra=void 0,sa=0;sa<v.length;sa++){var Ea=v[sa],na=Ea[0],Ca=Ea[1],h=A(h,na),g=A(g,Ca),n=u(n,na),f=u(f,Ca),B=A(B,
na),r=A(r,Ca),fa=u(fa,na),C=u(C,Ca);a&&2<Ea.length&&(na=Ea[2],p=A(p,na),q=u(q,na),ba=A(ba,na),ea=u(ea,na));b&&Ea.length>e&&(ra=Ea[e],l=A(p,ra),t=u(q,ra),oa=A(ba,ra),ra=u(ea,ra))}x.push(new k({xmin:B,ymin:r,zmin:ba,mmin:oa,xmax:fa,ymax:C,zmax:ea,mmax:ra,spatialReference:c}))}d=new k;d.xmin=h;d.ymin=g;d.xmax=n;d.ymax=f;d.spatialReference=c;a&&(d.zmin=p,d.zmax=q);b&&(d.mmin=l,d.mmax=t);d.cache._partwise=1<x.length?x:null;return d},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"isSelfIntersecting",
{get:function(){return y.isSelfIntersecting(this.rings)},enumerable:!0,configurable:!0});c.prototype.writePaths=function(a,b,c,e){b.rings=d.clone(this.rings)};c.prototype.addRing=function(a){if(a){this.clearCache();var b=this.rings,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],e=0,g=a.length;e<g;e++)d[e]=a[e].toArray();b[c]=d}return this}};c.prototype.clone=function(){var a=new e;a.spatialReference=this.spatialReference;a.rings=d.clone(this.rings);a.hasZ=this.hasZ;a.hasM=this.hasM;
return a};c.prototype.contains=function(a){if(!a)return!1;C.canProject(a,this.spatialReference)&&(a=C.project(a,this.spatialReference));return q.polygonContainsPoint(this,a)};c.prototype.isClockwise=function(a){var b=this;a=Array.isArray(a[0])?a:a.map(function(a){return b.hasZ?b.hasM?[a.x,a.y,a.z,a.m]:[a.x,a.y,a.z]:[a.x,a.y]});return v.isClockwise(a,this.hasM,this.hasZ)};c.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.rings[a][b];b=this.hasZ;var c=this.hasM;return b&&
!c?new h(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new h(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new h(a[0],a[1],a[2],a[3],this.spatialReference):new h(a[0],a[1],this.spatialReference)};c.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();B.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a].splice(b,0,c);return this};c.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();
return new h(this.rings[a].splice(b,1)[0],this.spatialReference)};c.prototype.removeRing=function(a){if(!this._validateInputs(a,null))return null;this.clearCache();a=this.rings.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new h(a,b)})};c.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();B.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.rings[a][b]=c;return this};c.prototype._validateInputs=function(a,
b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.rings.length||null!=b&&(a=this.rings[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};c.prototype.toJSON=function(a){return this.write(null,a)};var e;b([l.property({dependsOn:["hasM","hasZ","rings"]})],c.prototype,"cache",void 0);b([l.property({readOnly:!0,dependsOn:["cache"]})],c.prototype,"centroid",null);b([l.property({dependsOn:["cache"],readOnly:!0})],c.prototype,"extent",null);b([l.property({dependsOn:["cache"],readOnly:!0})],c.prototype,
"isSelfIntersecting",null);b([l.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],c.prototype,"rings",void 0);b([l.writer("rings")],c.prototype,"writePaths",null);return c=e=b([l.subclass("esri.geometry.Polygon")],c)}(l.declared(e));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/geometry/support/centroid":function(){define(["require","exports","./coordsUtils"],function(c,a,f){function b(a,b){if(!a||!a.length)return null;for(var c=[],e=[],g=b?[Infinity,-Infinity,Infinity,-Infinity,
Infinity,-Infinity]:[Infinity,-Infinity,Infinity,-Infinity],f=0,k=a.length;f<k;f++){var y=d(a[f],b,g);y&&e.push(y)}e.sort(function(a,c){var d=a[2]-c[2];0===d&&b&&(d=a[4]-c[4]);return d});e.length&&(f=6*e[0][2],c[0]=e[0][0]/f,c[1]=e[0][1]/f,b&&(f=6*e[0][4],c[2]=0!==f?e[0][3]/f:0),c[0]<g[0]||c[0]>g[1]||c[1]<g[2]||c[1]>g[3]||b&&(c[2]<g[4]||c[2]>g[5]))&&(c.length=0);if(!c.length)if(a=a[0]&&a[0].length?l(a[0],b):null)c[0]=a[0],c[1]=a[1],b&&2<a.length&&(c[2]=a[2]);else return null;return c}function d(a,
b,c){for(var d=0,e=0,h=0,f=0,k=0,l=0,B=a.length-1;l<B;l++){var r=a[l],A=r[0],u=r[1],n=r[2],t=a[l+1],x=t[0],D=t[1],G=t[2],F=A*D-x*u,f=f+F,d=d+(A+x)*F,e=e+(u+D)*F;b&&2<r.length&&2<t.length&&(F=A*G-x*n,h+=(n+G)*F,k+=F);A<c[0]&&(c[0]=A);A>c[1]&&(c[1]=A);u<c[2]&&(c[2]=u);u>c[3]&&(c[3]=u);b&&(n<c[4]&&(c[4]=n),n>c[5]&&(c[5]=n))}0<f&&(f*=-1);0<k&&(k*=-1);if(!f)return null;a=[d,e,.5*f];b&&(a[3]=h,a[4]=.5*k);return a}function l(a,b){for(var c=b?[0,0,0]:[0,0],d=b?[0,0,0]:[0,0],e=0,k=0,l=0,y=0,C=0,B=a.length;C<
B-1;C++){var r=a[C],A=a[C+1];if(r&&A){c[0]=r[0];c[1]=r[1];d[0]=A[0];d[1]=A[1];b&&2<r.length&&2<A.length&&(c[2]=r[2],d[2]=A[2]);var u=f.getLength(c,d);u&&(e+=u,r=f.getMidpoint(r,A),k+=u*r[0],l+=u*r[1],b&&2<r.length&&(y+=u*r[2]))}}return 0<e?b?[k/e,l/e,y/e]:[k/e,l/e]:a.length?a[0]:null}Object.defineProperty(a,"__esModule",{value:!0});a.extentCentroid=function(a){return a?a.hasZ?[a.xmax-a.xmin/2,a.ymax-a.ymin/2,a.zmax-a.zmin/2]:[a.xmax-a.xmin/2,a.ymax-a.ymin/2]:null};a.polygonCentroid=function(a){return a?
b(a.rings,a.hasZ):null};a.ringsCentroid=b;a.lineCentroid=l})},"esri/geometry/Polyline":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Extent ./Geometry ./Point ./SpatialReference ./support/zmUtils".split(" "),function(c,a,f,b,d,l,k,e,h,p,g){function q(a){return function(b,c){return null==b?c:null==c?b:a(b,c)}}var v=q(Math.min),y=q(Math.max);c=function(a){function c(){for(var b=0;b<arguments.length;b++);
b=a.call(this)||this;b.paths=[];b.type="polyline";return b}f(c,a);e=c;c.prototype.normalizeCtorArgs=function(a,b){var c=null,d,e,g=null;a&&!Array.isArray(a)?(c=a.paths?a.paths:null,b||(a.spatialReference?b=a.spatialReference:a.paths||(b=a)),d=a.hasZ,e=a.hasM):c=a;c=c||[];b=b||p.WGS84;c.length&&c[0]&&null!=c[0][0]&&"number"===typeof c[0][0]&&(c=[c]);if(g=c[0]&&c[0][0])void 0===d&&void 0===e?(d=2<g.length,e=!1):void 0===d?d=!e&&3<g.length:void 0===e&&(e=!d&&3<g.length);return{paths:c,spatialReference:b,
hasZ:d,hasM:e}};Object.defineProperty(c.prototype,"extent",{get:function(){var a=this.hasZ,b=this.hasM,c=this.spatialReference,d=this.paths,e=a?3:2;if(!d.length||!d[0].length)return null;for(var g=d[0][0],h=g[0],g=g[1],f=d[0][0],p=f[0],f=f[1],q=void 0,l=void 0,r=void 0,B=void 0,C=[],O=0;O<d.length;O++){for(var ha=d[O],T=ha[0],qa=T[0],T=T[1],X=ha[0],M=X[0],X=X[1],aa=void 0,K=void 0,Y=void 0,ca=void 0,fa=0;fa<ha.length;fa++){var ba=ha[fa],ea=ba[0],oa=ba[1],h=v(h,ea),g=v(g,oa),p=y(p,ea),f=y(f,oa),qa=
v(qa,ea),T=v(T,oa),M=y(M,ea),X=y(X,oa);a&&2<ba.length&&(ea=ba[2],q=v(q,ea),l=y(l,ea),aa=v(aa,ea),K=y(K,ea));b&&ba.length>e&&(ca=ba[e],r=v(q,ca),B=y(l,ca),Y=v(aa,ca),ca=y(K,ca))}C.push(new k({xmin:qa,ymin:T,zmin:aa,mmin:Y,xmax:M,ymax:X,zmax:K,mmax:ca,spatialReference:c}))}d=new k;d.xmin=h;d.ymin=g;d.xmax=p;d.ymax=f;d.spatialReference=c;a&&(d.zmin=q,d.zmax=l);b&&(d.mmin=r,d.mmax=B);d.cache._partwise=1<C.length?C:null;return d},enumerable:!0,configurable:!0});c.prototype.writePaths=function(a,b,c,e){b.paths=
d.clone(this.paths)};c.prototype.addPath=function(a){if(a){this.clearCache();var b=this.paths,c=b.length;if(Array.isArray(a[0]))b[c]=a.concat();else{for(var d=[],e=0,g=a.length;e<g;e++)d[e]=a[e].toArray();b[c]=d}return this}};c.prototype.clone=function(){var a=new e;a.spatialReference=this.spatialReference;a.paths=d.clone(this.paths);a.hasZ=this.hasZ;a.hasM=this.hasM;return a};c.prototype.getPoint=function(a,b){if(!this._validateInputs(a,b))return null;a=this.paths[a][b];b=this.hasZ;var c=this.hasM;
return b&&!c?new h(a[0],a[1],a[2],void 0,this.spatialReference):c&&!b?new h(a[0],a[1],void 0,a[2],this.spatialReference):b&&c?new h(a[0],a[1],a[2],a[3],this.spatialReference):new h(a[0],a[1],this.spatialReference)};c.prototype.insertPoint=function(a,b,c){if(!this._validateInputs(a,b,!0))return this;this.clearCache();g.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[a].splice(b,0,c);return this};c.prototype.removePath=function(a){if(!this._validateInputs(a,null))return null;
this.clearCache();a=this.paths.splice(a,1)[0];var b=this.spatialReference;return a.map(function(a){return new h(a,b)})};c.prototype.removePoint=function(a,b){if(!this._validateInputs(a,b))return null;this.clearCache();return new h(this.paths[a].splice(b,1)[0],this.spatialReference)};c.prototype.setPoint=function(a,b,c){if(!this._validateInputs(a,b))return this;this.clearCache();g.updateSupportFromPoint(this,c);Array.isArray(c)||(c=c.toArray());this.paths[a][b]=c;return this};c.prototype._validateInputs=
function(a,b,c){void 0===c&&(c=!1);return null==a||0>a||a>=this.paths.length||null!=b&&(a=this.paths[a],c&&(0>b||b>a.length)||!c&&(0>b||b>=a.length))?!1:!0};c.prototype.toJSON=function(a){return this.write(null,a)};var e;b([l.property({dependsOn:["hasM","hasZ","paths"]})],c.prototype,"cache",void 0);b([l.property({dependsOn:["cache"],readOnly:!0})],c.prototype,"extent",null);b([l.property({type:[[[Number]]],json:{write:{isRequired:!0}}})],c.prototype,"paths",void 0);b([l.writer("paths")],c.prototype,
"writePaths",null);return c=e=b([l.subclass("esri.geometry.Polyline")],c)}(l.declared(e));c.prototype.toJSON.isDefaultToJSON=!0;return c})},"esri/geometry/ScreenPoint":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(c,a,f,b,d,l){return function(a){function c(){for(var b=[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.x=0;b.y=0;b.z=void 0;return b}
f(c,a);d=c;c.prototype.normalizeCtorArgs=function(a,b){return"number"===typeof a?{x:a,y:b}:Array.isArray(a)?{x:a[0],y:a[1]}:a};c.prototype.clone=function(){return new d({x:this.x,y:this.y,z:this.z})};c.prototype.toArray=function(){return null==this.z?[this.x,this.y]:[this.x,this.y,this.z]};var d;b([l.property({type:Number})],c.prototype,"x",void 0);b([l.property({type:Number})],c.prototype,"y",void 0);b([l.property({type:Number})],c.prototype,"z",void 0);return c=d=b([l.subclass("esri.geometry.ScreenPoint")],
c)}(l.declared(d))})},"esri/geometry/support/jsonUtils":function(){define("require exports ../Extent ../Mesh ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(c,a,f,b,d,l,k,e){function h(a){return void 0!==a.xmin&&void 0!==a.ymin&&void 0!==a.xmax&&void 0!==a.ymax}function p(a){return void 0!==a.points}function g(a){return void 0!==a.x&&void 0!==a.y}function q(a){return void 0!==a.paths}function v(a){return void 0!==a.rings}function y(a){return void 0!==a.vertexAttributes}function C(a){if(a){if(g(a))return l.fromJSON(a);
if(q(a))return e.fromJSON(a);if(v(a))return k.fromJSON(a);if(p(a))return d.fromJSON(a);if(h(a))return f.fromJSON(a);if(y(a))return b.fromJSON(a)}return null}Object.defineProperty(a,"__esModule",{value:!0});a.fromJson=function(a){try{throw Error("fromJson is deprecated, use fromJSON instead");}catch(A){console.warn(A.stack)}return C(a)};a.isMultipoint=p;a.isPoint=g;a.isPolyline=q;a.isPolygon=v;a.isMesh=y;a.fromJSON=C;a.getJsonType=function(a){if(a){if(g(a))return"esriGeometryPoint";if(q(a))return"esriGeometryPolyline";
if(v(a))return"esriGeometryPolygon";if(h(a))return"esriGeometryEnvelope";if(p(a))return"esriGeometryMultipoint"}return null};var B={esriGeometryPoint:l,esriGeometryPolyline:e,esriGeometryPolygon:k,esriGeometryEnvelope:f,esriGeometryMultipoint:d};a.getGeometryType=function(a){return a&&B[a]||null}})},"esri/geometry/support/scaleUtils":function(){define("require exports ../../config ../../core/kebabDictionary ../../core/wgs84Constants ./WKIDUnitConversion".split(" "),function(c,a,f,b,d,l){function k(a){return y.fromJSON(a.toLowerCase())||
null}function e(b){return h(b)||a.decDegToMeters}function h(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=v.values[v[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=q.exec(c))&&a[1]&&(d=parseFloat(a[1].split(",")[1]));return d}function p(a){var b,c,d;a&&("object"===typeof a?(b=a.wkid,c=a.wkt):"number"===typeof a?b=a:"string"===typeof a&&(c=a));b?d=v.units[v[b]]:c&&-1!==c.search(/^PROJCS/i)&&(a=q.exec(c))&&a[1]&&(d=(a=/[\\"\\']{1}([^\\"\\']+)/.exec(a[1]))&&
a[1]);return d?k(d):null}function g(b,c){c=e(c);return b/(c*a.inchesPerMeter*f.screenDPI)}Object.defineProperty(a,"__esModule",{value:!0});a.inchesPerMeter=39.37;a.decDegToMeters=d.wgs84Radius*Math.PI/180;var q=/UNIT\[([^\]]+)\]\]$/i,v=l,y=b.strict()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",
yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"});a.unitFromRESTJSON=k;a.unitToRESTJSON=function(a){return y.toJSON(a)||null};a.getMetersPerVerticalUnitForSR=function(a){a=e(a);return 1E5<a?1:a};a.getVerticalUnitStringForSR=function(a){return 1E5<e(a)?"meters":p(a)};a.getMetersPerUnitForSR=e;a.getMetersPerUnit=h;a.getUnitString=p;a.getDefaultUnitSystem=
function(a){if(!a)return null;switch(p(a)){case "feet":case "us-feet":case "clarke-feet":case "clarke-yards":case "clarke-links":case "sears-yards":case "sears-feet":case "sears-chains":case "benoit-1895-b-chains":case "indian-yards":case "indian-1937-yards":case "gold-coast-feet":case "sears-1922-truncated-chains":return"imperial";case "50-kilometers":case "150-kilometers":case "meters":return"metric"}return null};a.getScale=function(b,c){c=c||b.extent;b=b.width;var d=h(c&&c.spatialReference);return c&&
b?c.width/b*(d||a.decDegToMeters)*a.inchesPerMeter*f.screenDPI:0};a.getResolutionForScale=g;a.getExtentForScale=function(a,b){var c=a.extent;a=a.width;b=g(b,c.spatialReference);return c.clone().expand(b*a/c.width)}})},"esri/layers/support/LOD":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../core/accessorSupport/ensureType".split(" "),function(c,a,f,b,d,l,k){return function(a){function c(b){b=
a.call(this,b)||this;b.level=0;b.levelValue=null;b.resolution=0;b.scale=0;return b}f(c,a);d=c;c.prototype.clone=function(){return new d({level:this.level,levelValue:this.levelValue,resolution:this.resolution,scale:this.scale})};var d;b([l.property({type:k.Integer,json:{write:!0}})],c.prototype,"level",void 0);b([l.property({type:String,json:{write:!0}})],c.prototype,"levelValue",void 0);b([l.property({type:Number,json:{write:!0}})],c.prototype,"resolution",void 0);b([l.property({type:Number,json:{write:!0}})],
c.prototype,"scale",void 0);return c=d=b([l.subclass("esri.layers.support.LOD")],c)}(l.declared(d))})},"esri/views/2d/ViewState":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators ../../geometry/Extent ./viewpointUtils ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2".split(" "),function(c,a,f,b,d,l,k,e,h,p,g){var q=[0,0];return function(a){function c(){for(var b=
[],c=0;c<arguments.length;c++)b[c]=arguments[c];b=a.apply(this,b)||this;b.pixelRatio=1;b.size=[0,0];return b}f(c,a);l=c;Object.defineProperty(c.prototype,"center",{get:function(){var a=this.viewpoint.targetGeometry;return g.set(g.create(),a.x,a.y)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"extent",{get:function(){return h.getExtent(new e,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"height",{get:function(){return this.size?this.size[1]:
0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"id",{get:function(){return this._get("id")+1},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"inverseTransform",{get:function(){return p.invert(p.create(),this.transform)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"latitude",{get:function(){return this.viewpoint.targetGeometry.latitude},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"longitude",{get:function(){return this.viewpoint.targetGeometry.longitude},
enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"resolution",{get:function(){return h.getResolution(this.viewpoint)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"rotation",{get:function(){return this.viewpoint.rotation},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"scale",{get:function(){return this.viewpoint.scale},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"screenCenter",{get:function(){return g.scale(g.create(),
this.size,.5)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"spatialReference",{get:function(){return this.viewpoint.targetGeometry.spatialReference},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"transform",{get:function(){return h.getTransform(p.create(),this.viewpoint,this.size,this.pixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"transformNoRotation",{get:function(){return h.getTransformNoRotation(p.create(),this.viewpoint,
this.size,this.pixelRatio)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"clippedExtent",{get:function(){return h.getClippedExtent(new e,this.viewpoint,this.size)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"width",{get:function(){return this.size?this.size[0]:0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"worldScreenWidth",{get:function(){return h.getWorldScreenWidth(this.spatialReference,this.resolution)},enumerable:!0,configurable:!0});
Object.defineProperty(c.prototype,"worldWidth",{get:function(){return h.getWorldWidth(this.spatialReference)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"wrappable",{get:function(){return!!this.spatialReference&&this.spatialReference.isWrappable},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"x",{get:function(){return this.center[0]},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"y",{get:function(){return this.center[1]},enumerable:!0,
configurable:!0});c.prototype.copy=function(a){var b=this.size,c=this.viewpoint;this.viewpoint=null;this._set("size",null);c&&b?(this.viewpoint=h.copy(c,a.viewpoint),this._set("size",g.copy(b,a.size))):(this.viewpoint=a.viewpoint.clone(),this._set("size",[a.size[0],a.size[1]]));this._set("pixelRatio",a.pixelRatio);return this};c.prototype.clone=function(){return new l({viewpoint:this.viewpoint.clone(),size:g.clone(this.size)})};c.prototype.toMap=function(a,b,c){if(Array.isArray(b))return g.transformMat2d(a,
b,this.inverseTransform);q[0]=b;q[1]=c;return g.transformMat2d(a,q,this.inverseTransform)};c.prototype.toScreen=function(a,b,c){if(Array.isArray(b))return g.transformMat2d(a,b,this.transform);q[0]=b;q[1]=c;return g.transformMat2d(a,q,this.transform)};c.prototype.toScreenNoRotation=function(a,b,c){if(Array.isArray(b))return g.transformMat2d(a,b,this.transformNoRotation);q[0]=b;q[1]=c;return g.transformMat2d(a,q,this.transformNoRotation)};c.prototype.pixelSizeAt=function(a){return h.pixelSizeAt(a,this.viewpoint,
this.size)};var l;b([k.property({dependsOn:["viewpoint.targetGeometry.x","viewpoint.targetGeometry.y"]})],c.prototype,"center",null);b([k.property({readOnly:!0,dependsOn:["viewpoint.scale","viewpoint.targetGeometry.x","viewpoint.targetGeometry.y","viewpoint.targetGeometry.spatialReference","size"]})],c.prototype,"extent",null);b([k.property({readOnly:!0,dependsOn:["size"]})],c.prototype,"height",null);b([k.property({value:0,readOnly:!0,dependsOn:["transform"]})],c.prototype,"id",null);b([k.property({readOnly:!0,
dependsOn:["transform"]})],c.prototype,"inverseTransform",null);b([k.property({readOnly:!0,dependsOn:["viewpoint.targetGeometry.latitude"]})],c.prototype,"latitude",null);b([k.property({readOnly:!0,dependsOn:["viewpoint.targetGeometry.longitude"]})],c.prototype,"longitude",null);b([k.property({type:Number,json:{write:!0}})],c.prototype,"pixelRatio",void 0);b([k.property({readOnly:!0,dependsOn:["viewpoint.scale","viewpoint.targetGeometry.spatialReference"]})],c.prototype,"resolution",null);b([k.property({readOnly:!0,
dependsOn:["viewpoint.rotation"]})],c.prototype,"rotation",null);b([k.property({readOnly:!0,dependsOn:["viewpoint.scale"]})],c.prototype,"scale",null);b([k.property({readOnly:!0,dependsOn:["size"]})],c.prototype,"screenCenter",null);b([k.property({json:{write:!0}})],c.prototype,"size",void 0);b([k.property({readOnly:!0,dependsOn:["viewpoint.targetGeometry.spatialReference"]})],c.prototype,"spatialReference",null);b([k.property({readOnly:!0,dependsOn:"viewpoint.rotation viewpoint.scale viewpoint.targetGeometry.x viewpoint.targetGeometry.y viewpoint.targetGeometry.spatialReference size pixelRatio".split(" ")})],
c.prototype,"transform",null);b([k.property({readOnly:!0,dependsOn:"viewpoint.scale viewpoint.targetGeometry.x viewpoint.targetGeometry.y viewpoint.targetGeometry.spatialReference size pixelRatio".split(" ")})],c.prototype,"transformNoRotation",null);b([k.property({type:d,json:{write:!0}})],c.prototype,"viewpoint",void 0);b([k.property({readOnly:!0,dependsOn:"viewpoint.rotation viewpoint.scale viewpoint.targetGeometry.x viewpoint.targetGeometry.y viewpoint.targetGeometry.spatialReference size".split(" ")})],
c.prototype,"clippedExtent",null);b([k.property({readOnly:!0,dependsOn:["size"]})],c.prototype,"width",null);b([k.property({readOnly:!0,dependsOn:["worldWidth","resolution"]})],c.prototype,"worldScreenWidth",null);b([k.property({readOnly:!0,dependsOn:["spatialReference"]})],c.prototype,"worldWidth",null);b([k.property({readOnly:!0,dependsOn:["spatialReference"]})],c.prototype,"wrappable",null);b([k.property({readOnly:!0,dependsOn:["center"]})],c.prototype,"x",null);b([k.property({readOnly:!0,dependsOn:["center"]})],
c.prototype,"y",null);return c=l=b([k.subclass("esri.views.2d.ViewState")],c)}(k.declared(l))})},"esri/Viewpoint":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./Camera ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/support/jsonUtils ./geometry/support/typeUtils".split(" "),function(c,a,f,b,d,l,k,e,h){function p(){return{enabled:!this.camera}}return function(a){function c(b){b=a.call(this)||this;b.rotation=0;b.scale=0;b.targetGeometry=
null;b.camera=null;return b}f(c,a);g=c;c.prototype.castRotation=function(a){a%=360;0>a&&(a+=360);return a};c.prototype.clone=function(){return new g({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry?this.targetGeometry.clone():null,camera:this.camera?this.camera.clone():null})};var g;b([k.property({type:Number,json:{write:!0,origins:{"web-scene":{write:{overridePolicy:p}}}}})],c.prototype,"rotation",void 0);b([k.cast("rotation")],c.prototype,"castRotation",null);b([k.property({type:Number,
json:{write:!0,origins:{"web-scene":{write:{overridePolicy:p}}}}})],c.prototype,"scale",void 0);b([k.property({types:h.types,json:{read:e.fromJSON,write:!0,origins:{"web-scene":{read:e.fromJSON,write:{overridePolicy:p}}}}})],c.prototype,"targetGeometry",void 0);b([k.property({type:d,json:{write:!0}})],c.prototype,"camera",void 0);return c=g=b([k.subclass("esri.Viewpoint")],c)}(k.declared(l))})},"esri/Camera":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators ./geometry/Point ./views/3d/support/mathUtils".split(" "),
function(c,a,f,b,d,l,k,e){return function(a){function c(b,c,d,e){b=a.call(this)||this;b.position=null;b.heading=0;b.tilt=0;b.fov=55;return b}f(c,a);d=c;c.prototype.getDefaults=function(a){if(!a.position)return{position:new k([0,0,0])}};c.prototype.normalizeCtorArgs=function(a,b,c,d){a&&"object"===typeof a&&("x"in a||Array.isArray(a))&&(a={position:a},null!=b&&(a.heading=b),null!=c&&(a.tilt=c),null!=d&&(a.fov=d));return a};c.prototype.equals=function(a){return a?this.tilt===a.tilt&&this.heading===
a.heading&&this.fov===a.fov&&this.position.equals(a.position):!1};c.prototype.clone=function(){return new d({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})};var d;b([l.property({type:k,json:{write:{isRequired:!0}}})],c.prototype,"position",void 0);b([l.property({type:Number,json:{write:{isRequired:!0}}}),l.cast(function(a){return e.cyclicalDeg.normalize(a)})],c.prototype,"heading",void 0);b([l.property({type:Number,json:{write:{isRequired:!0}}}),l.cast(function(a){return e.clamp(a,
-180,180)})],c.prototype,"tilt",void 0);b([l.property({json:{read:!1,write:!1}})],c.prototype,"fov",void 0);return c=d=b([l.subclass("esri.Camera")],c)}(l.declared(d))})},"esri/geometry/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../Extent ../Geometry ../Mesh ../Multipoint ../Point ../Polygon ../Polyline".split(" "),function(c,a,f,b,d,l,k,e,h,p){Object.defineProperty(a,"__esModule",{value:!0});a.types={base:d,key:"type",typeMap:{extent:b,multipoint:k,
point:e,polyline:p,polygon:h,mesh:l}};a.ensureType=f.ensureOneOfType(a.types)})},"esri/views/2d/viewpointUtils":function(){define("require exports ../../Viewpoint ../../core/Error ../../core/promiseUtils ../../core/wgs84Constants ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/scaleUtils ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ../../geometry/support/webMercatorUtils ./libs/gl-matrix/common ./libs/gl-matrix/mat2d ./libs/gl-matrix/vec2".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r){function A(a,b,c,d){return d&&c&&!d.equals(c)&&v.canProject(d,c)&&d.isWebMercator?(d.isWebMercator?(c=b[1],89.99999<c?c=89.99999:-89.99999>c&&(c=-89.99999),c=Math.sin(C.toRadian(c)),a=r.set(a,C.toRadian(b[0])*O,.5*O*Math.log((1+c)/(1-c)))):(c=C.toDegree(b[0]/O),a=r.set(a,c-360*Math.floor((c+180)/360),C.toDegree(.5*Math.PI-2*Math.atan(Math.exp(-1*b[1]/O))))),a):r.copy(a,b)}function u(a){return a.wkid?a:a.spatialReference||p.WGS84}function n(a,b){return b.type?
r.set(a,b.x,b.y):r.copy(a,b)}function t(a,b){return Math.max(a.width/b[0],a.height/b[1])*Z(a.spatialReference)}function x(a,b,c){var d;if(!a)return null;if(Array.isArray(a)&&2===a.length&&"number"===typeof a[0]&&"number"===typeof a[1])return new h(a);if(a.reduce)return a.reduce(function(a,c){return x(c,b,a)},c);a instanceof e?d=a:a.geometry&&(d=a.geometry);if(!d)return null;a="point"===d.type?new k({xmin:d.x,ymin:d.y,xmax:d.x,ymax:d.y,spatialReference:d.spatialReference}):d.extent;if(!a)return null;
d=v.canProject(a,b);if(!a.spatialReference.equals(b)&&d)a=v.project(a,b);else if(!d)return null;return c=c?c.union(a):a.clone()}function D(a,b){if(!a)return new f({targetGeometry:new h,scale:0,rotation:0});var c=b.spatialReference,d=b.size,e=b.viewpoint,g=b.constraints,p=null;"esri.Viewpoint"===a.declaredClass?p=a:a.viewpoint?p=a.viewpoint:a.target&&"esri.Viewpoint"===a.target.declaredClass&&(p=a.target);var l=null;if(p&&p.targetGeometry)l=p.targetGeometry;else if(a instanceof k)l=a;else if(a||a&&
(a.hasOwnProperty("center")||a.hasOwnProperty("extent")||a.hasOwnProperty("target")))l=x(a.center,c)||x(a.extent,c)||x(a.target,c)||x(a,c);!l&&e&&e.targetGeometry?l=e.targetGeometry:!l&&b.extent&&(l=b.extent);var q=u(l);c||(c=u(b.spatialReference||b.extent||l));if(!y.canProject(l,c)&&q&&!q.equals(c))return null;var B=n(r.create(),l.center?l.center:l),q=new h(A(B,B,q,c),c),B=null,B=p&&p.targetGeometry&&"point"===p.targetGeometry.type?p.scale:a.hasOwnProperty("scale")&&a.scale?a.scale:a.hasOwnProperty("zoom")&&
-1!==a.zoom&&g&&g.effectiveLODs?g.zoomToScale(a.zoom):Array.isArray(l)||"point"===l.type||"extent"===l.type&&0===l.width&&0===l.height?b.extent&&v.canProject(b.extent,c)?t(v.project(b.extent,c),d):b.extent?t(b.extent,d):e.scale:v.canProject(l.extent,c)?t(v.project(l.extent,c),d):t(l.extent,d);b=0;p?b=p.rotation:a.hasOwnProperty("rotation")?b=a.rotation:e&&(b=e.rotation);a=new f({targetGeometry:q,scale:B,rotation:b});g&&(a=g.fit(a),g.rotationEnabled||(a.rotation=b));return a}function G(a,b){var c=
a.targetGeometry,d=b.targetGeometry;c.x=d.x;c.y=d.y;c.spatialReference=d.spatialReference;a.scale=b.scale;a.rotation=b.rotation;return a}function F(a,b,c){return c?r.set(a,.5*(b[0]-c.right+c.left),.5*(b[1]-c.bottom+c.top)):r.scale(a,b,.5)}function J(b,c,d,e){a.getTransform(b,c,d,e);return B.invert(b,b)}function E(a,b,c){var d=C.toRadian(b.rotation)||0;b=Math.abs(Math.cos(d));d=Math.abs(Math.sin(d));return r.set(a,Math.round(c[1]*d+c[0]*b),Math.round(c[1]*b+c[0]*d))}function N(a){return a.scale*(1/
(39.37*g.getMetersPerUnitForSR(a.targetGeometry.spatialReference)*96))}function Z(a){return 39.37*g.getMetersPerUnitForSR(a)*96}function ia(a){return a.isWrappable?(a=q.getInfo(a),a.valid[1]-a.valid[0]):0}function S(a,b){return Math.round(ia(a)/b)}Object.defineProperty(a,"__esModule",{value:!0});var O=l.wgs84Radius,ha=180/Math.PI;a.extentToScale=t;a.create=D;a.copy=G;a.getAnchor=F;a.getExtent=function(){var a=r.create();return function(b,c,d){var e=c.targetGeometry;n(a,e);c=.5*N(c);b.xmin=a[0]-c*
d[0];b.ymin=a[1]-c*d[1];b.xmax=a[0]+c*d[0];b.ymax=a[1]+c*d[1];b.spatialReference=e.spatialReference;return b}}();a.setExtent=function(b,c,d,e,g){a.centerAt(b,c,d.center);b.scale=t(d,e);g&&g.constraints&&g.constraints.constrain(b);return b};a.getOuterExtent=function(){var a=r.create(),b=r.create();return function(c,d,e){n(a,d.targetGeometry);E(b,d,e);e=.5*N(d);c.set({xmin:a[0]-e*b[0],ymin:a[1]-e*b[1],xmax:a[0]+e*b[0],ymax:a[1]+e*b[1],spatialReference:d.targetGeometry.spatialReference});return c}}();
a.getClippedExtent=function(){var a=r.create(),b=r.create();return function(c,d,e){var g=N(d),h=d.targetGeometry.spatialReference,f=S(h,g);n(a,d.targetGeometry);E(b,d,e);h.isWrappable&&b[0]>f&&(b[0]=f);d=.5*g;c.set({xmin:a[0]-d*b[0],ymin:a[1]-d*b[1],xmax:a[0]+d*b[0],ymax:a[1]+d*b[1],spatialReference:h});return c}}();a.getOuterSize=E;a.getPaddingScreenTranslation=function(){var a=r.create();return function(b,c,d){return r.sub(b,r.scale(b,c,.5),F(a,c,d))}}();var T=function(){var b=B.create(),c=r.create();
return function(d,e,g,h){var f=N(e);e=C.toRadian(e.rotation)||0;r.set(c,f,f);B.fromScaling(b,c);B.rotate(b,b,e);B.translate(b,b,a.getPaddingScreenTranslation(c,g,h));B.translate(b,b,[0,h.top-h.bottom]);return r.set(d,b[4],b[5])}}();a.getResolution=N;a.getResolutionToScaleFactor=Z;a.getMatrix=function(){var a=r.create(),b=r.create(),c=r.create();return function(d,e,g,h,f,k){r.negate(a,e);r.scale(b,g,.5*k);r.set(c,1/h*k,-1/h*k);B.identity(d);B.translate(d,d,b);f&&B.rotate(d,d,f);B.scale(d,d,c);B.translate(d,
d,a);return d}}();a.getTransform=function(){var b=r.create();return function(c,d,e,g){var h=N(d),f=C.toRadian(d.rotation)||0;n(b,d.targetGeometry);return a.getMatrix(c,b,e,h,f,g)}}();a.getTransformNoRotation=function(){var b=r.create();return function(c,d,e,g){var h=N(d);n(b,d.targetGeometry);return a.getMatrix(c,b,e,h,0,g)}}();a.getWorldWidth=ia;a.getWorldScreenWidth=S;a.createAsync=function(a,c){if(a=D(a,c))return d.resolve(a);a=new b("viewpointUtils-createAsync:different-spatialReference","Target spatialReference cannot be projected and is different from out spatialReference");
return d.reject(a)};a.angleBetween=function(){var a=r.create(),b=r.create(),c=r.create();return function(d,e,g){r.subtract(a,d,e);r.normalize(a,a);r.subtract(b,d,g);r.normalize(b,b);r.cross(c,a,b);d=Math.acos(r.dot(a,b)/(r.length(a)*r.length(b)))*ha;0>c[2]&&(d=-d);isNaN(d)&&(d=0);return d}}();a.addPadding=function(){var a=r.create();return function(b,c,d,e){var g=b.targetGeometry;G(b,c);T(a,c,d,e);g.x+=a[0];g.y+=a[1];return b}}();a.removePadding=function(){var a=r.create();return function(b,c,d,e){var g=
b.targetGeometry;G(b,c);T(a,c,d,e);g.x-=a[0];g.y-=a[1];return b}}();a.centerAt=function(){var a=r.create();return function(b,c,d){G(b,c);c=b.targetGeometry;var e=u(d),g=u(c);n(a,d);A(a,a,e,g);c.x=a[0];c.y=a[1];return b}}();a.pixelSizeAt=function(a,b,c){return N(b)};a.resize=function(){var b=r.create();return function(c,d,e,g,h){h||(h="center");r.sub(b,e,g);r.scale(b,b,.5);e=b[0];g=b[1];switch(h){case "center":r.set(b,0,0);break;case "left":r.set(b,-e,0);break;case "top":r.set(b,0,g);break;case "right":r.set(b,
e,0);break;case "bottom":r.set(b,0,-g);break;case "top-left":r.set(b,-e,g);break;case "bottom-left":r.set(b,-e,-g);break;case "top-right":r.set(b,e,g);break;case "bottom-right":r.set(b,e,-g)}a.translateBy(c,d,b);return c}}();a.rotateBy=function(a,b,c){G(a,b);a.rotation+=c;return a};a.rotateTo=function(a,b,c){G(a,b);a.rotation=c;return a};a.scaleBy=function(){var b=r.create();return function(c,d,e,g,h){G(c,d);isNaN(e)||0===e||(a.toMap(b,g,d,h),c.scale=d.scale*e,a.toScreen(b,b,c,h),a.translateBy(c,
c,r.set(b,b[0]-g[0],g[1]-b[1])));return c}}();a.scaleTo=function(a,b,c){G(a,b);a.scale=c;return a};a.scaleAndRotateBy=function(){var b=r.create();return function(c,d,e,g,h,f){G(c,d);isNaN(e)||0===e||(a.toMap(b,h,d,f),c.scale=d.scale*e,c.rotation+=g,a.toScreen(b,b,c,f),a.translateBy(c,c,r.set(b,b[0]-h[0],h[1]-b[1])));return c}}();a.padAndScaleAndRotateBy=function(){var b=r.create(),c=r.create();return function(d,e,g,h,f,k,n){a.getPaddingScreenTranslation(c,k,n);r.add(b,f,c);return h?a.scaleAndRotateBy(d,
e,g,h,b,k):a.scaleBy(d,e,g,b,k)}}();a.toMap=function(){var a=B.create();return function(b,c,d,e){return r.transformMat2d(b,c,J(a,d,e,1))}}();a.toScreen=function(){var b=B.create();return function(c,d,e,g){return r.transformMat2d(c,d,a.getTransform(b,e,g,1))}}();a.translateBy=function(){var a=r.create(),b=B.create();return function(c,d,e){G(c,d);var g=N(d),h=c.targetGeometry;B.fromRotation(b,C.toRadian(d.rotation)||0);B.scale(b,b,r.fromValues(g,g));r.transformMat2d(a,e,b);h.x+=a[0];h.y+=a[1];return c}}()})},
"esri/views/2d/libs/gl-matrix/common":function(){define([],function(){if(!c)var c=1E-6;if(!a)var a="undefined"!==typeof Float32Array?Float32Array:Array;if(!f)var f=Math.random;var b={GLMAT_EPSILON:c,GLMAT_ARRAY_TYPE:a,GLMAT_RANDOM:f,setMatrixArrayType:function(a){b.GLMAT_ARRAY_TYPE=a}},d=Math.PI/180,l=180/Math.PI;b.toRadian=function(a){return a*d};b.toDegree=function(a){return a*l};b.setMatrixArrayType(Array);return b})},"esri/views/2d/libs/gl-matrix/mat2d":function(){define(["./common"],function(c){var a=
c.GLMAT_ARRAY_TYPE;c={create:function(){var c=new a(6);c[0]=1;c[1]=0;c[2]=0;c[3]=1;c[4]=0;c[5]=0;return c},clone:function(c){var b=new a(6);b[0]=c[0];b[1]=c[1];b[2]=c[2];b[3]=c[3];b[4]=c[4];b[5]=c[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var c=b[0],f=b[1],k=b[2],e=b[3],h=b[4];b=b[5];var p=c*e-f*k;if(!p)return null;p=1/p;a[0]=e*p;a[1]=-f*p;a[2]=
-k*p;a[3]=c*p;a[4]=(k*b-e*h)*p;a[5]=(f*h-c*b)*p;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,c){var d=b[0],f=b[1],e=b[2],h=b[3],p=b[4];b=b[5];var g=c[0],q=c[1],v=c[2],y=c[3],C=c[4];c=c[5];a[0]=d*g+e*q;a[1]=f*g+h*q;a[2]=d*v+e*y;a[3]=f*v+h*y;a[4]=d*C+e*c+p;a[5]=f*C+h*c+b;return a}};c.mul=c.multiply;c.rotate=function(a,b,c){var d=b[0],f=b[1],e=b[2],h=b[3],p=b[4];b=b[5];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+e*g;a[1]=f*c+h*g;a[2]=d*-g+e*c;a[3]=f*-g+h*c;a[4]=p;
a[5]=b;return a};c.scale=function(a,b,c){var d=b[1],f=b[2],e=b[3],h=b[4],p=b[5],g=c[0];c=c[1];a[0]=b[0]*g;a[1]=d*g;a[2]=f*c;a[3]=e*c;a[4]=h;a[5]=p;return a};c.translate=function(a,b,c){var d=b[0],f=b[1],e=b[2],h=b[3],p=b[4];b=b[5];var g=c[0];c=c[1];a[0]=d;a[1]=f;a[2]=e;a[3]=h;a[4]=d*g+e*c+p;a[5]=f*g+h*c+b;return a};c.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;a[4]=0;a[5]=0;return a};c.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=
0;return a};c.fromTranslation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};c.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};c.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};return c})},"esri/views/2d/libs/gl-matrix/vec2":function(){define(["./common"],function(c){var a=c.GLMAT_ARRAY_TYPE,f=c.GLMAT_RANDOM,b={create:function(){var b=new a(2);
b[0]=0;b[1]=0;return b},clone:function(b){var c=new a(2);c[0]=b[0];c[1]=b[1];return c},fromValues:function(b,c){var d=new a(2);d[0]=b;d[1]=c;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};b.sub=b.subtract;b.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};b.mul=b.multiply;b.divide=function(a,b,c){a[0]=
b[0]/c[0];a[1]=b[1]/c[1];return a};b.div=b.divide;b.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};b.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};b.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};b.scaleAndAdd=function(a,b,c,e){a[0]=b[0]+c[0]*e;a[1]=b[1]+c[1]*e;return a};b.distance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)};b.dist=b.distance;b.squaredDistance=function(a,b){var c=b[0]-a[0];a=b[1]-
a[1];return c*c+a*a};b.sqrDist=b.squaredDistance;b.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};b.len=b.length;b.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};b.sqrLen=b.squaredLength;b.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};b.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};b.normalize=function(a,b){var c=b[0],d=b[1],c=c*c+d*d;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};b.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};b.cross=function(a,
b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};b.lerp=function(a,b,c,e){var d=b[0];b=b[1];a[0]=d+e*(c[0]-d);a[1]=b+e*(c[1]-b);return a};b.random=function(a,b){b=b||1;var c=2*f()*Math.PI;a[0]=Math.cos(c)*b;a[1]=Math.sin(c)*b;return a};b.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a};b.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*b+c[5];return a};b.transformMat3=function(a,b,c){var d=b[0];b=b[1];a[0]=
c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};b.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};b.forEach=function(){var a=b.create();return function(b,c,d,h,f,g){c||(c=2);d||(d=0);for(h=h?Math.min(h*c+d,b.length):b.length;d<h;d+=c)a[0]=b[d],a[1]=b[d+1],f(a,a,g),b[d]=a[0],b[d+1]=a[1];return b}}();b.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};return b})},"esri/views/2d/layers/features/controllers":function(){define(["require",
"exports","../../../../core/tsSupport/assignHelper","../../../../core/Error","../../../../core/promiseUtils"],function(c,a,f,b,d){Object.defineProperty(a,"__esModule",{value:!0});a.getControllerConfiguration=function(a){var c=a.source;return"stream"===a.type?d.resolve().then(function(){var b;if(b=a.filter){var c={};b.geometry&&(c.geometry=b.geometry.toJSON());b.where&&(c.where=b.where);b=c}else b=null;return{type:"stream",filter:b,purgeOptions:a.purgeOptions}}):a.capabilities.operations.supportsQuery?
c&&"openPorts"in c?d.resolve().then(function(){return{type:"memory",processing:a.processing&&a.processing.toWorker()||null}}):d.resolve({type:"on-demand",gdbVersion:a.gdbVersion,historicMoment:a.historicMoment&&a.historicMoment.getTime(),processing:a.processing&&a.processing.toWorker()||null}):d.reject(new b("graphicscontroller:query-capability-required","Service requires query capabilities to be used as a feature layer",{layer:a}))};a.createController=function(a,b){return("memory"===a?d.create(function(a){return c(["./controllers/MemoryController"],
a)}):"stream"===a?d.create(function(a){return c(["./controllers/StreamController"],a)}):d.create(function(a){return c(["./controllers/OnDemandController"],a)})).then(function(a){return a.default}).then(function(a){return new a(f({},b.serviceAndViewInfo,{tileStore:b.tileStore,remoteClient:b.remoteClient}))})}})},"esri/views/2d/layers/features/processors":function(){define(["require","exports","../../../../core/tsSupport/assignHelper","../../../../core/promiseUtils"],function(c,a,f,b){Object.defineProperty(a,
"__esModule",{value:!0});a.createProcessor=function(a,l){var d;"heatmap"===a?d=b.create(function(a){return c(["./processors/HeatmapProcessor"],a)}):"symbol"===a&&(d=b.create(function(a){return c(["./processors/SymbolProcessor"],a)}));return d.then(function(a){return a.default}).then(function(a){return new a(f({},l.serviceAndViewInfo,{tileStore:l.tileStore,remoteClient:l.remoteClient}))})}})},"esri/views/2d/layers/features/support/TileStore":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/tsSupport/decorateHelper @dojo/framework/shim/Set ../../../../../core/has ../../../../../core/libs/rbush/rbush ../../../tiling ./Tile ../../../support/Evented ../../../tiling/TileKey".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g){Object.defineProperty(a,"__esModule",{value:!0});var q={added:[],removed:[]},v=new d.default,y=new g(0,0,0,0);c=function(a){function b(b){var c=a.call(this)||this;c._tiles=new Map;c._index=k(9,l("csp-restrictions")?function(a){return{minX:a.bounds[0],minY:a.bounds[1],maxX:a.bounds[2],maxY:a.bounds[3]}}:[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);c.tiles=[];c.tileInfo=b;c._tileInfoView=new e.TileInfoView(b);c.spatialReference=b.spatialReference;return c}f(b,
a);b.prototype.destroy=function(){this._tiles.clear()};b.prototype.has=function(a){return this._tiles.has(a)};b.prototype.get=function(a){return this._tiles.get(a)};b.prototype.findByKey=function(a){return this._tiles.get(a.id)};b.prototype.intersections=function(a,b){var c="string"===typeof a?this.get(a):a;if(!c)return[];var d=b*c.resolution;b=c.bounds[0]-d;a=c.bounds[1]-d;for(var e=c.bounds[2]+d,c=c.bounds[3]+d,d=[],g=0,h=this._index.search({minX:b,minY:a,maxX:e,maxY:c});g<h.length;g++){var f=h[g],
k=f.bounds.slice();k[0]=Math.max(k[0],b);k[1]=Math.max(k[1],a);k[2]=Math.min(k[2],e);k[3]=Math.min(k[3],c);0<k[2]-k[0]&&0<k[3]-k[1]&&d.push({bounds:k,tile:f})}return d};b.prototype.setViewState=function(a){var b=this._tileInfoView.getTileCoverage(a,0);if(b){a=b.spans;var b=b.lodInfo,c=b.level;if(0<a.length)for(var d=0;d<a.length;d++)for(var e=a[d],g=e.row,f=e.colTo,k=e.colFrom;k<=f;k++){var p=y.set(c,g,b.normalizeCol(k),b.getWorldForColumn(k)).id;v.add(p);this.has(p)||(e=new h.default(this._tileInfoView,
p),this._tiles.set(p,e),this._index.insert(e),this.tiles.push(e),q.added.push(e))}for(a=this.tiles.length-1;0<=a;a--)e=this.tiles[a],v.has(e.id)||(this._tiles.delete(e.id),this.tiles.splice(a,1),this._index.remove(e),q.removed.push(e));(q.added.length||q.removed.length)&&this.emit("update",q);v.clear();q.added.length=0;q.removed.length=0}};return b}(p.default);a.default=c})},"@dojo/framework/shim/Set":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,
exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ./support/has ./Symbol".split(" "),c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var f=c("tslib"),b=c("./global"),d=c("./iterator"),l=c("./support/has");c("./Symbol");a.Set=b.default.Set;l.default("es6-set")||(a.Set=(k=function(){function a(a){this._setData=[];this[Symbol.toStringTag]="Set";if(a)if(d.isArrayLike(a))for(var b=0;b<a.length;b++)this.add(a[b]);
else try{for(var b=f.__values(a),c=b.next();!c.done;c=b.next())this.add(c.value)}catch(y){e={error:y}}finally{try{c&&!c.done&&(h=b.return)&&h.call(b)}finally{if(e)throw e.error;}}var e,h}a.prototype.add=function(a){if(this.has(a))return this;this._setData.push(a);return this};a.prototype.clear=function(){this._setData.length=0};a.prototype.delete=function(a){a=this._setData.indexOf(a);if(-1===a)return!1;this._setData.splice(a,1);return!0};a.prototype.entries=function(){return new d.ShimIterator(this._setData.map(function(a){return[a,
a]}))};a.prototype.forEach=function(a,b){for(var c=this.values(),d=c.next();!d.done;)a.call(b,d.value,d.value,this),d=c.next()};a.prototype.has=function(a){return-1<this._setData.indexOf(a)};a.prototype.keys=function(){return new d.ShimIterator(this._setData)};Object.defineProperty(a.prototype,"size",{get:function(){return this._setData.length},enumerable:!0,configurable:!0});a.prototype.values=function(){return new d.ShimIterator(this._setData)};a.prototype[Symbol.iterator]=function(){return new d.ShimIterator(this._setData)};
return a}(),k[Symbol.species]=k,k));a.default=a.Set;var k})},"tslib/tslib":function(){var c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A,u;(function(a){function b(a,b){a!==c&&("function"===typeof Object.create?Object.defineProperty(a,"__esModule",{value:!0}):a.__esModule=!0);return function(c,d){return a[c]=b?b(c,d):d}}var c="object"===typeof global?global:"object"===typeof self?self:"object"===typeof this?this:{};"function"===typeof define&&define.amd?define("tslib",["exports"],function(d){a(b(c,b(d)))}):"object"===
typeof module&&"object"===typeof module.exports?a(b(c,b(module.exports))):a(b(c))})(function(n){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,b){a.__proto__=b}||function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])};c=function(a,b){function c(){this.constructor=a}t(a,b);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)};a=Object.assign||function(a){for(var b,c=1,d=arguments.length;c<d;c++){b=arguments[c];for(var e in b)Object.prototype.hasOwnProperty.call(b,
e)&&(a[e]=b[e])}return a};f=function(a,b){var c={},d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&0>b.indexOf(d)&&(c[d]=a[d]);if(null!=a&&"function"===typeof Object.getOwnPropertySymbols){var e=0;for(d=Object.getOwnPropertySymbols(a);e<d.length;e++)0>b.indexOf(d[e])&&(c[d[e]]=a[d[e]])}return c};b=function(a,b,c,d){var e=arguments.length,g=3>e?b:null===d?d=Object.getOwnPropertyDescriptor(b,c):d,h;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)g=Reflect.decorate(a,b,c,d);
else for(var f=a.length-1;0<=f;f--)if(h=a[f])g=(3>e?h(g):3<e?h(b,c,g):h(b,c))||g;return 3<e&&g&&Object.defineProperty(b,c,g),g};d=function(a,b){return function(c,d){b(c,d,a)}};l=function(a,b){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(a,b)};k=function(a,b,c,d){return new (c||(c=Promise))(function(e,g){function h(a){try{k(d.next(a))}catch(O){g(O)}}function f(a){try{k(d["throw"](a))}catch(O){g(O)}}function k(a){a.done?e(a.value):(new c(function(b){b(a.value)})).then(h,
f)}k((d=d.apply(a,b||[])).next())})};e=function(a,b){function c(a){return function(b){return d([a,b])}}function d(c){if(g)throw new TypeError("Generator is already executing.");for(;e;)try{if(g=1,h&&(f=c[0]&2?h["return"]:c[0]?h["throw"]||((f=h["return"])&&f.call(h),0):h.next)&&!(f=f.call(h,c[1])).done)return f;if(h=0,f)c=[c[0]&2,f.value];switch(c[0]){case 0:case 1:f=c;break;case 4:return e.label++,{value:c[1],done:!1};case 5:e.label++;h=c[1];c=[0];continue;case 7:c=e.ops.pop();e.trys.pop();continue;
default:if(!(f=e.trys,f=0<f.length&&f[f.length-1])&&(6===c[0]||2===c[0])){e=0;continue}if(3===c[0]&&(!f||c[1]>f[0]&&c[1]<f[3]))e.label=c[1];else if(6===c[0]&&e.label<f[1])e.label=f[1],f=c;else if(f&&e.label<f[2])e.label=f[2],e.ops.push(c);else{f[2]&&e.ops.pop();e.trys.pop();continue}}c=b.call(a,e)}catch(O){c=[6,O],h=0}finally{g=f=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}var e={label:0,sent:function(){if(f[0]&1)throw f[1];return f[1]},trys:[],ops:[]},g,h,f,k;return k={next:c(0),
"throw":c(1),"return":c(2)},"function"===typeof Symbol&&(k[Symbol.iterator]=function(){return this}),k};h=function(a,b){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c])};p=function(a){var b="function"===typeof Symbol&&a[Symbol.iterator],c=0;return b?b.call(a):{next:function(){a&&c>=a.length&&(a=void 0);return{value:a&&a[c++],done:!a}}}};g=function(a,b){var c="function"===typeof Symbol&&a[Symbol.iterator];if(!c)return a;a=c.call(a);var d,e=[],g;try{for(;(void 0===b||0<b--)&&!(d=a.next()).done;)e.push(d.value)}catch(N){g=
{error:N}}finally{try{d&&!d.done&&(c=a["return"])&&c.call(a)}finally{if(g)throw g.error;}}return e};q=function(){for(var a=[],b=0;b<arguments.length;b++)a=a.concat(g(arguments[b]));return a};v=function(a){return this instanceof v?(this.v=a,this):new v(a)};y=function(a,b,c){function d(a){k[a]&&(n[a]=function(b){return new Promise(function(c,d){1<p.push([a,b,c,d])||e(a,b)})})}function e(a,b){try{var c=k[a](b);c.value instanceof v?Promise.resolve(c.value.v).then(g,h):f(p[0][2],c)}catch(X){f(p[0][3],
X)}}function g(a){e("next",a)}function h(a){e("throw",a)}function f(a,b){(a(b),p.shift(),p.length)&&e(p[0][0],p[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var k=c.apply(a,b||[]),n,p=[];return n={},d("next"),d("throw"),d("return"),n[Symbol.asyncIterator]=function(){return this},n};C=function(a){function b(b,e){c[b]=a[b]?function(c){return(d=!d)?{value:v(a[b](c)),done:"return"===b}:e?e(c):c}:e}var c,d;return c={},b("next"),b("throw",function(a){throw a;
}),b("return"),c[Symbol.iterator]=function(){return this},c};B=function(a){function b(b){e[b]=a[b]&&function(d){return new Promise(function(e,g){d=a[b](d);c(e,g,d.done,d.value)})}}function c(a,b,c,d){Promise.resolve(d).then(function(b){a({value:b,done:c})},b)}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=a[Symbol.asyncIterator],e;return d?d.call(a):(a="function"===typeof p?p(a):a[Symbol.iterator](),e={},b("next"),b("throw"),b("return"),e[Symbol.asyncIterator]=
function(){return this},e)};r=function(a,b){Object.defineProperty?Object.defineProperty(a,"raw",{value:b}):a.raw=b;return a};A=function(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.hasOwnProperty.call(a,c)&&(b[c]=a[c]);b["default"]=a;return b};u=function(a){return a&&a.__esModule?a:{"default":a}};n("__extends",c);n("__assign",a);n("__rest",f);n("__decorate",b);n("__param",d);n("__metadata",l);n("__awaiter",k);n("__generator",e);n("__exportStar",h);n("__values",p);n("__read",
g);n("__spread",q);n("__await",v);n("__asyncGenerator",y);n("__asyncDelegator",C);n("__asyncValues",B);n("__makeTemplateObject",r);n("__importStar",A);n("__importDefault",u)})},"@dojo/framework/shim/global":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports"],c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){if("undefined"!==
typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global}();a.default=c})},"@dojo/framework/shim/iterator":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports","./Symbol","./string"],c)})(function(c,a){function f(a){return a&&"function"===typeof a[Symbol.iterator]}function b(a){return a&&"number"===
typeof a.length}function d(a){if(f(a))return a[Symbol.iterator]();if(b(a))return new e(a)}Object.defineProperty(a,"__esModule",{value:!0});c("./Symbol");var l=c("./string"),k={done:!0,value:void 0},e=function(){function a(a){this._nextIndex=-1;f(a)?this._nativeIterator=a[Symbol.iterator]():this._list=a}a.prototype.next=function(){return this._nativeIterator?this._nativeIterator.next():this._list?++this._nextIndex<this._list.length?{done:!1,value:this._list[this._nextIndex]}:k:k};a.prototype[Symbol.iterator]=
function(){return this};return a}();a.ShimIterator=e;a.isIterable=f;a.isArrayLike=b;a.get=d;a.forOf=function(a,c,e){function g(){h=!0}var h=!1;if(b(a)&&"string"===typeof a)for(var f=a.length,k=0;k<f;++k){var p=a[k];if(k+1<f){var r=p.charCodeAt(0);r>=l.HIGH_SURROGATE_MIN&&r<=l.HIGH_SURROGATE_MAX&&(p+=a[++k])}c.call(e,p,a,g);if(h)break}else if(f=d(a))for(k=f.next();!k.done;){c.call(e,k.value,a,g);if(h)break;k=f.next()}}})},"@dojo/framework/shim/Symbol":function(){(function(c){"object"===typeof module&&
"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports","./support/has","./global","./support/util"],c)})(function(c,a){function f(a){return a&&("symbol"===typeof a||"Symbol"===a["@@toStringTag"])||!1}Object.defineProperty(a,"__esModule",{value:!0});var b=c("./support/has"),d=c("./global"),l=c("./support/util");a.Symbol=d.default.Symbol;if(!b.default("es6-symbol")){var k=function(a){if(!f(a))throw new TypeError(a+
" is not a symbol");return a},e=Object.defineProperties,h=Object.defineProperty,p=Object.create,g=Object.prototype,q={},v=function(){var a=p(null);return function(b){for(var c=0,d;a[String(b)+(c||"")];)++c;b+=String(c||"");a[b]=!0;d="@@"+b;Object.getOwnPropertyDescriptor(g,d)||h(g,d,{set:function(a){h(this,d,l.getValueDescriptor(a))}});return d}}(),y=function B(a){if(this instanceof y)throw new TypeError("TypeError: Symbol is not a constructor");return B(a)};a.Symbol=d.default.Symbol=function r(a){if(this instanceof
r)throw new TypeError("TypeError: Symbol is not a constructor");var b=Object.create(y.prototype);a=void 0===a?"":String(a);return e(b,{__description__:l.getValueDescriptor(a),__name__:l.getValueDescriptor(v(a))})};h(a.Symbol,"for",l.getValueDescriptor(function(b){return q[b]?q[b]:q[b]=a.Symbol(String(b))}));e(a.Symbol,{keyFor:l.getValueDescriptor(function(a){var b;k(a);for(b in q)if(q[b]===a)return b}),hasInstance:l.getValueDescriptor(a.Symbol.for("hasInstance"),!1,!1),isConcatSpreadable:l.getValueDescriptor(a.Symbol.for("isConcatSpreadable"),
!1,!1),iterator:l.getValueDescriptor(a.Symbol.for("iterator"),!1,!1),match:l.getValueDescriptor(a.Symbol.for("match"),!1,!1),observable:l.getValueDescriptor(a.Symbol.for("observable"),!1,!1),replace:l.getValueDescriptor(a.Symbol.for("replace"),!1,!1),search:l.getValueDescriptor(a.Symbol.for("search"),!1,!1),species:l.getValueDescriptor(a.Symbol.for("species"),!1,!1),split:l.getValueDescriptor(a.Symbol.for("split"),!1,!1),toPrimitive:l.getValueDescriptor(a.Symbol.for("toPrimitive"),!1,!1),toStringTag:l.getValueDescriptor(a.Symbol.for("toStringTag"),
!1,!1),unscopables:l.getValueDescriptor(a.Symbol.for("unscopables"),!1,!1)});e(y.prototype,{constructor:l.getValueDescriptor(a.Symbol),toString:l.getValueDescriptor(function(){return this.__name__},!1,!1)});e(a.Symbol.prototype,{toString:l.getValueDescriptor(function(){return"Symbol ("+k(this).__description__+")"}),valueOf:l.getValueDescriptor(function(){return k(this)})});h(a.Symbol.prototype,a.Symbol.toPrimitive,l.getValueDescriptor(function(){return k(this)}));h(a.Symbol.prototype,a.Symbol.toStringTag,
l.getValueDescriptor("Symbol",!1,!1,!0));h(y.prototype,a.Symbol.toPrimitive,l.getValueDescriptor(a.Symbol.prototype[a.Symbol.toPrimitive],!1,!1,!0));h(y.prototype,a.Symbol.toStringTag,l.getValueDescriptor(a.Symbol.prototype[a.Symbol.toStringTag],!1,!1,!0))}a.isSymbol=f;"hasInstance isConcatSpreadable iterator species replace search split match toPrimitive toStringTag unscopables observable".split(" ").forEach(function(b){a.Symbol[b]||Object.defineProperty(a.Symbol,b,l.getValueDescriptor(a.Symbol.for(b),
!1,!1))});a.default=a.Symbol})},"@dojo/framework/shim/support/has":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define("require exports tslib ../../has/has ../global ../../has/has".split(" "),c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var f=c("tslib"),b=c("../../has/has"),d=c("../global");a.default=b.default;f.__exportStar(c("../../has/has"),
a);b.add("es6-array",function(){return["from","of"].every(function(a){return a in d.default.Array})&&["findIndex","find","copyWithin"].every(function(a){return a in d.default.Array.prototype})},!0);b.add("es6-array-fill",function(){return"fill"in d.default.Array.prototype?1===[1].fill(9,Number.POSITIVE_INFINITY)[0]:!1},!0);b.add("es7-array",function(){return"includes"in d.default.Array.prototype},!0);b.add("es6-map",function(){if("function"===typeof d.default.Map)try{var a=new d.default.Map([[0,1]]);
return a.has(0)&&"function"===typeof a.keys&&b.default("es6-symbol")&&"function"===typeof a.values&&"function"===typeof a.entries}catch(e){}return!1},!0);b.add("es6-math",function(){return"clz32 sign log10 log2 log1p expm1 cosh sinh tanh acosh asinh atanh trunc fround cbrt hypot".split(" ").every(function(a){return"function"===typeof d.default.Math[a]})},!0);b.add("es6-math-imul",function(){return"imul"in d.default.Math?-5===Math.imul(4294967295,5):!1},!0);b.add("es6-object",function(){return b.default("es6-symbol")&&
["assign","is","getOwnPropertySymbols","setPrototypeOf"].every(function(a){return"function"===typeof d.default.Object[a]})},!0);b.add("es2017-object",function(){return["values","entries","getOwnPropertyDescriptors"].every(function(a){return"function"===typeof d.default.Object[a]})},!0);b.add("es-observable",function(){return"undefined"!==typeof d.default.Observable},!0);b.add("es6-promise",function(){return"undefined"!==typeof d.default.Promise&&b.default("es6-symbol")},!0);b.add("es6-set",function(){if("function"===
typeof d.default.Set){var a=new d.default.Set([1]);return a.has(1)&&"keys"in a&&"function"===typeof a.keys&&b.default("es6-symbol")}return!1},!0);b.add("es6-string",function(){return["fromCodePoint"].every(function(a){return"function"===typeof d.default.String[a]})&&"codePointAt normalize repeat startsWith endsWith includes".split(" ").every(function(a){return"function"===typeof d.default.String.prototype[a]})},!0);b.add("es6-string-raw",function(){function a(a){for(var b=1;b<arguments.length;b++);
b=f.__spread(a);b.raw=a.raw;return b}if("raw"in d.default.String){var b=a(l||(l=f.__makeTemplateObject(["a\n",""],["a\\n",""])),1);b.raw=["a\\n"];return"a:\\n"===d.default.String.raw(b,42)}return!1},!0);b.add("es2017-string",function(){return["padStart","padEnd"].every(function(a){return"function"===typeof d.default.String.prototype[a]})},!0);b.add("es6-symbol",function(){return"undefined"!==typeof d.default.Symbol&&"symbol"===typeof Symbol()},!0);b.add("es6-weakmap",function(){if("undefined"!==typeof d.default.WeakMap){var a=
{},c={},h=new d.default.WeakMap([[a,1]]);Object.freeze(a);return 1===h.get(a)&&h.set(c,2)===h&&b.default("es6-symbol")}return!1},!0);b.add("microtasks",function(){return b.default("es6-promise")||b.default("host-node")||b.default("dom-mutationobserver")},!0);b.add("postmessage",function(){return"undefined"!==typeof d.default.window&&"function"===typeof d.default.postMessage},!0);b.add("raf",function(){return"function"===typeof d.default.requestAnimationFrame},!0);b.add("setimmediate",function(){return"undefined"!==
typeof d.default.setImmediate},!0);b.add("dom-mutationobserver",function(){if(b.default("host-browser")&&(d.default.MutationObserver||d.default.WebKitMutationObserver)){var a=document.createElement("div"),c=new (d.default.MutationObserver||d.default.WebKitMutationObserver)(function(){});c.observe(a,{attributes:!0});a.style.setProperty("display","block");return!!c.takeRecords().length}return!1},!0);b.add("dom-webanimation",function(){return b.default("host-browser")&&void 0!==d.default.Animation&&
void 0!==d.default.KeyframeEffect},!0);b.add("abort-controller",function(){return"undefined"!==typeof d.default.AbortController});b.add("abort-signal",function(){return"undefined"!==typeof d.default.AbortSignal});var l})},"@dojo/framework/has/has":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports"],c)})(function(c,a){function f(b){b=b.toLowerCase();
return!!(b in e||b in a.testCache||a.testFunctions[b])}function b(b,c,d){void 0===d&&(d=!1);var g=b.toLowerCase();if(f(g)&&!d&&!(g in e))throw new TypeError('Feature "'+b+'" exists and overwrite not true.');"function"===typeof c?a.testFunctions[g]=c:c&&c.then?l[b]=c.then(function(c){a.testCache[b]=c;delete l[b]},function(){delete l[b]}):(a.testCache[g]=c,delete a.testFunctions[g])}function d(b){var c=b.toLowerCase();if(c in e)b=e[c];else if(a.testFunctions[c])b=a.testCache[c]=a.testFunctions[c].call(null),
delete a.testFunctions[c];else if(c in a.testCache)b=a.testCache[c];else{if(b in l)return!1;throw new TypeError('Attempt to detect unregistered has feature "'+b+'"');}return b}Object.defineProperty(a,"__esModule",{value:!0});a.testCache={};a.testFunctions={};var l={};c="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};var k=(c.DojoHasEnvironment||{}).staticFeatures;"DojoHasEnvironment"in c&&delete c.DojoHasEnvironment;var e=k?"function"===typeof k?
k.apply(c):k:{};a.load=function(a,b,c,d){a?b([a],c):c()};a.normalize=function(a,b){function c(a){var b=e[h++];if(":"===b)return null;if("?"===e[h++]){if(!a&&d(b))return c();c(!0);return c(a)}return b}var e=a.match(/[\?:]|[^:\?]*/g)||[],h=0;return(a=c())&&b(a)};a.exists=f;a.add=b;a.default=d;b("debug",!0);b("host-browser","undefined"!==typeof document&&"undefined"!==typeof location);b("host-node",function(){if("object"===typeof process&&process.versions&&process.versions.node)return process.versions.node})})},
"@dojo/framework/shim/support/util":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports"],c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.getValueDescriptor=function(a,b,c,l){void 0===b&&(b=!1);void 0===c&&(c=!0);void 0===l&&(l=!0);return{value:a,enumerable:b,writable:c,configurable:l}};a.wrapNative=function(a){return function(b){for(var c=
[],f=1;f<arguments.length;f++)c[f-1]=arguments[f];return a.apply(b,c)}}})},"@dojo/framework/shim/string":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./support/has ./support/util".split(" "),c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var f=c("tslib"),b=c("./global"),d=c("./support/has");c=c("./support/util");
a.HIGH_SURROGATE_MIN=55296;a.HIGH_SURROGATE_MAX=56319;a.LOW_SURROGATE_MIN=56320;a.LOW_SURROGATE_MAX=57343;if(d.default("es6-string")&&d.default("es6-string-raw"))a.fromCodePoint=b.default.String.fromCodePoint,a.raw=b.default.String.raw,a.codePointAt=c.wrapNative(b.default.String.prototype.codePointAt),a.endsWith=c.wrapNative(b.default.String.prototype.endsWith),a.includes=c.wrapNative(b.default.String.prototype.includes),a.normalize=c.wrapNative(b.default.String.prototype.normalize),a.repeat=c.wrapNative(b.default.String.prototype.repeat),
a.startsWith=c.wrapNative(b.default.String.prototype.startsWith);else{var l=function(a,b,c,d,g){void 0===g&&(g=!1);if(null==b)throw new TypeError("string."+a+" requires a valid string to search against.");a=b.length;return[b,String(c),Math.min(Math.max(d!==d?g?a:0:d,0),a)]};a.fromCodePoint=function(){for(var b=0;b<arguments.length;b++);b=arguments.length;if(!b)return"";for(var c=String.fromCharCode,d=[],f=-1,g="";++f<b;){var q=Number(arguments[f]);if(!(isFinite(q)&&Math.floor(q)===q&&0<=q&&1114111>=
q))throw RangeError("string.fromCodePoint: Invalid code point "+q);65535>=q?d.push(q):(q-=65536,d.push((q>>10)+a.HIGH_SURROGATE_MIN,q%1024+a.LOW_SURROGATE_MIN));if(f+1===b||16384<d.length)g+=c.apply(null,d),d.length=0}return g};a.raw=function(a){for(var b=[],c=1;c<arguments.length;c++)b[c-1]=arguments[c];var c=a.raw,d="",g=b.length;if(null==a||null==a.raw)throw new TypeError("string.raw requires a valid callSite object with a raw value");for(var f=0,k=c.length;f<k;f++)d+=c[f]+(f<g&&f<k-1?b[f]:"");
return d};a.codePointAt=function(b,c){void 0===c&&(c=0);if(null==b)throw new TypeError("string.codePointAt requries a valid string.");var d=b.length;c!==c&&(c=0);if(!(0>c||c>=d)){var e=b.charCodeAt(c);return e>=a.HIGH_SURROGATE_MIN&&e<=a.HIGH_SURROGATE_MAX&&d>c+1&&(b=b.charCodeAt(c+1),b>=a.LOW_SURROGATE_MIN&&b<=a.LOW_SURROGATE_MAX)?1024*(e-a.HIGH_SURROGATE_MIN)+b-a.LOW_SURROGATE_MIN+65536:e}};a.endsWith=function(a,b,c){null==c&&(c=a.length);c=f.__read(l("endsWith",a,b,c,!0),3);a=c[0];b=c[1];c=c[2];
var d=c-b.length;return 0>d?!1:a.slice(d,c)===b};a.includes=function(a,b,c){void 0===c&&(c=0);c=f.__read(l("includes",a,b,c),3);a=c[0];b=c[1];c=c[2];return-1!==a.indexOf(b,c)};a.repeat=function(a,b){void 0===b&&(b=0);if(null==a)throw new TypeError("string.repeat requires a valid string.");b!==b&&(b=0);if(0>b||Infinity===b)throw new RangeError("string.repeat requires a non-negative finite count.");for(var c="";b;)b%2&&(c+=a),1<b&&(a+=a),b>>=1;return c};a.startsWith=function(a,b,c){void 0===c&&(c=0);
b=String(b);c=f.__read(l("startsWith",a,b,c),3);a=c[0];b=c[1];c=c[2];var d=c+b.length;return d>a.length?!1:a.slice(c,d)===b}}d.default("es2017-string")?(a.padEnd=c.wrapNative(b.default.String.prototype.padEnd),a.padStart=c.wrapNative(b.default.String.prototype.padStart)):(a.padEnd=function(b,c,d){void 0===d&&(d=" ");if(null===b||void 0===b)throw new TypeError("string.repeat requires a valid string.");if(Infinity===c)throw new RangeError("string.padEnd requires a non-negative finite count.");if(null===
c||void 0===c||0>c)c=0;b=String(b);c-=b.length;0<c&&(b+=a.repeat(d,Math.floor(c/d.length))+d.slice(0,c%d.length));return b},a.padStart=function(b,c,d){void 0===d&&(d=" ");if(null===b||void 0===b)throw new TypeError("string.repeat requires a valid string.");if(Infinity===c)throw new RangeError("string.padStart requires a non-negative finite count.");if(null===c||void 0===c||0>c)c=0;b=String(b);c-=b.length;0<c&&(b=a.repeat(d,Math.floor(c/d.length))+d.slice(0,c%d.length)+b);return b})})},"esri/core/libs/rbush/rbush":function(){define(["../quickselect/quickselect"],
function(c){function a(b,c){if(!(this instanceof a))return new a(b,c);this._maxEntries=Math.max(4,b||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));c&&("function"===typeof c?this.toBBox=c:this._initFormat(c));this.clear()}function f(a,c){b(a,0,a.children.length,c,a)}function b(a,b,c,e,g){g||(g=q(null));g.minX=Infinity;g.minY=Infinity;g.maxX=-Infinity;g.maxY=-Infinity;for(var f;b<c;b++)f=a.children[b],d(g,a.leaf?e(f):f);return g}function d(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=
Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,b.maxY);return a}function l(a,b){return a.minX-b.minX}function k(a,b){return a.minY-b.minY}function e(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function h(a){return a.maxX-a.minX+(a.maxY-a.minY)}function p(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function g(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function q(a){return{children:a,height:1,leaf:!0,minX:Infinity,
minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function v(a,b,d,e,g){for(var f=[b,d],h;f.length;)d=f.pop(),b=f.pop(),d-b<=e||(h=b+Math.ceil((d-b)/e/2)*e,c(a,h,b,d,g),f.push(b,h,h,d))}a.prototype={all:function(){return this._all(this.data,[])},search:function(a){var b=this.data,c=[],d=this.toBBox;if(!g(a,b))return c;for(var e=[],f,h,k,q;b;){f=0;for(h=b.children.length;f<h;f++)k=b.children[f],q=b.leaf?d(k):k,g(a,q)&&(b.leaf?c.push(k):p(a,q)?this._all(k,c):e.push(k));b=e.pop()}return c},collides:function(a){var b=
this.data,c=this.toBBox;if(!g(a,b))return!1;for(var d=[],e,f,h,k;b;){e=0;for(f=b.children.length;e<f;e++)if(h=b.children[e],k=b.leaf?c(h):h,g(a,k)){if(b.leaf||p(a,k))return!0;d.push(h)}b=d.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this._minEntries){for(var b=0,c=a.length;b<c;b++)this.insert(a[b]);return this}a=this._build(a.slice(),0,a.length-1,0);this.data.children.length?this.data.height===a.height?this._splitRoot(this.data,a):(this.data.height<a.height&&(b=this.data,
this.data=a,a=b),this._insert(a,this.data.height-a.height-1,!0)):this.data=a;return this},insert:function(a){a&&this._insert(a,this.data.height-1);return this},clear:function(){this.data=q([]);return this},remove:function(a,b){if(!a)return this;for(var c=this.data,d=this.toBBox(a),e=[],g=[],f,h,k,q;c||e.length;){c||(c=e.pop(),h=e[e.length-1],f=g.pop(),q=!0);if(c.leaf){a:{k=a;var l=c.children,v=b;if(v){for(var y=0;y<l.length;y++)if(v(k,l[y])){k=y;break a}k=-1}else k=l.indexOf(k)}if(-1!==k){c.children.splice(k,
1);e.push(c);this._condense(e);break}}q||c.leaf||!p(c,d)?h?(f++,c=h.children[f],q=!1):c=null:(e.push(c),g.push(f),f=0,h=c,c=c.children[0])}return this},toBBox:function(a){return a},compareMinX:l,compareMinY:k,toJSON:function(){return this.data},fromJSON:function(a){this.data=a;return this},_all:function(a,b){for(var c=[];a;)a.leaf?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},_build:function(a,b,c,d){var e=c-b+1,g=this._maxEntries,h;if(e<=g)return h=q(a.slice(b,c+1)),f(h,
this.toBBox),h;d||(d=Math.ceil(Math.log(e)/Math.log(g)),g=Math.ceil(e/Math.pow(g,d-1)));h=q([]);h.leaf=!1;h.height=d;var e=Math.ceil(e/g),g=e*Math.ceil(Math.sqrt(g)),k,p,l;for(v(a,b,c,g,this.compareMinX);b<=c;b+=g)for(p=Math.min(b+g-1,c),v(a,b,p,e,this.compareMinY),k=b;k<=p;k+=e)l=Math.min(k+e-1,p),h.children.push(this._build(a,k,l,d-1));f(h,this.toBBox);return h},_chooseSubtree:function(a,b,c,d){for(var g,f,h,k,p,q,l,v;;){d.push(b);if(b.leaf||d.length-1===c)break;l=v=Infinity;g=0;for(f=b.children.length;g<
f;g++)h=b.children[g],p=e(h),q=(Math.max(h.maxX,a.maxX)-Math.min(h.minX,a.minX))*(Math.max(h.maxY,a.maxY)-Math.min(h.minY,a.minY))-p,q<v?(v=q,l=p<l?p:l,k=h):q===v&&p<l&&(l=p,k=h);b=k||b.children[0]}return b},_insert:function(a,b,c){var e=this.toBBox;c=c?a:e(a);var e=[],g=this._chooseSubtree(c,this.data,b,e);g.children.push(a);for(d(g,c);0<=b;)if(e[b].children.length>this._maxEntries)this._split(e,b),b--;else break;this._adjustParentBBoxes(c,e,b)},_split:function(a,b){var c=a[b],d=c.children.length,
e=this._minEntries;this._chooseSplitAxis(c,e,d);d=this._chooseSplitIndex(c,e,d);d=q(c.children.splice(d,c.children.length-d));d.height=c.height;d.leaf=c.leaf;f(c,this.toBBox);f(d,this.toBBox);b?a[b-1].children.push(d):this._splitRoot(c,d)},_splitRoot:function(a,b){this.data=q([a,b]);this.data.height=a.height+1;this.data.leaf=!1;f(this.data,this.toBBox)},_chooseSplitIndex:function(a,c,d){var g,f,h,n,k,p,q;k=p=Infinity;for(g=c;g<=d-c;g++)f=b(a,0,g,this.toBBox),h=b(a,g,d,this.toBBox),n=Math.max(0,Math.min(f.maxX,
h.maxX)-Math.max(f.minX,h.minX))*Math.max(0,Math.min(f.maxY,h.maxY)-Math.max(f.minY,h.minY)),f=e(f)+e(h),n<k?(k=n,q=g,p=f<p?f:p):n===k&&f<p&&(p=f,q=g);return q},_chooseSplitAxis:function(a,b,c){var d=a.leaf?this.compareMinX:l,e=a.leaf?this.compareMinY:k,g=this._allDistMargin(a,b,c,d);b=this._allDistMargin(a,b,c,e);g<b&&a.children.sort(d)},_allDistMargin:function(a,c,e,g){a.children.sort(g);g=this.toBBox;var f=b(a,0,c,g),k=b(a,e-c,e,g),n=h(f)+h(k),p,q;for(p=c;p<e-c;p++)q=a.children[p],d(f,a.leaf?g(q):
q),n+=h(f);for(p=e-c-1;p>=c;p--)q=a.children[p],d(k,a.leaf?g(q):q),n+=h(k);return n},_adjustParentBBoxes:function(a,b,c){for(;0<=c;c--)d(b[c],a)},_condense:function(a){for(var b=a.length-1,c;0<=b;b--)0===a[b].children.length?0<b?(c=a[b-1].children,c.splice(c.indexOf(a[b]),1)):this.clear():f(a[b],this.toBBox)},_initFormat:function(a){var b=["return a"," - b",";"];this.compareMinX=new Function("a","b",b.join(a[0]));this.compareMinY=new Function("a","b",b.join(a[1]));this.toBBox=new Function("a","return {minX: a"+
a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};return a})},"esri/core/libs/quickselect/quickselect":function(){define([],function(){function c(b,d,f,k,e){for(;k>f;){if(600<k-f){var h=k-f+1,p=d-f+1,g=Math.log(h),q=.5*Math.exp(2*g/3),g=.5*Math.sqrt(g*q*(h-q)/h)*(0>p-h/2?-1:1);c(b,d,Math.max(f,Math.floor(d-p*q/h+g)),Math.min(k,Math.floor(d+(h-p)*q/h+g)),e)}h=b[d];p=f;q=k;a(b,f,d);for(0<e(b[k],h)&&a(b,f,k);p<q;){a(b,p,q);p++;for(q--;0>e(b[p],h);)p++;for(;0<e(b[q],h);)q--}0===e(b[f],h)?
a(b,f,q):(q++,a(b,q,k));q<=d&&(f=q+1);d<=q&&(k=q-1)}}function a(a,c,f){var b=a[c];a[c]=a[f];a[f]=b}function f(a,c){return a<c?-1:a>c?1:0}return function(a,d,l,k,e){c(a,d,l||0,k||a.length-1,e||f)}})},"esri/views/2d/tiling":function(){define("require exports ./tiling/TileInfoView ./tiling/TileKey ./tiling/TileQueue ./tiling/TileStrategy".split(" "),function(c,a,f,b,d,l){Object.defineProperty(a,"__esModule",{value:!0});a.TileInfoView=f;a.TileKey=b;a.TileQueue=d;a.TileStrategy=l})},"esri/views/2d/tiling/TileInfoView":function(){define("require exports ../../../geometry/support/spatialReferenceUtils ./LODInfo ./TileCoverage ./TileKey ./TileSpan".split(" "),
function(c,a,f,b,d,l,k){var e=new l("0/0/0/0"),h=function(){function a(a,b,c,d,e,g,f,h){this.x=a;this.ymin=b;this.ymax=c;this.invM=d;this.leftAdjust=e;this.rightAdjust=g;this.leftBound=f;this.rightBound=h}a.create=function(b,c){var d;b[1]>c[1]&&(d=[c,b],b=d[0],c=d[1]);d=b[0];b=b[1];var e=c[0];c=c[1];var g=e-d,f=c-b,f=0!==f?g/f:0,h=(Math.ceil(b)-b)*f,k=(Math.floor(b)-b)*f;return new a(d,Math.floor(b),Math.ceil(c),f,0>g?h:k,0>g?k:h,0>g?e:d,0>g?d:e)};a.prototype.incrRow=function(){this.x+=this.invM};
a.prototype.getLeftCol=function(){return Math.max(this.x+this.leftAdjust,this.leftBound)};a.prototype.getRightCol=function(){return Math.min(this.x+this.rightAdjust,this.rightBound)};return a}(),p=[[0,0],[0,0],[0,0],[0,0]];return function(){function a(a,c){var d=this;this.tileInfo=a;this.fullExtent=c;this.scales=[];this._lodInfos=null;this._infoByScale={};this._infoByLevel={};var e=a.lods.slice();e.sort(function(a,b){return b.scale-a.scale});var g=this._lodInfos=e.map(function(d){return b.create(a,
d,c)});e.forEach(function(a,b){d._infoByLevel[a.level]=g[b];d._infoByScale[a.scale]=g[b];d.scales[b]=a.scale},this);this._wrap=a.isWrappable}a.prototype.getLODInfoAt=function(a){return this._infoByLevel[a.level]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);e.set(b);return(b=this._infoByLevel[e.level])?b.getTileBounds(a,e,c):a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);e.set(b);return(b=this._infoByLevel[e.level])?b.getTileCoords(a,e,c):a};a.prototype.getTileCoverage=
function(a,b){void 0===b&&(b=192);var c=this.getClosestInfoForScale(a.scale),e=d.pool.acquire(c),g=this._wrap,f;f=Infinity;var q=-Infinity,l,n,t=e.spans;p[0][0]=p[0][1]=p[1][1]=p[3][0]=-b;p[1][0]=p[2][0]=a.size[0]+b;p[2][1]=p[3][1]=a.size[1]+b;for(b=0;b<p.length;b++){var x=p[b];a.toMap(x,x);x[0]=c.getColumnForX(x[0]);x[1]=c.getRowForY(x[1])}a=[];x=3;for(b=0;4>b;b++){if(p[b][1]!==p[x][1]){var v=h.create(p[b],p[x]);f=Math.min(v.ymin,f);q=Math.max(v.ymax,q);void 0===a[v.ymin]&&(a[v.ymin]=[]);a[v.ymin].push(v)}x=
b}if(null==f||null==q||100<q-f)return null;for(x=[];f<q;){null!=a[f]&&(x=x.concat(a[f]));l=Infinity;n=-Infinity;for(b=x.length-1;0<=b;b--)v=x[b],l=Math.min(l,v.getLeftCol()),n=Math.max(n,v.getRightCol());l=Math.floor(l);n=Math.floor(n);if(f>=c.first[1]&&f<=c.last[1])if(g)if(c.size[0]<c.worldSize[0])for(v=Math.floor(n/c.worldSize[0]),b=Math.floor(l/c.worldSize[0]);b<=v;b++)t.push(new k(f,Math.max(c.getFirstColumnForWorld(b),l),Math.min(c.getLastColumnForWorld(b),n)));else t.push(new k(f,l,n));else l>
c.last[0]||n<c.first[0]||(l=Math.max(l,c.first[0]),n=Math.min(n,c.last[0]),t.push(new k(f,l,n)));f+=1;for(b=x.length-1;0<=b;b--)v=x[b],v.ymax>=f?v.incrRow():x.splice(b,1)}return e};a.prototype.getTileIdAtParent=function(a,b){b=l.pool.acquire(b);var c=this._infoByLevel[b.level];if(a.resolution<c.resolution)throw Error("Cannot calculate parent tile. destination LOD's resolution "+a.resolution+" is not a parent resolution of "+c.resolution);return a.resolution===c.resolution?b.id:l.getId(a.level,Math.floor(b.row*
c.resolution/a.resolution+.01),Math.floor(b.col*c.resolution/a.resolution+.01),b.world)};a.prototype.getTileParentId=function(a){a=l.pool.acquire(a);var b=this._lodInfos.indexOf(this._infoByLevel[a.level])-1;if(0>b)return l.pool.release(a),null;b=this.getTileIdAtParent(this._lodInfos[b],a);l.pool.release(a);return b};a.prototype.getTileResolution=function(a){return(a=this._infoByLevel["object"===typeof a?a.level:a])?a.resolution:-1};a.prototype.getTileScale=function(a){return(a=this._infoByLevel[a.level])?
a.scale:-1};a.prototype.intersects=function(a,b){var c=l.pool.acquire(b);b=this._infoByLevel[c.level];var d=a.lodInfo;if(d.resolution>b.resolution){var e=l.pool.acquire(this.getTileIdAtParent(d,c)),g=d.denormalizeCol(e.col,e.world);b=a.spans.some(function(a){return a.row===e.row&&a.colFrom<=g&&a.colTo>=g});l.pool.release(c);l.pool.release(e);return b}if(d.resolution<b.resolution){var f=a.spans.reduce(function(a,b){a[0]=Math.min(a[0],b.row);a[1]=Math.max(a[1],b.row);a[2]=Math.min(a[2],b.colFrom);a[3]=
Math.max(a[3],b.colTo);return a},[Infinity,-Infinity,Infinity,-Infinity]);a=f[0];var h=f[1],k=f[2],f=f[3],p=b.denormalizeCol(c.col,c.world),q=d.getColumnForX(b.getXForColumn(p)),v=d.getRowForY(b.getYForRow(c.row)),p=d.getColumnForX(b.getXForColumn(p+1))-1;b=d.getRowForY(b.getYForRow(c.row+1))-1;l.pool.release(c);return!(q>f||p<k||v>h||b<a)}var G=d.denormalizeCol(c.col,c.world);b=a.spans.some(function(a){return a.row===c.row&&a.colFrom<=G&&a.colTo>=G});l.pool.release(c);return b};a.prototype.normalizeBounds=
function(a,b,c){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];this._wrap&&(b=f.getInfo(this.tileInfo.spatialReference),c=-c*(b.valid[1]-b.valid[0]),a[0]+=c,a[2]+=c);return a};a.prototype.getClosestInfoForScale=function(a){var b=this.scales;this._infoByScale[a]||(a=b.reduce(function(b,c,d,e){return Math.abs(c-a)<Math.abs(b-a)?c:b},b[0]));return this._infoByScale[a]};a.prototype.scaleToLevel=function(a){var b=this.scales;if(this._infoByScale[a])return this._infoByScale[a].level;for(var c=b.length-1;0<=c;c--)if(a<
b[c])return c===b.length-1?this._infoByScale[b[b.length-1]].level:this._infoByScale[b[c]].level+(b[c]-a)/(b[c]-b[c+1]);return this._infoByScale[b[0]].level};return a}()})},"esri/views/2d/tiling/LODInfo":function(){define(["require","exports","../../../geometry/support/spatialReferenceUtils","./TileKey"],function(c,a,f,b){function d(a,b,c){a[0]=b;a[1]=c;return a}var l=new b("0/0/0/0");return function(){function a(a,b,c,d,f,k,l,C,B,r,A,u){this.level=a;this.resolution=b;this.scale=c;this.origin=d;this.first=
f;this.last=k;this.size=l;this.norm=C;this.worldStart=B;this.worldEnd=r;this.worldSize=A;this.wrap=u}a.create=function(b,c,k){var e=f.getInfo(b.spatialReference),h=[b.origin.x,b.origin.y],p=[b.size[0]*c.resolution,b.size[1]*c.resolution],l=[-Infinity,-Infinity],C=[Infinity,Infinity],B=[Infinity,Infinity];k&&(d(l,Math.max(0,Math.floor((k.xmin-h[0])/p[0])),Math.max(0,Math.floor((h[1]-k.ymax)/p[1]))),d(C,Math.max(0,Math.floor((k.xmax-h[0])/p[0])),Math.max(0,Math.floor((h[1]-k.ymin)/p[1]))),d(B,C[0]-
l[0]+1,C[1]-l[1]+1));var r;b.isWrappable?(b=[Math.ceil(Math.round(2*e.origin[1]/c.resolution)/b.size[0]),B[1]],e=[Math.floor((e.origin[0]-h[0])/p[0]),l[1]],k=[b[0]+e[0]-1,C[1]],r=!0):(e=l,k=C,b=B,r=!1);return new a(c.level,c.resolution,c.scale,h,l,C,B,p,e,k,b,r)};a.prototype.normalizeCol=function(a){if(!this.wrap)return a;var b=this.worldSize[0];return 0>a?b-1-Math.abs((a+1)%b):a%b};a.prototype.denormalizeCol=function(a,b){return this.wrap?this.worldSize[0]*b+a:a};a.prototype.getWorldForColumn=function(a){return this.wrap?
Math.floor(a/this.worldSize[0]):0};a.prototype.getFirstColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]};a.prototype.getLastColumnForWorld=function(a){return a*this.worldSize[0]+this.first[0]+this.size[0]-1};a.prototype.getColumnForX=function(a){return(a-this.origin[0])/this.norm[0]};a.prototype.getXForColumn=function(a){return this.origin[0]+a*this.norm[0]};a.prototype.getRowForY=function(a){return(this.origin[1]-a)/this.norm[1]};a.prototype.getYForRow=function(a){return this.origin[1]-
a*this.norm[1]};a.prototype.getTileBounds=function(a,b,c){void 0===c&&(c=!1);l.set(b);var d=c?l.col:this.denormalizeCol(l.col,l.world),e=l.row;b=this.getXForColumn(d);c=this.getYForRow(e+1);d=this.getXForColumn(d+1);e=this.getYForRow(e);a[0]=b;a[1]=c;a[2]=d;a[3]=e;return a};a.prototype.getTileCoords=function(a,b,c){void 0===c&&(c=!1);l.set(b);b=c?l.col:this.denormalizeCol(l.col,l.world);Array.isArray(a)?d(a,this.getXForColumn(b),this.getYForRow(l.row)):(a.x=this.getXForColumn(b),a.y=this.getYForRow(l.row));
return a};return a}()})},"esri/views/2d/tiling/TileKey":function(){define(["require","exports","../../../core/ObjectPool"],function(c,a,f){return function(){function a(a,b,c,e){this.set(a,b,c,e)}a.from=function(b,c,f,e){return a.pool.acquire(b,c,f,e)};a.getId=function(a,b,c,e){return"object"===typeof a?a.level+"/"+a.row+"/"+a.col+"/"+a.world:a+"/"+b+"/"+c+"/"+e};Object.defineProperty(a.prototype,"key",{get:function(){return this},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",
{get:function(){return this.toString()},enumerable:!0,configurable:!0});a.prototype.equals=function(a){return this.level===a.level&&this.row===a.row&&this.col===a.col&&this.world===a.world};a.prototype.release=function(){this.world=this.col=this.row=this.level=0};a.prototype.set=function(a,b,c,e){null==a?this.world=this.col=this.row=this.level=0:"object"===typeof a?(this.level=a.level||0,this.row=a.row||0,this.col=a.col||0,this.world=a.world||0):"string"===typeof a?(a=a.split("/"),b=a[1],c=a[2],e=
a[3],this.level=parseFloat(a[0]),this.row=parseFloat(b),this.col=parseFloat(c),this.world=parseFloat(e)):(this.level=+a,this.row=+b,this.col=+c,this.world=+e||0);return this};a.prototype.toString=function(){return this.level+"/"+this.row+"/"+this.col+"/"+this.world};a.prototype.getChildKeys=function(){var b=this.level+1,c=this.row<<1,f=this.col<<1,e=this.world;return[a.pool.acquire(b,c,f,e),a.pool.acquire(b,c,f+1,e),a.pool.acquire(b,c+1,f,e),a.pool.acquire(b,c+1,f+1,e)]};a.prototype._compare=function(a){return this.row<
a.row?-1:this.row>a.row?1:this.col<a.col?-1:this.col>a.col?1:0};a.sort=function(b){return b.map(function(b){return a.from(b)}).sort(function(a,b){return a._compare(b)}).map(function(a){return a.id})};a.pool=new f(a,!0,null,25,50);return a}()})},"esri/views/2d/tiling/TileCoverage":function(){define(["require","exports","../../../core/ArrayPool","../../../core/ObjectPool","./TileSpan"],function(c,a,f,b,d){return function(){function a(a){this.lodInfo=a;this.spans=f.acquire()}a.prototype.release=function(){for(var a=
0,b=this.spans;a<b.length;a++)d.pool.release(b[a]);f.release(this.spans)};a.prototype.forEach=function(a,b){var c=this.spans,d=this.lodInfo,e=d.level;if(0!==c.length)for(var f=0;f<c.length;f++)for(var k=c[f],l=k.row,C=k.colTo,k=k.colFrom;k<=C;k++)a.call(b,e,l,d.normalizeCol(k),d.getWorldForColumn(k))};a.pool=new b(a,!0);return a}()})},"esri/views/2d/tiling/TileSpan":function(){define(["require","exports","../../../core/ObjectPool"],function(c,a,f){return function(){function a(a,b,c){this.row=a;this.colFrom=
b;this.colTo=c}a.pool=new f(a,!0);return a}()})},"esri/views/2d/tiling/TileQueue":function(){define("require exports ../../../core/tsSupport/declareExtendsHelper ../../../core/tsSupport/decorateHelper ../../../core/Accessor ../../../core/QueueProcessor ../../../core/accessorSupport/decorators ../libs/gl-matrix/vec2".split(" "),function(c,a,f,b,d,l,k,e){function h(a,b){a.length=0;b.forEach(function(b){return a.push(b)});return a}var p=new Set,g=[],q=new Map,v=[0,0];return function(a){function c(b){b=
a.call(this,b)||this;b._keysToRequests=new Map;b.concurrency=6;b.process=null;b.strategy="scale-first";b.tileInfoView=null;b.tileServers=null;return b}f(c,a);c.prototype.initialize=function(){var a=this,b="scale-first"===this.strategy?this._peekByScaleFirst.bind(this):this._peekByCenterFirst.bind(this),c=this.tileServers,d=this.concurrency,e=this.process;this._queues=c&&0<c.length?c.map(function(c){return new l({concurrency:d,process:function(b){b=a._keysToRequests.get(b);return e(b,c)},peeker:b})}):
[new l({concurrency:d,process:function(b){b=a._keysToRequests.get(b);return e(b)},peeker:b})]};Object.defineProperty(c.prototype,"length",{get:function(){return this._queues.reduce(function(a,b){return a+b.length},0)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"onGoingCount",{get:function(){return this._keysToRequests.size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return 0<this.length||0<this.onGoingCount},enumerable:!0,configurable:!0});
c.prototype.clear=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].clear();this._keysToRequests.clear();this.notifyChange("updating")};c.prototype.find=function(a,b){var c=this;b=0;for(var d=this._queues;b<d.length;b++){var e=d[b].find(function(b){return a(c._keysToRequests.get(b).key)});if(e)return e}};c.prototype.getPromise=function(a){a="string"===typeof a?a:a.id;for(var b=0,c=this._queues;b<c.length;b++){var d=c[b].get(a);if(d)return d}};c.prototype.getRequest=function(a){return this._keysToRequests.get("string"===
typeof a?a:a.id)};c.prototype.has=function(a){return"string"===typeof a?this._keysToRequests.has(a):this._keysToRequests.has(a.id)};c.prototype.isOngoing=function(a){var b="string"===typeof a?a:a.id;return this.has(b)&&this._queues.some(function(a){return a.isOngoing(b)})};c.prototype.pause=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].pause()};c.prototype.push=function(a){var b=this,c=a.key.id;if(this.has(c))return this.getPromise(c);var d=this._queues[a.key.row%this._queues.length].push(c),
e=function(){b._keysToRequests.delete(c);b.notifyChange("updating")};this._keysToRequests.set(c,a);d.then(e,e);this.notifyChange("updating");return d};c.prototype.reset=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].reset();this.notifyChange("updating")};c.prototype.resume=function(){for(var a=0,b=this._queues;a<b.length;a++)b[a].resume()};c.prototype._peekByScaleFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,c=Number.NEGATIVE_INFINITY,d=Number.POSITIVE_INFINITY,
e=0;e<a.length;e++){var f=this._keysToRequests.get(a[e]),k=this.tileInfoView.getTileScale(f.key);q.has(k)||(q.set(k,[]),c=Math.max(k,c),d=Math.min(k,d));q.get(k).push(f.key);p.add(k)}var l=this.state.scale;q.has(l)||(h(g,p),g.sort(),l=g.reduce(function(a,b,c,d){return Math.abs(b-l)<Math.abs(a-l)?b:a},g[0]));l=Math.min(l,c);l=Math.max(l,d);a=q.get(l);var v=b.getClosestInfoForScale(l),y=v.getColumnForX(this.state.center[0]),B=v.getRowForY(this.state.center[1]);a.sort(function(a,b){var c=v.denormalizeCol(a.col,
a.world),d=v.denormalizeCol(b.col,b.world);return Math.sqrt((y-c)*(y-c)+(B-a.row)*(B-a.row))-Math.sqrt((y-d)*(y-d)+(B-b.row)*(B-b.row))});p.clear();q.clear();return a[0].id};c.prototype._peekByCenterFirst=function(a){if(!this.state)return a[0];for(var b=this.tileInfoView,c=this.state.center,d=Number.POSITIVE_INFINITY,g=null,f=0;f<a.length;f++){var h=this._keysToRequests.get(a[f]);b.getTileCoords(v,h.key);var k=e.distance(v,c);k<d&&(d=k,g=h.key)}return g.id};b([k.property({constructOnly:!0})],c.prototype,
"concurrency",void 0);b([k.property({constructOnly:!0})],c.prototype,"process",void 0);b([k.property()],c.prototype,"state",void 0);b([k.property({constructOnly:!0})],c.prototype,"strategy",void 0);b([k.property({constructOnly:!0})],c.prototype,"tileInfoView",void 0);b([k.property({constructOnly:!0})],c.prototype,"tileServers",void 0);b([k.property({readOnly:!0})],c.prototype,"updating",null);return c=b([k.subclass()],c)}(k.declared(d))})},"esri/core/QueueProcessor":function(){define(["require","exports",
"dojo/Deferred","./Queue","./scheduling"],function(c,a,f,b,d){return function(){function a(a){this._apiPromises=new Map;this._processingItems=new Map;this._isPaused=!1;this._scheduledNextHandle=null;this.concurrency=1;this.ordered=!1;a.concurrency&&(this.concurrency=a.concurrency);this.ordered=!!a.ordered;this._queue=new b(a.peeker?{peeker:a.peeker}:void 0);this.process=a.process}Object.defineProperty(a.prototype,"length",{get:function(){return this._processingItems.size+this._queue.length},enumerable:!0,
configurable:!0});a.prototype.clear=function(){this._queue.clear();var a=[];this._processingItems.forEach(function(b){return a.push(b.resultPromise)});this._processingItems.clear();a.forEach(function(a){return a.cancel()});a.length=0;this._apiPromises.forEach(function(b){return a.push(b)});this._apiPromises.clear();a.forEach(function(a){return a.cancel()});this._cancelNext()};a.prototype.find=function(a,b){var c=this,d=void 0;this._apiPromises.forEach(function(e,f){a.call(b,f)&&(d=c._apiPromises.get(f).promise)});
return d};a.prototype.get=function(a){return(a=this._apiPromises.get(a))&&a.promise||void 0};a.prototype.isOngoing=function(a){return this._processingItems.has(a)};a.prototype.has=function(a){return this._apiPromises.has(a)};a.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};a.prototype.push=function(a){var b=this;if(this._apiPromises.has(a))return this._apiPromises.get(a).promise;var c=new f(function(c){var d=b._processingItems.get(a);d?d.resultPromise.cancel(c):
(b._remove(a),b._scheduleNext())});this._add(a,c);this._scheduleNext();return c.promise};a.prototype.reset=function(){var a=[];this._processingItems.forEach(function(b){return a.push(b)});this._processingItems.clear();for(var b=0;b<a.length;b++){var c=a[b];c.resultPromise.isFulfilled()?this._processReset(c):(c.isReset=!0,c.resultPromise.cancel())}};a.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())};a.prototype._scheduleNext=function(){var a=this;this._isPaused||
this._scheduledNextHandle||(this._scheduledNextHandle=d.schedule(function(){a._scheduledNextHandle=null;a._next()}))};a.prototype._next=function(){for(;0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())};a.prototype._processResult=function(a,b){this._remove(a.item);this._scheduleNext();a.dfd.resolve(b)};a.prototype._processError=function(a,b){a.isReset?this._processReset(a):(this._remove(a.item),this._scheduleNext(),a.dfd.reject(b))};a.prototype._processReset=
function(a){this._remove(a.item);this._add(a.item,a.dfd);this._scheduleNext()};a.prototype._processOrdered=function(a,b){var c=this,d=!1;if(a.isReset)this._processReset(a);else{a.result=b;this._itemsToProcess||(this._itemsToProcess=[]);this._processingItems.forEach(function(a){d||(a.result?c._itemsToProcess.push(a):d=!0)});a=0;for(b=this._itemsToProcess;a<b.length;a++){var e=b[a];!1===e.result.ok?this._processError(e,e.result.error):this._processResult(e,e.result.value)}this._itemsToProcess.length=
0}};a.prototype._process=function(a){var b=this;if(null!=a){var c=this._apiPromises.get(a),d=this.process(a);if(d&&"function"===typeof d.then){var g={item:a,resultPromise:d,result:null,dfd:c,isReset:!1};this._processingItems.set(a,g);this.ordered?d.then(function(a){return b._processOrdered(g,{ok:!0,value:a})},function(a){return b._processOrdered(g,{ok:!1,error:a})}):d.then(function(a){return b._processResult(g,a)},function(a){return b._processError(g,a)})}else c.resolve(d),this._remove(a)}};a.prototype._add=
function(a,b){this._apiPromises.set(a,b);this._queue.push(a)};a.prototype._remove=function(a){this._queue.remove(a);this._apiPromises.delete(a);this._processingItems.delete(a)};a.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=null)};return a}()})},"esri/core/Queue":function(){define(["require","exports"],function(c,a){return function(){function a(a){this._items=[];this._itemSet=new Set;this._peeker=function(a){return a[0]};
this._length=0;a&&a.peeker&&(this._peeker=a.peeker)}Object.defineProperty(a.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._itemSet.clear();this._length=this._items.length=0};a.prototype.peek=function(){if(0!==this._length)return this._peeker(this._items)};a.prototype.push=function(a){this.contains(a)||this._add(a)};a.prototype.contains=function(a){return 0<this._length&&this._itemSet.has(a)};a.prototype.pop=function(){if(0!==
this._length){var a=this.peek();this._remove(a);return a}};a.prototype.remove=function(a){this.contains(a)&&this._remove(a)};a.prototype._add=function(a){this._items.push(a);this._itemSet.add(a);this._length++};a.prototype._remove=function(a){this._itemSet.delete(a);this._items.splice(this._items.indexOf(a),1);this._length--};return a}()})},"esri/views/2d/tiling/TileStrategy":function(){define(["require","exports","../../../core/tsSupport/extendsHelper","./TileKey"],function(c,a,f,b){var d=new b(0,
0,0,0),l=new Map,k=[],e=[];return function(){function a(a){this._previousResolution=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=a.acquireTile;this.releaseTile=a.releaseTile;this.tileInfoView=a.tileInfoView;a.cachePolicy&&(this.cachePolicy=a.cachePolicy);null!=a.buffer&&(this.buffer=a.buffer)}a.prototype.destroy=function(){this.tileIndex.clear()};a.prototype.update=function(a){var b=this,c=this.tileIndex,f=this.tileInfoView.getTileCoverage(a.state,
this.buffer);if(f){var h=f.spans,p=f.lodInfo,B=p.level,r=a.state.resolution,A=!a.stationary&&r>this._previousResolution;this._previousResolution=r;c.forEach(function(a){return a.visible=!0});this.tiles.length=0;l.clear();var u=0,n=0;if(0<h.length)for(var t=0;t<h.length;t++){a=h[t];for(var x=a.row,D=a.colTo,G=a.colFrom;G<=D;G++)u++,a=d.set(B,x,p.normalizeCol(G),p.getWorldForColumn(G)).id,c.has(a)?(r=c.get(a),r.attached?(l.set(a,r),n++):r.attached||A||this._addParentTile(a,l)):(r=this.acquireTile(d),
this.tileIndex.set(a,r),A||this._addParentTile(a,l))}var F=n===u;e.length=0;k.length=0;c.forEach(function(a,c){d.set(c);if(!l.has(c)){var g=b.tileInfoView.intersects(f,d);!g||!A&&F?"purge"===b.cachePolicy?d.level===B&&g||k.push(c):(d.level>B||!g)&&k.push(c):a.attached?e.push(c):d.level>B&&k.push(c)}});for(h=0;h<e.length;h++)a=e[h],(r=c.get(a))&&r.attached&&l.set(a,r);for(h=0;h<k.length;h++)a=k[h],r=c.get(a),this.releaseTile(r),c["delete"](a);l.forEach(function(a){return b.tiles.push(a)});c.forEach(function(a){l.has(a.key.id)||
(a.visible=!1)});e.length=0;k.length=0;l.clear();return F}};a.prototype.clear=function(){var a=this,b=this.tileIndex;b.forEach(function(b){a.releaseTile(b)});b.clear()};a.prototype._addParentTile=function(a,b){for(var c=null;;){a=this.tileInfoView.getTileParentId(a);if(!a)break;if(this.tileIndex.has(a)&&(c=this.tileIndex.get(a))&&c.attached){b.has(c.key.id)||b.set(c.key.id,c);break}}};return a}()})},"esri/views/2d/layers/features/support/Tile":function(){define("require exports @dojo/framework/shim/Set ../../../../../core/ArrayPool ../../../../../geometry/support/aaBoundingRect ../../../../../tasks/support/QuantizationParameters ../../../tiling/TileKey".split(" "),
function(c,a,f,b,d,l,k){function e(a,b){var c=a.bounds,d=b.bounds;return a.key.id!==b.key.id&&a.key.world===b.key.world&&c[0]<=d[0]&&c[1]<=d[1]&&c[2]>=d[2]&&c[3]>=d[3]}Object.defineProperty(a,"__esModule",{value:!0});a.isParentOf=e;a.isChildOf=function(a,b){return e(b,a)};c=function(){function a(a,b){this.bounds=d.create();this.key=new k(0,0,0,0);this.objectIds=new f.default;this.key.set(b);b=a.getLODInfoAt(this.key);this.tileInfoView=a;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=
b.resolution;this.scale=b.scale;this.needsClear=!0}Object.defineProperty(a.prototype,"id",{get:function(){return this.key.id},enumerable:!0,configurable:!0});a.prototype.clone=function(){return new a(this.tileInfoView,this.id)};a.prototype.createChildTiles=function(){for(var c=this.key.getChildKeys(),d=b.acquire(),e=0;e<c.length;e++)d[e]=new a(this.tileInfoView,c[e]);return d};a.prototype.getQuantizationParameters=function(){return l.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,
extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})};return a}();a.Tile=c;a.default=c})},"esri/tasks/support/QuantizationParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators".split(" "),function(c,a,f,b,d,l,k,e,
h){Object.defineProperty(a,"__esModule",{value:!0});var p=k({upperLeft:"upper-left",lowerLeft:"lower-left"});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.extent=null;b.mode="view";b.originPosition="upper-left";return b}f(c,a);g=c;c.prototype.clone=function(){return new g(e.clone({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))};var g;b([h.property({type:d.Extent,json:{write:!0}})],c.prototype,"extent",void 0);b([h.property({type:String,
json:{write:!0}})],c.prototype,"mode",void 0);b([h.property({type:String,json:{read:p.read,write:p.write}})],c.prototype,"originPosition",void 0);b([h.property({type:Number,json:{write:!0}})],c.prototype,"tolerance",void 0);return c=g=b([h.subclass("esri.tasks.support.QuantizationParameters")],c)}(h.declared(l));a.default=c})},"esri/views/2d/support/Evented":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){this._listeners=
{}}a.prototype.on=function(a,c){var b=this;null==this._listeners[a]&&(this._listeners[a]=new Map);var d={};this._listeners[a].set(d,c);return{remove:function(){return b._listeners[a].delete(d)}}};a.prototype.once=function(a,c){var b=this.on(a,function(a){b.remove();c(a)});return b};a.prototype.emit=function(a,c){this.hasEventListener(a)&&this._listeners[a].forEach(function(a){return a(c)})};a.prototype.hasEventListener=function(a){return null!=this._listeners[a]&&0<this._listeners[a].size};return a}();
a.default=c})},"esri/views/2d/layers/features/controllers/OnDemandController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper @dojo/framework/shim/Set ../../../../../geometry ../../../../../core/Error ../../../../../core/has ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/QueueProcessor ../../../../../core/accessorSupport/decorators ../../../../../layers/graphics/featureConversionUtils ../../../../../layers/graphics/data/DefaultSpatialIndex ../../../../../layers/graphics/data/QueryEngine ../../../../../layers/support/FeatureProcessing ../../../../../tasks/operations/query ../../../../../tasks/support/QuantizationParameters ../../../../../tasks/support/Query ./BaseController ../support/DataTile ../support/DataTileFeaturesIndex ../support/Tile ../support/TileUpdateQueue ../../../tiling/TileInfoView ../../../tiling/TileQueue".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A,u,n,t,x,D,G,F,J,E){Object.defineProperty(a,"__esModule",{value:!0});var N=p.getLogger("esri.views.2d.layers.features.controllers.OnDemandController");c=h("esri-featurelayer-webgl");h=h("esri-mobile");var Z=c&&"object"===typeof c&&null!=c.maxDrillLevel?c.maxDrillLevel:h?1:4,ia=c&&"object"===typeof c&&null!=c.maxRecordCountFactor?c.maxRecordCountFactor:h?1:3,S=c&&"object"===typeof c&&null!=c.enablePBFQuery?c.enablePBFQuery:!0,O=new l.default,ha=[];l=function(a){function c(){var b=
null!==a&&a.apply(this,arguments)||this;b.type="on-demand";b._queryInfoHash=null;b._processingInMainThread=!1;b._dataTileIndex=new D.default;b._editsQueue=new q({concurrency:1,ordered:!0,process:function(a){return b._processEditsEvent(a)}});return b}f(c,a);c.prototype.initialize=function(){var a=this;this._fetchQueue=new E({concurrency:10,strategy:"center-first",tileInfoView:new J(this.tileStore.tileInfo),process:function(b){return a._fetchTile(b)}});this._updateQueue=new F.default({tileInfoView:new J(this.tileStore.tileInfo),
process:function(b,c){return a._updateTile(b,c)}});this.handles.add(this.watch("processor",this._switchProcessor.bind(this)))};c.prototype.destroy=function(){this._fetchQueue.clear();this._updateQueue.clear();this.queryEngine&&(this.queryEngine.destroy(),this._set("queryEngine",null))};Object.defineProperty(c.prototype,"processing",{get:function(){return r.fromWorker(this.configuration.processing)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return this._fetchQueue.updating||
this._updateQueue.updating},enumerable:!0,configurable:!0});c.prototype.onEdits=function(a){var b=this;this._fetchQueue.pause();this._fetchQueue.reset();this._editsQueue.push(a).then(function(){0===b._editsQueue.length&&b._fetchQueue.resume()})};c.prototype.queryFeatures=function(a){return this.queryEngine.executeQuery(n.fromJSON(a))};c.prototype.queryFeatureCount=function(a){return this.queryEngine.executeQueryForCount(n.fromJSON(a))};c.prototype.queryObjectIds=function(a){return this.queryEngine.executeQueryForIds(n.fromJSON(a))};
c.prototype.queryExtent=function(a){return this.queryEngine.executeQueryForExtent(n.fromJSON(a))};c.prototype.redraw=function(){this._updateQueue.pause();this._manageTiles(this.tileStore.tiles);this._updateQueue.resume()};c.prototype.refresh=function(){};c.prototype.setViewState=function(a){this._fetchQueue.state=a;this._updateQueue.state=a};c.prototype.onTileUpdate=function(a){this.queryEngine&&this._manageTiles(a.added,a.removed)};c.prototype._manageTiles=function(a,b){void 0===b&&(b=null);for(var c=
this._dataTileIndex,d=this._fetchQueue,e=this._updateQueue,g="esriGeometryPoint"===this.service.geometryType,f=function(a){var b=c.get(a.id);b?(b.displayTile=a,g?c.forEach(function(c){G.isChildOf(c,b)&&(c.displayTile=a)}):b.done=!1):(b=new x.default,b.tile=a.clone(),b.displayTile=a,c.add(b));h._processDataTile(b)},h=this,n=0;n<a.length;n++){var k=a[n];f(k)}if(b)for(a=0;a<b.length;a++)k=b[a],O.add(k),e.cancel(k.id);c.forEach(function(a){O.has(a.displayTile)&&ha.push(a)});for(e=0;e<ha.length;e++)k=
ha[e],d.has(k.id)&&d.getPromise(k.id).cancel(),c.delete(k);ha.length=0;O.clear()};c.prototype._processDataTile=function(a){var b=this,c=a.key,d=this._fetchQueue,g=c.id,f=this._queryInfoHash,c=c.level-a.displayTile.key.level>=Z;this._dataTileIndex.add(a);if(a.done||d.has(g)){if(a.queryInfoHash!==f||a.returnExceeded!==c)if(a.done)a.done=!1;else if(d.isOngoing(g))d.getPromise(g).cancel();else{a.queryInfoHash=f;a.returnExceeded=c;return}}else a.queryInfoHash=f,a.returnExceeded=c;a.done?this._invalidateTile(a.displayTile):
d.has(g)||d.push(a).then(function(c){return b._handleResponse(a,c)}).catch(function(b){"cancel"!==b.dojoType&&N.error(new e("mapview-controller","Encountered an error when handling tile response",b));a.done=!0})};c.prototype._handleResponse=function(a,b){a.done=!0;y.hydrateOptimizedFeatureSet(b);if(b.exceededTransferLimit)if(a.returnExceeded)this._dataTileIndex.setTileFeatures(a,b.features),this._deleteChildrenDataTiles(a);else{b=0;for(var c=a.tile.createChildTiles();b<c.length;b++){var d=c[b],e=
new x.default;e.tile=d;e.displayTile=a.displayTile;this._processDataTile(e)}}else this._dataTileIndex.setTileFeatures(a,b.features),this._deleteChildrenDataTiles(a);this._invalidateTile(a.tile)};c.prototype._deleteChildrenDataTiles=function(a){this._dataTileIndex.forEach(function(b){G.isChildOf(b,a)&&ha.push(b)});for(var b=0;b<ha.length;b++){var c=ha[b];this._fetchQueue.has(c.id)&&this._fetchQueue.getPromise(c.id).cancel();this._dataTileIndex.delete(c)}ha.length=0};c.prototype._fetchTile=function(a){var b=
this;a=this._createQuery(a.displayTile,a.tile,a.returnExceeded);var c=this.service.source;return S&&this.service.capabilities.query.supportsFormatPBF?A.executeQueryPBF(c,a).then(function(a){return a.data}):A.executeQuery(c,a).then(function(a){return y.convertFromFeatureSet(a.data,b.service.objectIdField)})};c.prototype._invalidateTile=function(a){var b=this._updateQueue,c=0;for(a=this.tileStore.intersections(a,this.processor.queryInfo.pixelBuffer);c<a.length;c++){var d=a[c].tile;b.push(d.id,d.updateTimestamp)}};
c.prototype._updateTile=function(a,b){var c=this,d=this.tileStore.get(a);a=this.processor.queryInfo;a=this.queryEngine.executeTileQuery(d,{pixelBuffer:a.pixelBuffer,returnGeometry:a.returnGeometry,returnCentroid:a.returnCentroid});var e=a.objectIds,g={features:a.features,fields:this.service.fields,objectIdFieldName:this.service.objectIdField,transform:{originPosition:"upperLeft",scale:[d.resolution,d.resolution],translate:[d.bounds[0],d.bounds[3]]}};return this._applyProcessing(g).catch(function(a){a&&
"cancel"!==a.dojoType&&N.error("updating-tile",a);return g}).then(function(a){var g=[],f=!0;c._dataTileIndex.forEach(function(a){d.id!==a.id&&G.isChildOf(a,d)&&f&&!a.done&&(f=!1)});f&&d&&d.objectIds.forEach(function(a){e.has(a)||g.push(a)});e.forEach(function(a){d.objectIds.add(a)});d.updateTimestamp=b;return c.processor.onTileData(d,{addOrUpdate:a.features,remove:g}).catch(function(a){a&&"cancel"!==a.dojoType&&N.error("updating-tile",a)})})};c.prototype._processEditsEvent=function(a){var b=this;
return g.create(function(c,d){d=function(a){return a.objectId};var e=a.deletedFeatures.map(d),g=b._dataTileIndex.deleteFeaturesById(e),e=a.addedFeatures.concat(a.updatedFeatures).map(d);if(e.length)d=b.service.source,e=b._createObjectIdsQuery(e),A.executeQuery(d,e).then(function(a){if((a=a.data)&&a.features&&a.features.length)for(a=y.convertFromFeatureSet(a,b.service.objectIdField).features,g.push.apply(g,b._dataTileIndex.addOrUpdateFeatures(a)),a=0;a<g.length;a++)b._invalidateTile(g[a].tile)}).then(c,
c);else{for(d=0;d<g.length;d++)b._invalidateTile(g[d].tile);c()}})};c.prototype._switchProcessor=function(a,b){var c=a.queryInfo;b=c.definitionExpression;var d=c.gdbVersion,c=c.historicMoment;a=this._createQueryInfoHash(a);this._queryInfoHash!==a&&(this._queryInfoHash=a,this.queryEngine&&this.queryEngine.destroy(),this.spatialIndex&&this.spatialIndex.clear(),this._set("spatialIndex",new C.default({geometryType:this.service.geometryType,hasM:!1,hasZ:!1})),this._set("queryEngine",new B.default({definitionExpression:b,
fields:this.service.fields,geometryType:this.service.geometryType,objectIdField:this.service.objectIdField,hasM:!1,hasZ:!1,spatialReference:this.spatialReference,cacheSpatialQueries:!0,gdbVersion:d,historicMoment:null!=c&&new Date(c),spatialIndex:this.spatialIndex})),this._dataTileIndex.spatialIndex=this.spatialIndex,this._dataTileIndex.forEach(function(a){a.done=!1}));this._editsQueue.pause();this._fetchQueue.pause();this._updateQueue.pause();this._editsQueue.clear();this._fetchQueue.reset();this._updateQueue.clear();
this._manageTiles(this.tileStore.tiles);this._fetchQueue.resume();this._editsQueue.resume();this._updateQueue.resume()};c.prototype._createQuery=function(a,b,c){void 0===c&&(c=!0);var d=this.service.geometryType,e=this._createDefaultQuery();a="esriGeometryPoint"===this.service.geometryType?b:a;e.maxRecordCountFactor=ia;e.resultType="tile";e.returnExceededLimitFeatures=c;e.geometry=k.Extent.fromJSON({xmin:b.bounds[0],ymin:b.bounds[1],xmax:b.bounds[2],ymax:b.bounds[3],spatialReference:this.spatialReference});
if(this.service.capabilities.query.supportsQuantization)e.quantizationParameters=u.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:a.resolution,extent:{xmin:a.bounds[0],ymin:a.bounds[1],xmax:a.bounds[2],ymax:a.bounds[3],spatialReference:this.spatialReference}}),"esriGeometryPolyline"===d&&(e.maxAllowableOffset=a.resolution);else if("esriGeometryPolyline"===d||"esriGeometryPolygon"===d)e.maxAllowableOffset=a.resolution;return e};c.prototype._createObjectIdsQuery=function(a){var b=
this._createDefaultQuery();b.objectIds=a;return b};c.prototype._createDefaultQuery=function(){var a=this,b=this.processor.queryInfo,c=new n;c.outSpatialReference=k.SpatialReference.fromJSON(this.spatialReference);var d=b.outFields,e=b.orderByFields;this.processing&&(d=d&&d.filter(function(b){return!a.processing.getField(b)}),e=e&&e.filter(function(b){return!a.processing.getField(b)}));d=.75<=d.length/this.service.fields.length?["*"]:d;c.gdbVersion=b.gdbVersion;c.historicMoment=null!=b.historicMoment?
new Date(b.historicMoment):null;c.outFields=d;c.where=b.definitionExpression||"1\x3d1";c.returnGeometry=!0;c.returnCentroid=b.returnCentroid;c.orderByFields=e;return c};c.prototype._applyProcessing=function(a){var b=this.processing;if(!b)return g.resolve(a);if(this._processingInMainThread)return this.remoteClient.invoke("executeProcessing",{featureSet:a});try{var c=b.process(a,b.options);return c?"then"in c?c:g.resolve(c):g.reject(new e("FeatureLayer","invalid processing.process() method, returns nothing"))}catch(K){return this._processingInMainThread=
!0,this.remoteClient.invoke("executeProcessing",{featureSet:a})}};c.prototype._createQueryInfoHash=function(a){var b=this,c=a.queryInfo,d=c.orderByFields,c=c.outFields,e=a.queryInfo;a=e.definitionExpression;var g=e.gdbVersion,e=e.historicMoment;this.processing&&(c=c&&c.filter(function(a){return!b.processing.getField(a)}),d=d&&d.filter(function(a){return!b.processing.getField(a)}));c&&c.sort();d&&d.sort();return JSON.stringify({definitionExpression:a,outFields:.75<=c.length/this.service.fields.length?
["*"]:c,orderByFields:d,gdbVersion:g,historicMoment:e})};b([v.property()],c.prototype,"_fetchQueue",void 0);b([v.property()],c.prototype,"_updateQueue",void 0);b([v.property()],c.prototype,"configuration",void 0);b([v.property({readOnly:!0,dependsOn:["configuration"]})],c.prototype,"processing",null);b([v.property({readOnly:!0})],c.prototype,"queryEngine",void 0);b([v.property({readOnly:!0})],c.prototype,"spatialIndex",void 0);b([v.property({dependsOn:["_fetchQueue.updating","_updateQueue.updating"]})],
c.prototype,"updating",null);return c=b([v.subclass()],c)}(v.declared(t.default));a.default=l})},"esri/layers/graphics/featureConversionUtils":function(){define("require exports ../../core/Error ../../core/Logger ./OptimizedFeature ./OptimizedFeatureSet ./OptimizedGeometry".split(" "),function(c,a,f,b,d,l,k){function e(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function h(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function p(a,b){return b*a.scale[0]+a.translate[0]}function g(a,
b){return a.translate[1]-b*a.scale[1]}function q(a){a=a.coords;return{x:a[0],y:a[1]}}function v(a){var b=new k.default;b.coords[0]=a.x;b.coords[1]=a.y;return b}function y(a){a=a.coords;return{x:a[0],y:a[1],z:a[2]}}function C(a){var b=new k.default;b.coords[0]=a.x;b.coords[1]=a.y;b.coords[2]=a.z;return b}function B(a){a=a.coords;return{x:a[0],y:a[1],m:a[2]}}function r(a){var b=new k.default;b.coords[0]=a.x;b.coords[1]=a.y;b.coords[2]=a.m;return b}function A(a){a=a.coords;return{x:a[0],y:a[1],z:a[2],
m:a[3]}}function u(a){var b=new k.default;b.coords[0]=a.x;b.coords[1]=a.y;b.coords[2]=a.z;b.coords[3]=a.m;return b}function n(a,b,c){if(!a)return null;for(var d=b?c?4:3:c?3:2,e=[],g=0;g<a.coords.length;g+=d){for(var f=[],h=0;h<d;h++)f.push(a.coords[g+h]);e.push(f)}return b?c?{points:e,hasZ:b,hasM:c}:{points:e,hasZ:b}:c?{points:e,hasM:c}:{points:e}}function t(a,b,c){if(!a)return null;var d=b?c?4:3:c?3:2,e=a.coords,g=[],f=0,h=0;for(a=a.lengths;h<a.length;h++){for(var n=a[h],k=[],p=0;p<n;p++){for(var l=
[],q=0;q<d;q++)l.push(e[f++]);k.push(l)}g.push(k)}return b?c?{paths:g,hasZ:b,hasM:c}:{paths:g,hasZ:b}:c?{paths:g,hasM:c}:{paths:g}}function x(a,b,c){if(!a)return null;var d=b?c?4:3:c?3:2,e=a.coords,g=[],f=0,h=0;for(a=a.lengths;h<a.length;h++){for(var n=a[h],k=[],p=0;p<n;p++){for(var l=[],q=0;q<d;q++)l.push(e[f++]);k.push(l)}g.push(k)}return b?c?{rings:g,hasZ:b,hasM:c}:{rings:g,hasZ:b}:c?{rings:g,hasM:c}:{rings:g}}function D(a,b,c,e,g,h){a.length=0;if(c){switch(c){case "esriGeometryPoint":c=v;e&&g?
c=u:e?c=C:g&&(c=r);for(e=0;e<b.length;e++){var n=b[e];g=n.geometry;n=n.attributes;g=g?c(g):void 0;a.push(new d.default(g,n,null,n[h]))}break;case "esriGeometryMultipoint":c=e?g?4:3:g?3:2;for(e=0;e<b.length;e++){g=b[e];var p=g.geometry;g=g.attributes;n=void 0;if(p){n=new k.default;n.lengths[0]=p.points.length;for(var l=n.coords,q=0,A=0,p=p.points;A<p.length;A++)for(var t=p[A],x=0;x<c;x++)l[q++]=t[x]}a.push(new d.default(n,g,null,g[h]))}break;case "esriGeometryPolyline":c=e?g?4:3:g?3:2;for(e=0;e<b.length;e++){g=
b[e];t=g.geometry;g=g.attributes;n=void 0;if(t)for(n=new k.default,l=n.lengths,q=n.coords,p=A=0,t=t.paths;p<t.length;p++){for(var x=t[p],y=0,B=x;y<B.length;y++)for(var D=B[y],F=0;F<c;F++)q[A++]=D[F];l.push(x.length)}a.push(new d.default(n,g,null,g[h]))}break;case "esriGeometryPolygon":c=e?g?4:3:g?3:2;for(e=0;e<b.length;e++){n=b[e];x=n.geometry;g=n.centroid;n=n.attributes;l=void 0;if(x)for(l=new k.default,q=l.lengths,A=l.coords,t=p=0,x=x.rings;t<x.length;t++){y=x[t];B=0;for(D=y;B<D.length;B++)for(var F=
D[B],m=0;m<c;m++)A[p++]=F[m];q.push(y.length)}g?a.push(new d.default(l,n,v(g),n[h])):a.push(new d.default(l,n,null,n[h]))}break;default:T.error("convertToFeatureSet:unknown-geometry",new f("Unable to parse unknown geometry type '"+c+"'")),a.length=0}return a}a.length=0}function G(a,b,c,d,e){a.length=0;switch(c){case "esriGeometryPoint":c=q;e&&d?c=A:e?c=y:d&&(c=B);for(d=0;d<b.length;d++){var g=b[d];e=g.geometry;g=g.attributes;e=e?c(e):null;a.push({attributes:g,geometry:e})}break;case "esriGeometryMultipoint":for(c=
0;c<b.length;c++){var h=b[c],g=h.geometry,h=h.attributes,k=void 0;g&&(k=n(g,d,e));a.push({attributes:h,geometry:k})}break;case "esriGeometryPolyline":for(c=0;c<b.length;c++)h=b[c],g=h.geometry,h=h.attributes,k=void 0,g&&(k=t(g,d,e)),a.push({attributes:h,geometry:k});break;case "esriGeometryPolygon":for(c=0;c<b.length;c++){var k=b[c],h=k.geometry,g=k.attributes,p=k.centroid,k=void 0;h&&(k=x(h,d,e));p?(h=q(p),a.push({attributes:g,centroid:h,geometry:k})):a.push({attributes:g,geometry:k})}break;default:T.error("convertToFeatureSet:unknown-geometry",
new f("Unable to parse unknown geometry type '"+c+"'"))}return a}function F(a,b,c,d,g,f){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;g=qa[g];var n=b.coords;b=b.lengths;var k=c?d?4:3:d?3:2;c=c?d?aa:M:d?M:X;if(!b.length)return c(a.coords,n,0,0,e(f,n[0]),h(f,n[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=k,a;for(var p,l,q,A=0,u,t=0,x=0;x<b.length;x++){var v=b[x];if(!(v<g)){var y=0;u=t;l=d=e(f,n[A]);q=p=h(f,n[A+1]);c(a.coords,
n,u,A,l,q);y++;A+=k;u+=k;for(var m=1;m<v;m++,A+=k)if(l=e(f,n[A]),q=h(f,n[A+1]),l!==d||q!==p)c(a.coords,n,u,A,l-d,q-p),u+=k,y++,d=l,p=q;y>=g&&(a.lengths.push(y),t=u)}}a.coords.length=t;return a.coords.length?a:null}function J(a,b,c,d,e,g,f){for(var h=f-c,n=0,k=0,p,l=g+c;l<f-c;l+=c){p=b[l];var q=b[l+1],A=b[g],u=b[g+1],t=b[h],x=b[h+1];A===t?p=Math.abs(p-A):(t=(x-u)/(t-A),p=Math.abs(t*p-q+(u-t*A))/Math.sqrt(t*t+1));p>n&&(k=l,n=p)}n>d?(J(a,b,c,d,e,g,k+c),J(a,b,c,d,e,k,f)):(e(a,b,a.length,g,b[g],b[g+1]),
e(a,b,a.length,h,b[h],b[h+1]))}function E(a,b,c,d,e){var f=b.coords,h=b.lengths,n=c?d?aa:M:d?M:X;c=c?d?4:3:d?3:2;if(!f.length)return a!==b&&(a.lengths.length=0,a.coords.length=0),a;if(!h.length)return n(a.coords,f,0,0,p(e,f[0]),g(e,f[1])),a!==b&&(a.lengths.length=0,a.coords.length=c),a;var k=e.scale;d=k[0];for(var k=k[1],l=0,q=0;q<h.length;q++){var A=h[q];a.lengths[q]=A;var u=p(e,f[l]),t=g(e,f[l+1]);n(a.coords,f,l,l,u,t);for(var l=l+c,x=1;x<A;x++,l+=c)u+=f[l]*d,t-=f[l+1]*k,n(a.coords,f,l,l,u,t)}a!==
b&&(a.lengths.length=h.length,a.coords.length=f.length);return a}function N(a,b,c,d,e,g){g=e?g?4:3:g?3:2;var f=c,h=c+g,n=0,k=0,p=c=0,l=0,q=0;for(--d;q<d;q++,f+=g,h+=g){var A=b[f],u=b[f+1],t=b[f+2],x=b[h],v=b[h+1],y=b[h+2],r=A*v-x*u,p=p+r,n=n+(A+x)*r,k=k+(u+v)*r;e&&(r=A*y-x*t,c+=(t+y)*r,l+=r);A<a[0]&&(a[0]=A);A>a[1]&&(a[1]=A);u<a[2]&&(a[2]=u);u>a[3]&&(a[3]=u);e&&(t<a[4]&&(a[4]=t),t>a[5]&&(a[5]=t))}0<p&&(p*=-1);0<l&&(l*=-1);if(!p)return null;a=[n,k,.5*p];e&&(a[3]=c,a[4]=.5*l);return a}function Z(a,
b,c,d,e){e=d?e?4:3:e?3:2;for(var g=b,f=b+e,h=0,n=0,k=0,p=0,l=0,q=c-1;l<q;l++,g+=e,f+=e){var A=a[g],u=a[g+1],t=a[g+2],x=a[f],v=a[f+1],y=a[f+2],r=d?S(A,u,t,x,v,y):ia(A,u,x,v);r&&(h+=r,d?(A=ha(A,u,t,x,v,y),n+=r*A[0],k+=r*A[1],p+=r*A[2]):(A=O(A,u,x,v),n+=r*A[0],k+=r*A[1]))}return 0<h?d?[n/h,k/h,p/h]:[n/h,k/h]:0<c?d?[a[b],a[b+1],a[b+2]]:[a[b],a[b+1]]:null}function ia(a,b,c,d){a=c-a;b=d-b;return Math.sqrt(a*a+b*b)}function S(a,b,c,d,e,g){a=d-a;b=e-b;c=g-c;return Math.sqrt(a*a+b*b+c*c)}function O(a,b,c,
d){return[a+.5*(c-a),b+.5*(d-b)]}function ha(a,b,c,d,e,g){return[a+.5*(d-a),b+.5*(e-b),c+.5*(g-c)]}Object.defineProperty(a,"__esModule",{value:!0});var T=b.getLogger("esri.tasks.support.optimizedFeatureSet"),qa={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},X=function(a,b,c,d,e,g){a[c]=e;a[c+1]=g},M=function(a,b,c,d,e,g){a[c]=e;a[c+1]=g;a[c+2]=b[d+2]},aa=function(a,b,c,d,e,g){a[c]=e;a[c+1]=g;a[c+2]=b[d+2];a[c+3]=b[d+3]};a.quantizeX=e;a.quantizeY=h;a.hydrateX=
p;a.hydrateY=g;a.convertToPoint=function(a,b,c){return a?b?c?A(a):y(a):c?B(a):q(a):null};a.convertToMultipoint=n;a.convertToPolyline=t;a.convertToPolygon=x;var K=[],Y=[];a.convertFromFeature=function(a,b,c,d,e){K[0]=a;a=D(Y,K,b,c,d,e)[0];K.length=Y.length=0;return a};a.convertFromFeatures=D;a.convertToFeature=function(a,b,c,d){Y[0]=a;G(K,Y,b,c,d);a=K[0];K.length=Y.length=0;return a};a.convertToFeatures=G;a.convertToFeatureSet=function(a){var b=a.objectIdFieldName,c=a.spatialReference,d=a.transform,
e=a.fields,g=a.hasM,f=a.hasZ,h=a.geometryType,n=a.exceededTransferLimit;a={features:G([],a.features,h,f,g),fields:e,geometryType:h,objectIdFieldName:b,spatialReference:c};d&&(a.transform=d);n&&(a.exceededTransferLimit=n);g&&(a.hasM=g);f&&(a.hasZ=f);return a};a.convertFromFeatureSet=function(a,b){var c=new l.default,d=a.hasM,e=a.hasZ,g=a.features,h=a.objectIdFieldName,n=a.spatialReference,k=a.geometryType,p=a.exceededTransferLimit,q=a.transform;c.fields=a.fields;c.geometryType=k;c.objectIdFieldName=
h||b;c.spatialReference=n;if(!c.objectIdFieldName)return T.error(new f("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),c;g&&D(c.features,g,k,e,d,c.objectIdFieldName);p&&(c.exceededTransferLimit=p);d&&(c.hasM=d);e&&(c.hasZ=e);q&&(c.transform=q);return c};a.hydrateOptimizedFeatureSet=function(a){var b=a.transform,c=a.hasM,d=a.hasZ;if(!b)return a;for(var e=0,g=a.features;e<g.length;e++){var f=g[e];f.geometry&&E(f.geometry,f.geometry,c,d,b);f.centroid&&E(f.centroid,f.centroid,
c,d,b)}a.transform=null;return a};a.quantizeOptimizedFeatureSet=function(a,b){var c=b.geometryType,e=b.features,g=b.hasM,h=b.hasZ;if("esriGeometryEnvelope"===c)return T.error(new f("optimized-features:invalid-geometry-type",'FeatureSet with geometry type "'+c+'" is not supported')),b;if(!a)return b;for(var n=0;n<e.length;n++){var p=e[n],l=new d.default(new k.default,p.attributes);F(l.geometry,p.geometry,g,h,c,a);p.centroid&&(l.centroid=new k.default,F(l.centroid,p.centroid,g,h,"esriGeometryPoint",
a));e[n]=l}b.transform=a;return b};a.quantizeOptimizedGeometry=F;a.quantizeOptimizedGeometryRemoveCollinear=function(a,b,c,d,g,f){a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);if(!b||!b.coords.length)return null;g=qa[g];var n=b.coords;b=b.lengths;var k=c?d?4:3:d?3:2;c=c?d?aa:M:d?M:X;if(!b.length)return c(a.coords,n,0,0,e(f,n[0]),h(f,n[1])),a.lengths.length&&(a.lengths.length=0),a.coords.length=k,a;for(var p,l,q,A=0,u,t=0,x=0;x<b.length;x++){var v=b[x];if(!(v<g)){var y=
0;u=t;d=p=e(f,n[A]);q=l=h(f,n[A+1]);c(a.coords,n,u,A,d,q);y++;for(var A=A+k,m=!1,r=0,B=0,D=1;D<v;D++,A+=k)if(d=e(f,n[A]),q=h(f,n[A+1]),d!==p||q!==l)p=d-p,l=q-l,m&&(0===r&&0===p||0===B&&0===l)?(r+=p,B+=l):(m=!0,r=p,B=l,u+=k,y++),c(a.coords,n,u,A,r,B),p=d,l=q;m&&(u+=k,c(a.coords,n,u,A,r,B));y>=g&&(a.lengths.push(y),t=u)}}a.coords.length!==t&&(a.coords.length=t);return a.coords.length?a:null};a.generalizeOptimizedGeometry=function(a,b,c,d,e,g){a.lengths.length&&(a.lengths.length=0);a.coords.length&&
(a.coords.length=0);if(!b||!b.coords.length)return null;e=qa[e];var f=b.coords;b=b.lengths;var h=c?d?4:3:d?3:2;c=c?d?aa:M:d?M:X;if(!b.length)return c(a.coords,f,0,0,f[0],f[1]),a.lengths.length&&(a.lengths.length=0),a.coords.length=h,a;for(var n=d=0;n<b.length;n++){var k=b[n];if(!(k<e)){var p=a.coords.length/h;J(a.coords,f,h,g,c,d,d+k*h);var l=a.coords.length/h-p;l>=e?a.lengths.push(l):a.coords.length=p*h}d+=k*h}return a.coords.length?a:null};a.getBoundsOptimizedGeometry=function(a,b,c,d){c=c?d?4:
3:d?3:2;var e=d=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,f=Number.NEGATIVE_INFINITY;if(b&&b.coords){b=b.coords;for(var h=0;h<b.length;h+=c){var n=b[h],k=b[h+1];d=Math.min(d,n);g=Math.max(g,n);e=Math.min(e,k);f=Math.max(f,k)}}a[0]=d;a[1]=e;a[2]=g;a[3]=f;return a};a.getQuantizedBoundsOptimizedGeometry=function(a,b,c,d){c=c?d?4:3:d?3:2;d=b.coords;var e=Number.POSITIVE_INFINITY,g=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,n=0,k=0;for(b=b.lengths;k<b.length;k++)for(var p=
b[k],l=d[n],q=d[n+1],e=Math.min(l,e),g=Math.min(q,g),f=Math.max(l,f),h=Math.max(q,h),n=n+c,A=1;A<p;A++,n+=c){var u=d[n],t=d[n+1],l=l+u,q=q+t;0>u&&(e=Math.min(e,l));0<u&&(f=Math.max(f,l));0>t?g=Math.min(g,q):0<t&&(h=Math.max(h,q))}a[0]=e;a[1]=g;a[2]=f;a[3]=h;return a};a.hydrateOptimizedGeometry=E;a.getCentroidOptimizedGeometry=function(a,b,c,d){if(!b||!b.lengths.length)return null;a.lengths.length&&(a.lengths.length=0);a.coords.length&&(a.coords.length=0);for(var e=a.coords,g=[],f=c?[Number.POSITIVE_INFINITY,
Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],h=b.lengths,n=b.coords,k=c?d?4:3:d?3:2,p=0,l=0;l<h.length;l++){var q=h[l],A=N(f,n,p,q,c,d);A&&g.push(A);p+=q*k}g.sort(function(a,b){var d=a[2]-b[2];0===d&&c&&(d=a[4]-b[4]);return d});g.length&&(k=6*g[0][2],e[0]=g[0][0]/k,e[1]=g[0][1]/k,c&&(k=6*g[0][4],e[2]=0!==k?g[0][3]/k:
0),e[0]<f[0]||e[0]>f[1]||e[1]<f[2]||e[1]>f[3]||c&&(e[2]<f[4]||e[2]>f[5]))&&(e.length=0);if(!e.length)if(b=b.lengths[0]?Z(n,0,h[0],c,d):null)e[0]=b[0],e[1]=b[1],c&&2<b.length&&(e[2]=b[2]);else return null;return a};a.lineCentroid=Z;a.getLength2D=ia;a.getLength3D=S;a.getMidpoint2D=O;a.getMidpoint3D=ha})},"esri/layers/graphics/OptimizedFeature":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){return function(a,b,c,l){void 0===a&&(a=null);
void 0===b&&(b={});this.geometry=a;this.attributes=b;c&&(this.centroid=c);null!=l&&(this.objectId=l)}}();a.default=c})},"esri/layers/graphics/OptimizedFeatureSet":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){return function(){this.spatialReference=this.geometryType=this.geometryProperties=this.geohashFieldName=this.globalIdFieldName=this.objectIdFieldName=null;this.hasM=this.hasZ=!1;this.features=[];this.fields=[];this.transform=
null;this.exceededTransferLimit=!1}}();a.default=c})},"esri/layers/graphics/OptimizedGeometry":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){return function(a,b){void 0===a&&(a=[]);void 0===b&&(b=[]);this.lengths=a;this.coords=b}}();a.default=c})},"esri/layers/graphics/data/DefaultSpatialIndex":function(){define("require exports @dojo/framework/shim/array @dojo/framework/shim/Map ../../../core/Error ../../../core/Logger ./FeatureStore".split(" "),
function(c,a,f,b,d,l,k){Object.defineProperty(a,"__esModule",{value:!0});var e=l.getLogger("esri.layers.graphics.data.FeatureStore"),h=[];c=function(){function a(a){this._featuresById=new b.default;this._store=new k.default(a)}Object.defineProperty(a.prototype,"geometryType",{get:function(){return this._store.featureInfo.geometryType},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"hasM",{get:function(){return this._store.featureInfo.hasM},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"hasZ",{get:function(){return this._store.featureInfo.hasZ},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"numFeatures",{get:function(){return this._store.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"fullBounds",{get:function(){return this._store.bounds},enumerable:!0,configurable:!0});a.prototype.setEngine=function(a){this._engine=a};a.prototype.add=function(a){if(a){var b=a.objectId;if(null==b)e.error(new d("featurestore:invalid-feature","feature id is missing",
{feature:a}));else{var c=this._featuresById.get(b);c?this._store.replace(c,a):this._store.add(a);this._featuresById.set(b,a);this._clearCache()}}};a.prototype.addMany=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c){var g=c.objectId;if(null==g)e.error(new d("featurestore:invalid-feature","feature id is missing",{feature:c}));else{var f=this._featuresById.get(g);f?this._store.replace(f,c):h.push(c);this._featuresById.set(g,c)}}}this._store.addMany(h);h.length=0;this._clearCache()};a.prototype.clear=
function(){this._featuresById.clear();this._store.clear();this._clearCache()};a.prototype.removeManyById=function(a){for(var b=0;b<a.length;b++){var c=a[b];this._store.remove(this._featuresById.get(c));this._featuresById.delete(c)}this._clearCache()};a.prototype.forEachBounds=function(a,b){this._store.forEachBounds(a,b)};a.prototype.getAllFeatures=function(){return f.from(this._featuresById,function(a){return a[1]})};a.prototype.getFeature=function(a){return this._featuresById.get(a)};a.prototype.hasFeature=
function(a){return this._featuresById.has(a)};a.prototype.forEachFeatureInBounds=function(a,b){this._store.forEachFeatureInBounds(a,b)};a.prototype.mapFeaturesInBounds=function(a,b){return this._store.mapFeaturesInBounds(a,b)};a.prototype.transferIds=function(a,b){for(var c=[],d=0;d<b.length;d++){var e=this._featuresById.get(b[d]);e&&(this._store.remove(e),this._featuresById.delete(e.objectId),c.push(e))}a.addMany(c);this._clearCache()};a.prototype.transferIdRange=function(a,b,c){for(var d=[];b<c;b++){var e=
this._featuresById.get(b);e&&(this._store.remove(e),this._featuresById.delete(e.objectId),d.push(e))}a.addMany(d);this._clearCache()};a.prototype.transferIf=function(a,b){var c=this,d=[];this._featuresById.forEach(function(a,e){b(a)&&(c._store.remove(a),c._featuresById.delete(a.objectId),d.push(a))});a.addMany(d);this._clearCache()};a.prototype.transferAll=function(a){var b=this,c=[];this._featuresById.forEach(function(a,d){b._store.remove(a);b._featuresById.delete(a.objectId);c.push(a)});a.addMany(c);
this._clearCache()};a.prototype._clearCache=function(){this._engine&&this._engine.clearCache()};return a}();a.default=c})},"@dojo/framework/shim/array":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define("require exports tslib ./global ./iterator ./number ./support/has ./support/util".split(" "),c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var f=
c("tslib"),b=c("./global"),d=c("./iterator"),l=c("./number"),k=c("./support/has");c=c("./support/util");if(k.default("es6-array")&&k.default("es6-array-fill"))a.from=b.default.Array.from,a.of=b.default.Array.of,a.copyWithin=c.wrapNative(b.default.Array.prototype.copyWithin),a.fill=c.wrapNative(b.default.Array.prototype.fill),a.find=c.wrapNative(b.default.Array.prototype.find),a.findIndex=c.wrapNative(b.default.Array.prototype.findIndex);else{var e=function(a){if(isNaN(a))return 0;a=Number(a);isFinite(a)&&
(a=Math.floor(a));return Math.min(Math.max(a,0),l.MAX_SAFE_INTEGER)},h=function(a){a=Number(a);return isNaN(a)?0:0!==a&&isFinite(a)?(0<a?1:-1)*Math.floor(Math.abs(a)):a},p=function(a,b){return 0>a?Math.max(b+a,0):Math.min(a,b)};a.from=function(a,b,c){if(null==a)throw new TypeError("from: requires an array-like object");b&&c&&(b=b.bind(c));c=e(a.length);var g="function"===typeof this?Object(new this(c)):Array(c);if(!d.isArrayLike(a)&&!d.isIterable(a))return g;if(d.isArrayLike(a)){if(0===c)return[];
for(var h=0;h<a.length;h++)g[h]=b?b(a[h],h):a[h]}else{h=0;try{for(var k=f.__values(a),p=k.next();!p.done;p=k.next()){var l=p.value;g[h]=b?b(l,h):l;h++}}catch(t){q={error:t}}finally{try{p&&!p.done&&(n=k.return)&&n.call(k)}finally{if(q)throw q.error;}}}void 0!==a.length&&(g.length=c);return g;var q,n};a.of=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];return Array.prototype.slice.call(a)};a.copyWithin=function(a,b,c,d){if(null==a)throw new TypeError("copyWithin: target must be an array-like object");
var g=e(a.length);b=p(h(b),g);c=p(h(c),g);d=p(void 0===d?g:h(d),g);d=Math.min(d-c,g-b);g=1;b>c&&b<c+d&&(g=-1,c+=d-1,b+=d-1);for(;0<d;)c in a?a[b]=a[c]:delete a[b],b+=g,c+=g,d--;return a};a.fill=function(a,b,c,d){var g=e(a.length);c=p(h(c),g);for(d=p(void 0===d?g:h(d),g);c<d;)a[c++]=b;return a};a.find=function(b,c,d){c=a.findIndex(b,c,d);return-1!==c?b[c]:void 0};a.findIndex=function(a,b,c){var d=e(a.length);if(!b)throw new TypeError("find: second argument must be a function");c&&(b=b.bind(c));for(c=
0;c<d;c++)if(b(a[c],c,a))return c;return-1}}k.default("es7-array")?a.includes=c.wrapNative(b.default.Array.prototype.includes):a.includes=function(a,b,c){void 0===c&&(c=0);var d;d=a.length;d=Number(d);isNaN(d)?d=0:(isFinite(d)&&(d=Math.floor(d)),d=Math.min(Math.max(d,0),l.MAX_SAFE_INTEGER));for(;c<d;++c){var e=a[c];if(b===e||b!==b&&e!==e)return!0}return!1}})},"@dojo/framework/shim/number":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==
c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports","./global"],c)})(function(c,a){function f(a){return"number"===typeof a&&d.default.isFinite(a)}function b(a){return f(a)&&Math.floor(a)===a}Object.defineProperty(a,"__esModule",{value:!0});var d=c("./global");a.EPSILON=1;a.MAX_SAFE_INTEGER=Math.pow(2,53)-1;a.MIN_SAFE_INTEGER=-a.MAX_SAFE_INTEGER;a.isNaN=function(a){return"number"===typeof a&&d.default.isNaN(a)};a.isFinite=f;a.isInteger=b;a.isSafeInteger=function(c){return b(c)&&
Math.abs(c)<=a.MAX_SAFE_INTEGER}})},"@dojo/framework/shim/Map":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define("require exports tslib ./iterator ./global ./object ./support/has ./Symbol".split(" "),c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var f=c("tslib"),b=c("./iterator"),d=c("./global"),l=c("./object"),k=c("./support/has");c("./Symbol");
a.Map=d.default.Map;k.default("es6-map")||(a.Map=(e=function(){function a(a){this._keys=[];this._values=[];this[Symbol.toStringTag]="Map";if(a)if(b.isArrayLike(a))for(var c=0;c<a.length;c++){var d=a[c];this.set(d[0],d[1])}else try{for(var c=f.__values(a),e=c.next();!e.done;e=c.next())d=e.value,this.set(d[0],d[1])}catch(B){h={error:B}}finally{try{e&&!e.done&&(k=c.return)&&k.call(c)}finally{if(h)throw h.error;}}var h,k}a.prototype._indexOfKey=function(a,b){for(var c=0,d=a.length;c<d;c++)if(l.is(a[c],
b))return c;return-1};Object.defineProperty(a.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0});a.prototype.clear=function(){this._keys.length=this._values.length=0};a.prototype.delete=function(a){a=this._indexOfKey(this._keys,a);if(0>a)return!1;this._keys.splice(a,1);this._values.splice(a,1);return!0};a.prototype.entries=function(){var a=this,c=this._keys.map(function(b,c){return[b,a._values[c]]});return new b.ShimIterator(c)};a.prototype.forEach=function(a,
b){for(var c=this._keys,d=this._values,e=0,g=c.length;e<g;e++)a.call(b,d[e],c[e],this)};a.prototype.get=function(a){a=this._indexOfKey(this._keys,a);return 0>a?void 0:this._values[a]};a.prototype.has=function(a){return-1<this._indexOfKey(this._keys,a)};a.prototype.keys=function(){return new b.ShimIterator(this._keys)};a.prototype.set=function(a,b){var c=this._indexOfKey(this._keys,a),c=0>c?this._keys.length:c;this._keys[c]=a;this._values[c]=b;return this};a.prototype.values=function(){return new b.ShimIterator(this._values)};
a.prototype[Symbol.iterator]=function(){return this.entries()};return a}(),e[Symbol.species]=e,e));a.default=a.Map;var e})},"@dojo/framework/shim/object":function(){(function(c){"object"===typeof module&&"object"===typeof module.exports?(c=c(require,exports),void 0!==c&&(module.exports=c)):"function"===typeof define&&define.amd&&define(["require","exports","./global","./support/has","./Symbol"],c)})(function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var f=c("./global"),b=c("./support/has"),
d=c("./Symbol");b.default("es6-object")?(c=f.default.Object,a.assign=c.assign,a.getOwnPropertyDescriptor=c.getOwnPropertyDescriptor,a.getOwnPropertyNames=c.getOwnPropertyNames,a.getOwnPropertySymbols=c.getOwnPropertySymbols,a.is=c.is,a.keys=c.keys):(a.keys=function(a){return Object.keys(a).filter(function(a){return!a.match(/^@@.+/)})},a.assign=function(b){for(var c=[],d=1;d<arguments.length;d++)c[d-1]=arguments[d];if(null==b)throw new TypeError("Cannot convert undefined or null to object");var f=
Object(b);c.forEach(function(b){b&&a.keys(b).forEach(function(a){f[a]=b[a]})});return f},a.getOwnPropertyDescriptor=function(a,b){d.isSymbol(b);return Object.getOwnPropertyDescriptor(a,b)},a.getOwnPropertyNames=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!a.match(/^@@.+/)})},a.getOwnPropertySymbols=function(a){return Object.getOwnPropertyNames(a).filter(function(a){return!!a.match(/^@@.+/)}).map(function(a){return Symbol.for(a.substring(2))})},a.is=function(a,b){return a===
b?0!==a||1/a===1/b:a!==a&&b!==b});b.default("es2017-object")?(c=f.default.Object,a.getOwnPropertyDescriptors=c.getOwnPropertyDescriptors,a.entries=c.entries,a.values=c.values):(a.getOwnPropertyDescriptors=function(b){return a.getOwnPropertyNames(b).reduce(function(c,d){c[d]=a.getOwnPropertyDescriptor(b,d);return c},{})},a.entries=function(b){return a.keys(b).map(function(a){return[a,b[a]]})},a.values=function(b){return a.keys(b).map(function(a){return b[a]})})})},"esri/layers/graphics/data/FeatureStore":function(){define("require exports @dojo/framework/shim/Map ../../../core/has ../../../core/libs/rbush/rbush ../../../geometry/support/aaBoundingRect ../featureConversionUtils".split(" "),
function(c,a,f,b,d,l,k){function e(a,b){h.minX=b[0];h.minY=b[1];h.maxX=b[2];h.maxY=b[3];return a.search(h)}Object.defineProperty(a,"__esModule",{value:!0});var h={minX:0,minY:0,maxX:0,maxY:0},p=[];c=function(){function a(a){this._boundsByFeature=new f.default;this._featuresByBounds=new f.default;this._index=d(9,b("csp-restrictions")?function(a){return{minX:a[0],minY:a[1],maxX:a[2],maxY:a[3]}}:["[0]","[1]","[2]","[3]"]);this.featureInfo=a}Object.defineProperty(a.prototype,"bounds",{get:function(){if(!this.size)return null;
var a=l.create(l.NEGATIVE_INFINITY);this._boundsByFeature.forEach(function(b){b&&(a[0]=Math.min(b[0],a[0]),a[1]=Math.min(b[1],a[1]),a[2]=Math.max(b[2],a[2]),a[3]=Math.max(b[3],a[3]))});return a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._boundsByFeature.size},enumerable:!0,configurable:!0});a.prototype.add=function(a){if(a)if(a.geometry){var b=k.getBoundsOptimizedGeometry(l.create(),a.geometry,this.featureInfo.hasZ,this.featureInfo.hasM);
this._boundsByFeature.set(a,b);this._featuresByBounds.set(b,a);this._index.insert(b)}else this._boundsByFeature.set(a,null)};a.prototype.addMany=function(a){for(var b=this.featureInfo,c=b.hasM,b=b.hasZ,d=0;d<a.length;d++){var e=a[d];if(e)if(e.geometry){var g=k.getBoundsOptimizedGeometry(l.create(),e.geometry,b,c);this._boundsByFeature.set(e,g);this._featuresByBounds.set(g,e);p.push(g)}else this._boundsByFeature.set(e,null)}this._index.load(p);p.length=0};a.prototype.clear=function(){this._index.clear();
this._boundsByFeature.clear();this._featuresByBounds.clear()};a.prototype.forEachBounds=function(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=this.getBounds(d);e&&b(e,d)}};a.prototype.getBounds=function(a){return this._boundsByFeature.get(a)};a.prototype.has=function(a){return this._boundsByFeature.has(a)};a.prototype.remove=function(a){if(a){var b=this._boundsByFeature.get(a);b&&(this._index.remove(b),this._featuresByBounds.delete(b));this._boundsByFeature.delete(a)}};a.prototype.removeMany=function(a){for(var b=
0;b<a.length;b++)this.remove(a[b])};a.prototype.replace=function(a,b){if(this._boundsByFeature.has(a)){var c=this._boundsByFeature.get(a);c&&(this._index.remove(c),this._boundsByFeature.delete(a),this._featuresByBounds.delete(c));b&&(b.geometry?(k.getBoundsOptimizedGeometry(c,b.geometry,this.featureInfo.hasZ,this.featureInfo.hasM),this._boundsByFeature.set(b,c),this._featuresByBounds.set(c,b),this._index.insert(c)):this._boundsByFeature.set(b,null))}};a.prototype.forEachFeatureInBounds=function(a,
b){var c=0;for(a=e(this._index,a);c<a.length;c++)b(this._featuresByBounds.get(a[c]))};a.prototype.mapFeaturesInBounds=function(a,b){var c=[],d=0;for(a=e(this._index,a);d<a.length;d++)c.push(b(this._featuresByBounds.get(a[d])));return c};return a}();a.default=c})},"esri/layers/graphics/data/QueryEngine":function(){define("require exports ../../../core/tsSupport/assignHelper @dojo/framework/shim/Map @dojo/framework/shim/Set ../../../geometry ../../../core/Error ../../../core/Logger ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/aaBoundingRect ../../../geometry/support/normalizeUtils ../../../geometry/support/scaleUtils ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/spatialReferenceUtils ./attributeSupport ./projectionSupport ./QueryEngineCapabilities ./QueryEngineResult ./SpatialQueryCache ./spatialQuerySupport ./utils ../../../tasks/support/Query".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A,u,n,t,x,D){function G(a){return a?JSON.parse(JSON.stringify(a,["latestWkid","wkid","wkt"])):a}function F(a,b,c,d,e,g,f,h){f&&!g?d.forEachFeatureInBounds(e,function(b){a.push({attributes:b.attributes,centroid:x.getCentroid(c,b,h)})}):g&&!f?d.forEachFeatureInBounds(e,function(d){b.add(d.objectId);a.push(new E(d.attributes,x.getGeometry(c,d,0,h)))}):d.forEachFeatureInBounds(e,function(d){b.add(d.objectId);a.push(new E(d.attributes,x.getGeometry(c,d,0,h),x.getCentroid(c,
d,h)))})}Object.defineProperty(a,"__esModule",{value:!0});var J=e.getLogger("esri.layers.graphics.data.QueryEngine"),E=function(){return function(a,b,c){this.attributes=a;this.geometry=b;this.centroid=c}}(),N={},Z=new d.default;c=function(){function a(a){var c=this;this.capabilities={query:A.queryCapabilities};this.fieldsMap=new b.default;this.geometryType=a.geometryType;this.hasM=a.hasM;this.hasZ=a.hasZ;this.objectIdField=a.objectIdField;this.spatialReference=a.spatialReference;this.definitionExpression=
a.definitionExpression;this.cacheSpatialQueries=a.cacheSpatialQueries||!1;this.gdbVersion=a.gdbVersion;this.historicMoment=a.historicMoment;this.spatialIndex=a.spatialIndex;this.spatialIndex.setEngine(this);this.timeInfo=a.timeInfo;this.cacheSpatialQueries&&(this._geometryQueryCache=new n.default);a.fields.forEach(function(a){c.fieldsMap.set(a.name.trim(),a);c.fieldsMap.set(a.name.trim().toLowerCase(),a)})}a.prototype.destroy=function(){this.clearCache();this.fieldsMap.clear()};Object.defineProperty(a.prototype,
"fullExtent",{get:function(){var a=this.spatialIndex.fullBounds;return a?{xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:G(this.spatialReference)}:null},enumerable:!0,configurable:!0});a.prototype.clearCache=function(){this._geometryQueryCache&&this._geometryQueryCache.clear();this._allItems=null};a.prototype.executeQuery=function(a){var b=this;void 0===a&&(a=new D);var c=a.clone();return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).catch(function(a){if(a===
N)return new u.default([],b);throw a;}).then(function(a){return a.createQueryResponse(c)})};a.prototype.executeQueryForCount=function(a){var b=this;void 0===a&&(a=new D);var c=a.clone();c.returnGeometry=!1;c.returnCentroid=!1;c.outSpatialReference=null;return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){return a.size}).catch(function(a){if(a===
N)return 0;throw a;})};a.prototype.executeQueryForExtent=function(a){var b=this;void 0===a&&(a=new D);var c=a.clone(),d=c.outSpatialReference;return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(){c.returnGeometry=!0;c.returnCentroid=!1;c.outSpatialReference=null;return c}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){var c=a.size;
if(!c)return{count:c,extent:null};var e={xmin:Number.POSITIVE_INFINITY,ymin:Number.POSITIVE_INFINITY,xmax:Number.NEGATIVE_INFINITY,ymax:Number.NEGATIVE_INFINITY,spatialReference:G(b.spatialReference)};b.spatialIndex.forEachBounds(a.items,function(a){e.xmin=Math.min(a[0],e.xmin);e.ymin=Math.min(a[1],e.ymin);e.xmax=Math.max(a[2],e.xmax);e.ymax=Math.max(a[3],e.ymax)});a=r.project(e,a.spatialReference,d);a.spatialReference=G(d&&d.toJSON()||b.spatialReference);if(0===a.xmax-a.xmin){var g=v.getMetersPerUnitForSR(a.spatialReference);
a.xmin-=g;a.xmax+=g}0===a.ymax-a.ymin&&(g=v.getMetersPerUnitForSR(a.spatialReference),a.ymin-=g,a.ymax+=g);return{count:c,extent:a}}).catch(function(a){if(a===N)return{count:0,extent:null};throw a;})};a.prototype.executeQueryForIds=function(a){var b=this;void 0===a&&(a=new D);var c=a.clone();c.returnGeometry=!1;c.returnCentroid=!1;c.outSpatialReference=null;return this._normalizeQuery(c).then(function(a){return b._checkQuerySupport(a)}).then(function(a){return b._executeGeometryQuery(a)}).then(function(a){return a.executeObjectIdsQuery(c)}).then(function(a){return a.executeAttributesQuery(c)}).then(function(a){a=
a.items;for(var b=[],c=0;c<a.length;c++)b[c]=a[c].objectId;return b}).catch(function(a){if(a===N)return[];throw a;})};a.prototype.executeTileQuery=function(a,b){var c=this,e=b.returnGeometry,f=b.returnCentroid,h=b.pixelBuffer;b=new d.default;var n=[],h=h*a.resolution,k=g.pad(a.bounds,h,g.create());F(n,b,this,this.spatialIndex,k,e,f,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[a.bounds[0],a.bounds[3]]});if("esriGeometryPoint"===this.geometryType||f){var p=y.getInfo(this.spatialReference);
if(p){var l=p.valid,p=l[0],l=l[1];if(k[0]<p){var A=g.fromValues(l-h,k[1],l,k[3]);F(n,b,this,this.spatialIndex,A,e,f,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[l,a.bounds[3]]})}k[2]>l&&(h=g.fromValues(p,k[1],p+h,k[3]),F(n,b,this,this.spatialIndex,h,e,f,{originPosition:"upperLeft",scale:[a.resolution,a.resolution],translate:[p-l+a.bounds[0],a.bounds[3]]}))}}n.sort(function(a,b){return a.attributes[c.objectIdField]-b.attributes[c.objectIdField]});return{features:n,objectIds:b}};
a.prototype.executeTileQueryForIds=function(a,b){a=g.pad(a.bounds,b.pixelBuffer*a.resolution,g.create());return this.spatialIndex.mapFeaturesInBounds(a,function(a){return a.objectId})};a.prototype.executeQueryForLatestObservations=function(a){var b=this;if(this.timeInfo)return this.executeQuery(a).then(function(a){return b._filterLatest(a,b.timeInfo)});J.error(new k("invalid-query","Unable to make time-based query as the underlying service does include TimeInfo"))};a.prototype._filterLatest=function(a,
c){var d=c.trackIdField,e=c.startTimeField;c=c.endTimeField||e;for(var e=new b.default,g=[],h=0,n=a.features;h<n.length;h++){var k=n[h],p=k.attributes[d],l=k.attributes[c];(!e.has(p)||e.get(p).attributes[c]<l)&&e.set(p,k)}e.forEach(function(a){return g.push(a)});return f({},a,{features:g})};a.prototype._getAll=function(){this._allItems||(this._allItems=new u.default(this.spatialIndex.getAllFeatures(),this));return this._allItems};a.prototype._normalizeQuery=function(a){var b=this,c=this.definitionExpression,
d=a.where,e=a.geometry,g=a.outFields,f=a.orderByFields,n=a.groupByFieldsForStatistics,k=a.outStatistics;a.where=d=d&&d.trim();if(!d||/^1 *= *1$/.test(d)||c&&c===d)a.where=null;if(g)for(c=0;c<g.length;c++)g[c]=g[c].trim();if(f)for(c=0;c<f.length;c++)f[c]=f[c].trim();if(n)for(c=0;c<n.length;c++)n[c]=n[c].trim();if(k)for(c=0;c<k.length;c++)k[c].onStatisticField=k[c].onStatisticField.trim();if(!e)return h.resolve(a);a.outSpatialReference||(a.outSpatialReference=e.spatialReference);return this._getInputGeometry(a).then(function(b){return a.geometry=
b}).then(function(a){return r.checkProjectionSupport(a.spatialReference,b.spatialReference)}).then(function(){return q.normalizeCentralMeridian(a.geometry)}).then(function(a){return r.project(a[0].toJSON(),a[0].spatialReference,b.spatialReference)}).then(function(c){if(!c)throw N;c.spatialReference=b.spatialReference;return a.read({geometry:c})})};a.prototype._executeGeometryQuery=function(a){var b=this,c=a.geometry,d=a.outSpatialReference,e=a.spatialRelationship,g=d&&!C.equals(this.spatialReference,
d),f=g?JSON.stringify({geometry:c,spatialRelationship:e,outSpatialReference:d}):JSON.stringify({geometry:c,spatialRelationship:e});if(this.cacheSpatialQueries&&this._geometryQueryCache.size&&this._geometryQueryCache.has(f))return h.resolve(this._geometryQueryCache.get(f));var n=null;if(c){var k=this._searchSpatialIndex(this._getQueryBBoxes(c));if(!k.length)return c=new u.default([],this),this.cacheSpatialQueries&&this._geometryQueryCache.set(f,c),h.resolve(c);n="envelope-intersects"===a.spatialRelationship||
"esriGeometryPoint"===this.geometryType&&t.canQueryWithRBush(c)?h.resolve(new u.default(k,this)):t.getSpatialQueryOperator(e,c,this.geometryType).then(function(a){if(a){var c=k.filter(function(c){return a(x.getGeometry(b,c))});return new u.default(c,b)}})}else n=h.resolve(this._getAll());return n.then(function(c){if(g&&(a.returnGeometry||a.returnCentroid))return c.project(d).then(function(a){b.cacheSpatialQueries&&b._geometryQueryCache.set(f,a);return a});b.cacheSpatialQueries&&b._geometryQueryCache.set(f,
c);return c})};a.prototype._getInputGeometry=function(a){var b=a.geometry,c=a.distance,d=a.units;if(null==c)return h.resolve(b);a=b.spatialReference;var e=d||v.getUnitString(a),d=null,d=a&&(a.isGeographic||a.isWebMercator)?h.resolve(b):r.checkProjectionSupport(a,l.SpatialReference.WGS84).then(function(){return p.project(b,l.SpatialReference.WGS84)});return d.then(function(a){return t.getGeodesicBufferOperator().then(function(b){return b(a,c,e)})})};a.prototype._getQueryBBoxes=function(a){if("point"===
a.type)return[g.fromValues(a.x,a.y,a.x,a.y)];a=t.canQueryWithRBush(a)?a:a.extent;switch(a.type){case "extent":return[g.fromExtent(a)];case "polygon":return a.rings.map(function(a){return g.fromValues(a[0][0],a[0][1],a[2][0],a[2][1])})}};a.prototype._searchSpatialIndex=function(a){for(var b=[],c=0;c<a.length;c++)this.spatialIndex.forEachFeatureInBounds(a[c],function(a){Z.has(a)||(b.push(a),Z.add(a))});Z.clear();return b};a.prototype._checkQuerySupport=function(a){return 0>a.distance||null!=a.geometryPrecision||
a.multipatchOption||a.pixelSize||a.relationParameter||a.text||a.timeExtent?h.reject(new k("feature-store:unsupported-query","Unsupported query options",{query:a})):h.all([this._checkAttributesQuerySupport(a),this._checkStatisticsQuerySupport(a),t.checkSpatialQuerySupport(a,this.geometryType,this.spatialReference),r.checkProjectionSupport(this.spatialReference,a.outSpatialReference)]).then(function(){return a})};a.prototype._checkAttributesQuerySupport=function(a){var b=a.outFields,c=a.orderByFields,
d=a.returnDistinctValues;c&&0<c.length&&(c=c.map(function(a){return-1<a.indexOf(" ASC")?a.split(" ASC")[0]:-1<a.indexOf(" DESC")?a.split(" DESC")[0]:a}),B.validateFields(this.fieldsMap,c,"orderByFields contains missing fields"));if(b&&0<b.length)B.validateFields(this.fieldsMap,b,"outFields contains missing fields");else if(d)throw new k("feature-store:unsupported-query","outFields should be specified for returnDistinctValues",{query:a});B.validateWhere(this.fieldsMap,a.where)};a.prototype._checkStatisticsQuerySupport=
function(a){var b=a.outStatistics,c=a.groupByFieldsForStatistics,d=a.having,e=c&&c.length,g=b&&b.length;if(d){if(!e||!g)return h.reject(new k("feature-store:unsupported-query","outStatistics and groupByFieldsForStatistics should be specified with having",{query:a}));B.validateHaving(this.fieldsMap,d,b)}if(g)for(d=b.map(function(a){return a.onStatisticField.trim()}),B.validateFields(this.fieldsMap,d,"onStatisticFields contains missing fields"),e&&B.validateFields(this.fieldsMap,c,"groupByFieldsForStatistics contains missing fields"),
c=0;c<b.length;c++){var d=b[c],g=d.onStatisticField,f=d.statisticType;if((!e||"count"!==f)&&B.hasInvalidFieldType(g,this.fieldsMap))return h.reject(new k("feature-store:unsupported-query","outStatistics contains non-numeric fields",{definition:d,query:a}))}};return a}();a.default=c})},"esri/geometry/projection":function(){define("require exports dojo/Deferred ./pe ./SpatialReference ./support/GeographicTransformation".split(" "),function(c,a,f,b,d,l){function k(a,b,c,f,k){void 0===f&&(f=null);void 0===
k&&(k=!1);if(null===f){var p=l.cacheKey(b,c);void 0!==g[p]?f=g[p]:(f=e(b,c,null),null===f&&(f=new l),g[p]=f)}return h._project(a,b,c instanceof d||!1===k?c:new d(c),f,k)}function e(a,b,c){void 0===c&&(c=null);a=h._getTransformation(a,b,c);return null!==a?l.fromGE(a):null}Object.defineProperty(a,"__esModule",{value:!0});var h=null;a.isLoaded=function(){return!!h&&b.isLoaded()};a.isSupported=function(){return b.isSupported()};var p=null;a.load=function(){if(p)return p.promise;p=new f;var a=b.load();
c(["./geometryEngine"],function(c){h=c;a.then(function(){h._enableProjection(b);p.resolve()},function(a){p.reject(a)})});return p.promise};a.project=function(a,b,c){void 0===c&&(c=null);return a instanceof Array?0===a.length?[]:k(a,a[0].spatialReference,b,c):k([a],a.spatialReference,b,c)[0]};var g={};a.projectMany=k;a.getTransformation=e;a.getTransformations=function(a,b,c){void 0===c&&(c=null);a=h._getTransformationBySuitability(a,b,c);if(null!==a){b=[];for(c=0;c<a.length;c++)b.push(l.fromGE(a[c]));
return b}return[]}})},"esri/geometry/pe":function(){define(["require","exports","../core/tsSupport/extendsHelper","dojo/Deferred","../core/has"],function(c,a,f,b,d){function l(b){function c(a,b,c){a[b]=c(a[b])}a._pe=b;q.init();v.init();y.init();C.init();B.init();a.PeGCSExtent=function(b){function c(){return null!==b&&b.apply(this,arguments)||this}f(c,b);c.prototype.destroy=function(){a._pe.destroy(this)};return c}(a._pe.PeGCSExtent);for(var d=0,e=[a._pe.PeDatum,a._pe.PeGeogcs,a._pe.PeGeogtran,a._pe.PeObject,
a._pe.PeParameter,a._pe.PePrimem,a._pe.PeProjcs,a._pe.PeSpheroid,a._pe.PeUnit];d<e.length;d++)b=e[d],c(b.prototype,"getName",function(a){return function(){return a.call(this,Array(q.PE_NAME_MAX))}});d=0;for(e=[a._pe.PeGeogtran,a._pe.PeProjcs];d<e.length;d++)b=e[d],c(b.prototype,"getParameters",function(b){return function(){for(var c=Array(q.PE_PARM_MAX),d=b.call(this),e=0;e<c.length;e++){var g=a._pe.getValue(d,"*");c[e]=g?a._pe.wrapPointer(g,a._pe.PeParameter):null;d+=Int32Array.BYTES_PER_ELEMENT}return c}});
c(a._pe.PeHorizon.prototype,"getCoord",function(a){return function(){var b=this.getSize();if(!b)return null;var c=[],d=a.call(this);p(c,b,d);return c}});c(a._pe.PeGTlistExtendedEntry.prototype,"getEntries",function(b){var c=a._pe._pe_getPeGTlistExtendedGTsSize();return function(){var d=null,e=b.call(this);if(!a._pe.compare(e,a._pe.NULL)){var d=[e],g=this.getSteps();if(1<g)for(var e=a._pe.getPointer(e),f=1;f<g;f++)d.push(a._pe.wrapPointer(e+c*f,a._pe.PeGTlistExtendedGTs))}return d}});var g=a._pe._pe_getPeHorizonSize();
b=function(b){return function(){var c=this._cache;c||(this._cache=c=new Map);if(c.has(b))return c.get(b);var d=null,e=b.call(this);if(!a._pe.compare(e,a._pe.NULL)){var d=[e],f=e.getNump();if(1<f)for(var e=a._pe.getPointer(e),h=1;h<f;h++)d.push(a._pe.wrapPointer(e+g*h,a._pe.PeHorizon))}c.set(b,d);return d}};c(a._pe.PeProjcs.prototype,"horizonGcsGenerate",b);c(a._pe.PeProjcs.prototype,"horizonPcsGenerate",b);a._pe.PeObject.prototype.toString=function(b){void 0===b&&(b=q.PE_STR_OPTS_NONE);a._pe.ensureCache.prepare();
var c=a._pe.getPointer(this),d=a._pe.ensureInt8(Array(q.PE_BUFFER_MAX));return a._pe.Pointer_stringify(a._pe._pe_object_to_string_ext(c,b,d))}}function k(b){if(b){var c=a._pe.getClass(b);c&&(c=a._pe.getCache(c))&&(b=a._pe.getPointer(b))&&delete c[b]}}function e(b,c){var d=[];c=Array(c);for(var e=0;e<b;e++)d.push(a._pe.ensureInt8(c));return d}function h(a){var b;Array.isArray(a[0])?(b=[],a.forEach(function(a){b.push(a[0],a[1])})):b=a;return b}function p(b,c,d,e){void 0===e&&(e=!1);if(e)for(e=0;e<2*
c;e++)b[e]=a._pe.getValue(d+e*Float64Array.BYTES_PER_ELEMENT,"double");else{var g=0===b.length;for(e=0;e<c;e++)g&&(b[e]=Array(2)),b[e][0]=a._pe.getValue(d,"double"),b[e][1]=a._pe.getValue(d+Float64Array.BYTES_PER_ELEMENT,"double"),d+=2*Float64Array.BYTES_PER_ELEMENT}}Object.defineProperty(a,"__esModule",{value:!0});var g;a._pe=null;a.isLoaded=function(){return!!a._pe};a.isSupported=function(){return!!d("esri-wasm")};a.load=function(){if(g)return g.promise;g=new b;c(["./support/pe-wasm"],function(a){a({locateFile:function(a){return c.toUrl("./support/"+
a)},onAbort:function(a){g.reject(Error(a))}}).then(function(a){l(a);g.resolve()})});return g.promise};(function(b){function c(b,c,d){a._pe.ensureCache.prepare();var e=h(d),g=d===e,e=a._pe.ensureFloat64(e);(b=a._pe._pe_geog_to_proj(a._pe.getPointer(b),c,e))&&p(d,c,e,g);return b}function d(a,b,c){return e(a,b,c,0)}function e(b,c,d,e){a._pe.ensureCache.prepare();var g=h(d),f=d===g,g=a._pe.ensureFloat64(g);(b=a._pe._pe_proj_to_geog_center(a._pe.getPointer(b),c,g,e))&&p(d,c,g,f);return b}b.geogToProj=
c;b.projGeog=function(a,b,e,g){switch(g){case q.PE_TRANSFORM_P_TO_G:return d(a,b,e);case q.PE_TRANSFORM_G_TO_P:return c(a,b,e)}return 0};b.projToGeog=d;b.projToGeogCenter=e})(a.PeCSTransformations||(a.PeCSTransformations={}));var q;(function(b){b.init=function(){b.PE_BUFFER_MAX=a._pe.PeDefs.prototype.get_PE_BUFFER_MAX();b.PE_NAME_MAX=a._pe.PeDefs.prototype.get_PE_NAME_MAX();b.PE_MGRS_MAX=a._pe.PeDefs.prototype.get_PE_MGRS_MAX();b.PE_USNG_MAX=a._pe.PeDefs.prototype.get_PE_USNG_MAX();b.PE_DD_MAX=a._pe.PeDefs.prototype.get_PE_DD_MAX();
b.PE_DDM_MAX=a._pe.PeDefs.prototype.get_PE_DDM_MAX();b.PE_DMS_MAX=a._pe.PeDefs.prototype.get_PE_DMS_MAX();b.PE_UTM_MAX=a._pe.PeDefs.prototype.get_PE_UTM_MAX();b.PE_PARM_MAX=a._pe.PeDefs.prototype.get_PE_PARM_MAX();b.PE_TYPE_NONE=a._pe.PeDefs.prototype.get_PE_TYPE_NONE();b.PE_TYPE_GEOGCS=a._pe.PeDefs.prototype.get_PE_TYPE_GEOGCS();b.PE_TYPE_PROJCS=a._pe.PeDefs.prototype.get_PE_TYPE_PROJCS();b.PE_TYPE_GEOGTRAN=a._pe.PeDefs.prototype.get_PE_TYPE_GEOGTRAN();b.PE_TYPE_COORDSYS=a._pe.PeDefs.prototype.get_PE_TYPE_COORDSYS();
b.PE_TYPE_UNIT=a._pe.PeDefs.prototype.get_PE_TYPE_UNIT();b.PE_STR_OPTS_NONE=a._pe.PeDefs.prototype.get_PE_STR_OPTS_NONE();b.PE_STR_AUTH_NONE=a._pe.PeDefs.prototype.get_PE_STR_AUTH_NONE();b.PE_STR_AUTH_TOP=a._pe.PeDefs.prototype.get_PE_STR_AUTH_TOP();b.PE_STR_NAME_CANON=a._pe.PeDefs.prototype.get_PE_STR_NAME_CANON();b.PE_PARM_X0=a._pe.PeDefs.prototype.get_PE_PARM_X0();b.PE_PARM_ND=a._pe.PeDefs.prototype.get_PE_PARM_ND();b.PE_TRANSFORM_1_TO_2=a._pe.PeDefs.prototype.get_PE_TRANSFORM_1_TO_2();b.PE_TRANSFORM_2_TO_1=
a._pe.PeDefs.prototype.get_PE_TRANSFORM_2_TO_1();b.PE_TRANSFORM_P_TO_G=a._pe.PeDefs.prototype.get_PE_TRANSFORM_P_TO_G();b.PE_TRANSFORM_G_TO_P=a._pe.PeDefs.prototype.get_PE_TRANSFORM_G_TO_P();b.PE_HORIZON_RECT=a._pe.PeDefs.prototype.get_PE_HORIZON_RECT();b.PE_HORIZON_POLY=a._pe.PeDefs.prototype.get_PE_HORIZON_POLY();b.PE_HORIZON_LINE=a._pe.PeDefs.prototype.get_PE_HORIZON_LINE();b.PE_HORIZON_DELTA=a._pe.PeDefs.prototype.get_PE_HORIZON_DELTA()}})(q=a.PeDefs||(a.PeDefs={}));(function(b){function c(b,
c){var g=null,f=e[b];f||(f={},e[b]=f);f.hasOwnProperty(String(c))?g=f[c]:(b=a._pe.PeFactory.prototype.factoryByType(b,c),a._pe.compare(b,a._pe.NULL)||(g=b,f[c]=g));return g=d(g)}function d(b){if(b){var c=b.getType();switch(c){case q.PE_TYPE_GEOGCS:b=a._pe.castObject(b,a._pe.PeGeogcs);break;case q.PE_TYPE_PROJCS:b=a._pe.castObject(b,a._pe.PeProjcs);break;case q.PE_TYPE_GEOGTRAN:b=a._pe.castObject(b,a._pe.PeGeogtran);break;default:c&q.PE_TYPE_UNIT&&(b=a._pe.castObject(b,a._pe.PeUnit))}}return b}var e=
{},g={};b.initialize=function(){a._pe.PeFactory.prototype.initialize(null)};b.coordsys=function(a){return c(q.PE_TYPE_COORDSYS,a)};b.factoryByType=c;b.fromString=function(b,c){var e=null,f=g[b];f||(f={},g[b]=f);f.hasOwnProperty(c)?e=f[c]:(b=a._pe.PeFactory.prototype.fromString(b,c),a._pe.compare(b,a._pe.NULL)||(e=b,f[c]=e));return e=d(e)};b.geogcs=function(a){return c(q.PE_TYPE_GEOGCS,a)};b.geogtran=function(a){return c(q.PE_TYPE_GEOGTRAN,a)};b.getCode=function(b){return a._pe.PeFactory.prototype.getCode(b)};
b.projcs=function(a){return c(q.PE_TYPE_PROJCS,a)};b.unit=function(a){return c(q.PE_TYPE_UNIT,a)}})(a.PeFactory||(a.PeFactory={}));a.PeGCSExtent=null;var v;(function(b){var c;b.init=function(){b.PE_GTLIST_OPTS_COMMON=a._pe.PeGTlistExtended.prototype.get_PE_GTLIST_OPTS_COMMON();c=a._pe._pe_getPeGTlistExtendedEntrySize()};b.getGTlist=function(b,d,e,g,f,h){var n=null,k=new a._pe.PeInteger(h);try{var p=a._pe.PeGTlistExtended.prototype.getGTlist(b,d,e,g,f,k);if(h=k.get_val())if(n=[p],1<h){var l=a._pe.getPointer(p);
for(b=1;b<h;b++)n.push(a._pe.wrapPointer(l+c*b,a._pe.PeGTlistExtendedEntry))}}finally{a._pe.destroy(k)}return n}})(v=a.PeGTlistExtended||(a.PeGTlistExtended={}));(function(b){b.destroy=function(b){if(b&&b.length){for(var c=0;c<b.length;c++){var d=b[c];k(d);d.getEntries().forEach(function(a){k(a);a=a.getGeogtran();k(a);a.getParameters().forEach(k);[a.getGeogcs1(),a.getGeogcs2()].forEach(function(a){k(a);var b=a.getDatum();k(b);k(b.getSpheroid());k(a.getPrimem());k(a.getUnit())})})}a._pe.PeGTlistExtendedEntry.prototype.Delete(b[0])}}})(a.PeGTlistExtendedEntry||
(a.PeGTlistExtendedEntry={}));(function(b){b.geogToGeog=function(b,c,d,e,g){a._pe.ensureCache.prepare();var f=h(d),n=d===f,f=a._pe.ensureFloat64(f),k=0;e&&(k=a._pe.ensureFloat64(e));(b=a._pe._pe_geog_to_geog(a._pe.getPointer(b),c,f,k,g))&&p(d,c,f,n);return b}})(a.PeGTTransformations||(a.PeGTTransformations={}));(function(b){function c(b,c,d,g,f,k){a._pe.ensureCache.prepare();var n,p;switch(b){case "dd":n=a._pe._pe_geog_to_dd;p=q.PE_DD_MAX;break;case "ddm":n=a._pe._pe_geog_to_ddm;p=q.PE_DDM_MAX;break;
case "dms":n=a._pe._pe_geog_to_dms,p=q.PE_DMS_MAX}b=0;c&&(b=a._pe.getPointer(c));c=h(g);c=a._pe.ensureFloat64(c);p=e(d,p);g=a._pe.ensureInt32(p);if(f=n(b,d,c,f,g))for(n=0;n<d;n++)k[n]=a._pe.Pointer_stringify(p[n]);return f}function d(b,c,d,e,g){a._pe.ensureCache.prepare();var f;switch(b){case "dd":f=a._pe._pe_dd_to_geog;break;case "ddm":f=a._pe._pe_ddm_to_geog;break;case "dms":f=a._pe._pe_dms_to_geog}b=0;c&&(b=a._pe.getPointer(c));c=e.map(function(b){return a._pe.ensureString(b)});e=a._pe.ensureInt32(c);
c=a._pe.ensureFloat64(Array(2*d));(f=f(b,d,e,c))&&p(g,d,c);return f}b.geog_to_dms=function(a,b,d,e,g){return c("dms",a,b,d,e,g)};b.dms_to_geog=function(a,b,c,e){return d("dms",a,b,c,e)};b.geog_to_ddm=function(a,b,d,e,g){return c("ddm",a,b,d,e,g)};b.ddm_to_geog=function(a,b,c,e){return d("ddm",a,b,c,e)};b.geog_to_dd=function(a,b,d,e,g){return c("dd",a,b,d,e,g)};b.dd_to_geog=function(a,b,c,e){return d("dd",a,b,c,e)}})(a.PeNotationDms||(a.PeNotationDms={}));var y;(function(b){b.init=function(){b.PE_MGRS_STYLE_NEW=
a._pe.PeNotationMgrs.prototype.get_PE_MGRS_STYLE_NEW();b.PE_MGRS_STYLE_OLD=a._pe.PeNotationMgrs.prototype.get_PE_MGRS_STYLE_OLD();b.PE_MGRS_STYLE_AUTO=a._pe.PeNotationMgrs.prototype.get_PE_MGRS_STYLE_AUTO();b.PE_MGRS_180_ZONE_1_PLUS=a._pe.PeNotationMgrs.prototype.get_PE_MGRS_180_ZONE_1_PLUS();b.PE_MGRS_ADD_SPACES=a._pe.PeNotationMgrs.prototype.get_PE_MGRS_ADD_SPACES()};b.geog_to_mgrs_extended=function(b,c,d,g,f,k,p){a._pe.ensureCache.prepare();var n=0;b&&(n=a._pe.getPointer(b));b=h(d);d=a._pe.ensureFloat64(b);
b=e(c,q.PE_MGRS_MAX);var l=a._pe.ensureInt32(b);if(g=a._pe._pe_geog_to_mgrs_extended(n,c,d,g,f,k,l))for(f=0;f<c;f++)p[f]=a._pe.Pointer_stringify(b[f]);return g};b.mgrs_to_geog_extended=function(b,c,d,e,g){a._pe.ensureCache.prepare();var f=0;b&&(f=a._pe.getPointer(b));b=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(e=a._pe._pe_mgrs_to_geog_extended(f,c,d,e,b))&&p(g,c,b);return e}})(y=a.PeNotationMgrs||(a.PeNotationMgrs={}));(function(b){b.geog_to_usng=
function(b,c,d,g,f,k,p){a._pe.ensureCache.prepare();var n=0;b&&(n=a._pe.getPointer(b));b=h(d);d=a._pe.ensureFloat64(b);b=e(c,q.PE_MGRS_MAX);var l=a._pe.ensureInt32(b);if(g=a._pe._pe_geog_to_usng(n,c,d,g,f,k,l))for(f=0;f<c;f++)p[f]=a._pe.Pointer_stringify(b[f]);return g};b.usng_to_geog=function(b,c,d,e){a._pe.ensureCache.prepare();var g=0;b&&(g=a._pe.getPointer(b));b=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(g=a._pe._pe_usng_to_geog(g,
c,d,b))&&p(e,c,b);return g}})(a.PeNotationUsng||(a.PeNotationUsng={}));var C;(function(b){b.init=function(){b.PE_UTM_OPTS_NONE=a._pe.PeNotationUtm.prototype.get_PE_UTM_OPTS_NONE();b.PE_UTM_OPTS_ADD_SPACES=a._pe.PeNotationUtm.prototype.get_PE_UTM_OPTS_ADD_SPACES();b.PE_UTM_OPTS_NS=a._pe.PeNotationUtm.prototype.get_PE_UTM_OPTS_NS()};b.geog_to_utm=function(b,c,d,g,f){a._pe.ensureCache.prepare();var n=0;b&&(n=a._pe.getPointer(b));b=h(d);d=a._pe.ensureFloat64(b);b=e(c,q.PE_UTM_MAX);var k=a._pe.ensureInt32(b);
if(g=a._pe._pe_geog_to_utm(n,c,d,g,k))for(n=0;n<c;n++)f[n]=a._pe.Pointer_stringify(b[n]);return g};b.utm_to_geog=function(b,c,d,e,g){a._pe.ensureCache.prepare();var f=0;b&&(f=a._pe.getPointer(b));b=d.map(function(b){return a._pe.ensureString(b)});d=a._pe.ensureInt32(b);b=a._pe.ensureFloat64(Array(2*c));(e=a._pe._pe_utm_to_geog(f,c,d,e,b))&&p(g,c,b);return e}})(C=a.PeNotationUtm||(a.PeNotationUtm={}));var B;(function(b){var c=new Map;b.init=function(){b.PE_PCSINFO_OPTION_NONE=a._pe.PePCSInfo.prototype.get_PE_PCSINFO_OPTION_NONE();
b.PE_PCSINFO_OPTION_DOMAIN=a._pe.PePCSInfo.prototype.get_PE_PCSINFO_OPTION_DOMAIN();b.PE_POLE_OUTSIDE_BOUNDARY=a._pe.PePCSInfo.prototype.get_PE_POLE_OUTSIDE_BOUNDARY();b.PE_POLE_POINT=a._pe.PePCSInfo.prototype.get_PE_POLE_POINT()};b.generate=function(d,e){void 0===e&&(e=b.PE_PCSINFO_OPTION_DOMAIN);var g,f;c.has(d)&&(f=c.get(d),f[e]&&(g=f[e]));g||(g=a._pe.PePCSInfo.prototype.generate(d,e),f||(f=[],c.set(d,f)),f[e]=g);return g}})(B=a.PePCSInfo||(a.PePCSInfo={}));(function(b){b.version_string=function(){return a._pe.PeVersion.prototype.version_string()}})(a.PeVersion||
(a.PeVersion={}));a._init=l})},"esri/geometry/support/GeographicTransformation":function(){define(["require","exports","./GeographicTransformationStep"],function(c,a,f){return function(){function a(a){this.steps=[];this._cached_projection={};this._chain="";this._gtlistentry=null;if(a&&a.steps){var b=0;for(a=a.steps;b<a.length;b++){var c=a[b];c instanceof f?this.steps.push(c):this.steps.push(new f({wkid:c.wkid,wkt:c.wkt,isInverse:c.isInverse}))}}}a.cacheKey=function(a,b){return[void 0!==a.wkid&&null!==
a.wkid?a.wkid.toString():"-1",void 0!==a.wkt&&null!==a.wkt?a.wkt.toString():"",void 0!==b.wkid&&null!==b.wkid?b.wkid.toString():"-1",void 0!==b.wkt&&null!==b.wkt?b.wkt.toString():""].join()};a.fromGE=function(b){var c=new a,d="",e=0;for(b=b.steps;e<b.length;e++){var h=f.fromGE(b[e]);c.steps.push(h);d+=h.uid.toString()+","}c._cached_projection={};c._gtlistentry=null;c._chain=d;return c};a.prototype.getInverse=function(){var b=new a;b.steps=[];for(var c=this.steps.length-1;0<=c;c--)b.steps.push(this.steps[c].getInverse());
return b};a.prototype.getGTListEntry=function(){for(var a="",b=0,c=this.steps;b<c.length;b++)a+=c[b].uid.toString()+",";a!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=a);return this._gtlistentry};a.prototype.assignCachedGe=function(b,c,f){this._cached_projection[a.cacheKey(b,c)]=f};a.prototype.getCachedGeTransformation=function(b,c){for(var d="",e=0,f=this.steps;e<f.length;e++)d+=f[e].uid.toString()+",";d!==this._chain&&(this._gtlistentry=null,this._cached_projection=
{},this._chain=d);b=this._cached_projection[a.cacheKey(b,c)];return void 0===b?null:b};return a}()})},"esri/geometry/support/GeographicTransformationStep":function(){define(["require","exports"],function(c,a){var f=0;return function(){function a(a){void 0===a&&(a=null);this.uid=f++;a?(this._wkt=void 0!==a.wkt?a.wkt:null,this._wkid=void 0!==a.wkid?a.wkid:-1,this._isInverse=void 0!==a.isInverse?!0===a.isInverse:!1):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}a.fromGE=function(b){var c=new a;c._wkt=
b.wkt;c._wkid=b.wkid;c._isInverse=b.isInverse;return c};Object.defineProperty(a.prototype,"wkt",{get:function(){return this._wkt},set:function(a){this._wkt=a;this.uid=f++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"wkid",{get:function(){return this._wkid},set:function(a){this._wkid=a;this.uid=f++},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"isInverse",{get:function(){return this._isInverse},set:function(a){this._isInverse=a;this.uid=f++},enumerable:!0,
configurable:!0});a.prototype.getInverse=function(){var b=new a;b._wkt=this.wkt;b._wkid=this._wkid;b._isInverse=!this.isInverse;return b};return a}()})},"esri/geometry/support/normalizeUtils":function(){define("require exports ../../config ../../core/Error ../../core/Logger ../../core/promiseUtils ../Polygon ../Polyline ../SpatialReference ./spatialReferenceUtils ./webMercatorUtils ../../tasks/GeometryService".split(" "),function(c,a,f,b,d,l,k,e,h,p,g,q){function v(a){return"polygon"===a.type?a.rings:
a.paths}function y(a,b){return Math.ceil((a-b)/(2*b))}function C(a,b){for(var c=0,d=v(a);c<d.length;c++)for(var e=0,g=d[c];e<g.length;e++)g[e][0]+=b;return a}function B(a){for(var b=[],c=0,d=0,e=0;e<a.length;e++){for(var g=a[e],f=null,h=0;h<g.length;h++)f=g[h],b.push(f),0===h?d=c=f[0]:(c=Math.min(c,f[0]),d=Math.max(d,f[0]));f&&b.push([(c+d)/2,0])}return b}function r(a,c){if(!(a instanceof e||a instanceof k))throw x.error("straightLineDensify: the input geometry is neither polyline nor polygon"),new b("straightLineDensify: the input geometry is neither polyline nor polygon");
for(var d=[],g=0,f=v(a);g<f.length;g++){var h=f[g],n=[];d.push(n);n.push([h[0][0],h[0][1]]);for(var p=0;p<h.length-1;p++){var l=h[p][0],A=h[p][1],q=h[p+1][0],u=h[p+1][1],t=Math.sqrt((q-l)*(q-l)+(u-A)*(u-A)),y=(u-A)/t,B=(q-l)/t,r=t/c;if(1<r){for(var D=1;D<=r-1;D++){var F=D*c;n.push([B*F+l,y*F+A])}t=(t+Math.floor(r-1)*c)/2;n.push([B*t+l,y*t+A])}n.push([q,u])}}return"polygon"===a.type?new k({rings:d,spatialReference:a.spatialReference}):new e({paths:d,spatialReference:a.spatialReference})}function A(a,
b,c){b&&(a=r(a,1E6),a=g.webMercatorToGeographic(a,!0));c&&(a=C(a,c));return a}function u(a,b,c){if(Array.isArray(a)){var d=a[0];if(d>b){var e=y(d,b);a[0]=d+-2*e*b}else d<c&&(e=y(d,c),a[0]=d+-2*e*c)}else d=a.x,d>b?(e=y(d,b),a=a.clone().offset(-2*e*b,0)):d<c&&(e=y(d,c),a=a.clone().offset(-2*e*c,0));return a}function n(a,b){for(var c=-1,d=function(d){var e=b.cutIndexes[d],g=b.geometries[d],f=v(g);d=function(a){var b=f[a];b.some(function(c){if(!(180>c[0])){for(var d=c=0;d<b.length;d++){var e=b[d][0];
c=e>c?e:c}c=Number(c.toFixed(9));c=-360*y(c,180);for(d=0;d<b.length;d++)e=g.getPoint(a,d),g.setPoint(a,d,e.clone().offset(c,0))}return!0})};for(var h=0;h<f.length;h++)d(h);if(e===c)if("polygon"===a[0].type)for(d=0,h=v(g);d<h.length;d++)a[e]=a[e].addRing(h[d]);else{if("polyline"===a[0].type)for(d=0,h=v(g);d<h.length;d++)a[e]=a[e].addPath(h[d])}else c=e,a[e]=g},e=0;e<b.cutIndexes.length;e++)d(e);return a}function t(a,b,c){if(!Array.isArray(a))return t([a],b);b||(G||(G=new q({url:f.geometryServiceUrl})),
b=G);for(var d,h,x,v,B,r,F,E=0,J=[],M=[],aa=0;aa<a.length;aa++){var K=a[aa];if(K)if(d||(d=K.spatialReference,h=p.getInfo(d),r=(x=d.isWebMercator)?102100:4326,v=D[r].maxX,B=D[r].minX,F=D[r].plus180Line,r=D[r].minus180Line),h)if("mesh"===K.type)M.push(K);else if("point"===K.type)M.push(u(K.clone(),v,B));else if("multipoint"===K.type)K=K.clone(),K.points=K.points.map(function(a){return u(a,v,B)}),M.push(K);else if("extent"===K.type){var Y=K.clone(),K=Y._normalize(!1,!1,h);M.push(K.rings?new k(K):K)}else if(K.extent){var Y=
K.extent,ca=2*y(Y.xmin,B)*v,K=0===ca?K.clone():C(K.clone(),ca);Y.offset(ca,0);Y.intersects(F)&&Y.xmax!==v?(E=Y.xmax>E?Y.xmax:E,K=A(K,x),J.push(K),M.push("cut")):Y.intersects(r)&&Y.xmin!==B?(E=2*Y.xmax*v>E?2*Y.xmax*v:E,K=A(K,x,360),J.push(K),M.push("cut")):M.push(K)}else M.push(K.clone());else M.push(K);else M.push(K)}d=y(E,v);h=-90;F=d;for(E=new e;0<d;)aa=-180+360*d,E.addPath([[aa,h],[aa,-1*h]]),h*=-1,d--;if(0<J.length&&0<F)return b.cut(J,E,c).then(function(a){return n(J,a)}).then(function(d){for(var e=
[],f=[],h=0;h<M.length;h++){var n=M[h];if("cut"!==n)f.push(n);else{var n=d.shift(),k=a[h];"polygon"===k.type&&k.rings&&1<k.rings.length&&n.rings.length>=k.rings.length?(e.push(n),f.push("simplify")):f.push(x?g.geographicToWebMercator(n):n)}}return e.length?b.simplify(e,c).then(function(a){for(var b=[],c=0;c<f.length;c++){var d=f[c];"simplify"!==d?b.push(d):b.push(x?g.geographicToWebMercator(a.shift()):a.shift())}return b}):f});d=[];for(h=0;h<M.length;h++)F=M[h],"cut"!==F?d.push(F):(F=J.shift(),d.push(!0===
x?g.geographicToWebMercator(F):F));return l.resolve(d)}Object.defineProperty(a,"__esModule",{value:!0});var x=d.getLogger("esri.geometry.support.normalizeUtils"),D={102100:{maxX:2.0037508342788905E7,minX:-2.0037508342788905E7,plus180Line:new e({paths:[[[2.0037508342788905E7,-2.0037508342788905E7],[2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:h.WebMercator}),minus180Line:new e({paths:[[[-2.0037508342788905E7,-2.0037508342788905E7],[-2.0037508342788905E7,2.0037508342788905E7]]],spatialReference:h.WebMercator})},
4326:{maxX:180,minX:-180,plus180Line:new e({paths:[[[180,-180],[180,180]]],spatialReference:h.WebMercator}),minus180Line:new e({paths:[[[-180,-180],[-180,180]]],spatialReference:h.WebMercator})}};a.straightLineDensify=r;var G;a.normalizeCentralMeridian=t;a.getDenormalizedExtent=function(a){var b;if(!a)return null;var c=a.extent;if(!c)return null;var d=a.spatialReference&&p.getInfo(a.spatialReference);if(!d)return c;var d=d.valid,e=d[0],d=d[1],g=c.width,f=c.xmin;b=c.xmax;b=[b,f];f=b[0];b=b[1];if("extent"===
a.type||0===g||g<=d||g>2*d||f<e||b>d)return c;var h;switch(a.type){case "polygon":if(1<a.rings.length)h=B(a.rings);else return c;break;case "polyline":if(1<a.paths.length)h=B(a.paths);else return c;break;case "multipoint":h=a.points}a=c.clone();for(e=0;e<h.length;e++){var n=h[e][0];0>n?(n+=d,b=Math.max(n,b)):(n-=d,f=Math.min(n,f))}a.xmin=f;a.xmax=b;return a.width<g?(a.xmin-=d,a.xmax-=d,a):c}})},"esri/tasks/GeometryService":function(){define("../core/lang ../core/kebabDictionary ../core/accessorSupport/ensureType ../geometry/Extent ../geometry/Multipoint ../geometry/Polyline ../geometry/Polygon ../geometry/support/jsonUtils ../request ./Task ./support/ProjectParameters".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g){var q=a({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"}),v=f.ensureType(g);a=p.createSubclass({declaredClass:"esri.tasks.GeometryService",areasAndLengths:function(a,b){a={query:c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/areasAndLengths",a).then(function(a){return a.data})},autoComplete:function(a,b,d){var e=a[0].spatialReference;
a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(e.toJSON()),polygons:JSON.stringify(this._encodeGeometries(a).geometries),polylines:JSON.stringify(this._encodeGeometries(b).geometries)})};if(this.requestOptions||d)a=c.mixin({},this.requestOptions,d,a);return h(this.parsedUrl.path+"/autoComplete",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new k({spatialReference:e,rings:a.rings})})})},buffer:function(a,b){var d=c.mixin({},this.parsedUrl.query,{f:"json"},
a.toJSON()),e=a.outSpatialReference||a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/buffer",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new k({spatialReference:e,rings:a.rings})})})},cut:function(a,b,d){var g=a[0].spatialReference,f=a.map(function(a){return a.toJSON()});a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(g.toJSON()),target:JSON.stringify({geometryType:e.getJsonType(a[0]),
geometries:f}),cutter:JSON.stringify(b.toJSON())})};if(this.requestOptions||d)a=c.mixin({},this.requestOptions,d,a);return h(this.parsedUrl.path+"/cut",a).then(function(a){a=a.data;return{cutIndexes:a.cutIndexes,geometries:(a.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",g)})}})},convexHull:function(a,b){var d=a[0].spatialReference;a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};
if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/convexHull",a).then(function(a){return e.fromJSON(a.data.geometry).set("spatialReference",d)})},densify:function(a,b){var d=c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),g=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/densify",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",
g)})})},difference:function(a,b,d){var g=a[0].spatialReference;a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(g.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:e.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||d)a=c.mixin({},this.requestOptions,d,a);return h(this.parsedUrl.path+"/difference",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",g)})})},
distance:function(a,b){a={query:c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/distance",a).then(this._handleDistanceResponse)},fromGeoCoordinateString:function(a,b){var d={};d.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;d.strings=JSON.stringify(a.strings);d.conversionType=q.toJSON(a.conversionType||"mgrs");d.conversionMode=a.conversionMode;a={query:c.mixin({},this.parsedUrl.query,
{f:"json"},d)};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/fromGeoCoordinateString",a).then(this._handleFromGeoCoordinateResponse)},generalize:function(a,b){var d=c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),g=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/generalize",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",
g)})})},intersect:function(a,b,d){var g=a[0].spatialReference;a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(g.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a)),geometry:JSON.stringify({geometryType:e.getJsonType(b),geometry:b.toJSON()})})};if(this.requestOptions||d)a=c.mixin({},this.requestOptions,d,a);return h(this.parsedUrl.path+"/intersect",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",g)})})},lengths:function(a,
b){a={query:c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/lengths",a).then(function(a){return a.data})},labelPoints:function(a,b){var d=a.map(function(a){return a.toJSON()}),g=a[0].spatialReference;a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:g.wkid?g.wkid:JSON.stringify(g.toJSON()),polygons:JSON.stringify(d)})};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+
"/labelPoints",a).then(function(a){return(a.data.labelPoints||[]).map(function(a){return e.fromJSON(a).set("spatialReference",g)})})},offset:function(a,b){var d=c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),g=a.geometries[0].spatialReference;a={query:d};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/offset",a).then(function(a){return(a.data.geometries||[]).map(function(a){return e.fromJSON(a).set("spatialReference",g)})})},project:function(a,
b){a=v(a);var d=c.mixin({},a.toJSON(),this.parsedUrl.query,{f:"json"}),g=a.outSpatialReference,f=e.getJsonType(a.geometries[0]),k=this._decodeGeometries;a={query:d};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/project",a).then(function(a){return k(a.data,f,g)})},relation:function(a,b){a={query:c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON())};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/relation",
a).then(this._handleRelationResponse)},reshape:function(a,b,d){var g=a.spatialReference;a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(g.toJSON()),target:JSON.stringify({geometryType:e.getJsonType(a),geometry:a.toJSON()}),reshaper:JSON.stringify(b.toJSON())})};if(this.requestOptions||d)a=c.mixin({},this.requestOptions,d,a);return h(this.parsedUrl.path+"/reshape",a).then(function(a){return e.fromJSON(a.data.geometry).set("spatialReference",g)})},simplify:function(a,b){var d=a[0].spatialReference,
g=c.mixin({},this.parsedUrl.query,{f:"json",sr:d.wkid?d.wkid:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))}),f=e.getJsonType(a[0]),k=this._decodeGeometries;a={query:g};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/simplify",a).then(function(a){return k(a.data,f,d)})},toGeoCoordinateString:function(a,b){var d={};d.sr=null!=a.sr&&"object"===typeof a.sr?a.sr.wkid||JSON.stringify(a.sr):a.sr;d.coordinates=JSON.stringify(a.coordinates);
d.conversionType=q.toJSON(a.conversionType||"mgrs");d.conversionMode=a.conversionMode;d.numOfDigits=a.numOfDigits;d.rounding=a.rounding;d.addSpaces=a.addSpaces;a={query:c.mixin({},this.parsedUrl.query,{f:"json"},d)};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/toGeoCoordinateString",a).then(this._handleToGeoCoordinateResponse)},trimExtend:function(a,b){var d=c.mixin({},this.parsedUrl.query,{f:"json"},a.toJSON()),e=a.sr;a={query:d};if(this.requestOptions||
b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/trimExtend",a).then(function(a){return(a.data.geometries||[]).map(function(a){return new l({spatialReference:e,paths:a.paths})})})},union:function(a,b){var d=a[0].spatialReference;a={query:c.mixin({},this.parsedUrl.query,{f:"json",sr:JSON.stringify(d.toJSON()),geometries:JSON.stringify(this._encodeGeometries(a))})};if(this.requestOptions||b)a=c.mixin({},this.requestOptions,b,a);return h(this.parsedUrl.path+"/union",a).then(function(a){return e.fromJSON(a.data.geometry).set("spatialReference",
d)})},_handleRelationResponse:function(a){return a.data.relations},_handleDistanceResponse:function(a){return(a=a.data)&&a.distance},_handleToGeoCoordinateResponse:function(a){return a.data.strings},_handleFromGeoCoordinateResponse:function(a){return a.data.coordinates},_encodeGeometries:function(a){var b=[],c,d=a.length;for(c=0;c<d;c++)b.push(a[c].toJSON());return{geometryType:e.getJsonType(a[0]),geometries:b}},_decodeGeometries:function(a,b,d){var g=e.getGeometryType(b);a=a.geometries;var f=[],
h={spatialReference:d.toJSON()},n=c.mixin;a.forEach(function(a,b){f[b]=new g(n(a,h))});return f},_toProjectGeometry:function(a){var c=a.spatialReference.toJSON();return a instanceof b?new k({rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]],spatialReference:c}):new l({paths:[[].concat(a.points)],spatialReference:c})},_fromProjectedGeometry:function(a,c,e){return"extent"===c?(a=a.rings[0],new b(a[0][0],a[0][1],a[2][0],a[2][1],e)):new d({points:a.paths[0],spatialReference:e.toJSON()})}});
c.mixin(a,{UNIT_METER:9001,UNIT_GERMAN_METER:9031,UNIT_FOOT:9002,UNIT_SURVEY_FOOT:9003,UNIT_CLARKE_FOOT:9005,UNIT_FATHOM:9014,UNIT_NAUTICAL_MILE:9030,UNIT_SURVEY_CHAIN:9033,UNIT_SURVEY_LINK:9034,UNIT_SURVEY_MILE:9035,UNIT_KILOMETER:9036,UNIT_CLARKE_YARD:9037,UNIT_CLARKE_CHAIN:9038,UNIT_CLARKE_LINK:9039,UNIT_SEARS_YARD:9040,UNIT_SEARS_FOOT:9041,UNIT_SEARS_CHAIN:9042,UNIT_SEARS_LINK:9043,UNIT_BENOIT_1895A_YARD:9050,UNIT_BENOIT_1895A_FOOT:9051,UNIT_BENOIT_1895A_CHAIN:9052,UNIT_BENOIT_1895A_LINK:9053,
UNIT_BENOIT_1895B_YARD:9060,UNIT_BENOIT_1895B_FOOT:9061,UNIT_BENOIT_1895B_CHAIN:9062,UNIT_BENOIT_1895B_LINK:9063,UNIT_INDIAN_FOOT:9080,UNIT_INDIAN_1937_FOOT:9081,UNIT_INDIAN_1962_FOOT:9082,UNIT_INDIAN_1975_FOOT:9083,UNIT_INDIAN_YARD:9084,UNIT_INDIAN_1937_YARD:9085,UNIT_INDIAN_1962_YARD:9086,UNIT_INDIAN_1975_YARD:9087,UNIT_FOOT_1865:9070,UNIT_RADIAN:9101,UNIT_DEGREE:9102,UNIT_ARCMINUTE:9103,UNIT_ARCSECOND:9104,UNIT_GRAD:9105,UNIT_GON:9106,UNIT_MICRORADIAN:9109,UNIT_ARCMINUTE_CENTESIMAL:9112,UNIT_ARCSECOND_CENTESIMAL:9113,
UNIT_MIL6400:9114,UNIT_BRITISH_1936_FOOT:9095,UNIT_GOLDCOAST_FOOT:9094,UNIT_INTERNATIONAL_CHAIN:109003,UNIT_INTERNATIONAL_LINK:109004,UNIT_INTERNATIONAL_YARD:109001,UNIT_STATUTE_MILE:9093,UNIT_SURVEY_YARD:109002,UNIT_50KILOMETER_LENGTH:109030,UNIT_150KILOMETER_LENGTH:109031,UNIT_DECIMETER:109005,UNIT_CENTIMETER:109006,UNIT_MILLIMETER:109007,UNIT_INTERNATIONAL_INCH:109008,UNIT_US_SURVEY_INCH:109009,UNIT_INTERNATIONAL_ROD:109010,UNIT_US_SURVEY_ROD:109011,UNIT_US_NAUTICAL_MILE:109012,UNIT_UK_NAUTICAL_MILE:109013,
UNIT_SQUARE_INCHES:"esriSquareInches",UNIT_SQUARE_FEET:"esriSquareFeet",UNIT_SQUARE_YARDS:"esriSquareYards",UNIT_ACRES:"esriAcres",UNIT_SQUARE_MILES:"esriSquareMiles",UNIT_SQUARE_MILLIMETERS:"esriSquareMillimeters",UNIT_SQUARE_CENTIMETERS:"esriSquareCentimeters",UNIT_SQUARE_DECIMETERS:"esriSquareDecimeters",UNIT_SQUARE_METERS:"esriSquareMeters",UNIT_ARES:"esriAres",UNIT_HECTARES:"esriHectares",UNIT_SQUARE_KILOMETERS:"esriSquareKilometers"});return a})},"esri/request":function(){define("require exports ./core/tsSupport/assignHelper dojo/Deferred dojo/has!host-webworker?./core/workers/request dojo/io-query dojo/_base/url dojo/errors/CancelError dojo/request/xhr ./config ./core/deferredUtils ./core/Error ./core/global ./core/has ./core/lang ./core/promiseUtils ./core/urlUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r){function A(a,c){void 0===c&&(c=!1);r.isBlobProtocol(a.url)||r.isDataProtocol(a.url)||!a.content||(a.preventCache&&(a.content["request.preventCache"]=Date.now()),a.url=r.addQueryParameters(a.url,a.content));var d=new Image;d.crossOrigin=a.withCredentials?"use-credentials":"anonymous";var e=!1,g=new b(function(){e=!0;d.onload=d.onerror=d.onabort=null;d.src=""}),f=function(){d.onload=d.onerror=d.onabort=null;c&&URL.revokeObjectURL(this.src);e||g.reject(Error("Unable to load the resource"))};
d.onload=function(){d.onload=d.onerror=d.onabort=null;c&&URL.revokeObjectURL(this.src);e||g.resolve(this)};d.onerror=f;d.onabort=f;d.alt="";d.src=a.url;return g.promise}function u(a){a=new k(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function n(){return O?O:O=B.create(function(a){c(["./identity/IdentityManager"],a)}).then(function(a){S=a})}function t(a,c){var d=!!a.useProxy,e=a.method||"auto";a=f({},a);a.content=a.content||{};a._ssl&&(a.url=a.url.replace(/^http:/i,"https:"));var g=a.url,
n=r.isBlobProtocol(g)||r.isDataProtocol(g);a._token&&(a.content.token=a._token);var k=0,p;n||(p=l.objectToQuery(a.content),k=p.length+g.length+1,y("esri-url-encodes-apostrophe")&&(k=p.replace(/'/g,"%27").length+g.length+1));a.timeout=null!=a.timeout?a.timeout:E.timeout;a.handleAs=a.handleAs||"json";try{var q=p=void 0,u=!n&&("post"===e||!!a.body||k>E.maxUrlLength),t=!n&&(d||!!r.getProxyRule(a.url)),x;if(x=!t&&"image"===a.handleAs&&E.proxyUrl&&!n){var v=r.getOrigin(a.url);x=!(!v||C.endsWith(v,".arcgis.com")||
r.hasSameOrigin(v,r.appUrl)||-1!==J._corsServers.indexOf(v)||r.isTrustedServer(v))}x&&(a.handleAs="blob");t&&(y("host-browser")||y("host-webworker"))&&(p=r.getProxyUrl(g),q=p.path,!u&&q.length+1+k>E.maxUrlLength&&(u=!0),p.query&&(a.content=f({},p.query,a.content)),u||(a.preventCache&&(a.content["request.preventCache"]=Date.now(),a.preventCache=!1),a.url=r.addQueryParameters(a.url,a.content),a.content=null),a.url=q+"?"+a.url);if(!n){var B=a.headers;!y("host-browser")&&!y("host-webworker")||B&&B.hasOwnProperty("X-Requested-With")||
(B=a.headers=B||{},B["X-Requested-With"]=null);if(y("host-browser")&&c){var D=a.content&&a.content.token;D&&(c.set?c.set("token",D):c.append("token",D));a.contentType=!1}if(!a.hasOwnProperty("withCredentials"))if(d=t?q:g,r.isTrustedServer(d))a.withCredentials=!0;else if(S){var F=S.findServerInfo(d);F&&F.webTierAuth&&(a.withCredentials=!0)}}if(u)return"image"===a.handleAs&&(a.handleAs="blob"),a.body?(a.data=c||a.body,a.query=a.content):a.data=a.content,delete a.body,delete a.content,!t&&y("safari")&&
(a.url+=(-1===a.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+Z++),h.post(a.url,a);if("image"===a.handleAs)return A(a);a.query=a.content;delete a.content;return h.get(a.url,a)}catch(na){return a=new b,a.reject(na),a.promise}}function x(a,c,d,e){function g(a){a._pendingDfd=t(d,p);var c=!!a._pendingDfd.response;(a._pendingDfd.response||a._pendingDfd).then(function(a){if(!c||!a.data)return a;E.proxyUrl&&!C.startsWith(a.url,E.proxyUrl)&&F(a.url);var d=a.getHeader("Content-Type");if(d&&(d=
d.toLowerCase(),-1===d.indexOf("text/plain")&&-1===d.indexOf("application/json")))return a;d=a.data;if(d instanceof ArrayBuffer&&750>=d.byteLength)d=new Blob([d]);else if(!(d instanceof Blob&&750>=d.size))return a;var e=new b,g=new FileReader;g.readAsText(d);g.onloadend=function(){if(!g.error)try{var b=JSON.parse(g.result);b.error&&(Object.isExtensible(a)||(a=f({},a)),a._jsonData=b)}catch(Sa){}e.resolve(a)};return e.promise}).then(function(a){return c&&!a._jsonData&&"image"===e.requestOptions.responseType&&
a.data instanceof Blob?(c=!1,d.url=URL.createObjectURL(a.data),A(d,!0)):a}).then(function(b){var d=c?b.data:b,g=c?b.getHeader.bind(b):ia;if(d&&(b=c&&b._jsonData||d,b.error||"error"===b.status))throw d=C.mixin(Error(),b.error||b),d.getHeader=g,d;a.resolve({data:d,url:e.url,requestOptions:e.requestOptions,getHeader:g});a._pendingDfd=null}).catch(function(b){var c,g,f,k;b&&(c=Number(b.code),g=b.hasOwnProperty("subcode")?Number(b.subcode):null,f=(f=b.messageCode)&&f.toUpperCase(),k=b.response);if(k&&
0===k.status&&E.proxyUrl&&!h&&"post"!==d.method&&k.url&&!C.startsWith(k.url,E.proxyUrl))r.addProxyRule({proxyUrl:E.proxyUrl,urlPrefix:r.removeFile(r.urlToObject(d.url).path)}),x(a,!0,d,e);else{if(403===c&&(4===g||b.message&&-1<b.message.toLowerCase().indexOf("ssl")&&-1===b.message.toLowerCase().indexOf("permission"))){if(!d._ssl){d._ssl=d._sslFromServer=!0;x(a,!0,d,e);return}}else if(n&&"no-prompt"!==d.authMode&&S._errorCodes&&-1!==S._errorCodes.indexOf(c)&&!S._isPublic(d.url)&&(403!==c||N&&-1===
N.indexOf(f)&&(null==g||2===g&&d._token))){D(a,d,e,G("request:server",b,e));return}k&&0<k.status&&k.url&&E.proxyUrl&&!C.startsWith(k.url,E.proxyUrl)&&F(k.url);a.reject(G("request:server",b,e));a._pendingDfd=null}})}var h=d.body,n=d.useIdentity,k,p=null,l=h instanceof FormData;if(l||h&&h.elements)p=l?h:new FormData(h);var v=!!(-1!==d.url.toLowerCase().indexOf("token\x3d")||d.content&&d.content.token||p&&p.get&&p.get("token")||h&&h.elements&&h.elements.token);c||(!n||v||d._token||S._isPublic(d.url)||
(c=function(a){a&&(d._token=a.token,d._ssl=a.ssl)},"immediate"===d.authMode?k=S.getCredential(d.url).then(c):"no-prompt"===d.authMode?k=S.checkSignInStatus(d.url).then(c).catch(function(){}):c(S.findCredential(d.url))),a.then(function(a){(/\/sharing\/rest\/accounts\/self/i.test(d.url)||/\/sharing\/rest\/portals\/self/i.test(d.url))&&!v&&!d._token&&a.user&&a.user.username&&(r.isTrustedServer(d.url)||E.trustedServers.push(u(d.url)));var b=d._credential;if(b){var c=S.findServerInfo(b.server),c=c&&c.owningSystemUrl,
e=void 0;c&&(c=c.replace(/\/?$/,"/sharing"),(e=S.findCredential(c,b.userId))&&-1===S._getIdenticalSvcIdx(c,e)&&e.resources.splice(0,0,c))}return a}).always(function(a){delete d._credential;if(a){var b=!!d._ssl;a instanceof q?a.details.ssl=b:a.ssl=b}}));k?k.then(function(){a.isCanceled()||g(a)}).catch(function(b){a.reject(b)}):g(a);return a.promise}function D(a,b,c,d){a._pendingDfd=S.getCredential(b.url,{error:d,token:b._token});a._pendingDfd.then(function(d){b._token=d.token;b._credential=d;b._ssl=
b._sslFromServer||d.ssl;x(a,!0,b,c)}).catch(function(b){a.reject(b);a._pendingDfd=null})}function G(a,b,c){var d="Error",e={url:c.url,requestOptions:c.requestOptions,getHeader:ia};if(b instanceof q)return b.details?(b.details=C.clone(b.details),b.details.url=c.url,b.details.requestOptions=c.requestOptions):b.details=e,b;if(b){var g=b.response;c=g&&g.getHeader;var g=g&&g.status,f=b.message;c=b.getHeader||c;f&&(d=f);c&&(e.getHeader=c);e.httpStatus=(null!=b.httpCode?b.httpCode:b.code)||g;e.subCode=b.subcode;
e.messageCode=b.messageCode;e.messages="string"===typeof b.details?[b.details]:b.details}a=new q(a,d,e);b&&"cancel"===b.dojoType&&(a.name="AbortError",a.dojoType="cancel");return a}function F(a){r.isBlobProtocol(a)||r.isDataProtocol(a)||(a=r.getOrigin(a))&&-1===J._corsServers.indexOf(a)&&J._corsServers.push(a)}function J(a,b){if(d&&v.invokeStaticMessage)return d.execute(a,b);r.isBlobProtocol(a)||r.isDataProtocol(a)||(a=r.normalize(a));var c={url:a,requestOptions:f({},b)},h=r.getInterceptor(a);if(h){if(null!=
h.responseData)return B.resolve({data:h.responseData,requestOptions:c.requestOptions,getHeader:ia,url:a});h.headers&&(c.requestOptions.headers=f({},c.requestOptions.headers,h.headers));h.query&&(c.requestOptions.query=f({},c.requestOptions.query,h.query));if(h.before&&(b=h.before(c),null!=b))return b instanceof Error||b instanceof q?B.reject(G("request:interceptor",b,c)):B.resolve({data:b,requestOptions:c.requestOptions,getHeader:ia,url:c.url})}var p=f({url:c.url},c.requestOptions);p.content=p.query;
delete p.query;p.preventCache=!!p.cacheBust;delete p.cacheBust;p.handleAs=p.responseType;delete p.responseType;"array-buffer"===p.handleAs&&(p.handleAs="arraybuffer");if("image"===p.handleAs){if(y("host-webworker"))return B.reject(G("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),c))}else if(r.isDataProtocol(a))return B.reject(G("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+p.handleAs),c));var l=
E.useIdentity;"anonymous"===p.authMode&&(l=!1);p.useIdentity=l;p.urlObj=new k(p.url);var A=g.makeDeferredCancellingPending(),u;c.requestOptions.signal&&(a=c.requestOptions.signal,u=function(){A.cancel(G("AbortError",new e("Request canceled"),c))},a.aborted?u():a.addEventListener("abort",u));B.resolve().then(function(){if(l&&!S)return n()}).always(function(){A.isCanceled()||x(A,!1,p,c)});return A.then(function(a){c.requestOptions.signal&&c.requestOptions.signal.removeEventListener("abort",u);h&&h.after&&
h.after(a);return a}).catch(function(a){c.requestOptions.signal&&c.requestOptions.signal.removeEventListener("abort",u);throw a;})}var E=p.request,N=["COM_0056","COM_0057"],Z=0,ia=function(){return null},S,O;(J||(J={}))._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return J})},"esri/core/deferredUtils":function(){define(["dojo/Deferred"],function(c){var a={makeDeferredCancellingPending:function(){var f={},b=a._dfdCanceller.bind(null,f),b=new c(b);return f.deferred=
b},_dfdCanceller:function(a){a=a.deferred?a.deferred:a;a.canceled=!0;var b=a._pendingDfd;a.isResolved()||!b||b.isResolved()||b.cancel();a._pendingDfd=null},_fixDfd:function(a){var b=a.then;a.then=function(a,c,f){if(a){var d=a;a=function(a){return a&&a._argsArray?d.apply(null,a):d(a)}}return b.call(this,a,c,f)};return a},_resDfd:function(a,b,c){var d=b.length;1===d?c?a.reject(b[0]):a.resolve(b[0]):1<d?(b._argsArray=!0,a.resolve(b)):a.resolve()}};return a})},"esri/tasks/Task":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/tsSupport/assignHelper ../core/Accessor ../core/urlUtils ../core/accessorSupport/decorators".split(" "),
function(c,a,f,b,d,l,k,e,h){return function(a){function c(b){b=a.call(this)||this;b.requestOptions=null;b.url=null;return b}f(c,a);c.prototype.normalizeCtorArgs=function(a,b){return"string"!==typeof a?a:l({url:a},b)};Object.defineProperty(c.prototype,"parsedUrl",{get:function(){return this._parseUrl(this.url)},enumerable:!0,configurable:!0});c.prototype._parseUrl=function(a){return a?e.urlToObject(a):null};c.prototype._encode=function(a,b,c){var d={},e;for(e in a)if("declaredClass"!==e){var g=a[e];
if(null!=g&&"function"!==typeof g)if(Array.isArray(g)){d[e]=[];for(var f=0;f<g.length;f++)d[e][f]=this._encode(g[f])}else"object"===typeof g?g.toJSON&&(g=g.toJSON(c&&c[e]),d[e]=b?g:JSON.stringify(g)):d[e]=g}return d};b([h.property({readOnly:!0,dependsOn:["url"]})],c.prototype,"parsedUrl",null);b([h.property()],c.prototype,"requestOptions",void 0);b([h.property({type:String})],c.prototype,"url",void 0);return c=b([h.subclass("esri.tasks.Task")],c)}(h.declared(k))})},"esri/tasks/support/ProjectParameters":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/Logger ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils".split(" "),
function(c,a,f,b,d,l,k,e){var h=l.getLogger("esri.tasks.support.ProjectParameters");return function(a){function c(b){b=a.call(this)||this;b.geometries=null;b.outSpatialReference=null;b.transformation=null;b.transformForward=null;return b}f(c,a);Object.defineProperty(c.prototype,"outSR",{get:function(){h.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");return this.outSpatialReference},set:function(a){h.warn("ProjectParameters.outSR is deprecated. Use outSpatialReference instead.");
this.outSpatialReference=a},enumerable:!0,configurable:!0});c.prototype.toJSON=function(){var a=this.geometries.map(function(a){return a.toJSON()}),b=this.geometries[0],c={};c.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON());c.inSR=b.spatialReference.wkid||JSON.stringify(b.spatialReference.toJSON());c.geometries=JSON.stringify({geometryType:e.getJsonType(b),geometries:a});this.transformation&&(c.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(c.transformForward=this.transformForward);return c};b([k.property()],c.prototype,"geometries",void 0);b([k.property({json:{read:{source:"outSR"}}})],c.prototype,"outSpatialReference",void 0);b([k.property({json:{read:!1}})],c.prototype,"outSR",null);b([k.property()],c.prototype,"transformation",void 0);b([k.property()],c.prototype,"transformForward",void 0);return c=b([k.subclass("esri.tasks.support.ProjectParameters")],c)}(k.declared(d))})},"esri/layers/graphics/data/attributeSupport":function(){define("require exports @dojo/framework/shim/Set ../../../core/Error ../../../core/LRUCache ../../../core/LRUMap ../../../core/sql/WhereClause".split(" "),
function(c,a,f,b,d,l,k){function e(b){if(!b)return null;if(a.invalidClauseCache.has(b))return a.invalidClauseCache.use(b);if(a.whereClausesCache.has(b))return a.whereClausesCache.get(b);var c;c=k.create(b);a.whereClausesCache.set(b,c);return c}function h(a,c,d,g){void 0===g&&(g=!0);for(var f=[],k=0;k<c.length;k++){var l=c[k];if("*"!==l&&!a.has(l))if(g){var q=p(l);try{var n=e(q);if(!n.isStandardized())throw new b("feature-store:unsupported-query","expression is not standard",{clause:n});h(a,n.getFields(),
"expression contains missing fields")}catch(t){if((q=t&&t.details)&&q.clause)throw t;q&&q.missingFields?Array.prototype.push.apply(f,q.missingFields):f.push(l)}}else f.push(l)}if(f.length)throw new b("feature-store:unsupported-query",d,{missingFields:f});}function p(a){return a.split(" as ")[0]}Object.defineProperty(a,"__esModule",{value:!0});a.invalidClauseCache=new d(500);a.whereClausesCache=new l(50);var g=new f.default("esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeLong esriFieldTypeDate".split(" "));
a.validateWhere=function(c,d){if(!d)return!0;var e;try{e=k.create(d),a.whereClausesCache.set(d,e)}catch(C){throw a.invalidClauseCache.insert(d,null),new b("feature-store:unsupported-query","invalid SQL expression",{where:d});}if(!e.isStandardized())throw new b("feature-store:unsupported-query","where clause is not standard",{where:d});d=e.getFields();h(c,d,"where clause contains missing fields");return!0};a.validateHaving=function(c,d,e){if(!d)return!0;var g;try{g=k.create(d),a.whereClausesCache.set(d,
g)}catch(r){throw a.invalidClauseCache.insert(d,null),new b("feature-store:unsupported-query","invalid SQL expression",{having:d});}if(!g.isAggregate())throw new b("feature-store:unsupported-query","having does not contain a valid aggregate function",{having:d});var f=g.getFields();h(c,f,"having contains missing fields");if(!g.getExpressions().every(function(a){var b=a.aggregateType;a=a.field;var d=c.has(a)&&c.get(a).name;return e.some(function(a){var e=a.statisticType;a=a.onStatisticField.toLowerCase().trim();
return(c.has(a)&&c.get(a).name)===d&&e.toLowerCase().trim()===b})}))throw new b("feature-store:unsupported-query","expressions in having should also exist in outStatistics",{having:d});return!0};a.getWhereClause=e;a.validateFields=h;a.getExpressionFromFieldName=p;a.getAliasFromFieldName=function(a){return a.split(" as ")[1]};a.hasInvalidFieldType=function(a,b){var c=!1;-1!==e(a).getFields().indexOf(a)&&(a=b.get(a),c=!g.has(a.type));return c}})},"esri/core/LRUCache":function(){define(["require","exports"],
function(c,a){return function(){function a(a){this._cache={};this._lruQueue=[];if(0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=a}a.prototype.has=function(a){return void 0!==this._cache[a]};a.prototype.insert=function(a,c){null!==this.use(a)?this._cache[a]=c:(this._collect(),this._cache[a]=c,this._lruQueue.unshift(a))};a.prototype.use=function(a){var b=this._cache[a];if(!b)return null;this._lruQueue.splice(this._lruQueue.indexOf(a),1);this._lruQueue.unshift(a);return b};
a.prototype.print=function(){for(var a=0,c=this._lruQueue;a<c.length;a++){var f=c[a];console.log("key: "+f+", value: "+this._cache[f])}};a.prototype._collect=function(){if(!(this._lruQueue.length<this._maxSize)){var a=this._lruQueue.pop(),c=this._cache[a];c&&c.release&&c.release();delete this._cache[a]}};return a}()})},"esri/core/LRUMap":function(){define(["require","exports"],function(c,a){return function(){function a(a,c){void 0===a&&(a=0);this.sizeOfFunction=function(){return 1};this._sizeOf=0;
this._cache=new Map;this._queue=[];if(0>=a)throw Error("LRU cache size must be bigger than zero!");this._maxSize=a;c&&(c.disposeFunction&&(this.disposeFunction=c.disposeFunction),c.sizeOfFunction&&(this.sizeOfFunction=c.sizeOfFunction))}Object.defineProperty(a.prototype,"length",{get:function(){return this._cache.size},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"size",{get:function(){return this._sizeOf},enumerable:!0,configurable:!0});a.prototype.clear=function(){var a=this;
this._queue.length=0;this.disposeFunction&&this._cache.forEach(function(b,c){a.disposeFunction(c,b)});this._cache.clear();this._sizeOf=0};a.prototype.delete=function(a){var b=this._cache.get(a);return this._cache.delete(a)?(this._sizeOf-=this.sizeOfFunction(b),this._queue.splice(this._queue.indexOf(a),1),this.disposeFunction&&this.disposeFunction(a,b),!0):!1};a.prototype.forEach=function(a,c){this._cache.forEach(a,c)};a.prototype.get=function(a){var b=this._cache.get(a);if(void 0!==b)return this._queue.splice(this._queue.indexOf(a),
1),this._queue.unshift(a),b};a.prototype.has=function(a){return this._cache.has(a)};a.prototype.set=function(a,c){var b=this.get(a);void 0!==b?this._sizeOf-=this.sizeOfFunction(b):this._queue.unshift(a);this._sizeOf+=this.sizeOfFunction(c);this._cache.set(a,c);this._collect();return this};a.prototype._collect=function(){for(;this._queue.length&&this._sizeOf>this._maxSize;){var a=this._queue.pop(),c=this._cache.get(a);this._cache.delete(a)&&(this._sizeOf-=this.sizeOfFunction(c),this.disposeFunction&&
this.disposeFunction(a,c))}};return a}()})},"esri/core/sql/WhereClause":function(){define("require exports @dojo/framework/shim/array @dojo/framework/shim/Map ../../moment ./AggregateFunctions ./StandardizedFunctions ./WhereGrammar".split(" "),function(c,a,f,b,d,l,k,e){function h(a){return Array.isArray(a)?a:[a]}function p(a){return null!==a?!0!==a:null}function g(a,b){if(null==a)return null;for(var c=!1,d=0;d<b.length;d++){var e=b[d];if(null==e)c=null;else if(a===e){c=!0;break}}return c}function q(a,
b,c){if(null==a)return null;for(var d="",e=0,g=0;g<b.length;g++){var f=b.charAt(g);switch(e){case 0:f===c?e=1:d=0<="-[]/{}()*+?.\\^$|".indexOf(f)?d+("\\"+f):"%"===f?d+".*":"_"===f?d+".":d+f;break;case 1:d=0<="-[]/{}()*+?.\\^$|".indexOf(f)?d+("\\"+f):d+f,e=0}}return(new RegExp("^"+d+"$")).test(a)}function v(a){return a instanceof Date?a.valueOf():a}function y(a,b,c){if(null==b||null==c)return null;b=v(b);c=v(c);switch(a){case "\x3c\x3e":return b!==c;case "\x3d":return b===c;case "\x3e":return b>c;
case "\x3c":return b<c;case "\x3e\x3d":return b>=c;case "\x3c\x3d":return b<=c}}function C(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],g=e.toLowerCase();void 0===c[g]&&(b.push(e),c[g]=1)}return b}return function(){function a(){this._hasAggregateFunctions=this._hasStandardizedFunctions=this.parameters=this.parseTree=null}a.create=function(b){var c=new a;c.parseTree=e.WhereGrammar.parse(b);var d=!0,g=!0;c.visitAll(c.parseTree,function(a){if("function"===a.type){var b=a.name;a=a.args.value.length;
d&&(d=k.isStandardized(b,a));g&&(g=l.isAggregate(b,a))}});c._hasStandardizedFunctions=d;c._hasAggregateFunctions=g;return c};a.prototype.isStandardized=function(){return this._hasStandardizedFunctions};a.prototype.isAggregate=function(){return this._hasAggregateFunctions};a.prototype.setVariablesDictionary=function(a){this.parameters=a};a.prototype.testFeature=function(a){return!!this.evaluateNode(this.parseTree,a)};a.prototype.testSet=function(a){var c=this,d=new b.default;this.visitAll(this.parseTree,
function(a){"column_ref"!==a.type||d.has(a.column)||d.set(a.column,a)});for(var e={},g=function(a){d.forEach(function(b,d){b=c.featureValue(a,d,b);e[d]?e[d].push(b):e[d]=[b]})},f=0;f<a.length;f++)g(a[f]);return!!this.evaluateNode(this.parseTree,{attributes:e})};a.prototype.calculateValue=function(a){return this.evaluateNode(this.parseTree,a)};a.prototype.getFunctions=function(){var a=[];this.visitAll(this.parseTree,function(b){"function"===b.type&&a.push(b.name.toLowerCase())});return C(a)};a.prototype.getExpressions=
function(){var a=new b.default;this.visitAll(this.parseTree,function(b){if("function"===b.type){var c=b.name.toLowerCase();b=b.args.value[0];if("column_ref"===b.type){b=b.column;var d=c+"-"+b;a.has(d)||a.set(d,{aggregateType:c,field:b})}}});return f.from(a.values())};a.prototype.getFields=function(){var a=[];this.visitAll(this.parseTree,function(b){"column_ref"===b.type&&a.push(b.column)});return C(a)};a.prototype.getVariables=function(){var a=[];this.visitAll(this.parseTree,function(b){"param"===
b.type&&a.push(b.value.toLowerCase())});return C(a)};a.prototype.featureValue=function(a,b,c){a=a&&"object"===typeof a.attributes?a.attributes:a;var d=a[b];if(void 0!==d)return d;for(var e in a)if(b.toLowerCase()===e.toLowerCase())return c.column=e,a[e];return null};a.prototype.visitAll=function(a,b){if(null!=a)switch(b(a),a.type){case "when_clause":this.visitAll(a.operand,b);this.visitAll(a.value,b);break;case "case_expression":for(var c=0,d=a.clauses;c<d.length;c++){var e=d[c];this.visitAll(e,b)}"simple"===
a.format&&this.visitAll(a.operand,b);null!==a.else&&this.visitAll(a.else,b);break;case "expr_list":c=0;for(a=a.value;c<a.length;c++)e=a[c],this.visitAll(e,b);break;case "unary_expr":this.visitAll(a.expr,b);break;case "binary_expr":this.visitAll(a.left,b);this.visitAll(a.right,b);break;case "function":this.visitAll(a.args,b)}};a.prototype.evaluateNode=function(a,b){switch(a.type){case "case_expression":if("simple"===a.format)for(var c=v(this.evaluateNode(a.operand,b)),e=0;e<a.clauses.length;e++){if(c===
v(this.evaluateNode(a.clauses[e].operand,b)))return this.evaluateNode(a.clauses[e].value,b)}else for(e=0;e<a.clauses.length;e++)if(!0===this.evaluateNode(a.clauses[e].operand,b))return this.evaluateNode(a.clauses[e].value,b);return null!==a.else?this.evaluateNode(a.else,b):null;case "param":return this.parameters[a.value.toLowerCase()];case "expr_list":c=[];e=0;for(a=a.value;e<a.length;e++){var f=a[e];c.push(this.evaluateNode(f,b))}return c;case "unary_expr":return p(this.evaluateNode(a.expr,b));
case "binary_expr":switch(a.operator){case "AND":return c=this.evaluateNode(a.left,b),b=this.evaluateNode(a.right,b),null!=c&&null!=b?!0===c&&!0===b:!1===c||!1===b?!1:null;case "OR":return c=this.evaluateNode(a.left,b),b=this.evaluateNode(a.right,b),null!=c&&null!=b?!0===c||!0===b:!0===c||!0===b?!0:null;case "IS":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null===this.evaluateNode(a.left,b);case "ISNOT":if("null"!==a.right.type)throw Error("Unsupported RHS for IS");return null!==
this.evaluateNode(a.left,b);case "IN":return c=h(this.evaluateNode(a.right,b)),g(this.evaluateNode(a.left,b),c);case "NOT IN":return c=h(this.evaluateNode(a.right,b)),p(g(this.evaluateNode(a.left,b),c));case "BETWEEN":return c=this.evaluateNode(a.left,b),b=this.evaluateNode(a.right,b),null==c||null==b[0]||null==b[1]?null:c>=b[0]&&c<=b[1];case "NOTBETWEEN":return c=this.evaluateNode(a.left,b),b=this.evaluateNode(a.right,b),null==c||null==b[0]||null==b[1]?null:c<b[0]||c>b[1];case "LIKE":return q(this.evaluateNode(a.left,
b),this.evaluateNode(a.right,b),a.escape);case "NOT LIKE":return p(q(this.evaluateNode(a.left,b),this.evaluateNode(a.right,b),a.escape));case "\x3c\x3e":case "\x3c":case "\x3e":case "\x3e\x3d":case "\x3c\x3d":case "\x3d":return y(a.operator,this.evaluateNode(a.left,b),this.evaluateNode(a.right,b));case "*":return this.evaluateNode(a.left,b)*this.evaluateNode(a.right,b);case "-":return this.evaluateNode(a.left,b)-this.evaluateNode(a.right,b);case "+":return this.evaluateNode(a.left,b)+this.evaluateNode(a.right,
b);case "/":return this.evaluateNode(a.left,b)/this.evaluateNode(a.right,b)}throw Error("Not Supported Operator "+a.operator);case "null":case "bool":case "string":case "number":return a.value;case "date":return d(a.value,["YYYY-M-D"]).toDate();case "timestamp":return d(a.value,["YYYY-M-D H:m:s","YYYY-M-D H:mZ","YYYY-M-D H:m:sZ","YYYY-M-D H:m","YYYY-m-d"]).toDate();case "column_ref":return"CURRENT_DATE"===a.column.toUpperCase()?(f=new Date,f.setHours(0,0,0,0),f):"CURRENT_TIMESTAMP"===a.column.toUpperCase()?
new Date:this.featureValue(b,a.column,a);case "function":return b=this.evaluateNode(a.args,b),this.isAggregate()?l.aggregateFunction(a.name,b):k.evaluateFunction(a.name,b)}throw Error("Unsupported sql syntax "+a.type);};return a}()})},"esri/moment":function(){define(["require","exports","./plugins/moment!"],function(c,a,f){return f})},"esri/plugins/moment":function(){define(["require","exports","dojo/_base/kernel","moment/moment"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});
var d={ar:1,"ar-dz":1,"ar-kw":1,"ar-ly":1,"ar-ma":1,"ar-sa":1,"ar-tn":1,bs:1,ca:1,cs:1,da:1,de:1,"de-at":1,"de-ch":1,el:1,"en-au":1,"en-ca":1,"en-gb":1,"en-ie":1,"en-il":1,"en-nz":1,es:1,"es-do":1,"es-us":1,et:1,fi:1,fr:1,"fr-ca":1,"fr-ch":1,he:1,hi:1,hr:1,hu:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nb:1,nl:1,"nl-be":1,pl:1,pt:1,"pt-br":1,ro:1,ru:1,sl:1,sr:1,"sr-cyrl":1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1};a.load=function(a,c,e){a=f.locale;var h=a in d;if(!h){var k=a.split("-");1<k.length&&k[0]in
d&&(a=k[0],h=!0)}h?c(["moment/locale/"+a],function(){e(b)}):e(b)}})},"moment/moment":function(){(function(c,a){"object"===typeof exports&&"undefined"!==typeof module?module.exports=a():"function"===typeof define&&define.amd?define(a):c.moment=a()})(this,function(){function c(){return gd.apply(null,arguments)}function a(a){return a instanceof Array||"[object Array]"===Object.prototype.toString.call(a)}function f(a){return null!=a&&"[object Object]"===Object.prototype.toString.call(a)}function b(a){if(Object.getOwnPropertyNames)return 0===
Object.getOwnPropertyNames(a).length;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function d(a){return void 0===a}function l(a){return"number"===typeof a||"[object Number]"===Object.prototype.toString.call(a)}function k(a){return a instanceof Date||"[object Date]"===Object.prototype.toString.call(a)}function e(a,b){var c=[],d;for(d=0;d<a.length;++d)c.push(b(a[d],d));return c}function h(a,b){return Object.prototype.hasOwnProperty.call(a,b)}function p(a,b){for(var c in b)h(b,c)&&(a[c]=b[c]);
h(b,"toString")&&(a.toString=b.toString);h(b,"valueOf")&&(a.valueOf=b.valueOf);return a}function g(a,b,c,d){return Za(a,b,c,d,!0).utc()}function q(a){null==a._pf&&(a._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1});return a._pf}function v(a){if(null==a._isValid){var b=q(a),c=hd.call(b.parsedDateParts,function(a){return null!=a}),c=!isNaN(a._d.getTime())&&
0>b.overflow&&!b.empty&&!b.invalidMonth&&!b.invalidWeekday&&!b.weekdayMismatch&&!b.nullInput&&!b.invalidFormat&&!b.userInvalidated&&(!b.meridiem||b.meridiem&&c);a._strict&&(c=c&&0===b.charsLeftOver&&0===b.unusedTokens.length&&void 0===b.bigHour);if(null!=Object.isFrozen&&Object.isFrozen(a))return c;a._isValid=c}return a._isValid}function y(a){var b=g(NaN);null!=a?p(q(b),a):q(b).userInvalidated=!0;return b}function C(a,b){var c,e,g;d(b._isAMomentObject)||(a._isAMomentObject=b._isAMomentObject);d(b._i)||
(a._i=b._i);d(b._f)||(a._f=b._f);d(b._l)||(a._l=b._l);d(b._strict)||(a._strict=b._strict);d(b._tzm)||(a._tzm=b._tzm);d(b._isUTC)||(a._isUTC=b._isUTC);d(b._offset)||(a._offset=b._offset);d(b._pf)||(a._pf=q(b));d(b._locale)||(a._locale=b._locale);if(0<Vc.length)for(c=0;c<Vc.length;c++)e=Vc[c],g=b[e],d(g)||(a[e]=g);return a}function B(a){C(this,a);this._d=new Date(null!=a._d?a._d.getTime():NaN);this.isValid()||(this._d=new Date(NaN));!1===Wc&&(Wc=!0,c.updateOffset(this),Wc=!1)}function r(a){return a instanceof
B||null!=a&&null!=a._isAMomentObject}function A(a){return 0>a?Math.ceil(a)||0:Math.floor(a)}function u(a){a=+a;var b=0;0!==a&&isFinite(a)&&(b=A(a));return b}function n(a,b,c){var d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),g=0,f;for(f=0;f<d;f++)(c&&a[f]!==b[f]||!c&&u(a[f])!==u(b[f]))&&g++;return g+e}function t(a){!1===c.suppressDeprecationWarnings&&"undefined"!==typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function x(a,b){var d=!0;return p(function(){null!=
c.deprecationHandler&&c.deprecationHandler(null,a);if(d){for(var e=[],g,f=0;f<arguments.length;f++){g="";if("object"===typeof arguments[f]){g+="\n["+f+"] ";for(var h in arguments[0])g+=h+": "+arguments[0][h]+", ";g=g.slice(0,-2)}else g=arguments[f];e.push(g)}t(a+"\nArguments: "+Array.prototype.slice.call(e).join("")+"\n"+Error().stack);d=!1}return b.apply(this,arguments)},b)}function D(a,b){null!=c.deprecationHandler&&c.deprecationHandler(a,b);id[a]||(t(b),id[a]=!0)}function G(a){return a instanceof
Function||"[object Function]"===Object.prototype.toString.call(a)}function F(a,b){var c=p({},a),d;for(d in b)h(b,d)&&(f(a[d])&&f(b[d])?(c[d]={},p(c[d],a[d]),p(c[d],b[d])):null!=b[d]?c[d]=b[d]:delete c[d]);for(d in a)h(a,d)&&!h(b,d)&&f(a[d])&&(c[d]=p({},c[d]));return c}function J(a){null!=a&&this.set(a)}function E(a,b){var c=a.toLowerCase();Db[c]=Db[c+"s"]=Db[b]=a}function N(a){return"string"===typeof a?Db[a]||Db[a.toLowerCase()]:void 0}function Z(a){var b={},c,d;for(d in a)h(a,d)&&(c=N(d))&&(b[c]=
a[d]);return b}function ia(a){var b=[],c;for(c in a)b.push({unit:c,priority:Ga[c]});b.sort(function(a,b){return a.priority-b.priority});return b}function S(a,b,c){var d=""+Math.abs(a);return(0<=a?c?"+":"":"-")+Math.pow(10,Math.max(0,b-d.length)).toString().substr(1)+d}function O(a,b,c,d){var e=d;"string"===typeof d&&(e=function(){return this[d]()});a&&(bb[a]=e);b&&(bb[b[0]]=function(){return S(e.apply(this,arguments),b[1],b[2])});c&&(bb[c]=function(){return this.localeData().ordinal(e.apply(this,
arguments),a)})}function ha(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function T(a){var b=a.match($b),c,d;c=0;for(d=b.length;c<d;c++)b[c]=bb[b[c]]?bb[b[c]]:ha(b[c]);return function(c){var e="",g;for(g=0;g<d;g++)e+=G(b[g])?b[g].call(c,a):b[g];return e}}function qa(a,b){if(!a.isValid())return a.localeData().invalidDate();b=X(b,a.localeData());ac[b]=ac[b]||T(b);return ac[b](a)}function X(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Kb.lastIndex=0;0<=d&&
Kb.test(a);)a=a.replace(Kb,c),Kb.lastIndex=0,--d;return a}function M(a,b,c){Xc[a]=G(b)?b:function(a,d){return a&&c?c:b}}function aa(a,b){return h(Xc,a)?Xc[a](b._strict,b._locale):new RegExp(K(a))}function K(a){return Y(a.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e}))}function Y(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$\x26")}function ca(a,b){var c,d=b;"string"===typeof a&&(a=[a]);l(b)&&(d=function(a,c){c[b]=u(a)});for(c=0;c<a.length;c++)bc[a[c]]=
d}function fa(a,b){ca(a,function(a,c,d,e){d._w=d._w||{};b(a,d._w,d,e)})}function ba(a){return 0===a%4&&0!==a%100||0===a%400}function ea(a,b){return function(d){return null!=d?(ra(this,a,d),c.updateOffset(this,b),this):oa(this,a)}}function oa(a,b){return a.isValid()?a._d["get"+(a._isUTC?"UTC":"")+b]():NaN}function ra(a,b,c){if(a.isValid()&&!isNaN(c))if("FullYear"===b&&ba(a.year())&&1===a.month()&&29===a.date())a._d["set"+(a._isUTC?"UTC":"")+b](c,a.month(),sa(c,a.month()));else a._d["set"+(a._isUTC?
"UTC":"")+b](c)}function sa(a,b){if(isNaN(a)||isNaN(b))return NaN;var c=(b%12+12)%12;return 1===c?ba(a+(b-c)/12)?29:28:31-c%7%2}function Ea(a,b){var c;if(!a.isValid())return a;if("string"===typeof b)if(/^\d+$/.test(b))b=u(b);else if(b=a.localeData().monthsParse(b),!l(b))return a;c=Math.min(a.date(),sa(a.year(),b));a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c);return a}function na(a){return null!=a?(Ea(this,a),c.updateOffset(this,!0),this):oa(this,"Month")}function Ca(){function a(a,b){return b.length-
a.length}var b=[],c=[],d=[],e,f;for(e=0;12>e;e++)f=g([2E3,e]),b.push(this.monthsShort(f,"")),c.push(this.months(f,"")),d.push(this.months(f,"")),d.push(this.monthsShort(f,""));b.sort(a);c.sort(a);d.sort(a);for(e=0;12>e;e++)b[e]=Y(b[e]),c[e]=Y(c[e]);for(e=0;24>e;e++)d[e]=Y(d[e]);this._monthsShortRegex=this._monthsRegex=new RegExp("^("+d.join("|")+")","i");this._monthsStrictRegex=new RegExp("^("+c.join("|")+")","i");this._monthsShortStrictRegex=new RegExp("^("+b.join("|")+")","i")}function Sa(a,b,c,
d,e,g,f){b=new Date(a,b,c,d,e,g,f);100>a&&0<=a&&isFinite(b.getFullYear())&&b.setFullYear(a);return b}function Ka(a){var b=new Date(Date.UTC.apply(null,arguments));100>a&&0<=a&&isFinite(b.getUTCFullYear())&&b.setUTCFullYear(a);return b}function Na(a,b,c){c=7+b-c;return-((7+Ka(a,0,c).getUTCDay()-b)%7)+c-1}function R(a,b,c,d,e){c=(7+c-d)%7;d=Na(a,d,e);d=1+7*(b-1)+c+d;0>=d?(b=a-1,a=(ba(b)?366:365)+d):d>(ba(a)?366:365)?(b=a+1,a=d-(ba(a)?366:365)):(b=a,a=d);return{year:b,dayOfYear:a}}function Ja(a,b,c){var d=
Na(a.year(),b,c),d=Math.floor((a.dayOfYear()-d-1)/7)+1;1>d?(a=a.year()-1,b=d+W(a,b,c)):d>W(a.year(),b,c)?(b=d-W(a.year(),b,c),a=a.year()+1):(a=a.year(),b=d);return{week:b,year:a}}function W(a,b,c){var d=Na(a,b,c);b=Na(a+1,b,c);return((ba(a)?366:365)-d+b)/7}function ya(a,b,c){var d,e;a=a.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],d=0;7>d;++d)e=g([2E3,1]).day(d),this._minWeekdaysParse[d]=this.weekdaysMin(e,"").toLocaleLowerCase(),
this._shortWeekdaysParse[d]=this.weekdaysShort(e,"").toLocaleLowerCase(),this._weekdaysParse[d]=this.weekdays(e,"").toLocaleLowerCase();if(c)b="dddd"===b?La.call(this._weekdaysParse,a):"ddd"===b?La.call(this._shortWeekdaysParse,a):La.call(this._minWeekdaysParse,a);else if("dddd"===b){b=La.call(this._weekdaysParse,a);if(-1!==b)return b;b=La.call(this._shortWeekdaysParse,a);if(-1!==b)return b;b=La.call(this._minWeekdaysParse,a)}else if("ddd"===b){b=La.call(this._shortWeekdaysParse,a);if(-1!==b)return b;
b=La.call(this._weekdaysParse,a);if(-1!==b)return b;b=La.call(this._minWeekdaysParse,a)}else{b=La.call(this._minWeekdaysParse,a);if(-1!==b)return b;b=La.call(this._weekdaysParse,a);if(-1!==b)return b;b=La.call(this._shortWeekdaysParse,a)}return-1!==b?b:null}function m(){function a(a,b){return b.length-a.length}var b=[],c=[],d=[],e=[],f,h,k,n;for(f=0;7>f;f++)h=g([2E3,1]).day(f),k=this.weekdaysMin(h,""),n=this.weekdaysShort(h,""),h=this.weekdays(h,""),b.push(k),c.push(n),d.push(h),e.push(k),e.push(n),
e.push(h);b.sort(a);c.sort(a);d.sort(a);e.sort(a);for(f=0;7>f;f++)c[f]=Y(c[f]),d[f]=Y(d[f]),e[f]=Y(e[f]);this._weekdaysMinRegex=this._weekdaysShortRegex=this._weekdaysRegex=new RegExp("^("+e.join("|")+")","i");this._weekdaysStrictRegex=new RegExp("^("+d.join("|")+")","i");this._weekdaysShortStrictRegex=new RegExp("^("+c.join("|")+")","i");this._weekdaysMinStrictRegex=new RegExp("^("+b.join("|")+")","i")}function ua(){return this.hours()%12||12}function Ta(a,b){O(a,0,0,function(){return this.localeData().meridiem(this.hours(),
this.minutes(),b)})}function z(a,b){return b._meridiemParse}function Ha(a){return a?a.toLowerCase().replace("_","-"):a}function da(a){var b=null;if(!Pa[a]&&"undefined"!==typeof module&&module&&module.exports)try{b=ic._abbr,require("./locale/"+a),H(b)}catch(Rd){}return Pa[a]}function H(a,b){a&&((b=d(b)?Oa(a):Ya(a,b))?ic=b:"undefined"!==typeof console&&console.warn&&console.warn("Locale "+a+" not found. Did you forget to load it?"));return ic._abbr}function Ya(a,b){if(null!==b){var c;c=jd;b.abbr=a;
if(null!=Pa[a])D("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),c=Pa[a]._config;else if(null!=b.parentLocale)if(null!=Pa[b.parentLocale])c=Pa[b.parentLocale]._config;else if(c=da(b.parentLocale),null!=c)c=c._config;else return jc[b.parentLocale]||(jc[b.parentLocale]=[]),jc[b.parentLocale].push({name:a,
config:b}),null;Pa[a]=new J(F(c,b));jc[a]&&jc[a].forEach(function(a){Ya(a.name,a.config)});H(a);return Pa[a]}delete Pa[a];return null}function Oa(b){var c;b&&b._locale&&b._locale._abbr&&(b=b._locale._abbr);if(!b)return ic;if(!a(b)){if(c=da(b))return c;b=[b]}a:{c=0;for(var d,e,g,f;c<b.length;){f=Ha(b[c]).split("-");d=f.length;for(e=(e=Ha(b[c+1]))?e.split("-"):null;0<d;){if(g=da(f.slice(0,d).join("-"))){b=g;break a}if(e&&e.length>=d&&n(f,e,!0)>=d-1)break;d--}c++}b=ic}return b}function cb(a){var b;(b=
a._a)&&-2===q(a).overflow&&(b=0>b[zb]||11<b[zb]?zb:1>b[qb]||b[qb]>sa(b[db],b[zb])?qb:0>b[Qa]||24<b[Qa]||24===b[Qa]&&(0!==b[nb]||0!==b[Ab]||0!==b[Lb])?Qa:0>b[nb]||59<b[nb]?nb:0>b[Ab]||59<b[Ab]?Ab:0>b[Lb]||999<b[Lb]?Lb:-1,q(a)._overflowDayOfYear&&(b<db||b>qb)&&(b=qb),q(a)._overflowWeeks&&-1===b&&(b=kc),q(a)._overflowWeekday&&-1===b&&(b=yc),q(a).overflow=b);return a}function Xa(a,b,c){return null!=a?a:null!=b?b:c}function eb(a){var b,d=[],e;if(!a._d){e=new Date(c.now());e=a._useUTC?[e.getUTCFullYear(),
e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()];if(a._w&&null==a._a[qb]&&null==a._a[zb]){var g,f,h,k,n,p;g=a._w;if(null!=g.GG||null!=g.W||null!=g.E){if(n=1,p=4,f=Xa(g.GG,a._a[db],Ja(Q(),1,4).year),h=Xa(g.W,1),k=Xa(g.E,1),1>k||7<k)b=!0}else if(n=a._locale._week.dow,p=a._locale._week.doy,h=Ja(Q(),n,p),f=Xa(g.gg,a._a[db],h.year),h=Xa(g.w,h.week),null!=g.d){if(k=g.d,0>k||6<k)b=!0}else if(null!=g.e){if(k=g.e+n,0>g.e||6<g.e)b=!0}else k=n;1>h||h>W(f,n,p)?q(a)._overflowWeeks=!0:
null!=b?q(a)._overflowWeekday=!0:(b=R(f,h,k,n,p),a._a[db]=b.year,a._dayOfYear=b.dayOfYear)}if(null!=a._dayOfYear){b=Xa(a._a[db],e[db]);if(a._dayOfYear>(ba(b)?366:365)||0===a._dayOfYear)q(a)._overflowDayOfYear=!0;b=Ka(b,0,a._dayOfYear);a._a[zb]=b.getUTCMonth();a._a[qb]=b.getUTCDate()}for(b=0;3>b&&null==a._a[b];++b)a._a[b]=d[b]=e[b];for(;7>b;b++)a._a[b]=d[b]=null==a._a[b]?2===b?1:0:a._a[b];24===a._a[Qa]&&0===a._a[nb]&&0===a._a[Ab]&&0===a._a[Lb]&&(a._nextDay=!0,a._a[Qa]=0);a._d=(a._useUTC?Ka:Sa).apply(null,
d);d=a._useUTC?a._d.getUTCDay():a._d.getDay();null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm);a._nextDay&&(a._a[Qa]=24);a._w&&"undefined"!==typeof a._w.d&&a._w.d!==d&&(q(a).weekdayMismatch=!0)}}function V(a){var b,c;b=a._i;var d=wd.exec(b)||xd.exec(b),e,g,f,h;if(d){q(a).iso=!0;b=0;for(c=zc.length;b<c;b++)if(zc[b][1].exec(d[1])){g=zc[b][0];e=!1!==zc[b][2];break}if(null==g)a._isValid=!1;else{if(d[3]){b=0;for(c=Yc.length;b<c;b++)if(Yc[b][1].exec(d[3])){f=(d[2]||" ")+Yc[b][0];break}if(null==
f){a._isValid=!1;return}}if(e||null==f){if(d[4])if(yd.exec(d[4]))h="Z";else{a._isValid=!1;return}a._f=g+(f||"")+(h||"");ka(a)}else a._isValid=!1}}else a._isValid=!1}function Ua(a){var b=Ac.exec(a._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim());if(b){var c=b[3],d=b[2],e=b[5],g=b[6],f=b[7],h=parseInt(b[4],10),c=[49>=h?2E3+h:999>=h?1900+h:h,Mb.indexOf(c),parseInt(d,10),parseInt(e,10),parseInt(g,10)];f&&c.push(parseInt(f,10));a:{if(f=b[1])if(f=kd.indexOf(f),d=(new Date(c[0],c[1],c[2])).getDay(),
f!==d){q(a).weekdayMismatch=!0;f=a._isValid=!1;break a}f=!0}f&&(a._a=c,(f=b[8])?b=Bc[f]:b[9]?b=0:(b=parseInt(b[10],10),f=b%100,b=(b-f)/100*60+f),a._tzm=b,a._d=Ka.apply(null,a._a),a._d.setUTCMinutes(a._d.getUTCMinutes()-a._tzm),q(a).rfc2822=!0)}else a._isValid=!1}function Fa(a){var b=zd.exec(a._i);null!==b?a._d=new Date(+b[1]):(V(a),!1===a._isValid&&(delete a._isValid,Ua(a),!1===a._isValid&&(delete a._isValid,c.createFromInputFallback(a))))}function ka(a){if(a._f===c.ISO_8601)V(a);else if(a._f===c.RFC_2822)Ua(a);
else{a._a=[];q(a).empty=!0;var b=""+a._i,d,e,g,f,k,n=b.length,p=0;g=X(a._f,a._locale).match($b)||[];for(d=0;d<g.length;d++){f=g[d];if(e=(b.match(aa(f,a))||[])[0])k=b.substr(0,b.indexOf(e)),0<k.length&&q(a).unusedInput.push(k),b=b.slice(b.indexOf(e)+e.length),p+=e.length;if(bb[f]){if(e?q(a).empty=!1:q(a).unusedTokens.push(f),k=a,null!=e&&h(bc,f))bc[f](e,k._a,k,f)}else a._strict&&!e&&q(a).unusedTokens.push(f)}q(a).charsLeftOver=n-p;0<b.length&&q(a).unusedInput.push(b);12>=a._a[Qa]&&!0===q(a).bigHour&&
0<a._a[Qa]&&(q(a).bigHour=void 0);q(a).parsedDateParts=a._a.slice(0);q(a).meridiem=a._meridiem;b=a._a;d=Qa;n=a._locale;g=a._a[Qa];p=a._meridiem;null!=p&&(null!=n.meridiemHour?g=n.meridiemHour(g,p):null!=n.isPM&&((n=n.isPM(p))&&12>g&&(g+=12),n||12!==g||(g=0)));b[d]=g;eb(a);cb(a)}}function gb(a){if(!a._d){var b=Z(a._i);a._a=e([b.year,b.month,b.day||b.date,b.hour,b.minute,b.second,b.millisecond],function(a){return a&&parseInt(a,10)});eb(a)}}function $a(b){var c=b._i,d=b._f;b._locale=b._locale||Oa(b._l);
if(null===c||void 0===d&&""===c)return y({nullInput:!0});"string"===typeof c&&(b._i=c=b._locale.preparse(c));if(r(c))return new B(cb(c));if(k(c))b._d=c;else if(a(d)){var e,g,f;if(0===b._f.length)q(b).invalidFormat=!0,b._d=new Date(NaN);else{for(c=0;c<b._f.length;c++)if(d=0,e=C({},b),null!=b._useUTC&&(e._useUTC=b._useUTC),e._f=b._f[c],ka(e),v(e)&&(d+=q(e).charsLeftOver,d+=10*q(e).unusedTokens.length,q(e).score=d,null==f||d<f))f=d,g=e;p(b,g||e)}}else d?ka(b):ta(b);v(b)||(b._d=null);return b}function ta(b){var g=
b._i;d(g)?b._d=new Date(c.now()):k(g)?b._d=new Date(g.valueOf()):"string"===typeof g?Fa(b):a(g)?(b._a=e(g.slice(0),function(a){return parseInt(a,10)}),eb(b)):f(g)?gb(b):l(g)?b._d=new Date(g):c.createFromInputFallback(b)}function Za(c,d,e,g,h){var k={};if(!0===e||!1===e)g=e,e=void 0;if(f(c)&&b(c)||a(c)&&0===c.length)c=void 0;k._isAMomentObject=!0;k._useUTC=k._isUTC=h;k._l=e;k._i=c;k._f=d;k._strict=g;c=new B(cb($a(k)));c._nextDay&&(c.add(1,"d"),c._nextDay=void 0);return c}function Q(a,b,c,d){return Za(a,
b,c,d,!1)}function xa(b,c){var d,e;1===c.length&&a(c[0])&&(c=c[0]);if(!c.length)return Q();d=c[0];for(e=1;e<c.length;++e)if(!c[e].isValid()||c[e][b](d))d=c[e];return d}function I(a){for(var b in a)if(-1===La.call(hb,b)||null!=a[b]&&isNaN(a[b]))return!1;b=!1;for(var c=0;c<hb.length;++c)if(a[hb[c]]){if(b)return!1;parseFloat(a[hb[c]])!==u(a[hb[c]])&&(b=!0)}return!0}function la(a){a=Z(a);var b=a.year||0,c=a.quarter||0,d=a.month||0,e=a.week||0,g=a.day||0,f=a.hour||0,h=a.minute||0,k=a.second||0,n=a.millisecond||
0;this._isValid=I(a);this._milliseconds=+n+1E3*k+6E4*h+36E5*f;this._days=+g+7*e;this._months=+d+3*c+12*b;this._data={};this._locale=Oa();this._bubble()}function ma(a){return a instanceof la}function va(a){return 0>a?-1*Math.round(-1*a):Math.round(a)}function ga(a,b){O(a,0,0,function(){var a=this.utcOffset(),c="+";0>a&&(a=-a,c="-");return c+S(~~(a/60),2)+b+S(~~a%60,2)})}function ja(a,b){a=(b||"").match(a);if(null===a)return null;a=((a[a.length-1]||[])+"").match(lc)||["-",0,0];b=+(60*a[1])+u(a[2]);
return 0===b?0:"+"===a[0]?b:-b}function P(a,b){return b._isUTC?(b=b.clone(),a=(r(a)||k(a)?a.valueOf():Q(a).valueOf())-b.valueOf(),b._d.setTime(b._d.valueOf()+a),c.updateOffset(b,!1),b):Q(a).local()}function Bb(){return this.isValid()?this._isUTC&&0===this._offset:!1}function Va(a,b){var c=a,d=null;ma(a)?c={ms:a._milliseconds,d:a._days,M:a._months}:l(a)?(c={},b?c[b]=a:c.milliseconds=a):(d=Cc.exec(a))?(c="-"===d[1]?-1:1,c={y:0,d:u(d[qb])*c,h:u(d[Qa])*c,m:u(d[nb])*c,s:u(d[Ab])*c,ms:u(va(1E3*d[Lb]))*
c}):(d=Dc.exec(a))?(c="-"===d[1]?-1:1,c={y:rb(d[2],c),M:rb(d[3],c),w:rb(d[4],c),d:rb(d[5],c),h:rb(d[6],c),m:rb(d[7],c),s:rb(d[8],c)}):null==c?c={}:"object"===typeof c&&("from"in c||"to"in c)&&(d=Q(c.from),c=Q(c.to),d.isValid()&&c.isValid()?(c=P(c,d),d.isBefore(c)?c=kb(d,c):(c=kb(c,d),c.milliseconds=-c.milliseconds,c.months=-c.months),d=c):d={milliseconds:0,months:0},c={},c.ms=d.milliseconds,c.M=d.months);c=new la(c);ma(a)&&h(a,"_locale")&&(c._locale=a._locale);return c}function rb(a,b){a=a&&parseFloat(a.replace(",",
"."));return(isNaN(a)?0:a)*b}function kb(a,b){var c={milliseconds:0,months:0};c.months=b.month()-a.month()+12*(b.year()-a.year());a.clone().add(c.months,"M").isAfter(b)&&--c.months;c.milliseconds=+b-+a.clone().add(c.months,"M");return c}function lb(a,b){return function(c,d){var e;null===d||isNaN(+d)||(D(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),e=c,c=d,d=e);c=Va("string"===
typeof c?+c:c,d);mc(this,c,a);return this}}function mc(a,b,d,e){var g=b._milliseconds,f=va(b._days);b=va(b._months);a.isValid()&&(e=null==e?!0:e,b&&Ea(a,oa(a,"Month")+b*d),f&&ra(a,"Date",oa(a,"Date")+f*d),g&&a._d.setTime(a._d.valueOf()+g*d),e&&c.updateOffset(a,f||b))}function Nb(a,b){var c=12*(b.year()-a.year())+(b.month()-a.month()),d=a.clone().add(c,"months");0>b-d?(a=a.clone().add(c-1,"months"),b=(b-d)/(d-a)):(a=a.clone().add(c+1,"months"),b=(b-d)/(a-d));return-(c+b)||0}function Eb(a){if(void 0===
a)return this._locale._abbr;a=Oa(a);null!=a&&(this._locale=a);return this}function Fb(){return this._locale}function ob(a,b){O(0,[a,a.length],0,b)}function sb(a,b,c,d,e){var g;if(null==a)return Ja(this,d,e).year;g=W(a,d,e);b>g&&(b=g);a=R(a,b,c,d,e);a=Ka(a.year,0,a.dayOfYear);this.year(a.getUTCFullYear());this.month(a.getUTCMonth());this.date(a.getUTCDate());return this}function nc(a,b){b[Lb]=u(1E3*("0."+a))}function cc(a){return a}function pb(a,b,c,d){var e=Oa();b=g().set(d,b);return e[c](b,a)}function Ob(a,
b,c){l(a)&&(b=a,a=void 0);a=a||"";if(null!=b)return pb(a,b,c,"month");var d=[];for(b=0;12>b;b++)d[b]=pb(a,b,c,"month");return d}function Gb(a,b,c,d){"boolean"!==typeof a&&(c=b=a,a=!1);l(b)&&(c=b,b=void 0);b=b||"";var e=Oa();a=a?e._week.dow:0;if(null!=c)return pb(b,(c+a)%7,d,"day");e=[];for(c=0;7>c;c++)e[c]=pb(b,(c+a)%7,d,"day");return e}function oc(a,b,c,d){b=Va(b,c);a._milliseconds+=d*b._milliseconds;a._days+=d*b._days;a._months+=d*b._months;return a._bubble()}function Pb(a){return 0>a?Math.floor(a):
Math.ceil(a)}function ib(a){return function(){return this.as(a)}}function tb(a){return function(){return this.isValid()?this._data[a]:NaN}}function Ec(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function mb(a){return(0<a)-(0>a)||+a}function Fc(){if(!this.isValid())return this.localeData().invalidDate();var a=Ad(this._milliseconds)/1E3,b=Ad(this._days),c=Ad(this._months),d,e;d=A(a/60);e=A(d/60);a%=60;d%=60;var g=A(c/12),c=c%12,a=a?a.toFixed(3).replace(/\.?0+$/,""):"",f=this.asSeconds();if(!f)return"P0D";
var h=0>f?"-":"",k=mb(this._months)!==mb(f)?"-":"",n=mb(this._days)!==mb(f)?"-":"",f=mb(this._milliseconds)!==mb(f)?"-":"";return h+"P"+(g?k+g+"Y":"")+(c?k+c+"M":"")+(b?n+b+"D":"")+(e||d||a?"T":"")+(e?f+e+"H":"")+(d?f+d+"M":"")+(a?f+a+"S":"")}var gd,hd;hd=Array.prototype.some?Array.prototype.some:function(a){for(var b=Object(this),c=b.length>>>0,d=0;d<c;d++)if(d in b&&a.call(this,b[d],d,b))return!0;return!1};var Vc=c.momentProperties=[],Wc=!1,id={};c.suppressDeprecationWarnings=!1;c.deprecationHandler=
null;var Qb;Qb=Object.keys?Object.keys:function(a){var b,c=[];for(b in a)h(a,b)&&c.push(b);return c};var Db={},Ga={},$b=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Kb=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,ac={},bb={},Rb=/\d/,Ra=/\d\d/,Sb=/\d{3}/,dc=/\d{4}/,Hb=/[+-]?\d{6}/,za=/\d\d?/,Tb=/\d\d\d\d?/,Ub=/\d\d\d\d\d\d?/,Vb=/\d{1,3}/,Wb=/\d{1,4}/,Xb=/[+-]?\d{1,6}/,
Bd=/\d+/,Gc=/[+-]?\d+/,Cd=/Z|[+-]\d\d:?\d\d/gi,Hc=/Z|[+-]\d\d(?::?\d\d)?/gi,pc=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,Xc={},bc={},db=0,zb=1,qb=2,Qa=3,nb=4,Ab=5,Lb=6,kc=7,yc=8;O("Y",0,0,function(){var a=this.year();return 9999>=a?""+a:"+"+a});O(0,["YY",2],0,function(){return this.year()%100});O(0,["YYYY",4],0,"year");O(0,["YYYYY",5],0,"year");O(0,["YYYYYY",6,!0],0,"year");E("year","y");
Ga.year=1;M("Y",Gc);M("YY",za,Ra);M("YYYY",Wb,dc);M("YYYYY",Xb,Hb);M("YYYYYY",Xb,Hb);ca(["YYYYY","YYYYYY"],db);ca("YYYY",function(a,b){b[db]=2===a.length?c.parseTwoDigitYear(a):u(a)});ca("YY",function(a,b){b[db]=c.parseTwoDigitYear(a)});ca("Y",function(a,b){b[db]=parseInt(a,10)});c.parseTwoDigitYear=function(a){return u(a)+(68<u(a)?1900:2E3)};var qc=ea("FullYear",!0),La;La=Array.prototype.indexOf?Array.prototype.indexOf:function(a){var b;for(b=0;b<this.length;++b)if(this[b]===a)return b;return-1};
O("M",["MM",2],"Mo",function(){return this.month()+1});O("MMM",0,0,function(a){return this.localeData().monthsShort(this,a)});O("MMMM",0,0,function(a){return this.localeData().months(this,a)});E("month","M");Ga.month=8;M("M",za);M("MM",za,Ra);M("MMM",function(a,b){return b.monthsShortRegex(a)});M("MMMM",function(a,b){return b.monthsRegex(a)});ca(["M","MM"],function(a,b){b[zb]=u(a)-1});ca(["MMM","MMMM"],function(a,b,c,d){d=c._locale.monthsParse(a,d,c._strict);null!=d?b[zb]=d:q(c).invalidMonth=a});
var ec=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Mb="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");O("w",["ww",2],"wo","week");O("W",["WW",2],"Wo","isoWeek");E("week","w");E("isoWeek","W");Ga.week=5;Ga.isoWeek=5;M("w",za);M("ww",za,Ra);M("W",za);M("WW",za,Ra);fa(["w","ww","W","WW"],function(a,b,c,d){b[d.substr(0,1)]=u(a)});O("d",0,"do","day");O("dd",0,0,function(a){return this.localeData().weekdaysMin(this,a)});O("ddd",0,0,function(a){return this.localeData().weekdaysShort(this,a)});O("dddd",
0,0,function(a){return this.localeData().weekdays(this,a)});O("e",0,0,"weekday");O("E",0,0,"isoWeekday");E("day","d");E("weekday","e");E("isoWeekday","E");Ga.day=11;Ga.weekday=11;Ga.isoWeekday=11;M("d",za);M("e",za);M("E",za);M("dd",function(a,b){return b.weekdaysMinRegex(a)});M("ddd",function(a,b){return b.weekdaysShortRegex(a)});M("dddd",function(a,b){return b.weekdaysRegex(a)});fa(["dd","ddd","dddd"],function(a,b,c,d){d=c._locale.weekdaysParse(a,d,c._strict);null!=d?b.d=d:q(c).invalidWeekday=a});
fa(["d","e","E"],function(a,b,c,d){b[d]=u(a)});var kd="Sun Mon Tue Wed Thu Fri Sat".split(" ");O("H",["HH",2],0,"hour");O("h",["hh",2],0,ua);O("k",["kk",2],0,function(){return this.hours()||24});O("hmm",0,0,function(){return""+ua.apply(this)+S(this.minutes(),2)});O("hmmss",0,0,function(){return""+ua.apply(this)+S(this.minutes(),2)+S(this.seconds(),2)});O("Hmm",0,0,function(){return""+this.hours()+S(this.minutes(),2)});O("Hmmss",0,0,function(){return""+this.hours()+S(this.minutes(),2)+S(this.seconds(),
2)});Ta("a",!0);Ta("A",!1);E("hour","h");Ga.hour=13;M("a",z);M("A",z);M("H",za);M("h",za);M("k",za);M("HH",za,Ra);M("hh",za,Ra);M("kk",za,Ra);M("hmm",Tb);M("hmmss",Ub);M("Hmm",Tb);M("Hmmss",Ub);ca(["H","HH"],Qa);ca(["k","kk"],function(a,b,c){a=u(a);b[Qa]=24===a?0:a});ca(["a","A"],function(a,b,c){c._isPm=c._locale.isPM(a);c._meridiem=a});ca(["h","hh"],function(a,b,c){b[Qa]=u(a);q(c).bigHour=!0});ca("hmm",function(a,b,c){var d=a.length-2;b[Qa]=u(a.substr(0,d));b[nb]=u(a.substr(d));q(c).bigHour=!0});
ca("hmmss",function(a,b,c){var d=a.length-4,e=a.length-2;b[Qa]=u(a.substr(0,d));b[nb]=u(a.substr(d,2));b[Ab]=u(a.substr(e));q(c).bigHour=!0});ca("Hmm",function(a,b,c){c=a.length-2;b[Qa]=u(a.substr(0,c));b[nb]=u(a.substr(c))});ca("Hmmss",function(a,b,c){c=a.length-4;var d=a.length-2;b[Qa]=u(a.substr(0,c));b[nb]=u(a.substr(c,2));b[Ab]=u(a.substr(d))});var Dd=ea("Hours",!0),jd={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",
sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:"January February March April May June July August September October November December".split(" "),
monthsShort:Mb,week:{dow:0,doy:6},weekdays:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),weekdaysMin:"Su Mo Tu We Th Fr Sa".split(" "),weekdaysShort:kd,meridiemParse:/[ap]\.?m?\.?/i},Pa={},jc={},ic,wd=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,xd=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,
yd=/Z|[+-]\d\d(?::?\d\d)?/,zc=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Yc=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",
/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],zd=/^\/?Date\((\-?\d+)/i,Ac=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,Bc={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};c.createFromInputFallback=x("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",
function(a){a._d=new Date(a._i+(a._useUTC?" UTC":""))});c.ISO_8601=function(){};c.RFC_2822=function(){};var rc=x("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=Q.apply(null,arguments);return this.isValid()&&a.isValid()?a<this?this:a:y()}),Ic=x("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var a=Q.apply(null,arguments);return this.isValid()&&a.isValid()?a>this?this:
a:y()}),hb="year quarter month week day hour minute second millisecond".split(" ");ga("Z",":");ga("ZZ","");M("Z",Hc);M("ZZ",Hc);ca(["Z","ZZ"],function(a,b,c){c._useUTC=!0;c._tzm=ja(Hc,a)});var lc=/([\+\-]|\d\d)/gi;c.updateOffset=function(){};var Cc=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Dc=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Va.fn=la.prototype;Va.invalid=
function(){return Va(NaN)};var Jc=lb(1,"add"),Kc=lb(-1,"subtract");c.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";c.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var sc=x("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(a){return void 0===a?this.localeData():this.locale(a)});O(0,["gg",2],0,function(){return this.weekYear()%100});O(0,["GG",2],0,function(){return this.isoWeekYear()%100});ob("gggg","weekYear");
ob("ggggg","weekYear");ob("GGGG","isoWeekYear");ob("GGGGG","isoWeekYear");E("weekYear","gg");E("isoWeekYear","GG");Ga.weekYear=1;Ga.isoWeekYear=1;M("G",Gc);M("g",Gc);M("GG",za,Ra);M("gg",za,Ra);M("GGGG",Wb,dc);M("gggg",Wb,dc);M("GGGGG",Xb,Hb);M("ggggg",Xb,Hb);fa(["gggg","ggggg","GGGG","GGGGG"],function(a,b,c,d){b[d.substr(0,2)]=u(a)});fa(["gg","GG"],function(a,b,d,e){b[e]=c.parseTwoDigitYear(a)});O("Q",0,"Qo","quarter");E("quarter","Q");Ga.quarter=7;M("Q",Rb);ca("Q",function(a,b){b[zb]=3*(u(a)-1)});
O("D",["DD",2],"Do","date");E("date","D");Ga.date=9;M("D",za);M("DD",za,Ra);M("Do",function(a,b){return a?b._dayOfMonthOrdinalParse||b._ordinalParse:b._dayOfMonthOrdinalParseLenient});ca(["D","DD"],qb);ca("Do",function(a,b){b[qb]=u(a.match(za)[0])});var tc=ea("Date",!0);O("DDD",["DDDD",3],"DDDo","dayOfYear");E("dayOfYear","DDD");Ga.dayOfYear=4;M("DDD",Vb);M("DDDD",Sb);ca(["DDD","DDDD"],function(a,b,c){c._dayOfYear=u(a)});O("m",["mm",2],0,"minute");E("minute","m");Ga.minute=14;M("m",za);M("mm",za,
Ra);ca(["m","mm"],nb);var Lc=ea("Minutes",!1);O("s",["ss",2],0,"second");E("second","s");Ga.second=15;M("s",za);M("ss",za,Ra);ca(["s","ss"],Ab);var Mc=ea("Seconds",!1);O("S",0,0,function(){return~~(this.millisecond()/100)});O(0,["SS",2],0,function(){return~~(this.millisecond()/10)});O(0,["SSS",3],0,"millisecond");O(0,["SSSS",4],0,function(){return 10*this.millisecond()});O(0,["SSSSS",5],0,function(){return 100*this.millisecond()});O(0,["SSSSSS",6],0,function(){return 1E3*this.millisecond()});O(0,
["SSSSSSS",7],0,function(){return 1E4*this.millisecond()});O(0,["SSSSSSSS",8],0,function(){return 1E5*this.millisecond()});O(0,["SSSSSSSSS",9],0,function(){return 1E6*this.millisecond()});E("millisecond","ms");Ga.millisecond=16;M("S",Vb,Rb);M("SS",Vb,Ra);M("SSS",Vb,Sb);var fb;for(fb="SSSS";9>=fb.length;fb+="S")M(fb,Bd);for(fb="S";9>=fb.length;fb+="S")ca(fb,nc);var Nc=ea("Milliseconds",!1);O("z",0,0,"zoneAbbr");O("zz",0,0,"zoneName");var U=B.prototype;U.add=Jc;U.calendar=function(a,b){a=a||Q();var d=
P(a,this).startOf("day"),d=c.calendarFormat(this,d)||"sameElse";b=b&&(G(b[d])?b[d].call(this,a):b[d]);return this.format(b||this.localeData().calendar(d,this,Q(a)))};U.clone=function(){return new B(this)};U.diff=function(a,b,c){var d;if(!this.isValid())return NaN;a=P(a,this);if(!a.isValid())return NaN;d=6E4*(a.utcOffset()-this.utcOffset());b=N(b);switch(b){case "year":b=Nb(this,a)/12;break;case "month":b=Nb(this,a);break;case "quarter":b=Nb(this,a)/3;break;case "second":b=(this-a)/1E3;break;case "minute":b=
(this-a)/6E4;break;case "hour":b=(this-a)/36E5;break;case "day":b=(this-a-d)/864E5;break;case "week":b=(this-a-d)/6048E5;break;default:b=this-a}return c?b:A(b)};U.endOf=function(a){a=N(a);if(void 0===a||"millisecond"===a)return this;"date"===a&&(a="day");return this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")};U.format=function(a){a||(a=this.isUtc()?c.defaultFormatUtc:c.defaultFormat);a=qa(this,a);return this.localeData().postformat(a)};U.from=function(a,b){return this.isValid()&&(r(a)&&
a.isValid()||Q(a).isValid())?Va({to:this,from:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};U.fromNow=function(a){return this.from(Q(),a)};U.to=function(a,b){return this.isValid()&&(r(a)&&a.isValid()||Q(a).isValid())?Va({from:this,to:a}).locale(this.locale()).humanize(!b):this.localeData().invalidDate()};U.toNow=function(a){return this.to(Q(),a)};U.get=function(a){a=N(a);return G(this[a])?this[a]():this};U.invalidAt=function(){return q(this).overflow};U.isAfter=function(a,
b){a=r(a)?a:Q(a);if(!this.isValid()||!a.isValid())return!1;b=N(d(b)?"millisecond":b);return"millisecond"===b?this.valueOf()>a.valueOf():a.valueOf()<this.clone().startOf(b).valueOf()};U.isBefore=function(a,b){a=r(a)?a:Q(a);if(!this.isValid()||!a.isValid())return!1;b=N(d(b)?"millisecond":b);return"millisecond"===b?this.valueOf()<a.valueOf():this.clone().endOf(b).valueOf()<a.valueOf()};U.isBetween=function(a,b,c,d){d=d||"()";return("("===d[0]?this.isAfter(a,c):!this.isBefore(a,c))&&(")"===d[1]?this.isBefore(b,
c):!this.isAfter(b,c))};U.isSame=function(a,b){a=r(a)?a:Q(a);if(!this.isValid()||!a.isValid())return!1;b=N(b||"millisecond");if("millisecond"===b)return this.valueOf()===a.valueOf();a=a.valueOf();return this.clone().startOf(b).valueOf()<=a&&a<=this.clone().endOf(b).valueOf()};U.isSameOrAfter=function(a,b){return this.isSame(a,b)||this.isAfter(a,b)};U.isSameOrBefore=function(a,b){return this.isSame(a,b)||this.isBefore(a,b)};U.isValid=function(){return v(this)};U.lang=sc;U.locale=Eb;U.localeData=Fb;
U.max=Ic;U.min=rc;U.parsingFlags=function(){return p({},q(this))};U.set=function(a,b){if("object"===typeof a){a=Z(a);b=ia(a);for(var c=0;c<b.length;c++)this[b[c].unit](a[b[c].unit])}else if(a=N(a),G(this[a]))return this[a](b);return this};U.startOf=function(a){a=N(a);switch(a){case "year":this.month(0);case "quarter":case "month":this.date(1);case "week":case "isoWeek":case "day":case "date":this.hours(0);case "hour":this.minutes(0);case "minute":this.seconds(0);case "second":this.milliseconds(0)}"week"===
a&&this.weekday(0);"isoWeek"===a&&this.isoWeekday(1);"quarter"===a&&this.month(3*Math.floor(this.month()/3));return this};U.subtract=Kc;U.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]};U.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}};U.toDate=function(){return new Date(this.valueOf())};U.toISOString=
function(a){if(!this.isValid())return null;var b=(a=!0!==a)?this.clone().utc():this;return 0>b.year()||9999<b.year()?qa(b,a?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):G(Date.prototype.toISOString)?a?this.toDate().toISOString():(new Date(this.valueOf()+6E4*this.utcOffset())).toISOString().replace("Z",qa(b,"Z")):qa(b,a?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")};U.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var a="moment",b=
"";this.isLocal()||(a=0===this.utcOffset()?"moment.utc":"moment.parseZone",b="Z");var a="["+a+'("]',c=0<=this.year()&&9999>=this.year()?"YYYY":"YYYYYY";return this.format(a+c+"-MM-DD[T]HH:mm:ss.SSS"+(b+'[")]'))};U.toJSON=function(){return this.isValid()?this.toISOString():null};U.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")};U.unix=function(){return Math.floor(this.valueOf()/1E3)};U.valueOf=function(){return this._d.valueOf()-6E4*(this._offset||0)};
U.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}};U.year=qc;U.isLeapYear=function(){return ba(this.year())};U.weekYear=function(a){return sb.call(this,a,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)};U.isoWeekYear=function(a){return sb.call(this,a,this.isoWeek(),this.isoWeekday(),1,4)};U.quarter=U.quarters=function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%
3)};U.month=na;U.daysInMonth=function(){return sa(this.year(),this.month())};U.week=U.weeks=function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")};U.isoWeek=U.isoWeeks=function(a){var b=Ja(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")};U.weeksInYear=function(){var a=this.localeData()._week;return W(this.year(),a.dow,a.doy)};U.isoWeeksInYear=function(){return W(this.year(),1,4)};U.date=tc;U.day=U.days=function(a){if(!this.isValid())return null!=a?this:NaN;var b=
this._isUTC?this._d.getUTCDay():this._d.getDay();if(null!=a){var c=this.localeData();"string"===typeof a&&(isNaN(a)?(a=c.weekdaysParse(a),a="number"===typeof a?a:null):a=parseInt(a,10));return this.add(a-b,"d")}return b};U.weekday=function(a){if(!this.isValid())return null!=a?this:NaN;var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")};U.isoWeekday=function(a){if(!this.isValid())return null!=a?this:NaN;if(null!=a){var b=this.localeData();a="string"===typeof a?b.weekdaysParse(a)%
7||7:isNaN(a)?null:a;return this.day(this.day()%7?a:a-7)}return this.day()||7};U.dayOfYear=function(a){var b=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864E5)+1;return null==a?b:this.add(a-b,"d")};U.hour=U.hours=Dd;U.minute=U.minutes=Lc;U.second=U.seconds=Mc;U.millisecond=U.milliseconds=Nc;U.utcOffset=function(a,b,d){var e=this._offset||0,g;if(!this.isValid())return null!=a?this:NaN;if(null!=a){if("string"===typeof a){if(a=ja(Hc,a),null===a)return this}else 16>Math.abs(a)&&
!d&&(a*=60);!this._isUTC&&b&&(g=15*-Math.round(this._d.getTimezoneOffset()/15));this._offset=a;this._isUTC=!0;null!=g&&this.add(g,"m");e!==a&&(!b||this._changeInProgress?mc(this,Va(a-e,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,c.updateOffset(this,!0),this._changeInProgress=null));return this}return this._isUTC?e:15*-Math.round(this._d.getTimezoneOffset()/15)};U.utc=function(a){return this.utcOffset(0,a)};U.local=function(a){this._isUTC&&(this.utcOffset(0,a),this._isUTC=!1,a&&this.subtract(15*
-Math.round(this._d.getTimezoneOffset()/15),"m"));return this};U.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"===typeof this._i){var a=ja(Cd,this._i);null!=a?this.utcOffset(a):this.utcOffset(0,!0)}return this};U.hasAlignedHourOffset=function(a){if(!this.isValid())return!1;a=a?Q(a).utcOffset():0;return 0===(this.utcOffset()-a)%60};U.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()};
U.isLocal=function(){return this.isValid()?!this._isUTC:!1};U.isUtcOffset=function(){return this.isValid()?this._isUTC:!1};U.isUtc=Bb;U.isUTC=Bb;U.zoneAbbr=function(){return this._isUTC?"UTC":""};U.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""};U.dates=x("dates accessor is deprecated. Use date instead.",tc);U.months=x("months accessor is deprecated. Use month instead",na);U.years=x("years accessor is deprecated. Use year instead",qc);U.zone=x("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",
function(a,b){return null!=a?("string"!==typeof a&&(a=-a),this.utcOffset(a,b),this):-this.utcOffset()});U.isDSTShifted=x("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!d(this._isDSTShifted))return this._isDSTShifted;var a={};C(a,this);a=$a(a);if(a._a){var b=a._isUTC?g(a._a):Q(a._a);this._isDSTShifted=this.isValid()&&0<n(a._a,b.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var Aa=J.prototype;Aa.calendar=function(a,
b,c){a=this._calendar[a]||this._calendar.sameElse;return G(a)?a.call(b,c):a};Aa.longDateFormat=function(a){var b=this._longDateFormat[a],c=this._longDateFormat[a.toUpperCase()];if(b||!c)return b;this._longDateFormat[a]=c.replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)});return this._longDateFormat[a]};Aa.invalidDate=function(){return this._invalidDate};Aa.ordinal=function(a){return this._ordinal.replace("%d",a)};Aa.preparse=cc;Aa.postformat=cc;Aa.relativeTime=function(a,b,c,d){var e=this._relativeTime[c];
return G(e)?e(a,b,c,d):e.replace(/%d/i,a)};Aa.pastFuture=function(a,b){a=this._relativeTime[0<a?"future":"past"];return G(a)?a(b):a.replace(/%s/i,b)};Aa.set=function(a){var b,c;for(c in a)b=a[c],G(b)?this[c]=b:this["_"+c]=b;this._config=a;this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)};Aa.months=function(b,c){return b?a(this._months)?this._months[b.month()]:this._months[(this._months.isFormat||ec).test(c)?"format":
"standalone"][b.month()]:a(this._months)?this._months:this._months.standalone};Aa.monthsShort=function(b,c){return b?a(this._monthsShort)?this._monthsShort[b.month()]:this._monthsShort[ec.test(c)?"format":"standalone"][b.month()]:a(this._monthsShort)?this._monthsShort:this._monthsShort.standalone};Aa.monthsParse=function(a,b,c){var d,e;if(this._monthsParseExact){a:{a=a.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],d=0;12>d;++d)e=
g([2E3,d]),this._shortMonthsParse[d]=this.monthsShort(e,"").toLocaleLowerCase(),this._longMonthsParse[d]=this.months(e,"").toLocaleLowerCase();if(c)b="MMM"===b?La.call(this._shortMonthsParse,a):La.call(this._longMonthsParse,a);else if("MMM"===b){b=La.call(this._shortMonthsParse,a);if(-1!==b)break a;b=La.call(this._longMonthsParse,a)}else{b=La.call(this._longMonthsParse,a);if(-1!==b)break a;b=La.call(this._shortMonthsParse,a)}b=-1!==b?b:null}return b}this._monthsParse||(this._monthsParse=[],this._longMonthsParse=
[],this._shortMonthsParse=[]);for(d=0;12>d;d++)if(e=g([2E3,d]),c&&!this._longMonthsParse[d]&&(this._longMonthsParse[d]=new RegExp("^"+this.months(e,"").replace(".","")+"$","i"),this._shortMonthsParse[d]=new RegExp("^"+this.monthsShort(e,"").replace(".","")+"$","i")),c||this._monthsParse[d]||(e="^"+this.months(e,"")+"|^"+this.monthsShort(e,""),this._monthsParse[d]=new RegExp(e.replace(".",""),"i")),c&&"MMMM"===b&&this._longMonthsParse[d].test(a)||c&&"MMM"===b&&this._shortMonthsParse[d].test(a)||!c&&
this._monthsParse[d].test(a))return d};Aa.monthsRegex=function(a){if(this._monthsParseExact)return h(this,"_monthsRegex")||Ca.call(this),a?this._monthsStrictRegex:this._monthsRegex;h(this,"_monthsRegex")||(this._monthsRegex=pc);return this._monthsStrictRegex&&a?this._monthsStrictRegex:this._monthsRegex};Aa.monthsShortRegex=function(a){if(this._monthsParseExact)return h(this,"_monthsRegex")||Ca.call(this),a?this._monthsShortStrictRegex:this._monthsShortRegex;h(this,"_monthsShortRegex")||(this._monthsShortRegex=
pc);return this._monthsShortStrictRegex&&a?this._monthsShortStrictRegex:this._monthsShortRegex};Aa.week=function(a){return Ja(a,this._week.dow,this._week.doy).week};Aa.firstDayOfYear=function(){return this._week.doy};Aa.firstDayOfWeek=function(){return this._week.dow};Aa.weekdays=function(b,c){return b?a(this._weekdays)?this._weekdays[b.day()]:this._weekdays[this._weekdays.isFormat.test(c)?"format":"standalone"][b.day()]:a(this._weekdays)?this._weekdays:this._weekdays.standalone};Aa.weekdaysMin=function(a){return a?
this._weekdaysMin[a.day()]:this._weekdaysMin};Aa.weekdaysShort=function(a){return a?this._weekdaysShort[a.day()]:this._weekdaysShort};Aa.weekdaysParse=function(a,b,c){var d,e;if(this._weekdaysParseExact)return ya.call(this,a,b,c);this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]);for(d=0;7>d;d++)if(e=g([2E3,1]).day(d),c&&!this._fullWeekdaysParse[d]&&(this._fullWeekdaysParse[d]=new RegExp("^"+this.weekdays(e,"").replace(".",
".?")+"$","i"),this._shortWeekdaysParse[d]=new RegExp("^"+this.weekdaysShort(e,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[d]=new RegExp("^"+this.weekdaysMin(e,"").replace(".",".?")+"$","i")),this._weekdaysParse[d]||(e="^"+this.weekdays(e,"")+"|^"+this.weekdaysShort(e,"")+"|^"+this.weekdaysMin(e,""),this._weekdaysParse[d]=new RegExp(e.replace(".",""),"i")),c&&"dddd"===b&&this._fullWeekdaysParse[d].test(a)||c&&"ddd"===b&&this._shortWeekdaysParse[d].test(a)||c&&"dd"===b&&this._minWeekdaysParse[d].test(a)||
!c&&this._weekdaysParse[d].test(a))return d};Aa.weekdaysRegex=function(a){if(this._weekdaysParseExact)return h(this,"_weekdaysRegex")||m.call(this),a?this._weekdaysStrictRegex:this._weekdaysRegex;h(this,"_weekdaysRegex")||(this._weekdaysRegex=pc);return this._weekdaysStrictRegex&&a?this._weekdaysStrictRegex:this._weekdaysRegex};Aa.weekdaysShortRegex=function(a){if(this._weekdaysParseExact)return h(this,"_weekdaysRegex")||m.call(this),a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex;h(this,
"_weekdaysShortRegex")||(this._weekdaysShortRegex=pc);return this._weekdaysShortStrictRegex&&a?this._weekdaysShortStrictRegex:this._weekdaysShortRegex};Aa.weekdaysMinRegex=function(a){if(this._weekdaysParseExact)return h(this,"_weekdaysRegex")||m.call(this),a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex;h(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=pc);return this._weekdaysMinStrictRegex&&a?this._weekdaysMinStrictRegex:this._weekdaysMinRegex};Aa.isPM=function(a){return"p"===(a+"").toLowerCase().charAt(0)};
Aa.meridiem=function(a,b,c){return 11<a?c?"pm":"PM":c?"am":"AM"};H("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(a){var b=a%10,b=1===u(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+b}});c.lang=x("moment.lang is deprecated. Use moment.locale instead.",H);c.langData=x("moment.langData is deprecated. Use moment.localeData instead.",Oa);var ub=Math.abs,ld=ib("ms"),md=ib("s"),nd=ib("m"),w=ib("h"),Yb=ib("d"),Wa=ib("w"),Zb=ib("M"),L=ib("y"),Cb=tb("milliseconds"),Ld=
tb("seconds"),Md=tb("minutes"),Nd=tb("hours"),Od=tb("days"),Pd=tb("months"),Qd=tb("years"),fc=Math.round,Ib={ss:44,s:45,m:45,h:22,d:26,M:11},Ad=Math.abs,Ba=la.prototype;Ba.isValid=function(){return this._isValid};Ba.abs=function(){var a=this._data;this._milliseconds=ub(this._milliseconds);this._days=ub(this._days);this._months=ub(this._months);a.milliseconds=ub(a.milliseconds);a.seconds=ub(a.seconds);a.minutes=ub(a.minutes);a.hours=ub(a.hours);a.months=ub(a.months);a.years=ub(a.years);return this};
Ba.add=function(a,b){return oc(this,a,b,1)};Ba.subtract=function(a,b){return oc(this,a,b,-1)};Ba.as=function(a){if(!this.isValid())return NaN;var b,c=this._milliseconds;a=N(a);if("month"===a||"year"===a)return b=this._days+c/864E5,b=this._months+4800*b/146097,"month"===a?b:b/12;b=this._days+Math.round(146097*this._months/4800);switch(a){case "week":return b/7+c/6048E5;case "day":return b+c/864E5;case "hour":return 24*b+c/36E5;case "minute":return 1440*b+c/6E4;case "second":return 86400*b+c/1E3;case "millisecond":return Math.floor(864E5*
b)+c;default:throw Error("Unknown unit "+a);}};Ba.asMilliseconds=ld;Ba.asSeconds=md;Ba.asMinutes=nd;Ba.asHours=w;Ba.asDays=Yb;Ba.asWeeks=Wa;Ba.asMonths=Zb;Ba.asYears=L;Ba.valueOf=function(){return this.isValid()?this._milliseconds+864E5*this._days+this._months%12*2592E6+31536E6*u(this._months/12):NaN};Ba._bubble=function(){var a=this._milliseconds,b=this._days,c=this._months,d=this._data;0<=a&&0<=b&&0<=c||0>=a&&0>=b&&0>=c||(a+=864E5*Pb(146097*c/4800+b),c=b=0);d.milliseconds=a%1E3;a=A(a/1E3);d.seconds=
a%60;a=A(a/60);d.minutes=a%60;a=A(a/60);d.hours=a%24;b+=A(a/24);a=A(4800*b/146097);c+=a;b-=Pb(146097*a/4800);a=A(c/12);d.days=b;d.months=c%12;d.years=a;return this};Ba.clone=function(){return Va(this)};Ba.get=function(a){a=N(a);return this.isValid()?this[a+"s"]():NaN};Ba.milliseconds=Cb;Ba.seconds=Ld;Ba.minutes=Md;Ba.hours=Nd;Ba.days=Od;Ba.weeks=function(){return A(this.days()/7)};Ba.months=Pd;Ba.years=Qd;Ba.humanize=function(a){if(!this.isValid())return this.localeData().invalidDate();var b=this.localeData(),
c;c=!a;var d=Va(this).abs(),e=fc(d.as("s")),g=fc(d.as("m")),f=fc(d.as("h")),h=fc(d.as("d")),k=fc(d.as("M")),d=fc(d.as("y")),e=e<=Ib.ss&&["s",e]||e<Ib.s&&["ss",e]||1>=g&&["m"]||g<Ib.m&&["mm",g]||1>=f&&["h"]||f<Ib.h&&["hh",f]||1>=h&&["d"]||h<Ib.d&&["dd",h]||1>=k&&["M"]||k<Ib.M&&["MM",k]||1>=d&&["y"]||["yy",d];e[2]=c;e[3]=0<+this;e[4]=b;c=Ec.apply(null,e);a&&(c=b.pastFuture(+this,c));return b.postformat(c)};Ba.toISOString=Fc;Ba.toString=Fc;Ba.toJSON=Fc;Ba.locale=Eb;Ba.localeData=Fb;Ba.toIsoString=x("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",
Fc);Ba.lang=sc;O("X",0,0,"unix");O("x",0,0,"valueOf");M("x",Gc);M("X",/[+-]?\d+(\.\d{1,3})?/);ca("X",function(a,b,c){c._d=new Date(1E3*parseFloat(a,10))});ca("x",function(a,b,c){c._d=new Date(u(a))});c.version="2.22.1";gd=Q;c.fn=U;c.min=function(){var a=[].slice.call(arguments,0);return xa("isBefore",a)};c.max=function(){var a=[].slice.call(arguments,0);return xa("isAfter",a)};c.now=function(){return Date.now?Date.now():+new Date};c.utc=g;c.unix=function(a){return Q(1E3*a)};c.months=function(a,b){return Ob(a,
b,"months")};c.isDate=k;c.locale=H;c.invalid=y;c.duration=Va;c.isMoment=r;c.weekdays=function(a,b,c){return Gb(a,b,c,"weekdays")};c.parseZone=function(){return Q.apply(null,arguments).parseZone()};c.localeData=Oa;c.isDuration=ma;c.monthsShort=function(a,b){return Ob(a,b,"monthsShort")};c.weekdaysMin=function(a,b,c){return Gb(a,b,c,"weekdaysMin")};c.defineLocale=Ya;c.updateLocale=function(a,b){if(null!=b){var c,d=jd;c=da(a);null!=c&&(d=c._config);b=F(d,b);b=new J(b);b.parentLocale=Pa[a];Pa[a]=b;H(a)}else null!=
Pa[a]&&(null!=Pa[a].parentLocale?Pa[a]=Pa[a].parentLocale:null!=Pa[a]&&delete Pa[a]);return Pa[a]};c.locales=function(){return Qb(Pa)};c.weekdaysShort=function(a,b,c){return Gb(a,b,c,"weekdaysShort")};c.normalizeUnits=N;c.relativeTimeRounding=function(a){return void 0===a?fc:"function"===typeof a?(fc=a,!0):!1};c.relativeTimeThreshold=function(a,b){if(void 0===Ib[a])return!1;if(void 0===b)return Ib[a];Ib[a]=b;"s"===a&&(Ib.ss=b-1);return!0};c.calendarFormat=function(a,b){a=a.diff(b,"days",!0);return-6>
a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse"};c.prototype=U;c.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"};return c})},"esri/core/sql/AggregateFunctions":function(){define(["require","exports"],function(c,a){function f(a){for(var b=0,c=0;c<a.length;c++)b+=
a[c];return b/a.length}function b(a){for(var b=f(a),c=a.length,d=0,p=0;p<a.length;p++)d+=Math.pow(a[p]-b,2);return 1<c?d/(c-1):0}Object.defineProperty(a,"__esModule",{value:!0});a.aggregateFunction=function(a,b){var c=d[a.toLowerCase()];if(null==c)throw Error("Function Not Recognised");if(b.length<c.minParams||b.length>c.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return c.evaluate(b)};a.isAggregate=function(a,b){a=d[a.toLowerCase()];return null!=a&&b>=a.minParams&&
b<=a.maxParams};var d={min:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.min.apply(Math,a[0])}},max:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.max.apply(Math,a[0])}},avg:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:f(a[0])}},sum:{minParams:1,maxParams:1,evaluate:function(a){if(null==a[0])a=null;else{a=a[0];for(var b=0,c=0;c<a.length;c++)b+=a[c];a=b}return a}},stddev:{minParams:1,maxParams:1,evaluate:function(a){return null==
a[0]?null:Math.sqrt(b(a[0]))}},count:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].length}},var:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:b(a[0])}}}})},"esri/core/sql/StandardizedFunctions":function(){define(["require","exports","dojo/regexp"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.evaluateFunction=function(a,c){var d=b[a.toLowerCase()];if(null==d)throw Error("Function Not Recognised");if(c.length<d.minParams||c.length>
d.maxParams)throw Error("Invalid Parameter count for call to "+a.toUpperCase());return d.evaluate(c)};a.isStandardized=function(a,c){a=b[a.toLowerCase()];return null!=a&&c>=a.minParams&&c<=a.maxParams};var b={extract:{minParams:2,maxParams:2,evaluate:function(a){var b=a[0];a=a[1];if(null==a)return null;if(a instanceof Date)switch(b.toUpperCase()){case "SECOND":return a.getSeconds();case "MINUTE":return a.getMinutes();case "HOUR":return a.getHours();case "DAY":return a.getDate();case "MONTH":return a.getMonth()+
1;case "YEAR":return a.getFullYear()}throw Error("Invalid Parameter for call to EXTRACT");}},substring:{minParams:2,maxParams:3,evaluate:function(a){if(2===a.length){var b=a[0],c=a[1];return null==b||null==c?null:b.toString().substring(c-1)}if(3===a.length)return b=a[0],c=a[1],a=a[2],null==b||null==c||null==a?null:0>=a?"":b.toString().substring(c-1,c+a-1)}},position:{minParams:2,maxParams:2,evaluate:function(a){var b=a[0];a=a[1];return null==b||null==a?null:a.indexOf(b)+1}},trim:{minParams:2,maxParams:3,
evaluate:function(a){var b=3===a.length,c=b?a[1]:" ",b=b?a[2]:a[1];if(null==c||null==b)return null;c="("+f.escapeString(c)+")";switch(a[0]){case "BOTH":return b.replace(new RegExp("^"+c+"*|"+c+"*$","g"),"");case "LEADING":return b.replace(new RegExp("^"+c+"*","g"),"");case "TRAILING":return b.replace(new RegExp(c+"*$","g"),"")}throw Error("Invalid Parameter for call to TRIM");}},abs:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.abs(a[0])}},ceiling:{minParams:1,maxParams:1,
evaluate:function(a){return null==a[0]?null:Math.ceil(a[0])}},floor:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.floor(a[0])}},log:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])}},log10:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.log(a[0])*Math.LOG10E}},sin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.sin(a[0])}},cos:{minParams:1,maxParams:1,evaluate:function(a){return null==
a[0]?null:Math.cos(a[0])}},tan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.tan(a[0])}},asin:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.asin(a[0])}},acos:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.acos(a[0])}},atan:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:Math.atan(a[0])}},sign:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:0<a[0]?1:0>a[1]?-1:0}},power:{minParams:2,
maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:Math.pow(a[0],a[1])}},mod:{minParams:2,maxParams:2,evaluate:function(a){return null==a[0]||null==a[1]?null:a[0]%a[1]}},round:{minParams:1,maxParams:2,evaluate:function(a){var b=a[0];a=2===a.length?Math.pow(10,a[1]):1;return null==b?null:Math.round(b*a)/a}},truncate:{minParams:1,maxParams:2,evaluate:function(a){return null==a[0]?null:1===a.length?parseInt(a[0].toFixed(0),10):parseFloat(a[0].toFixed(a[1]))}},char_length:{minParams:1,
maxParams:1,evaluate:function(a){return"string"===typeof a[0]||a[0]instanceof String?a[0].length:0}},concat:{minParams:1,maxParams:Infinity,evaluate:function(a){for(var b="",c=0;c<a.length;c++){if(null==a[c])return null;b+=a[c].toString()}return b}},lower:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toLowerCase()}},upper:{minParams:1,maxParams:1,evaluate:function(a){return null==a[0]?null:a[0].toString().toUpperCase()}}}})},"esri/core/sql/WhereGrammar":function(){define(["require",
"exports","./sql92grammar"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){}a.parse=function(a){return f.parse(a)};return a}();a.WhereGrammar=c})},"esri/core/sql/sql92grammar":function(){define([],function(){function c(a,f,b,d){this.message=a;this.expected=f;this.found=b;this.location=d;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,c)}(function(a,c){function b(){this.constructor=a}b.prototype=c.prototype;
a.prototype=new b})(c,Error);c.buildMessage=function(a,c){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}function d(a){return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+b(a)})}function f(a){return a.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,
"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(a){return"\\x"+b(a)})}var k={literal:function(a){return'"'+d(a.text)+'"'},"class":function(a){var b="",c;for(c=0;c<a.parts.length;c++)b+=a.parts[c]instanceof Array?f(a.parts[c][0])+"-"+f(a.parts[c][1]):f(a.parts[c]);return"["+(a.inverted?"^":"")+b+"]"},any:function(a){return"any character"},end:function(a){return"end of input"},other:function(a){return a.description}};
return"Expected "+function(a){var b=Array(a.length),c;for(c=0;c<a.length;c++){var d=c,e;e=a[c];e=k[e.type](e);b[d]=e}b.sort();if(0<b.length){for(a=c=1;c<b.length;c++)b[c-1]!==b[c]&&(b[a]=b[c],a++);b.length=a}switch(b.length){case 1:return b[0];case 2:return b[0]+" or "+b[1];default:return b.slice(0,-1).join(", ")+", or "+b[b.length-1]}}(a)+" but "+(c?'"'+d(c)+'"':"end of input")+" found."};return{SyntaxError:c,parse:function(a,f){function b(a,b){return{type:"literal",text:a,ignoreCase:b}}function d(a,
b,c){return{type:"class",parts:a,inverted:b,ignoreCase:c}}function l(b){var c=Yb[b],d;if(!c){for(d=b-1;!Yb[d];)d--;c=Yb[d];for(c={line:c.line,column:c.column};d<b;)10===a.charCodeAt(d)?(c.line++,c.column=1):c.column++,d++;Yb[b]=c}return c}function k(a,b){var c=l(a),d=l(b);return{start:{offset:a,line:c.line,column:c.column},end:{offset:b,line:d.line,column:d.column}}}function e(a){w<Wa||(w>Wa&&(Wa=w,Zb=[]),Zb.push(a))}function h(){var a,b,c;a=w;b=R();b!==m?(b=g(),b!==m?(c=R(),c!==m?a=b:(w=a,a=m)):
(w=a,a=m)):(w=a,a=m);return a}function p(){var a,b,c,d,e,f,h,n;a=w;b=g();if(b!==m){c=[];d=w;e=R();e!==m?(f=Sa(),f!==m?(h=R(),h!==m?(n=g(),n!==m?d=e=[e,f,h,n]:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m);for(;d!==m;)c.push(d),d=w,e=R(),e!==m?(f=Sa(),f!==m?(h=R(),h!==m?(n=g(),n!==m?d=e=[e,f,h,n]:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m);if(c!==m){a={type:"expr_list"};b=[b];for(d=0;d<c.length;d++)b.push(c[d][3]);a.value=b}else w=a,a=m}else w=a,a=m;return a}function g(){var a,b,c,d,e,g,f,h;a=w;b=q();if(b!==
m){c=[];d=w;e=R();e!==m?(g=ba(),g!==m?(f=R(),f!==m?(h=q(),h!==m?d=e=[e,g,f,h]:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m);for(;d!==m;)c.push(d),d=w,e=R(),e!==m?(g=ba(),g!==m?(f=R(),f!==m?(h=q(),h!==m?d=e=[e,g,f,h]:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m);c!==m?a=b=ya(b,c):(w=a,a=m)}else w=a,a=m;return a}function q(){var a,b,c,d,e,g,f,h;a=w;b=v();if(b!==m){c=[];d=w;e=R();e!==m?(g=fa(),g!==m?(f=R(),f!==m?(h=v(),h!==m?d=e=[e,g,f,h]:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m);for(;d!==m;)c.push(d),d=
w,e=R(),e!==m?(g=fa(),g!==m?(f=R(),f!==m?(h=v(),h!==m?d=e=[e,g,f,h]:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m);c!==m?a=b=ya(b,c):(w=a,a=m)}else w=a,a=m;return a}function v(){var b,c,d,g,f;b=w;c=ca();c===m&&(c=w,33===a.charCodeAt(w)?(d=z,w++):(d=m,0===L&&e(Ha)),d!==m?(g=w,L++,61===a.charCodeAt(w)?(f=da,w++):(f=m,0===L&&e(H)),L--,f===m?g=void 0:(w=g,g=m),g!==m?c=d=[d,g]:(w=c,c=m)):(w=c,c=m));c!==m?(d=R(),d!==m?(g=v(),g!==m?b=c={type:"unary_expr",operator:"NOT",expr:g}:(w=b,b=m)):(w=b,b=m)):(w=b,b=m);
if(b===m)if(b=w,c=r(),c!==m)if(d=R(),d!==m){var h,n,k;d=[];g=w;f=R();f!==m?(h=y(),h!==m?(n=R(),n!==m?(k=r(),k!==m?g=f=[f,h,n,k]:(w=g,g=m)):(w=g,g=m)):(w=g,g=m)):(w=g,g=m);if(g!==m)for(;g!==m;)d.push(g),g=w,f=R(),f!==m?(h=y(),h!==m?(n=R(),n!==m?(k=r(),k!==m?g=f=[f,h,n,k]:(w=g,g=m)):(w=g,g=m)):(w=g,g=m)):(w=g,g=m);else d=m;d!==m&&(d={type:"arithmetic",tail:d});d===m&&(d=w,g=B(),g!==m?(f=R(),f!==m?(f=Ka(),f!==m?(f=R(),f!==m?(f=p(),f!==m?(h=R(),h!==m?(h=Na(),h!==m?d=g={op:g,right:f}:(w=d,d=m)):(w=d,d=
m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m),d===m&&(d=w,g=B(),g!==m?(f=R(),f!==m?(f=Ka(),f!==m?(f=R(),f!==m?(f=Na(),f!==m?d=g={op:g,right:{type:"expr_list",value:[]}}:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m),d===m&&(d=w,g=B(),g!==m?(f=R(),f!==m?(f=J(),f!==m?d=g={op:g,right:f}:(w=d,d=m)):(w=d,d=m)):(w=d,d=m))),d===m&&(d=w,f=ca(),f!==m?(g=R(),g!==m?(g=ea(),g!==m?(h=R(),h!==m?(h=r(),h!==m?(n=R(),n!==m?(n=fa(),n!==m?(f=R(),f!==m?(f=r(),f!==m?d=f={op:"NOT"+g,right:{type:"expr_list",
value:[h,f]}}:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m),d===m&&(d=w,f=ea(),f!==m?(g=R(),g!==m?(g=r(),g!==m?(h=R(),h!==m?(h=fa(),h!==m?(n=R(),n!==m?(n=r(),n!==m?d=f={op:f,right:{type:"expr_list",value:[g,n]}}:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)),d===m&&(d=w,g=K(),g!==m?(f=R(),f!==m?(f=ca(),f!==m?(f=R(),f!==m?(f=r(),f!==m?d=g={op:g+"NOT",right:f}:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m),d===
m&&(d=w,g=K(),g!==m?(f=R(),f!==m?(f=r(),f!==m?d=g={op:g,right:f}:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)),d===m&&(d=w,g=C(),g!==m?(f=R(),f!==m?(f=N(),f!==m?(h=R(),h!==m?(h=w,a.substr(w,6).toLowerCase()===bb?(n=a.substr(w,6),w+=6):(n=m,0===L&&e(Rb)),n!==m?(n=w,L++,k=G(),L--,k===m?n=void 0:(w=n,n=m),n!==m?h="ESCAPE":(w=h,h=m)):(w=h,h=m),h!==m?(h=R(),h!==m?(h=Z(),h!==m?d=g={op:g,right:f,escape:h.value}:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m),d===m&&(d=w,g=C(),g!==m?(f=R(),
f!==m?(f=N(),f!==m?d=g={op:g,right:f,escape:""}:(w=d,d=m)):(w=d,d=m)):(w=d,d=m))))));d===m&&(d=null);d!==m?(b=c,c=d,""==c||void 0==c||null==c?c=b:(d=null,c=d="arithmetic"==c.type?ya(b,c.tail):W(c.op,b,c.right,c.escape)),b=c):(w=b,b=m)}else w=b,b=m;else w=b,b=m;return b}function y(){var b;a.substr(w,2)===Ya?(b=Ya,w+=2):(b=m,0===L&&e(Oa));b===m&&(62===a.charCodeAt(w)?(b=cb,w++):(b=m,0===L&&e(Xa)),b===m&&(a.substr(w,2)===eb?(b=eb,w+=2):(b=m,0===L&&e(V)),b===m&&(a.substr(w,2)===Ua?(b=Ua,w+=2):(b=m,0===
L&&e(Fa)),b===m&&(60===a.charCodeAt(w)?(b=ka,w++):(b=m,0===L&&e(gb)),b===m&&(61===a.charCodeAt(w)?(b=da,w++):(b=m,0===L&&e(H)),b===m&&(a.substr(w,2)===$a?(b=$a,w+=2):(b=m,0===L&&e(ta))))))));return b}function C(){var a,b,c,d;a=a=w;b=ca();b!==m?(c=R(),c!==m?(d=Y(),d!==m?a=b=[b,c,d]:(w=a,a=m)):(w=a,a=m)):(w=a,a=m);a!==m&&(a=a[0]+" "+a[2]);a===m&&(a=Y());return a}function B(){var a,b,c,d;a=a=w;b=ca();b!==m?(c=R(),c!==m?(d=aa(),d!==m?a=b=[b,c,d]:(w=a,a=m)):(w=a,a=m)):(w=a,a=m);a!==m&&(a=a[0]+" "+a[2]);
a===m&&(a=aa());return a}function r(){var a,b,c,d,e,g,f,h;a=w;b=u();if(b!==m){c=[];d=w;e=R();e!==m?(g=A(),g!==m?(f=R(),f!==m?(h=u(),h!==m?d=e=[e,g,f,h]:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m);for(;d!==m;)c.push(d),d=w,e=R(),e!==m?(g=A(),g!==m?(f=R(),f!==m?(h=u(),h!==m?d=e=[e,g,f,h]:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m);c!==m?a=b=ya(b,c):(w=a,a=m)}else w=a,a=m;return a}function A(){var b;43===a.charCodeAt(w)?(b=Za,w++):(b=m,0===L&&e(Q));b===m&&(45===a.charCodeAt(w)?(b=xa,w++):(b=m,0===L&&e(I)));
return b}function u(){var a,b,c,d,e,g,f,h;a=w;b=t();if(b!==m){c=[];d=w;e=R();e!==m?(g=n(),g!==m?(f=R(),f!==m?(h=t(),h!==m?d=e=[e,g,f,h]:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m);for(;d!==m;)c.push(d),d=w,e=R(),e!==m?(g=n(),g!==m?(f=R(),f!==m?(h=t(),h!==m?d=e=[e,g,f,h]:(w=d,d=m)):(w=d,d=m)):(w=d,d=m)):(w=d,d=m);c!==m?a=b=ya(b,c):(w=a,a=m)}else w=a,a=m;return a}function n(){var b;42===a.charCodeAt(w)?(b=la,w++):(b=m,0===L&&e(ma));b===m&&(47===a.charCodeAt(w)?(b=va,w++):(b=m,0===L&&e(ga)));return b}
function t(){var b,c,d,f,h,n,k;k=Z();if(k===m){var l,q,t,u;l=w;var A,v,B,y;A=w;v=ha();v!==m?(B=T(),B!==m?(y=qa(),y!==m?A=v=parseFloat(v+B+y):(w=A,A=m)):(w=A,A=m)):(w=A,A=m);A===m&&(A=w,v=ha(),v!==m?(B=T(),B!==m?A=v=parseFloat(v+B):(w=A,A=m)):(w=A,A=m),A===m&&(A=w,v=ha(),v!==m?(B=qa(),B!==m?A=v=parseFloat(v+B):(w=A,A=m)):(w=A,A=m),A===m&&(A=w,v=ha(),v!==m&&(v=parseFloat(v)),A=v)));q=A;q!==m?(t=w,L++,u=D(),L--,u===m?t=void 0:(w=t,t=m),t!==m?l=q={type:"number",value:q}:(w=l,l=m)):(w=l,l=m);k=l;if(k===
m){var r,C;r=w;var M,z,Bb,ea;M=w;a.substr(w,4).toLowerCase()===hd?(z=a.substr(w,4),w+=4):(z=m,0===L&&e(Vc));z!==m?(Bb=w,L++,ea=G(),L--,ea===m?Bb=void 0:(w=Bb,Bb=m),Bb!==m?M=z=[z,Bb]:(w=M,M=m)):(w=M,M=m);C=M;C!==m&&(C={type:"bool",value:!0});r=C;if(r===m){r=w;var K,X,Va,rb;K=w;a.substr(w,5).toLowerCase()===Wc?(X=a.substr(w,5),w+=5):(X=m,0===L&&e(id));X!==m?(Va=w,L++,rb=G(),L--,rb===m?Va=void 0:(w=Va,Va=m),Va!==m?K=X=[X,Va]:(w=K,K=m)):(w=K,K=m);C=K;C!==m&&(C={type:"bool",value:!1});r=C}k=r;if(k===m){var na,
Y,H,I,Sa;Y=w;a.substr(w,4).toLowerCase()===Fc?(H=a.substr(w,4),w+=4):(H=m,0===L&&e(gd));H!==m?(I=w,L++,Sa=G(),L--,Sa===m?I=void 0:(w=I,I=m),I!==m?Y=H=[H,I]:(w=Y,Y=m)):(w=Y,Y=m);na=Y;na!==m&&(na={type:"null",value:null});k=na;if(k===m){var kb,Ca,ca,V;kb=w;var cb,ka,da,Ua;cb=w;a.substr(w,4).toLowerCase()===Ab?(ka=a.substr(w,4),w+=4):(ka=m,0===L&&e(Lb));ka!==m?(da=w,L++,Ua=G(),L--,Ua===m?da=void 0:(w=da,da=m),da!==m?cb=ka="DATE":(w=cb,cb=m)):(w=cb,cb=m);Ca=cb;Ca!==m?(ca=R(),ca!==m?(V=N(),V!==m?kb=Ca=
{type:"date",value:V.value}:(w=kb,kb=m)):(w=kb,kb=m)):(w=kb,kb=m);k=kb;if(k===m){var fa,Q,ba,Xa;fa=w;var Fa,lb,P,eb;Fa=w;a.substr(w,9).toLowerCase()===Qa?(lb=a.substr(w,9),w+=9):(lb=m,0===L&&e(nb));lb!==m?(P=w,L++,eb=G(),L--,eb===m?P=void 0:(w=P,P=m),P!==m?Fa=lb="TIMESTAMP":(w=Fa,Fa=m)):(w=Fa,Fa=m);Q=Fa;Q!==m?(ba=R(),ba!==m?(Xa=N(),Xa!==m?fa=Q={type:"timestamp",value:Xa.value}:(w=fa,fa=m)):(w=fa,fa=m)):(w=fa,fa=m);k=fa}}}}}b=k;if(b===m){var W,U,mc,ta,ga,ja,$a,la,Nb,Ha,xa,Ja;W=w;var ma,gb,Ya,ya;ma=
w;a.substr(w,7).toLowerCase()===pc?(gb=a.substr(w,7),w+=7):(gb=m,0===L&&e(Xc));gb!==m?(Ya=w,L++,ya=G(),L--,ya===m?Ya=void 0:(w=Ya,Ya=m),Ya!==m?ma=gb="EXTRACT":(w=ma,ma=m)):(w=ma,ma=m);U=ma;if(U!==m)if(mc=R(),mc!==m)if(ta=Ka(),ta!==m)if(ga=R(),ga!==m){var ua,Za,Eb,va,Ta;Za=w;a.substr(w,4).toLowerCase()===kd?(Eb=a.substr(w,4),w+=4):(Eb=m,0===L&&e(Dd));Eb!==m?(va=w,L++,Ta=G(),L--,Ta===m?va=void 0:(w=va,va=m),va!==m?Za=Eb="YEAR":(w=Za,Za=m)):(w=Za,Za=m);ua=Za;if(ua===m){var Oa,Aa,za,La;Oa=w;a.substr(w,
5).toLowerCase()===jd?(Aa=a.substr(w,5),w+=5):(Aa=m,0===L&&e(Pa));Aa!==m?(za=w,L++,La=G(),L--,La===m?za=void 0:(w=za,za=m),za!==m?Oa=Aa="MONTH":(w=Oa,Oa=m)):(w=Oa,Oa=m);ua=Oa;if(ua===m){var Ga,Fb,Ra,db;Ga=w;a.substr(w,3).toLowerCase()===jc?(Fb=a.substr(w,3),w+=3):(Fb=m,0===L&&e(ic));Fb!==m?(Ra=w,L++,db=G(),L--,db===m?Ra=void 0:(w=Ra,Ra=m),Ra!==m?Ga=Fb="DAY":(w=Ga,Ga=m)):(w=Ga,Ga=m);ua=Ga;if(ua===m){var Wa,ib,fb,tb;Wa=w;a.substr(w,4).toLowerCase()===wd?(ib=a.substr(w,4),w+=4):(ib=m,0===L&&e(xd));ib!==
m?(fb=w,L++,tb=G(),L--,tb===m?fb=void 0:(w=fb,fb=m),fb!==m?Wa=ib="HOUR":(w=Wa,Wa=m)):(w=Wa,Wa=m);ua=Wa;if(ua===m){var bb,ob,mb,Db;bb=w;a.substr(w,6).toLowerCase()===yd?(ob=a.substr(w,6),w+=6):(ob=m,0===L&&e(zc));ob!==m?(mb=w,L++,Db=G(),L--,Db===m?mb=void 0:(w=mb,mb=m),mb!==m?bb=ob="MINUTE":(w=bb,bb=m)):(w=bb,bb=m);ua=bb;if(ua===m){var hb,sb,pb,Kb;hb=w;a.substr(w,6).toLowerCase()===Yc?(sb=a.substr(w,6),w+=6):(sb=m,0===L&&e(zd));sb!==m?(pb=w,L++,Kb=G(),L--,Kb===m?pb=void 0:(w=pb,pb=m),pb!==m?hb=sb=
"SECOND":(w=hb,hb=m)):(w=hb,hb=m);ua=hb}}}}}ja=ua;ja!==m?($a=R(),$a!==m?(la=oa(),la!==m?(Nb=R(),Nb!==m?(Ha=g(),Ha!==m?(xa=R(),xa!==m?(Ja=Na(),Ja!==m?W=U={type:"function",name:"extract",args:{type:"expr_list",value:[{type:"string",value:ja},Ha]}}:(w=W,W=m)):(w=W,W=m)):(w=W,W=m)):(w=W,W=m)):(w=W,W=m)):(w=W,W=m)):(w=W,W=m)}else w=W,W=m;else w=W,W=m;else w=W,W=m;else w=W,W=m;b=W;if(b===m){var Ia,Hb,Vb,Xb,Yb,Cb,ac,bc,cc,Gb,dc,jb,Oc,Wb,Zb,$b;Ia=w;var uc,Mb,Zc,nc;uc=w;a.substr(w,9).toLowerCase()===Cd?(Mb=
a.substr(w,9),w+=9):(Mb=m,0===L&&e(Hc));Mb!==m?(Zc=w,L++,nc=G(),L--,nc===m?Zc=void 0:(w=Zc,Zc=m),Zc!==m?uc=Mb="SUBSTRING":(w=uc,uc=m)):(w=uc,uc=m);Hb=uc;if(Hb!==m)if(Vb=R(),Vb!==m)if(Xb=Ka(),Xb!==m)if(Yb=R(),Yb!==m)if(Cb=g(),Cb!==m)if(ac=R(),ac!==m)if(bc=oa(),bc!==m)if(cc=R(),cc!==m)if(Gb=g(),Gb!==m)if(dc=R(),dc!==m){jb=w;var vc,Ob,$c,oc;vc=w;a.substr(w,3).toLowerCase()===Bd?(Ob=a.substr(w,3),w+=3):(Ob=m,0===L&&e(Gc));Ob!==m?($c=w,L++,oc=G(),L--,oc===m?$c=void 0:(w=$c,$c=m),$c!==m?vc=Ob="FOR":(w=
vc,vc=m)):(w=vc,vc=m);Oc=vc;Oc!==m?(Wb=R(),Wb!==m?(Zb=g(),Zb!==m?($b=R(),$b!==m?jb=Oc=[Oc,Wb,Zb,$b]:(w=jb,jb=m)):(w=jb,jb=m)):(w=jb,jb=m)):(w=jb,jb=m);jb===m&&(jb=null);jb!==m?(Oc=Na(),Oc!==m?Ia=Hb={type:"function",name:"substring",args:{type:"expr_list",value:jb?[Cb,Gb,jb[2]]:[Cb,Gb]}}:(w=Ia,Ia=m)):(w=Ia,Ia=m)}else w=Ia,Ia=m;else w=Ia,Ia=m;else w=Ia,Ia=m;else w=Ia,Ia=m;else w=Ia,Ia=m;else w=Ia,Ia=m;else w=Ia,Ia=m;else w=Ia,Ia=m;else w=Ia,Ia=m;else w=Ia,Ia=m;b=Ia;if(b===m){var pa,Pc,Pb,Qb,Rb,vb,Sb,
Qc,Tb,Ub,qc,ec,sc,tc;pa=w;Pc=ra();Pc!==m?(Pb=R(),Pb!==m?(Qb=Ka(),Qb!==m?(Rb=R(),Rb!==m?(vb=E(),vb===m&&(vb=null),vb!==m?(Sb=R(),Sb!==m?(Qc=g(),Qc!==m?(Tb=R(),Tb!==m?(Ub=oa(),Ub!==m?(qc=R(),qc!==m?(ec=g(),ec!==m?(sc=R(),sc!==m?(tc=Na(),tc!==m?pa=Pc={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==vb?"BOTH":vb},Qc,ec]}}:(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=
pa,pa=m)):(w=pa,pa=m);pa===m&&(pa=w,Pc=ra(),Pc!==m?(Pb=R(),Pb!==m?(Qb=Ka(),Qb!==m?(Rb=R(),Rb!==m?(vb=E(),vb===m&&(vb=null),vb!==m?(Sb=R(),Sb!==m?(Qc=g(),Qc!==m?(Tb=R(),Tb!==m?(Ub=Na(),Ub!==m?pa=Pc={type:"function",name:"trim",args:{type:"expr_list",value:[{type:"string",value:null==vb?"BOTH":vb},Qc]}}:(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m)):(w=pa,pa=m));b=pa;if(b===m){var Ma,kc,yc,Ac,Bc,lc,Cc,Dc,Ec,rc,Ic,Jc;Ma=w;var wc,od,ad,Kc;wc=w;
a.substr(w,8).toLowerCase()===zb?(od=a.substr(w,8),w+=8):(od=m,0===L&&e(qb));od!==m?(ad=w,L++,Kc=G(),L--,Kc===m?ad=void 0:(w=ad,ad=m),ad!==m?wc=od="POSITION":(w=wc,wc=m)):(w=wc,wc=m);kc=wc;kc!==m?(yc=R(),yc!==m?(Ac=Ka(),Ac!==m?(Bc=R(),Bc!==m?(lc=g(),lc!==m?(Cc=R(),Cc!==m?(Dc=aa(),Dc!==m?(Ec=R(),Ec!==m?(rc=g(),rc!==m?(Ic=R(),Ic!==m?(Jc=Na(),Jc!==m?Ma=kc={type:"function",name:"position",args:{type:"expr_list",value:[lc,rc]}}:(w=Ma,Ma=m)):(w=Ma,Ma=m)):(w=Ma,Ma=m)):(w=Ma,Ma=m)):(w=Ma,Ma=m)):(w=Ma,Ma=
m)):(w=Ma,Ma=m)):(w=Ma,Ma=m)):(w=Ma,Ma=m)):(w=Ma,Ma=m)):(w=Ma,Ma=m);b=Ma;if(b===m){var ab,pd,Lc,Mc,Nc,Rc,Fd,Gd;ab=w;var wb,bd,cd,Jb;wb=w;wb=bd=x();if(wb===m)if(wb=w,96===a.charCodeAt(w)?(bd=ub,w++):(bd=m,0===L&&e(ld)),bd!==m){cd=[];md.test(a.charAt(w))?(Jb=a.charAt(w),w++):(Jb=m,0===L&&e(nd));if(Jb!==m)for(;Jb!==m;)cd.push(Jb),md.test(a.charAt(w))?(Jb=a.charAt(w),w++):(Jb=m,0===L&&e(nd));else cd=m;cd!==m?(96===a.charCodeAt(w)?(Jb=ub,w++):(Jb=m,0===L&&e(ld)),Jb!==m?wb=bd=cd.join(""):(w=wb,wb=m)):(w=
wb,wb=m)}else w=wb,wb=m;pd=wb;pd!==m?(Lc=R(),Lc!==m?(Mc=Ka(),Mc!==m?(Nc=R(),Nc!==m?(Rc=p(),Rc===m&&(Rc=null),Rc!==m?(Fd=R(),Fd!==m?(Gd=Na(),Gd!==m?ab=pd={type:"function",name:pd,args:Rc?Rc:{type:"expr_list",value:[]}}:(w=ab,ab=m)):(w=ab,ab=m)):(w=ab,ab=m)):(w=ab,ab=m)):(w=ab,ab=m)):(w=ab,ab=m)):(w=ab,ab=m);b=ab;if(b===m){var qd,wa,Sc,rd,Tc,sd,gc,xb,dd,Hd,Id;wa=w;Sc=sa();if(Sc!==m)if(rd=R(),rd!==m)if(Tc=g(),Tc!==m)if(sd=R(),sd!==m){gc=[];for(xb=S();xb!==m;)gc.push(xb),xb=S();gc!==m?(xb=R(),xb!==m?
(dd=Ea(),dd!==m?wa=Sc={type:"case_expression",format:"simple",operand:Tc,clauses:gc,else:null}:(w=wa,wa=m)):(w=wa,wa=m)):(w=wa,wa=m)}else w=wa,wa=m;else w=wa,wa=m;else w=wa,wa=m;else w=wa,wa=m;if(wa===m)if(wa=w,Sc=sa(),Sc!==m)if(rd=R(),rd!==m)if(Tc=g(),Tc!==m)if(sd=R(),sd!==m){gc=[];for(xb=S();xb!==m;)gc.push(xb),xb=S();gc!==m?(xb=R(),xb!==m?(dd=O(),dd!==m?(Hd=R(),Hd!==m?(Id=Ea(),Id!==m?wa=Sc={type:"case_expression",format:"simple",operand:Tc,clauses:gc,else:dd.value}:(w=wa,wa=m)):(w=wa,wa=m)):(w=
wa,wa=m)):(w=wa,wa=m)):(w=wa,wa=m)}else w=wa,wa=m;else w=wa,wa=m;else w=wa,wa=m;else w=wa,wa=m;qd=wa;if(qd===m){var Da,Uc,td,hc,yb,ed,Jd,Kd;Da=w;Uc=sa();if(Uc!==m)if(td=R(),td!==m){hc=[];for(yb=ia();yb!==m;)hc.push(yb),yb=ia();hc!==m?(yb=R(),yb!==m?(ed=Ea(),ed!==m?Da=Uc={type:"case_expression",format:"searched",clauses:hc,else:null}:(w=Da,Da=m)):(w=Da,Da=m)):(w=Da,Da=m)}else w=Da,Da=m;else w=Da,Da=m;if(Da===m)if(Da=w,Uc=sa(),Uc!==m)if(td=R(),td!==m){hc=[];for(yb=ia();yb!==m;)hc.push(yb),yb=ia();hc!==
m?(yb=R(),yb!==m?(ed=O(),ed!==m?(Jd=R(),Jd!==m?(Kd=Ea(),Kd!==m?Da=Uc={type:"case_expression",format:"searched",clauses:hc,else:ed.value}:(w=Da,Da=m)):(w=Da,Da=m)):(w=Da,Da=m)):(w=Da,Da=m)):(w=Da,Da=m)}else w=Da,Da=m;else w=Da,Da=m;qd=Da}b=qd;if(b===m){var fd,xc,Ed,ud,vd;xc=w;Ed=D();if(Ed!==m){ud=[];for(vd=F();vd!==m;)ud.push(vd),vd=F();ud!==m?xc=Ed+=ud.join(""):(w=xc,xc=m)}else w=xc,xc=m;fd=xc;fd!==m&&(fd={type:"column_ref",table:"",column:fd});b=fd;b===m&&(b=J(),b===m&&(b=w,c=Ka(),c!==m?(d=R(),d!==
m?(f=g(),f!==m?(h=R(),h!==m?(n=Na(),n!==m?(f.paren=!0,b=c=f):(w=b,b=m)):(w=b,b=m)):(w=b,b=m)):(w=b,b=m)):(w=b,b=m)))}}}}}}}return b}function x(){var a,b,c,d;a=w;b=D();if(b!==m){c=[];for(d=G();d!==m;)c.push(d),d=G();c!==m?a=b+=c.join(""):(w=a,a=m)}else w=a,a=m;return a}function D(){var b;ja.test(a.charAt(w))?(b=a.charAt(w),w++):(b=m,0===L&&e(P));return b}function G(){var b;Bb.test(a.charAt(w))?(b=a.charAt(w),w++):(b=m,0===L&&e(Va));return b}function F(){var b;rb.test(a.charAt(w))?(b=a.charAt(w),w++):
(b=m,0===L&&e(kb));return b}function J(){var b,c,d;b=w;64===a.charCodeAt(w)?(c=lb,w++):(c=m,0===L&&e(mc));c!==m?(d=x(),d!==m?b=c=[c,d]:(w=b,b=m)):(w=b,b=m);b!==m&&(b={type:"param",value:b[1]});return b}function E(){var b,c,d;b=w;a.substr(w,7).toLowerCase()===kc?(c=a.substr(w,7),w+=7):(c=m,0===L&&e(yc));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="LEADING":(w=b,b=m)):(w=b,b=m);b===m&&(b=w,a.substr(w,8).toLowerCase()===qc?(c=a.substr(w,8),w+=8):(c=m,0===L&&e(La)),c!==m?(c=w,L++,d=G(),
L--,d===m?c=void 0:(w=c,c=m),c!==m?b="TRAILING":(w=b,b=m)):(w=b,b=m),b===m&&(b=w,a.substr(w,4).toLowerCase()===ec?(c=a.substr(w,4),w+=4):(c=m,0===L&&e(Mb)),c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="BOTH":(w=b,b=m)):(w=b,b=m)));return b}function N(){var a;a=Z();a===m&&(a=J());return a}function Z(){var b,c,d;b=w;39===a.charCodeAt(w)?(c=Nb,w++):(c=m,0===L&&e(Eb));c===m&&(a.substr(w,2)===Fb?(c=Fb,w+=2):(c=m,0===L&&e(ob)));if(c!==m){c=[];d=w;a.substr(w,2)===sb?(d=sb,w+=2):(d=m,0===L&&
e(nc));d!==m&&(d="'");d===m&&(cc.test(a.charAt(w))?(d=a.charAt(w),w++):(d=m,0===L&&e(pb)));for(;d!==m;)c.push(d),d=w,a.substr(w,2)===sb?(d=sb,w+=2):(d=m,0===L&&e(nc)),d!==m&&(d="'"),d===m&&(cc.test(a.charAt(w))?(d=a.charAt(w),w++):(d=m,0===L&&e(pb)));c!==m?(39===a.charCodeAt(w)?(d=Nb,w++):(d=m,0===L&&e(Eb)),d!==m?b=c={type:"string",value:c.join("")}:(w=b,b=m)):(w=b,b=m)}else w=b,b=m;return b}function ia(){var a,b,c;a=w;b=na();b!==m?(b=R(),b!==m?(b=g(),b!==m?(c=R(),c!==m?(c=Ca(),c!==m?(c=R(),c!==m?
(c=g(),c!==m?a=b={type:"when_clause",operand:b,value:c}:(w=a,a=m)):(w=a,a=m)):(w=a,a=m)):(w=a,a=m)):(w=a,a=m)):(w=a,a=m)):(w=a,a=m);return a}function S(){var a,b,c;a=w;b=na();b!==m?(b=R(),b!==m?(b=g(),b!==m?(c=R(),c!==m?(c=Ca(),c!==m?(c=R(),c!==m?(c=g(),c!==m?a=b={type:"when_clause",operand:b,value:c}:(w=a,a=m)):(w=a,a=m)):(w=a,a=m)):(w=a,a=m)):(w=a,a=m)):(w=a,a=m)):(w=a,a=m);return a}function O(){var b,c;b=w;var d,f;c=w;a.substr(w,4).toLowerCase()===Jc?(d=a.substr(w,4),w+=4):(d=m,0===L&&e(Kc));d!==
m?(d=w,L++,f=G(),L--,f===m?d=void 0:(w=d,d=m),d!==m?c="ELSE":(w=c,c=m)):(w=c,c=m);c!==m?(c=R(),c!==m?(c=g(),c!==m?b={type:"else_clause",value:c}:(w=b,b=m)):(w=b,b=m)):(w=b,b=m);return b}function ha(){var b,c,d;b=X();b===m&&(b=w,45===a.charCodeAt(w)?(c=xa,w++):(c=m,0===L&&e(I)),c===m&&(43===a.charCodeAt(w)?(c=Za,w++):(c=m,0===L&&e(Q))),c!==m?(d=X(),d!==m?b=c=c[0]+d:(w=b,b=m)):(w=b,b=m));return b}function T(){var b,c;b=w;46===a.charCodeAt(w)?(c=Ob,w++):(c=m,0===L&&e(Gb));c!==m?(c=X(),c===m&&(c=null),
c!==m?b="."+(null!=c?c:""):(w=b,b=m)):(w=b,b=m);return b}function qa(){var b,c,d;c=b=w;ib.test(a.charAt(w))?(d=a.charAt(w),w++):(d=m,0===L&&e(tb));d!==m?(Ec.test(a.charAt(w))?(d=a.charAt(w),w++):(d=m,0===L&&e(mb)),d===m&&(d=null),d!==m?c="e"+(null===d?"":d):(w=c,c=m)):(w=c,c=m);c!==m?(d=X(),d!==m?b=c+d:(w=b,b=m)):(w=b,b=m);return b}function X(){var a,b;a=[];b=M();if(b!==m)for(;b!==m;)a.push(b),b=M();else a=m;a!==m&&(a=a.join(""));return a}function M(){var b;oc.test(a.charAt(w))?(b=a.charAt(w),w++):
(b=m,0===L&&e(Pb));return b}function aa(){var b,c,d;b=w;a.substr(w,2).toLowerCase()===Qb?(c=a.substr(w,2),w+=2):(c=m,0===L&&e(Db));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="IN":(w=b,b=m)):(w=b,b=m);return b}function K(){var b,c,d;b=w;a.substr(w,2).toLowerCase()===Ga?(c=a.substr(w,2),w+=2):(c=m,0===L&&e($b));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="IS":(w=b,b=m)):(w=b,b=m);return b}function Y(){var b,c,d;b=w;a.substr(w,4).toLowerCase()===Kb?(c=a.substr(w,4),w+=4):
(c=m,0===L&&e(ac));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="LIKE":(w=b,b=m)):(w=b,b=m);return b}function ca(){var b,c,d;b=w;a.substr(w,3).toLowerCase()===Ra?(c=a.substr(w,3),w+=3):(c=m,0===L&&e(Sb));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="NOT":(w=b,b=m)):(w=b,b=m);return b}function fa(){var b,c,d;b=w;a.substr(w,3).toLowerCase()===dc?(c=a.substr(w,3),w+=3):(c=m,0===L&&e(Hb));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="AND":(w=b,b=m)):(w=b,b=m);return b}
function ba(){var b,c,d;b=w;a.substr(w,2).toLowerCase()===za?(c=a.substr(w,2),w+=2):(c=m,0===L&&e(Tb));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="OR":(w=b,b=m)):(w=b,b=m);return b}function ea(){var b,c,d;b=w;a.substr(w,7).toLowerCase()===Ub?(c=a.substr(w,7),w+=7):(c=m,0===L&&e(Vb));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="BETWEEN":(w=b,b=m)):(w=b,b=m);return b}function oa(){var b,c,d;b=w;a.substr(w,4).toLowerCase()===Wb?(c=a.substr(w,4),w+=4):(c=m,0===L&&e(Xb));c!==
m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="FROM":(w=b,b=m)):(w=b,b=m);return b}function ra(){var b,c,d;b=w;a.substr(w,4).toLowerCase()===bc?(c=a.substr(w,4),w+=4):(c=m,0===L&&e(db));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="TRIM":(w=b,b=m)):(w=b,b=m);return b}function sa(){var b,c,d;b=w;a.substr(w,4).toLowerCase()===Ac?(c=a.substr(w,4),w+=4):(c=m,0===L&&e(Bc));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="CASE":(w=b,b=m)):(w=b,b=m);return b}function Ea(){var b,
c,d;b=w;a.substr(w,3).toLowerCase()===rc?(c=a.substr(w,3),w+=3):(c=m,0===L&&e(Ic));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="END":(w=b,b=m)):(w=b,b=m);return b}function na(){var b,c,d;b=w;a.substr(w,4).toLowerCase()===hb?(c=a.substr(w,4),w+=4):(c=m,0===L&&e(lc));c!==m?(c=w,L++,d=G(),L--,d===m?c=void 0:(w=c,c=m),c!==m?b="WHEN":(w=b,b=m)):(w=b,b=m);return b}function Ca(){var b,c,d;b=w;a.substr(w,4).toLowerCase()===Cc?(c=a.substr(w,4),w+=4):(c=m,0===L&&e(Dc));c!==m?(c=w,L++,d=G(),L--,
d===m?c=void 0:(w=c,c=m),c!==m?b="THEN":(w=b,b=m)):(w=b,b=m);return b}function Sa(){var b;44===a.charCodeAt(w)?(b=sc,w++):(b=m,0===L&&e(tc));return b}function Ka(){var b;40===a.charCodeAt(w)?(b=Lc,w++):(b=m,0===L&&e(Mc));return b}function Na(){var b;41===a.charCodeAt(w)?(b=fb,w++):(b=m,0===L&&e(Nc));return b}function R(){var a,b;a=[];for(b=Ja();b!==m;)a.push(b),b=Ja();return a}function Ja(){var b;U.test(a.charAt(w))?(b=a.charAt(w),w++):(b=m,0===L&&e(Aa));return b}function W(a,b,c,d){a={type:"binary_expr",
operator:a,left:b,right:c};void 0!==d&&(a.escape=d);return a}function ya(a,b){for(var c=0;c<b.length;c++)a=W(b[c][1],a,b[c][3]);return a}f=void 0!==f?f:{};var m={},ua={start:h},Ta=h,z="!",Ha=b("!",!1),da="\x3d",H=b("\x3d",!1),Ya="\x3e\x3d",Oa=b("\x3e\x3d",!1),cb="\x3e",Xa=b("\x3e",!1),eb="\x3c\x3d",V=b("\x3c\x3d",!1),Ua="\x3c\x3e",Fa=b("\x3c\x3e",!1),ka="\x3c",gb=b("\x3c",!1),$a="!\x3d",ta=b("!\x3d",!1),Za="+",Q=b("+",!1),xa="-",I=b("-",!1),la="*",ma=b("*",!1),va="/",ga=b("/",!1),ja=/^[A-Za-z_\x80-\uFFFF]/,
P=d([["A","Z"],["a","z"],"_",["\u0080","\uffff"]],!1,!1),Bb=/^[A-Za-z0-9_]/,Va=d([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),rb=/^[A-Za-z0-9_.\x80-\uFFFF]/,kb=d([["A","Z"],["a","z"],["0","9"],"_",".",["\u0080","\uffff"]],!1,!1),lb="@",mc=b("@",!1),Nb="'",Eb=b("'",!1),Fb="N'",ob=b("N'",!1),sb="''",nc=b("''",!1),cc=/^[^']/,pb=d(["'"],!0,!1),Ob=".",Gb=b(".",!1),oc=/^[0-9]/,Pb=d([["0","9"]],!1,!1),ib=/^[eE]/,tb=d(["e","E"],!1,!1),Ec=/^[+\-]/,mb=d(["+","-"],!1,!1),Fc="null",gd=b("NULL",!0),hd="true",Vc=
b("TRUE",!0),Wc="false",id=b("FALSE",!0),Qb="in",Db=b("IN",!0),Ga="is",$b=b("IS",!0),Kb="like",ac=b("LIKE",!0),bb="escape",Rb=b("ESCAPE",!0),Ra="not",Sb=b("NOT",!0),dc="and",Hb=b("AND",!0),za="or",Tb=b("OR",!0),Ub="between",Vb=b("BETWEEN",!0),Wb="from",Xb=b("FROM",!0),Bd="for",Gc=b("FOR",!0),Cd="substring",Hc=b("SUBSTRING",!0),pc="extract",Xc=b("EXTRACT",!0),bc="trim",db=b("TRIM",!0),zb="position",qb=b("POSITION",!0),Qa="timestamp",nb=b("TIMESTAMP",!0),Ab="date",Lb=b("DATE",!0),kc="leading",yc=b("LEADING",
!0),qc="trailing",La=b("TRAILING",!0),ec="both",Mb=b("BOTH",!0),kd="year",Dd=b("YEAR",!0),jd="month",Pa=b("MONTH",!0),jc="day",ic=b("DAY",!0),wd="hour",xd=b("HOUR",!0),yd="minute",zc=b("MINUTE",!0),Yc="second",zd=b("SECOND",!0),Ac="case",Bc=b("CASE",!0),rc="end",Ic=b("END",!0),hb="when",lc=b("WHEN",!0),Cc="then",Dc=b("THEN",!0),Jc="else",Kc=b("ELSE",!0),sc=",",tc=b(",",!1),Lc="(",Mc=b("(",!1),fb=")",Nc=b(")",!1),U=/^[ \t\n\r]/,Aa=d([" ","\t","\n","\r"],!1,!1),ub="`",ld=b("`",!1),md=/^[^`]/,nd=d(["`"],
!0,!1),w=0,Yb=[{line:1,column:1}],Wa=0,Zb=[],L=0,Cb;if("startRule"in f){if(!(f.startRule in ua))throw Error("Can't start parsing from rule \""+f.startRule+'".');Ta=ua[f.startRule]}Cb=Ta();if(Cb!==m&&w===a.length)return Cb;Cb!==m&&w<a.length&&e({type:"end"});throw function(a,b,d){return new c(c.buildMessage(a,b),a,b,d)}(Zb,Wa<a.length?a.charAt(Wa):null,Wa<a.length?k(Wa,Wa+1):k(Wa,Wa));}}})},"esri/layers/graphics/data/projectionSupport":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../geometry/projection ../../../geometry/support/spatialReferenceUtils ../../../geometry/support/webMercatorUtils".split(" "),
function(c,a,f,b,d,l,k){function e(a,b){var c;if(!b)return null;if("x"in b){var d={x:0,y:0};a=a(b.x,b.y,q,0);d.x=a[0];d.y=a[1];null!=b.z&&(d.z=b.z);null!=b.m&&(d.m=b.m);return d}if("xmin"in b)return d={xmin:0,ymin:0,xmax:0,ymax:0},c=a(b.xmin,b.ymin,q,0),d.xmin=c[0],d.ymin=c[1],a=a(b.xmax,b.ymax,q,0),d.xmax=a[0],d.ymax=a[1],b.hasZ&&(d.zmin=b.zmin,d.zmax=b.zmax,d.hasZ=!0),b.hasM&&(d.mmin=b.mmin,d.mmax=b.mmax,d.hasM=!0),d;if("rings"in b)return{rings:h(b.rings,a),hasM:b.hasM,hasZ:b.hasZ};if("paths"in
b)return{paths:h(b.paths,a),hasM:b.hasM,hasZ:b.hasZ};if("points"in b)return{points:p(b.points,a),hasM:b.hasM,hasZ:b.hasZ}}function h(a,b){for(var c=[],d=0;d<a.length;d++)c.push(p(a[d],b));return c}function p(a,b){for(var c=[],d=0;d<a.length;d++){var e=a[d],g=b(e[0],e[1],[0,0],0);c.push(g);2<e.length&&g.push(e[2]);3<e.length&&g.push(e[3])}return c}function g(a,b){return!a||!b||l.equals(a,b)||k.canProject(a,b)?!1:!0}Object.defineProperty(a,"__esModule",{value:!0});var q=[0,0];a.checkProjectionSupport=
function(a,c){if(Array.isArray(a)){for(var e=0;e<a.length;e++){var h=a[e];if(g(h.geometry&&h.geometry.spatialReference,c))return d.isSupported()?d.load():b.reject(new f("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:c}))}return b.resolve()}return g(a,c)?d.isSupported()?d.load():b.reject(new f("feature-store:unsupported-query","projection not supported",{inSpatialReference:a,outSpatialReference:c})):b.resolve()};var v=e.bind(null,k.lngLatToXY),
y=e.bind(null,k.xyToLngLat);a.project=function(a,b,c){return b&&c&&!l.equals(b,c)?k.canProject(b,c)?l.isWebMercator(c)?v(a):y(a):d.projectMany([a],b,c,null,!0)[0]:a};var C=new (function(){function a(){this._jobs=[];this._timer=null;this._process=this._process.bind(this)}a.prototype.push=function(a,c,d){var e=this;a&&a.length&&c&&d&&!l.equals(c,d)||b.resolve(a);var g={geometries:a,inSpatialReference:c,outSpatialReference:d,resolve:null};this._jobs.push(g);return b.create(function(a){g.resolve=a;null===
e._timer&&(e._timer=setTimeout(e._process,10))},function(){var a=e._jobs.indexOf(g);-1<a&&e._jobs.splice(a,1)})};a.prototype._process=function(){this._timer=null;var a=this._jobs.shift();if(a){var b=a.geometries,c=a.inSpatialReference,e=a.outSpatialReference,a=a.resolve;k.canProject(c,e)?l.isWebMercator(e)?a(b.map(v)):a(b.map(y)):a(d.projectMany(b,c,e,null,!0));0<this._jobs.length&&(this._timer=setTimeout(this._process,10))}};return a}());a.projectMany=function(a,b,c){return C.push(a,b,c)}})},"esri/layers/graphics/data/QueryEngineCapabilities":function(){define(["require",
"exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.queryCapabilities={supportsAttachments:!1,supportsStatistics:!0,supportsCentroid:!0,supportsDistance:!0,supportsDistinct:!0,supportsExtent:!0,supportsGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQuantization:!0,supportsResultType:!1,supportsSqlExpression:!0,supportsStandardizedQueriesOnly:!0,supportsQueryByOthers:!0,supportsHistoricMoment:!1,supportsFormatPBF:!1}})},"esri/layers/graphics/data/QueryEngineResult":function(){define("require exports @dojo/framework/shim/Set ../../../core/promiseUtils ../../../geometry/support/quantizationUtils ../../../geometry/support/spatialReferenceUtils ../featureConversionUtils ./AttributesBuilder ./attributeSupport ./projectionSupport ./utils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g){function q(a){return a?JSON.parse(JSON.stringify(a,["latestWkid","wkid","wkt"])):a}Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,b){this.items=a;this.definitionExpression=b.definitionExpression;this.geometryType=b.geometryType;this.hasM=b.hasM;this.hasZ=b.hasZ;this.objectIdField=b.objectIdField;this.spatialReference=b.spatialReference;this.fieldsMap=b.fieldsMap}Object.defineProperty(a.prototype,"size",{get:function(){return this.items.length},
enumerable:!0,configurable:!0});a.prototype.createQueryResponse=function(a){return a.outStatistics?this._createStatisticsQueryResponse(a):this._createFeatureQueryResponse(a)};a.prototype.executeAttributesQuery=function(a){var c=h.getWhereClause(a.where);if(!c)return b.resolve(this);if(c.isStandardized()){for(var d=0,e=[],g=0,f=this.items;g<f.length;g++){var k=f[g];c.testFeature(k.attributes)&&(e[d++]=k)}c=this._createNew(e);c.definitionExpression=a.where;return b.resolve(c)}return b.reject(new TypeError("Where clause is not standardized"))};
a.prototype.executeObjectIdsQuery=function(a){if(!a.objectIds||!a.objectIds.length)return b.resolve(this);var c=new f.default(a.objectIds);return b.resolve(this._createNew(this.items.filter(function(a){return c.has(a.objectId)})))};a.prototype.project=function(c){var d=this;return!c||l.equals(this.spatialReference,c)?b.resolve(this):p.projectMany(this.items.map(function(a){return g.getGeometry(d,a)}),this.spatialReference,c).then(function(b){for(var e=[],g=0;g<d.items.length;g++)e[g]={attributes:d.items[g].attributes,
geometry:b[g]};b=[];k.convertFromFeatures(b,e,d.geometryType,d.hasZ,d.hasM,d.objectIdField);return new a(b,{definitionExpression:d.definitionExpression,geometryType:d.geometryType,hasM:d.hasM,hasZ:d.hasZ,objectIdField:d.objectIdField,spatialReference:c,fieldsMap:d.fieldsMap})})};a.prototype._createFeatureQueryResponse=function(a){var b=this,c=this.items,e=this.geometryType,g=this.hasM,f=this.hasZ,h=this.objectIdField,k=this.spatialReference,p=a.outFields,l=a.outSpatialReference,v=a.quantizationParameters,
y=!1;if(null!=a.num&&null!=a.start)var J=a.start+a.num,y=c.length>J,c=c.slice(a.start,Math.min(c.length,J));return{exceededTransferLimit:y,features:this._createFeatures(a,c),fields:p&&p.map(function(a){return b.fieldsMap.get(a)}),geometryType:e,hasM:g,hasZ:f,objectIdFieldName:h,spatialReference:q(l?l.toJSON():k),transform:v&&d.toTransform(v)}};a.prototype._createFeatures=function(a,b){var c=new e.default(a,this.fieldsMap),f=a.quantizationParameters,h=a.returnGeometry,k=a.returnCentroid,n=a.maxAllowableOffset,
p=a.orderByFields;a=[];var l=0;if(b.length&&p&&p.length){var p=p[0].split(" "),q=p[0],v="DESC"===p[1];b.sort(function(a,b){a=c.getFieldValue(a,q);b=c.getFieldValue(b,q);if("number"===typeof a&&"number"===typeof b)return v?b-a:a-b;if("string"===typeof a&&"string"===typeof b)return a=a.toUpperCase(),b=b.toUpperCase(),(v?a>b:a<b)?-1:(v?a<b:a>b)?1:0})}if(h||k)if(f=d.toTransform(f),h&&!k)for(k=0;k<b.length;k++)h=b[k],a[l++]={attributes:c.getAttributes(h),geometry:g.getGeometry(this,h,n,f)};else if(!h&&
k)for(n=0;n<b.length;n++)h=b[n],a[l++]={attributes:c.getAttributes(h),centroid:g.getCentroid(this,h,f)};else for(k=0;k<b.length;k++)h=b[k],a[l++]={attributes:c.getAttributes(h),centroid:g.getCentroid(this,h,f),geometry:g.getGeometry(this,h,n,f)};else for(n=0;n<b.length;n++)h=b[n],(h=c.getAttributes(h))&&(a[l++]={attributes:h});return a};a.prototype._createNew=function(b){return new a(b,this)};a.prototype._createStatisticsQueryResponse=function(a){var b=new e.default(a,this.fieldsMap),c=[],d=[],g=
a.groupByFieldsForStatistics,f=a.having,h=g&&g.length,g=h&&g[0],k={},p={},l={},q={attributes:{}},v=0;for(a=a.outStatistics;v<a.length;v++){var y=a[v],E=y.onStatisticField,N=y.outStatisticFieldName,Z=y.statisticType,ia="1"===E;if(h&&(E===g||ia)&&"count"===Z){k[E]||(k[E]=this._calculateUniqueValues(b,ia?g:E));var Z=k[E],S;for(S in Z){var O=Z[S],ha=O.count,y=O.data,T=O.items,O=p[y]||{attributes:{}};if(!f||b.validateItems(T,f))O.attributes[N]=ha,O.attributes[ia?"EXPR_1":E]=y,p[y]=O}d.push({name:N,alias:N,
type:"esriFieldTypeString"})}else{if(h)for(S in ia=this._calculateUniqueValues(b,g),ia){if(O=ia[S],y=O.data,T=O.items,!f||b.validateItems(T,f))O=p[y]||{attributes:{}},T=this._calculateStatistics(T,b,E),ha="var"===Z?"variance":Z,O.attributes[N]=T[ha],O.attributes[g]=y,p[y]=O}else l[E]||(l[E]=this._calculateStatistics(this.items,b,E)),T=l[E],ha="var"===Z?"variance":Z,q.attributes[N]=T[ha];d.push({name:N,alias:N,type:"esriFieldTypeDouble"})}}if(h)for(var qa in p)c.push(p[qa]);else c.push(q);return{fields:d,
features:c}};a.prototype._calculateStatistics=function(a,b,c){for(var d=a.length,e=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,f=null,h=null,k=null,p=null,l=[],q=0;q<d;q++){var v=l[q]=b.getFieldValue(a[q],c);isNaN(v)||(f+=v,e=Math.min(e,v),g=Math.max(g,v))}if(d){h=f/d;for(b=a=0;b<l.length;b++)v=l[b],a+=Math.pow(v-h,2);p=1<d?a/(d-1):0;k=Math.sqrt(p)}else g=e=null;return{avg:h,count:d,max:g,min:e,stddev:k,sum:f,variance:p}};a.prototype._calculateUniqueValues=function(a,b){for(var c={},d=0,e=
this.items;d<e.length;d++){var g=e[d],f=a.getFieldValue(g,b);if(null==f||"string"===typeof f&&""===f.trim())f=null;null==c[f]?c[f]={count:1,data:f,items:[g]}:(c[f].count++,c[f].items.push(g))}return c};return a}();a.default=c})},"esri/geometry/support/quantizationUtils":function(){define(["require","exports"],function(c,a){function f(a,b){return Math.round((b-a.translate[0])/a.scale[0])}function b(a,b){return Math.round((a.translate[1]-b)/a.scale[1])}function d(a,c,d){for(var e=[],g,h,k,n,p=0;p<d.length;p++){var l=
d[p];if(0<p){if(k=f(a,l[0]),n=b(a,l[1]),k!==g||n!==h)e.push(c(l,k-g,n-h)),g=k,h=n}else g=f(a,l[0]),h=b(a,l[1]),e.push(c(l,g,h))}return 0<e.length?e:null}function l(a,b,c,e){return d(a,c?e?n:u:e?u:A,b)}function k(a,b,c,e){var g=[];c=c?e?n:u:e?u:A;for(e=0;e<b.length;e++){var f=d(a,c,b[e]);f&&3<=f.length&&g.push(f)}return g.length?g:null}function e(a,b,c,e){var g=[];c=c?e?n:u:e?u:A;for(e=0;e<b.length;e++){var f=d(a,c,b[e]);f&&2<=f.length&&g.push(f)}return g.length?g:null}function h(a,b){return b*a.scale[0]+
a.translate[0]}function p(a,b){return a.translate[1]-b*a.scale[1]}function g(a,b,c){var d=Array(c.length);if(!c.length)return d;var e=a.scale,g=e[0],e=e[1],f=h(a,c[0][0]);a=p(a,c[0][1]);d[0]=b(c[0],f,a);for(var k=1;k<c.length;k++){var n=c[k],f=f+n[0]*g;a-=n[1]*e;d[k]=b(n,f,a)}return d}function q(a,b,c){for(var d=Array(c.length),e=0;e<c.length;e++)d[e]=g(a,b,c[e]);return d}function v(a,b,c,d){return g(a,c?d?n:u:d?u:A,b)}function y(a,b,c,d){return q(a,c?d?n:u:d?u:A,b)}function C(a,b,c,d){return q(a,
c?d?n:u:d?u:A,b)}function B(a,b,c){var d=c[0],e=d[0],d=d[1],g=Math.min(e,b[0]),f=Math.min(d,b[1]),h=Math.max(e,b[2]);b=Math.max(d,b[3]);for(var k=1;k<c.length;k++){var n=c[k],p=n[0],n=n[1],e=e+p,d=d+n;0>p&&(g=Math.min(g,e));0<p&&(h=Math.max(h,e));0>n?f=Math.min(f,d):0<n&&(b=Math.max(b,d))}a[0]=g;a[1]=f;a[2]=h;a[3]=b;return a}function r(a,b){if(!b.length)return null;a[0]=a[1]=Number.POSITIVE_INFINITY;a[2]=a[3]=Number.NEGATIVE_INFINITY;for(var c=0;c<b.length;c++)B(a,a,b[c]);return a}Object.defineProperty(a,
"__esModule",{value:!0});var A=function(a,b,c){return[b,c]},u=function(a,b,c){return[b,c,a[2]]},n=function(a,b,c){return[b,c,a[2],a[3]]};a.toTransform=function(a){return a?{originPosition:"upperLeft",scale:[a.tolerance,a.tolerance],translate:[a.extent.xmin,a.extent.ymax]}:null};a.equals=function(a,b){if(a===b||null==a&&null==b)return!0;if(null==a||null==b)return!1;var c,d,e,g;a&&"upperLeft"===a.originPosition?(c=a.translate[0],d=a.translate[1],a=a.scale[0]):(c=a.extent.xmin,d=a.extent.ymax,a=a.tolerance);
b&&"upperLeft"===b.originPosition?(e=b.translate[0],g=b.translate[1],b=b.scale[0]):(e=b.extent.xmin,g=b.extent.ymax,b=b.tolerance);return c===e&&d===g&&a===b};a.quantizeX=f;a.quantizeY=b;a.quantizeBounds=function(a,c,d){c[0]=f(a,d[0]);c[3]=b(a,d[1]);c[2]=f(a,d[2]);c[1]=b(a,d[3]);return c};a.quantizePoints=l;a.quantizeRings=k;a.quantizePaths=e;a.hydrateX=h;a.hydrateY=p;a.hydrateCoordsArray=g;a.hydrateCoordsArrayArray=q;a.hydrateBounds=function(a,b,c){return c?(b[0]=h(a,c[0]),b[1]=p(a,c[3]),b[2]=h(a,
c[2]),b[3]=p(a,c[1]),b):[h(a,b[0]),p(a,b[3]),h(a,b[2]),p(a,b[1])]};a.hydratePoints=v;a.hydratePaths=y;a.hydrateRings=C;a.getQuantizedBoundsCoordsArray=B;a.getQuantizedBoundsCoordsArrayArray=r;a.getQuantizedBoundsPoints=function(a){var b=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];return B(b,b,a)};a.getQuantizedBoundsPaths=function(a){return r([0,0,0,0],a)};a.getQuantizedBoundsRings=function(a){return r([0,0,0,0],a)};a.quantizeExtent=function(a,
c,d,e,g){c.xmin=f(a,d.xmin);c.ymin=b(a,d.ymin);c.xmax=f(a,d.xmax);c.ymax=b(a,d.ymax);c!==d&&(e&&(c.zmin=d.zmin,c.zmax=d.zmax),g&&(c.mmin=d.mmin,c.mmax=d.mmax));return c};a.quantizeMultipoint=function(a,b,c,d,e){b.points=l(a,c.points,d,e);return b};a.quantizePoint=function(a,c,d,e,g){c.x=f(a,d.x);c.y=b(a,d.y);c!==d&&(e&&(c.z=d.z),g&&(c.m=d.m));return c};a.quantizePolygon=function(a,b,c,d,e){a=k(a,c.rings,d,e);if(!a)return null;b.rings=a;return b};a.quantizePolyline=function(a,b,c,d,g){a=e(a,c.paths,
d,g);if(!a)return null;b.paths=a;return b};a.hydrateExtent=function(a,b,c,d,e){b.xmin=h(a,c.xmin);b.ymin=p(a,c.ymin);b.xmax=h(a,c.xmax);b.ymax=p(a,c.ymax);b!==c&&(d&&(b.zmin=c.zmin,b.zmax=c.zmax),e&&(b.mmin=c.mmin,b.mmax=c.mmax));return b};a.hydrateMultipoint=function(a,b,c,d,e){b.points=v(a,c.points,d,e);return b};a.hydratePoint=function(a,b,c,d,e){b.x=h(a,c.x);b.y=p(a,c.y);b!==c&&(d&&(b.z=c.z),e&&(b.m=c.m));return b};a.hydratePolygon=function(a,b,c,d,e){b.rings=C(a,c.rings,d,e);return b};a.hydratePolyline=
function(a,b,c,d,e){b.paths=y(a,c.paths,d,e);return b}})},"esri/layers/graphics/data/AttributesBuilder":function(){define(["require","exports","@dojo/framework/shim/Map","./attributeSupport"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,c){this._fieldDataCache=new f.default;this._returnDistinctMap=new f.default;this.returnDistinctValues=a.returnDistinctValues;this.fieldsMap=c;if((a=a.outFields)&&-1===a.indexOf("*")){this.outFields=a;for(var d=c=0;d<
a.length;d++){var h=a[d],k=b.getExpressionFromFieldName(h),g=this.fieldsMap.has(k),k=g?null:b.getWhereClause(k),g=g?this.fieldsMap.get(h).name:b.getAliasFromFieldName(h)||"FIELD_EXP_"+c++;this._fieldDataCache.set(h,{alias:g,clause:k})}}}a.prototype.getAttributes=function(a){a=a.attributes;a=this._processAttributesForOutFields(a);return a=this._processAttributesForDistinctValues(a)};a.prototype.getFieldValue=function(a,c){a=a.attributes;var d=this.fieldsMap.has(c),f=d?this.fieldsMap.get(c).name:c,
k=null;this._fieldDataCache.has(f)?k=this._fieldDataCache.get(f).clause:d||(k=b.getWhereClause(c),this._fieldDataCache.set(f,{alias:f,clause:k}));return d?a[f]:k.calculateValue(a)};a.prototype.validateItem=function(a,c){this._fieldDataCache.has(c)||this._fieldDataCache.set(c,{alias:c,clause:b.getWhereClause(c)});return this._fieldDataCache.get(c).clause.testFeature(a.attributes)};a.prototype.validateItems=function(a,c){var d=this;this._fieldDataCache.has(c)||this._fieldDataCache.set(c,{alias:c,clause:b.getWhereClause(c)});
a=a.map(function(a){return d.getAttributes(a)});return this._fieldDataCache.get(c).clause.testSet(a)};a.prototype._processAttributesForOutFields=function(a){var b=this.outFields;if(!a||!b||!b.length)return a;for(var c={},d=0;d<b.length;d++){var f=this._fieldDataCache.get(b[d]),g=f.alias,f=f.clause;c[g]=f?f.calculateValue(a):a[g]}return c};a.prototype._processAttributesForDistinctValues=function(a){if(!a||!this.returnDistinctValues)return a;var b=this.outFields,c=[];if(b)for(var d=0;d<b.length;d++){var f=
this._fieldDataCache.get(b[d]).alias;c.push(a[f])}else for(f in a)c.push(a[f]);b=(b||["*"]).join(",")+"\x3d"+c.join(",");c=this._returnDistinctMap.get(b)||0;this._returnDistinctMap.set(b,++c);return 1<c?null:a};return a}();a.default=c})},"esri/layers/graphics/data/utils":function(){define(["require","exports","../featureConversionUtils","../OptimizedGeometry"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});var d=new b.default,l=new b.default,k={esriGeometryPoint:f.convertToPoint,
esriGeometryPolyline:f.convertToPolyline,esriGeometryPolygon:f.convertToPolygon,esriGeometryMultipoint:f.convertToMultipoint};a.getCentroid=function(a,c,d){if("esriGeometryPolygon"!==a.geometryType||!c.centroid&&!c.geometry)return null;c.centroid||(c.centroid=f.getCentroidOptimizedGeometry(new b.default,c.geometry,a.hasZ,a.hasM));return d?(c=f.quantizeOptimizedGeometry(l,c.centroid,a.hasZ,a.hasM,"esriGeometryPoint",d),f.convertToPoint(c,a.hasZ,a.hasM)):f.convertToPoint(c.centroid,a.hasZ,a.hasM)};
a.getGeometry=function(a,b,c,g){return b.geometry?c?(b=f.generalizeOptimizedGeometry(d,b.geometry,a.hasZ,a.hasM,a.geometryType,c),g&&(b=f.quantizeOptimizedGeometry(l,b,a.hasZ,a.hasM,a.geometryType,g)),k[a.geometryType](b,a.hasZ,a.hasM)):g?(b=f.quantizeOptimizedGeometry(l,b.geometry,a.hasZ,a.hasM,a.geometryType,g),k[a.geometryType](b,a.hasZ,a.hasM)):k[a.geometryType](b.geometry,a.hasZ,a.hasM):null}})},"esri/layers/graphics/data/SpatialQueryCache":function(){define(["require","exports","@dojo/framework/shim/iterator",
"../../../core/LRUMap"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});var d=function(){return function(a,b,c){this.cache=a;this.key=b;this.result=c}}(),l=new b(2E6,{disposeFunction:function(a,b){b.cache.has(b.key)&&b.cache.delete(b.key)},sizeOfFunction:function(a){return a.result.size}});c=function(){function a(){this._id=a.id_gen++ +"$$";this._keys=new Set}Object.defineProperty(a.prototype,"size",{get:function(){return this._keys.size},enumerable:!0,configurable:!0});a.prototype.clear=
function(){var a=this;0!==this._keys.size&&(f.forOf(this._keys,function(b){l.delete(a._getGlobalKey(b))}),this._keys.clear())};a.prototype.delete=function(a){this._keys.delete(a);return l.delete(this._getGlobalKey(a))};a.prototype.get=function(a){return(a=l.get(this._getGlobalKey(a)))&&a.result};a.prototype.has=function(a){return l.has(this._getGlobalKey(a))};a.prototype.set=function(a,b){this._keys.add(a);l.set(this._getGlobalKey(a),new d(this,a,b));return this};a.prototype._getGlobalKey=function(a){return this._id+
a};a.id_gen=0;return a}();a.default=c})},"esri/layers/graphics/data/spatialQuerySupport":function(){define("require exports ../../../core/Error ../../../core/promiseUtils ../../../geometry/support/contains ../../../geometry/support/intersects ../../../geometry/support/webMercatorUtils".split(" "),function(c,a,f,b,d,l,k){function e(){return b.create(function(a){return c(["../../../geometry/geometryEngine"],a)})}Object.defineProperty(a,"__esModule",{value:!0});var h={intersects:!0,contains:!0,within:!0,
crosses:!0,touches:!0,overlaps:!0,"envelope-intersects":!0},p={point:!0,multipoint:!0,polyline:!0,polygon:!0,extent:!0},g={esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0};a.importGeometryEngine=e;a.getGeodesicBufferOperator=function(){return e().then(function(a){return a.geodesicBuffer})};a.getSpatialQueryOperator=function(a,c,g){if("intersects"===a){if("polygon"===c.type&&"esriGeometryPoint"===g)return b.resolve(d.polygonContainsPoint.bind(null,c.toJSON()));
if("extent"===c.type)return b.resolve(l.getExtentIntersector(g).bind(null,c))}return e().then(function(b){return b[a].bind(null,c.toJSON())})};a.checkSpatialQuerySupport=function(a,c,d){var e=a.geometry;return e?!0!==h[a.spatialRelationship]?b.reject(new f("feature-store:unsupported-query","Unsupported query spatial relationship",{query:a})):!0!==p[e.type]?b.reject(new f("feature-store:unsupported-query","Unsupported query geometry type",{query:a})):!0!==g[c]?b.reject(new f("feature-store:unsupported-query",
"Unsupported layer geometry type",{query:a})):k.canProject(e.spatialReference,d)?b.resolve():b.reject(new f("feature-store:unsupported-query","Unsupported geometry spatialReference",{query:a})):null};a.canQueryWithRBush=function(a){switch(a.type){case "extent":return!0;case "polygon":return a.rings.every(function(a){return 5!==a.length?!1:a[0][0]===a[1][0]&&a[0][0]===a[4][0]&&a[2][0]===a[3][0]&&a[0][1]===a[3][1]&&a[0][1]===a[4][1]&&a[1][1]===a[2][1]});default:return!1}}})},"esri/tasks/support/Query":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../geometry ../../TimeExtent ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ../../geometry/support/jsonUtils ../../geometry/support/typeUtils ../../symbols/support/jsonUtils ../../symbols/support/typeUtils ./QuantizationParameters ./StatisticDefinition".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B){var r=e({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),A=e({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",
esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});return function(a){function c(b){b=a.call(this,b)||this;b.datumTransformation=null;b.distance=void 0;b.gdbVersion=null;b.geometry=null;b.geometryPrecision=void 0;b.groupByFieldsForStatistics=null;b.having=null;b.historicMoment=null;b.maxAllowableOffset=void 0;b.maxRecordCountFactor=1;b.multipatchOption=null;b.num=void 0;b.objectIds=null;b.orderByFields=null;b.outFields=null;b.outSpatialReference=null;b.outStatistics=
null;b.parameterValues=null;b.pixelSize=null;b.quantizationParameters=null;b.rangeValues=null;b.relationParameter=null;b.resultType=null;b.returnDistinctValues=!1;b.returnGeometry=!1;b.returnCentroid=!1;b.returnExceededLimitFeatures=!0;b.returnM=void 0;b.returnZ=void 0;b.source=null;b.spatialRelationship="intersects";b.start=void 0;b.sqlFormat=null;b.text=null;b.timeExtent=null;b.units="meters";b.where=null;return b}f(c,a);e=c;c.prototype.castDatumTransformation=function(a){return"number"===typeof a||
"object"===typeof a?a:null};c.prototype.writeHistoricMoment=function(a,b,c){b.historicMoment=a&&a.getTime()};c.prototype.writeParameterValues=function(a,b,c){if(a){c={};for(var d in a){var e=a[d];Array.isArray(e)?c[d]=e.map(function(a){return a instanceof Date?a.getTime():a}):c[d]=e instanceof Date?e.getTime():e}b.parameterValues=c}};c.prototype.writeStart=function(a,b,c){b.resultOffset=this.start;b.resultRecordCount=this.num||10;b.where="1\x3d1"};c.prototype.writeWhere=function(a,b,c){b.where=a||
"1\x3d1"};c.prototype.clone=function(){return new e(h.clone({datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:this.historicMoment?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,
num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,
returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnM:this.returnM,returnZ:this.returnZ,source:this.source,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.text,text:this.text,timeExtent:this.timeExtent,units:this.units,where:this.where}))};var e;b([p.property({json:{write:!0}})],c.prototype,"datumTransformation",void 0);b([p.cast("datumTransformation")],c.prototype,"castDatumTransformation",null);b([p.property({type:Number,json:{write:!0}})],c.prototype,
"distance",void 0);b([p.property({type:String,json:{write:!0}})],c.prototype,"gdbVersion",void 0);b([p.property({types:q.types,json:{read:g.fromJSON,write:!0}})],c.prototype,"geometry",void 0);b([p.property({type:Number,json:{write:!0}})],c.prototype,"geometryPrecision",void 0);b([p.property({type:[String],json:{write:!0}})],c.prototype,"groupByFieldsForStatistics",void 0);b([p.property({type:String,json:{write:!0}})],c.prototype,"having",void 0);b([p.property({type:Date})],c.prototype,"historicMoment",
void 0);b([p.writer("historicMoment")],c.prototype,"writeHistoricMoment",null);b([p.property({type:Number,json:{write:!0}})],c.prototype,"maxAllowableOffset",void 0);b([p.property({type:Number,cast:function(a){return 1>a?1:5<a?5:a},json:{write:{overridePolicy:function(a){return{enabled:1<a}}}}})],c.prototype,"maxRecordCountFactor",void 0);b([p.property({type:String,json:{write:!0}})],c.prototype,"multipatchOption",void 0);b([p.property({type:Number,json:{read:{source:"resultRecordCount"}}})],c.prototype,
"num",void 0);b([p.property({type:[Number],json:{write:!0}})],c.prototype,"objectIds",void 0);b([p.property({type:[String],json:{write:!0}})],c.prototype,"orderByFields",void 0);b([p.property({type:[String],json:{write:!0}})],c.prototype,"outFields",void 0);b([p.property({type:d.SpatialReference,json:{read:{source:"outSR"},write:{target:"outSR"}}})],c.prototype,"outSpatialReference",void 0);b([p.property({type:[B],json:{write:!0}})],c.prototype,"outStatistics",void 0);b([p.property({json:{write:!0}})],
c.prototype,"parameterValues",void 0);b([p.writer("parameterValues")],c.prototype,"writeParameterValues",null);b([p.property({types:y.types,json:{read:v.read,write:!0}})],c.prototype,"pixelSize",void 0);b([p.property({type:C.default,json:{write:!0}})],c.prototype,"quantizationParameters",void 0);b([p.property({type:[Object],json:{write:!0}})],c.prototype,"rangeValues",void 0);b([p.property({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy:function(a){return{enabled:"relation"===
this.spatialRelationship}}}}})],c.prototype,"relationParameter",void 0);b([p.property({type:String,json:{write:!0}})],c.prototype,"resultType",void 0);b([p.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],c.prototype,"returnDistinctValues",void 0);b([p.property({type:Boolean,json:{write:!0}})],c.prototype,"returnGeometry",void 0);b([p.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],c.prototype,"returnCentroid",void 0);b([p.property({type:Boolean,
json:{write:{overridePolicy:function(a){return{enabled:!a}}}}})],c.prototype,"returnExceededLimitFeatures",void 0);b([p.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],c.prototype,"returnM",void 0);b([p.property({type:Boolean,json:{write:{overridePolicy:function(a){return{enabled:a}}}}})],c.prototype,"returnZ",void 0);b([p.property({json:{write:!0}})],c.prototype,"source",void 0);b([p.property({type:String,json:{read:{source:"spatialRel",reader:r.read},write:{target:"spatialRel",
writer:r.write}}})],c.prototype,"spatialRelationship",void 0);b([p.property({type:Number,json:{read:{source:"resultOffset"}}})],c.prototype,"start",void 0);b([p.writer("start"),p.writer("num")],c.prototype,"writeStart",null);b([p.property({type:String,json:{write:!0}})],c.prototype,"sqlFormat",void 0);b([p.property({type:String,json:{write:!0}})],c.prototype,"text",void 0);b([p.property({type:l,json:{write:!0}})],c.prototype,"timeExtent",void 0);b([p.property({type:String,json:{read:A.read,write:{writer:A.write,
overridePolicy:function(a){return{enabled:0<this.distance}}}}})],c.prototype,"units",void 0);b([p.property({type:String,json:{write:{overridePolicy:function(a){return{enabled:null!=a||0<this.start}}}}})],c.prototype,"where",void 0);b([p.writer("where")],c.prototype,"writeWhere",null);return c=e=b([p.subclass("esri.tasks.support.Query")],c)}(p.declared(k))})},"esri/TimeExtent":function(){define("require exports ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/JSONSupport ./core/accessorSupport/decorators".split(" "),
function(c,a,f,b,d,l){var k={milliseconds:{getter:"getUTCMilliseconds",setter:"setUTCMilliseconds",multiplier:1},seconds:{getter:"getUTCSeconds",setter:"setUTCSeconds",multiplier:1},minutes:{getter:"getUTCMinutes",setter:"setUTCMinutes",multiplier:1},hours:{getter:"getUTCHours",setter:"setUTCHours",multiplier:1},days:{getter:"getUTCDate",setter:"setUTCDate",multiplier:1},weeks:{getter:"getUTCDate",setter:"setUTCDate",multiplier:7},months:{getter:"getUTCMonth",setter:"setUTCMonth",multiplier:1},years:{getter:"getUTCFullYear",
setter:"setUTCFullYear",multiplier:1},decades:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:10},centuries:{getter:"getUTCFullYear",setter:"setUTCFullYear",multiplier:100}};return function(a){function c(b,c){b=a.call(this)||this;b.endTime=null;b.startTime=null;return b}f(c,a);d=c;c.prototype.normalizeCtorArgs=function(a,b){return!a||a instanceof Date?{startTime:a,endTime:b}:a};c.prototype.readEndTime=function(a,b){return null!=b.endTime?new Date(b.endTime):null};c.prototype.writeEndTime=
function(a,b,c){b.endTime=a?a.getTime():null};c.prototype.readStartTime=function(a,b){return null!=b.startTime?new Date(b.startTime):null};c.prototype.writeStartTime=function(a,b,c){b.startTime=a?a.getTime():null};c.prototype.clone=function(){return new d({endTime:this.endTime,startTime:this.startTime})};c.prototype.intersection=function(a){if(!a)return null;var b=this.startTime?this.startTime.getTime():-Infinity,c=this.endTime?this.endTime.getTime():Infinity,e=a.startTime?a.startTime.getTime():-Infinity;
a=a.endTime?a.endTime.getTime():Infinity;var g,f;e>=b&&e<=c?g=e:b>=e&&b<=a&&(g=b);c>=e&&c<=a?f=c:a>=b&&a<=c&&(f=a);if(isNaN(g)||isNaN(f))return null;b=new d;b.startTime=-Infinity===g?null:new Date(g);b.endTime=Infinity===f?null:new Date(f);return b};c.prototype.offset=function(a,b){var c=new d,e=this.startTime,g=this.endTime;e&&(c.startTime=this._offsetDate(e,a,b));g&&(c.endTime=this._offsetDate(g,a,b));return c};c.prototype._offsetDate=function(a,b,c){a=new Date(a.getTime());b&&c&&(c=k[c],a[c.setter](a[c.getter]()+
b*c.multiplier));return a};var d;b([l.property({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"endTime",void 0);b([l.reader("endTime")],c.prototype,"readEndTime",null);b([l.writer("endTime")],c.prototype,"writeEndTime",null);b([l.property({type:Date,json:{write:{allowNull:!0}}})],c.prototype,"startTime",void 0);b([l.reader("startTime")],c.prototype,"readStartTime",null);b([l.writer("startTime")],c.prototype,"writeStartTime",null);return c=d=b([l.subclass("esri.TimeExtent")],c)}(l.declared(d))})},
"esri/symbols/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/Warning ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol3D ../TextSymbol ../WebStyleSymbol ../callouts/LineCallout3D ./symbolConversion".split(" "),function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A,u){function n(a,c,d){c=a?x[a.type]||null:null;if(c)return c=
new c,c.read(a,d),c;d&&d.messages&&a&&d.messages.push(new b("symbol:unsupported","Symbols of type '"+(a.type||"unknown")+"' are not supported",{definition:a,context:d}));return null}function t(a,b,c){if(!a)return null;if(!c||"web-scene"!==c.origin||a.isInstanceOf(C)||a.isInstanceOf(r))return a.write(b,c);var d=u.to3D(a);if(d.symbol)return d.symbol.write(b,c);c.messages&&c.messages.push(new f("symbol:unsupported","Symbols of type '"+a.declaredClass+"' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView",
{symbol:a,context:c,error:d.error}));return null}Object.defineProperty(a,"__esModule",{value:!0});var x={esriSMS:y,esriPMS:h,esriTS:B,esriSLS:v,esriSFS:q,esriPFS:e,PointSymbol3D:p,LineSymbol3D:l,PolygonSymbol3D:g,MeshSymbol3D:k,LabelSymbol3D:d,styleSymbolReference:r};a.read=n;a.writeTarget=function(a,b,c,d){(a=t(a,{},d))&&(b[c]=a)};a.write=t;a.fromJSON=function(a,b){return n(a,null,b)};a.readCallout3D=function(a,b){if(!a||!a.type)return null;var c=null;switch(a.type){case "line":c=new A}c&&c.read(a,
b);return c}})},"esri/core/Warning":function(){define(["require","exports","./tsSupport/extendsHelper","./tsSupport/decorateHelper","./Message"],function(c,a,f,b,d){c=function(a){function b(c,d,f){var e=a.call(this,c,d,f)||this;return e instanceof b?e:new b(c,d,f)}f(b,a);return b}(d);c.prototype.type="warning";return c})},"esri/symbols/LabelSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g){var q=d.ofType({base:null,key:"type",typeMap:{text:h}});return function(a){function c(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.styleOrigin=null;b.symbolLayers=new q;b.type="label-3d";return b}f(c,a);d=c;c.prototype.supportsCallout=function(){return!0};c.prototype.hasVisibleCallout=function(){return p.hasVisibleCallout(this)};c.prototype.hasVisibleVerticalOffset=function(){return p.hasVisibleVerticalOffset(this)};c.prototype.clone=function(){return new d({styleOrigin:l.clone(this.styleOrigin),
symbolLayers:l.clone(this.symbolLayers),thumbnail:l.clone(this.thumbnail),callout:l.clone(this.callout),verticalOffset:l.clone(this.verticalOffset)})};var d;b([k.property({type:g.default,json:{write:!0}})],c.prototype,"verticalOffset",void 0);b([k.property(p.calloutProperty)],c.prototype,"callout",void 0);b([k.property({json:{read:!1,write:!1}})],c.prototype,"styleOrigin",void 0);b([k.property({type:q})],c.prototype,"symbolLayers",void 0);b([k.enumeration.serializable()({LabelSymbol3D:"label-3d"})],
c.prototype,"type",void 0);return c=d=b([k.subclass("esri.symbols.LabelSymbol3D")],c)}(k.declared(e))})},"esri/core/Collection":function(){define("require exports ./tsSupport/declareExtendsHelper ./tsSupport/decorateHelper dojo/aspect ./Accessor ./ArrayPool ./Evented ./lang ./ObjectPool ./scheduling ./accessorSupport/decorators ./accessorSupport/ensureType".split(" "),function(c,a,f,b,d,l,k,e,h,p,g,q,v){function y(a){return a?a.isInstanceOf&&a.isInstanceOf(F):!1}function C(a){return a?y(a)?a.toArray():
a.length?Array.prototype.slice.apply(a):[]:[]}function B(a){if(a&&a.length)return a[0]}function r(a,b,c,d){b&&b.forEach(function(b,e,g){a.push(b);r(a,c.call(d,b,e,g),c,d)})}c=function(){function a(){this.target=null;this.defaultPrevented=this.cancellable=!1}a.prototype.preventDefault=function(){this.cancellable&&(this.defaultPrevented=!0)};a.prototype.reset=function(a){this.defaultPrevented=!1;this.item=a};return a}();var A=function(){},u=new p(c,!0,function(a){a.item=null;a.target=null}),n=new Set,
t=new Set,x=new Set,D=new Map,G=0,F=function(a){function c(b){b=a.call(this,b)||this;b._boundDispatch=b._dispatchColChange.bind(b);b._chgListeners=[];b._notifications=null;b._timer=null;b.length=0;b._items=[];Object.defineProperty(b,"uid",{value:G++});return b}f(c,a);e=c;c.ofType=function(a){if(!a)return e;if(D.has(a))return D.get(a);var b;if("function"===typeof a)b=a.prototype.declaredClass;else if(a.base)b=a.base.prototype.declaredClass;else for(var c in a.typeMap){var d=a.typeMap[c].prototype.declaredClass;
b=b?b+(" | "+d):d}b=e.createSubclass({declaredClass:"esri.core.Collection\x3c"+b+"\x3e"});b.isCollection=y;c={Type:a,ensureType:"function"===typeof a?v.ensureType(a):v.ensureOneOfType(a)};Object.defineProperty(b.prototype,"itemType",{value:c});D.set(a,b);return b};c.prototype.normalizeCtorArgs=function(a){return a?Array.isArray(a)||y(a)?{items:a}:a:{}};Object.defineProperty(c.prototype,"items",{get:function(){return this._items},set:function(a){this._emitBeforeChanges()||(this._splice.apply(this,
[0,this.length].concat(C(a))),this._emitAfterChanges())},enumerable:!0,configurable:!0});c.prototype.on=function(a,b){var c;Array.isArray(a)?c=a:-1<a.indexOf(",")&&(c=a.split(/\s*,\s*/));if(c){var e=[];for(a=0;a<c.length;a++)e.push(this.on(c[a],b));e.remove=function(){for(var a=0;a<e.length;a++)e[a].remove()};return e}if("change"===a){var g=this._chgListeners,f={removed:!1,callback:b};g.push(f);this._notifications&&this._notifications.push({listeners:g.slice(),items:this._items.slice(),changes:[]});
return{remove:function(){this.remove=A;f.removed=!0;g.splice(g.indexOf(f),1)}}}return d.after(this,"on"+a,b,!0)};c.prototype.hasEventListener=function(a){return"change"===a?0<this._chgListeners.length:this.inherited(arguments)};c.prototype.add=function(a,b){if(this._emitBeforeChanges())return this;b=this.getNextIndex(b);this._splice(b,0,a);this._emitAfterChanges();return this};c.prototype.addMany=function(a,b){void 0===b&&(b=this._items.length);if(!a||!a.length||this._emitBeforeChanges())return this;
b=this.getNextIndex(b);this._splice.apply(this,[b,0].concat(C(a)));this._emitAfterChanges();return this};c.prototype.removeAll=function(){if(!this.length||this._emitBeforeChanges())return[];var a=this._splice(0,this.length)||[];this._emitAfterChanges();return a};c.prototype.clone=function(){return this._createNewInstance({items:this._items.map(h.clone)})};c.prototype.concat=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];var c,a=a.map(C);return this._createNewInstance({items:(c=
this._items).concat.apply(c,a)})};c.prototype.drain=function(a,b){if(this.length&&!this._emitBeforeChanges()){for(var c=this._splice(0,this.length),d=c.length,e=0;e<d;e++)a.call(b,c[e],e,c);this._emitAfterChanges()}};c.prototype.every=function(a,b){return this._items.every(a,b)};c.prototype.filter=function(a,b){var c;c=2===arguments.length?this._items.filter(a,b):this._items.filter(a);return this._createNewInstance({items:c})};c.prototype.find=function(a,b){if("function"!==typeof a)throw new TypeError(a+
" is not a function");for(var c=this._items,d=c.length,e=0;e<d;e++){var g=c[e];if(a.call(b,g,e,c))return g}};c.prototype.findIndex=function(a,b){if("function"!==typeof a)throw new TypeError(a+" is not a function");for(var c=this._items,d=c.length,e=0;e<d;e++)if(a.call(b,c[e],e,c))return e;return-1};c.prototype.flatten=function(a,b){var c=[];r(c,this,a,b);return new e(c)};c.prototype.forEach=function(a,b){for(var c=this._items,d=c.length,e=0;e<d;e++)a.call(b,c[e],e,c)};c.prototype.getItemAt=function(a){return this._items[a]};
c.prototype.getNextIndex=function(a){var b=this.length;a=null==a?b:a;0>a?a=0:a>b&&(a=b);return a};c.prototype.includes=function(a,b){void 0===b&&(b=0);return arguments.length?-1!==this._items.indexOf(a,b):!1};c.prototype.indexOf=function(a,b){void 0===b&&(b=0);return this._items.indexOf(a,b)};c.prototype.join=function(a){void 0===a&&(a=",");return this._items.join(a)};c.prototype.lastIndexOf=function(a,b){void 0===b&&(b=this.length-1);return this._items.lastIndexOf(a,b)};c.prototype.map=function(a,
b){a=this._items.map(a,b);return new e({items:a})};c.prototype.reorder=function(a,b){void 0===b&&(b=this.length-1);var c=this.indexOf(a);if(-1!==c){0>b?b=0:b>=this.length&&(b=this.length-1);if(c!==b){if(this._emitBeforeChanges())return a;this._splice(c,1);this._splice(b,0,a);this._emitAfterChanges()}return a}};c.prototype.pop=function(){if(this.length&&!this._emitBeforeChanges()){var a=B(this._splice(this.length-1,1));this._emitAfterChanges();return a}};c.prototype.push=function(){for(var a=[],b=
0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[this.length,0].concat(a));this._emitAfterChanges();return this.length};c.prototype.reduce=function(a,b){var c=this._items;return 2===arguments.length?c.reduce(a,b):c.reduce(a)};c.prototype.reduceRight=function(a,b){var c=this._items;return 2===arguments.length?c.reduceRight(a,b):c.reduceRight(a)};c.prototype.remove=function(a){return this.removeAt(this.indexOf(a))};c.prototype.removeAt=
function(a){if(!(0>a||a>=this.length||this._emitBeforeChanges()))return a=B(this._splice(a,1)),this._emitAfterChanges(),a};c.prototype.removeMany=function(a){if(!a||!a.length||this._emitBeforeChanges())return[];a=y(a)?a.toArray():a;for(var b=this._items,c=[],d=a.length,e=0;e<d;e++){var g=b.indexOf(a[e]);if(-1<g){for(var f=e+1,h=g+1,k=Math.min(a.length-f,b.length-h),n=0;n<k&&a[f+n]===b[h+n];)n++;f=1+n;(g=this._splice(g,f))&&0<g.length&&c.push.apply(c,g);e+=f-1}}this._emitAfterChanges();return c};c.prototype.reverse=
function(){if(this._emitBeforeChanges())return this;var a=this._splice(0,this.length);a&&(a.reverse(),this._splice.apply(this,[0,0].concat(a)));this._emitAfterChanges();return this};c.prototype.shift=function(){if(this.length&&!this._emitBeforeChanges()){var a=B(this._splice(0,1));this._emitAfterChanges();return a}};c.prototype.slice=function(a,b){void 0===a&&(a=0);void 0===b&&(b=this.length);return this._createNewInstance({items:this._items.slice(a,b)})};c.prototype.some=function(a,b){return this._items.some(a,
b)};c.prototype.sort=function(a){if(!this.length||this._emitBeforeChanges())return this;var b=this._splice(0,this.length);arguments.length?b.sort(a):b.sort();this._splice.apply(this,[0,0].concat(b));return this};c.prototype.splice=function(a,b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];if(this._emitBeforeChanges())return[];c=this._splice.apply(this,[a,b].concat(c))||[];this._emitAfterChanges();return c};c.prototype.toArray=function(){return this._items.slice()};c.prototype.toJSON=
function(){return this.toArray()};c.prototype.toLocaleString=function(){return this._items.toLocaleString()};c.prototype.toString=function(){return this._items.toString()};c.prototype.unshift=function(){for(var a=[],b=0;b<arguments.length;b++)a[b]=arguments[b];if(this._emitBeforeChanges())return this.length;this._splice.apply(this,[0,0].concat(a));this._emitAfterChanges();return this.length};c.prototype._createNewInstance=function(a){return new this.constructor(a)};c.prototype._splice=function(a,
b){for(var c=[],d=2;d<arguments.length;d++)c[d-2]=arguments[d];var d=this._items,e=this.constructor.prototype.itemType,f,h;!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=g.schedule(this._boundDispatch));if(b){h=d.splice(a,b);if(this.hasEventListener("before-remove")){var k=u.acquire();k.target=this;k.cancellable=!0;for(var n=0,p=h.length;n<p;n++)f=
h[n],k.reset(f),this.emit("before-remove",k),k.defaultPrevented&&(h.splice(n,1),d.splice(a,0,f),a+=1,--n,--p);u.release(k)}this.length=this._items.length;if(this.hasEventListener("after-remove")){f=u.acquire();f.target=this;f.cancellable=!1;p=h.length;for(n=0;n<p;n++)f.reset(h[n]),this.emit("after-remove",f);u.release(f)}}if(c&&c.length){if(e){n=[];for(p=0;p<c.length;p++)f=c[p],k=e.ensureType(f),null==k&&null!=f||n.push(k);c=n}e=this.hasEventListener("before-add");n=this.hasEventListener("after-add");
p=a===this.length;if(e||n){f=u.acquire();f.target=this;f.cancellable=!0;k=u.acquire();k.target=this;k.cancellable=!1;for(var l=0,q=c;l<q.length;l++){var A=q[l];e?(f.reset(A),this.emit("before-add",f),f.defaultPrevented||(p?d.push(A):d.splice(a++,0,A),this._set("length",d.length),n&&(k.reset(A),this.emit("after-add",k)))):(p?d.push(A):d.splice(a++,0,A),this._set("length",d.length),k.reset(A),this.emit("after-add",k))}u.release(f)}else p?d.push.apply(d,c):d.splice.apply(d,[a,0].concat(c)),this._set("length",
d.length)}(c&&c.length||h&&h.length)&&this._notifyChangeEvent(c,h);return h};c.prototype._emitBeforeChanges=function(){var a=!1;if(this.hasEventListener("before-changes")){var b=u.acquire();b.target=this;b.cancellable=!0;this.emit("before-changes",b);a=b.defaultPrevented;u.release(b)}return a};c.prototype._emitAfterChanges=function(){if(this.hasEventListener("after-changes")){var a=u.acquire();a.target=this;a.cancellable=!1;this.emit("after-changes",a);u.release(a)}};c.prototype._notifyChangeEvent=
function(a,b){this.hasEventListener("change")&&this._notifications[this._notifications.length-1].changes.push({added:a,removed:b})};c.prototype._dispatchColChange=function(){this._timer&&(this._timer.remove(),this._timer=null);if(this._notifications){var a=this._notifications;this._notifications=null;for(var b=function(a){var b=a.changes;n.clear();t.clear();x.clear();for(var d=0;d<b.length;d++){var e=b[d],g=e.added,e=e.removed;if(g)if(0===x.size&&0===t.size)for(var f=0,h=g;f<h.length;f++)g=h[f],n.add(g);
else for(f=0,h=g;f<h.length;f++)g=h[f],t.has(g)?(x.add(g),t.delete(g)):x.has(g)||n.add(g);if(e)if(0===x.size&&0===n.size)for(f=0;f<e.length;f++)g=e[f],t.add(g);else for(f=0;f<e.length;f++)g=e[f],n.has(g)?n.delete(g):(x.delete(g),t.add(g))}var p=k.acquire();n.forEach(function(a){p.push(a)});var l=k.acquire();t.forEach(function(a){l.push(a)});var q=c._items,A=a.items,u=k.acquire();x.forEach(function(a){A.indexOf(a)!==q.indexOf(a)&&u.push(a)});if(a.listeners&&(p.length||l.length||u.length))for(b={target:c,
added:p,removed:l,moved:u},d=a.listeners.length,g=0;g<d;g++)e=a.listeners[g],e.removed||e.callback.call(c,b);k.release(p);k.release(l);k.release(u)},c=this,d=0;d<a.length;d++)b(a[d]);n.clear();t.clear();x.clear()}};var e;c.isCollection=y;b([q.property()],c.prototype,"length",void 0);b([q.property()],c.prototype,"items",null);return c=e=b([q.subclass("esri.core.Collection")],c)}(q.declared(l,e));return F})},"esri/core/Evented":function(){define(["require","exports","dojo/aspect","dojo/on"],function(c,
a,f,b){function d(a,b,c,f){var e;Array.isArray(b)?e=b:-1<b.indexOf(",")&&(e=b.split(/\s*,\s*/));if(e){var g=[];for(b=0;b<e.length;b++)g.push(d(a,e[b],c,f));g.remove=function(){for(var a=0;a<g.length;a++)g[a].remove()};return g}return f(a,b)}return function(){function a(){}a.prototype.emit=function(a,c){if(this.hasEventListener(a))return c=c||{},c.target||(c.target=this),b.emit(this,a,c)};a.prototype.on=function(a,b){return d(this,a,b,function(a,c){return f.after(a,"on"+c,b,!0)})};a.prototype.hasEventListener=
function(a){a="on"+a;return!(!this[a]||!this[a].after)};return a}()})},"esri/symbols/Symbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/collectionUtils ../core/kebabDictionary ../core/Logger ../core/urlUtils ../core/Warning ../core/accessorSupport/decorators ../portal/Portal ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./PathSymbol3DLayer ./Symbol ./Symbol3DLayer ./TextSymbol3DLayer ./support/StyleOrigin ./support/Thumbnail".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A,u,n,t,x,D){var G={icon:C,object:r,line:B,path:A,fill:y,extrude:v,text:t},F=d.ofType({base:n,key:"type",typeMap:G}),J=k.strict()({PointSymbol3D:"point-3d",PolygonSymbol3D:"polygon-3d",LineSymbol3D:"line-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"}),E=e.getLogger("esri.symbols.Symbol3D");return function(a){function c(b){b=a.call(this)||this;b.styleOrigin=null;b.thumbnail=null;b.type=null;var c=b.__accessor__&&b.__accessor__.metadatas&&b.__accessor__.metadatas.symbolLayers;
b._set("symbolLayers",new (c&&c.type||d));return b}f(c,a);Object.defineProperty(c.prototype,"color",{get:function(){return null},set:function(a){E.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"symbolLayers",{set:function(a){l.referenceSetter(a,this._get("symbolLayers"))},enumerable:!0,configurable:!0});c.prototype.readSymbolLayers=function(a,b,c){b=[];
for(var d=0;d<a.length;d++){var e=a[d],g=n.typeJSONDictionary.read(e.type),f=g&&G[g];f?(e=new f,e.read(a[d],c),b.push(e)):(E.warn("Unknown symbol layer type: "+g),c&&c.messages&&c.messages.push(new p("symbol-layer:unsupported","Symbol layers of type '"+(g||e.type||"unknown")+"' are not supported",{definition:e,context:c})))}return b};c.prototype.readStyleOrigin=function(a,b,c){if(a.styleUrl&&a.name)return b=h.read(a.styleUrl,c),new x({styleUrl:b,name:a.name});if(a.styleName&&a.name)return new x({portal:c&&
c.portal||q.getDefault(),styleName:a.styleName,name:a.name});c&&c.messages&&c.messages.push(new p("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:c,definition:a}))};c.prototype.writeStyleOrigin=function(a,b,c,d){a.styleUrl&&a.name?(c=h.write(a.styleUrl,d),h.isAbsolute(c)&&(c=h.normalize(c)),b.styleOrigin={styleUrl:c,name:a.name}):a.styleName&&a.name&&(a.portal&&d&&d.portal&&!h.hasSamePortal(a.portal.restUrl,d.portal.restUrl)?
d&&d.messages&&d.messages.push(new p("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):b.styleOrigin={styleName:a.styleName,name:a.name})};c.prototype.normalizeCtorArgs=function(a){return a instanceof n||a&&G[a.type]?{symbolLayers:[a]}:Array.isArray(a)?{symbolLayers:a}:a};b([g.property({json:{read:!1,write:!1}})],c.prototype,"color",null);b([g.property({type:F,nonNullable:!0,json:{write:!0}}),
g.cast(l.castForReferenceSetter)],c.prototype,"symbolLayers",null);b([g.reader("symbolLayers")],c.prototype,"readSymbolLayers",null);b([g.property({type:x})],c.prototype,"styleOrigin",void 0);b([g.reader("styleOrigin")],c.prototype,"readStyleOrigin",null);b([g.writer("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],c.prototype,"writeStyleOrigin",null);b([g.property({type:D.default,json:{read:!1}})],c.prototype,"thumbnail",
void 0);b([g.property({type:J.apiValues,readOnly:!0,json:{type:J.jsonValues,read:!1}})],c.prototype,"type",void 0);return c=b([g.subclass("esri.symbols.Symbol3D")],c)}(g.declared(u))})},"esri/core/collectionUtils":function(){define(["require","exports","./Collection"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.referenceSetter=function(a,c,l){void 0===l&&(l=f);c||(c=new l);c.removeAll();a&&(Array.isArray(a)||a.isInstanceOf&&a.isInstanceOf(f))?c.addMany(a):c.add(a);return c};
a.castForReferenceSetter=function(a){return a}})},"esri/portal/Portal":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper dojo/_base/kernel dojo/_base/url dojo/promise/all ../config ../kernel ../request ../core/Error ../core/has ../core/JSONSupport ../core/lang ../core/Loadable ../core/promiseUtils ../core/accessorSupport/decorators ../geometry/Extent ./PortalQueryParams ./PortalQueryResult ./PortalUser".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A,u,n,t,x,D){var G,F={Bookmark:function(){return A.create(function(a){return c(["./Bookmark"],a)})},Portal:function(){return A.create(function(a){return c(["./Portal"],a)})},PortalFolder:function(){return A.create(function(a){return c(["./PortalFolder"],a)})},PortalGroup:function(){return A.create(function(a){return c(["./PortalGroup"],a)})},PortalItem:function(){return A.create(function(a){return c(["./PortalItem"],a)})},PortalQueryParams:function(){return A.create(function(a){return c(["./PortalQueryParams"],
a)})},PortalQueryResult:function(){return A.create(function(a){return c(["./PortalQueryResult"],a)})},PortalRating:function(){return A.create(function(a){return c(["./PortalRating"],a)})},PortalUser:function(){return A.create(function(a){return c(["./PortalUser"],a)})}};return function(a){function r(b){b=a.call(this)||this;b.access=null;b.allSSL=!1;b.authMode="auto";b.authorizedCrossOriginDomains=null;b.basemapGalleryGroupQuery=null;b.bingKey=null;b.canListApps=!1;b.canListData=!1;b.canListPreProvisionedItems=
!1;b.canProvisionDirectPurchase=!1;b.canSearchPublic=!0;b.canShareBingPublic=!1;b.canSharePublic=!1;b.canSignInArcGIS=!1;b.canSignInIDP=!1;b.colorSetsGroupQuery=null;b.commentsEnabled=!1;b.created=null;b.culture=null;b.customBaseUrl=null;b.defaultBasemap=null;b.defaultExtent=null;b.defaultVectorBasemap=null;b.description=null;b.eueiEnabled=!1;b.featuredGroups=null;b.featuredItemsGroupQuery=null;b.galleryTemplatesGroupQuery=null;b.livingAtlasGroupQuery=null;b.hasCategorySchema=!1;b.helperServices=
null;b.homePageFeaturedContent=null;b.homePageFeaturedContentCount=null;b.httpPort=null;b.httpsPort=null;b.id=null;b.ipCntryCode=null;b.isPortal=!1;b.layerTemplatesGroupQuery=null;b.maxTokenExpirationMinutes=null;b.modified=null;b.name=null;b.portalHostname=null;b.portalMode=null;b.portalProperties=null;b.region=null;b.rotatorPanels=null;b.showHomePageDescription=!1;b.supportsHostedServices=!1;b.symbolSetsGroupQuery=null;b.templatesGroupQuery=null;b.units=null;b.url=p.portalUrl;b.urlKey=null;b.user=
null;b.useStandardizedQuery=!1;b.useVectorBasemaps=!1;b.vectorBasemapGalleryGroupQuery=null;return b}b(r,a);C=r;r.prototype.normalizeCtorArgs=function(a){return"string"===typeof a?{url:a}:a};r.prototype.destroy=function(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)};r.prototype.readAuthorizedCrossOriginDomains=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];-1===p.request.trustedServers.indexOf(c)&&p.request.trustedServers.push(c)}return a};
r.prototype.readDefaultBasemap=function(a){return a?(a=G.fromJSON(a),a.portalItem={portal:this},a):null};r.prototype.readDefaultVectorBasemap=function(a){return a?(a=G.fromJSON(a),a.portalItem={portal:this},a):null};Object.defineProperty(r.prototype,"extraQuery",{get:function(){var a=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!a?" AND orgid:"+this.id:null},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"isOrganization",{get:function(){return!!this.access},
enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"restUrl",{get:function(){var a=this.url;if(a)var b=a.indexOf("/sharing"),a=0<b?a.substring(0,b):this.url.replace(/\/+$/,""),a=a+"/sharing/rest";return a},enumerable:!0,configurable:!0});Object.defineProperty(r.prototype,"thumbnailUrl",{get:function(){var a=this.restUrl,b=this.thumbnail;return a&&b?this._normalizeSSL(a+"/portals/self/resources/"+b):null},enumerable:!0,configurable:!0});r.prototype.readUrlKey=function(a){return a?a.toLowerCase():
a};r.prototype.readUser=function(a){var b=null;a&&(b=D.fromJSON(a),b.portal=this);return b};r.prototype.load=function(){var a=this,b=A.create(function(a){return c(["../Basemap"],a)}).then(function(a){G=a}).then(function(){return a._fetchSelf()}).then(function(b){if(g.id){var c=g.id;a.credential=c.findCredential(a.restUrl);a.credential||a.authMode!==C.AUTH_MODE_AUTO||(a._esriId_credentialCreateHandle=c.on("credential-create",function(){c.findCredential(a.restUrl)&&a._signIn()}))}a.read(b)});this.addResolvingPromise(b);
return this.when()};r.prototype.fetchBasemaps=function(a){var b=new t;b.query=a||(this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery);b.disableExtraQuery=!0;return this.queryGroups(b).then(function(a){b.num=100;b.query='type:"Web Map" -type:"Web Application"';return a.total?(a=a.results[0],b.sortField=a.sortField||"name",b.sortOrder=a.sortOrder||"desc",a.queryItems(b)):null}).then(function(a){return a&&a.total?a.results.filter(function(a){return"Web Map"===a.type}).map(function(a){return new G({portalItem:a})}):
[]})};r.prototype.fetchCategorySchema=function(){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema").then(function(a){return a.categorySchema}):A.resolve([])};r.prototype.fetchFeaturedGroups=function(){var a=this.featuredGroups,b=new t;b.num=100;b.sortField="title";if(a&&a.length){for(var c=[],d=0;d<a.length;d++){var e=a[d];c.push('(title:"'+e.title+'" AND owner:'+e.owner+")")}b.query=c.join(" OR ");return this.queryGroups(b).then(function(a){return a.results})}return A.resolve([])};
r.prototype.fetchRegions=function(){return this._request(this.restUrl+"/portals/regions",{query:{culture:this.user&&this.user.culture||this.culture||k.locale}})};r.getDefault=function(){C._default||(C._default=new C);return C._default};r.prototype.queryGroups=function(a){return this._queryPortal("/community/groups",a,"PortalGroup")};r.prototype.queryItems=function(a){return this._queryPortal("/search",a,"PortalItem")};r.prototype.queryUsers=function(a){a.sortField||(a.sortField="username");return this._queryPortal("/community/users",
a,"PortalUser")};r.prototype.toJSON=function(){throw new v("internal:not-yet-implemented","Portal.toJSON is not yet implemented");};r.prototype._fetchSelf=function(a,b){void 0===a&&(a=this.authMode);void 0===b&&(b=!1);var c=this.restUrl+"/portals/self";a={authMode:a,query:{culture:k.locale}};"auto"===a.authMode&&(a.authMode="no-prompt");b&&(a.query.default=!0);return this._request(c,a)};r.prototype._queryPortal=function(a,b,c){var d=this,e=function(c){return d._request(d.restUrl+a,b.toRequestOptions(d)).then(function(a){var e=
b.clone();e.start=a.nextStart;return new x({nextQueryParams:e,queryParams:b,total:a.total,results:C._resultsToTypedArray(c,{portal:d},a)})}).then(function(a){return h(a.results.map(function(b){return"function"===typeof b.when?b.when():a})).always(function(){return a})})};return c&&F[c]?F[c]().then(function(a){return e(a)}):e()};r.prototype._signIn=function(){var a=this;if(this.authMode===C.AUTH_MODE_ANONYMOUS)return A.reject(new v("portal:invalid-auth-mode",'Current "authMode"\' is "'+this.authMode+
'"'));if("failed"===this.loadStatus)return A.reject(this.loadError);var b=function(b){return A.resolve().then(function(){if("not-loaded"===a.loadStatus)return b||(a.authMode="immediate"),a.load().then(function(){return null});if("loading"===a.loadStatus)return a.load().then(function(){if(a.credential)return null;a.credential=b;return a._fetchSelf("immediate")});if(a.user&&a.credential===b)return null;a.credential=b;return a._fetchSelf("immediate")}).then(function(b){b&&a.read(b)})};return g.id?g.id.getCredential(this.restUrl).then(function(a){return b(a)}):
b(this.credential)};r.prototype._normalizeSSL=function(a){var b=this.allSSL;!b&&y("esri-secure-context")&&(b=!0);if(this.isPortal){var c=new e(a);return-1<this.portalHostname.toLowerCase().indexOf(c.host.toLowerCase())&&c.port&&"80"!==c.port&&"443"!==c.port?b?"https://"+c.host+(this.httpsPort&&443!==this.httpsPort?":"+this.httpsPort:"")+c.path+"?"+c.query:"http://"+c.host+(this.httpPort&&80!==this.httpPort?":"+this.httpPort:"")+c.path+"?"+c.query:b?a.replace("http:","https:"):a}return b?a.replace("http:",
"https:"):a};r.prototype._normalizeUrl=function(a){var b=this.credential&&this.credential.token;return this._normalizeSSL(b?a+(-1<a.indexOf("?")?"\x26":"?")+"token\x3d"+b:a)};r.prototype._requestToTypedArray=function(a,b,d){var e=this,g=function(c){return e._request(a,b).then(function(a){var b=C._resultsToTypedArray(c,{portal:e},a);return h(b.map(function(b){return"function"===typeof b.when?b.when():a})).always(function(){return b})})};return d?A.create(function(a){return c(["./"+d],a)}).then(function(a){return g(a)}):
g()};r.prototype._request=function(a,b){var c=this.authMode===C.AUTH_MODE_ANONYMOUS?"anonymous":"auto",d=null,e="auto",g={f:"json"},h="json";b&&(b.authMode&&(c=b.authMode),b.body&&(d=b.body),b.method&&(e=b.method),b.query&&(g=f({},g,b.query)),b.responseType&&(h=b.responseType));b={authMode:c,body:d,method:e,query:g,responseType:h,timeout:0};return q(this._normalizeSSL(a),b).then(function(a){return a.data})};r._resultsToTypedArray=function(a,b,c){if(c){if(c=c.listings||c.notifications||c.userInvitations||
c.tags||c.items||c.groups||c.comments||c.provisions||c.results||c.relatedItems||c,a||b)c=c.map(function(c){c=B.mixin(a?a.fromJSON(c):c,b);"function"===typeof c.load&&c.load();return c})}else c=[];return c};var C;r.AUTH_MODE_ANONYMOUS="anonymous";r.AUTH_MODE_AUTO="auto";r.AUTH_MODE_IMMEDIATE="immediate";d([u.property()],r.prototype,"access",void 0);d([u.property()],r.prototype,"allSSL",void 0);d([u.property()],r.prototype,"authMode",void 0);d([u.property()],r.prototype,"authorizedCrossOriginDomains",
void 0);d([u.reader("authorizedCrossOriginDomains")],r.prototype,"readAuthorizedCrossOriginDomains",null);d([u.property()],r.prototype,"basemapGalleryGroupQuery",void 0);d([u.property()],r.prototype,"bingKey",void 0);d([u.property()],r.prototype,"canListApps",void 0);d([u.property()],r.prototype,"canListData",void 0);d([u.property()],r.prototype,"canListPreProvisionedItems",void 0);d([u.property()],r.prototype,"canProvisionDirectPurchase",void 0);d([u.property()],r.prototype,"canSearchPublic",void 0);
d([u.property()],r.prototype,"canShareBingPublic",void 0);d([u.property()],r.prototype,"canSharePublic",void 0);d([u.property()],r.prototype,"canSignInArcGIS",void 0);d([u.property()],r.prototype,"canSignInIDP",void 0);d([u.property()],r.prototype,"colorSetsGroupQuery",void 0);d([u.property()],r.prototype,"commentsEnabled",void 0);d([u.property({type:Date})],r.prototype,"created",void 0);d([u.property()],r.prototype,"credential",void 0);d([u.property()],r.prototype,"culture",void 0);d([u.property()],
r.prototype,"currentVersion",void 0);d([u.property()],r.prototype,"customBaseUrl",void 0);d([u.property()],r.prototype,"defaultBasemap",void 0);d([u.reader("defaultBasemap")],r.prototype,"readDefaultBasemap",null);d([u.property({type:n})],r.prototype,"defaultExtent",void 0);d([u.property()],r.prototype,"defaultVectorBasemap",void 0);d([u.reader("defaultVectorBasemap")],r.prototype,"readDefaultVectorBasemap",null);d([u.property()],r.prototype,"description",void 0);d([u.property()],r.prototype,"eueiEnabled",
void 0);d([u.property({dependsOn:["user","id","canSearchPublic"],readOnly:!0})],r.prototype,"extraQuery",null);d([u.property()],r.prototype,"featuredGroups",void 0);d([u.property()],r.prototype,"featuredItemsGroupQuery",void 0);d([u.property()],r.prototype,"galleryTemplatesGroupQuery",void 0);d([u.property()],r.prototype,"livingAtlasGroupQuery",void 0);d([u.property()],r.prototype,"hasCategorySchema",void 0);d([u.property()],r.prototype,"helpBase",void 0);d([u.property()],r.prototype,"helperServices",
void 0);d([u.property()],r.prototype,"helpMap",void 0);d([u.property()],r.prototype,"homePageFeaturedContent",void 0);d([u.property()],r.prototype,"homePageFeaturedContentCount",void 0);d([u.property()],r.prototype,"httpPort",void 0);d([u.property()],r.prototype,"httpsPort",void 0);d([u.property()],r.prototype,"id",void 0);d([u.property()],r.prototype,"ipCntryCode",void 0);d([u.property({dependsOn:["access"],readOnly:!0})],r.prototype,"isOrganization",null);d([u.property()],r.prototype,"isPortal",
void 0);d([u.property()],r.prototype,"layerTemplatesGroupQuery",void 0);d([u.property()],r.prototype,"maxTokenExpirationMinutes",void 0);d([u.property({type:Date})],r.prototype,"modified",void 0);d([u.property()],r.prototype,"name",void 0);d([u.property()],r.prototype,"portalHostname",void 0);d([u.property()],r.prototype,"portalMode",void 0);d([u.property()],r.prototype,"portalProperties",void 0);d([u.property()],r.prototype,"region",void 0);d([u.property({dependsOn:["url"],readOnly:!0})],r.prototype,
"restUrl",null);d([u.property()],r.prototype,"rotatorPanels",void 0);d([u.property()],r.prototype,"showHomePageDescription",void 0);d([u.property()],r.prototype,"staticImagesUrl",void 0);d([u.property()],r.prototype,"stylesGroupQuery",void 0);d([u.property()],r.prototype,"supportsHostedServices",void 0);d([u.property()],r.prototype,"symbolSetsGroupQuery",void 0);d([u.property()],r.prototype,"templatesGroupQuery",void 0);d([u.property()],r.prototype,"thumbnail",void 0);d([u.property({dependsOn:["restUrl",
"thumbnail"],readOnly:!0})],r.prototype,"thumbnailUrl",null);d([u.property()],r.prototype,"units",void 0);d([u.property()],r.prototype,"url",void 0);d([u.property()],r.prototype,"urlKey",void 0);d([u.reader("urlKey")],r.prototype,"readUrlKey",null);d([u.property()],r.prototype,"user",void 0);d([u.reader("user")],r.prototype,"readUser",null);d([u.property()],r.prototype,"useStandardizedQuery",void 0);d([u.property()],r.prototype,"useVectorBasemaps",void 0);d([u.property()],r.prototype,"vectorBasemapGalleryGroupQuery",
void 0);d([l(1,u.cast(t))],r.prototype,"_queryPortal",null);return r=C=d([u.subclass("esri.portal.Portal")],r)}(u.declared(C,r))})},"esri/core/Loadable":function(){define("./Promise ./Accessor ./Error ./Warning ./lang dojo/aspect dojo/Deferred".split(" "),function(c,a,f,b,d,l,k){return c.createSubclass([a],{declaredClass:"esri.core.Loadable","-chains-":d.mixin({},a._meta.chains,{load:"after"}),constructor:function(){this._set("loadWarnings",[]);var a=new k;this.addResolvingPromise(a.promise);l.around(this,
"load",function(b){return function(){"not-loaded"===this.loadStatus&&(this.loadStatus="loading",b.apply(this));a&&(a.resolve(),a=null);return this.when()}});this.when(function(a){this.loadStatus="loaded"}.bind(this),function(a){this.loadStatus="failed";this.loadError=a}.bind(this))},properties:{loaded:{readOnly:!0,dependsOn:["loadStatus"],get:function(){return"loaded"===this.loadStatus}},loadError:null,loadStatus:"not-loaded",loadWarnings:{type:[b],readOnly:!0}},load:function(){},cancelLoad:function(){if(this.isFulfilled())return this;
this.loadError=new f("load:cancelled","Cancelled");this._promiseProps.cancel(this.loadError);return this}})})},"esri/core/Promise":function(){define("dojo/promise/all dojo/Deferred dojo/aspect dojo/errors/create ./scheduling ./Logger ./declare ./has ./lang".split(" "),function(c,a,f,b,d,l,k,e,h){function p(a,b){g.warn("DEPRECATED: "+a+"()"+(b?" -- use "+b+" instead":""))}e.add("esri-promise-compatibility",!0);e.add("esri-promise-compatibility-deprecation-warnings",!0);var g=l.getLogger("esri.core.Promise"),
q=function(b){var e=b._promiseProps;if(!e.resolver.isFulfilled()){var g=e.resolvingPromises,f,h;e.allPromise&&e.allPromise.cancel();var k=new a;for(f=g.length-1;0<=f;f--)h=g[f],h.isCanceled&&h.isCanceled()?g.splice(f,1):h.then(null,null,e.resolver.progress);h=null;(e.allPromise=c(g.concat([k.promise]))).then(function(){e.resolver.resolve(b);b=e=k=e.allPromise=e.resolvingPromises=null},function(a){e.allPromise=null;if(!a||"cancel"!==a.dojoType){var c=Array.prototype.slice.call(arguments,0);e.resolver.reject(c[0]);
b=e=k=e.allPromise=e.resolvingPromises=null}});k&&d.schedule(function(){k&&k.resolve()})}},v=b("CancelError",null,function(a){this.target=a}),y=function(a){return a||new v(this.instance)},C=function(b){this.instance=b;this.canceler=y.bind(this);this.resolver=new a;this.initialized=!1;this.resolvingPromises=[]};C.prototype={canceler:null,cancel:function(a){if(!this.resolver.isFulfilled()){this.allPromise.cancel();for(var b=this.resolvingPromises.concat(),c=b.length-1;0<=c;c--)b[c].cancel(a);this.resolver.cancel(a)}}};
b={declaredClass:"esri.core.Promise",constructor:function(){Object.defineProperty(this,"_promiseProps",{value:new C(this),enumerable:!1,configurable:!1,writable:!0});var a=f.after(this,"postscript",function(b,c){a.remove();a=null;q(this)},!0)},_promiseProps:null,always:function(a){e("esri-promise-compatibility-deprecation-warnings")&&p("always",".when(callbackOrErrback, callbackOrErrback)");return this.when(a,a)},isResolved:function(){return this._promiseProps.resolver.isResolved()},isRejected:function(){return this._promiseProps.resolver.isRejected()},
isFulfilled:function(){return this._promiseProps.resolver.isFulfilled()},otherwise:function(a){e("esri-promise-compatibility-deprecation-warnings")&&p("otherwise",".when().catch(errback)");return this.when(null,a)},catch:function(a){return this.when(null,a)},when:function(b,c,d){var e=new a(this._promiseProps.canceler);b=e.then(b,c,d);this._promiseProps.resolver.then(e.resolve,e.reject,e.progress);return b},addResolvingPromise:function(a){a&&!this._promiseProps.resolver.isFulfilled()&&(a._promiseProps&&
(a=a.when()),this._promiseProps.resolvingPromises.push(a),q(this))}};e("esri-promise-compatibility")||(b=h.mixin(b,{then:function(a,b,c){e("esri-promise-compatibility-deprecation-warnings")&&p("then",".when(callback, errback)");return this.when(a,b,c)},cancel:function(){e("esri-promise-compatibility-deprecation-warnings")&&p("cancel")},isCanceled:function(){e("esri-promise-compatibility-deprecation-warnings")&&p("isCanceled");return!1},trace:function(){e("esri-promise-compatibility-deprecation-warnings")&&
p("trace");return this},traceRejected:function(){e("esri-promise-compatibility-deprecation-warnings")&&p("traceRejected");return this}}));return k(null,b)})},"esri/portal/PortalQueryParams":function(){define("require exports ../core/tsSupport/assignHelper ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/kebabDictionary ../core/lang ../core/accessorSupport/decorators ../geometry/Extent ../geometry/SpatialReference ../geometry/support/webMercatorUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q){var v=k({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});return function(a){function c(b){b=a.call(this)||this;b.categories=null;b.disableExtraQuery=!1;b.extent=null;b.num=10;b.query=null;b.sortField=null;b.start=1;return b}b(c,a);k=c;Object.defineProperty(c.prototype,"sortOrder",{get:function(){return this._get("sortOrder")||"asc"},set:function(a){"asc"!==a&&"desc"!==a||this._set("sortOrder",a)},enumerable:!0,configurable:!0});
c.prototype.clone=function(){return new k({categories:this.categories?e.clone(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})};c.prototype.toRequestOptions=function(a,b){var c;this.categories&&(c=this.categories.map(function(a){return Array.isArray(a)?JSON.stringify(a):a}));var d;if(this.extent){var e=q.project(this.extent,g.WGS84);e&&(d=e.xmin+
","+e.ymin+","+e.xmax+","+e.ymax)}e=this.query;!this.disableExtraQuery&&a.extraQuery&&(e="("+e+")"+a.extraQuery);a={categories:c,bbox:d,q:e,num:this.num,sortField:null,sortOrder:null,start:this.start};this.sortField&&(a.sortField=v.toJSON(this.sortField),a.sortOrder=this.sortOrder);return{query:f({},b,a)}};var k;d([h.property()],c.prototype,"categories",void 0);d([h.property()],c.prototype,"disableExtraQuery",void 0);d([h.property({type:p})],c.prototype,"extent",void 0);d([h.property()],c.prototype,
"num",void 0);d([h.property()],c.prototype,"query",void 0);d([h.property()],c.prototype,"sortField",void 0);d([h.property()],c.prototype,"sortOrder",null);d([h.property()],c.prototype,"start",void 0);return c=k=d([h.subclass("esri.portal.PortalQueryParams")],c)}(h.declared(l))})},"esri/portal/PortalQueryResult":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Accessor ../core/accessorSupport/decorators".split(" "),function(c,a,f,b,
d,l){return function(a){function c(b){b=a.call(this)||this;b.nextQueryParams=null;b.queryParams=null;b.results=null;b.total=null;return b}f(c,a);b([l.property()],c.prototype,"nextQueryParams",void 0);b([l.property()],c.prototype,"queryParams",void 0);b([l.property()],c.prototype,"results",void 0);b([l.property()],c.prototype,"total",void 0);return c=b([l.subclass("esri.portal.PortalQueryResult")],c)}(l.declared(d))})},"esri/portal/PortalUser":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper dojo/promise/all ../core/Error ../core/JSONSupport ../core/promiseUtils ../core/accessorSupport/decorators ./PortalFolder ./PortalGroup".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g){return function(a){function k(){var b=a.call(this)||this;b.access=null;b.created=null;b.culture=null;b.description=null;b.email=null;b.fullName=null;b.modified=null;b.orgId=null;b.portal=null;b.preferredView=null;b.privileges=null;b.region=null;b.role=null;b.roleId=null;b.units=null;b.username=null;b.userType=null;return b}f(k,a);Object.defineProperty(k.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+
"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"userContentUrl",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username:null},enumerable:!0,configurable:!0});Object.defineProperty(k.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/users/"+this.username:null},enumerable:!0,configurable:!0});k.prototype.addItem=function(a){var b=this,c=a&&a.item,d=a&&a.data;a=a&&a.folder;var e=
{method:"post"};c&&(e.query=c._getPostQuery(),null!=d&&("string"===typeof d?e.query.text=d:"object"===typeof d&&(e.query.text=JSON.stringify(d))));d=this.userContentUrl;a&&(d+="/"+a.id);return this.portal._request(d+"/addItem",e).then(function(a){c.id=a.id;c.portal=b.portal;return c.loaded?c._reload():c.load()})};k.prototype.deleteItem=function(a){var b=this.userContentUrl;a.ownerFolder&&(b+="/"+a.ownerFolder);return this.portal._request(b+("/items/"+a.id+"/delete"),{method:"post"}).then(function(){a.id=
null;a.portal=null})};k.prototype.deleteItems=function(a){var b=this.userContentUrl+"/deleteItems",c=a.map(function(a){return a.id});return c.length?(c={method:"post",query:{items:c.join(",")}},this.portal._request(b,c).then(function(){a.forEach(function(a){a.id=null;a.portal=null})})):e.resolve(void 0)};k.prototype.fetchFolders=function(){var a=this;return this.portal._request(this.userContentUrl,{query:{num:1}}).then(function(b){return b&&b.folders?b.folders.map(function(b){b=p.fromJSON(b);b.portal=
a.portal;return b}):[]})};k.prototype.fetchGroups=function(){var a=this;return this.portal._request(this.url).then(function(b){return b&&b.groups?b.groups.map(function(b){b=g.fromJSON(b);b.portal=a.portal;return b}):[]})};k.prototype.fetchItems=function(a){var b=this;a||(a={});var g=this.userContentUrl;a.folder&&(g+="/"+a.folder.id);var f;return e.create(function(a){return c(["./PortalItem"],a)}).then(function(c){f=c;return b.portal._request(g,{query:{folders:!1,num:a.num||10,start:a.start||1}})}).then(function(a){var c;
return a&&a.items?(c=a.items.map(function(a){a=f.fromJSON(a);a.portal=b.portal;return a}),d(c.map(function(a){return a.load()})).always(function(){return{items:c,nextStart:a.nextStart,total:a.total}})):{items:[],nextStart:-1,total:0}})};k.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};k.prototype.queryFavorites=function(a){return this.favGroupId?(this._favGroup||(this._favGroup=new g({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(a)):
e.reject(new l("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))};k.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};b([h.property()],k.prototype,"access",void 0);b([h.property({type:Date})],k.prototype,"created",void 0);b([h.property()],k.prototype,"culture",void 0);b([h.property()],k.prototype,"description",void 0);b([h.property()],k.prototype,"email",void 0);b([h.property()],k.prototype,"favGroupId",
void 0);b([h.property()],k.prototype,"fullName",void 0);b([h.property({type:Date})],k.prototype,"modified",void 0);b([h.property()],k.prototype,"orgId",void 0);b([h.property()],k.prototype,"portal",void 0);b([h.property()],k.prototype,"preferredView",void 0);b([h.property()],k.prototype,"privileges",void 0);b([h.property()],k.prototype,"region",void 0);b([h.property()],k.prototype,"role",void 0);b([h.property()],k.prototype,"roleId",void 0);b([h.property()],k.prototype,"thumbnail",void 0);b([h.property({dependsOn:["url",
"thumbnail","portal.credential.token"],readOnly:!0})],k.prototype,"thumbnailUrl",null);b([h.property()],k.prototype,"units",void 0);b([h.property({dependsOn:["portal.restUrl"],readOnly:!0})],k.prototype,"userContentUrl",null);b([h.property({dependsOn:["portal.restUrl"],readOnly:!0})],k.prototype,"url",null);b([h.property()],k.prototype,"username",void 0);b([h.property()],k.prototype,"userType",void 0);return k=b([h.subclass("esri.portal.PortalUser")],k)}(h.declared(k))})},"esri/portal/PortalFolder":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(c,a,f,b,d,l,k){return function(a){function c(b){b=a.call(this)||this;b.created=null;b.id=null;b.portal=null;b.title=null;b.username=null;return b}f(c,a);Object.defineProperty(c.prototype,"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/content/users/"+this.username+"/"+this.id:null},enumerable:!0,configurable:!0});c.prototype.toJSON=function(){throw new d("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented");};b([k.property({type:Date})],c.prototype,
"created",void 0);b([k.property()],c.prototype,"id",void 0);b([k.property()],c.prototype,"portal",void 0);b([k.property()],c.prototype,"title",void 0);b([k.property({dependsOn:["portal.restUrl"],readOnly:!0})],c.prototype,"url",null);b([k.property()],c.prototype,"username",void 0);return c=b([k.subclass("esri.portal.PortalFolder")],c)}(k.declared(l))})},"esri/portal/PortalGroup":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../core/Error ../core/JSONSupport ../core/accessorSupport/decorators ./PortalQueryParams".split(" "),
function(c,a,f,b,d,l,k,e,h){return function(a){function c(b){b=a.call(this)||this;b.access=null;b.created=null;b.description=null;b.id=null;b.isInvitationOnly=!1;b.modified=null;b.owner=null;b.portal=null;b.snippet=null;b.sortField=null;b.sortOrder=null;b.tags=null;b.title=null;return b}f(c,a);Object.defineProperty(c.prototype,"thumbnailUrl",{get:function(){var a=this.url,b=this.thumbnail;return a&&b?this.portal._normalizeUrl(a+"/info/"+b+"?f\x3djson"):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"url",{get:function(){var a=this.get("portal.restUrl");return a?a+"/community/groups/"+this.id:null},enumerable:!0,configurable:!0});c.prototype.fetchCategorySchema=function(){var a=this;return this.portal._request(this.url+"/categorySchema").then(function(b){b=b.categorySchema||[];return b.some(function(a){return"contentCategorySetsGroupQuery.LivingAtlas"===a.source})?a._fetchCategorySchemaSet("LivingAtlas"):b})};c.prototype.fetchMembers=function(){return this.portal._request(this.url+"/users")};
c.prototype.getThumbnailUrl=function(a){var b=this.thumbnailUrl;b&&a&&(b+="\x26w\x3d"+a);return b};c.prototype.toJSON=function(){throw new l("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented");};c.prototype.queryItems=function(a){if(5<parseFloat(this.portal.currentVersion))return a=a||new h,this.portal._queryPortal("/content/groups/"+this.id+"/search",a,"PortalItem");a=a?a.clone():new h;a.query="group:"+this.id+(a.query?" "+a.query:"");return this.portal.queryItems(a)};c.prototype._fetchCategorySchemaSet=
function(a){var b=this;return this.portal._fetchSelf(this.portal.authMode,!0).then(function(a){if(a=a.contentCategorySetsGroupQuery){var c=new h;c.disableExtraQuery=!0;c.num=1;c.query=a;return b.portal.queryGroups(c)}throw new l("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found");}).then(function(b){if(b.total){b=b.results[0];var c=new h;c.num=1;c.query='typekeywords:"'+a+'"';return b.queryItems(c)}throw new l("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found");
}).then(function(a){return a.total?a.results[0].fetchData().then(function(a){return(a=a&&a.categorySchema)&&a.length?a:[]}):[]})};b([e.property()],c.prototype,"access",void 0);b([e.property({type:Date})],c.prototype,"created",void 0);b([e.property()],c.prototype,"description",void 0);b([e.property()],c.prototype,"id",void 0);b([e.property()],c.prototype,"isInvitationOnly",void 0);b([e.property({type:Date})],c.prototype,"modified",void 0);b([e.property()],c.prototype,"owner",void 0);b([e.property()],
c.prototype,"portal",void 0);b([e.property()],c.prototype,"snippet",void 0);b([e.property()],c.prototype,"sortField",void 0);b([e.property()],c.prototype,"sortOrder",void 0);b([e.property()],c.prototype,"tags",void 0);b([e.property()],c.prototype,"thumbnail",void 0);b([e.property({dependsOn:["url","thumbnail","portal.credential.token"],readOnly:!0})],c.prototype,"thumbnailUrl",null);b([e.property()],c.prototype,"title",void 0);b([e.property({dependsOn:["portal.restUrl"],readOnly:!0})],c.prototype,
"url",null);b([d(0,e.cast(h))],c.prototype,"queryItems",null);return c=b([e.subclass("esri.portal.PortalGroup")],c)}(e.declared(k))})},"esri/symbols/ExtrudeSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils".split(" "),function(c,a,f,b,d,l,k){return function(a){function c(b){b=a.call(this)||this;b.type="extrude";b.size=void 0;b.material=null;b.edges=null;return b}
f(c,a);e=c;c.prototype.clone=function(){return new e({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var e;b([d.enumeration.serializable()({Extrude:"extrude"})],c.prototype,"type",void 0);b([d.property({type:Number,json:{write:!0}})],c.prototype,"size",void 0);b([d.property()],c.prototype,"material",void 0);b([d.property(k.symbol3dEdgesProperty)],c.prototype,"edges",
void 0);return c=e=b([d.subclass("esri.symbols.ExtrudeSymbol3DLayer")],c)}(d.declared(l))})},"esri/symbols/Symbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/kebabDictionary ../core/accessorSupport/decorators ./support/ElevationInfo ./support/Symbol3DMaterial".split(" "),function(c,a,f,b,d,l,k,e,h){var p=l.strict()({Icon:"icon",Object:"object",Line:"line",Path:"path",Fill:"fill",Extrude:"extrude",Text:"text"});
c=function(a){function c(b){b=a.call(this)||this;b.enabled=!0;b.material=null;b.type=null;return b}f(c,a);c.prototype.writeEnabled=function(a,b,c){a||(b[c]=a)};b([k.property({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],c.prototype,"enabled",void 0);b([k.writer("enabled")],c.prototype,"writeEnabled",null);b([k.property({type:e,json:{read:!1,write:!1}})],c.prototype,"elevationInfo",void 0);b([k.property({type:h.default,json:{write:!0}})],c.prototype,"material",void 0);b([k.property({type:p.apiValues,
readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:p.write}}})],c.prototype,"type",void 0);return c=b([k.subclass("esri.symbols.Symbol3DLayer")],c)}(k.declared(d));(c||(c={})).typeJSONDictionary=p;return c})},"esri/symbols/support/ElevationInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../support/arcadeUtils ./unitConversionUtils".split(" "),
function(c,a,f,b,d,l,k,e,h){var p=l.strict()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),g=l({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"}),q=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}f(c,a);d=c;Object.defineProperty(c.prototype,"requiredFields",{get:function(){return e.extractFieldNames(this.expression)},enumerable:!0,configurable:!0});
c.prototype.clone=function(){return new d({expression:this.expression,title:this.title})};var d;b([k.property({type:String,json:{write:!0}})],c.prototype,"expression",void 0);b([k.property({readOnly:!0,dependsOn:["expression"]})],c.prototype,"requiredFields",null);b([k.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);return c=d=b([k.subclass("esri.layers.support.FeatureExpressionInfo")],c)}(k.declared(d));return function(a){function c(){return null!==a&&a.apply(this,arguments)||
this}f(c,a);d=c;c.prototype.readFeatureExpressionInfo=function(a,b){if(null!=a)return a;if(b.featureExpression&&0===b.featureExpression.value)return{expression:"0"}};c.prototype.writeFeatureExpressionInfo=function(a,b,c,d){b[c]=a.write(null,d);"0"===a.expression&&(b.featureExpression={value:0})};Object.defineProperty(c.prototype,"mode",{get:function(){return this._isOverridden("mode")?this._get("mode"):null!=this.offset||this.featureExpressionInfo?"relative-to-ground":"on-the-ground"},set:function(a){this._override("mode",
a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"unit",{set:function(a){this._set("unit",a)},enumerable:!0,configurable:!0});c.prototype.write=function(a,b){return this.offset||this.mode||this.featureExpressionInfo||this.unit?this.inherited(arguments):null};c.prototype.clone=function(){return new d({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})};var d;b([k.property({type:q,json:{write:!0}})],
c.prototype,"featureExpressionInfo",void 0);b([k.reader("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],c.prototype,"readFeatureExpressionInfo",null);b([k.writer("featureExpressionInfo",{featureExpressionInfo:{type:q},"featureExpression.value":{type:Number}})],c.prototype,"writeFeatureExpressionInfo",null);b([k.property({type:p.apiValues,dependsOn:["offset","featureExpressionInfo"],nonNullable:!0,json:{read:p.read,write:{writer:p.write,isRequired:!0}}})],c.prototype,"mode",
null);b([k.property({type:Number,json:{write:!0}})],c.prototype,"offset",void 0);b([k.property({type:h.supportedUnits,json:{read:g.read,write:g.write}})],c.prototype,"unit",null);return c=d=b([k.subclass("esri.layers.support.ElevationInfo")],c)}(k.declared(d))})},"esri/support/arcadeUtils":function(){define("require exports ../arcade/arcade ../arcade/Dictionary ../arcade/Feature ../core/lang".split(" "),function(c,a,f,b,d,l){function k(a){var b;try{b=a?f.parseScript(a):null}catch(q){b=null}return b}
Object.defineProperty(a,"__esModule",{value:!0});var e=/^\$feature\./i,h={vars:{$feature:"any",$view:"any"},spatialReference:null};a.createSyntaxTree=k;a.createFunction=function(a,b){b=b||l.clone(h);a="string"===typeof a?k(a):a;if(!a)return null;var c;try{c=a?f.compileScript(a,b):null}catch(v){c=null}return c};a.createExecContext=function(a,b){return{vars:{$feature:null==a?new d:d.createFromGraphic(a),$view:b&&b.view},spatialReference:b&&b.sr}};a.createFeature=function(a,b,c){return d.createFromGraphicLikeObject(b,
a,c)};a.updateExecContext=function(a,b){a.vars.$feature=b};a.evalSyntaxTree=function(a,b){var c;try{c=f.executeScript(a,b,b.spatialReference)}catch(v){c=null}return c};a.executeFunction=function(a,b){var c;try{c=a?a(b,b.spatialReference):null}catch(v){c=null}return c};a.extractFieldNames=function(a){if(!a)return[];a="string"===typeof a?k(a):a;if(!a)return[];var b=[];f.extractFieldLiterals(a).forEach(function(a){e.test(a)&&(a=a.replace(e,""),b.push(a))});b.sort();return b.filter(function(a,c){return 0===
c||b[c-1]!==a})};a.dependsOnView=function(a){return f.referencesMember(a,"$view")};a.getViewInfo=function(a){if(a&&a.viewingMode&&null!=a.scale&&a.spatialReference)return{view:new b({viewingMode:a.viewingMode,scale:a.scale}),sr:a.spatialReference}};a.hasGeometryOperations=function(a){return(a="string"===typeof a?k(a):a)&&f.scriptUsesGeometryEngine(a)};a.enableGeometryOperations=function(){return f.enableGeometrySupport()}})},"esri/arcade/arcade":function(){define("require exports dojo/Deferred ./arcadeCompiler ./arcadeRuntime ./parser ../core/has".split(" "),
function(c,a,f,b,d,l,k){Object.defineProperty(a,"__esModule",{value:!0});var e="disjoint intersects touches crosses within contains overlaps equals relate intersection union difference symmetricdifference clip cut area areageodetic length lengthgeodetic distance densify densifygeodetic generalize buffer buffergeodetic offset rotate issimple simplify multiparttosinglepart".split(" ");a.compileScript=function(a,c){return k("csp-restrictions")?function(b,c){return d.executeScript(a,b,c)}:b.compileScript(a,
c)};a.extend=function(a){d.extend(a);b.extend(a)};a.parseScript=function(a){return l.parseScript(a)};a.validateScript=function(a,b){return l.validateScript(a,b,"simple")};a.scriptCheck=function(a,b,c){return l.scriptCheck(a,b,c,"full")};a.parseAndExecuteScript=function(a,b,c){return d.executeScript(l.parseScript(a),b,c)};a.executeScript=function(a,b,c){return d.executeScript(a,b,c)};a.referencesMember=function(a,b){return d.referencesMember(a,b)};a.referencesFunction=function(a,b){return d.referencesFunction(a,
b)};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return l.extractFieldLiterals(a,b)};a.scriptUsesGeometryEngine=function(a){a=d.findFunctionCalls(a);for(var b=0;b<a.length;b++)if(-1<e.indexOf(a[b]))return!0;return!1};a.enableGeometrySupport=function(){var a=new f;c(["esri/geometry/geometryEngine","./functions/geomsync"],function(b,c){c.setGeometryEngine(b);a.resolve(!0)},function(b){a.reject(b)});return a.promise}})},"esri/arcade/arcadeCompiler":function(){define("require exports ./Dictionary ./Feature ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A,u,n,t){function x(a,b,c){try{return c(a,null,b)}catch(sa){throw sa;}}function D(a,b){try{switch(b.type){case "EmptyStatement":return"lc.voidOperation";case "VariableDeclarator":return N(a,b);case "VariableDeclaration":for(var c=[],d=0;d<b.declarations.length;d++)c.push(D(a,b.declarations[d]));return c.join("\n")+" \n lastStatement\x3d  lc.voidOperation; \n";case "BlockStatement":return E(a,b);case "FunctionDeclaration":var d=b.id.name.toLowerCase(),f={applicationCache:void 0===
a.applicationCache?null:a.applicationCache,spatialReference:a.spatialReference,console:a.console,symbols:a.symbols,localScope:{_SymbolsMap:{}},depthCounter:a.depthCounter+1,globalScope:a.globalScope};if(64<f.depthCounter)throw Error("Exceeded maximum function depth");for(var g="new lc.SizzleFunction( lang.functionDepthchecker(function() { var lastStatement \x3d lc.voidOperation; var lscope \x3d [];\n ",h=0;h<b.params.length;h++){var k=b.params[h].name.toLowerCase(),n=qa(k,a);f.localScope._SymbolsMap[k]=
n;g+="lscope['"+n+"']\x3darguments["+h.toString()+"];\n"}g+=E(f,b.body)+"\n return lastStatement; }, runtimeCtx))";g+="\n lastStatement \x3d lc.voidOperation; \n";void 0!==a.globalScope[d]?c="gscope['"+d+"']\x3d"+g:void 0!==a.globalScope._SymbolsMap[d]?c="gscope['"+a.globalScope._SymbolsMap[d]+"']\x3d"+g:(n=qa(d,a),a.globalScope._SymbolsMap[d]=n,c="gscope['"+n+"']\x3d"+g);return c;case "ReturnStatement":var p;p=null===b.argument?"return lc.voidOperation;":"return "+D(a,b.argument)+";";return p;case "IfStatement":if("AssignmentExpression"===
b.test.type||"UpdateExpression"===b.test.type)throw Error(e.nodeErrorMessage(b.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var l=D(a,b.test),q=X(a),A="var "+q+" \x3d "+l+";\n if ("+q+" \x3d\x3d\x3d true) {\n"+J(a,b.consequent)+"\n }\n",A=null!==b.alternate?A+("else if ("+q+"\x3d\x3d\x3dfalse)   { \n"+J(a,b.alternate)+"}\n"):A+("else if ("+q+"\x3d\x3d\x3dfalse) { \n lastStatement \x3d lc.voidOperation;\n }\n");return A+="else { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION'); \n}\n";
case "ExpressionStatement":var u;u="AssignmentExpression"===b.expression.type?"lastStatement \x3d lc.voidOperation; "+D(a,b.expression)+" \n ":"lastStatement \x3d "+D(a,b.expression)+";";return u;case "AssignmentExpression":return F(a,b);case "UpdateExpression":return G(a,b);case "BreakStatement":return"break;";case "ContinueStatement":return"continue;";case "ForStatement":c="lastStatement \x3d lc.voidOperation; \n";null!==b.init&&(c+=D(a,b.init));var t=X(a),x=X(a),c=c+("var "+t+" \x3d true;")+"\n do { ";
null!==b.update&&(c+=" if ("+t+"\x3d\x3d\x3dfalse) {\n "+D(a,b.update)+"  \n}\n "+t+"\x3dfalse; \n");null!==b.test&&(c+="var "+x+" \x3d "+D(a,b.test)+";",c+="if ("+x+"\x3d\x3d\x3dfalse) { break; } else if ("+x+"!\x3d\x3dtrue) { lang.error({type: '"+b.type+"'},'RUNTIME','CANNOT_USE_NONBOOLEAN_IN_CONDITION');   }\n");c+=D(a,b.body);null!==b.update&&(c+="\n "+D(a,b.update));return c+("\n"+t+" \x3d true; \n} while(true);  lastStatement \x3d lc.voidOperation;");case "ForInStatement":var v=X(a),B=X(a),
r=X(a),y="var "+v+" \x3d "+D(a,b.right)+";\n";"VariableDeclaration"===b.left.type&&(y+=D(a,b.left));var C="VariableDeclaration"===b.left.type?b.left.declarations[0].id.name:b.left.name,C=C.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[C]?c="lscope['"+C+"']":void 0!==a.localScope._SymbolsMap[C]&&(c="lscope['"+a.localScope._SymbolsMap[C]+"']"));""===c&&(void 0!==a.globalScope[C]?c="gscope['"+C+"']":void 0!==a.globalScope._SymbolsMap[C]&&(c="gscope['"+a.globalScope._SymbolsMap[C]+"']"));
y=y+("if ("+v+"\x3d\x3d\x3dnull) {  lastStatement \x3d lc.voidOperation; }\n ")+("else if (lc.isArray("+v+") || lc.isString("+v+")) {")+("var "+B+"\x3d"+v+".length; \n")+("for(var "+r+"\x3d0; "+r+"\x3c"+B+"; "+r+"++) {\n");y+=c+"\x3d"+r+";\n";y+=D(a,b.body);y+="\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";y+="else if (lc.isImmutableArray("+v+")) {";y=y+("var "+B+"\x3d"+v+".length(); \n")+("for(var "+r+"\x3d0; "+r+"\x3c"+B+"; "+r+"++) {\n");y+=c+"\x3d"+r+";\n";y+=D(a,b.body);y+=
"\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";y+="else if (( "+v+" instanceof lang.Dictionary) || ( "+v+" instanceof lang.Feature)) {";y=y+("var "+B+"\x3d"+v+".keys(); \n")+("for(var "+r+"\x3d0; "+r+"\x3c"+B+".length; "+r+"++) {\n");y+=c+"\x3d"+B+"["+r+"];\n";y+=D(a,b.body);y+="\n}\n";y+=" lastStatement \x3d lc.voidOperation; \n";y+=" \n}\n";return y+"else { lastStatement \x3d lc.voidOperation; } \n";case "Identifier":return ia(a,b);case "MemberExpression":var M;try{c=void 0,c=
!0===b.computed?D(a,b.property):"'"+b.property.name+"'",M="lang.member("+D(a,b.object)+","+c+")"}catch(Fa){throw Fa;}return M;case "Literal":return null===b.value||void 0===b.value?"null":JSON.stringify(b.value);case "ThisExpression":throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "CallExpression":try{if("Identifier"!==b.callee.type)throw Error(e.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));var Z=b.callee.name.toLowerCase(),c="";null!==a.localScope&&(void 0!==a.localScope[Z]?
c="lscope['"+Z+"']":void 0!==a.localScope._SymbolsMap[Z]&&(c="lscope['"+a.localScope._SymbolsMap[Z]+"']"));""===c&&(void 0!==a.globalScope[Z]?c="gscope['"+Z+"']":void 0!==a.globalScope._SymbolsMap[Z]&&(c="gscope['"+a.globalScope._SymbolsMap[Z]+"']"));if(""!==c)for(d="[",f=0;f<b.arguments.length;f++)0<f&&(d+=", "),d+=D(a,b.arguments[f]);else throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(Fa){throw Fa;}return"lang.callfunc("+c+","+(d+"]")+",runtimeCtx)";case "UnaryExpression":var ea;
try{ea="lang.unary("+D(a,b.argument)+",'"+b.operator+"')"}catch(Fa){throw Fa;}return ea;case "BinaryExpression":var ha;try{ha="lang.binary("+D(a,b.left)+","+D(a,b.right)+",'"+b.operator+"')"}catch(Fa){throw Fa;}return ha;case "LogicalExpression":var K;try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(e.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||"UpdateExpression"===b.right.type)throw Error(e.nodeErrorMessage(b.right,
"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("\x26\x26"===b.operator||"||"===b.operator)K="(lang.logicalCheck("+D(a,b.left)+") "+b.operator+" lang.logicalCheck("+D(a,b.right)+"))";else throw Error(e.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}catch(Fa){throw Fa;}return K;case "ConditionalExpression":throw Error(e.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{c=[];for(d=0;d<b.elements.length;d++)"Literal"===b.elements[d].type?c.push(D(a,b.elements[d])):
c.push("lang.aCheck("+D(a,b.elements[d])+",'ArrayExpression')");g="["+c.join(",")+"]"}catch(Fa){throw Fa;}return g;case "ObjectExpression":c="lang.dictionary([";for(d=0;d<b.properties.length;d++){var h=b.properties[d],aa="Identifier"===h.key.type?"'"+h.key.name+"'":D(a,h.key),oa=D(a,h.value);0<d&&(c+=",");c+="lang.strCheck("+aa+",'ObjectExpression'),lang.aCheck("+oa+", 'ObjectExpression')"}return c+"])";case "Property":throw Error("Should not get here");case "Array":throw Error(e.nodeErrorMessage(b,
"RUNTIME","NOTSUPPORTED"));default:throw Error(e.nodeErrorMessage(b,"RUNTIME","UNREOGNISED"));}}catch(Fa){throw Fa;}}function G(a,b){var c=null,d="";if("MemberExpression"===b.argument.type)return c=D(a,b.argument.object),d=!0===b.argument.computed?D(a,b.argument.property):"'"+b.argument.property.name+"'","lang.memberupdate("+c+","+d+",'"+b.operator+"',"+b.prefix+")";c=b.argument.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lang.update(lscope, '"+c+"','"+b.operator+
"',"+b.prefix+")";if(void 0!==a.localScope._SymbolsMap[c])return"lang.update(lscope, '"+a.localScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")"}if(void 0!==a.globalScope[c])return"lang.update(gscope, '"+c+"','"+b.operator+"',"+b.prefix+")";if(void 0!==a.globalScope._SymbolsMap[c])return"lang.update(gscope, '"+a.globalScope._SymbolsMap[c]+"','"+b.operator+"',"+b.prefix+")";throw Error("Variable not recognised");}function F(a,b){var c=D(a,b.right),d=null,e="";if("MemberExpression"===b.left.type)return d=
D(a,b.left.object),e=!0===b.left.computed?D(a,b.left.property):"'"+b.left.property.name+"'","lang.assignmember("+d+","+e+",'"+b.operator+"',"+c+");";d=b.left.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[d])return"lscope['"+d+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+d+"']); ";if(void 0!==a.localScope._SymbolsMap[d])return"lscope['"+a.localScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', lscope['"+a.localScope._SymbolsMap[d]+"']); "}if(void 0!==a.globalScope[d])return"gscope['"+
d+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+d+"']); ";if(void 0!==a.globalScope._SymbolsMap[d])return"gscope['"+a.globalScope._SymbolsMap[d]+"']\x3dlang.assign("+c+",'"+b.operator+"', gscope['"+a.globalScope._SymbolsMap[d]+"']); ";throw Error("Variable not recognised");}function J(a,b){return"BlockStatement"===b.type?D(a,b):"ReturnStatement"===b.type?D(a,b):"BreakStatement"===b.type?D(a,b):"ContinueStatement"===b.type?D(a,b):"UpdateExpression"===b.type?"lastStatement \x3d "+D(a,b)+";":
"ExpressionStatement"===b.type?D(a,b):"ObjectExpression"===b.type?"lastStatement \x3d "+D(a,b)+";":D(a,b)}function E(a,b){for(var c="",d=0;d<b.body.length;d++)c="ReturnStatement"===b.body[d].type?c+(D(a,b.body[d])+" \n"):"BreakStatement"===b.body[d].type?c+(D(a,b.body[d])+" \n"):"ContinueStatement"===b.body[d].type?c+(D(a,b.body[d])+" \n"):"UpdateExpression"===b.body[d].type?c+("lastStatement \x3d "+D(a,b.body[d])+"; \n"):"ObjectExpression"===b.body[d].type?c+("lastStatement \x3d "+D(a,b.body[d])+
"; \n"):c+(D(a,b.body[d])+" \n");return c}function N(a,b){var c=null===b.init?null:D(a,b.init);c===k.voidOperation&&(c=null);b=b.id.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[b])return"lscope['"+b+"']\x3d"+c+";";if(void 0!==a.localScope._SymbolsMap[b])return"lscope['"+a.localScope._SymbolsMap[b]+"']\x3d"+c+";";var d=qa(b,a);a.localScope._SymbolsMap[b]=d;return"lscope['"+d+"']\x3d"+c+";"}if(void 0!==a.globalScope[b])return"gscope['"+b+"']\x3d"+c+";";if(void 0!==a.globalScope._SymbolsMap[b])return"gscope['"+
a.globalScope._SymbolsMap[b]+"']\x3d"+c+";";d=qa(b,a);a.globalScope._SymbolsMap[b]=d;return"gscope['"+d+"']\x3d"+c+";"}function Z(a,b,c){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&(c=!1),c&&(K++,b=a.spatialReference._arcadeCacheId=K)),a=new f({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),
void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=k.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(K++,b=K,k.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new d(a.rings,a.spatialReference,
!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=k.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(K++,b=K,k.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new d(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=
k.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(K++,b=K,k.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new l(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(e.nodeErrorMessage(c,"RUNTIME","PROPERTYNOTFOUND"));}function ia(a,b){try{var c=b.name.toLowerCase();if(null!==a.localScope){if(void 0!==a.localScope[c])return"lscope['"+c+"']";if(void 0!==a.localScope._SymbolsMap[c])return"lscope['"+
a.localScope._SymbolsMap[c]+"']"}if(void 0!==a.globalScope[c])return"gscope['"+c+"']";if(void 0!==a.globalScope._SymbolsMap[c])return"gscope['"+a.globalScope._SymbolsMap[c]+"']";throw Error(e.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(sa){throw sa;}}function S(a){return null===a?"":k.isArray(a)||k.isImmutableArray(a)?"Array":k.isDate(a)?"Date":k.isString(a)?"String":k.isBoolean(a)?"Boolean":k.isNumber(a)?"Number":a instanceof f?"Dictionary":a instanceof b?"Feature":a instanceof A?"Point":
a instanceof u?"Polygon":a instanceof n?"Polyline":a instanceof r?"Multipoint":a instanceof C?"Extent":k.isFunctionParameter(a)?"Function":a===k.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function O(a,b,c,d){try{if(k.equalityTest(b[c],d))return b[c+1];var e=b.length-c;return 1===e?b[c]:2===e?null:3===e?b[c+2]:O(a,b,c+2,d)}catch(na){throw na;}}function ha(a,b,c,d){try{if(!0===d)return b[c+1];if(3===b.length-c)return b[c+2];var e=b[c+2];if(!1===k.isBoolean(e))throw Error("WHEN needs boolean test conditions");
return ha(a,b,c+2,e)}catch(na){throw na;}}function T(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=T(a.slice(0,d),b);a=T(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function qa(a,b){b.symbols.symbolCounter++;return"_T"+b.symbols.symbolCounter.toString()}
function X(a){a.symbols.symbolCounter++;return"_Tvar"+a.symbols.symbolCounter.toString()}function M(a,b,c){var d={};a||(a={});c||(c={});d._SymbolsMap={};d.textformatting=1;d.infinity=1;d.pi=1;for(var e in b)d[e]=1;for(e in c)d[e]=1;for(e in a)d[e]=1;return d}function aa(a){console.log(a)}Object.defineProperty(a,"__esModule",{value:!0});var K=0,Y={};h.registerFunctions(Y,x);y.registerFunctions(Y,x);q.registerFunctions(Y,x);p.registerFunctions(Y,x);v.registerFunctions(Y,x);g.registerFunctions(Y,x);
Y["typeof"]=function(a,b){return x(a,b,function(a,b,c){k.pcCheck(c,1,1);a=S(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};Y.iif=function(a,b){try{return x(a,b,function(a,b,c){k.pcCheck(c,3,3);if(!1===k.isBoolean(c[0]))throw Error("IF Function must have a boolean test condition");return c[0]?c[1]:c[2]})}catch(ra){throw ra;}};Y.decode=function(a,b){try{return x(a,b,function(b,c,d){if(2>d.length)throw Error("Missing Parameters");if(2===d.length)return d[1];if(0===(d.length-
1)%2)throw Error("Must have a default value result.");return O(a,d,1,d[0])})}catch(ra){throw ra;}};Y.when=function(a,b){try{return x(a,b,function(b,c,d){if(3>d.length)throw Error("Missing Parameters");if(0===d.length%2)throw Error("Must have a default value result.");b=d[0];if(!1===k.isBoolean(b))throw Error("WHEN needs boolean test conditions");return ha(a,d,0,b)})}catch(ra){throw ra;}};Y.top=function(a,b){return x(a,b,function(a,b,c){k.pcCheck(c,2,2);if(k.isArray(c[0]))return k.toNumber(c[1])>=
c[0].length?c[0].slice(0):c[0].slice(0,k.toNumber(c[1]));if(k.isImmutableArray(c[0]))return k.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,k.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};Y.first=function(a,b){return x(a,b,function(a,b,c){k.pcCheck(c,1,1);return k.isArray(c[0])?0===c[0].length?null:c[0][0]:k.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):null})};Y.sort=function(a,b){return x(a,b,function(a,b,c){k.pcCheck(c,1,2);b=c[0];k.isImmutableArray(b)&&
(b=b.toArray());if(!1===k.isArray(b))throw Error("Illegal Argument");if(1<c.length){if(!1===k.isFunctionParameter(c[1]))throw Error("Illegal Argument");b=T(b,function(b,d){return ba.callfunc(c[1],[b,d],a)})}else{if(0===b.length)return[];for(var d={},e=0;e<b.length;e++){var f=S(b[e]);""!==f&&(d[f]=!0)}if(!0===d.Array||!0===d.Dictionary||!0===d.Feature||!0===d.Point||!0===d.Polygon||!0===d.Polyline||!0===d.Multipoint||!0===d.Extent||!0===d.Function)return b.slice(0);var e=0,f="",g;for(g in d)e++,f=
g;b=1<e||"String"===f?T(b,function(a,b){if(null===a||void 0===a||a===k.voidOperation)return null===b||void 0===b||b===k.voidOperation?0:1;if(null===b||void 0===b||b===k.voidOperation)return-1;a=k.toString(a);b=k.toString(b);return a<b?-1:a===b?0:1}):"Number"===f?T(b,function(a,b){return a-b}):"Boolean"===f?T(b,function(a,b){return a===b?0:b?-1:1}):"Date"===f?T(b,function(a,b){return b-a}):b.slice(0)}return b})};for(var ca in Y)Y[ca]=new k.NativeFunction(Y[ca]);var fa=function(){};fa.prototype=Y;a.functionHelper=
{fixSpatialReference:k.fixSpatialReference,parseArguments:function(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(D(a,b.arguments[d]));return c},standardFunction:x};a.extend=function(a){for(var b={mode:"sync",compiled:!0,functions:{},signatures:[],standardFunction:x},c=0;c<a.length;c++)a[c].registerFunctions(b);for(var d in b.functions)Y[d]=new k.NativeFunction(b.functions[d]),fa.prototype[d]=Y[d];for(c=0;c<b.signatures.length;c++)e.addFunctionDeclaration(b.signatures[c],"f")};a.executeScript=
function(a,b,c){return a(b,c)};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return e.findFieldLiterals(a,b)};a.validateScript=function(a,b){return e.validateScript(a,b,"simple")};a.referencesMember=function(a,b){return e.referencesMember(a,b)};a.referencesFunction=function(a,b){return e.referencesFunction(a,b)};var ba={error:function(a,b,c){throw Error(e.nodeErrorMessage(a,b,c));},functionDepthchecker:function(a,b){return function(){b.depthCounte++;if(64<b.depthCounter)throw Error("Exceeded maximum function depth");
var c=a.apply(this,arguments);b.depthCounte--;return c}},aCheck:function(a,b){if(k.isFunctionParameter(a))throw Error(e.nodeErrorMessage({type:b},"RUNTIME","FUNCTIONCONTEXTILLEGAL"));return a===k.voidOperation?null:a},Dictionary:f,Feature:b,dictionary:function(a){for(var b={},c=0;c<a.length;c+=2){if(k.isFunctionParameter(a[c+1]))throw Error("Illegal Argument");if(!1===k.isString(a[c]))throw Error("Illegal Argument");b[a[c].toString()]=a[c+1]===k.voidOperation?null:a[c+1]}a=new f(b);a.immutable=!1;
return a},strCheck:function(a,b){if(!1===k.isString(a))throw Error("Illegal Argument");return a},unary:function(a,b){if(k.isBoolean(a)){if("!"===b)return!a;if("-"===b)return-1*k.toNumber(a);if("+"===b)return 1*k.toNumber(a);throw Error(e.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b)return-1*k.toNumber(a);if("+"===b)return 1*k.toNumber(a);throw Error(e.nodeErrorMessage({type:"UnaryExpression"},"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));},logicalCheck:function(a){if(!1===
k.isBoolean(a))throw Error(e.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));return a},logical:function(a,b,c){if(k.isBoolean(a)&&k.isBoolean(b))switch(c){case "||":return a||b;case "\x26\x26":return a&&b;default:throw Error(e.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));}else throw Error(e.nodeErrorMessage("LogicalExpression","RUNTIME","ONLYORORAND"));},binary:function(a,b,c){switch(c){case "\x3d\x3d":return k.equalityTest(a,b);case "\x3d":return k.equalityTest(a,
b);case "!\x3d":return!k.equalityTest(a,b);case "\x3c":return k.greaterThanLessThan(a,b,c);case "\x3e":return k.greaterThanLessThan(a,b,c);case "\x3c\x3d":return k.greaterThanLessThan(a,b,c);case "\x3e\x3d":return k.greaterThanLessThan(a,b,c);case "+":return k.isString(a)||k.isString(b)?k.toString(a)+k.toString(b):k.toNumber(a)+k.toNumber(b);case "-":return k.toNumber(a)-k.toNumber(b);case "*":return k.toNumber(a)*k.toNumber(b);case "/":return k.toNumber(a)/k.toNumber(b);case "%":return k.toNumber(a)%
k.toNumber(b);default:throw Error(e.nodeErrorMessage({type:"BinaryExpression"},"RUNTIME","OPERATORNOTRECOGNISED"));}},assign:function(a,b,c){switch(b){case "\x3d":return a===k.voidOperation?null:a;case "/\x3d":return k.toNumber(c)/k.toNumber(a);case "*\x3d":return k.toNumber(c)*k.toNumber(a);case "-\x3d":return k.toNumber(c)-k.toNumber(a);case "+\x3d":return k.isString(c)||k.isString(a)?k.toString(c)+k.toString(a):k.toNumber(c)+k.toNumber(a);case "%\x3d":return k.toNumber(c)%k.toNumber(a);default:throw Error(e.nodeErrorMessage("AssignmentExpression",
"RUNTIME","OPERATORNOTRECOGNISED"));}},update:function(a,b,c,d){var e=k.toNumber(a[b]);a[b]="++"===c?e+1:e-1;return!1===d?e:"++"===c?e+1:e-1},memberupdate:function(a,c,d,e){var g;if(k.isArray(a))if(k.isNumber(c)){0>c&&(c=a.length+c);if(0>c||c>=a.length)throw Error("Assignment outside of array bounds");g=k.toNumber(a[c]);a[c]="++"===d?g+1:g-1}else throw Error("Invalid Parameter");else if(a instanceof f){if(!1===k.isString(c))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(c))g=
k.toNumber(a.field(c)),a.setField(c,"++"===d?g+1:g-1);else throw Error("Invalid Parameter");}else if(a instanceof b){if(!1===k.isString(c))throw Error("Feature accessor must be a string");if(!0===a.hasField(c))g=k.toNumber(a.field(c)),a.setField(c,"++"===d?g+1:g-1);else throw Error("Invalid Parameter");}else{if(k.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}return!1===e?g:"++"===d?g+1:g-1},assignmember:function(a,c,d,e){if(k.isArray(a))if(k.isNumber(c)){0>
c&&(c=a.length+c);if(0>c||c>a.length)throw Error("Assignment outside of array bounds");if(c===a.length&&"\x3d"!==d)throw Error("Invalid Parameter");a[c]=this.assign(e,d,a[c])}else throw Error("Invalid Parameter");else if(a instanceof f){if(!1===k.isString(c))throw Error("Dictionary accessor must be a string");if(!0===a.hasField(c))a.setField(c,this.assign(e,d,a.field(c)));else{if("\x3d"!==d)throw Error("Invalid Parameter");a.setField(c,this.assign(e,d,null))}}else if(a instanceof b){if(!1===k.isString(c))throw Error("Feature accessor must be a string");
if(!0===a.hasField(c))a.setField(c,this.assign(e,d,a.field(c)));else{if("\x3d"!==d)throw Error("Invalid Parameter");a.setField(c,this.assign(e,d,null))}}else{if(k.isImmutableArray(a))throw Error("Array is Immutable");throw Error("Invalid Parameter");}},member:function(a,c){if(null===a)throw Error(e.nodeErrorMessage("MemberExpression","RUNTIME","NOTFOUND"));if(a instanceof f||a instanceof b){if(k.isString(c))return a.field(c)}else if(a instanceof B){if(k.isString(c))return Z(a,c,"MemberExpression")}else if(k.isArray(a)){if(k.isNumber(c)&&
isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(e.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[c]}}else if(k.isString(a)){if(k.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length+c);if(c>=a.length||0>c)throw Error(e.nodeErrorMessage("MemberExpression","RUNTIME","OUTOFBOUNDS"));return a[c]}}else if(k.isImmutableArray(a)&&k.isNumber(c)&&isFinite(c)&&Math.floor(c)===c){0>c&&(c=a.length()+c);if(c>=a.length()||0>c)throw Error(e.nodeErrorMessage("MemberExpression",
"RUNTIME","OUTOFBOUNDS"));return a.get(c)}throw Error(e.nodeErrorMessage("MemberExpression","RUNTIME","INVALIDTYPE"));},callfunc:function(a,b,c){return a instanceof k.NativeFunction?a.fn(c,b):a instanceof k.SizzleFunction?a.fn.apply(this,b):a.apply(this,b)}};a.compileScript=function(a,c){void 0===c&&(c=null);null===c&&(c={vars:{},customfunctions:{}});c={globalScope:M(c.vars,Y,c.customfunctions),localScope:null,console:aa,symbols:{symbolCounter:0}};a=D(c,a.body[0].body);""===a&&(a="lc.voidOperation;");
c={lc:k,lang:ba,postProcess:function(a){a instanceof k.ReturnResult&&(a=a.value);a instanceof k.ImplicitResult&&(a=a.value);a===k.voidOperation&&(a=null);if(a===k.breakResult)throw Error("Cannot return BREAK");if(a===k.continueResult)throw Error("Cannot return CONTINUE");if(k.isFunctionParameter(a))throw Error("Cannot return FUNCTION");return a},prepare:function(a,c){c||(c=new t({wkid:102100}));var d=a.vars,e=a.customfunctions,g=new fa;d||(d={});e||(e={});var h=new f({newline:"\n",tab:"\t",singlequote:"'",
doublequote:'"',forwardslash:"/",backwardslash:"\\"});h.immutable=!1;g._SymbolsMap={textformatting:1,infinity:1,pi:1};g.textformatting=h;g.infinity=Number.POSITIVE_INFINITY;g.pi=Math.PI;for(var k in e)g[k]=e[k],g._SymbolsMap[k]=1;for(k in d)g._SymbolsMap[k]=1,g[k]=d[k]&&"esri.Graphic"===d[k].declaredClass?b.createFromGraphic(d[k]):d[k];return{spatialReference:c,globalScope:g,localScope:null,console:a.console?a.console:aa,symbols:{symbolCounter:0},depthCounter:1,applicationCache:void 0===a.applicationCache?
null:a.applicationCache}}};return(new Function("context","spatialReference","var runtimeCtx\x3dthis.prepare(context, spatialReference);\n var lc \x3d this.lc;  var lang \x3d this.lang; var gscope\x3druntimeCtx.globalScope; \n function mainBody() {\n var lastStatement\x3dlc.voidOperation;\n "+a+"\n return lastStatement; } \n return this.postProcess(mainBody());")).bind(c)}})},"esri/arcade/Dictionary":function(){define(["require","exports","./ImmutableArray","./languageUtils","../geometry/Geometry"],
function(c,a,f,b,d){return function(){function a(b){this.attributes=null;this.plain=!1;this.immutable=!0;this.attributes=b instanceof a?b.attributes:void 0===b?{}:null===b?{}:b}a.prototype.field=function(a){var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];throw Error("Field not Found");};a.prototype.setField=function(a,b){if(this.immutable)throw Error("Dictionary is Immutable");var c=a.toLowerCase();if(void 0===
this.attributes[a])for(var d in this.attributes)if(d.toLowerCase()===c){this.attributes[d]=b;return}this.attributes[a]=b};a.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return!1};a.prototype.keys=function(){var a=[],b;for(b in this.attributes)a.push(b);return a=a.sort()};a.prototype.castToText=function(){var a="",c;for(c in this.attributes){""!==a&&(a+=",");var h=this.attributes[c];null==h?
a+=JSON.stringify(c)+":null":b.isBoolean(h)||b.isNumber(h)||b.isString(h)?a+=JSON.stringify(c)+":"+JSON.stringify(h):h instanceof d?a+=JSON.stringify(c)+":"+b.toStringExplicit(h):h instanceof f?a+=JSON.stringify(c)+":"+b.toStringExplicit(h):h instanceof Array?a+=JSON.stringify(c)+":"+b.toStringExplicit(h):h instanceof Date?a+=JSON.stringify(c)+":"+JSON.stringify(h):null!==h&&"object"===typeof h&&void 0!==h.castToText&&(a+=JSON.stringify(c)+":"+h.castToText())}return"{"+a+"}"};return a}()})},"esri/arcade/ImmutableArray":function(){define(["require",
"exports"],function(c,a){return function(){function a(a){void 0===a&&(a=[]);this._elements=a}a.prototype.length=function(){return this._elements.length};a.prototype.get=function(a){return this._elements[a]};a.prototype.toArray=function(){for(var a=[],c=0;c<this.length();c++)a.push(this.get(c));return a};return a}()})},"esri/arcade/languageUtils":function(){define("require exports dojo/number ../kernel ../moment ./FunctionWrapper ./ImmutableArray ./ImmutablePathArray ./ImmutablePointArray ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C){function B(a,b,c){if(""===b||null===b||void 0===b||b===c||b===c)return a;do a=a.replace(b,c);while(-1!==a.indexOf(b));return a}function r(a){return a instanceof qa||a instanceof l||a instanceof X}function A(a){return"string"===typeof a||a instanceof String}function u(a){return"boolean"===typeof a}function n(a){return"number"===typeof a}function t(a){return a instanceof Array}function x(a){return a instanceof Date}function D(a,b){if(!1===isNaN(a)){if(void 0===
b||null===b||""===b)return a.toString();b=B(b,"\u2030","");b=B(b,"\u00a4","");return f.format(a,{pattern:b})}return a.toString()}function G(a,b){a=d(a);return void 0===b||null===b||""===b?a.format():a.format(F(b))}function F(a){return a.replace(/(LTS)|L|l/g,function(a){return"["+a+"]"})}function J(a,b,c){switch(c){case "\x3e":return a>b;case "\x3c":return a<b;case "\x3e\x3d":return a>=b;case "\x3c\x3d":return a<=b}return!1}function E(b,c){if(b===c||null===b&&c===a.voidOperation||null===c&&b===a.voidOperation)return!0;
if(x(b)&&x(c))return b.getTime()===c.getTime();if(b instanceof e||b instanceof h)return b.equalityTest(c);if(b instanceof v&&c instanceof v){var d=void 0,g=void 0;a.isVersion4?(d=b.cache._arcadeCacheId,g=c.cache._arcadeCacheId):(d=b.getCacheValue("_arcadeCacheId"),g=c.getCacheValue("_arcadeCacheId"));if(void 0!==d&&null!==d)return d===g}return void 0!==b&&void 0!==c&&null!==b&&null!==c&&"object"===typeof b&&"object"===typeof c&&(b._arcadeCacheId===c._arcadeCacheId&&void 0!==b._arcadeCacheId&&null!==
b._arcadeCacheId||b._underlyingGraphic===c._underlyingGraphic&&void 0!==b._underlyingGraphic&&null!==b._underlyingGraphic)?!0:!1}function N(a,b){if(A(a))return a;if(null===a)return"";if(n(a))return D(a,b);if(u(a))return a.toString();if(x(a))return G(a,b);if(a instanceof g)return JSON.stringify(a.toJSON());if(t(a)){b=[];for(var c=0;c<a.length;c++)b[c]=ia(a[c]);return"["+b.join(",")+"]"}if(a instanceof k){b=[];for(c=0;c<a.length();c++)b[c]=ia(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===
typeof a&&void 0!==a.castToText?a.castToText():r(a)?"object, Function":""}function Z(a,b){if(A(a))return a;if(null===a)return"";if(n(a))return D(a,b);if(u(a))return a.toString();if(x(a))return G(a,b);if(a instanceof g)return a instanceof p?'{"xmin":'+a.xmin.toString()+',"ymin":'+a.ymin.toString()+","+(a.hasZ?'"zmin":'+a.zmin.toString()+",":"")+(a.hasM?'"mmin":'+a.mmin.toString()+",":"")+'"xmax":'+a.xmax.toString()+',"ymax":'+a.ymax.toString()+","+(a.hasZ?'"zmax":'+a.zmax.toString()+",":"")+(a.hasM?
'"mmax":'+a.mmax.toString()+",":"")+'"spatialReference":'+ha(a.spatialReference)+"}":ha(a.toJSON(),function(a,b){return a.key===b.key?0:"spatialReference"===a.key?1:"spatialReference"===b.key||a.key<b.key?-1:a.key>b.key?1:0});if(t(a)){b=[];for(var c=0;c<a.length;c++)b[c]=ia(a[c]);return"["+b.join(",")+"]"}if(a instanceof k){b=[];for(c=0;c<a.length();c++)b[c]=ia(a.get(c));return"["+b.join(",")+"]"}return null!==a&&"object"===typeof a&&void 0!==a.castToText?a.castToText():r(a)?"object, Function":""}
function ia(a){if(null!==a){if(u(a)||n(a)||A(a))return JSON.stringify(a);if(a instanceof g||a instanceof k||a instanceof Array)return Z(a);if(a instanceof Date)return JSON.stringify(G(a,""));if(null!==a&&"object"===typeof a&&void 0!==a.castToText)return a.castToText()}return"null"}function S(b,c){return n(b)?b:null===b||""===b?0:x(b)?NaN:u(b)?b?1:0:t(b)||""===b||void 0===b?NaN:void 0!==c&&A(b)?(c=B(c,"\u2030",""),c=B(c,"\u00a4",""),f.parse(b,{pattern:c})):b===a.voidOperation?0:Number(b)}function O(a,
b){var c;b.fields.some(function(b){b.name===a&&(c=b.domain);return!!c});return c}function ha(a,b){b||(b={});"function"===typeof b&&(b={cmp:b});var c="boolean"===typeof b.cycles?b.cycles:!1,d=b.cmp&&function(a){return function(b){return function(c,d){return a({key:c,value:b[c]},{key:d,value:b[d]})}}}(b.cmp),e=[];return function ba(a){a&&a.toJSON&&"function"===typeof a.toJSON&&(a=a.toJSON());if(void 0!==a){if("number"===typeof a)return isFinite(a)?""+a:"null";if("object"!==typeof a)return JSON.stringify(a);
var b,g;if(Array.isArray(a)){g="[";for(b=0;b<a.length;b++)b&&(g+=","),g+=ba(a[b])||"null";return g+"]"}if(null===a)return"null";if(-1!==e.indexOf(a)){if(c)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var f=e.push(a)-1,h=Object.keys(a).sort(d&&d(a));g="";for(b=0;b<h.length;b++){var k=h[b],n=ba(a[k]);n&&(g&&(g+=","),g+=JSON.stringify(k)+":"+n)}e.splice(f,1);return"{"+g+"}"}}(a)}Object.defineProperty(a,"__esModule",{value:!0});c=function(){return function(a){this.value=
a}}();var T=function(){return function(a){this.value=a}}(),qa=function(){return function(a){this.fn=a}}(),X=function(){return function(a){this.fn=a}}();a.NativeFunction=qa;a.ImplicitResult=T;a.ReturnResult=c;a.SizzleFunction=X;a.isVersion4=0===b.version.indexOf("4.");a.voidOperation={type:"VOID"};a.breakResult={type:"BREAK"};a.continueResult={type:"CONTINUE"};a.multiReplace=B;a.isFunctionParameter=r;a.isSimpleType=function(b){return A(b)||n(b)||x(b)||u(b)||null===b||b===a.voidOperation||"number"===
typeof b?!0:!1};a.defaultUndefined=function(a,b){return void 0===a?b:a};a.isString=A;a.isBoolean=u;a.isNumber=n;a.isArray=t;a.isFeatureCursor=function(a){return a&&void 0!==a.isFeatureCursor};a.isImmutableArray=function(a){return a instanceof k};a.isDate=x;a.pcCheck=function(a,b,c){if(a.length<b||a.length>c)throw Error("Function called with wrong number of Parameters");};a.generateUUID=function(){var a=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(b){var c=
(a+16*Math.random())%16|0;a=Math.floor(a/16);return("x"===b?c:c&3|8).toString(16)})};a.formatNumber=D;a.formatDate=G;a.standardiseDateFormat=F;a.greaterThanLessThan=function(b,c,d){if(null===b){if(null===c||c===a.voidOperation)return J(null,null,d);if(n(c))return J(0,c,d);if(A(c)||u(c))return J(0,S(c),d);if(x(c))return J(0,c.getTime(),d)}if(b===a.voidOperation){if(null===c||c===a.voidOperation)return J(null,null,d);if(n(c))return J(0,c,d);if(A(c)||u(c))return J(0,S(c),d);if(x(c))return J(0,c.getTime(),
d)}else if(n(b)){if(n(c))return J(b,c,d);if(u(c))return J(b,S(c),d);if(null===c||c===a.voidOperation)return J(b,0,d);if(A(c))return J(b,S(c),d);if(x(c))return J(b,c.getTime(),d)}else if(A(b)){if(A(c))return J(N(b),N(c),d);if(x(c))return J(S(b),c.getTime(),d);if(n(c))return J(S(b),c,d);if(null===c||c===a.voidOperation)return J(S(b),0,d);if(u(c))return J(S(b),S(c),d)}else if(x(b)){if(x(c))return J(b,c,d);if(null===c||c===a.voidOperation)return J(b.getTime(),0,d);if(n(c))return J(b.getTime(),c,d);if(u(c)||
A(c))return J(b.getTime(),S(c),d)}else if(u(b)){if(u(c))return J(b,c,d);if(n(c))return J(S(b),S(c),d);if(x(c))return J(S(b),c.getTime(),d);if(null===c||c===a.voidOperation)return J(S(b),0,d);if(A(c))return J(S(b),S(c),d)}return!E(b,c)||"\x3c\x3d"!==d&&"\x3e\x3d"!==d?!1:!0};a.equalityTest=E;a.toString=N;a.toNumberArray=function(a){var b=[];if(!1===t(a))return null;if(a instanceof k){for(var c=0;c<a.length();c++)b[c]=S(a.get(c));return b}for(c=0;c<a.length;c++)b[c]=S(a[c]);return b};a.toStringExplicit=
Z;a.toNumber=S;a.toDate=function(a,b){return x(a)?a:A(a)&&(a=d(a,[void 0===b||null===b||""===b?d.ISO_8601:b]),a.isValid())?a.toDate():null};a.toDateM=function(a,b){return x(a)?d(a):A(a)&&(a=d(a,[void 0===b||null===b||""===b?d.ISO_8601:b]),a.isValid())?a:null};a.toBoolean=function(a){if(u(a))return a;if(A(a)){if(a=a.toLowerCase(),"true"===a)return!0}else if(n(a))return 0===a||isNaN(a)?!1:!0;return!1};a.fixSpatialReference=function(a,b){if(null===a||void 0===a)return null;if(null===a.spatialReference||
void 0===a.spatialReference)a.spatialReference=b;return a};a.fixNullGeometry=function(a){return null===a?null:a instanceof v?"NaN"===a.x||null===a.x||isNaN(a.x)?null:a:a instanceof y?0===a.rings.length?null:a:a instanceof C?0===a.paths.length?null:a:a instanceof q?0===a.points.length?null:a:a instanceof p?"NaN"===a.xmin||null===a.xmin||isNaN(a.xmin)?null:a:null};a.getDomainValue=function(a,b){if(!a||!a.domain)return null;var c=null;b="string"===a.field.type||"esriFieldTypeString"===a.field.type?N(b):
S(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=a.domain.codedValues[d];e.code===b&&(c=e)}return null===c?null:c.name};a.getDomainCode=function(a,b){if(!a||!a.domain)return null;var c=null;b=N(b);for(var d=0;d<a.domain.codedValues.length;d++){var e=a.domain.codedValues[d];e.name===b&&(c=e)}return null===c?null:c.code};a.getDomain=function(a,b,c,d){void 0===c&&(c=null);if(!b||!b.fields)return null;for(var e=null,g=0;g<b.fields.length;g++){var f=b.fields[g];f.name.toLowerCase()===a.toString().toLowerCase()&&
(e=f)}if(null===e)return null;var h,k;d||(d=c&&b.typeIdField&&c._field(b.typeIdField));null!=d&&b.types.some(function(a){return a.id===d?((h=a.domains&&a.domains[e.name])&&"inherited"===h.type&&(h=O(e.name,b),k=!0),!0):!1});k||h||(h=O(a,b));return{field:e,domain:h}};a.stableStringify=ha;a.autoCastFeatureToGeometry=function(a){if(null===a)return null;for(var b=[],c=0;c<a.length;c++){var d=a[c];d&&d.declaredClass&&"esri.arcade.Feature"===d.declaredClass?b.push(d.geometry()):b.push(d)}return b}})},"esri/arcade/FunctionWrapper":function(){define(["require",
"exports"],function(c,a){return function(){return function(a,b){this.context=this.definition=null;this.definition=a;this.context=b}}()})},"esri/arcade/ImmutablePathArray":function(){define(["require","exports","../core/tsSupport/extendsHelper","./ImmutableArray","./ImmutablePointArray"],function(c,a,f,b,d){return function(a){function b(b,c,d,g,f){b=a.call(this,b)||this;b._lazyPath=[];b._hasZ=!1;b._hasM=!1;b._hasZ=d;b._hasM=g;b._spRef=c;b._cacheId=f;return b}f(b,a);b.prototype.get=function(a){if(void 0===
this._lazyPath[a]){var b=this._elements[a];if(void 0===b)return;this._lazyPath[a]=new d(b,this._spRef,this._hasZ,this._hasM,this._cacheId,a)}return this._lazyPath[a]};b.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof b?!1:a.getUniqueHash()===this.getUniqueHash()};b.prototype.getUniqueHash=function(){return this._cacheId.toString()};return b}(b)})},"esri/arcade/ImmutablePointArray":function(){define("require exports ../core/tsSupport/extendsHelper ../kernel ./ImmutableArray ../geometry/Point".split(" "),
function(c,a,f,b,d,l){var k=0===b.version.indexOf("4.");return function(a){function b(b,c,d,e,f,h){b=a.call(this,b)||this;b._lazyPt=[];b._hasZ=!1;b._hasM=!1;b._spRef=c;b._hasZ=d;b._hasM=e;b._cacheId=f;b._partId=h;return b}f(b,a);b.prototype.get=function(a){if(void 0===this._lazyPt[a]){var b=this._elements[a];if(void 0===b)return;var c=this._hasZ,d=this._hasM,e=null,e=c&&!d?new l(b[0],b[1],b[2],void 0,this._spRef):d&&c?new l(b[0],b[1],void 0,b[2],this._spRef):c&&d?new l(b[0],b[1],b[2],b[3],this._spRef):
new l(b[0],b[1],this._spRef);k?e.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString():e.setCacheValue("_arcadeCacheId",this._cacheId.toString()+"-"+this._partId.toString()+"-"+a.toString());this._lazyPt[a]=e}return this._lazyPt[a]};b.prototype.equalityTest=function(a){return a===this?!0:null===a||!1===a instanceof b?!1:a.getUniqueHash()===this.getUniqueHash()};b.prototype.getUniqueHash=function(){return this._cacheId.toString()+"-"+this._partId.toString()};return b}(d)})},
"esri/arcade/Feature":function(){define("require exports ../core/tsSupport/assignHelper ./Dictionary ./ImmutableArray ./languageUtils ../geometry/Geometry ../geometry/Point ../geometry/support/jsonUtils".split(" "),function(c,a,f,b,d,l,k,e,h){return function(){function a(){this.declaredClass="esri.arcade.Feature";this._layer=this.attributes=this._geometry=null;this.immutable=this.immutable=this._datesfixed=!0}a.createFromGraphic=function(b){var c=new a;c._geometry=b.geometry;c.attributes=void 0===
b.attributes?{}:null===b.attributes?{}:b.attributes;b._sourceLayer?(c._layer=b._sourceLayer,c._datesfixed=!1):b._layer?(c._layer=b._layer,c._datesfixed=!1):b.layer&&(c._layer=b.layer,c._datesfixed=!1);return c};a.createFromArcadeFeature=function(b){var c=new a;c._datesfixed=b._datesfixed;c.attributes=b.attributes;c._geometry=b._geometry;b._layer&&(c._layer=b._layer);return c};a.createFromArcadeDictionary=function(c){var d=new a;d.attributes=c.field("attributes");null!==d.attributes?d.attributes instanceof
b?(d.attributes=d.attributes.attributes,null===d.attributes&&(d.attributes={})):d.attributes={}:d.attributes={};d._geometry=c.field("geometry");null!==d._geometry&&(d._geometry instanceof b?d._geometry=a.parseGeometryFromDictionary(d._geometry):d._geometry instanceof k||(d._geometry=null));return d};a.createFromGraphicLikeObject=function(b,c,d){void 0===d&&(d=null);var e=new a;null===c&&(c={});e.attributes=c;e._geometry=b;e._layer=d;e._layer&&(e._datesfixed=!1);return e};a.prototype.repurposeFromGraphicLikeObject=
function(a,b,c){void 0===c&&(c=null);null===b&&(b={});this.attributes=b;this._geometry=a;this._datesfixed=(this._layer=c)?!1:!0};a.prototype.castToText=function(){var a="",b;for(b in this.attributes){""!==a&&(a+=",");var c=this.attributes[b];null==c?a+=JSON.stringify(b)+":null":l.isBoolean(c)||l.isNumber(c)||l.isString(c)?a+=JSON.stringify(b)+":"+JSON.stringify(c):c instanceof k?a+=JSON.stringify(b)+":"+l.toStringExplicit(c):c instanceof d?a+=JSON.stringify(b)+":"+l.toStringExplicit(c):c instanceof
Array?a+=JSON.stringify(b)+":"+l.toStringExplicit(c):c instanceof Date?a+=JSON.stringify(b)+":"+JSON.stringify(c):null!==c&&"object"===typeof c&&void 0!==c.castToText&&(a+=JSON.stringify(b)+":"+c.castToText())}return'{"geometry":'+(null===this.geometry()?"null":l.toStringExplicit(this.geometry()))+',"attributes":{'+a+"}}"};a.prototype._fixDates=function(){for(var a=[],b=0;b<this._layer.fields.length;b++){var c=this._layer.fields[b];"date"!==c.type&&"esriFieldTypeDate"!==c.type||a.push(c.name)}0<a.length&&
this._fixDateFields(a);this._datesfixed=!0};a.prototype._fixDateFields=function(a){this.attributes=f({},this.attributes);for(var b=0;b<a.length;b++){var c=this.attributes[a[b]];if(null!==c)if(void 0===c)for(var d in this.attributes){if(d.toLowerCase()===a[b]){c=this.attributes[d];null===c||c instanceof Date||(this.attributes[d]=new Date(c));break}}else c instanceof Date||(this.attributes[a[b]]=new Date(c))}};a.prototype.geometry=function(){return null===this._geometry||this._geometry instanceof k?
this._geometry:this._geometry=h.fromJSON(this._geometry)};a.prototype.field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];if(this._hasFieldDefinition(b))return null;throw Error("Field not Found");};a.prototype._hasFieldDefinition=function(a){if(null===this._layer)return!1;for(var b=0;b<this._layer.fields.length;b++)if(this._layer.fields[b].name.toLowerCase()===
a)return!0;return!1};a.prototype._field=function(a){!1===this._datesfixed&&this._fixDates();var b=a.toLowerCase();a=this.attributes[a];if(void 0!==a)return a;for(var c in this.attributes)if(c.toLowerCase()===b)return this.attributes[c];return null};a.prototype.setField=function(a,b){if(this.immutable)throw Error("Feature is Immutable");if(!1===l.isSimpleType(b))throw Error("Illegal Value Assignment to Feature");var c=a.toLowerCase();if(void 0===this.attributes[a])for(var d in this.attributes)if(d.toLowerCase()===
c){this.attributes[d]=b;return}this.attributes[a]=b};a.prototype.hasField=function(a){var b=a.toLowerCase();if(void 0!==this.attributes[a])return!0;for(var c in this.attributes)if(c.toLowerCase()===b)return!0;return this._hasFieldDefinition(b)?!0:!1};a.prototype.keys=function(){var a=[],b={},c;for(c in this.attributes)a.push(c),b[c.toLowerCase()]=1;if(null!==this._layer)for(c=0;c<this._layer.fields.length;c++){var d=this._layer.fields[c];1!==b[d.name.toLowerCase()]&&a.push(d.name)}return a=a.sort()};
a.parseGeometryFromDictionary=function(b){b=a.convertDictionaryToJson(b,!0);void 0!==b.spatialreference&&(b.spatialReference=b.spatialreference,delete b.spatialreference);void 0!==b.rings&&(b.rings=this.fixPathArrays(b.rings,!0===b.hasZ,!0===b.hasM));void 0!==b.paths&&(b.paths=this.fixPathArrays(b.paths,!0===b.hasZ,!0===b.hasM));void 0!==b.points&&(b.points=this.fixPointArrays(b.points,!0===b.hasZ,!0===b.hasM));return h.fromJSON(b)};a.fixPathArrays=function(a,b,c){var e=[];if(a instanceof Array)for(var f=
0;f<a.length;f++)e.push(this.fixPointArrays(a[f],b,c));else if(a instanceof d)for(f=0;f<a.length();f++)e.push(this.fixPointArrays(a.get(f),b,c));return e};a.fixPointArrays=function(a,b,c){var f=[];if(a instanceof Array)for(var g=0;g<a.length;g++){var h=a[g];h instanceof e?b&&c?f.push([h.x,h.y,h.z,h.m]):b?f.push([h.x,h.y,h.z]):c?f.push([h.x,h.y,h.m]):f.push([h.x,h.y]):f.push(h)}else if(a instanceof d)for(g=0;g<a.length();g++)h=a.get(g),h instanceof e?b&&c?f.push([h.x,h.y,h.z,h.m]):b?f.push([h.x,h.y,
h.z]):c?f.push([h.x,h.y,h.m]):f.push([h.x,h.y]):f.push(h);return f};a.convertDictionaryToJson=function(c,d){void 0===d&&(d=!1);var e={},f;for(f in c.attributes){var g=c.attributes[f];g instanceof b&&(g=a.convertDictionaryToJson(g));d?e[f.toLowerCase()]=g:e[f]=g}return e};a.parseAttributesFromDictionary=function(a){var b={},c;for(c in a.attributes){var d=a.attributes[c];if(l.isSimpleType(d))b[c]=d;else throw Error("Illegal Argument");}return b};a.fromJson=function(b){var c=null;null!==b.geometry&&
void 0!==b.geometry&&(c=h.fromJSON(b.geometry));var d={};if(null!==b.attributes&&void 0!==b.attributes)for(var e in b.attributes){var f=b.attributes[e];if(l.isString(f)||l.isNumber(f)||l.isBoolean(f)||l.isDate(f))d[e]=f;else throw Error("Illegal Argument");}return a.createFromGraphicLikeObject(c,d,null)};a.prototype.domainValueLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;c=l.getDomain(a,this._layer,this,c);if(void 0===b)try{b=this.field(a)}catch(y){return null}return l.getDomainValue(c,
b)};a.prototype.domainCodeLookup=function(a,b,c){if(null===this._layer||!this._layer.fields)return null;a=l.getDomain(a,this._layer,this,c);return l.getDomainCode(a,b)};return a}()})},"esri/arcade/treeAnalysis":function(){define(["require","exports"],function(c,a){function f(a,b,c,d){return"0"!==a.min&&c.length<Number(a.min)||"*"!==a.max&&c.length>Number(a.max)?-2:1}function b(a,b,c){if(null!==c.localScope&&void 0!==c.localScope[a.toLowerCase()]){var d=c.localScope[a.toLowerCase()];if("FormulaFunction"===
d.type||"any"===d.type)return void 0===d.signature&&(d.signature={min:"0",max:"*"}),f(d.signature,a,b,c)}return void 0!==c.globalScope[a.toLowerCase()]&&(d=c.globalScope[a.toLowerCase()],"FormulaFunction"===d.type||"any"===d.type)?(void 0===d.signature&&(d.signature={min:"0",max:"*"}),f(d.signature,a,b,c)):-1}function d(a,b){void 0===b&&(b=!0);var c=v(a,"SYNTAX","UNREOGNISED");try{switch(a.type){case "VariableDeclarator":return null!==a.init&&"FunctionExpression"===a.init.type?v(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"):
"Identifier"!==a.id.type?v(a,"SYNTAX","VARIABLEMUSTHAVEIDENTIFIER"):null!==a.init?d(a.init,!1):"";case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)if(c=d(a.declarations[e],b),""!==c)return c;return"";case "ForInStatement":c=d(a.left,b);if(""!==c)break;if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return v(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return v(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return v(a,"SYNTAX",
"LEFTNOTVAR");c=d(a.right,b);if(""!==c)break;c=d(a.body,b);if(""!==c)break;return"";case "ForStatement":if(null!==a.test&&(c=d(a.test,b),""!==c))break;if(null!==a.init&&(c=d(a.init,b),""!==c))break;if(null!==a.update&&(c=d(a.update,b),""!==c))break;if(null!==a.body&&(c=d(a.body,b),""!==c))break;return"";case "ContinueStatement":return"";case "EmptyStatement":return"";case "BreakStatement":return"";case "IfStatement":c=d(a.test,b);if(""!==c)break;if(null!==a.consequent&&(c=d(a.consequent,!1),""!==
c))break;if(null!==a.alternate&&(c=d(a.alternate,!1),""!==c))break;return"";case "BlockStatement":for(var f=[],e=0;e<a.body.length;e++)"EmptyStatement"!==a.body[e].type&&f.push(a.body[e]);a.body=f;for(e=0;e<a.body.length;e++)if(c=d(a.body[e],b),""!==c)return c;return"";case "FunctionDeclaration":return!1===b?v(a,"SYNTAX","GLOBALFUNCTIONSONLY"):"Identifier"!==a.id.type?v(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"):d(a.body,!1);case "ReturnStatement":return null!==a.argument?d(a.argument,b):"";case "UpdateExpression":return"Identifier"!==
a.argument.type&&"MemberExpression"!==a.argument.type?v(a,"SYNTAX","ASSIGNMENTTOVARSONLY"):d(a.argument,b);case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return v(a,"SYNTAX","ASSIGNMENTTOVARSONLY");c=d(a.left,b);if(""!==c)break;switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:return v(a,"SYNTAX","OPERATORNOTRECOGNISED")}return d(a.right,!1);case "ExpressionStatement":return d(a.expression,!1);
case "Identifier":c="";break;case "MemberExpression":c=d(a.object,b);if(""!==c)break;return!0===a.computed?d(a.property,b):"";case "Literal":return"";case "ThisExpression":return v(a,"SYNTAX","NOTSUPPORTED");case "CallExpression":if("Identifier"!==a.callee.type)return v(a,"SYNTAX","ONLYNODESSUPPORTED");c="";for(e=0;e<a.arguments.length;e++)if(c=d(a.arguments[e],b),""!==c)return c;return"";case "UnaryExpression":c=d(a.argument,b);break;case "BinaryExpression":c=d(a.left,b);if(""!==c)break;c=d(a.right,
b);if(""!==c)break;switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:return v(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "LogicalExpression":c=d(a.left,b);if(""!==c)break;c=d(a.right);if(""!==c)break;switch(a.operator){case "\x26\x26":case "||":break;default:return v(a,"SYNTAX","OPERATORNOTRECOGNISED")}return"";case "ConditionalExpression":return v(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":c=
"";for(e=0;e<a.elements.length&&(c=d(a.elements[e],b),""===c);e++);break;case "Array":return v(a,"SYNTAX","NOTSUPPORTED");case "ObjectExpression":c="";for(e=0;e<a.properties.length&&(c="",null!==a.properties[e].key&&("Literal"!==a.properties[e].key.type&&"Identifier"!==a.properties[e].key.type&&(c=v(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[e].key.type&&(f=a.properties[e].key.value,"string"===typeof f||f instanceof String||(c=v(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")))),
""===c&&(c=d(a.properties[e],b)),""===c);e++);break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return v(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(c=d(a.key,b),""!==c))break;c=d(a.value,b)}return c}catch(D){throw D;}}function l(a,c){var d=v(a,"SYNTAX","UNREOGNISED"),e=null,f="";try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type)return v(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR");a.id.name.toLowerCase();var h=null===
a.init?"":l(a.init,c);if(""!==h)return h;null===c.localScope?c.globalScope[a.id.name.toLowerCase()]={type:"any"}:c.localScope[a.id.name.toLowerCase()]={type:"any"};return"";case "FunctionDeclaration":e=p(a.id.name.toLowerCase(),a,c);f=g(a,c);if(""!==f)return f;if(null!==c.localScope)return v(a,"SYNTAX","GLOBALFUNCTIONSONLY");e.isnative=!1;c.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[e]};return"";case "VariableDeclaration":for(var d="",k=0;k<a.declarations.length&&(d=l(a.declarations[k],
c),""===d);k++);break;case "IfStatement":d=l(a.test,c);if(""!==d)break;if("AssignmentExpression"===a.test.type||"UpdateExpression"===a.test.type)return v(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");if(null!==a.consequent&&(d=l(a.consequent,c),""!==d))break;if(null!==a.alternate&&(d=l(a.alternate,c),""!==d))break;return"";case "EmptyStatement":return"";case "BlockStatement":for(k=0;k<a.body.length;k++)if(d=l(a.body[k],c),""!==d)return d;return"";case "ReturnStatement":return null!==a.argument?
l(a.argument,c):"";case "ForInStatement":if("VariableDeclaration"===a.left.type){if(1<a.left.declarations.length)return v(a,"SYNTAX","ONLY1VAR");if(null!==a.left.declarations[0].init)return v(a,"SYNTAX","CANNOTDECLAREVAL")}else if("Identifier"!==a.left.type)return v(a,"SYNTAX","LEFTNOTVAR");d=l(a.left,c);if(""!==d)break;d=l(a.right,c);if(""!==d)break;d=l(a.body,c);if(""!==d)break;return"";case "ForStatement":if(null!==a.init&&(d=l(a.init,c),""!==d))break;if(null!==a.test&&(d=l(a.test,c),""!==d))break;
if(null!==a.body&&(d=l(a.body,c),""!==d))break;if(null!==a.update&&(d=l(a.update,c),""!==d))break;return"";case "BreakStatement":return"";case "ContinueStatement":return"";case "UpdateExpression":if("Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type)return v(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var q=!1;if("MemberExpression"===a.argument.type)return l(a.argument,c);null!==c.localScope&&void 0!==c.localScope[a.argument.name.toLowerCase()]&&(q=!0);void 0!==c.globalScope[a.argument.name.toLowerCase()]&&
(q=!0);return!1===q?"Identifier "+a.argument.name+" has not been declared.":"";case "AssignmentExpression":if("Identifier"!==a.left.type&&"MemberExpression"!==a.left.type)return v(a,"SYNTAX","ASSIGNMENTTOVARSONLY");var u=l(a.right,c);if(""!==u)return u;q=!1;if("MemberExpression"===a.left.type)return u=l(a.left,c),""!==u?u:"";null!==c.localScope&&void 0!==c.localScope[a.left.name.toLowerCase()]&&(q=!0);void 0!==c.globalScope[a.left.name.toLowerCase()]&&(q=!0);return!1===q?"Identifier "+a.left.name+
" has not been declared.":"";case "ExpressionStatement":return l(a.expression,c);case "Identifier":var A=a.name.toLowerCase();if(null!==c.localScope&&void 0!==c.localScope[A])return"";d=void 0!==c.globalScope[A]?"":v(a,"SYNTAX","VARIABLENOTFOUND");break;case "MemberExpression":d=l(a.object,c);if(""!==d)break;return!0===a.computed?l(a.property,c):"";case "Literal":return"";case "ThisExpression":d=v(a,"SYNTAX","NOTSUPPORTED");break;case "CallExpression":if("Identifier"!==a.callee.type)return v(a,"SYNTAX",
"ONLYNODESSUPPORTED");d="";for(k=0;k<a.arguments.length;k++)if(d=l(a.arguments[k],c),""!==d)return d;var r=b(a.callee.name,a.arguments,c);-1===r&&(d=v(a,"SYNTAX","NOTFOUND"));-2===r&&(d=v(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":d=l(a.argument,c);break;case "BinaryExpression":d=l(a.left,c);if(""!==d)break;d=l(a.right,c);if(""!==d)break;return"";case "LogicalExpression":d=l(a.left,c);if(""!==d)break;if("AssignmentExpression"===a.left.type||"UpdateExpression"===a.left.type)return v(a.left,
"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION");d=l(a.right,c);if(""!==d)break;return"AssignmentExpression"===a.right.type||"UpdateExpression"===a.right.type?v(a.right,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"):"";case "ConditionalExpression":return v(a,"SYNTAX","NOTSUPPORTED");case "ArrayExpression":d="";for(k=0;k<a.elements.length&&(d=l(a.elements[k],c),""===d);k++);break;case "ObjectExpression":d="";for(k=0;k<a.properties.length;k++){d="";if(null!==a.properties[k].key&&("Literal"!==a.properties[k].key.type&&
"Identifier"!==a.properties[k].key.type&&(d=v(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING")),"Literal"===a.properties[k].key.type)){var B=a.properties[k].key.value;"string"===typeof B||B instanceof String||(d=v(a,"SYNTAX","OBJECTPROPERTYMUSTBESTRING"))}""===d&&(d=l(a.properties[k],c));if(""!==d)break}break;case "Property":if("Literal"!==a.key.type&&"Identifier"!==a.key.type)return v(a,"SYNTAX","ONLYLITERAL");if("Identifier"!==a.key.type&&(d=l(a.key,c),""!==d))break;d=l(a.value,c);break;case "Array":return v(a,
"SYNTAX","NOTSUPPORTED")}return d}catch(ia){throw ia;}}function k(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==a.init?k(a.init,b):c;case "FunctionDeclaration":return k(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(k(a.declarations[d],b))return!0;return c;case "IfStatement":return k(a.test,b)||null!==a.consequent&&k(a.consequent,b)||null!==a.alternate&&k(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<
a.body.length;d++)if(k(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?k(a.argument,b):c;case "UpdateExpression":return k(a.argument,b);case "AssignmentExpression":return(c=k(a.right,b))?c:k(a.left,b);case "ExpressionStatement":return k(a.expression,b);case "ForInStatement":return(c=k(a.left,b))||(c=k(a.right,b))?c:c=k(a.body,b);case "ForStatement":if(null!==a.init&&(c=k(a.init,b))||null!==a.test&&(c=k(a.test,b))||null!==a.body&&(c=k(a.body,b)))return c;null!==a.update&&
(c=k(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return b.toLowerCase()===a.name.toLowerCase();case "MemberExpression":if(c=k(a.object,b))return c;!0===a.computed&&(c=k(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(d=0;d<a.arguments.length;d++)k(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)k(a.elements[d],b)&&
(c=!0);return c;case "UnaryExpression":return k(a.argument,b);case "BinaryExpression":return(c=k(a.left,b))?c:c=k(a.right,b);case "LogicalExpression":return(c=k(a.left,b))?c:c=k(a.right,b);case "ObjectExpression":for(d=0;d<a.properties.length;d++)k(a.properties[d],b)&&(c=!0);return c;case "Property":return c=k(a.value,b);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(x){throw x;}}function e(a,b){var c=!1;try{switch(a.type){case "VariableDeclarator":return null!==
a.init?e(a.init,b):c;case "FunctionDeclaration":return e(a.body,b);case "VariableDeclaration":for(var d=0;d<a.declarations.length;d++)if(e(a.declarations[d],b))return!0;return c;case "IfStatement":return e(a.test,b)||null!==a.consequent&&e(a.consequent,b)||null!==a.alternate&&e(a.alternate,b)?!0:c;case "EmptyStatement":return c;case "BlockStatement":for(d=0;d<a.body.length;d++)if(e(a.body[d],b))return!0;return c;case "ReturnStatement":return null!==a.argument?e(a.argument,b):c;case "UpdateExpression":return e(a.argument,
b);case "AssignmentExpression":return e(a.left,b)?!0:e(a.right,b);case "ExpressionStatement":return e(a.expression,b);case "ForInStatement":return(c=e(a.left,b))||(c=e(a.right,b))?c:c=e(a.body,b);case "ForStatement":if(null!==a.init&&(c=e(a.init,b))||null!==a.test&&(c=e(a.test,b))||null!==a.body&&(c=e(a.body,b)))return c;null!==a.update&&(c=e(a.update,b));return c;case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if(c=
e(a.object,b))return c;!0===a.computed&&(c=e(a.property,b));return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":if(a.callee.name.toLowerCase()===b.toLowerCase())return!0;for(d=0;d<a.arguments.length;d++)e(a.arguments[d],b)&&(c=!0);return c;case "ArrayExpression":for(d=0;d<a.elements.length;d++)e(a.elements[d],b)&&(c=!0);return c;case "UnaryExpression":return e(a.argument,b);case "BinaryExpression":return(c=e(a.left,b))?c:c=e(a.right,b);case "LogicalExpression":return(c=
e(a.left,b))?c:c=e(a.right,b);case "ConditionalExpression":return c;case "ObjectExpression":for(d=0;d<a.properties.length;d++)e(a.properties[d],b)&&(c=!0);return c;case "Property":return c=e(a.value,b);case "Array":return c;default:return c}}catch(x){throw x;}}function h(a,b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?h(a.init,b):c;case "FunctionDeclaration":return h(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)d=h(a.declarations[e],
b),c=c.concat(d);return c;case "ForInStatement":return d=h(a.left,b),c=c.concat(d),d=h(a.right,b),c=c.concat(d),d=h(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=h(a.init,b),c=c.concat(d)),null!==a.test&&(d=h(a.test,b),c=c.concat(d)),null!==a.body&&(d=h(a.body,b),c=c.concat(d)),null!==a.update&&(d=h(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=h(a.test,b),c=c.concat(d),null!==a.consequent&&(d=h(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=h(a.alternate,
b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)d=h(a.body[e],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?h(a.argument,b):c;case "UpdateExpression":return h(a.argument,b);case "AssignmentExpression":return c=h(a.left,b),c=c.concat(h(a.right,b));case "ExpressionStatement":return h(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":if("Identifier"!==
a.object.type)return c;if(!1===a.computed)c.push(a.object.name.toLowerCase()+"."+a.property.name.toLowerCase());else try{"Literal"===a.property.type&&"string"===typeof a.property.value&&c.push(a.object.name.toLowerCase()+"."+a.property.value.toString().toLowerCase())}catch(D){}return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(e=0;e<a.arguments.length;e++)d=h(a.arguments[e],b),c=c.concat(d);return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)d=h(a.elements[e],
b),c=c.concat(d);return c;case "UnaryExpression":return h(a.argument,b);case "ObjectExpression":for(e=0;e<a.properties.length;e++)d=h(a.properties[e],b),c=c.concat(d);return c;case "Property":return h(a.value,b);case "BinaryExpression":return d=h(a.left,b),c=c.concat(d),d=h(a.right,b),c=c.concat(d);case "LogicalExpression":return d=h(a.left,b),c=c.concat(d),d=h(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(D){throw D;}}function p(a,b,
c){c=[];if(void 0!==b.params&&null!==b.params)for(var d=0;d<b.params.length;d++)c.push("any");return{name:a,return:"any",params:c}}function g(a,b){b={globalScope:b.globalScope,localScope:{}};for(var c=0;c<a.params.length;c++)b.localScope[a.params[c].name.toLowerCase()]={type:"any"};return l(a.body,b)}function q(a,b,c,d){var e={};if(void 0===a||null===a)a={};if(void 0===c||null===c)c={};e.infinity={type:"any"};e.textformatting={type:"any"};e.pi={type:"any"};for(var f in b)if("simple"!==d||"simple"===
d&&"a"===b[f].av)e[f]={type:"FormulaFunction",signature:{min:b[f].min,max:b[f].max}},"simple"!==d&&(void 0!==b[f].fmin&&(e[f].signature.min=b[f].fmin),void 0!==b[f].fmax&&(e[f].signature.max=b[f].fmax));for(b=0;b<c.length;b++)f=c[b],e[f.name]={type:"FormulaFunction",signature:f};for(f in a)e[f]=a[f],e[f].type="any";return e}function v(a,b,c){var d="";switch(b){case "SYNTAX":d="Syntax Error: ";break;case "RUNTIME":d="Runtime Error: ";break;default:d="Syntax Error: "}try{switch(a.type){case "IfStatement":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=
" Assignments not be made in logical tests";break;case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "UpdateExpression":case "AssignmentExpression":switch(c){case "CANNOT_USE_ASSIGNMENT_IN_CONDITION":d+=" Assignments not be made in logical tests";break;case "ASSIGNMENTTOVARSONLY":d+=" Assignments can only be made to identifiers"}break;case "ExpressionStatement":d+=" Assignments can only be made to identifiers";break;case "FunctionDeclaration":switch(c){case "GLOBALFUNCTIONSONLY":d+=
" Functions cannot be declared as variables";break;case "FUNCTIONMUSTHAVEIDENTIFIER":d+=" Function Definition must have an identifier"}break;case "VariableDeclaration":d+=" Only 1 variable can be declared at a time";break;case "VariableDeclarator":switch(c){case "FUNCTIONVARIABLEDECLARATOR":d+=" Functions cannot be declared as variables";break;case "VARIABLEMUSTHAVEIDENTIFIER":d+=" Variable Definition must have an identifier"}break;case "Identifier":d+=" Identifier Not Found. ";d+=a.name;break;case "ObjectExpression":switch(c){case "OBJECTPROPERTYMUSTBESTRING":d+=
" Property name must be a string"}break;case "ForStatement":switch(c){case "CANNOT_USE_NONBOOLEAN_IN_CONDITION":d+=" Non Boolean used as Condition"}break;case "ForInStatement":switch(c){case "ONLY1VAR":d+=" Can only declare 1 var for use with IN";break;case "CANNOTDECLAREVAL":d+=" Can only declare value for use with IN";break;case "LEFTNOVAR":d+="Must provide a variable to iterate with.";break;case "VARIABLENOTDECLARED":d+="Variable must be declared before it is used..";break;case "CANNOTITERATETHISTYPE":d+=
"This type cannot be used in an IN loop"}break;case "MemberExpression":switch(c){case "PROPERTYNOTFOUND":d+="Cannot find member property. ";d+=!1===a.computed?a.property.name:"";break;case "OUTOFBOUNDS":d+="Out of Bounds. ";d+=!1===a.computed?a.property.name:"";break;case "NOTFOUND":d+="Cannot call member method on null. ";d+=!1===a.computed?a.property.name:"";break;case "INVALIDTYPE":d+="Cannot call member property on object of this type. ",d+=!1===a.computed?a.property.name:""}break;case "Property":switch(c){case "ONLYLITERAL":d+=
"Property names must be literals or identifiers"}break;case "Literal":break;case "ThisExpression":d+="THIS construct is not supported.";case "CallExpression":switch(c){case "WRONGSIGNATURE":d+="Function signature does not match: ";d+=a.callee.name;break;case "ONLYNODESUPPORTED":d+="Functions must be declared.";d+=a.callee.name;break;case "NOTAFUNCTION":d+="Not a Function: ";d+=a.callee.name;break;case "NOTFOUND":d+="Function Not Found: "+a.callee.name}break;case "UnaryExpression":switch(c){case "NOTSUPPORTEDUNARYOPERATOR":d+=
"Operator "+a.operator+" not allowed in this context. Only ! can be used with boolean, and - with a number";break;case "NOTSUPPORTEDTYPE":d+="Unary operator "+a.operator+" cannot be used with this argument."}case "BinaryExpression":switch(c){case "OPERATORNOTRECOGNISED":d+="Binary Operator not recognised "+a.operator}break;case "LogicalExpression":switch(c){case "ONLYBOOLEAN":d+="Operator "+a.operator+" cannot be used. Only || or \x26\x26 are allowed values";break;case "ONLYORORAND":d+="Logical Expression "+
a.operator+" being applied to parameters that are not boolean."}break;case "ConditionalExpression":d+="Conditional statements not supported.";break;case "ArrayExpression":switch(c){case "FUNCTIONCONTEXTILLEGAL":d+=" Cannot Put Function inside Array."}break;case "Array":d+="Expression contains unrecognised array structure.";break;default:d+="Expression contains unrecognised code structures."}}catch(x){throw x;}return d}function y(a,b,c){return{line:a.loc.start.line,character:a.loc.start.column,reason:v(a,
b,c)}}function C(a,b,c,d,e){void 0===e&&(e=!0);b={globalScope:b.globalScope,localScope:{}};for(e=0;e<a.params.length;e++)b.localScope[a.params[e].name.toLowerCase()]={type:"any"};B(a.body,b,c,d,!1)}function B(a,c,d,e,f){void 0===f&&(f=!0);if(null===a)throw Error("Unnexpexted Expression Syntax");var g=null;try{switch(a.type){case "VariableDeclarator":if(null!==a.init&&"FunctionExpression"===a.init.type){e.push(y(a,"SYNTAX","FUNCTIONVARIABLEDECLARATOR"));break}"Identifier"!==a.id.type?e.push(y(a,"SYNTAX",
"VARIABLEMUSTHAVEIDENTIFIER")):(a.id.name.toLowerCase(),null===c.localScope?c.globalScope[a.id.name.toLowerCase()]={type:"any"}:c.localScope[a.id.name.toLowerCase()]={type:"any"});null===a.init?"":B(a.init,c,d,e,f);break;case "FunctionDeclaration":!1===f&&e.push(y(a,"SYNTAX","GLOBALFUNCTIONSONLY"));"Identifier"!==a.id.type&&e.push(y(a,"SYNTAX","FUNCTIONMUSTHAVEIDENTIFIER"));g=p("",a,c);C(a,c,d,e,f);null!==c.localScope&&e.push(y(a,"SYNTAX","GLOBALFUNCTIONSONLY"));g.isnative=!1;"Identifier"===a.id.type&&
(c.globalScope[a.id.name.toLowerCase()]={type:"FormulaFunction",signature:[g]});break;case "VariableDeclaration":for(var h=0;h<a.declarations.length;h++)B(a.declarations[h],c,d,e,f);break;case "IfStatement":null!==a.test&&(B(a.test,c,d,e,f),"AssignmentExpression"!==a.test.type&&"UpdateExpression"!==a.test.type||e.push(y(a.test,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION")));null!==a.consequent&&B(a.consequent,c,d,e,f);null!==a.alternate&&B(a.alternate,c,d,e,f);break;case "EmptyStatement":break;case "BlockStatement":if(null!==
a.body)for(h=0;h<a.body.length;h++)B(a.body[h],c,d,e,f);break;case "ReturnStatement":null!==a.argument&&B(a.argument,c,d,e,f);break;case "ForInStatement":"VariableDeclaration"===a.left.type?(1<a.left.declarations.length&&e.push(y(a,"SYNTAX","ONLY1VAR")),null!==a.left.declarations[0].init&&e.push(y(a,"SYNTAX","CANNOTDECLAREVAL"))):"Identifier"!==a.left.type&&e.push(y(a,"SYNTAX","LEFTNOTVAR"));B(a.left,c,d,e,f);B(a.right,c,d,e,f);B(a.body,c,d,e,f);break;case "ForStatement":null!==a.init&&B(a.init,c,
d,e,f);null!==a.test&&B(a.test,c,d,e,f);null!==a.body&&B(a.body,c,d,e,f);null!==a.update&&B(a.update,c,d,e,f);break;case "BreakStatement":break;case "ContinueStatement":break;case "UpdateExpression":"Identifier"!==a.argument.type&&"MemberExpression"!==a.argument.type?e.push(y(a,"SYNTAX","ASSIGNMENTTOVARSONLY")):("Identifier"===a.argument.type&&(g=!1,!1===d&&(null!==c.localScope&&void 0!==c.localScope[a.argument.name.toLowerCase()]&&(g=!0),void 0!==c.globalScope[a.argument.name.toLowerCase()]&&(g=
!0),!1===g&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}))),"MemberExpression"===a.argument.type&&B(a.argument,c,d,e,f));break;case "AssignmentExpression":"Identifier"!==a.left.type&&"MemberExpression"!==a.left.type&&e.push(y(a,"SYNTAX","ASSIGNMENTTOVARSONLY"));switch(a.operator){case "\x3d":case "/\x3d":case "*\x3d":case "%\x3d":case "+\x3d":case "-\x3d":break;default:e.push(y(a,"SYNTAX","OPERATORNOTRECOGNISED"))}B(a.right,
c,d,e,f);g=!1;"Identifier"===a.left.type&&(null!==c.localScope&&void 0!==c.localScope[a.left.name.toLowerCase()]&&(g=!0),void 0!==c.globalScope[a.left.name.toLowerCase()]&&(g=!0),!1===d&&!1===g&&e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Identifier "+a.argument.name+" has not been declared."}));"MemberExpression"===a.left.type&&B(a.left,c,d,e,f);break;case "ExpressionStatement":B(a.expression,c,d,e,f);break;case "Identifier":var k=a.name.toLowerCase();
if(null!==c.localScope&&void 0!==c.localScope[k])break;void 0===c.globalScope[k]&&!1===d&&e.push(y(a,"SYNTAX","VARIABLENOTFOUND"));break;case "MemberExpression":B(a.object,c,d,e,f);!0===a.computed&&B(a.property,c,d,e,f);break;case "Literal":return"";case "ThisExpression":e.push(y(a,"SYNTAX","NOTSUPPORTED"));break;case "CallExpression":"Identifier"!==a.callee.type&&e.push(y(a,"SYNTAX","ONLYNODESSUPPORTED"));for(h=0;h<a.arguments.length;h++)B(a.arguments[h],c,d,e,f);var l=b(a.callee.name,a.arguments,
c);!1===d&&-1===l&&e.push(y(a,"SYNTAX","NOTFOUND"));-2===l&&e.push(y(a,"SYNTAX","WRONGSIGNATURE"));break;case "UnaryExpression":B(a.argument,c,d,e,f);break;case "BinaryExpression":B(a.left,c,d,e,f);B(a.right,c,d,e,f);switch(a.operator){case "\x3d\x3d":case "!\x3d":case "\x3c":case "\x3c\x3d":case "\x3e":case "\x3e\x3d":case "+":case "-":case "*":case "/":case "%":break;default:e.push(y(a,"SYNTAX","OPERATORNOTRECOGNISED"))}break;case "LogicalExpression":switch(a.operator){case "\x26\x26":case "||":break;
default:e.push(y(a,"SYNTAX","OPERATORNOTRECOGNISED"))}B(a.left,c,d,e,f);"AssignmentExpression"!==a.left.type&&"UpdateExpression"!==a.left.type||e.push(y(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));B(a.right,c,d,e,f);"AssignmentExpression"!==a.right.type&&"UpdateExpression"!==a.right.type||e.push(y(a,"SYNTAX","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));break;case "ConditionalExpression":e.push(y(a,"SYNTAX","NOTSUPPORTED"));break;case "ArrayExpression":for(h=0;h<a.elements.length;h++)B(a.elements[h],
c,d,e,f);break;case "Array":e.push(y(a,"SYNTAX","NOTSUPPORTED"));case "ObjectExpression":for(h=0;h<a.properties.length;h++)B(a.properties[h],c,d,e,f);break;case "Property":"Literal"!==a.key.type&&"Identifier"!==a.key.type&&e.push(y(a,"SYNTAX","ONLYLITERAL"));"Literal"===a.key.type&&B(a.key,c,d,e,f);B(a.value,c,d,e,f);break;default:e.push(y(a,"SYNTAX","UNRECOGNISED"))}}catch(E){e.push({line:null===a?0:a.loc.start.line,character:null===a?0:a.loc.start.column,reason:"Unnexpected Syntax"})}}function r(a,
b){var c=[],d;try{switch(a.type){case "VariableDeclarator":return null!==a.init?r(a.init,b):c;case "FunctionDeclaration":return r(a.body,b);case "VariableDeclaration":for(var e=0;e<a.declarations.length;e++)d=r(a.declarations[e],b),c=c.concat(d);return c;case "ForInStatement":return d=r(a.left,b),c=c.concat(d),d=r(a.right,b),c=c.concat(d),d=r(a.body,b),c=c.concat(d);case "ForStatement":return null!==a.init&&(d=r(a.init,b),c=c.concat(d)),null!==a.test&&(d=r(a.test,b),c=c.concat(d)),null!==a.body&&
(d=r(a.body,b),c=c.concat(d)),null!==a.update&&(d=r(a.update,b),c=c.concat(d)),c;case "IfStatement":return d=r(a.test,b),c=c.concat(d),null!==a.consequent&&(d=r(a.consequent,b),c=c.concat(d)),null!==a.alternate&&(d=r(a.alternate,b),c=c.concat(d)),c;case "EmptyStatement":return c;case "BlockStatement":for(e=0;e<a.body.length;e++)d=r(a.body[e],b),c=c.concat(d);return c;case "ReturnStatement":return null!==a.argument?r(a.argument,b):c;case "UpdateExpression":return r(a.argument,b);case "AssignmentExpression":return c=
r(a.left,b),c=c.concat(r(a.right,b));case "ExpressionStatement":return r(a.expression,b);case "BreakStatement":return c;case "ContinueStatement":return c;case "Compound":return c;case "Identifier":return c;case "MemberExpression":return c;case "Literal":return c;case "ThisExpression":return c;case "CallExpression":for(e=0;e<a.arguments.length;e++)d=r(a.arguments[e],b),c=c.concat(d);c.push(a.callee.name.toLowerCase());return c;case "ArrayExpression":for(e=0;e<a.elements.length;e++)d=r(a.elements[e],
b),c=c.concat(d);return c;case "UnaryExpression":return r(a.argument,b);case "ObjectExpression":for(e=0;e<a.properties.length;e++)d=r(a.properties[e],b),c=c.concat(d);return c;case "Property":return r(a.value,b);case "BinaryExpression":return d=r(a.left,b),c=c.concat(d),d=r(a.right,b),c=c.concat(d);case "LogicalExpression":return d=r(a.left,b),c=c.concat(d),d=r(a.right,b),c=c.concat(d);case "ConditionalExpression":return c;case "Array":return c;default:return c}}catch(D){throw D;}}Object.defineProperty(a,
"__esModule",{value:!0});a.functionDecls={concatenate:{min:"0",max:"*",av:"a"},split:{min:"2",max:"4",av:"a"},guid:{min:"0",max:"1",av:"a"},today:{min:"0",max:"0",av:"a"},now:{min:"0",max:"0",av:"a"},timestamp:{min:"0",max:"0",av:"a"},day:{min:"1",max:"1",av:"a"},month:{min:"1",max:"1",av:"a"},year:{min:"1",max:"1",av:"a"},hour:{min:"1",max:"1",av:"a"},second:{min:"1",max:"1",av:"a"},millisecond:{min:"1",max:"1",av:"a"},minute:{min:"1",max:"1",av:"a"},weekday:{min:"1",max:"1",av:"a"},toutc:{min:"1",
max:"1",av:"a"},tolocal:{min:"1",max:"1",av:"a"},date:{min:"0",max:"7",av:"a"},datediff:{min:"2",max:"3",av:"a"},dateadd:{min:"2",max:"3",av:"a"},trim:{min:"1",max:"1",av:"a"},text:{min:"1",max:"2",av:"a"},left:{min:"2",max:"2",av:"a"},right:{min:"2",max:"2",av:"a"},mid:{min:"2",max:"3",av:"a"},upper:{min:"1",max:"1",av:"a"},proper:{min:"1",max:"2",av:"a"},lower:{min:"1",max:"1",av:"a"},find:{min:"2",max:"3",av:"a"},iif:{min:"3",max:"3",av:"a"},decode:{min:"2",max:"*",av:"a"},when:{min:"2",max:"*",
av:"a"},defaultvalue:{min:"2",max:"2",av:"a"},isempty:{min:"1",max:"1",av:"a"},domaincode:{min:"3",max:"4",av:"a"},domainname:{min:"2",max:"4",av:"a"},polygon:{min:"1",max:"1",av:"a"},point:{min:"1",max:"1",av:"a"},polyline:{min:"1",max:"1",av:"a"},extent:{min:"1",max:"1",av:"a"},multipoint:{min:"1",max:"1",av:"a"},geometry:{min:"1",max:"1",av:"a"},count:{min:"0",max:"*",av:"a"},number:{min:"1",max:"2",av:"a"},acos:{min:"1",max:"1",av:"a"},asin:{min:"1",max:"1",av:"a"},atan:{min:"1",max:"1",av:"a"},
atan2:{min:"2",max:"2",av:"a"},ceil:{min:"1",max:"2",av:"a"},floor:{min:"1",max:"2",av:"a"},round:{min:"1",max:"2",av:"a"},cos:{min:"1",max:"1",av:"a"},exp:{min:"1",max:"1",av:"a"},log:{min:"1",max:"1",av:"a"},min:{min:"0",max:"*",av:"a"},constrain:{min:"3",max:"3",av:"a"},console:{min:"0",max:"*",av:"a"},max:{min:"0",max:"*",av:"a"},pow:{min:"2",max:"2",av:"a"},random:{min:"0",max:"0",av:"a"},sqrt:{min:"1",max:"1",av:"a"},sin:{min:"1",max:"1",av:"a"},tan:{min:"1",max:"1",av:"a"},abs:{min:"1",max:"1",
av:"a"},isnan:{min:"1",max:"1",av:"a"},stdev:{min:"0",max:"*",av:"a"},average:{min:"0",max:"*",av:"a"},mean:{min:"0",max:"*",av:"a"},sum:{min:"0",max:"*",av:"a"},variance:{min:"0",max:"*",av:"a"},distinct:{min:"0",max:"*",av:"a"},first:{min:"1",max:"1",av:"a"},top:{min:"2",max:"2",av:"a"},boolean:{min:"1",max:"1",av:"a"},dictionary:{min:"0",max:"*",av:"a"},typeof:{min:"1",max:"1",av:"a"},reverse:{min:"1",max:"1",av:"a"},replace:{min:"3",max:"4",av:"a"},sort:{min:"1",max:"2",av:"a"},feature:{min:"1",
max:"*",av:"a"},haskey:{min:"2",max:"2",av:"a"},indexof:{min:"2",max:"2",av:"a"},disjoint:{min:"2",max:"2",av:"a"},intersects:{min:"2",max:"2",av:"a"},touches:{min:"2",max:"2",av:"a"},crosses:{min:"2",max:"2",av:"a"},within:{min:"2",max:"2",av:"a"},contains:{min:"2",max:"2",av:"a"},overlaps:{min:"2",max:"2",av:"a"},equals:{min:"2",max:"2",av:"a"},relate:{min:"3",max:"3",av:"a"},intersection:{min:"2",max:"2",av:"a"},union:{min:"1",max:"2",av:"a"},difference:{min:"2",max:"2",av:"a"},symmetricdifference:{min:"2",
max:"2",av:"a"},clip:{min:"2",max:"2",av:"a"},cut:{min:"2",max:"2",av:"a"},area:{min:"1",max:"2",av:"a"},areageodetic:{min:"1",max:"2",av:"a"},length:{min:"1",max:"2",av:"a"},lengthgeodetic:{min:"1",max:"2",av:"a"},distance:{min:"2",max:"3",av:"a"},densify:{min:"2",max:"3",av:"a"},densifygeodetic:{min:"2",max:"3",av:"a"},generalize:{min:"2",max:"4",av:"a"},buffer:{min:"2",max:"3",av:"a"},buffergeodetic:{min:"2",max:"3",av:"a"},offset:{min:"2",max:"6",av:"a"},rotate:{min:"2",max:"3",av:"a"},issimple:{min:"1",
max:"1",av:"a"},simplify:{min:"1",max:"1",av:"a"},centroid:{min:"1",max:"1",av:"a"},multiparttosinglepart:{min:"1",max:"1",av:"a"},setgeometry:{min:"2",max:"2",av:"a"}};a.addFunctionDeclaration=function(b,c){var d=a.functionDecls[b.name.toLowerCase()];void 0===d?a.functionDecls[b.name.toLowerCase()]={min:b.min,max:b.max,av:c}:"a"===d.av&&"f"===c?(void 0!==d.fmin&&delete d.fmin,void 0!==d.fmax&&delete d.fmax,d.fmin=b.min,d.fmax=b.max):"f"===d.av&&"a"===c?(void 0===d.fmin&&(d.fmin=d.min),void 0===d.fmax&&
(d.fmax=d.max),d.min=b.min,d.max=b.max,d.av="a"):"f"===c?(d.fmin=b.min,d.fmax=b.max):"a"===c&&(d.min=b.min,d.max=b.max)};a.checkFunctionSignature=f;a.findFunction=b;a.validateLanguageNode=d;a.testValidityOfExpression=l;a.referencesMemberImpl=k;a.referencesMember=function(a,b){return!0===k(a.body[0].body,b.toLowerCase())?!0:!1};a.referencesFunctionImpl=e;a.referencesFunction=function(a,b){return!0===e(a.body[0].body,b)?!0:!1};a.findFieldLiteralsImpl=h;a.findFieldLiterals=function(a,b){return h(a.body[0].body,
b)};a.extractFunctionDeclaration=p;a.validateFunction=g;a.constructGlobalScope=q;a.validateScript=function(b,c,d){void 0===d&&(d="full");c={globalScope:q(c.vars,a.functionDecls,c.customFunctions,d),localScope:null};return l(b.body[0].body,c)};a.validateLanguage=function(a){return"BlockStatement"!==a.body[0].body.type?"Invalid formula content.":d(a.body[0].body)};a.nodeErrorMessage=v;a.makeError=y;a.extractAllIssuesInFunction=C;a.extractAllIssues=B;a.checkScript=function(b,c,d,e){void 0===e&&(e="full");
var f=[];if("BlockStatement"!==b.body[0].body.type)return[{line:0,character:0,reason:"Invalid Body"}];if(null===c||void 0===c)c={vars:{},customFunctions:[]};c={globalScope:q(c.vars,a.functionDecls,c.customFunctions,e),localScope:null};try{B(b.body[0].body,c,d,f)}catch(D){}return f};a.findFunctionCallsImpl=r;a.findFunctionCalls=function(a,b){return r(a.body[0].body,b)}})},"esri/arcade/functions/date":function(){define(["require","exports","../../moment","../languageUtils"],function(c,a,f,b){function d(a){return null===
a?a:isNaN(a.getTime())?null:a}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,c){a.today=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,0,0);a=new Date;a.setHours(0,0,0,0);return a})};a.now=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,0,0);return new Date})};a.timestamp=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,0,0);a=new Date;return a=new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),
a.getUTCMilliseconds())})};a.toutc=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?null:new Date(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())})};a.tolocal=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?null:f.utc([a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()]).toDate()})};
a.day=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getDate()})};a.month=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getMonth()})};a.year=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getFullYear()})};a.hour=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getHours()})};a.second=function(a,
d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getSeconds()})};a.millisecond=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getMilliseconds()})};a.minute=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getMinutes()})};a.weekday=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);a=b.toDate(d[0]);return null===a?NaN:a.getDay()})};a.date=function(a,
h){return c(a,h,function(a,c,e){b.pcCheck(e,0,7);if(3===e.length)return d(new Date(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),0,0,0,0));if(4===e.length)return d(new Date(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),b.toNumber(e[3]),0,0,0));if(5===e.length)return d(new Date(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),b.toNumber(e[3]),b.toNumber(e[4]),0,0));if(6===e.length)return d(new Date(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),b.toNumber(e[3]),b.toNumber(e[4]),b.toNumber(e[5]),
0));if(7===e.length)return d(new Date(b.toNumber(e[0]),b.toNumber(e[1]),b.toNumber(e[2]),b.toNumber(e[3]),b.toNumber(e[4]),b.toNumber(e[5]),b.toNumber(e[6])));if(2===e.length){a=b.toString(e[1]);if(""===a)return null;a=b.standardiseDateFormat(a);e=f(b.toString(e[0]),a,!0);return!0===e.isValid()?e.toDate():null}if(1===e.length){if(b.isString(e[0])&&""===e[0].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""))return null;a=b.toNumber(e[0]);return!1===isNaN(a)?d(new Date(a)):b.toDate(e[0])}if(0===e.length)return new Date})};
a.datediff=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,2,3);a=b.toDateM(d[0]);c=b.toDateM(d[1]);if(null===a||null===c)return NaN;switch(b.toString(d[2]).toLowerCase()){case "days":case "day":case "d":return a.diff(c,"days",!0);case "months":case "month":return a.diff(c,"months",!0);case "minutes":case "minute":case "m":return"M"===d[2]?a.diff(c,"months",!0):a.diff(c,"minutes",!0);case "seconds":case "second":case "s":return a.diff(c,"seconds",!0);case "milliseconds":case "millisecond":case "ms":return a.diff(c);
case "hours":case "hour":case "h":return a.diff(c,"hours",!0);case "years":case "year":case "y":return a.diff(c,"years",!0);default:return a.diff(c)}})};a.dateadd=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,2,3);a=b.toDateM(d[0]);if(null===a)return null;c="milliseconds";switch(b.toString(d[2]).toLowerCase()){case "days":case "day":case "d":c="days";break;case "months":case "month":c="months";break;case "minutes":case "minute":case "m":c="M"===d[2]?"months":"minutes";break;case "seconds":case "second":case "s":c=
"seconds";break;case "milliseconds":case "millisecond":case "ms":c="milliseconds";break;case "hours":case "hour":case "h":c="hours";break;case "years":case "year":case "y":c="years"}a.add(b.toNumber(d[1]),c);return a.toDate()})}}})},"esri/arcade/functions/geometry":function(){define("require exports ../Dictionary ../Feature ../languageUtils ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q){Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,c){a.polygon=function(a,e){return c(a,e,function(c,e,g){d.pcCheck(g,1,1);c=null;if(g[0]instanceof f){if(c=d.fixSpatialReference(b.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===c instanceof p)throw Error("Illegal Parameter");}else c=g[0]instanceof p?q.fromJSON(g[0].toJSON()):d.fixSpatialReference(new p(JSON.parse(g[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return d.fixNullGeometry(c)})};a.polyline=function(a,e){return c(a,e,function(c,e,h){d.pcCheck(h,1,1);c=null;if(h[0]instanceof f){if(c=d.fixSpatialReference(b.parseGeometryFromDictionary(h[0]),a.spatialReference),!1===c instanceof g)throw Error("Illegal Parameter");}else c=h[0]instanceof g?q.fromJSON(h[0].toJSON()):d.fixSpatialReference(new g(JSON.parse(h[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return d.fixNullGeometry(c)})};a.point=function(a,e){return c(a,e,function(c,e,g){d.pcCheck(g,1,1);c=null;if(g[0]instanceof f){if(c=d.fixSpatialReference(b.parseGeometryFromDictionary(g[0]),a.spatialReference),!1===c instanceof h)throw Error("Illegal Parameter");}else c=g[0]instanceof h?q.fromJSON(g[0].toJSON()):d.fixSpatialReference(new h(JSON.parse(g[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return d.fixNullGeometry(c)})};a.multipoint=function(a,g){return c(a,g,function(c,g,h){d.pcCheck(h,1,1);c=null;if(h[0]instanceof f){if(c=d.fixSpatialReference(b.parseGeometryFromDictionary(h[0]),a.spatialReference),!1===c instanceof e)throw Error("Illegal Parameter");}else c=h[0]instanceof e?q.fromJSON(h[0].toJSON()):d.fixSpatialReference(new e(JSON.parse(h[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");
return d.fixNullGeometry(c)})};a.extent=function(a,k){return c(a,k,function(c,k,u){u=d.autoCastFeatureToGeometry(u);d.pcCheck(u,1,1);c=null;u[0]instanceof f?c=d.fixSpatialReference(b.parseGeometryFromDictionary(u[0]),a.spatialReference):u[0]instanceof h?(c={xmin:u[0].x,ymin:u[0].y,xmax:u[0].x,ymax:u[0].y,spatialReference:u[0].spatialReference.toJSON()},u[0].hasZ?(c.zmin=u[0].z,c.zmax=u[0].z):u[0].hasM&&(c.mmin=u[0].m,c.mmax=u[0].m),c=q.fromJSON(c)):c=u[0]instanceof p?q.fromJSON(u[0].extent.toJSON()):
u[0]instanceof g?q.fromJSON(u[0].extent.toJSON()):u[0]instanceof e?q.fromJSON(u[0].extent.toJSON()):u[0]instanceof l?q.fromJSON(u[0].toJSON()):d.fixSpatialReference(new l(JSON.parse(u[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(c)})};a.geometry=function(a,e){return c(a,e,function(c,e,g){d.pcCheck(g,1,1);c=null;c=g[0]instanceof
b?d.fixSpatialReference(g[0].geometry(),a.spatialReference):g[0]instanceof f?d.fixSpatialReference(b.parseGeometryFromDictionary(g[0]),a.spatialReference):d.fixSpatialReference(q.fromJSON(JSON.parse(g[0])),a.spatialReference);if(null!==c&&!1===c.spatialReference.equals(a.spatialReference))throw Error("Cannot create Geometry in this SpatialReference. Engine is using a different spatial reference.");return d.fixNullGeometry(c)})};a.setgeometry=function(a,e){return c(a,e,function(a,c,e){d.pcCheck(e,
2,2);if(e[0]instanceof b){if(!0===e[0].immutable)throw Error("Feature is Immutable");if(e[1]instanceof k||null===e[1])e[0]._geometry=e[1];else throw Error("Illegal Argument");}else throw Error("Illegal Argument");return d.voidOperation})};a.feature=function(a,e){return c(a,e,function(c,e,g){if(0===g.length)throw Error("Missing Parameters");c=null;if(1===g.length)if(d.isString(g[0]))c=b.fromJson(JSON.parse(g[0]));else if(g[0]instanceof b)c=b.createFromArcadeFeature(g[0]);else if(g[0]instanceof k)c=
b.createFromGraphicLikeObject(g[0],null,null);else if(g[0]instanceof f)c=g[0].hasField("geometry")?g[0].field("geometry"):null,e=g[0].hasField("attributes")?g[0].field("attributes"):null,null!==c&&c instanceof f&&(c=b.parseGeometryFromDictionary(c)),null!==e&&(e=b.parseAttributesFromDictionary(e)),c=b.createFromGraphicLikeObject(c,e,null);else throw Error("Illegal Argument");else{if(2===g.length){e=c=null;if(null!==g[0])if(g[0]instanceof k)c=g[0];else if(c instanceof f)c=b.parseGeometryFromDictionary(g[0]);
else throw Error("Illegal Argument");if(null!==g[1])if(g[1]instanceof f)e=b.parseAttributesFromDictionary(g[1]);else throw Error("Illegal Argument");}else{c=null;e={};if(null!==g[0])if(g[0]instanceof k)c=g[0];else if(c instanceof f)c=b.parseGeometryFromDictionary(g[0]);else throw Error("Illegal Argument");for(var h=1;h<g.length;h+=2){var p=d.toString(g[h]),l=g[h+1];if(null===l||void 0===l||d.isString(l)||isNaN(l)||d.isDate(l)||d.isNumber(l)||d.isBoolean(l)){if(d.isFunctionParameter(l)||!1===d.isSimpleType(l))throw Error("Illegal Argument");
e[p]=l===d.voidOperation?null:l}else throw Error("Illegal Argument");}}c=b.createFromGraphicLikeObject(c,e,null)}c._geometry=d.fixSpatialReference(c.geometry(),a.spatialReference);c.immutable=!1;return c})};a.dictionary=function(a,b){return c(a,b,function(a,b,c){if(0===c.length)throw Error("Missing Parameters");if(0!==c.length%2)throw Error("Missing Parameters");a={};for(b=0;b<c.length;b+=2){var e=d.toString(c[b]),g=c[b+1];if(null===g||void 0===g||d.isString(g)||isNaN(g)||d.isDate(g)||d.isNumber(g)||
d.isBoolean(g)||d.isArray(g)||d.isImmutableArray(g)){if(d.isFunctionParameter(g))throw Error("Illegal Argument");a[e]=g===d.voidOperation?null:g}else throw Error("Illegal Argument");}c=new f(a);c.immutable=!1;return c})};a.haskey=function(a,e){return c(a,e,function(a,c,e){d.pcCheck(e,2,2);a=d.toString(e[1]);if(e[0]instanceof b||e[0]instanceof f)return e[0].hasField(a);throw Error("Illegal Argument");})};a.indexof=function(a,b){return c(a,b,function(a,b,c){d.pcCheck(c,2,2);a=c[1];if(d.isArray(c[0])){for(b=
0;b<c[0].length;b++)if(d.equalityTest(a,c[0][b]))return b;return-1}if(d.isImmutableArray(c[0])){var e=c[0].length();for(b=0;b<e;b++)if(d.equalityTest(a,c[0].get(b)))return b;return-1}throw Error("Illegal Argument");})}}})},"esri/arcade/functions/geomsync":function(){define("require exports ../../kernel ../kernel ../languageUtils ./centroid ../../geometry/Extent ../../geometry/Geometry ../../geometry/Multipoint ../../geometry/Point ../../geometry/Polygon ../../geometry/Polyline ../../geometry/support/jsonUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v){function y(a){return r?a.clone():v.fromJSON(a.toJSON())}function C(a){return 0===f.version.indexOf("4.")?g.fromExtent(a):new g({spatialReference:a.spatialReference,rings:[[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]]]})}Object.defineProperty(a,"__esModule",{value:!0});var B=null,r=0===f.version.indexOf("4.");a.setGeometryEngine=function(a){B=a};a.registerFunctions=function(a,c){function f(a){d.pcCheck(a,2,2);if(!(a[0]instanceof
e&&a[1]instanceof e||a[0]instanceof e&&null===a[1]||a[1]instanceof e&&null===a[0]||null===a[0]&&null===a[1]))throw Error("Illegal Argument");}a.disjoint=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!0:B.disjoint(c[0],c[1])})};a.intersects=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!1:B.intersects(c[0],c[1])})};a.touches=function(a,b){return c(a,b,function(a,b,c){c=
d.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!1:B.touches(c[0],c[1])})};a.crosses=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!1:B.crosses(c[0],c[1])})};a.within=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!1:B.within(c[0],c[1])})};a.contains=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);f(c);return null===c[0]||
null===c[1]?!1:B.contains(c[0],c[1])})};a.overlaps=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?!1:B.overlaps(c[0],c[1])})};a.equals=function(a,b){return c(a,b,function(a,b,c){d.pcCheck(c,2,2);return c[0]===c[1]?!0:c[0]instanceof e&&c[1]instanceof e?B.equals(c[0],c[1]):d.isDate(c[0])&&d.isDate(c[1])?c[0].getTime()===c[1].getTime():!1})};a.relate=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,
3,3);if(c[0]instanceof e&&c[1]instanceof e)return B.relate(c[0],c[1],d.toString(c[2]));if(c[0]instanceof e&&null===c[1]||c[1]instanceof e&&null===c[0]||null===c[0]&&null===c[1])return!1;throw Error("Illegal Argument");})};a.intersection=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);f(c);return null===c[0]||null===c[1]?null:B.intersect(c[0],c[1])})};a.union=function(a,b){return c(a,b,function(b,c,f){f=d.autoCastFeatureToGeometry(f);b=[];if(0===f.length)throw Error("Function called with wrong number of Parameters");
if(1===f.length)if(d.isArray(f[0]))for(f=d.autoCastFeatureToGeometry(f[0]),c=0;c<f.length;c++){if(null!==f[c])if(f[c]instanceof e)b.push(f[c]);else throw Error("Illegal Argument");}else if(d.isImmutableArray(f[0]))for(f=d.autoCastFeatureToGeometry(f[0].toArray()),c=0;c<f.length;c++){if(null!==f[c])if(f[c]instanceof e)b.push(f[c]);else throw Error("Illegal Argument");}else{if(f[0]instanceof e)return d.fixSpatialReference(y(f[0]),a.spatialReference);if(null===f[0])return null;throw Error("Illegal Argument");
}else for(c=0;c<f.length;c++)if(null!==f[c])if(f[c]instanceof e)b.push(f[c]);else throw Error("Illegal Argument");return 0===b.length?null:B.union(b)})};a.difference=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);f(c);return null!==c[0]&&null===c[1]?y(c[0]):null===c[0]?null:B.difference(c[0],c[1])})};a.symmetricdifference=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);f(c);return null===c[0]&&null===c[1]?null:null===c[0]?y(c[1]):null===c[1]?
y(c[0]):B.symmetricDifference(c[0],c[1])})};a.clip=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,2,2);if(!(c[1]instanceof k)&&null!==c[1])throw Error("Illegal Argument");if(null===c[0])return null;if(!(c[0]instanceof e))throw Error("Illegal Argument");return null===c[1]?null:B.clip(c[0],c[1])})};a.cut=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,2,2);if(!(c[1]instanceof q)&&null!==c[1])throw Error("Illegal Argument");
if(null===c[0])return[];if(!(c[0]instanceof e))throw Error("Illegal Argument");return null===c[1]?[y(c[0])]:B.cut(c[0],c[1])})};a.area=function(a,f){return c(a,f,function(a,c,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,1,2);if(null===f[0])return 0;if(!(f[0]instanceof e))throw Error("Illegal Argument");return B.planarArea(f[0],b.convertSquareUnitsToCode(d.defaultUndefined(f[1],-1)))})};a.areageodetic=function(a,f){return c(a,f,function(a,c,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,1,2);if(null===
f[0])return 0;if(!(f[0]instanceof e))throw Error("Illegal Argument");return B.geodesicArea(f[0],b.convertSquareUnitsToCode(d.defaultUndefined(f[1],-1)))})};a.length=function(a,f){return c(a,f,function(a,c,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,1,2);if(null===f[0])return 0;if(!(f[0]instanceof e))throw Error("Illegal Argument");return B.planarLength(f[0],b.convertLinearUnitsToCode(d.defaultUndefined(f[1],-1)))})};a.lengthgeodetic=function(a,f){return c(a,f,function(a,c,f){f=d.autoCastFeatureToGeometry(f);
d.pcCheck(f,1,2);if(null===f[0])return 0;if(!(f[0]instanceof e))throw Error("Illegal Argument");return B.geodesicLength(f[0],b.convertLinearUnitsToCode(d.defaultUndefined(f[1],-1)))})};a.distance=function(a,f){return c(a,f,function(a,c,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,2,3);if(!(f[0]instanceof e))throw Error("Illegal Argument");if(!(f[1]instanceof e))throw Error("Illegal Argument");return B.distance(f[0],f[1],b.convertLinearUnitsToCode(d.defaultUndefined(f[2],-1)))})};a.densify=function(a,
f){return c(a,f,function(a,c,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,2,3);if(null===f[0])return null;if(!(f[0]instanceof e))throw Error("Illegal Argument");a=d.toNumber(f[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return f[0]instanceof g||f[0]instanceof q?B.densify(f[0],a,b.convertLinearUnitsToCode(d.defaultUndefined(f[2],-1))):f[0]instanceof k?B.densify(C(f[0]),a,b.convertLinearUnitsToCode(d.defaultUndefined(f[2],-1))):f[0]})};a.densifygeodetic=
function(a,f){return c(a,f,function(a,c,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,2,3);if(null===f[0])return null;if(!(f[0]instanceof e))throw Error("Illegal Argument");a=d.toNumber(f[1]);if(isNaN(a))throw Error("Illegal Argument");if(0>=a)throw Error("Illegal Argument");return f[0]instanceof g||f[0]instanceof q?B.geodesicDensify(f[0],a,b.convertLinearUnitsToCode(d.defaultUndefined(f[2],-1))):f[0]instanceof k?B.geodesicDensify(C(f[0]),a,b.convertLinearUnitsToCode(d.defaultUndefined(f[2],-1))):
f[0]})};a.generalize=function(a,f){return c(a,f,function(a,c,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,2,4);if(null===f[0])return null;if(!(f[0]instanceof e))throw Error("Illegal Argument");a=d.toNumber(f[1]);if(isNaN(a))throw Error("Illegal Argument");return B.generalize(f[0],a,d.toBoolean(d.defaultUndefined(f[2],!0)),b.convertLinearUnitsToCode(d.defaultUndefined(f[3],-1)))})};a.buffer=function(a,f){return c(a,f,function(a,c,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,2,3);if(null===f[0])return null;
if(!(f[0]instanceof e))throw Error("Illegal Argument");a=d.toNumber(f[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?y(f[0]):B.buffer(f[0],a,b.convertLinearUnitsToCode(d.defaultUndefined(f[2],-1)))})};a.buffergeodetic=function(a,f){return c(a,f,function(a,c,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,2,3);if(null===f[0])return null;if(!(f[0]instanceof e))throw Error("Illegal Argument");a=d.toNumber(f[1]);if(isNaN(a))throw Error("Illegal Argument");return 0===a?y(f[0]):B.geodesicBuffer(f[0],
a,b.convertLinearUnitsToCode(d.defaultUndefined(f[2],-1)))})};a.offset=function(a,e){return c(a,e,function(a,c,e){e=d.autoCastFeatureToGeometry(e);d.pcCheck(e,2,6);if(null===e[0])return null;if(!(e[0]instanceof g||e[0]instanceof q))throw Error("Illegal Argument");a=d.toNumber(e[1]);if(isNaN(a))throw Error("Illegal Argument");c=d.toNumber(d.defaultUndefined(e[4],10));if(isNaN(c))throw Error("Illegal Argument");var f=d.toNumber(d.defaultUndefined(e[5],0));if(isNaN(f))throw Error("Illegal Argument");
return B.offset(e[0],a,b.convertLinearUnitsToCode(d.defaultUndefined(e[2],-1)),d.toString(d.defaultUndefined(e[3],"round")).toLowerCase(),c,f)})};a.rotate=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,2,3);a=c[0];if(null===a)return null;if(!(a instanceof e))throw Error("Illegal Argument");a instanceof k&&(a=g.fromExtent(a));b=d.toNumber(c[1]);if(isNaN(b))throw Error("Illegal Argument");c=d.defaultUndefined(c[2],null);if(null===c)return B.rotate(a,b);if(c instanceof
p)return B.rotate(a,b,c);throw Error("Illegal Argument");})};a.centroid=function(a,b){return c(a,b,function(b,c,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,1,1);if(null===f[0])return null;if(!(f[0]instanceof e))throw Error("Illegal Argument");return f[0]instanceof p?d.fixSpatialReference(y(f[0]),a.spatialReference):f[0]instanceof g?r?f[0].centroid:f[0].getCentroid():f[0]instanceof q?l.centroidPolyline(f[0]):f[0]instanceof h?l.centroidMultiPoint(f[0]):f[0]instanceof k?r?f[0].center:f[0].getExtent().getCenter():
null})};a.multiparttosinglepart=function(a,b){return c(a,b,function(b,c,f){f=d.autoCastFeatureToGeometry(f);d.pcCheck(f,1,1);c=[];if(null===f[0])return null;if(!(f[0]instanceof e))throw Error("Illegal Argument");if(f[0]instanceof p||f[0]instanceof k)return[d.fixSpatialReference(y(f[0]),a.spatialReference)];b=B.simplify(f[0]);if(b instanceof g){c=[];var l=[];for(f=0;f<b.rings.length;f++)if(b.isClockwise(b.rings[f])){var n=v.fromJSON({rings:[b.rings[f]],hasZ:r?b.hasZ:!1,hasM:r?b.hasM:!1,spatialReference:r?
b.spatialReference.toJSON():b.spatialReference.toJson()});c.push(n)}else l.push({ring:b.rings[f],pt:b.getPoint(f,0)});for(b=0;b<l.length;b++)for(f=0;f<c.length;f++)if(c[f].contains(l[b].pt)){c[f].addRing(l[b].ring);break}return c}if(b instanceof q){c=[];for(f=0;f<b.paths.length;f++)l=v.fromJSON({paths:[b.paths[f]],hasZ:r?b.hasZ:!1,hasM:r?b.hasM:!1,spatialReference:r?b.spatialReference.toJSON():b.spatialReference.toJson()}),c.push(l);return c}if(f[0]instanceof h){b=d.fixSpatialReference(y(f[0]),a.spatialReference);
for(f=0;f<b.points.length;f++)c.push(b.getPoint(f));return c}return null})};a.issimple=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,1,1);if(null===c[0])return!0;if(c[0]instanceof e)return B.isSimple(c[0]);throw Error("Illegal Argument");})};a.simplify=function(a,b){return c(a,b,function(a,b,c){c=d.autoCastFeatureToGeometry(c);d.pcCheck(c,1,1);if(null===c[0])return null;if(c[0]instanceof e)return B.simplify(c[0]);throw Error("Illegal Argument");})}}})},"esri/arcade/kernel":function(){define(["require",
"exports","../geometry/Extent"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.errback=function(a){return function(b){a.reject(b)}};a.callback=function(a,c){return function(){try{a.apply(null,arguments)}catch(l){c.reject(l)}}};a.convertSquareUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square_meters":return 109404;case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 109413;
case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 109414;case "acres":case "acre":case "ac":return 109402;case "hectares":case "hectare":case "ha":return 109401;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 109442;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 109405}return null};
a.shapeExtent=function(a){if(null===a)return null;switch(a.type){case "polygon":case "multipoint":case "polyline":return a.extent;case "point":return new f({xmin:a.x,ymin:a.y,xmax:a.x,ymax:a.y,spatialReference:a.spatialReference});case "extent":return a}return null};a.convertLinearUnitsToCode=function(a){if(void 0===a)return null;if("number"===typeof a||"number"===typeof a)return a;switch(a.toLowerCase()){case "meters":case "meter":case "m":case "squaremeters":case "squaremeter":case "square-meter":case "square-meters":return 9001;
case "miles":case "mile":case "squaremile":case "squaremiles":case "square-miles":case "square-mile":return 9035;case "kilometers":case "kilometer":case "squarekilometers":case "squarekilometer":case "square-kilometers":case "square-kilometer":case "km":return 9036;case "yard":case "yd":case "yards":case "square-yards":case "square-yard":case "squareyards":case "squareyard":return 9096;case "feet":case "ft":case "foot":case "square-feet":case "square-foot":case "squarefeet":case "squarefoot":return 9002}return null};
a.sameGeomType=function(a,c){return a===c||"point"===a&&"esriGeometryPoint"===c||"polyline"===a&&"esriGeometryPolyline"===c||"polygon"===a&&"esriGeometryPolygon"===c||"extent"===a&&"esriGeometryEnvelope"===c||"multipoint"===a&&"esriGeometryMultipoint"===c||"point"===c&&"esriGeometryPoint"===a||"polyline"===c&&"esriGeometryPolyline"===a||"polygon"===c&&"esriGeometryPolygon"===a||"extent"===c&&"esriGeometryEnvelope"===a||"multipoint"===c&&"esriGeometryMultipoint"===a?!0:!1}})},"esri/arcade/functions/centroid":function(){define(["require",
"exports","../../kernel","../../geometry/Point"],function(c,a,f,b){function d(a,b,c){var d={x:0,y:0};b&&(d.z=0);c&&(d.m=0);for(var e=0,f=a[0],h=0;h<a.length;h++){var k=a[h],p;a:if(k.length!==f.length)p=!1;else{for(p=0;p<k.length;p++)if(k[p]!==f[p]){p=!1;break a}p=!0}if(!1===p){p=l(f,k,b);var r=k,A=b,u=c,n={x:(f[0]+r[0])/2,y:(f[1]+r[1])/2};A&&(n.z=(f[2]+r[2])/2);A&&u?n.m=(f[3]+r[3])/2:u&&(n.m=(f[2]+r[2])/2);f=n;f.x*=p;f.y*=p;d.x+=f.x;d.y+=f.y;b&&(f.z*=p,d.z+=f.z);c&&(f.m*=p,d.m+=f.m);e+=p;f=k}}0<e?
(d.x/=e,d.y/=e,b&&(d.z/=e),c&&(d.m/=e)):(d.x=a[0][0],d.y=a[0][1],b&&(d.z=a[0][2]),c&&b?d.m=a[0][3]:c&&(d.m=a[0][2]));return d}function l(a,b,c){var d=b[0]-a[0];a=b[1]-a[1];return c?(b=b[2]-b[2],Math.sqrt(d*d+a*a+b*b)):Math.sqrt(d*d+a*a)}Object.defineProperty(a,"__esModule",{value:!0});var k=0===f.version.indexOf("4.");a.centroidPolyline=function(a){for(var c={x:0,y:0,spatialReference:k?a.spatialReference.toJSON():a.spatialReference.toJson()},e={x:0,y:0,spatialReference:k?a.spatialReference.toJSON():
a.spatialReference.toJson()},f=0,q=0,v=0;v<a.paths.length;v++)if(0!==a.paths[v].length){var y;y=a.paths[v];var C=!0===a.hasZ;if(1>=y.length)y=0;else{for(var B=0,r=1;r<y.length;r++)B+=l(y[r-1],y[r],C);y=B}0===y?(C=d(a.paths[v],!0===a.hasZ,!0===a.hasM),c.x+=C.x,c.y+=C.y,!0===a.hasZ&&(c.z+=C.z),!0===a.hasM&&(c.m+=C.m),++f):(C=d(a.paths[v],!0===a.hasZ,!0===a.hasM),e.x+=C.x*y,e.y+=C.y*y,!0===a.hasZ&&(e.z+=C.z*y),!0===a.hasM&&(e.m+=C.m*y),q+=y)}return 0<q?(e.x/=q,e.y/=q,!0===a.hasZ&&(e.z/=q),!0===a.hasM&&
(e.m/=q),new b(e)):0<f?(c.x/=f,c.y/=f,!0===a.hasZ&&(e.z/=f),!0===a.hasM&&(c.m/=f),new b(c)):null};a.centroidMultiPoint=function(a){if(0===a.points.length)return null;for(var c=0,d=0,e=0,f=0,l=0;l<a.points.length;l++){var y=a.getPoint(l);!0===y.hasZ&&(e+=y.z);!0===y.hasM&&(f+=y.m);c+=y.x;d+=y.y;f+=y.m}c={x:c/a.points.length,y:d/a.points.length,spatialReference:null};c.spatialReference=k?a.spatialReference.toJSON():a.spatialReference.toJson();!0===a.hasZ&&(c.z=e/a.points.length);!0===a.hasM&&(c.m=f/
a.points.length);return new b(c)}})},"esri/arcade/functions/maths":function(){define(["require","exports","dojo/number","../languageUtils"],function(c,a,f,b){function d(a,b,c){if("undefined"===typeof c||0===+c)return Math[a](b);b=+b;c=+c;if(isNaN(b)||"number"!==typeof c||0!==c%1)return NaN;b=b.toString().split("e");b=Math[a](+(b[0]+"e"+(b[1]?+b[1]-c:-c)));b=b.toString().split("e");return+(b[0]+"e"+(b[1]?+b[1]+c:c))}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,c){function e(a,
c,d){a=b.toNumber(a);return isNaN(a)?a:isNaN(c)||isNaN(d)||c>d?NaN:a<c?c:a>d?d:a}a.number=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,2);a=d[0];return b.isNumber(a)?a:null===a?0:b.isDate(a)||b.isBoolean(a)?Number(a):b.isArray(a)?NaN:""===a||void 0===a?Number(a):b.isString(a)?void 0!==d[1]?(d=b.multiReplace(d[1],"\u2030",""),d=b.multiReplace(d,"\u00a4",""),f.parse(a,{pattern:d})):Number(a.trim()):Number(a)})};a.abs=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return Math.abs(b.toNumber(d[0]))})};
a.acos=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return Math.acos(b.toNumber(d[0]))})};a.asin=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return Math.asin(b.toNumber(d[0]))})};a.atan=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return Math.atan(b.toNumber(d[0]))})};a.atan2=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,2,2);return Math.atan2(b.toNumber(d[0]),b.toNumber(d[1]))})};a.ceil=function(a,e){return c(a,e,function(a,c,e){b.pcCheck(e,
1,2);return 2===e.length?(a=b.toNumber(e[1]),isNaN(a)&&(a=0),d("ceil",b.toNumber(e[0]),-1*a)):Math.ceil(b.toNumber(e[0]))})};a.round=function(a,e){return c(a,e,function(a,c,e){b.pcCheck(e,1,2);return 2===e.length?(a=b.toNumber(e[1]),isNaN(a)&&(a=0),d("round",b.toNumber(e[0]),-1*a)):Math.round(b.toNumber(e[0]))})};a.floor=function(a,e){return c(a,e,function(a,c,e){b.pcCheck(e,1,2);return 2===e.length?(a=b.toNumber(e[1]),isNaN(a)&&(a=0),d("floor",b.toNumber(e[0]),-1*a)):Math.floor(b.toNumber(e[0]))})};
a.cos=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return Math.cos(b.toNumber(d[0]))})};a.isnan=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return"number"===typeof d[0]&&isNaN(d[0])})};a.exp=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return Math.exp(b.toNumber(d[0]))})};a.log=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return Math.log(b.toNumber(d[0]))})};a.pow=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,2,2);return Math.pow(b.toNumber(d[0]),
b.toNumber(d[1]))})};a.random=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,0,0);return Math.random()})};a.sin=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return Math.sin(b.toNumber(d[0]))})};a.sqrt=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return Math.sqrt(b.toNumber(d[0]))})};a.tan=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return Math.tan(b.toNumber(d[0]))})};a.defaultvalue=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,2,2);return null===
d[0]||""===d[0]||void 0===d[0]?d[1]:d[0]})};a.isempty=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return null===d[0]||""===d[0]||void 0===d[0]?!0:!1})};a["boolean"]=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return b.toBoolean(d[0])})};a.constrain=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,3,3);a=b.toNumber(d[1]);c=b.toNumber(d[2]);if(b.isArray(d[0])){var f=[],g=0;for(d=d[0];g<d.length;g++)f.push(e(d[g],a,c));return f}if(b.isImmutableArray(d[0])){f=[];
for(g=0;g<d[0].length();g++)f.push(e(d[0].get(g),a,c));return f}return e(d[0],a,c)})}}})},"esri/arcade/functions/stats":function(){define(["require","exports","../languageUtils","./fieldStats"],function(c,a,f,b){function d(a,c,d,h){if(1===h.length){if(f.isArray(h[0]))return b.calculateStat(a,h[0],-1);if(f.isImmutableArray(h[0]))return b.calculateStat(a,h[0].toArray(),-1)}return b.calculateStat(a,h,-1)}Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,b){a.stdev=function(a,
c){return b(a,c,function(a,b,c){return d("stdev",a,b,c)})};a.variance=function(a,c){return b(a,c,function(a,b,c){return d("variance",a,b,c)})};a.average=function(a,c){return b(a,c,function(a,b,c){return d("mean",a,b,c)})};a.mean=function(a,c){return b(a,c,function(a,b,c){return d("mean",a,b,c)})};a.sum=function(a,c){return b(a,c,function(a,b,c){return d("sum",a,b,c)})};a.min=function(a,c){return b(a,c,function(a,b,c){return d("min",a,b,c)})};a.max=function(a,c){return b(a,c,function(a,b,c){return d("max",
a,b,c)})};a.distinct=function(a,c){return b(a,c,function(a,b,c){return d("distinct",a,b,c)})};a.count=function(a,c){return b(a,c,function(a,b,c){f.pcCheck(c,1,1);if(f.isArray(c[0])||f.isString(c[0]))return c[0].length;if(f.isImmutableArray(c[0]))return c[0].length();throw Error("Invalid Parameters for Count");})}}})},"esri/arcade/functions/fieldStats":function(){define(["require","exports","../languageUtils"],function(c,a,f){function b(a){for(var b=0,c=0;c<a.length;c++)b+=a[c];return b/a.length}function d(a){for(var c=
b(a),d=0,f=0;f<a.length;f++)d+=Math.pow(c-a[f],2);return d/a.length}Object.defineProperty(a,"__esModule",{value:!0});a.decodeStatType=function(a){switch(a.toLowerCase()){case "distinct":return"distinct";case "avg":case "mean":return"avg";case "min":return"min";case "sum":return"sum";case "max":return"max";case "stdev":case "stddev":return"stddev";case "var":case "variance":return"var";case "count":return"count"}return""};a.calculateStat=function(a,c,e){void 0===e&&(e=1E3);switch(a.toLowerCase()){case "distinct":a:{a=
e;e=[];for(var h={},k=[],g=0;g<c.length;g++){if(void 0!==c[g]&&null!==c[g]&&c[g]!==f.voidOperation){var l=c[g];if(f.isNumber(l)||f.isString(l))void 0===h[l]&&(e.push(l),h[l]=1);else{for(var v=!1,y=0;y<k.length;y++)!0===f.equalityTest(k[y],l)&&(v=!0);!1===v&&(k.push(l),e.push(l))}}if(e.length>=a&&-1!==a){c=e;break a}}c=e}return c;case "avg":case "mean":return b(f.toNumberArray(c));case "min":return Math.min.apply(Math,f.toNumberArray(c));case "sum":c=f.toNumberArray(c);for(e=a=0;e<c.length;e++)a+=
c[e];return a;case "max":return Math.max.apply(Math,f.toNumberArray(c));case "stdev":case "stddev":return Math.sqrt(d(f.toNumberArray(c)));case "var":case "variance":return d(f.toNumberArray(c));case "count":return c.length}return 0}})},"esri/arcade/functions/string":function(){define(["require","exports","../Feature","../languageUtils"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});a.registerFunctions=function(a,c){a.trim=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,
1,1);return b.toString(d[0]).trim()})};a.upper=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return b.toString(d[0]).toUpperCase()})};a.proper=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,2);a=1;2===d.length&&"firstword"===b.toString(d[1]).toLowerCase()&&(a=2);c=/\s/;d=b.toString(d[0]);for(var e="",f=!0,g=0;g<d.length;g++){var h=d[g];c.test(h)?1===a&&(f=!0):h.toUpperCase()!==h.toLowerCase()&&(f?(h=h.toUpperCase(),f=!1):h=h.toLowerCase());e+=h}return e})};a.lower=function(a,
d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);return b.toString(d[0]).toLowerCase()})};a.guid=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,0,1);if(0<d.length)switch(b.toString(d[0]).toLowerCase()){case "digits":return b.generateUUID().replace("-","").replace("-","").replace("-","").replace("-","");case "digits-hyphen":return b.generateUUID();case "digits-hyphen-parentheses":return"("+b.generateUUID()+")"}return"{"+b.generateUUID()+"}"})};a.console=function(a,d){return c(a,d,function(c,
d,e){0!==e.length&&(1===e.length?a.console(b.toString(e[0])):a.console(b.toString(e)));return b.voidOperation})};a.mid=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,2,3);a=b.toNumber(d[1]);if(isNaN(a))return"";0>a&&(a=0);if(2===d.length)return b.toString(d[0]).substr(a);c=b.toNumber(d[2]);if(isNaN(c))return"";0>c&&(c=0);return b.toString(d[0]).substr(a,c)})};a.find=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,2,3);a=0;if(2<d.length){a=b.toNumber(b.defaultUndefined(d[2],0));if(isNaN(a))return-1;
0>a&&(a=0)}return b.toString(d[1]).indexOf(b.toString(d[0]),a)})};a.left=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,2,2);a=b.toNumber(d[1]);if(isNaN(a))return"";0>a&&(a=0);return b.toString(d[0]).substr(0,a)})};a.right=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,2,2);a=b.toNumber(d[1]);if(isNaN(a))return"";0>a&&(a=0);return b.toString(d[0]).substr(-1*a,a)})};a.split=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,2,4);a=b.toNumber(b.defaultUndefined(d[2],-1));c=b.toBoolean(b.defaultUndefined(d[3],
!1));-1===a||null===a||!0===c?d=b.toString(d[0]).split(b.toString(d[1])):(isNaN(a)&&(a=-1),-1>a&&(a=-1),d=b.toString(d[0]).split(b.toString(d[1]),a));if(!1===c)return d;c=[];for(var e=0;e<d.length&&!(-1!==a&&c.length>=a);e++)""!==d[e]&&void 0!==d[e]&&c.push(d[e]);return c})};a.text=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,2);return b.toStringExplicit(d[0],d[1])})};a.concatenate=function(a,d){return c(a,d,function(a,c,d){a=[];if(1>d.length)return"";if(b.isArray(d[0])){c=b.defaultUndefined(d[2],
"");for(var e=0;e<d[0].length;e++)a[e]=b.toStringExplicit(d[0][e],c);return 1<d.length?a.join(d[1]):a.join("")}if(b.isImmutableArray(d[0])){c=b.defaultUndefined(d[2],"");for(e=0;e<d[0].length();e++)a[e]=b.toStringExplicit(d[0].get(e),c);return 1<d.length?a.join(d[1]):a.join("")}for(e=0;e<d.length;e++)a[e]=b.toStringExplicit(d[e]);return a.join("")})};a.reverse=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,1,1);if(b.isArray(d[0]))return a=d[0].slice(0),a.reverse(),a;if(b.isImmutableArray(d[0]))return a=
d[0].toArray().slice(0),a.reverse(),a;throw Error("Invalid Parameter");})};a.replace=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,3,4);a=b.toString(d[0]);c=b.toString(d[1]);var e=b.toString(d[2]);return(4===d.length?b.toBoolean(d[3]):1)?b.multiReplace(a,c,e):a.replace(c,e)})};a.domainname=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,2,4);if(d[0]instanceof f)return d[0].domainValueLookup(b.toString(d[1]),d[2],void 0===d[3]?void 0:b.toNumber(d[3]));throw Error("Invalid Parameter");
})};a.domaincode=function(a,d){return c(a,d,function(a,c,d){b.pcCheck(d,3,4);if(d[0]instanceof f)return d[0].domainCodeLookup(b.toString(d[1]),d[2],void 0===d[3]?void 0:b.toNumber(d[3]));throw Error("Invalid Parameter");})}}})},"esri/arcade/arcadeRuntime":function(){define("require exports ./Dictionary ./Feature ./FunctionWrapper ./ImmutablePathArray ./ImmutablePointArray ./languageUtils ./treeAnalysis ./functions/date ./functions/geometry ./functions/geomsync ./functions/maths ./functions/stats ./functions/string ../geometry/Extent ../geometry/Geometry ../geometry/Multipoint ../geometry/Point ../geometry/Polygon ../geometry/Polyline ../geometry/SpatialReference".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A,u,n,t,x){function D(a,b){for(var c=[],d=0;d<b.arguments.length;d++)c.push(F(a,b.arguments[d]));return c}function G(a,b,c){try{return c(a,b,D(a,b))}catch(Ca){throw Ca;}}function F(a,c){try{switch(c.type){case "EmptyStatement":return e.voidOperation;case "VariableDeclarator":var g=null===c.init?null:F(a,c.init);g===e.voidOperation&&(g=null);var k=c.id.name.toLowerCase();null!==a.localScope?a.localScope[k]={value:g,valueset:!0,node:c.init}:a.globalScope[k]=
{value:g,valueset:!0,node:c.init};return e.voidOperation;case "VariableDeclaration":for(var l=0;l<c.declarations.length;l++)F(a,c.declarations[l]);return e.voidOperation;case "BlockStatement":var p;a:{for(var n=e.voidOperation,l=0;l<c.body.length;l++)if(n=F(a,c.body[l]),n instanceof e.ReturnResult||n===e.breakResult||n===e.continueResult){p=n;break a}p=n}return p;case "FunctionDeclaration":var q=c.id.name.toLowerCase();a.globalScope[q]={valueset:!0,node:null,value:new d(c,a)};return e.voidOperation;
case "ReturnStatement":var u;if(null===c.argument)u=new e.ReturnResult(e.voidOperation);else{var t=F(a,c.argument);u=new e.ReturnResult(t)}return u;case "IfStatement":var x;if("AssignmentExpression"===c.test.type||"UpdateExpression"===c.test.type)throw Error(h.nodeErrorMessage(c.test,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var m=F(a,c.test);if(!0===m)x=F(a,c.consequent);else if(!1===m)x=null!==c.alternate?F(a,c.alternate):e.voidOperation;else throw Error(h.nodeErrorMessage(c,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));
return x;case "ExpressionStatement":var v;if("AssignmentExpression"===c.expression.type||"UpdateExpression"===c.expression.type)v=F(a,c.expression);else{var A=F(a,c.expression);v=A===e.voidOperation?e.voidOperation:new e.ImplicitResult(A)}return v;case "AssignmentExpression":var B;var r=F(a,c.right),l=null,y="";if("MemberExpression"===c.left.type){l=F(a,c.left.object);y=!0===c.left.computed?F(a,c.left.property):c.left.property.name;if(e.isArray(l))if(e.isNumber(y)){0>y&&(y=l.length+y);if(0>y||y>l.length)throw Error("Assignment outside of array bounds");
if(y===l.length&&"\x3d"!==c.operator)throw Error("Invalid Parameter");l[y]=E(r,c.operator,l[y],c)}else throw Error("Invalid Parameter");else if(l instanceof f){if(!1===e.isString(y))throw Error("Dictionary accessor must be a string");if(!0===l.hasField(y))l.setField(y,E(r,c.operator,l.field(y),c));else{if("\x3d"!==c.operator)throw Error("Invalid Parameter");l.setField(y,E(r,c.operator,null,c))}}else if(l instanceof b){if(!1===e.isString(y))throw Error("Feature accessor must be a string");if(!0===
l.hasField(y))l.setField(y,E(r,c.operator,l.field(y),c));else{if("\x3d"!==c.operator)throw Error("Invalid Parameter");l.setField(y,E(r,c.operator,null,c))}}else{if(e.isImmutableArray(l))throw Error("Array is Immutable");throw Error("Invalid Parameter");}B=e.voidOperation}else if(l=c.left.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[l])a.localScope[l]={value:E(r,c.operator,a.localScope[l].value,c),valueset:!0,node:c.right},B=e.voidOperation;else if(void 0!==a.globalScope[l])a.globalScope[l]=
{value:E(r,c.operator,a.globalScope[l].value,c),valueset:!0,node:c.right},B=e.voidOperation;else throw Error("Variable not recognised");return B;case "UpdateExpression":var D;var C,l=null,y="";if("MemberExpression"===c.argument.type){l=F(a,c.argument.object);y=!0===c.argument.computed?F(a,c.argument.property):c.argument.property.name;if(e.isArray(l))if(e.isNumber(y)){0>y&&(y=l.length+y);if(0>y||y>=l.length)throw Error("Assignment outside of array bounds");C=e.toNumber(l[y]);l[y]="++"===c.operator?
C+1:C-1}else throw Error("Invalid Parameter");else if(l instanceof f){if(!1===e.isString(y))throw Error("Dictionary accessor must be a string");if(!0===l.hasField(y))C=e.toNumber(l.field(y)),l.setField(y,"++"===c.operator?C+1:C-1);else throw Error("Invalid Parameter");}else if(l instanceof b){if(!1===e.isString(y))throw Error("Feature accessor must be a string");if(!0===l.hasField(y))C=e.toNumber(l.field(y)),l.setField(y,"++"===c.operator?C+1:C-1);else throw Error("Invalid Parameter");}else{if(e.isImmutableArray(l))throw Error("Array is Immutable");
throw Error("Invalid Parameter");}D=!1===c.prefix?C:"++"===c.operator?C+1:C-1}else if(l=c.argument.name.toLowerCase(),null!==a.localScope&&void 0!==a.localScope[l])C=e.toNumber(a.localScope[l].value),a.localScope[l]={value:"++"===c.operator?C+1:C-1,valueset:!0,node:c},D=!1===c.prefix?C:"++"===c.operator?C+1:C-1;else if(void 0!==a.globalScope[l])C=e.toNumber(a.globalScope[l].value),a.globalScope[l]={value:"++"===c.operator?C+1:C-1,valueset:!0,node:c},D=!1===c.prefix?C:"++"===c.operator?C+1:C-1;else throw Error("Variable not recognised");
return D;case "BreakStatement":return e.breakResult;case "ContinueStatement":return e.continueResult;case "ForStatement":null!==c.init&&F(a,c.init);y={testResult:!0,lastAction:e.voidOperation};do b:{B=a;r=c;D=y;if(null!==r.test){D.testResult=F(B,r.test);if(!1===D.testResult)break b;if(!0!==D.testResult)throw Error(h.nodeErrorMessage(r,"RUNTIME","CANNOT_USE_NONBOOLEAN_IN_CONDITION"));}D.lastAction=F(B,r.body);D.lastAction===e.breakResult?D.testResult=!1:D.lastAction instanceof e.ReturnResult?D.testResult=
!1:null!==r.update&&F(B,r.update)}while(!0===y.testResult);l=y.lastAction instanceof e.ReturnResult?y.lastAction:e.voidOperation;return l;case "ForInStatement":return J(a,c);case "Identifier":return ha(a,c);case "MemberExpression":return Z(a,c);case "Literal":return c.value;case "ThisExpression":throw Error(h.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "CallExpression":return T(a,c);case "UnaryExpression":return ia(a,c);case "BinaryExpression":return S(a,c);case "LogicalExpression":return O(a,
c);case "ConditionalExpression":throw Error(h.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));case "ArrayExpression":try{for(l=[],y=0;y<c.elements.length;y++){var G=F(a,c.elements[y]);if(e.isFunctionParameter(G))throw Error(h.nodeErrorMessage(c,"RUNTIME","FUNCTIONCONTEXTILLEGAL"));G===e.voidOperation?l.push(null):l.push(G)}}catch(eb){throw eb;}return l;case "ObjectExpression":l={};for(y=0;y<c.properties.length;y++){var N=F(a,c.properties[y]);if(e.isFunctionParameter(N.value))throw Error("Illegal Argument");
if(!1===e.isString(N.key))throw Error("Illegal Argument");l[N.key.toString()]=N.value===e.voidOperation?null:N.value}var qa=new f(l);qa.immutable=!1;return qa;case "Property":return{key:"Identifier"===c.key.type?c.key.name:F(a,c.key),value:F(a,c.value)};case "Array":throw Error(h.nodeErrorMessage(c,"RUNTIME","NOTSUPPORTED"));default:throw Error(h.nodeErrorMessage(c,"RUNTIME","UNREOGNISED"));}}catch(eb){throw eb;}}function J(a,c){var d=F(a,c.right);"VariableDeclaration"===c.left.type&&F(a,c.left);
var g=null,k="VariableDeclaration"===c.left.type?c.left.declarations[0].id.name:c.left.name;null!==a.localScope&&void 0!==a.localScope[k]&&(g=a.localScope[k]);null===g&&void 0!==a.globalScope[k]&&(g=a.globalScope[k]);if(null===g)throw Error(h.nodeErrorMessage(c,"RUNTIME","VARIABLENOTDECLARED"));if(e.isArray(d)||e.isString(d)){for(var d=d.length,l=0;l<d&&(g.value=l,k=F(a,c.body),k!==e.breakResult);l++)if(k instanceof e.ReturnResult)return k;return e.voidOperation}if(e.isImmutableArray(d)){for(l=0;l<
d.length()&&(g.value=l,k=F(a,c.body),k!==e.breakResult);l++)if(k instanceof e.ReturnResult)return k;return e.voidOperation}if(d instanceof f||d instanceof b)for(d=d.keys(),l=0;l<d.length&&(g.value=d[l],k=F(a,c.body),k!==e.breakResult);l++){if(k instanceof e.ReturnResult)return k}else return e.voidOperation}function E(a,b,c,d){switch(b){case "\x3d":return a===e.voidOperation?null:a;case "/\x3d":return e.toNumber(c)/e.toNumber(a);case "*\x3d":return e.toNumber(c)*e.toNumber(a);case "-\x3d":return e.toNumber(c)-
e.toNumber(a);case "+\x3d":return e.isString(c)||e.isString(a)?e.toString(c)+e.toString(a):e.toNumber(c)+e.toNumber(a);case "%\x3d":return e.toNumber(c)%e.toNumber(a);default:throw Error(h.nodeErrorMessage(d,"RUNTIME","OPERATORNOTRECOGNISED"));}}function N(a,b,c,d){b=b.toLowerCase();switch(b){case "hasz":return a=a.hasZ,void 0===a?!1:a;case "hasm":return a=a.hasM,void 0===a?!1:a;case "spatialreference":return b=a.spatialReference._arcadeCacheId,void 0===b&&(c=!0,Object.freeze&&Object.isFrozen(a.spatialReference)&&
(c=!1),c&&(ba++,b=a.spatialReference._arcadeCacheId=ba)),a=new f({wkt:a.spatialReference.wkt,wkid:a.spatialReference.wkid}),void 0!==b&&(a._arcadeCacheId="SPREF"+b.toString()),a}switch(a.type){case "extent":switch(b){case "xmin":case "xmax":case "ymin":case "ymax":case "zmin":case "zmax":case "mmin":case "mmax":return a=a[b],void 0!==a?a:null;case "type":return"Extent"}break;case "polygon":switch(b){case "rings":return b=e.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===
b&&(ba++,b=ba,e.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new l(a.rings,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polygon"}break;case "point":switch(b){case "x":case "y":case "z":case "m":return void 0!==a[b]?a[b]:null;case "type":return"Point"}break;case "polyline":switch(b){case "paths":return b=e.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(ba++,b=ba,e.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",
b)),a=new l(a.paths,a.spatialReference,!0===a.hasZ,!0===a.hasM,b);case "type":return"Polyline"}break;case "multipoint":switch(b){case "points":return b=e.isVersion4?a.cache._arcadeCacheId:a.getCacheValue("_arcadeCacheId"),void 0===b&&(ba++,b=ba,e.isVersion4?a.cache._arcadeCacheId=b:a.setCacheValue("_arcadeCacheId",b)),a=new k(a.points,a.spatialReference,!0===a.hasZ,!0===a.hasM,b,1);case "type":return"Multipoint"}}throw Error(h.nodeErrorMessage(d,"RUNTIME","PROPERTYNOTFOUND"));}function Z(a,c){try{var d=
F(a,c.object);if(null===d)throw Error(h.nodeErrorMessage(c,"RUNTIME","NOTFOUND"));if(!1===c.computed){if(d instanceof f||d instanceof b)return d.field(c.property.name);if(d instanceof r)return N(d,c.property.name,a,c);throw Error(h.nodeErrorMessage(c,"RUNTIME","INVALIDTYPE"));}var g=F(a,c.property);if(d instanceof f||d instanceof b){if(e.isString(g))return d.field(g)}else if(d instanceof r){if(e.isString(g))return N(d,g,a,c)}else if(e.isArray(d)){if(e.isNumber(g)&&isFinite(g)&&Math.floor(g)===g){0>
g&&(g=d.length+g);if(g>=d.length||0>g)throw Error(h.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d[g]}}else if(e.isString(d)){if(e.isNumber(g)&&isFinite(g)&&Math.floor(g)===g){0>g&&(g=d.length+g);if(g>=d.length||0>g)throw Error(h.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d[g]}}else if(e.isImmutableArray(d)&&e.isNumber(g)&&isFinite(g)&&Math.floor(g)===g){0>g&&(g=d.length()+g);if(g>=d.length()||0>g)throw Error(h.nodeErrorMessage(c,"RUNTIME","OUTOFBOUNDS"));return d.get(g)}throw Error(h.nodeErrorMessage(c,
"RUNTIME","INVALIDTYPE"));}catch(Sa){throw Sa;}}function ia(a,b){try{var c=F(a,b.argument);if(e.isBoolean(c)){if("!"===b.operator)return!c;if("-"===b.operator)return-1*e.toNumber(c);if("+"===b.operator)return 1*e.toNumber(c);throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}if("-"===b.operator)return-1*e.toNumber(c);if("+"===b.operator)return 1*e.toNumber(c);throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTSUPPORTEDUNARYOPERATOR"));}catch(Ca){throw Ca;}}function S(a,b){try{var c=
[F(a,b.left),F(a,b.right)],d=c[0],f=c[1];switch(b.operator){case "\x3d\x3d":return e.equalityTest(d,f);case "\x3d":return e.equalityTest(d,f);case "!\x3d":return!e.equalityTest(d,f);case "\x3c":return e.greaterThanLessThan(d,f,b.operator);case "\x3e":return e.greaterThanLessThan(d,f,b.operator);case "\x3c\x3d":return e.greaterThanLessThan(d,f,b.operator);case "\x3e\x3d":return e.greaterThanLessThan(d,f,b.operator);case "+":return e.isString(d)||e.isString(f)?e.toString(d)+e.toString(f):e.toNumber(d)+
e.toNumber(f);case "-":return e.toNumber(d)-e.toNumber(f);case "*":return e.toNumber(d)*e.toNumber(f);case "/":return e.toNumber(d)/e.toNumber(f);case "%":return e.toNumber(d)%e.toNumber(f);default:throw Error(h.nodeErrorMessage(b,"RUNTIME","OPERATORNOTRECOGNISED"));}}catch(Ka){throw Ka;}}function O(a,b){try{if("AssignmentExpression"===b.left.type||"UpdateExpression"===b.left.type)throw Error(h.nodeErrorMessage(b.left,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));if("AssignmentExpression"===b.right.type||
"UpdateExpression"===b.right.type)throw Error(h.nodeErrorMessage(b.right,"RUNTIME","CANNOT_USE_ASSIGNMENT_IN_CONDITION"));var c=F(a,b.left);if(e.isBoolean(c))switch(b.operator){case "||":if(!0===c)return c;var d=F(a,b.right);if(e.isBoolean(d))return d;throw Error(h.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));case "\x26\x26":if(!1===c)return c;d=F(a,b.right);if(e.isBoolean(d))return d;throw Error(h.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));default:throw Error(h.nodeErrorMessage(b,"RUNTIME","ONLYORORAND"));
}else throw Error(h.nodeErrorMessage(b,"RUNTIME","ONLYBOOLEAN"));}catch(Sa){throw Sa;}}function ha(a,b){var c;try{var d=b.name.toLowerCase();if(null!==a.localScope&&void 0!==a.localScope[d])return c=a.localScope[d],!0!==c.valueset&&(c.value=F(a,c.node),c.valueset=!0),c.value;if(void 0!==a.globalScope[d])return c=a.globalScope[d],!0!==c.valueset&&(c.value=F(a,c.node),c.valueset=!0),c.value;throw Error(h.nodeErrorMessage(b,"RUNTIME","VARIABLENOTFOUND"));}catch(Sa){throw Sa;}}function T(a,b){try{if("Identifier"!==
b.callee.type)throw Error(h.nodeErrorMessage(b,"RUNTIME","ONLYNODESSUPPORTED"));if(null!==a.localScope&&void 0!==a.localScope[b.callee.name.toLowerCase()]){var c=a.localScope[b.callee.name.toLowerCase()];if(c.value instanceof e.NativeFunction)return c.value.fn(a,b);if(c.value instanceof d)return Y(a,b,c.value.definition);throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}if(void 0!==a.globalScope[b.callee.name.toLowerCase()]){c=a.globalScope[b.callee.name.toLowerCase()];if(c.value instanceof
e.NativeFunction)return c.value.fn(a,b);if(c.value instanceof d)return Y(a,b,c.value.definition);throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTAFUNCTION"));}throw Error(h.nodeErrorMessage(b,"RUNTIME","NOTFOUND"));}catch(Ca){throw Ca;}}function qa(a){return null==a?"":e.isArray(a)||e.isImmutableArray(a)?"Array":e.isDate(a)?"Date":e.isString(a)?"String":e.isBoolean(a)?"Boolean":e.isNumber(a)?"Number":a instanceof f?"Dictionary":a instanceof b?"Feature":a instanceof u?"Point":a instanceof n?"Polygon":
a instanceof t?"Polyline":a instanceof A?"Multipoint":a instanceof B?"Extent":e.isFunctionParameter(a)?"Function":a===e.voidOperation?"":"number"===typeof a&&isNaN(a)?"Number":"Unrecognised Type"}function X(a,b,c,d){try{var f=F(a,b.arguments[c]);if(e.equalityTest(f,d))return F(a,b.arguments[c+1]);var g=b.arguments.length-c;return 1===g?F(a,b.arguments[c]):2===g?null:3===g?F(a,b.arguments[c+2]):X(a,b,c+2,d)}catch(Na){throw Na;}}function M(a,b,c,d){try{if(!0===d)return F(a,b.arguments[c+1]);if(3===
b.arguments.length-c)return F(a,b.arguments[c+2]);var f=F(a,b.arguments[c+2]);if(!1===e.isBoolean(f))throw Error("WHEN needs boolean test conditions");return M(a,b,c+2,f)}catch(Ka){throw Ka;}}function aa(a,b){var c=a.length,d=Math.floor(c/2);if(0===c)return[];if(1===c)return[a[0]];var e=aa(a.slice(0,d),b);a=aa(a.slice(d,c),b);for(c=[];0<e.length||0<a.length;)0<e.length&&0<a.length?(d=b(e[0],a[0]),isNaN(d)&&(d=0),0>=d?(c.push(e[0]),e=e.slice(1)):(c.push(a[0]),a=a.slice(1))):0<e.length?(c.push(e[0]),
e=e.slice(1)):0<a.length&&(c.push(a[0]),a=a.slice(1));return c}function K(a,b,c){try{var d=a.body;if(c.length!==a.params.length)throw Error("Invalid Parameter calls to function.");for(var f=0;f<c.length;f++)b.localScope[a.params[f].name.toLowerCase()]={value:c[f],valueset:!0,node:null};var g=F(b,d);if(g instanceof e.ReturnResult)return g.value;if(g===e.breakResult)throw Error("Cannot Break from a Function");if(g===e.continueResult)throw Error("Cannot Continue from a Function");return g instanceof
e.ImplicitResult?g.value:g}catch(Na){throw Na;}}function Y(a,b,c){return G(a,b,function(b,d,e){b={spatialReference:a.spatialReference,applicationCache:void 0===a.applicationCache?null:a.applicationCache,globalScope:a.globalScope,depthCounter:a.depthCounter+1,console:a.console,localScope:{}};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return K(c,b,e)})}function ca(a){return function(){var b={applicationCache:void 0===a.context.applicationCache?null:a.context.applicationCache,
spatialReference:a.context.spatialReference,console:a.context.console,localScope:{},depthCounter:a.context.depthCounter+1,globalScope:a.context.globalScope};if(64<b.depthCounter)throw Error("Exceeded maximum function depth");return K(a.definition,b,arguments)}}function fa(a){console.log(a)}Object.defineProperty(a,"__esModule",{value:!0});var ba=0,ea={};p.registerFunctions(ea,G);C.registerFunctions(ea,G);v.registerFunctions(ea,G);g.registerFunctions(ea,G);y.registerFunctions(ea,G);q.registerFunctions(ea,
G);ea["typeof"]=function(a,b){return G(a,b,function(a,b,c){e.pcCheck(c,1,1);a=qa(c[0]);if("Unrecognised Type"===a)throw Error("Unrecognised Type");return a})};ea.iif=function(a,b){try{e.pcCheck(null===b.arguments?[]:b.arguments,3,3);var c=F(a,b.arguments[0]);if(!1===e.isBoolean(c))throw Error("IF Function must have a boolean test condition");return!0===c?F(a,b.arguments[1]):F(a,b.arguments[2])}catch(Ca){throw Ca;}};ea.decode=function(a,b){try{if(2>b.arguments.length)throw Error("Missing Parameters");
if(2===b.arguments.length)return F(a,b.arguments[1]);if(0===(b.arguments.length-1)%2)throw Error("Must have a default value result.");var c=F(a,b.arguments[0]);return X(a,b,1,c)}catch(Ca){throw Ca;}};ea.when=function(a,b){try{if(3>b.arguments.length)throw Error("Missing Parameters");if(0===b.arguments.length%2)throw Error("Must have a default value result.");var c=F(a,b.arguments[0]);if(!1===e.isBoolean(c))throw Error("WHEN needs boolean test conditions");return M(a,b,0,c)}catch(Ca){throw Ca;}};ea.top=
function(a,b){return G(a,b,function(a,b,c){e.pcCheck(c,2,2);if(e.isArray(c[0]))return e.toNumber(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,e.toNumber(c[1]));if(e.isImmutableArray(c[0]))return e.toNumber(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,e.toNumber(c[1]));throw Error("Top cannot accept this parameter type");})};ea.first=function(a,b){return G(a,b,function(a,b,c){e.pcCheck(c,1,1);return e.isArray(c[0])?0===c[0].length?null:c[0][0]:e.isImmutableArray(c[0])?0===c[0].length()?null:c[0].get(0):
null})};ea.sort=function(a,b){return G(a,b,function(a,b,c){e.pcCheck(c,1,2);a=c[0];e.isImmutableArray(a)&&(a=a.toArray());if(!1===e.isArray(a))throw Error("Illegal Argument");if(1<c.length){if(!1===e.isFunctionParameter(c[1]))throw Error("Illegal Argument");var d=ca(c[1]);a=aa(a,function(a,b){return d(a,b)})}else{if(0===a.length)return[];c={};for(b=0;b<a.length;b++){var f=qa(a[b]);""!==f&&(c[f]=!0)}if(!0===c.Array||!0===c.Dictionary||!0===c.Feature||!0===c.Point||!0===c.Polygon||!0===c.Polyline||
!0===c.Multipoint||!0===c.Extent||!0===c.Function)return a.slice(0);b=0;var f="",g;for(g in c)b++,f=g;a=1<b||"String"===f?aa(a,function(a,b){if(null===a||void 0===a||a===e.voidOperation)return null===b||void 0===b||b===e.voidOperation?0:1;if(null===b||void 0===b||b===e.voidOperation)return-1;a=e.toString(a);b=e.toString(b);return a<b?-1:a===b?0:1}):"Number"===f?aa(a,function(a,b){return a-b}):"Boolean"===f?aa(a,function(a,b){return a===b?0:b?-1:1}):"Date"===f?aa(a,function(a,b){return b-a}):a.slice(0)}return a})};
for(var oa in ea)ea[oa]={value:new e.NativeFunction(ea[oa]),valueset:!0,node:null};var ra=function(){};ra.prototype=ea;ra.prototype.infinity={value:Number.POSITIVE_INFINITY,valueset:!0,node:null};ra.prototype.pi={value:Math.PI,valueset:!0,node:null};a.functionHelper={fixSpatialReference:e.fixSpatialReference,parseArguments:D,standardFunction:G};a.extend=function(a){for(var b={mode:"sync",compiled:!1,functions:{},signatures:[],standardFunction:G,evaluateIdentifier:ha,arcadeCustomFunctionHandler:ca},
c=0;c<a.length;c++)a[c].registerFunctions(b);for(var d in b.functions)ea[d]={value:new e.NativeFunction(b.functions[d]),valueset:!0,node:null},ra.prototype[d]=ea[d];for(c=0;c<b.signatures.length;c++)h.addFunctionDeclaration(b.signatures[c],"f")};a.executeScript=function(a,c,g){g||(g=new x(102100));var h=c.vars,k=c.customfunctions,l=new ra;h||(h={});k||(k={});var p=new f({newline:"\n",tab:"\t",singlequote:"'",doublequote:'"',forwardslash:"/",backwardslash:"\\"});p.immutable=!1;l.textformatting={value:p,
valueset:!0,node:null};for(var n in k)l[n]={value:new e.NativeFunction(k[n]),native:!0,valueset:!0,node:null};for(n in h)l[n]=h[n]&&"esri.Graphic"===h[n].declaredClass?{value:b.createFromGraphic(h[n]),valueset:!0,node:null}:{value:h[n],valueset:!0,node:null};a=F({spatialReference:g,globalScope:l,localScope:null,console:c.console?c.console:fa,depthCounter:1,applicationCache:void 0===c.applicationCache?null:c.applicationCache},a.body[0].body);a instanceof e.ReturnResult&&(a=a.value);a instanceof e.ImplicitResult&&
(a=a.value);a===e.voidOperation&&(a=null);if(a===e.breakResult)throw Error("Cannot return BREAK");if(a===e.continueResult)throw Error("Cannot return CONTINUE");if(a instanceof d)throw Error("Cannot return FUNCTION");if(a instanceof e.NativeFunction)throw Error("Cannot return FUNCTION");return a};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return h.findFieldLiterals(a,b)};a.validateScript=function(a,b){return h.validateScript(a,b,"simple")};a.referencesMember=function(a,b){return h.referencesMember(a,
b)};a.referencesFunction=function(a,b){return h.referencesFunction(a,b)};a.findFunctionCalls=function(a){return h.findFunctionCalls(a,!1)}})},"esri/arcade/parser":function(){define(["require","exports","./treeAnalysis","./lib/esprima"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});a.parseScript=function(a){a=b.parse("function _() { "+a+"\n}");if(null===a.body||void 0===a.body)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");if(0===a.body.length)throw Error("No formula provided.");
if("BlockStatement"!==a.body[0].body.type)throw Error("Invalid formula content.");var c=f.validateLanguage(a);if(""!==c)throw Error(c);return a};a.scriptCheck=function(a,c,k,e){var d=[];try{var l=b.parse("function _() { "+a+"\n}",{tolerant:!0,loc:!0}),g=l.errors;if(0<g.length)for(var q=0;q<g.length;q++)d.push({line:g[q].lineNumber,character:g[q].column,reason:g[q].description});var v=f.checkScript(l,c,k,e);for(c=0;c<v.length;c++)d.push(v[c])}catch(y){try{"Unexpected token }"===y.description?(y.index=
("function _() { "+a+"\n}").length-1,d.push({line:y.lineNumber,character:y.column,reason:"Unexpected end of script"})):d.push({line:y.lineNumber,character:y.column,reason:y.description})}catch(C){}}return d};a.extractFieldLiterals=function(a,b){void 0===b&&(b=!1);return f.findFieldLiterals(a,b)};a.validateScript=function(a,b,c){void 0===c&&(c="full");return f.validateScript(a,b,c)};a.referencesMember=function(a,b){return f.referencesMember(a,b)};a.referencesFunction=function(a,b){return f.referencesFunction(a,
b)}})},"esri/arcade/lib/esprima":function(){(function(c,a){"function"===typeof define&&define.amd?define(["exports"],a):"undefined"!==typeof exports?a(exports):a(c.esprima={})})(this,function(c){function a(a,b){if(!a)throw Error("ASSERT: "+b);}function f(a){return 48<=a&&57>=a}function b(a){return 0<="0123456789abcdefABCDEF".indexOf(a)}function d(a){return 0<="01234567".indexOf(a)}function l(a){return 10===a||13===a||8232===a||8233===a}function k(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=
a||92===a||128<=a&&Za.NonAsciiIdentifierStart.test(String.fromCharCode(a))}function e(a){return 36===a||95===a||65<=a&&90>=a||97<=a&&122>=a||48<=a&&57>=a||92===a||128<=a&&Za.NonAsciiIdentifierPart.test(String.fromCharCode(a))}function h(a){a=a.toLowerCase();switch(a.length){case 2:return"if"===a||"in"===a;case 3:return"var"===a||"for"===a;case 4:return"else"===a;case 5:return"break"===a;case 6:return"return"===a;case 8:return"function"===a.toLowerCase()||"continue"===a;default:return!1}}function p(b,
c,d,e,f){a("number"===typeof d,"Comment must have valid position");ja.lastCommentStart>=d||(ja.lastCommentStart=d,b={type:b,value:c},P.range&&(b.range=[d,e]),P.loc&&(b.loc=f),P.comments.push(b),P.attachComment&&(P.leadingComments.push(b),P.trailingComments.push(b)))}function g(a){var b,c,d;b=I-a;for(c={start:{line:la,column:I-ma-a}};I<va;)if(d=Q.charCodeAt(I),++I,l(d)){P.comments&&(a=Q.slice(b+a,I-1),c.end={line:la,column:I-ma-1},p("Line",a,b,I-1,c));13===d&&10===Q.charCodeAt(I)&&++I;++la;ma=I;return}P.comments&&
(a=Q.slice(b+a,I),c.end={line:la,column:I-ma},p("Line",a,b,I,c))}function q(){var a,b;for(b=0===I;I<va;)if(a=Q.charCodeAt(I),32===a||9===a||11===a||12===a||160===a||5760<=a&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(a))++I;else if(l(a))++I,13===a&&10===Q.charCodeAt(I)&&++I,++la,ma=I,b=!0;else if(47===a)if(a=Q.charCodeAt(I+1),47===a)++I,++I,g(2),b=!0;else if(42===a){++I;++I;a:{var c=a=void 0,d=void 0,d=void 0;P.comments&&(a=I-2,c={start:{line:la,
column:I-ma-2}});for(;I<va;)if(d=Q.charCodeAt(I),l(d))13===d&&10===Q.charCodeAt(I+1)&&++I,++la,++I,ma=I,I>=va&&T();else{if(42===d&&47===Q.charCodeAt(I+1)){++I;++I;P.comments&&(d=Q.slice(a+2,I-2),c.end={line:la,column:I-ma},p("Block",d,a,I,c));break a}++I}T()}}else break;else if(b&&45===a)if(45===Q.charCodeAt(I+1)&&62===Q.charCodeAt(I+2))I+=3,g(3);else break;else if(60===a)if("!--"===Q.slice(I+1,I+4))++I,++I,++I,++I,g(4);else break;else break}function v(a){var c,d,e=0;c="u"===a?4:2;for(a=0;a<c;++a)if(I<
va&&b(Q[I]))d=Q[I++],e=16*e+"0123456789abcdef".indexOf(d.toLowerCase());else return"";return String.fromCharCode(e)}function y(){var a,b;a=Q.charCodeAt(I++);b=String.fromCharCode(a);92===a&&(117!==Q.charCodeAt(I)&&T(),++I,(a=v("u"))&&"\\"!==a&&k(a.charCodeAt(0))||T(),b=a);for(;I<va;){a=Q.charCodeAt(I);if(!e(a))break;++I;b+=String.fromCharCode(a);92===a&&(b=b.substr(0,b.length-1),117!==Q.charCodeAt(I)&&T(),++I,(a=v("u"))&&"\\"!==a&&e(a.charCodeAt(0))||T(),b+=a)}return b}function C(){var a=I,b=Q.charCodeAt(I),
c,d=Q[I];switch(b){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++I,P.tokenize&&(40===b?P.openParenToken=P.tokens.length:123===b&&(P.openCurlyToken=P.tokens.length)),{type:V.Punctuator,value:String.fromCharCode(b),lineNumber:la,lineStart:ma,start:a,end:I};default:if(c=Q.charCodeAt(I+1),61===c)switch(b){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return I+=2,{type:V.Punctuator,value:String.fromCharCode(b)+
String.fromCharCode(c),lineNumber:la,lineStart:ma,start:a,end:I};case 33:case 61:return I+=2,61===Q.charCodeAt(I)&&++I,{type:V.Punctuator,value:Q.slice(a,I),lineNumber:la,lineStart:ma,start:a,end:I}}}b=Q.substr(I,4);if("\x3e\x3e\x3e\x3d"===b)return I+=4,{type:V.Punctuator,value:b,lineNumber:la,lineStart:ma,start:a,end:I};b=b.substr(0,3);if("\x3e\x3e\x3e"===b||"\x3c\x3c\x3d"===b||"\x3e\x3e\x3d"===b)return I+=3,{type:V.Punctuator,value:b,lineNumber:la,lineStart:ma,start:a,end:I};b=b.substr(0,2);if(d===
b[1]&&0<="+-\x3c\x3e\x26|".indexOf(d)||"\x3d\x3e"===b)return I+=2,{type:V.Punctuator,value:b,lineNumber:la,lineStart:ma,start:a,end:I};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(d))return++I,{type:V.Punctuator,value:d,lineNumber:la,lineStart:ma,start:a,end:I};T()}function B(){var c,e,g;g=Q[I];a(f(g.charCodeAt(0))||"."===g,"Numeric literal must start with a decimal digit or a decimal point");e=I;c="";if("."!==g){c=Q[I++];g=Q[I];if("0"===c){if("x"===g||"X"===g){++I;for(c="";I<va&&b(Q[I]);)c+=Q[I++];0===
c.length&&T();k(Q.charCodeAt(I))&&T();return{type:V.NumericLiteral,value:parseInt("0x"+c,16),lineNumber:la,lineStart:ma,start:e,end:I}}if("b"===g||"B"===g){++I;for(g="";I<va;){c=Q[I];if("0"!==c&&"1"!==c)break;g+=Q[I++]}0===g.length&&T();I<va&&(c=Q.charCodeAt(I),(k(c)||f(c))&&T());return{type:V.NumericLiteral,value:parseInt(g,2),lineNumber:la,lineStart:ma,start:e,end:I}}if("o"===g||"O"===g){d(g)?(g=!0,c="0"+Q[I++]):(g=!1,++I,c="");for(;I<va&&d(Q[I]);)c+=Q[I++];g||0!==c.length||T();(k(Q.charCodeAt(I))||
f(Q.charCodeAt(I)))&&T();return{type:V.NumericLiteral,value:parseInt(c,8),octal:g,lineNumber:la,lineStart:ma,start:e,end:I}}}for(;f(Q.charCodeAt(I));)c+=Q[I++];g=Q[I]}if("."===g){for(c+=Q[I++];f(Q.charCodeAt(I));)c+=Q[I++];g=Q[I]}if("e"===g||"E"===g){c+=Q[I++];g=Q[I];if("+"===g||"-"===g)c+=Q[I++];if(f(Q.charCodeAt(I)))for(;f(Q.charCodeAt(I));)c+=Q[I++];else T()}k(Q.charCodeAt(I))&&T();return{type:V.NumericLiteral,value:parseFloat(c),lineNumber:la,lineStart:ma,start:e,end:I}}function r(){ga=null;q();
S("Regular Expression language structures not supported")}function A(){q();r()}function u(){var a;a=P.tokens[P.tokens.length-1];if(!a)return A();if("Punctuator"===a.type){if("]"===a.value)return C();if(")"===a.value)return a=P.tokens[P.openParenToken-1],!a||"Keyword"!==a.type||"if"!==a.value.toLowerCase()&&"while"!==a.value.toLowerCase()&&"for"!==a.value.toLowerCase()&&"with"!==a.value.toLowerCase()?C():A();if("}"===a.value){if(P.tokens[P.openCurlyToken-3]&&"Keyword"===P.tokens[P.openCurlyToken-3].type){if(a=
P.tokens[P.openCurlyToken-4],!a)return C()}else if(P.tokens[P.openCurlyToken-4]&&"Keyword"===P.tokens[P.openCurlyToken-4].type){if(a=P.tokens[P.openCurlyToken-5],!a)return A()}else return C();if(0<=Fa.indexOf(a.value))return C()}return A()}return"Keyword"===a.type&&"this"!==a.value?A():C()}function n(){var c;q();if(I>=va)return{type:V.EOF,lineNumber:la,lineStart:ma,start:I,end:I};c=Q.charCodeAt(I);if(k(c)){var g;c=I;if(92===Q.charCodeAt(I))g=y();else a:{var p;for(g=I++;I<va;){p=Q.charCodeAt(I);if(92===
p){I=g;g=y();break a}if(e(p))++I;else break}g=Q.slice(g,I)}return{type:1===g.length?V.Identifier:h(g)?V.Keyword:"null"===g.toLowerCase()?V.NullLiteral:"true"===g.toLowerCase()||"false"===g.toLowerCase()?V.BooleanLiteral:V.Identifier,value:g,lineNumber:la,lineStart:ma,start:c,end:I}}if(40===c||41===c||59===c)return C();if(39===c||34===c){var n="",m,t,x;p=!1;var A,r;A=la;r=ma;c=Q[I];a("'"===c||'"'===c,"String literal must starts with a quote");g=I;for(++I;I<va;)if(m=Q[I++],m===c){c="";break}else if("\\"===
m)if((m=Q[I++])&&l(m.charCodeAt(0)))++la,"\r"===m&&"\n"===Q[I]&&++I,ma=I;else switch(m){case "u":case "x":if("{"===Q[I]){++I;t=m=void 0;m=Q[I];t=0;for("}"===m&&T();I<va;){m=Q[I++];if(!b(m))break;t=16*t+"0123456789abcdef".indexOf(m.toLowerCase())}(1114111<t||"}"!==m)&&T();m=65535>=t?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320);n+=m}else x=I,(t=v(m))?n+=t:(I=x,n+=m);break;case "n":n+="\n";break;case "r":n+="\r";break;case "t":n+="\t";break;case "b":n+="\b";break;
case "f":n+="\f";break;case "v":n+="\x0B";break;default:d(m)?(t="01234567".indexOf(m),0!==t&&(p=!0),I<va&&d(Q[I])&&(p=!0,t=8*t+"01234567".indexOf(Q[I++]),0<="0123".indexOf(m)&&I<va&&d(Q[I])&&(t=8*t+"01234567".indexOf(Q[I++]))),n+=String.fromCharCode(t)):n+=m}else if(l(m.charCodeAt(0)))break;else n+=m;""!==c&&T();return{type:V.StringLiteral,value:n,octal:p,startLineNumber:A,startLineStart:r,lineNumber:la,lineStart:ma,start:g,end:I}}return 46===c?f(Q.charCodeAt(I+1))?B():C():f(c)?B():P.tokenize&&47===
c?u():C()}function t(){var a,b,c;q();a={start:{line:la,column:I-ma}};b=n();a.end={line:la,column:I-ma};b.type!==V.EOF&&(c=Q.slice(b.start,b.end),a={type:Ua[b.type],value:c,range:[b.start,b.end],loc:a},b.regex&&(a.regex={pattern:b.regex.pattern,flags:b.regex.flags}),P.tokens.push(a));return b}function x(){var a;a=ga;I=a.end;la=a.lineNumber;ma=a.lineStart;ga="undefined"!==typeof P.tokens?t():n();I=a.end;la=a.lineNumber;ma=a.lineStart;return a}function D(){var a,b,c;a=I;b=la;c=ma;ga="undefined"!==typeof P.tokens?
t():n();I=a;la=b;ma=c}function G(){this.line=la;this.column=I-ma}function F(){this.start=new G;this.end=null}function J(a){this.start=a.type===V.StringLiteral?{line:a.startLineNumber,column:a.start-a.startLineStart}:{line:a.lineNumber,column:a.start-a.lineStart};this.end=null}function E(){I=ga.start;ga.type===V.StringLiteral?(la=ga.startLineNumber,ma=ga.startLineStart):(la=ga.lineNumber,ma=ga.lineStart);P.range&&(this.range=[I,0]);P.loc&&(this.loc=new F)}function N(a){P.range&&(this.range=[a.start,
0]);P.loc&&(this.loc=new J(a))}function Z(){var a,b,c,d;a=I;b=la;c=ma;q();d=la!==b;I=a;la=b;ma=c;return d}function ia(a,b,c){var d=Error("Line "+a+": "+c);d.index=b;d.lineNumber=a;d.column=b-ma+1;d.description=c;return d}function S(b){var c,d;c=Array.prototype.slice.call(arguments,1);d=b.replace(/%(\d)/g,function(b,d){a(d<c.length,"Message reference must be in range");return c[d]});throw ia(la,I,d);}function O(b){var c,d;c=Array.prototype.slice.call(arguments,1);d=b.replace(/%(\d)/g,function(b,d){a(d<
c.length,"Message reference must be in range");return c[d]});d=ia(la,I,d);if(P.errors)P.errors.push(d);else throw d;}function ha(a,b){var c=ta.UnexpectedToken;a&&(c=b?b:a.type===V.EOF?ta.UnexpectedEOS:a.type===V.Identifier?ta.UnexpectedIdentifier:a.type===V.NumericLiteral?ta.UnexpectedNumber:a.type===V.StringLiteral?ta.UnexpectedString:ta.UnexpectedToken);c=c.replace("%0",a?a.value:"ILLEGAL");return a&&"number"===typeof a.lineNumber?ia(a.lineNumber,a.start,c):ia(la,I,c)}function T(a,b){throw ha(a,
b);}function qa(a,b){a=ha(a,b);if(P.errors)P.errors.push(a);else throw a;}function X(a){var b=x();b.type===V.Punctuator&&b.value===a||T(b)}function M(){var a;P.errors?(a=ga,a.type===V.Punctuator&&","===a.value?x():a.type===V.Punctuator&&";"===a.value?(x(),qa(a)):qa(a,ta.UnexpectedToken)):X(",")}function aa(a){var b=x();b.type===V.Keyword&&b.value.toLowerCase()===a.toLowerCase()||T(b)}function K(a){return ga.type===V.Punctuator&&ga.value===a}function Y(a){return ga.type===V.Keyword&&ga.value.toLowerCase()===
a.toLowerCase()}function ca(){var a;59===Q.charCodeAt(I)||K(";")?x():(a=la,q(),la===a&&(ga.type===V.EOF||K("}")||T(ga)))}function fa(a){return a.type===ka.Identifier||a.type===ka.MemberExpression}function ba(a,b){var c,d=new E;b=xa;c=H();xa=b;return d.finishFunctionExpression(null,a,[],c)}function ea(){var a,b;a=xa;xa=!0;b=Oa();b=ba(b.params);xa=a;return b}function oa(){var a,b=new E;a=x();return a.type===V.StringLiteral||a.type===V.NumericLiteral?(xa&&a.octal&&qa(a,ta.StrictOctalLiteral),b.finishLiteral(a)):
b.finishIdentifier(a.value)}function ra(){var a,b,c,d=new E;a=ga;if(a.type===V.Identifier)return b=oa(),"get"!==a.value||K(":")||K("(")?"set"!==a.value||K(":")||K("(")?K(":")?(x(),a=m(),d.finishProperty("init",b,a,!1,!1)):K("(")?(a=ea(),d.finishProperty("init",b,a,!0,!1)):d.finishProperty("init",b,b,!1,!0):(b=oa(),X("("),a=ga,a.type!==V.Identifier?(X(")"),qa(a),a=ba([])):(c=[Ta()],X(")"),a=ba(c,a)),d.finishProperty("set",b,a,!1,!1)):(b=oa(),X("("),X(")"),a=ba([]),d.finishProperty("get",b,a,!1,!1));
if(a.type===V.EOF||a.type===V.Punctuator)T(a);else{b=oa();if(K(":"))return x(),a=m(),d.finishProperty("init",b,a,!1,!1);if(K("("))return a=ea(),d.finishProperty("init",b,a,!0,!1);T(x())}}function sa(a){var b=[],c,d,e={},f=String,g=new E;for(!0!==a&&X("{");!K("}");)a=ra(),c=a.key.type===ka.Identifier?a.key.name:f(a.key.value),d="init"===a.kind?$a.Data:"get"===a.kind?$a.Get:$a.Set,c="$"+c,Object.prototype.hasOwnProperty.call(e,c)?(e[c]===$a.Data?xa&&d===$a.Data?O(ta.StrictDuplicateProperty):d!==$a.Data&&
O(ta.AccessorDataProperty):d===$a.Data?O(ta.AccessorDataProperty):e[c]&d&&O(ta.AccessorGetSet),e[c]|=d):e[c]=d,b.push(a),K("}")||M();X("}");return g.finishObjectExpression(b)}function Ea(){var a,b,c,d;if(K("("))return X("("),K(")")?(x(),b=gb.ArrowParameterPlaceHolder):(++ja.parenthesisCount,b=ua(),X(")")),b;if(K("[")){b=[];var e=new E;for(X("[");!K("]");)K(",")?(x(),b.push(null)):(b.push(m()),K("]")||X(","));x();return e.finishArrayExpression(b)}if(K("{"))return sa();a=ga.type;d=new E;if(a===V.Identifier)c=
d.finishIdentifier(x().value);else if(a===V.StringLiteral||a===V.NumericLiteral)xa&&ga.octal&&qa(ga,ta.StrictOctalLiteral),c=d.finishLiteral(x());else if(a===V.Keyword){if(Y("function")){d=null;var f;c=[];var g=[],h,k=new E;aa("function");K("(")||(d=Ta());f=Oa(b);c=f.params;g=f.defaults;a=f.stricted;b=f.firstRestricted;f.message&&(e=f.message);h=xa;f=H();xa&&b&&T(b,e);xa&&a&&qa(a,e);xa=h;return k.finishFunctionExpression(d,c,g,f)}Y("this")?(x(),c=d.finishThisExpression()):T(x())}else a===V.BooleanLiteral?
(b=x(),b.value="true"===b.value.toLowerCase(),c=d.finishLiteral(b)):a===V.NullLiteral?(b=x(),b.value=null,c=d.finishLiteral(b)):K("/")||K("/\x3d")?(c="undefined"!==typeof P.tokens?d.finishLiteral(A()):d.finishLiteral(r()),D()):T(x());return c}function na(){var a=[];X("(");if(!K(")"))for(;I<va;){a.push(m());if(K(")"))break;M()}X(")");return a}function Ca(){X(".");var a,b=new E;a=x();a.type===V.Identifier||a.type===V.Keyword||a.type===V.BooleanLiteral||a.type===V.NullLiteral||T(a);return b.finishIdentifier(a.value)}
function Sa(){var a;X("[");a=ua();X("]");return a}function Ka(){var b,c,d=new E;aa("new");var e;a(ja.allowIn,"callee of new expression always allow in keyword.");e=ga;for(b=Y("new")?Ka():Ea();;)if(K("["))c=Sa(),b=(new N(e)).finishMemberExpression("[",b,c);else if(K("."))c=Ca(),b=(new N(e)).finishMemberExpression(".",b,c);else break;c=K("(")?na():[];return d.finishNewExpression(b,c)}function Na(){var a,b,c=ga,d,e=ja.allowIn;b=ga;ja.allowIn=!0;for(a=Y("new")?Ka():Ea();;)if(K("."))d=Ca(),a=(new N(b)).finishMemberExpression(".",
a,d);else if(K("("))d=na(),a=(new N(b)).finishCallExpression(a,d);else if(K("["))d=Sa(),a=(new N(b)).finishMemberExpression("[",a,d);else break;ja.allowIn=e;ga.type!==V.Punctuator||!K("++")&&!K("--")||Z()||(fa(a)||O(ta.InvalidLHSInAssignment),b=x(),a=(new N(c)).finishPostfixExpression(b.value,a));return a}function R(){var a,b,c;ga.type!==V.Punctuator&&ga.type!==V.Keyword?b=Na():K("++")||K("--")?(c=ga,a=x(),b=R(),fa(b)||O(ta.InvalidLHSInAssignment),b=(new N(c)).finishUnaryExpression(a.value,b)):K("+")||
K("-")||K("~")||K("!")?(c=ga,a=x(),b=R(),b=(new N(c)).finishUnaryExpression(a.value,b)):Y("delete")||Y("void")||Y("typeof")?(c=ga,a=x(),b=R(),b=(new N(c)).finishUnaryExpression(a.value,b),xa&&"delete"===b.operator&&b.argument.type===ka.Identifier&&O(ta.StrictDelete)):b=Na();return b}function Ja(a,b){var c=0;if(a.type!==V.Punctuator&&a.type!==V.Keyword)return 0;switch(a.value){case "||":c=1;break;case "\x26\x26":c=2;break;case "|":c=3;break;case "^":c=4;break;case "\x26":c=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":c=
6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":c=7;break;case "in":c=b?7:0;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":c=8;break;case "+":case "-":c=9;break;case "*":case "/":case "%":c=11}return c}function W(){var a,b,c,d,e,f;a=ga;b=R();if(b===gb.ArrowParameterPlaceHolder)return b;c=ga;d=Ja(c,ja.allowIn);if(0===d)return b;c.prec=d;x();a=[a,ga];f=R();for(e=[b,c,f];0<(d=Ja(ga,ja.allowIn));){for(;2<e.length&&d<=e[e.length-2].prec;)f=e.pop(),c=e.pop().value,
b=e.pop(),a.pop(),b=(new N(a[a.length-1])).finishBinaryExpression(c,b,f),e.push(b);c=x();c.prec=d;e.push(c);a.push(ga);b=R();e.push(b)}d=e.length-1;b=e[d];for(a.pop();1<d;)b=(new N(a.pop())).finishBinaryExpression(e[d-1].value,e[d-2],b),d-=2;return b}function ya(a){var b,c,d,e,f,g,h;e=[];f=[];g=0;h={paramSet:{}};b=0;for(c=a.length;b<c;b+=1)if(d=a[b],d.type===ka.Identifier)e.push(d),f.push(null),Ya(h,d,d.name);else if(d.type===ka.AssignmentExpression)e.push(d.left),f.push(d.right),++g,Ya(h,d.left,
d.left.name);else return null;h.message===ta.StrictParamDupe&&(a=xa?h.stricted:h.firstRestricted,T(a,h.message));0===g&&(f=[]);return{params:e,defaults:f,rest:null,stricted:h.stricted,firstRestricted:h.firstRestricted,message:h.message}}function m(){var a,b,c,d,e;a=ja.parenthesisCount;b=e=ga;var f,g;g=ga;c=W();c!==gb.ArrowParameterPlaceHolder&&K("?")&&(x(),f=ja.allowIn,ja.allowIn=!0,b=m(),ja.allowIn=f,X(":"),f=m(),c=(new N(g)).finishConditionalExpression(c,b,f));if(c===gb.ArrowParameterPlaceHolder||
K("\x3d\x3e"))if(ja.parenthesisCount===a||ja.parenthesisCount===a+1)if(c.type===ka.Identifier?d=ya([c]):c.type===ka.AssignmentExpression?d=ya([c]):c.type===ka.SequenceExpression?d=ya(c.expressions):c===gb.ArrowParameterPlaceHolder&&(d=ya([])),d)return a=d,e=new N(e),X("\x3d\x3e"),d=xa,c=K("{")?H():m(),xa&&a.firstRestricted&&T(a.firstRestricted,a.message),xa&&a.stricted&&qa(a.stricted,a.message),xa=d,e.finishArrowFunctionExpression(a.params,a.defaults,c,c.type!==ka.BlockStatement);ga.type!==V.Punctuator?
a=!1:(a=ga.value,a="\x3d"===a||"*\x3d"===a||"/\x3d"===a||"%\x3d"===a||"+\x3d"===a||"-\x3d"===a||"\x3c\x3c\x3d"===a||"\x3e\x3e\x3d"===a||"\x3e\x3e\x3e\x3d"===a||"\x26\x3d"===a||"^\x3d"===a||"|\x3d"===a);a&&(fa(c)||O(ta.InvalidLHSInAssignment),b=x(),a=m(),c=(new N(e)).finishAssignmentExpression(b.value,c,a));return c}function ua(){var a,b=ga;a=m();if(K(",")){for(a=[a];I<va&&K(",");)x(),a.push(m());a=(new N(b)).finishSequenceExpression(a)}return a}function Ta(){var a,b=new E;a=x();a.type!==V.Identifier&&
T(a);return b.finishIdentifier(a.value)}function z(a){var b=null,c,d=new E;c=Ta();"const"===a?(X("\x3d"),b=m()):K("\x3d")&&(x(),b=m());return d.finishVariableDeclarator(c,b)}function Ha(a){var b=[];do{b.push(z(a));if(!K(","))break;x()}while(I<va);return b}function da(a){var b=ga.type,c,d;b===V.EOF&&T(ga);if(b===V.Punctuator&&"{"===ga.value){if(a){X("{");var e=ga;a=I;c=la;d=ma;x();b=K(":");ga=e;I=a;la=c;ma=d;if((ga.type===V.Identifier||ga.type===V.StringLiteral)&&b)return sa(!0);a=new E;for(c=[];I<
va&&!K("}");){d=Xa();if("undefined"===typeof d)break;c.push(d)}X("}");return a.finishBlockStatement(c)}return sa()}a=new E;if(b===V.Punctuator)switch(ga.value){case ";":return a=new E,X(";"),a.finishEmptyStatement();case "(":return c=ua(),ca(),a.finishExpressionStatement(c)}else if(b===V.Keyword)switch(ga.value.toLowerCase()){case "break":return c=null,aa("break"),59===Q.charCodeAt(I)?(x(),ja.inIteration||ja.inSwitch||S(ta.IllegalBreak),a=a.finishBreakStatement(null)):Z()?(ja.inIteration||ja.inSwitch||
S(ta.IllegalBreak),a=a.finishBreakStatement(null)):(ga.type===V.Identifier&&(c=Ta(),d="$"+c.name,Object.prototype.hasOwnProperty.call(ja.labelSet,d)||S(ta.UnknownLabel,c.name)),ca(),null!==c||ja.inIteration||ja.inSwitch||S(ta.IllegalBreak),a=a.finishBreakStatement(c)),a;case "continue":return c=null,aa("continue"),59===Q.charCodeAt(I)?(x(),ja.inIteration||S(ta.IllegalContinue),a=a.finishContinueStatement(null)):Z()?(ja.inIteration||S(ta.IllegalContinue),a=a.finishContinueStatement(null)):(ga.type===
V.Identifier&&(c=Ta(),d="$"+c.name,Object.prototype.hasOwnProperty.call(ja.labelSet,d)||S(ta.UnknownLabel,c.name)),ca(),null!==c||ja.inIteration||S(ta.IllegalContinue),a=a.finishContinueStatement(c)),a;case "for":var f,g,h;g=ja.allowIn;f=b=e=null;aa("for");X("(");if(K(";"))x();else{if(Y("var")){ja.allowIn=!1;var l=new E;f=x();h=Ha();f=l.finishVariableDeclaration(h,f.value);ja.allowIn=g;1===f.declarations.length&&Y("in")&&(x(),c=f,d=ua(),f=null)}else ja.allowIn=!1,f=ua(),ja.allowIn=g,Y("in")&&(fa(f)||
O(ta.InvalidLHSInForIn),x(),c=f,d=ua(),f=null);"undefined"===typeof c&&X(";")}"undefined"===typeof c&&(K(";")||(b=ua()),X(";"),K(")")||(e=ua()));X(")");h=ja.inIteration;ja.inIteration=!0;g=da(!0);ja.inIteration=h;return"undefined"===typeof c?a.finishForStatement(f,b,e,g):a.finishForInStatement(c,d,g);case "function":return cb(a);case "if":return aa("if"),X("("),c=ua(),X(")"),d=da(!0),Y("else")?(x(),b=da(!0)):b=null,a.finishIfStatement(c,d,b);case "return":return c=null,aa("return"),ja.inFunctionBody||
O(ta.IllegalReturn),32===Q.charCodeAt(I)&&k(Q.charCodeAt(I+1))?(c=ua(),ca(),a=a.finishReturnStatement(c)):Z()?a=a.finishReturnStatement(null):(K(";")||K("}")||ga.type===V.EOF||(c=ua()),ca(),a=a.finishReturnStatement(c)),a;case "var":return aa("var"),c=Ha(),ca(),a.finishVariableDeclaration(c,"var")}c=ua();if(c.type===ka.Identifier&&K(":"))return x(),b="$"+c.name,Object.prototype.hasOwnProperty.call(ja.labelSet,b)&&S(ta.Redeclaration,"Label",c.name),ja.labelSet[b]=!0,d=da(!1),delete ja.labelSet[b],
a.finishLabeledStatement(c,d);ca();return a.finishExpressionStatement(c)}function H(){var a,b=[],c,d,e,f,g,h=new E;for(X("{");I<va&&ga.type===V.StringLiteral;){c=ga;a=Xa();b.push(a);if(a.expression.type!==ka.Literal)break;a=Q.slice(c.start+1,c.end-1);"use strict"===a?(xa=!0,d&&qa(d,ta.StrictOctalLiteral)):!d&&c.octal&&(d=c)}c=ja.labelSet;d=ja.inIteration;e=ja.inSwitch;f=ja.inFunctionBody;g=ja.parenthesizedCount;ja.labelSet={};ja.inIteration=!1;ja.inSwitch=!1;ja.inFunctionBody=!0;for(ja.parenthesizedCount=
0;I<va&&!K("}");){a=Xa();if("undefined"===typeof a)break;b.push(a)}X("}");ja.labelSet=c;ja.inIteration=d;ja.inSwitch=e;ja.inFunctionBody=f;ja.parenthesizedCount=g;return h.finishBlockStatement(b)}function Ya(a,b,c){c="$"+c;xa?Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.stricted=b,a.message=ta.StrictParamDupe):!a.firstRestricted&&Object.prototype.hasOwnProperty.call(a.paramSet,c)&&(a.firstRestricted=b,a.message=ta.StrictParamDupe);a.paramSet[c]=!0}function Oa(a){a={params:[],defaultCount:0,
defaults:[],firstRestricted:a};X("(");if(!K(")"))for(a.paramSet={};I<va;){var b=a,c=void 0,d=void 0,e=void 0,c=ga,d=Ta();Ya(b,c,c.value);K("\x3d")&&(x(),e=m(),++b.defaultCount);b.params.push(d);b.defaults.push(e);if(K(")"))break;X(",")}X(")");0===a.defaultCount&&(a.defaults=[]);return{params:a.params,defaults:a.defaults,stricted:a.stricted,firstRestricted:a.firstRestricted,message:a.message}}function cb(){var a,b=[],c=[],d,e,f,g,h,k=new E;aa("function");a=Ta();d=Oa(f);b=d.params;c=d.defaults;e=d.stricted;
f=d.firstRestricted;d.message&&(g=d.message);h=xa;d=H();xa&&f&&T(f,g);xa&&e&&qa(e,g);xa=h;return k.finishFunctionDeclaration(a,b,c,d)}function Xa(){if(ga.type===V.Keyword)return"function"===ga.value.toLowerCase()?cb():da(!1);if(ga.type!==V.EOF)return da(!1)}function eb(){var a,b,c,d=[];for(a=0;a<P.tokens.length;++a)b=P.tokens[a],c={type:b.type,value:b.value},b.regex&&(c.regex={pattern:b.regex.pattern,flags:b.regex.flags}),P.range&&(c.range=b.range),P.loc&&(c.loc=b.loc),d.push(c);P.tokens=d}var V,
Ua,Fa,ka,gb,$a,ta,Za,Q,xa,I,la,ma,va,ga,ja,P;V={BooleanLiteral:1,EOF:2,Identifier:3,Keyword:4,NullLiteral:5,NumericLiteral:6,Punctuator:7,StringLiteral:8,RegularExpression:9};Ua={};Ua[V.BooleanLiteral]="Boolean";Ua[V.EOF]="\x3cend\x3e";Ua[V.Identifier]="Identifier";Ua[V.Keyword]="Keyword";Ua[V.NullLiteral]="Null";Ua[V.NumericLiteral]="Numeric";Ua[V.Punctuator]="Punctuator";Ua[V.StringLiteral]="String";Ua[V.RegularExpression]="RegularExpression";Fa="( { [ in typeof instanceof new return case delete throw void \x3d +\x3d -\x3d *\x3d /\x3d %\x3d \x3c\x3c\x3d \x3e\x3e\x3d \x3e\x3e\x3e\x3d \x26\x3d |\x3d ^\x3d , + - * / % ++ -- \x3c\x3c \x3e\x3e \x3e\x3e\x3e \x26 | ^ ! ~ \x26\x26 || ? : \x3d\x3d\x3d \x3d\x3d \x3e\x3d \x3c\x3d \x3c \x3e !\x3d !\x3d\x3d".split(" ");
ka={AssignmentExpression:"AssignmentExpression",ArrayExpression:"ArrayExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",EmptyStatement:"EmptyStatement",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",
FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",Literal:"Literal",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",ObjectExpression:"ObjectExpression",Program:"Program",Property:"Property",ReturnStatement:"ReturnStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator"};gb={ArrowParameterPlaceHolder:{type:"ArrowParameterPlaceHolder"}};
$a={Data:1,Get:2,Set:4};ta={UnexpectedToken:"Unexpected token %0",UnexpectedNumber:"Unexpected number",UnexpectedString:"Unexpected string",UnexpectedIdentifier:"Unexpected identifier",UnexpectedReserved:"Unexpected reserved word",UnexpectedEOS:"Unexpected end of input",NewlineAfterThrow:"Illegal newline after throw",InvalidRegExp:"Invalid regular expression",UnterminatedRegExp:"Invalid regular expression: missing /",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",
MultipleDefaultsInSwitch:"More than one default clause in switch statement",NoCatchOrFinally:"Missing catch or finally after try",UnknownLabel:"Undefined label '%0'",Redeclaration:"%0 '%1' has already been declared",IllegalContinue:"Illegal continue statement",IllegalBreak:"Illegal break statement",IllegalReturn:"Illegal return statement",StrictModeWith:"Strict mode code may not include a with statement",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",
StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictDuplicateProperty:"Duplicate data property in object literal not allowed in strict mode",AccessorDataProperty:"Object literal may not have data and accessor property with the same name",
AccessorGetSet:"Object literal may not have multiple get/set accessors with the same name",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictReservedWord:"Use of future reserved word in strict mode"};Za={NonAsciiIdentifierStart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/,
NonAsciiIdentifierPart:/[\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]/};
N.prototype=E.prototype={processComment:function(){var a,b,c,d=P.bottomRightStack,e,f,g=d[d.length-1];if(!(this.type===ka.Program&&0<this.body.length)){if(0<P.trailingComments.length){c=[];for(e=P.trailingComments.length-1;0<=e;--e)f=P.trailingComments[e],f.range[0]>=this.range[1]&&(c.unshift(f),P.trailingComments.splice(e,1));P.trailingComments=[]}else g&&g.trailingComments&&g.trailingComments[0].range[0]>=this.range[1]&&(c=g.trailingComments,delete g.trailingComments);if(g)for(;g&&g.range[0]>=this.range[0];)a=
g,g=d.pop();if(a)a.leadingComments&&a.leadingComments[a.leadingComments.length-1].range[1]<=this.range[0]&&(this.leadingComments=a.leadingComments,a.leadingComments=void 0);else if(0<P.leadingComments.length)for(b=[],e=P.leadingComments.length-1;0<=e;--e)f=P.leadingComments[e],f.range[1]<=this.range[0]&&(b.unshift(f),P.leadingComments.splice(e,1));b&&0<b.length&&(this.leadingComments=b);c&&0<c.length&&(this.trailingComments=c);d.push(this)}},finish:function(){P.range&&(this.range[1]=I);P.loc&&(this.loc.end=
new G,P.source&&(this.loc.source=P.source));P.attachComment&&this.processComment()},finishArrayExpression:function(a){this.type=ka.ArrayExpression;this.elements=a;this.finish();return this},finishAssignmentExpression:function(a,b,c){this.type=ka.AssignmentExpression;this.operator=a;this.left=b;this.right=c;this.finish();return this},finishBinaryExpression:function(a,b,c){this.type="||"===a||"\x26\x26"===a?ka.LogicalExpression:ka.BinaryExpression;this.operator=a;this.left=b;this.right=c;this.finish();
return this},finishBlockStatement:function(a){this.type=ka.BlockStatement;this.body=a;this.finish();return this},finishBreakStatement:function(a){this.type=ka.BreakStatement;this.label=a;this.finish();return this},finishCallExpression:function(a,b){this.type=ka.CallExpression;this.callee=a;this.arguments=b;this.finish();return this},finishConditionalExpression:function(a,b,c){this.type=ka.ConditionalExpression;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishContinueStatement:function(a){this.type=
ka.ContinueStatement;this.label=a;this.finish();return this},finishEmptyStatement:function(){this.type=ka.EmptyStatement;this.finish();return this},finishExpressionStatement:function(a){this.type=ka.ExpressionStatement;this.expression=a;this.finish();return this},finishForStatement:function(a,b,c,d){this.type=ka.ForStatement;this.init=a;this.test=b;this.update=c;this.body=d;this.finish();return this},finishForInStatement:function(a,b,c){this.type=ka.ForInStatement;this.left=a;this.right=b;this.body=
c;this.each=!1;this.finish();return this},finishFunctionDeclaration:function(a,b,c,d){this.type=ka.FunctionDeclaration;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishFunctionExpression:function(a,b,c,d){this.type=ka.FunctionExpression;this.id=a;this.params=b;this.defaults=c;this.body=d;this.rest=null;this.expression=this.generator=!1;this.finish();return this},finishIdentifier:function(a){this.type=ka.Identifier;
this.name=a;this.finish();return this},finishIfStatement:function(a,b,c){this.type=ka.IfStatement;this.test=a;this.consequent=b;this.alternate=c;this.finish();return this},finishLiteral:function(a){this.type=ka.Literal;this.value=a.value;this.raw=Q.slice(a.start,a.end);a.regex&&(this.regex=a.regex);this.finish();return this},finishMemberExpression:function(a,b,c){this.type=ka.MemberExpression;this.computed="["===a;this.object=b;this.property=c;this.finish();return this},finishObjectExpression:function(a){this.type=
ka.ObjectExpression;this.properties=a;this.finish();return this},finishPostfixExpression:function(a,b){this.type=ka.UpdateExpression;this.operator=a;this.argument=b;this.prefix=!1;this.finish();return this},finishProgram:function(a){this.type=ka.Program;this.body=a;this.finish();return this},finishProperty:function(a,b,c,d,e){this.type=ka.Property;this.key=b;this.value=c;this.kind=a;this.method=d;this.shorthand=e;this.finish();return this},finishReturnStatement:function(a){this.type=ka.ReturnStatement;
this.argument=a;this.finish();return this},finishUnaryExpression:function(a,b){this.type="++"===a||"--"===a?ka.UpdateExpression:ka.UnaryExpression;this.operator=a;this.argument=b;this.prefix=!0;this.finish();return this},finishVariableDeclaration:function(a,b){this.type=ka.VariableDeclaration;this.declarations=a;this.kind=b;this.finish();return this},finishVariableDeclarator:function(a,b){this.type=ka.VariableDeclarator;this.id=a;this.init=b;this.finish();return this}};c.version="2.0.0-dev";c.tokenize=
function(a,b){var c,d;c=String;"string"===typeof a||a instanceof String||(a=c(a));Q=a;I=0;la=0<Q.length?1:0;ma=0;va=Q.length;ga=null;ja={allowIn:!0,labelSet:{},inFunctionBody:!1,inIteration:!1,inSwitch:!1,lastCommentStart:-1};P={};b=b||{};b.tokens=!0;P.tokens=[];P.tokenize=!0;P.openParenToken=-1;P.openCurlyToken=-1;P.range="boolean"===typeof b.range&&b.range;P.loc="boolean"===typeof b.loc&&b.loc;"boolean"===typeof b.comment&&b.comment&&(P.comments=[]);"boolean"===typeof b.tolerant&&b.tolerant&&(P.errors=
[]);try{D();if(ga.type===V.EOF)return P.tokens;for(x();ga.type!==V.EOF;)try{x()}catch(lb){if(P.errors){P.errors.push(lb);break}else throw lb;}eb();d=P.tokens;"undefined"!==typeof P.comments&&(d.comments=P.comments);"undefined"!==typeof P.errors&&(d.errors=P.errors)}catch(lb){throw lb;}finally{P={}}return d};c.parse=function(a,b){var c,d;d=String;"string"===typeof a||a instanceof String||(a=d(a));Q=a;I=0;la=0<Q.length?1:0;ma=0;va=Q.length;ga=null;ja={allowIn:!0,labelSet:{},parenthesisCount:0,inFunctionBody:!1,
inIteration:!1,inSwitch:!1,lastCommentStart:-1};P={};"undefined"!==typeof b&&(P.range="boolean"===typeof b.range&&b.range,P.loc="boolean"===typeof b.loc&&b.loc,P.attachComment="boolean"===typeof b.attachComment&&b.attachComment,P.loc&&null!==b.source&&void 0!==b.source&&(P.source=d(b.source)),"boolean"===typeof b.tokens&&b.tokens&&(P.tokens=[]),"boolean"===typeof b.comment&&b.comment&&(P.comments=[]),"boolean"===typeof b.tolerant&&b.tolerant&&(P.errors=[]),P.attachComment&&(P.range=!0,P.comments=
[],P.bottomRightStack=[],P.trailingComments=[],P.leadingComments=[]));try{var e;q();D();e=new E;xa=!1;var f;a=[];for(var g,h,k;I<va;){g=ga;if(g.type!==V.StringLiteral)break;f=Xa();a.push(f);if(f.expression.type!==ka.Literal)break;h=Q.slice(g.start+1,g.end-1);"use strict"===h?(xa=!0,k&&qa(k,ta.StrictOctalLiteral)):!k&&g.octal&&(k=g)}for(;I<va;){f=Xa();if("undefined"===typeof f)break;a.push(f)}c=e.finishProgram(a);"undefined"!==typeof P.comments&&(c.comments=P.comments);"undefined"!==typeof P.tokens&&
(eb(),c.tokens=P.tokens);"undefined"!==typeof P.errors&&(c.errors=P.errors)}catch(ob){throw ob;}finally{P={}}return c};c.Syntax=function(){var a,b={};"function"===typeof Object.create&&(b=Object.create(null));for(a in ka)ka.hasOwnProperty(a)&&(b[a]=ka[a]);"function"===typeof Object.freeze&&Object.freeze(b);return b}()})},"esri/symbols/support/unitConversionUtils":function(){define(["require","exports","../../renderers/support/utils"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});
a.supportsUnit=function(a){return null!=f.meterIn[a]};a.getMetersPerUnit=function(a){return 1/(f.meterIn[a]||1)};a.supportedUnits=function(){var a=Object.keys(f.meterIn);a.sort();return a}()})},"esri/renderers/support/utils":function(){define("dojo/date/locale ../../Color ../../core/lang ../../core/numberUtils ../../core/unitUtils dojo/i18n!dojo/cldr/nls/gregorian".split(" "),function(c,a,f,b,d,l){function k(b){return b&&b.map(function(b){return new a(b)})}function e(a,b,c){var d="";0===b?d=p.lt+
" ":b===c&&(d=p.gt+" ");return d+a}var h={},p={lte:"\x3c\x3d",gte:"\x3e\x3d",lt:"\x3c",gt:"\x3e",pct:"%",ld:"\u2013"},g={millisecond:0,second:1,minute:2,hour:3,day:4,month:5,year:6},q={millisecond:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},second:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"medium"}},minute:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},hour:{dateOptions:{formatLength:"long"},timeOptions:{formatLength:"short"}},
day:{selector:"date",dateOptions:{formatLength:"long"}},month:{selector:"date",dateOptions:{formatLength:"long"}},year:{selector:"date",dateOptions:{selector:"year"}}},v={formatLength:"short",fullYear:!0},y={formatLength:"short"};f.mixin(h,{meterIn:{inches:d.convertUnit(1,"meters","inches"),feet:d.convertUnit(1,"meters","feet"),"us-feet":d.convertUnit(1,"meters","us-feet"),yards:d.convertUnit(1,"meters","yards"),miles:d.convertUnit(1,"meters","miles"),"nautical-miles":d.convertUnit(1,"meters","nautical-miles"),
millimeters:d.convertUnit(1,"meters","millimeters"),centimeters:d.convertUnit(1,"meters","centimeters"),decimeters:d.convertUnit(1,"meters","decimeters"),meters:d.convertUnit(1,"meters","meters"),kilometers:d.convertUnit(1,"meters","kilometers"),"decimal-degrees":1/d.lengthToDegrees(1,"meters")},timelineDateFormatOptions:{selector:"date",dateOptions:{formatLength:"short",fullYear:!0}},formatDate:function(a,b){var d=[];null==a||a instanceof Date||(a=new Date(a));b=b||{};b=f.mixin({},b);var e=b.selector?
b.selector.toLowerCase():null,g=!e||-1<e.indexOf("time"),e=!e||-1<e.indexOf("date");g&&(b.timeOptions=b.timeOptions||y,b.timeOptions&&(b.timeOptions=f.mixin({},b.timeOptions),b.timeOptions.selector=b.timeOptions.selector||"time",d.push(b.timeOptions)));e&&(b.dateOptions=b.dateOptions||v,b.dateOptions&&(b.dateOptions=f.mixin({},b.dateOptions),b.dateOptions.selector=b.dateOptions.selector||"date",d.push(b.dateOptions)));d&&d.length?(d=d.map(function(b){return c.format(a,b)}),b=1==d.length?d[0]:l["dateTimeFormat-medium"].replace(/\'/g,
"").replace(/\{(\d+)\}/g,function(a,b){return d[b]})):b=c.format(a);return b},createColorStops:function(a){var c=a.values,d=a.colors,f=a.labelIndexes,g=a.isDate,k=a.dateFormatOptions;a=[];return a=c.map(function(a,l){var p=null;if(!f||-1<f.indexOf(l)){var n;(n=g?h.formatDate(a,k):b.format(a))&&(p=e(n,l,c.length-1))}return{value:a,color:d[l],label:p}})},updateColorStops:function(a){var c=a.stops,d=a.changes,f=a.isDate,g=a.dateFormatOptions,k=[],l,p=c.map(function(a){return a.value});d.forEach(function(a){k.push(a.index);
p[a.index]=a.value});l=b.round(p,{indexes:k});c.forEach(function(a,d){a.value=p[d];if(null!=a.label){var k,n=null;(k=f?h.formatDate(l[d],g):b.format(l[d]))&&(n=e(k,d,c.length-1));a.label=n}})},createClassBreakLabel:function(a){var c=a.minValue,d=a.maxValue,e=a.isFirstBreak?"":p.gt+" ";a="percent-of-total"===a.normalizationType?p.pct:"";c=null==c?"":b.format(c);d=null==d?"":b.format(d);return e+c+a+" "+p.ld+" "+d+a},setLabelsForClassBreaks:function(a){var c=a.classBreakInfos,d=a.classificationMethod,
e=a.normalizationType,f=[];c&&c.length&&("standard-deviation"===d?console.log("setLabelsForClassBreaks: cannot set labels for class breaks generated using 'standard-deviation' method."):a.round?(f.push(c[0].minValue),c.forEach(function(a){f.push(a.maxValue)}),f=b.round(f),c.forEach(function(a,b){a.label=h.createClassBreakLabel({minValue:0===b?f[0]:f[b],maxValue:f[b+1],isFirstBreak:0===b,normalizationType:e})})):c.forEach(function(a,b){a.label=h.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,
isFirstBreak:0===b,normalizationType:e})}))},updateClassBreak:function(a){var b=a.classBreaks,c=a.normalizationType,d=a.change,e=d.index,d=d.value,f=-1,g=-1,k=b.length;"standard-deviation"===a.classificationMethod?console.log("updateClassBreak: cannot update labels for class breaks generated using 'standard-deviation' method."):(0===e?f=e:e===k?g=e-1:(g=e-1,f=e),-1<f&&f<k&&(a=b[f],a.minValue=d,a.label=h.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===f,normalizationType:c})),
-1<g&&g<k&&(a=b[g],a.maxValue=d,a.label=h.createClassBreakLabel({minValue:a.minValue,maxValue:a.maxValue,isFirstBreak:0===g,normalizationType:c})))},calculateDateFormatInterval:function(a){var b,c,d=a.length,e,f,h,k,l,p,q=Infinity,v;a=a.map(function(a){return new Date(a)});for(b=0;b<d-1;b++){e=a[b];h=[];l=Infinity;p="";for(c=b+1;c<d;c++)f=a[c],f=e.getFullYear()!==f.getFullYear()&&"year"||e.getMonth()!==f.getMonth()&&"month"||e.getDate()!==f.getDate()&&"day"||e.getHours()!==f.getHours()&&"hour"||e.getMinutes()!==
f.getMinutes()&&"minute"||e.getSeconds()!==f.getSeconds()&&"second"||"millisecond",k=g[f],k<l&&(l=k,p=f),h.push(f);l<q&&(q=l,v=p)}return v},createUniqueValueLabel:function(a){var c=a.value,d=a.fieldInfo,e=a.domain;a=a.dateFormatInterval;var f=String(c);(e=e&&e.codedValues?e.getName(c):null)?f=e:"number"===typeof c&&(f=d&&"date"===d.type?h.formatDate(c,a&&q[a]):b.format(c));return f},cloneColorVariable:function(b){var c;b&&(c=f.mixin({},b),c.colors=k(c.colors),c.stops=c.stops&&c.stops.map(function(b){b=
f.mixin({},b);b.color&&(b.color=new a(b.color));return b}),c.legendOptions&&(c.legendOptions=f.mixin({},c.legendOptions)));return c},cloneOpacityVariable:function(a){var b;if(a){b=f.mixin({},a);if(a=b.opacityValues)b.opacityValues=a.slice(0);if(a=b.stops)b.stops=a.map(function(a){return f.mixin({},a)});if(a=b.legendOptions)b.legendOptions=f.mixin({},a)}return b},cloneSizeVariable:function(a){var b;a&&(b=f.mixin({},a),b.stops&&(b.stops=b.stops.map(function(a){return f.mixin({},a)})),(a=b.minSize)&&
"object"===typeof a&&(b.minSize=h.cloneSizeVariable(a)),(a=b.maxSize)&&"object"===typeof a&&(b.maxSize=h.cloneSizeVariable(a)),a=b.legendOptions)&&(b.legendOptions=f.mixin({},a),a=a.customValues)&&(b.legendOptions.customValues=a.slice(0));return b}});return h})},"esri/core/numberUtils":function(){define(["dojo/number","dojo/i18n!dojo/cldr/nls/number"],function(c,a){function f(a,b){return a-b}var b=/^-?(\d+)(\.(\d+))?$/i,d=new RegExp("\\"+a.decimal+"0+$","g"),l=/(\d)0*$/g,k={numDigits:function(a){var c=
String(a),d=c.match(b);a={integer:0,fractional:0};d&&d[1]?(a.integer=d[1].split("").length,a.fractional=d[3]?d[3].split("").length:0):-1<c.toLowerCase().indexOf("e")&&(d=c.split("e"),c=d[0],d=d[1],c&&d&&(c=Number(c),d=Number(d),(a=0<d)||(d=Math.abs(d)),c=k.numDigits(c),a?(c.integer+=d,c.fractional=d>c.fractional?0:c.fractional-d):(c.fractional+=d,c.integer=d>c.integer?1:c.integer-d),a=c));return a},percentChange:function(a,b,c,d){var e={previous:null,next:null},f;null!=c&&(f=a-c,e.previous=Math.floor(Math.abs(100*
(b-c-f)/f)));null!=d&&(f=d-a,e.next=Math.floor(Math.abs(100*(d-b-f)/f)));return e},round:function(a,b){a=a.slice(0);var c,d,e,h,l,C,B,r,A=b&&null!=b.tolerance?b.tolerance:2,u=b&&b.indexes,n=b&&null!=b.strictBounds?b.strictBounds:!1;if(u)u.sort(f);else for(u=[],l=0;l<a.length;l++)u.push(l);for(l=0;l<u.length;l++)if(r=u[l],b=a[r],c=0===r?null:a[r-1],d=r===a.length-1?null:a[r+1],e=k.numDigits(b),e=e.fractional){C=0;for(B=!1;C<=e&&!B;){h=b;B=C;var t=void 0,x=void 0,t=Number(h.toFixed(B));t<h?x=t+1/Math.pow(10,
B):(x=t,t-=1/Math.pow(10,B));t=Number(t.toFixed(B));x=Number(x.toFixed(B));h=[t,x];h=n&&0===l?h[1]:h[0];B=A;var t=k.percentChange(b,h,c,d),D=x=void 0,x=void 0,x=null==t.previous||t.previous<=B,D=null==t.next||t.next<=B;B=x=x&&D||t.previous+t.next<=2*B;C++}B&&(a[r]=h)}return a},format:function(a,b){b=b||{places:20,round:-1};(a=c.format(a,b))&&(a=a.replace(l,"$1").replace(d,""));return a}};return k})},"esri/symbols/support/Symbol3DMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(c,a,f,b,d,l,k){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}f(c,a);d=c;c.prototype.clone=function(){return new d({color:this.color?this.color.clone():null})};var d;b([l.property(k.colorAndTransparencyProperty)],c.prototype,"color",void 0);return c=d=b([l.subclass("esri.symbols.support.Symbol3DMaterial")],c)}(l.declared(d));a.Symbol3DMaterial=c;a.default=c})},"esri/symbols/support/materialUtils":function(){define("require exports ../../Color ../../core/screenUtils ../../core/accessorSupport/ensureType ../../webdoc/support/opacityUtils".split(" "),
function(c,a,f,b,d,l){function k(a,b){a=null!=b.transparency?l.transparencyToOpacity(b.transparency):1;if((b=b.color)&&Array.isArray(b))return new f([b[0]||0,b[1]||0,b[2]||0,a])}function e(a,b){b.color=a.toJSON().slice(0,3);a=l.opacityToTransparency(a.a);0!==a&&(b.transparency=a)}Object.defineProperty(a,"__esModule",{value:!0});a.readColorAndTransparency=k;a.writeColorAndTransparency=e;a.colorAndTransparencyProperty={type:f,json:{type:[d.Integer],read:{source:["color","transparency"],reader:k},write:{target:{color:{type:[d.Integer]},
transparency:{type:d.Integer}},writer:e}}};a.screenSizeProperty={type:Number,cast:b.toPt,json:{write:!0}}})},"esri/core/screenUtils":function(){define(["require","exports"],function(c,a){function f(b){return b?72*b/a.DPI:0}Object.defineProperty(a,"__esModule",{value:!0});var b=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i;a.DPI=96;a.pt2px=function(b){return b?b/72*a.DPI:0};a.px2pt=f;a.toPt=function(a){if("string"===typeof a){if(b.test(a)){var c=a.match(b),d=Number(c[1]),c=c[3]&&c[3].toLowerCase();a="-"===a.charAt(0);
d="px"===c?f(d):d;return a?-d:d}console.warn("screenUtils.toPt: input not recognized!");return null}return a}})},"esri/webdoc/support/opacityUtils":function(){define(["require","exports","../../core/accessorSupport/ensureType"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.opacityToTransparency=function(a){a=f.ensureInteger(100*(1-a));return Math.max(0,Math.min(a,100))};a.transparencyToOpacity=function(a){return Math.max(0,Math.min(1-a/100,1))}})},"esri/symbols/edges/utils":function(){define(["require",
"exports","./Edges3D","./SketchEdges3D","./SolidEdges3D"],function(c,a,f,b,d){function l(a,c,f){if(!a)return a;switch(a.type){case "solid":return c=new d,c.read(a,f),c;case "sketch":return c=new b,c.read(a,f),c}}Object.defineProperty(a,"__esModule",{value:!0});a.read=l;a.symbol3dEdgesProperty={types:{key:"type",base:f,typeMap:{solid:d,sketch:b}},json:{read:l,write:!0}}})},"esri/symbols/edges/Edges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/tsSupport/assignHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g){return function(a){function c(b){b=a.call(this)||this;b.color=new l([0,0,0,1]);b.extensionLength=0;b.size=h.px2pt(1);return b}f(c,a);c.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=d({},a),delete a.type);return a};c.prototype.clone=function(){};c.prototype.cloneProperties=function(){return{color:e.clone(this.color),size:this.size,extensionLength:this.extensionLength}};b([p.property({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],
c.prototype,"type",void 0);b([p.property(g.colorAndTransparencyProperty)],c.prototype,"color",void 0);b([p.property(d({},g.screenSizeProperty,{json:{write:{overridePolicy:function(a){return{enabled:!!a}}}}}))],c.prototype,"extensionLength",void 0);b([p.property(g.screenSizeProperty)],c.prototype,"size",void 0);return c=b([p.subclass("esri.symbols.edges.Edges3D")],c)}(p.declared(k))})},"esri/symbols/edges/SketchEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),
function(c,a,f,b,d,l){return function(a){function c(b){b=a.call(this)||this;b.type="sketch";return b}f(c,a);h=c;c.prototype.clone=function(){return new h(this.cloneProperties())};var h;b([d.property({type:["sketch"]})],c.prototype,"type",void 0);return c=h=b([d.subclass("esri.symbols.edges.SketchEdges3D")],c)}(d.declared(l))})},"esri/symbols/edges/SolidEdges3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Edges3D".split(" "),
function(c,a,f,b,d,l){return function(a){function c(b){b=a.call(this)||this;b.type="solid";return b}f(c,a);h=c;c.prototype.clone=function(){return new h(this.cloneProperties())};var h;b([d.property({type:["solid"]})],c.prototype,"type",void 0);return c=h=b([d.subclass("esri.symbols.support.SolidEdges3D")],c)}(d.declared(l))})},"esri/symbols/FillSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./edges/utils ./support/Symbol3DFillMaterial ./support/Symbol3DOutline".split(" "),
function(c,a,f,b,d,l,k,e,h){return function(a){function c(b){b=a.call(this)||this;b.type="fill";b.material=null;b.outline=null;b.edges=null;return b}f(c,a);l=c;c.prototype.clone=function(){return new l({edges:this.edges&&this.edges.clone(),enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone()})};var l;b([d.enumeration.serializable()({Fill:"fill"})],c.prototype,"type",void 0);b([d.property({type:e.default})],
c.prototype,"material",void 0);b([d.property({type:h.default,json:{write:!0}})],c.prototype,"outline",void 0);b([d.property(k.symbol3dEdgesProperty)],c.prototype,"edges",void 0);return c=l=b([d.subclass("esri.symbols.FillSymbol3DLayer")],c)}(d.declared(l))})},"esri/symbols/support/Symbol3DFillMaterial":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Symbol3DMaterial".split(" "),function(c,a,f,
b,d,l){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}f(c,a);h=c;c.prototype.clone=function(){return new h({color:this.color?this.color.clone():null,colorMixMode:this.colorMixMode})};var h;b([d.enumeration.serializable()({multiply:"multiply",replace:"replace",tint:"tint"})],c.prototype,"colorMixMode",void 0);return c=h=b([d.subclass("esri.symbols.support.Symbol3DFillMaterial")],c)}(d.declared(l.default));a.Symbol3DFillMaterial=
c;a.default=c})},"esri/symbols/support/Symbol3DOutline":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/screenUtils ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(c,a,f,b,d,l,k,e,h){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new d([0,0,0,1]);b.size=k.px2pt(1);return b}f(c,a);
l=c;c.prototype.clone=function(){return new l({color:this.color?this.color.clone():null,size:this.size})};var l;b([e.property(h.colorAndTransparencyProperty)],c.prototype,"color",void 0);b([e.property(h.screenSizeProperty)],c.prototype,"size",void 0);return c=l=b([e.subclass("esri.symbols.support.Symbol3DOutline")],c)}(e.declared(l));a.Symbol3DOutline=c;a.default=c})},"esri/symbols/IconSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./support/IconSymbol3DLayerResource ./support/materialUtils ./support/Symbol3DOutline".split(" "),
function(c,a,f,b,d,l,k,e,h){return function(a){function c(b){b=a.call(this)||this;b.material=null;b.resource=null;b.type="icon";b.size=12;b.anchor=void 0;b.outline=void 0;return b}f(c,a);l=c;c.prototype.clone=function(){return new l({anchor:this.anchor,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),outline:this.outline&&this.outline.clone(),resource:this.resource&&this.resource.clone(),size:this.size})};var l;b([d.property()],
c.prototype,"material",void 0);b([d.property({type:k.default,json:{write:!0}})],c.prototype,"resource",void 0);b([d.enumeration.serializable()({Icon:"icon"})],c.prototype,"type",void 0);b([d.property(e.screenSizeProperty)],c.prototype,"size",void 0);b([d.enumeration.serializable()({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right"})],c.prototype,"anchor",void 0);b([d.property({type:h.default,
json:{write:!0}})],c.prototype,"outline",void 0);return c=l=b([d.subclass("esri.symbols.IconSymbol3DLayer")],c)}(d.declared(l))})},"esri/symbols/support/IconSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(c,a,f,b,d,l,k,e){Object.defineProperty(a,"__esModule",{value:!0});var h=l.strict()({circle:"circle",
square:"square",cross:"cross",x:"x",kite:"kite"});c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}f(c,a);d=c;c.prototype.readHref=function(a,b,c){return a?k.read(a,c):b.dataURI};c.prototype.writeHref=function(a,b,c,d){a&&(k.isDataProtocol(a)?b.dataURI=a:(b.href=k.write(a,d),k.isAbsolute(b.href)&&(b.href=k.normalize(b.href))))};c.prototype.clone=function(){return new d({href:this.href,primitive:this.primitive})};var d;b([e.property({type:String,json:{write:!0,read:{source:["href",
"dataURI"]}}})],c.prototype,"href",void 0);b([e.reader("href")],c.prototype,"readHref",null);b([e.writer("href",{href:{type:String},dataURI:{type:String}})],c.prototype,"writeHref",null);b([e.enumeration.serializable()(h)],c.prototype,"primitive",void 0);return c=d=b([e.subclass("esri.symbols.support.IconSymbol3DLayerResource")],c)}(e.declared(d));a.IconSymbol3DLayerResource=c;a.default=c})},"esri/symbols/LineSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/screenUtils ../core/accessorSupport/decorators ./Symbol3DLayer ./support/materialUtils".split(" "),
function(c,a,f,b,d,l,k,e){return function(a){function c(b){b=a.call(this)||this;b.material=null;b.type="line";b.size=d.px2pt(1);return b}f(c,a);g=c;c.prototype.clone=function(){return new g({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var g;b([l.property()],c.prototype,"material",void 0);b([l.enumeration.serializable()({Line:"line"})],c.prototype,"type",void 0);b([l.property(e.screenSizeProperty)],
c.prototype,"size",void 0);return c=g=b([l.subclass("esri.symbols.LineSymbol3DLayer")],c)}(l.declared(k))})},"esri/symbols/ObjectSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer ./support/ObjectSymbol3DLayerResource ./support/Symbol3DMaterial".split(" "),function(c,a,f,b,d,l,k,e){return function(a){function c(b){b=a.call(this)||this;b.material=null;b.resource=null;b.type="object";
b.width=void 0;b.height=void 0;b.depth=void 0;b.anchor=void 0;b.heading=void 0;b.tilt=void 0;b.roll=void 0;return b}f(c,a);g=c;c.prototype.clone=function(){return new g({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,depth:this.depth,enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),height:this.height,material:this.material&&this.material.clone(),resource:this.resource&&this.resource.clone(),width:this.width})};Object.defineProperty(c.prototype,
"isPrimitive",{get:function(){return!this.resource||"string"!==typeof this.resource.href},enumerable:!0,configurable:!0});var g;b([d.property({type:e.default})],c.prototype,"material",void 0);b([d.property({type:k.default,json:{write:!0}})],c.prototype,"resource",void 0);b([d.enumeration.serializable()({Object:"object"})],c.prototype,"type",void 0);b([d.property({type:Number,json:{write:!0}})],c.prototype,"width",void 0);b([d.property({type:Number,json:{write:!0}})],c.prototype,"height",void 0);b([d.property({type:Number,
json:{write:!0}})],c.prototype,"depth",void 0);b([d.enumeration.serializable()({center:"center",top:"top",bottom:"bottom",origin:"origin"})],c.prototype,"anchor",void 0);b([d.property({type:Number,json:{write:!0}})],c.prototype,"heading",void 0);b([d.property({type:Number,json:{write:!0}})],c.prototype,"tilt",void 0);b([d.property({type:Number,json:{write:!0}})],c.prototype,"roll",void 0);b([d.property({readOnly:!0,dependsOn:["resource","resource.href"]})],c.prototype,"isPrimitive",null);return c=
g=b([d.subclass("esri.symbols.ObjectSymbol3DLayer")],c)}(d.declared(l))})},"esri/symbols/support/ObjectSymbol3DLayerResource":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/urlUtils ../../core/accessorSupport/decorators".split(" "),function(c,a,f,b,d,l,k,e){Object.defineProperty(a,"__esModule",{value:!0});var h=l.strict()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",
diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}f(c,a);d=c;c.prototype.readHref=function(a,b,c){return k.read(a,c)};c.prototype.writeHref=function(a,b,c,d){a&&(b.href=k.write(a,d),k.isAbsolute(b.href)&&(b.href=k.normalize(b.href)))};c.prototype.clone=function(){return new d({href:this.href,primitive:this.primitive})};var d;b([e.property({type:String,json:{write:!0}})],c.prototype,"href",void 0);b([e.reader("href")],
c.prototype,"readHref",null);b([e.writer("href")],c.prototype,"writeHref",null);b([e.enumeration.serializable()(h)],c.prototype,"primitive",void 0);return c=d=b([e.subclass("esri.symbols.support.ObjectSymbol3DLayerResource")],c)}(e.declared(d));a.ObjectSymbol3DLayerResource=c;a.default=c})},"esri/symbols/PathSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/accessorSupport/decorators ./Symbol3DLayer".split(" "),function(c,
a,f,b,d,l){return function(a){function c(b){b=a.call(this)||this;b.material=null;b.type="path";b.size=void 0;return b}f(c,a);h=c;c.prototype.readSize=function(a,b){return a||b.width||0};c.prototype.clone=function(){return new h({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),material:this.material&&this.material.clone(),size:this.size})};var h;b([d.property()],c.prototype,"material",void 0);b([d.enumeration.serializable()({Path:"path"})],c.prototype,"type",void 0);
b([d.property({type:Number,json:{write:{enabled:!0,target:{size:{type:Number},width:{type:Number}}}}})],c.prototype,"size",void 0);b([d.reader("size",["size","width"])],c.prototype,"readSize",null);return c=h=b([d.subclass("esri.symbols.PathSymbol3DLayer")],c)}(d.declared(l))})},"esri/symbols/Symbol":function(){define(["../core/kebabDictionary","../core/JSONSupport","../Color"],function(c,a,f){c=c({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",
esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d"});var b=0;return a.createSubclass({declaredClass:"esri.symbols.Symbol",constructor:function(){this.id="sym"+b++},properties:{type:{type:String,value:null,json:{read:c.read,write:{ignoreOrigin:!0,writer:c.write}}},color:{type:f,value:new f([0,0,0,1]),json:{read:function(a){return a&&null!=a[0]?[a[0],a[1],a[2],a[3]/255]:a},write:{allowNull:!0}}}}})})},
"esri/symbols/TextSymbol3DLayer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/assignHelper ../core/lang ../core/accessorSupport/decorators ./Font ./Symbol3DLayer ./support/materialUtils ./support/Symbol3DHalo".split(" "),function(c,a,f,b,d,l,k,e,h,p,g){return function(a){function c(b){b=a.call(this)||this;b.font=null;b.halo=null;b.material=null;b.size=9;b.text=void 0;b.type="text";return b}f(c,a);h=c;c.prototype.writeFont=
function(a,b,c,e){c=d({},e,{textSymbol3D:!0});b.font=a.write({},c)};c.prototype.clone=function(){return new h({enabled:this.enabled,elevationInfo:this.elevationInfo&&this.elevationInfo.clone(),font:this.font&&l.clone(this.font),halo:this.halo&&l.clone(this.halo),material:this.material&&this.material.clone(),size:this.size,text:this.text})};var h;b([k.property({type:e,json:{write:!0}})],c.prototype,"font",void 0);b([k.writer("font")],c.prototype,"writeFont",null);b([k.property({type:g.default,json:{write:!0}})],
c.prototype,"halo",void 0);b([k.property()],c.prototype,"material",void 0);b([k.property(p.screenSizeProperty)],c.prototype,"size",void 0);b([k.property({type:String,json:{write:!0}})],c.prototype,"text",void 0);b([k.enumeration.serializable()({Text:"text"})],c.prototype,"type",void 0);return c=h=b([k.subclass("esri.symbols.TextSymbol3DLayer")],c)}(k.declared(h))})},"esri/symbols/Font":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/screenUtils ../core/accessorSupport/decorators ../core/accessorSupport/write".split(" "),
function(c,a,f,b,d,l,k,e){return function(a){function c(b){b=a.call(this)||this;b.decoration="none";b.family="sans-serif";b.size=9;b.style="normal";b.weight="normal";return b}f(c,a);d=c;c.prototype.castSize=function(a){return l.toPt(a)};c.prototype.clone=function(){return new d({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})};var d;b([k.property({type:["underline","line-through","none"],json:{write:{overridePolicy:e.disableWriteDefaultPolicy("none")}}})],
c.prototype,"decoration",void 0);b([k.property({type:String,json:{write:!0}})],c.prototype,"family",void 0);b([k.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:!c||!c.textSymbol3D}}}}})],c.prototype,"size",void 0);b([k.cast("size")],c.prototype,"castSize",null);b([k.property({type:["normal","italic","oblique"],json:{write:{overridePolicy:e.disableWriteDefaultPolicy("normal")}}})],c.prototype,"style",void 0);b([k.property({type:["normal","bold","bolder","lighter"],
json:{write:{overridePolicy:e.disableWriteDefaultPolicy("normal")}}})],c.prototype,"weight",void 0);return c=d=b([k.subclass("esri.symbols.Font")],c)}(k.declared(d))})},"esri/symbols/support/Symbol3DHalo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ./materialUtils".split(" "),function(c,a,f,b,d,l,k,e,h){Object.defineProperty(a,"__esModule",{value:!0});
c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new d([0,0,0,1]);b.size=0;return b}f(c,a);l=c;c.prototype.clone=function(){return new l({color:k.clone(this.color),size:this.size})};var l;b([e.property(h.colorAndTransparencyProperty)],c.prototype,"color",void 0);b([e.property(h.screenSizeProperty)],c.prototype,"size",void 0);return c=l=b([e.subclass("esri.symbols.support.Symbol3DHalo")],c)}(e.declared(l));a.Symbol3DHalo=c;a.default=c})},"esri/symbols/support/StyleOrigin":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators ../../portal/Portal".split(" "),
function(c,a,f,b,d,l,k){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.portal=null;return b}f(c,a);d=c;c.prototype.clone=function(){return new d({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};var d;b([l.property({type:String})],c.prototype,"name",void 0);b([l.property({type:String})],c.prototype,"styleUrl",void 0);b([l.property({type:String})],c.prototype,"styleName",void 0);b([l.property({type:k})],c.prototype,"portal",void 0);
return c=d=b([l.subclass("esri.symbols.support.StyleOrigin")],c)}(l.declared(d))})},"esri/symbols/support/Thumbnail":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/accessorSupport/decorators".split(" "),function(c,a,f,b,d,l){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}f(c,a);d=c;c.prototype.clone=function(){return new d({url:this.url})};
var d;b([l.property({type:String})],c.prototype,"url",void 0);return c=d=b([l.subclass("esri.symbols.support.Thumbnail")],c)}(l.declared(d));a.Thumbnail=c;a.default=c})},"esri/symbols/callouts/calloutUtils":function(){define(["require","exports","./Callout3D","./LineCallout3D"],function(c,a,f,b){function d(a){if(!a)return!1;a=a.verticalOffset;return!a||0>=a.screenLength||0>=a.maxWorldLength?!1:!0}function l(a,c,d){if(!a)return a;switch(a.type){case "line":return c=new b,c.read(a,d),c}}Object.defineProperty(a,
"__esModule",{value:!0});a.hasVisibleVerticalOffset=d;a.hasVisibleCallout=function(a){if(!a||!a.supportsCallout||!a.supportsCallout())return!1;var b=a.callout;return b&&b.visible?d(a)?!0:!1:!1};a.isCalloutSupport=function(a){return"point-3d"===a.type||"label-3d"===a.type};a.read=l;a.calloutProperty={types:{key:"type",base:f,typeMap:{line:b}},json:{read:l,write:!0}}})},"esri/symbols/callouts/Callout3D":function(){define("require exports ../../core/tsSupport/assignHelper ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(c,a,f,b,d,l,k){return function(a){function c(b){b=a.call(this)||this;b.visible=!0;return b}b(c,a);c.prototype.normalizeCtorArgs=function(a){a&&a.type&&(a=f({},a),delete a.type);return a};c.prototype.clone=function(){};d([k.property({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],c.prototype,"type",void 0);d([k.property({readOnly:!0})],c.prototype,"visible",void 0);return c=d([k.subclass("esri.symbols.callouts.Callout3D")],c)}(k.declared(l))})},"esri/symbols/callouts/LineCallout3D":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/lang ../../core/screenUtils ../../core/accessorSupport/decorators ./Callout3D ./LineCallout3DBorder ../support/materialUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g){return function(a){function c(b){b=a.call(this)||this;b.type="line";b.color=new d([0,0,0,1]);b.size=k.px2pt(1);b.border=null;return b}f(c,a);h=c;Object.defineProperty(c.prototype,"visible",{get:function(){return 0<this.size&&0<this.color.a},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new h({color:l.clone(this.color),size:this.size,border:l.clone(this.border)})};var h;b([e.property({type:["line"]})],c.prototype,"type",void 0);b([e.property(g.colorAndTransparencyProperty)],
c.prototype,"color",void 0);b([e.property(g.screenSizeProperty)],c.prototype,"size",void 0);b([e.property({type:p.default,json:{write:!0}})],c.prototype,"border",void 0);b([e.property({dependsOn:["size","color"],readOnly:!0})],c.prototype,"visible",null);return c=h=b([e.subclass("esri.symbols.callouts.LineCallout3D")],c)}(e.declared(h))})},"esri/symbols/callouts/LineCallout3DBorder":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators ../support/materialUtils".split(" "),
function(c,a,f,b,d,l,k,e,h){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.color=new d("white");return b}f(c,a);l=c;c.prototype.clone=function(){return new l({color:k.clone(this.color)})};var l;b([e.property(h.colorAndTransparencyProperty)],c.prototype,"color",void 0);return c=l=b([e.subclass("esri.symbols.callouts.LineCallout3DBorder")],c)}(e.declared(l));a.LineCallout3DBorder=c;a.default=c})},"esri/symbols/support/Symbol3DVerticalOffset":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./materialUtils".split(" "),
function(c,a,f,b,d,l,k){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.screenLength=0;b.minWorldLength=0;return b}f(c,a);d=c;c.prototype.writeMinWorldLength=function(a,b,c){a&&(b[c]=a)};c.prototype.clone=function(){return new d({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})};var d;b([l.property(k.screenSizeProperty)],c.prototype,"screenLength",void 0);b([l.property({type:Number,
json:{write:!0}})],c.prototype,"minWorldLength",void 0);b([l.writer("minWorldLength")],c.prototype,"writeMinWorldLength",null);b([l.property({type:Number,json:{write:!0}})],c.prototype,"maxWorldLength",void 0);return c=d=b([l.subclass("esri.symbols.support.Symbol3DVerticalOffset")],c)}(l.declared(d));a.Symbol3DVerticalOffset=c;a.default=c})},"esri/symbols/LineSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./LineSymbol3DLayer ./PathSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g){var q=d.ofType({base:null,key:"type",typeMap:{line:e,text:g,path:h}});return function(a){function c(b){b=a.call(this)||this;b.symbolLayers=new q;b.type="line-3d";return b}f(c,a);d=c;c.prototype.clone=function(){return new d({styleOrigin:l.clone(this.styleOrigin),symbolLayers:l.clone(this.symbolLayers),thumbnail:l.clone(this.thumbnail)})};var d;b([k.property({type:q})],c.prototype,"symbolLayers",void 0);b([k.enumeration.serializable()({LineSymbol3D:"line-3d"})],c.prototype,
"type",void 0);return c=d=b([k.subclass("esri.symbols.LineSymbol3D")],c)}(k.declared(p))})},"esri/symbols/MeshSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/lang ../core/accessorSupport/decorators ./FillSymbol3DLayer ./Symbol3D".split(" "),function(c,a,f,b,d,l,k,e,h){var p=d.ofType({base:null,key:"type",typeMap:{fill:e}});return function(a){function c(b){b=a.call(this)||this;b.symbolLayers=new p;b.type=
"mesh-3d";return b}f(c,a);d=c;c.prototype.clone=function(){return new d({styleOrigin:l.clone(this.styleOrigin),symbolLayers:l.clone(this.symbolLayers),thumbnail:l.clone(this.thumbnail)})};var d;b([k.property({type:p})],c.prototype,"symbolLayers",void 0);b([k.enumeration.serializable()({MeshSymbol3D:"mesh-3d"})],c.prototype,"type",void 0);return c=d=b([k.subclass("esri.symbols.MeshSymbol3D")],c)}(k.declared(h))})},"esri/symbols/PictureFillSymbol":function(){define(["../core/declare","../core/lang",
"../core/screenUtils","./FillSymbol","./support/urlUtils"],function(c,a,f,b,d){var l={xscale:1,yscale:1,xoffset:0,yoffset:0,width:12,height:12},k=c(b,{declaredClass:"esri.symbols.PictureFillSymbol",properties:{type:"picture-fill",url:d.urlPropertyDefinition,xscale:{value:1,json:{write:!0}},yscale:{value:1,json:{write:!0}},width:{value:12,cast:f.toPt,json:{write:!0}},height:{value:12,cast:f.toPt,json:{write:!0}},xoffset:{value:0,cast:f.toPt,json:{write:!0}},yoffset:{value:0,cast:f.toPt,json:{write:!0}},
source:d.sourcePropertyDefinition},getDefaults:function(){return a.mixin(this.inherited(arguments),l)},normalizeCtorArgs:function(a,b,c,d){if(a&&"string"!==typeof a&&null==a.imageData)return a;var e={};a&&(e.url=a);b&&(e.outline=b);null!=c&&(e.width=f.toPt(c));null!=d&&(e.height=f.toPt(d));return e},clone:function(){var b=new k({color:a.clone(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,
yscale:this.yscale});b._set("source",a.clone(this.source));return b}});k.defaultProps=l;return k})},"esri/symbols/FillSymbol":function(){define(["./Symbol","./SimpleLineSymbol"],function(c,a){return c.createSubclass({declaredClass:"esri.symbols.FillSymbol",properties:{outline:{type:a,json:{read:{default:null},write:!0}},type:null}})})},"esri/symbols/SimpleLineSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./LineSymbol"],function(c,a,f,b){var d={STYLE_SOLID:"solid",
STYLE_DASH:"dash",STYLE_DOT:"dot",STYLE_DASHDOT:"dash-dot",STYLE_DASHDOTDOT:"long-dash-dot-dot",STYLE_NULL:"none",STYLE_SHORTDASH:"short-dash",STYLE_SHORTDOT:"short-dot",STYLE_SHORTDASHDOT:"short-dash-dot",STYLE_SHORTDASHDOTDOT:"short-dash-dot-dot",STYLE_LONGDASH:"long-dash",STYLE_LONGDASHDOT:"long-dash-dot",CAP_BUTT:"butt",CAP_ROUND:"round",CAP_SQUARE:"square",JOIN_MITER:"miter",JOIN_ROUND:"round",JOIN_BEVEL:"bevel"},l={color:[0,0,0,1],style:d.STYLE_SOLID,width:.75,cap:d.CAP_ROUND,join:d.JOIN_ROUND,
miterLimit:7.5},k=c(b,{declaredClass:"esri.symbols.SimpleLineSymbol",properties:{type:"simple-line",style:{value:d.STYLE_SOLID,json:{read:function(b,c){return a.valueOf(this._jsonStyles,b)||void 0},write:function(a,b){b.style=this._jsonStyles[a]}}},cap:{value:d.CAP_ROUND,json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}},join:{value:d.JOIN_ROUND,json:{write:{overridePolicy:function(a,b,c){return{enabled:"round"!==a&&(null==c||null==c.origin)}}}}},
miterLimit:{value:7.5,cast:f.toPt,json:{read:!1,write:!1}}},_jsonStyles:{solid:"esriSLSSolid",dash:"esriSLSDash",dot:"esriSLSDot","dash-dot":"esriSLSDashDot","long-dash-dot-dot":"esriSLSDashDotDot",none:"esriSLSNull","inside-frame":"esriSLSInsideFrame","short-dash":"esriSLSShortDash","short-dot":"esriSLSShortDot","short-dash-dot":"esriSLSShortDashDot","short-dash-dot-dot":"esriSLSShortDashDotDot","long-dash":"esriSLSLongDash","long-dash-dot":"esriSLSLongDashDot"},getDefaults:function(){return a.mixin(this.inherited(arguments),
l)},normalizeCtorArgs:function(a,b,c,d,k,l){if(a&&"string"!==typeof a)return a;var e={};null!=a&&(e.style=a);null!=b&&(e.color=b);null!=c&&(e.width=f.toPt(c));null!=d&&(e.cap=d);null!=k&&(e.join=k);null!=l&&(e.miterLimit=f.toPt(l));return e},clone:function(){return new k({color:a.clone(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit})}});a.mixin(k,d);k.defaultProps=l;return k})},"esri/symbols/LineSymbol":function(){define(["../core/declare","../core/screenUtils",
"./Symbol"],function(c,a,f){return c(f,{declaredClass:"esri.symbols.LineSymbol",properties:{color:{},type:"simple-line",width:{value:.75,cast:a.toPt,json:{write:!0}}}})})},"esri/symbols/support/urlUtils":function(){define(["require","exports","../../core/urlUtils"],function(c,a,f){function b(a,b,c){return b.imageData?f.makeData({mediaType:b.contentType||"image/png",isBase64:!0,data:b.imageData}):d(b.url,c)}function d(a,b){return!b||"service"!==b.origin&&"portal-item"!==b.origin||!b.layer||"feature"!==
b.layer.type&&"stream"!==b.layer.type||f.isAbsolute(a)||!b.layer.parsedUrl?f.read(a,b):f.join(b.layer.parsedUrl.path,"images",a)}function l(a,b,c,d){f.isDataProtocol(a)?(a=f.dataComponents(a),b.contentType=a.mediaType,b.imageData=a.data,c&&c.imageData===b.imageData&&c.url&&(b.url=k(c.url,d))):b.url=k(a,d)}function k(a,b){return f.write(a,b)}Object.defineProperty(a,"__esModule",{value:!0});a.readImageDataOrUrl=b;a.read=d;a.writeImageDataAndUrl=l;a.write=k;a.urlPropertyDefinition={json:{read:{source:["imageData",
"url"],reader:b},write:{writer:function(a,b,c,d){l(a,b,this.source,d)}}}};a.sourcePropertyDefinition={readOnly:!0,json:{read:{source:["imageData","url"],reader:function(a,b,c){a={};b.imageData&&(a.imageData=b.imageData);b.contentType&&(a.contentType=b.contentType);b.url&&(a.url=d(b.url,c));return a}}}}})},"esri/symbols/PictureMarkerSymbol":function(){define(["../core/declare","../core/lang","../core/screenUtils","./MarkerSymbol","./support/urlUtils"],function(c,a,f,b,d){var l={width:12,height:12,
angle:0,xoffset:0,yoffset:0},k=c(b,{declaredClass:"esri.symbols.PictureMarkerSymbol",properties:{color:{json:{write:!1}},type:"picture-marker",url:d.urlPropertyDefinition,source:d.sourcePropertyDefinition,height:{json:{read:{source:["height","size"],reader:function(a,b){return b.size||a}},write:!0},cast:f.toPt},width:{json:{read:{source:["width","size"],reader:function(a,b){return b.size||a}},write:!0},cast:f.toPt},size:{json:{write:!1}}},getDefaults:function(){return a.mixin(this.inherited(arguments),
l)},normalizeCtorArgs:function(a,b,c){if(a&&"string"!==typeof a&&null==a.imageData)return a;var d={};a&&(d.url=a);null!=b&&(d.width=f.toPt(b));null!=c&&(d.height=f.toPt(c));return d},clone:function(){var b=new k({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});b._set("source",a.clone(this.source));return b}});k.defaultProps=l;return k})},"esri/symbols/MarkerSymbol":function(){define(["../core/declare","../core/screenUtils","./Symbol"],
function(c,a,f){return c(f,{declaredClass:"esri.symbols.MarkerSymbol",properties:{angle:{value:0,json:{read:function(a){return a&&-1*a},write:function(a,c){c.angle=a&&-1*a}}},type:{},xoffset:{value:0,cast:a.toPt,json:{write:!0}},yoffset:{value:0,cast:a.toPt,json:{write:!0}},size:{value:9,cast:function(b){return"auto"===b?b:a.toPt(b)},json:{write:!0}}}})})},"esri/symbols/PointSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./IconSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer ./callouts/calloutUtils ./support/Symbol3DVerticalOffset".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y){var C=d.ofType({base:null,key:"type",typeMap:{icon:h,object:p,text:q}});return function(a){function c(b){b=a.call(this)||this;b.verticalOffset=null;b.callout=null;b.symbolLayers=new C;b.type="point-3d";return b}f(c,a);d=c;c.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new l("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",
{symbolLayer:a})));b[c]=e.map(function(a){return a.write({},d)}).toArray()};c.prototype.supportsCallout=function(){if(1!==(this.symbolLayers?this.symbolLayers.length:0))return!1;switch(this.symbolLayers.getItemAt(0).type){case "icon":case "text":case "object":return!0}return!1};c.prototype.hasVisibleCallout=function(){return v.hasVisibleCallout(this)};c.prototype.hasVisibleVerticalOffset=function(){return v.hasVisibleVerticalOffset(this)};c.prototype.clone=function(){return new d({verticalOffset:k.clone(this.verticalOffset),
callout:k.clone(this.callout),styleOrigin:k.clone(this.styleOrigin),symbolLayers:k.clone(this.symbolLayers),thumbnail:k.clone(this.thumbnail)})};var d;b([e.property({type:y.default,json:{write:!0}})],c.prototype,"verticalOffset",void 0);b([e.property(v.calloutProperty)],c.prototype,"callout",void 0);b([e.property({type:C})],c.prototype,"symbolLayers",void 0);b([e.writer("web-scene","symbolLayers")],c.prototype,"writeSymbolLayers",null);b([e.enumeration.serializable()({PointSymbol3D:"point-3d"})],
c.prototype,"type",void 0);return c=d=b([e.subclass("esri.symbols.PointSymbol3D")],c)}(e.declared(g))})},"esri/symbols/PolygonSymbol3D":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/Collection ../core/Error ../core/lang ../core/accessorSupport/decorators ./ExtrudeSymbol3DLayer ./FillSymbol3DLayer ./IconSymbol3DLayer ./LineSymbol3DLayer ./ObjectSymbol3DLayer ./Symbol3D ./TextSymbol3DLayer".split(" "),function(c,a,f,b,d,l,k,e,h,p,
g,q,v,y,C){var B=d.ofType({base:null,key:"type",typeMap:{extrude:h,fill:p,icon:g,line:q,object:v,text:C}});return function(a){function c(b){b=a.call(this)||this;b.type="polygon-3d";return b}f(c,a);d=c;c.prototype.writeSymbolLayers=function(a,b,c,d){var e=a.filter(function(a){return"text"!==a.type});d&&d.messages&&e.length<a.length&&(a=a.find(function(a){return"text"===a.type}),d.messages.push(new l("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:a})));
b[c]=e.map(function(a){return a.write({},d)}).toArray()};c.prototype.clone=function(){return new d({styleOrigin:k.clone(this.styleOrigin),symbolLayers:k.clone(this.symbolLayers),thumbnail:k.clone(this.thumbnail)})};c.fromJSON=function(a){var b=new d;b.read(a);if(2===b.symbolLayers.length&&"fill"===b.symbolLayers.getItemAt(0).type&&"line"===b.symbolLayers.getItemAt(1).type){var c=b.symbolLayers.getItemAt(0),e=b.symbolLayers.getItemAt(1);!e.enabled||a.symbolLayers&&a.symbolLayers[1]&&!1===a.symbolLayers[1].enable||
(c.outline={size:e.size,color:e.material.color});b.symbolLayers.removeAt(1)}return b};var d;b([e.property({type:B})],c.prototype,"symbolLayers",void 0);b([e.writer("web-scene","symbolLayers")],c.prototype,"writeSymbolLayers",null);b([e.enumeration.serializable()({PolygonSymbol3D:"polygon-3d"})],c.prototype,"type",void 0);return c=d=b([e.subclass("esri.symbols.PolygonSymbol3D")],c)}(e.declared(y))})},"esri/symbols/SimpleFillSymbol":function(){define(["../core/declare","../core/lang","./FillSymbol",
"./SimpleLineSymbol"],function(c,a,f,b){var d={style:"solid",outline:new b,color:[0,0,0,.25]},l=c(f,{declaredClass:"esri.symbols.SimpleFillSymbol",properties:{color:{},type:"simple-fill",style:{value:"solid",type:String,json:{read:function(b){return a.valueOf(this._styles,b)||void 0},write:function(a,b){b.style=this._styles[a]}}}},_styles:{solid:"esriSFSSolid",none:"esriSFSNull",horizontal:"esriSFSHorizontal",vertical:"esriSFSVertical","forward-diagonal":"esriSFSForwardDiagonal","backward-diagonal":"esriSFSBackwardDiagonal",
cross:"esriSFSCross","diagonal-cross":"esriSFSDiagonalCross"},getDefaults:function(){return a.mixin(this.inherited(arguments),d)},normalizeCtorArgs:function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.style=a);b&&(d.outline=b);c&&(d.color=c);return d},clone:function(){return new l({color:a.clone(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}});a.mixin(l,{STYLE_SOLID:"solid",STYLE_NULL:"none",STYLE_HORIZONTAL:"horizontal",STYLE_VERTICAL:"vertical",STYLE_FORWARD_DIAGONAL:"forward-diagonal",
STYLE_BACKWARD_DIAGONAL:"backward-diagonal",STYLE_CROSS:"cross",STYLE_DIAGONAL_CROSS:"diagonal-cross"});l.defaultProps=d;return l})},"esri/symbols/SimpleMarkerSymbol":function(){define("../core/declare ../core/lang ../core/screenUtils ./MarkerSymbol ./SimpleLineSymbol ./support/simpleMarkerStyles".split(" "),function(c,a,f,b,d,l){var k={style:"circle",color:[255,255,255,.25],outline:new d,size:12,angle:0,xoffset:0,yoffset:0},e=c(b,{declaredClass:"esri.symbols.SimpleMarkerSymbol",properties:{color:{json:{write:function(a,
b){a&&"x"!==this.style&&"cross"!==this.style&&(b.color=a.toJSON())}}},type:"simple-marker",size:{value:12},style:{type:String,value:"circle",json:{read:function(b){return a.valueOf(this._styles,b)},write:function(a,b){b.style=this._styles[a]}}},path:{type:String,value:null,set:function(a){this.style="path";this._set("path",a)},json:{write:!0}},outline:{type:d,json:{write:!0}}},_styles:{circle:"esriSMSCircle",square:"esriSMSSquare",cross:"esriSMSCross",x:"esriSMSX",diamond:"esriSMSDiamond",triangle:"esriSMSTriangle",
path:"esriSMSPath"},getDefaults:function(){return a.mixin(this.inherited(arguments),k)},normalizeCtorArgs:function(a,b,c,d){if(a&&"string"!==typeof a)return a;var e={};a&&(e.style=a);null!=b&&(e.size=f.toPt(b));c&&(e.outline=c);d&&(e.color=d);return e},clone:function(){return new e({angle:this.angle,color:a.clone(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})},read:function p(b,c){return this.getInherited(p,
arguments).call(this,a.mixin({outline:null},b),c)}});a.mixin(e,l);e.defaultProps=k;return e})},"esri/symbols/support/simpleMarkerStyles":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.STYLE_CIRCLE="circle";a.STYLE_SQUARE="square";a.STYLE_CROSS="cross";a.STYLE_X="x";a.STYLE_DIAMOND="diamond";a.STYLE_PATH="path";a.STYLE_TARGET="target"})},"esri/symbols/TextSymbol":function(){define("../core/declare ../core/lang ../core/screenUtils ../Color ./Symbol ./Font".split(" "),
function(c,a,f,b,d,l){var k={text:"",rotated:!1,kerning:!0,color:[0,0,0,1],font:{},angle:0,xoffset:0,yoffset:0,horizontalAlignment:"center"},e=c(d,{declaredClass:"esri.symbols.TextSymbol",properties:{backgroundColor:{type:b,json:{write:!0}},borderLineColor:{type:b,json:{write:!0}},borderLineSize:{type:Number,json:{write:!0}},color:{},font:{type:l,json:{write:!0}},horizontalAlignment:{value:"center",json:{write:!0}},kerning:{value:!0,json:{write:!0}},haloColor:{type:b,json:{write:!0}},haloSize:{type:Number,
cast:f.toPt,json:{write:!0}},rightToLeft:{json:{write:!0}},rotated:{value:!1,json:{write:!0}},text:{type:String,json:{write:!0}},type:"text",verticalAlignment:{type:String,json:{write:!0}},xoffset:{value:0,type:Number,cast:f.toPt,json:{write:!0}},yoffset:{value:0,type:Number,cast:f.toPt,json:{write:!0}},angle:{type:Number,value:0,json:{read:function(a){return a&&-1*a},write:function(a,b){b.angle=a&&-1*a}}},width:{json:{write:!0}}},getDefaults:function(){return a.mixin(this.inherited(arguments),k)},
normalizeCtorArgs:function(a,b,c){if(a&&"string"!==typeof a)return a;var d={};a&&(d.text=a);b&&(d.font=b);c&&(d.color=c);return d},clone:function(){return new e({angle:this.angle,backgroundColor:a.clone(this.backgroundColor),borderLineColor:a.clone(this.borderLineColor),borderLineSize:this.borderLineSize,color:a.clone(this.color),font:this.font&&this.font.clone(),haloColor:a.clone(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,rightToLeft:this.rightToLeft,
rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}});a.mixin(e,{ALIGN_START:"start",ALIGN_MIDDLE:"middle",ALIGN_END:"end",DECORATION_NONE:"none",DECORATION_UNDERLINE:"underline",DECORATION_OVERLINE:"overline",DECORATION_LINETHROUGH:"line-through"});e.defaultProps=k;return e})},"esri/symbols/WebStyleSymbol":function(){define("require exports ../core/tsSupport/extendsHelper ../core/tsSupport/decorateHelper ../core/kebabDictionary ../core/Logger ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators ../portal/Portal ./Symbol ./support/Thumbnail".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q){var v=l.getLogger("esri.symbols.WebStyleSymbol"),y=d.strict()({styleSymbolReference:"web-style"});return function(a){function d(b){b=a.call(this,b)||this;b.styleName=null;b.portal=null;b.styleUrl=null;b.thumbnail=null;b.name=null;b.type="web-style";return b}f(d,a);g=d;d.prototype._readStyleUrl=function(a,b,c){return e.read(a,c)};d.prototype._writeStyleUrl=function(a,b,c,d){b.styleUrl=e.write(a,d);e.isAbsolute(b.styleUrl)&&(b.styleUrl=e.normalize(b.styleUrl))};d.prototype.read=
function(a,b){this.portal=b?b.portal:void 0;this.inherited(arguments,[a,b]);return this};d.prototype.clone=function(){return new g({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})};d.prototype.fetchSymbol=function(){var a=this;return k.create(function(a){return c(["./support/styleUtils"],a)}).then(function(b){b=b.resolveWebStyleSymbol(a,{portal:a.portal});b.catch(function(a){v.error("#fetchSymbol()","Failed to create symbol from style",a)});return b})};var g;b([h.property({json:{write:!1}})],
d.prototype,"color",void 0);b([h.property({type:String,json:{write:!0}})],d.prototype,"styleName",void 0);b([h.property({type:p,json:{write:!1}})],d.prototype,"portal",void 0);b([h.property({type:String,json:{write:!0}})],d.prototype,"styleUrl",void 0);b([h.reader("styleUrl")],d.prototype,"_readStyleUrl",null);b([h.writer("styleUrl")],d.prototype,"_writeStyleUrl",null);b([h.property({type:q.default,json:{read:!1}})],d.prototype,"thumbnail",void 0);b([h.property({type:String,json:{write:!0}})],d.prototype,
"name",void 0);b([h.property({type:y.apiValues,readOnly:!0,json:{type:y.jsonValues,read:!1,write:y.write}})],d.prototype,"type",void 0);return d=g=b([h.subclass("esri.symbols.WebStyleSymbol")],d)}(h.declared(g))})},"esri/symbols/support/symbolConversion":function(){define("require exports ../../Color ../../symbols ../../core/Error ../../core/lang ../Font ./simpleMarkerStyles".split(" "),function(c,a,f,b,d,l,k,e){function h(a){var c=a.color?a.color.clone():new f([255,255,255]),d,e,g;a instanceof b.PictureMarkerSymbol?
(a.color&&0===a.color.r&&0===a.color.g&&0===a.color.b&&(c=new f([255,255,255])),d={href:a.url},e=a.width<=a.height?a.height:a.width):(d=a.style,d in p?d=p[d]:(console.log(d+' cannot be mapped to Icon symbol. Fallback to "circle"'),d="circle"),d={primitive:d},e=a.size,a.outline&&0<a.outline.width&&(g={size:a.outline.width,color:a.outline.color?a.outline.color.clone():[255,255,255]}));return new b.PointSymbol3D(new b.IconSymbol3DLayer({size:e,resource:d,material:{color:c},outline:g}))}Object.defineProperty(a,
"__esModule",{value:!0});var p={};p[e.STYLE_CIRCLE]="circle";p[e.STYLE_CROSS]="cross";p[e.STYLE_DIAMOND]="kite";p[e.STYLE_SQUARE]="square";p[e.STYLE_X]="x";a.to3D=function(a,c,e,f){void 0===c&&(c=!1);void 0===e&&(e=!1);void 0===f&&(f=!0);if(!a)return{symbol:null};if(b.isSymbol3D(a)||a instanceof b.WebStyleSymbol)f=a.clone();else if(a instanceof b.SimpleLineSymbol)f=new b.LineSymbol3D(new b.LineSymbol3DLayer({size:a.width||1,material:{color:a.color?a.color.clone():[255,255,255]}}));else if(a instanceof
b.SimpleMarkerSymbol)f=h(a);else if(a instanceof b.PictureMarkerSymbol)f=h(a);else if(a instanceof b.SimpleFillSymbol)f=new b.FillSymbol3DLayer({material:{color:a.color?a.color.clone():[255,255,255,0]}}),a.outline&&(f.outline={size:a.outline.width||0,color:a.outline.color?a.outline.color.clone():[255,255,255]}),f=new b.PolygonSymbol3D(f);else if(a instanceof b.TextSymbol){var g;g=a.haloColor;var p=a.haloSize;g=g&&0<p?{color:l.clone(g),size:p}:null;p=a.font?a.font.clone():new k;f=new (f?b.LabelSymbol3D:
b.PointSymbol3D)(new b.TextSymbol3DLayer({size:p.size,font:p,halo:g,material:{color:a.color.clone()},text:a.text}))}else return{error:new d("symbol-conversion:unsupported-2d-symbol","2D symbol of type '"+(a.type||a.declaredClass)+"' is unsupported in 3D",{symbol:a})};c&&(f.id=a.id);if(e&&b.isSymbol3D(f))for(a=0;a<f.symbolLayers.length;++a)f.symbolLayers.getItemAt(a)._ignoreDrivers=!0;return{symbol:f}}})},"esri/symbols":function(){define("require exports ./symbols/ExtrudeSymbol3DLayer ./symbols/FillSymbol ./symbols/FillSymbol3DLayer ./symbols/Font ./symbols/IconSymbol3DLayer ./symbols/LabelSymbol3D ./symbols/LineSymbol3D ./symbols/LineSymbol3DLayer ./symbols/MarkerSymbol ./symbols/MeshSymbol3D ./symbols/ObjectSymbol3DLayer ./symbols/PathSymbol3DLayer ./symbols/PictureFillSymbol ./symbols/PictureMarkerSymbol ./symbols/PointSymbol3D ./symbols/PolygonSymbol3D ./symbols/SimpleFillSymbol ./symbols/SimpleLineSymbol ./symbols/SimpleMarkerSymbol ./symbols/Symbol ./symbols/Symbol3D ./symbols/Symbol3DLayer ./symbols/TextSymbol ./symbols/TextSymbol3DLayer ./symbols/WebStyleSymbol ./symbols/callouts/LineCallout3D ./symbols/callouts/LineCallout3DBorder ./symbols/support/Symbol3DVerticalOffset ./symbols/support/jsonUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A,u,n,t,x,D,G,F,J,E,N,Z,ia,S){Object.defineProperty(a,"__esModule",{value:!0});a.ExtrudeSymbol3DLayer=f;a.BaseFillSymbol=b;a.FillSymbol3DLayer=d;a.Font=l;a.IconSymbol3DLayer=k;a.LabelSymbol3D=e;a.LineSymbol3D=h;a.LineSymbol3DLayer=p;a.BaseMarkerSymbol=g;a.MeshSymbol3D=q;a.ObjectSymbol3DLayer=v;a.PathSymbol3DLayer=y;a.PictureFillSymbol=C;a.PictureMarkerSymbol=B;a.PointSymbol3D=r;a.PolygonSymbol3D=A;a.SimpleFillSymbol=u;a.SimpleLineSymbol=n;a.SimpleMarkerSymbol=
t;a.BaseSymbol=x;a.BaseSymbol3D=D;a.BaseSymbol3DLayer=G;a.TextSymbol=F;a.TextSymbol3DLayer=J;a.WebStyleSymbol=E;a.LineCallout3D=N;a.LineCallout3DBorder=Z;a.Symbol3DVerticalOffset=ia.Symbol3DVerticalOffset;a.fromJSON=S.fromJSON;a.isSymbol=function(b){return b instanceof a.BaseSymbol};a.isSymbol2D=function(a){if(!a)return!1;switch(a.type){case "picture-fill":case "picture-marker":case "simple-fill":case "simple-line":case "simple-marker":case "text":return!0;default:return!1}};a.isSymbol3D=function(a){if(!a)return!1;
switch(a.type){case "label-3d":case "line-3d":case "mesh-3d":case "point-3d":case "polygon-3d":return!0;default:return!1}}})},"esri/symbols/support/typeUtils":function(){define("require exports ../../core/accessorSupport/ensureType ../LabelSymbol3D ../LineSymbol3D ../MeshSymbol3D ../PictureFillSymbol ../PictureMarkerSymbol ../PointSymbol3D ../PolygonSymbol3D ../SimpleFillSymbol ../SimpleLineSymbol ../SimpleMarkerSymbol ../Symbol ../TextSymbol ../WebStyleSymbol".split(" "),function(c,a,f,b,d,l,k,e,
h,p,g,q,v,y,C,B){Object.defineProperty(a,"__esModule",{value:!0});a.types={base:y,key:"type",typeMap:{"simple-fill":g,"picture-fill":k,"picture-marker":e,"simple-line":q,"simple-marker":v,text:C,"label-3d":b,"line-3d":d,"mesh-3d":l,"point-3d":h,"polygon-3d":p,"web-style":B}};a.rendererTypes={base:y,key:"type",typeMap:{"simple-fill":g,"picture-fill":k,"picture-marker":e,"simple-line":q,"simple-marker":v,text:C,"line-3d":d,"mesh-3d":l,"point-3d":h,"polygon-3d":p,"web-style":B}};a.labelTypes={base:y,
key:"type",typeMap:{text:C,"label-3d":b}};a.types3D={base:y,key:"type",typeMap:{"label-3d":b,"line-3d":d,"mesh-3d":l,"point-3d":h,"polygon-3d":p,"web-style":B}};a.rendererTypes3D={base:y,key:"type",typeMap:{"line-3d":d,"mesh-3d":l,"point-3d":h,"polygon-3d":p,"web-style":B}};a.labelTypes3D={base:y,key:"type",typeMap:{"label-3d":b}};a.ensureType=f.ensureOneOfType(a.types)})},"esri/tasks/support/StatisticDefinition":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(c,a,f,b,d,l){return function(a){function c(b){b=a.call(this)||this;b.maxPointCount=void 0;b.maxRecordCount=void 0;b.maxVertexCount=void 0;b.onStatisticField=null;b.outStatisticFieldName=null;b.statisticType=null;return b}f(c,a);d=c;c.prototype.clone=function(){return new d({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType})};
var d;b([l.property({type:Number,json:{write:!0}})],c.prototype,"maxPointCount",void 0);b([l.property({type:Number,json:{write:!0}})],c.prototype,"maxRecordCount",void 0);b([l.property({type:Number,json:{write:!0}})],c.prototype,"maxVertexCount",void 0);b([l.property({type:String,json:{write:!0}})],c.prototype,"onStatisticField",void 0);b([l.property({type:String,json:{write:!0}})],c.prototype,"outStatisticFieldName",void 0);b([l.property({type:String,json:{write:!0}})],c.prototype,"statisticType",
void 0);return c=d=b([l.subclass("esri.tasks.support.StatisticDefinition")],c)}(l.declared(d))})},"esri/layers/support/FeatureProcessing":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/lang ../../core/accessorSupport/decorators ./Field ./fieldUtils".split(" "),function(c,a,f,b,d,l,k,e,h){return function(a){function c(){return null!==a&&a.apply(this,arguments)||this}f(c,a);d=c;c.fromWorker=function(a){if(!a)return null;
a=JSON.parse(a);var b=new d;b.fields=a.fields&&a.fields.map(function(a){return e.fromJSON(a)});b.options=a.options;b.process=new (Function.bind.apply(Function,[void 0].concat(a.process.args,[a.process.body])));return b};Object.defineProperty(c.prototype,"version",{get:function(){return(this._get("version")||0)+1},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new d(l.clone({fields:this.fields,options:this.options,process:this.process}))};c.prototype.getField=function(a){return h.getField(a,
this.fields)};c.prototype.refresh=function(){this.notifyChange("version")};c.prototype.toWorker=function(){var a=this.process.toString();return JSON.stringify({fields:this.fields,options:this.options,process:{body:a.substring(a.indexOf("{")+1,a.lastIndexOf("}")),args:a.slice(a.indexOf("(")+1,a.indexOf(")")).match(/([^\s,]+)/g)}})};var d;b([k.property({type:[e]})],c.prototype,"fields",void 0);b([k.property()],c.prototype,"options",void 0);b([k.property()],c.prototype,"process",void 0);b([k.property({readOnly:!0,
dependsOn:["process","options","fields"]})],c.prototype,"version",null);return c=d=b([k.subclass("esri.layers.support.FeatureProcessing")],c)}(k.declared(d))})},"esri/layers/support/Field":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./domains ./fieldType".split(" "),function(c,a,f,b,d,l,k,e){return function(a){function c(b){b=a.call(this)||this;b.alias=null;b.defaultValue=void 0;
b.domain=null;b.editable=!0;b.length=-1;b.name=null;b.nullable=!0;b.type=null;return b}f(c,a);d=c;c.prototype.clone=function(){return new d({alias:this.alias,defaultValue:this.defaultValue,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type})};var d;b([l.property({type:String,json:{write:!0}})],c.prototype,"alias",void 0);b([l.property({json:{write:{allowNull:!0}}})],c.prototype,"defaultValue",void 0);b([l.property({types:k.types,
json:{read:{reader:k.fromJSON},write:!0}})],c.prototype,"domain",void 0);b([l.property({type:Boolean,json:{write:!0}})],c.prototype,"editable",void 0);b([l.property({type:Number,json:{write:!0}})],c.prototype,"length",void 0);b([l.property({type:String,json:{write:!0}})],c.prototype,"name",void 0);b([l.property({type:Boolean,json:{write:!0}})],c.prototype,"nullable",void 0);b([l.property({type:String,json:{read:e.kebabDict.read,write:e.kebabDict.write}})],c.prototype,"type",void 0);return c=d=b([l.subclass("esri.layers.support.Field")],
c)}(l.declared(d))})},"esri/layers/support/domains":function(){define("require exports ./CodedValueDomain ./Domain ./InheritedDomain ./RangeDomain".split(" "),function(c,a,f,b,d,l){function k(a,b){switch(a.type){case "range":var c="range"in a?a.range[1]:a.maxValue;if(+b<("range"in a?a.range[0]:a.minValue)||+b>c)return e.VALUE_OUT_OF_RANGE;break;case "coded-value":case "codedValue":if(null==a.codedValues||a.codedValues.every(function(a){return null==a||a.code!==b}))return e.INVALID_CODED_VALUE}return null}
Object.defineProperty(a,"__esModule",{value:!0});a.CodedValueDomain=f;a.DomainBase=b;a.InheritedDomain=d;a.RangeDomain=l;var e;(function(a){a.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range";a.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(e=a.DomainValidationError||(a.DomainValidationError={}));a.isValidDomainValue=function(a,b){return null===k(a,b)};a.validateDomainValue=k;a.types={key:"type",base:a.DomainBase,typeMap:{range:a.RangeDomain,"coded-value":a.CodedValueDomain}};
a.getDomainRange=function(a){if(a&&"range"===a.type)return{min:"range"in a?a.range[0]:a.minValue,max:"range"in a?a.range[1]:a.maxValue}};a.fromJSON=function(b){if(b&&b.type){if("range"===b.type)return a.RangeDomain.fromJSON(b);if("codedValue"===b.type)return a.CodedValueDomain.fromJSON(b)}return null}})},"esri/layers/support/CodedValueDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/lang ../../core/accessorSupport/decorators ./Domain".split(" "),
function(c,a,f,b,d,l,k){return function(a){function c(b){b=a.call(this,b)||this;b.codedValues=null;b.type="coded-value";return b}f(c,a);e=c;c.prototype.writeCodedValues=function(a,b){var c=null;a&&(c=a.map(function(a){return d.fixJson(d.clone(a))}));b.codedValues=c};c.prototype.getName=function(a){var b=null;if(this.codedValues){var c=String(a);this.codedValues.some(function(a){String(a.code)===c&&(b=a.name);return!!b})}return b};c.prototype.clone=function(){return new e({codedValues:d.clone(this.codedValues),
name:this.name})};var e;b([l.property({json:{write:!0}})],c.prototype,"codedValues",void 0);b([l.writer("codedValues")],c.prototype,"writeCodedValues",null);b([l.enumeration.serializable()({codedValue:"coded-value"})],c.prototype,"type",void 0);return c=e=b([l.subclass("esri.layers.support.CodedValueDomain")],c)}(l.declared(k))})},"esri/layers/support/Domain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators".split(" "),
function(c,a,f,b,d,l,k){var e=l({inherited:"inherited",codedValue:"coded-value",range:"range"});return function(a){function c(b){b=a.call(this,b)||this;b.name=null;b.type=null;return b}f(c,a);b([k.property({json:{write:!0}})],c.prototype,"name",void 0);b([k.property({json:{read:e.read,write:e.write}})],c.prototype,"type",void 0);return c=b([k.subclass("esri.layers.support.Domain")],c)}(k.declared(d))})},"esri/layers/support/InheritedDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(c,a,f,b,d,l){return function(a){function c(b){b=a.call(this,b)||this;b.type="inherited";return b}f(c,a);h=c;c.prototype.clone=function(){return new h};var h;b([d.enumeration.serializable()({inherited:"inherited"})],c.prototype,"type",void 0);return c=h=b([d.subclass("esri.layers.support.InheritedDomain")],c)}(d.declared(l))})},"esri/layers/support/RangeDomain":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./Domain".split(" "),
function(c,a,f,b,d,l){return function(a){function c(b){b=a.call(this,b)||this;b.maxValue=null;b.minValue=null;b.type="range";return b}f(c,a);h=c;c.prototype.clone=function(){return new h({maxValue:this.maxValue,minValue:this.minValue,name:this.name})};var h;b([d.property({json:{read:{source:"range",reader:function(a,b){return b.range&&b.range[1]}},write:{target:"range",writer:function(a,b,c){b[c]=[this.minValue,a]}}}})],c.prototype,"maxValue",void 0);b([d.property({json:{read:{source:"range",reader:function(a,
b){return b.range&&b.range[0]}},write:{target:"range",writer:function(a,b,c){b[c]=[a,this.maxValue]}}}})],c.prototype,"minValue",void 0);b([d.enumeration.serializable()({range:"range"})],c.prototype,"type",void 0);return c=h=b([d.subclass("esri.layers.support.RangeDomain")],c)}(d.declared(l))})},"esri/layers/support/fieldType":function(){define(["require","exports","../../core/kebabDictionary"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.kebabDict=f({esriFieldTypeSmallInteger:"small-integer",
esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"})})},"esri/layers/support/fieldUtils":function(){define(["require","exports","@dojo/framework/shim/Set","../../core/object","./domains"],function(c,
a,f,b,d){function l(a,c,d){if(a)for(var e=0;e<a.length;e++){var f=a[e],g=b.getDeepValue(f,c);(g=g&&"function"!==typeof g&&k(g,d))&&b.setDeepValue(f,g.name,c)}}function k(a,b){if("string"!==typeof a)return null;if(null!=b){a=a.toLowerCase();for(var c=0;c<b.length;c++){var d=b[c];if(d&&d.name.toLowerCase()===a)return d}}return null}function e(a){return"number"===typeof a&&!isNaN(a)&&isFinite(a)}function h(a){return null===a||e(a)}function p(a){return"number"===typeof a&&isFinite(a)&&Math.floor(a)===
a}function g(a){return null===a||p(a)}function q(a){return null!=a&&"string"===typeof a}function v(a){return null===a||q(a)}function y(a){return!0}function C(a,b){var c;switch(a.type){case "date":case "integer":case "long":case "small-integer":case "esriFieldTypeDate":case "esriFieldTypeInteger":case "esriFieldTypeLong":case "esriFieldTypeSmallInteger":c=a.nullable?g:p;break;case "double":case "single":case "esriFieldTypeSingle":case "esriFieldTypeDouble":c=a.nullable?h:e;break;case "string":case "esriFieldTypeString":c=
a.nullable?v:q;break;default:c=y}return 1===arguments.length?c:c(b)}function B(a){return null!=a&&n.has(a.type)}function r(a,b){return a.nullable&&null===b?null:B(a)&&!A(a.type,b)?t.OUT_OF_RANGE:C(a,b)?a.domain?d.validateDomainValue(a.domain,b):null:x.INVALID_TYPE}function A(a,b){return(a=u(a))?b>=a.min&&b<=a.max:!1}function u(a){switch(a){case "esriFieldTypeSmallInteger":case "small-integer":return{min:-32768,max:32767};case "esriFieldTypeInteger":case "integer":return{min:-2147483648,max:2147483647};
case "esriFieldTypeSingle":case "single":return{min:-3.4E38,max:1.2E38};case "esriFieldTypeDouble":case "double":return{min:-Number.MAX_VALUE,max:Number.MAX_VALUE}}}Object.defineProperty(a,"__esModule",{value:!0});a.fixRendererFields=function(b,c){if(null!=b&&null!=c){var d=0;for(b=Array.isArray(b)?b:[b];d<b.length;d++){var e=b[d];l(a.rendererFields,e,c);if(e.visualVariables)for(var f=0,e=e.visualVariables;f<e.length;f++)l(a.visualVariableFields,e[f],c)}}};a.getField=k;a.getFieldDefaultValue=function(a){var b=
a.defaultValue;if(void 0!==b&&C(a,b))return b;if(a.nullable)return null};a.isValueMatchingFieldType=C;a.rendererFields="field field2 field3 normalizationField rotationInfo.field proportionalSymbolInfo.field proportionalSymbolInfo.normalizationField colorInfo.field colorInfo.normalizationField".split(" ");a.visualVariableFields=["field","normalizationField"];a.numericTypes=["integer","small-integer","single","double"];var n=new f.default(a.numericTypes.concat(["esriFieldTypeInteger","esriFieldTypeSmallInteger",
"esriFieldTypeSingle","esriFieldTypeDouble"]));a.isNumericField=B;a.isStringField=function(a){return null!=a&&("string"===a.type||"esriFieldTypeString"===a.type)};a.isDateField=function(a){return null!=a&&("date"===a.type||"esriFieldTypeDate"===a.type)};a.isValidFieldValue=function(a,b){return null===r(a,b)};var t;(t=a.NumericRangeValidationError||(a.NumericRangeValidationError={})).OUT_OF_RANGE="numeric-range-validation-error::out-of-range";var x;(x=a.TypeValidationError||(a.TypeValidationError=
{})).INVALID_TYPE="type-validation-error::invalid-type";a.validateFieldValue=r;a.isNumberInRange=A;a.getFieldRange=function(a){var b=d.getDomainRange(a.domain);if(b)return b;if(B(a))return u(a.type)};a.validationErrorToString=function(a,b,c){switch(a){case d.DomainValidationError.INVALID_CODED_VALUE:return"Value "+c+" is not in the coded domain - field: "+b.name+", domain: "+JSON.stringify(b.domain);case d.DomainValidationError.VALUE_OUT_OF_RANGE:return"Value "+c+" is out of the range of valid values - field: "+
b.name+", domain: "+JSON.stringify(b.domain);case x.INVALID_TYPE:return"Value "+c+" is not a valid value for the field type - field: "+b.name+", type: "+b.type+", nullable: "+b.nullable;case t.OUT_OF_RANGE:return a=u(b.type),"Value "+c+" is out of range for the number type - field: "+b.name+", type: "+b.type+", value range is "+a.min+" to "+a.max}}})},"esri/tasks/operations/query":function(){define("require exports ../../core/tsSupport/assignHelper ../../request ../../core/urlUtils ../../geometry/support/jsonUtils ../../geometry/support/normalizeUtils ./pbfQueryUtils ./urlUtils".split(" "),
function(c,a,f,b,d,l,k,e,h){function p(a,b){var c=a.geometry;a=a.toJSON();c&&(a.geometry=JSON.stringify(c),a.geometryType=l.getJsonType(c),a.inSR=c.spatialReference.wkid||JSON.stringify(c.spatialReference));a.groupByFieldsForStatistics&&(a.groupByFieldsForStatistics=a.groupByFieldsForStatistics.join(","));a.objectIds&&(a.objectIds=a.objectIds.join(","));a.orderByFields&&(a.orderByFields=a.orderByFields.join(","));!a.outFields||b&&(b.returnCountOnly||b.returnExtentOnly||b.returnIdsOnly)?delete a.outFields:
-1!==a.outFields.indexOf("*")?a.outFields="*":a.outFields=a.outFields.join(",");a.outSR?a.outSR=a.outSR.wkid||JSON.stringify(a.outSR):c&&(a.returnGeometry||a.returnCentroid)&&(a.outSR=a.inSR);a.returnGeometry&&delete a.returnGeometry;a.outStatistics&&(a.outStatistics=JSON.stringify(a.outStatistics));a.pixelSize&&(a.pixelSize=JSON.stringify(a.pixelSize));a.quantizationParameters&&(a.quantizationParameters=JSON.stringify(a.quantizationParameters));a.source&&(a.layer=JSON.stringify({source:a.source}),
delete a.source);a.timeExtent&&(b=a.timeExtent,a.time=[null!=b.startTime?b.startTime:"null",null!=b.endTime?b.endTime:"null"],delete a.timeExtent);return a}function g(a,c,e,g,l){void 0===g&&(g={});var q="string"===typeof a?d.urlToObject(a):a;a=c.geometry?[c.geometry]:[];g.responseType="pbf"===e?"array-buffer":"json";return k.normalizeCentralMeridian(a,null,g).then(function(a){if(a=a&&a[0])c=c.clone(),c.geometry=a;a=h.mapParameters(f({},q.query,{f:e},l,p(c,l)));return b(q.path+"/query",f({},g,{query:a}))})}
Object.defineProperty(a,"__esModule",{value:!0});a.queryToQueryStringParameters=p;a.executeQuery=function(a,b,c){return g(a,b,"json",c)};a.executeQueryPBF=function(a,b,c){return g(a,b,"pbf",c).then(function(a){var b=e.parsePBFFeatureQuery(a.data);a.data=b;return a})};a.executeQueryForIds=function(a,b,c){return g(a,b,"json",c,{returnIdsOnly:!0})};a.executeQueryForCount=function(a,b,c){return g(a,b,"json",c,{returnIdsOnly:!0,returnCountOnly:!0})};a.executeQueryForExtent=function(a,b,c){return g(a,b,
"json",c,{returnExtentOnly:!0,returnCountOnly:!0}).then(function(a){var b=a.data;if(!b.hasOwnProperty("extent")){if(b.features)throw Error("Layer does not support extent calculation.");if(b.hasOwnProperty("count"))throw Error("Layer does not support extent calculation.");}return a})}})},"esri/tasks/operations/pbfQueryUtils":function(){define("require exports ../../core/Error ../../core/Logger ../../layers/graphics/OptimizedFeatureSet ./pbfFeatureServiceParser".split(" "),function(c,a,f,b,d,l){Object.defineProperty(a,
"__esModule",{value:!0});var k=b.getLogger("esri.tasks.operations.pbfQueryUtils");a.parsePBFFeatureQuery=function(a){try{var b=l.parseFeatureQuery(a).queryResult.featureResult;if(b&&b.features&&b.features.length&&b.objectIdFieldName){var c=b.objectIdFieldName;a=0;for(var e=b.features;a<e.length;a++){var q=e[a];q.attributes&&(q.objectId=q.attributes[c])}}return b}catch(v){return b=new f("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:v}),k.error(b),new d.default}}})},"esri/tasks/operations/pbfFeatureServiceParser":function(){define("require exports ../../core/pbf ../../layers/graphics/OptimizedFeature ../../layers/graphics/OptimizedFeatureSet ../../layers/graphics/OptimizedGeometry".split(" "),
function(c,a,f,b,d,l){function k(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();case 3:return a.getDouble();case 4:return a.getSInt32();case 5:return a.getUInt32();case 6:return a.getInt64();case 7:return a.getUInt64();case 8:return a.getSInt64();case 9:return a.getBool();default:return a.skip(),null}return null}function e(a){for(var b={type:0>=p.length?null:p[0]};a.next();)switch(a.tag()){case 1:b.name=a.getString();break;case 2:var c=a.getEnum();b.type=
c>=p.length?null:p[c];break;case 3:b.alias=a.getString();break;case 4:c=a.getEnum();c=c>=g.length?null:g[c];b.sqlType=c;break;default:a.skip()}return b}function h(a,c){for(var d=new b.default,e=0;a.next();)switch(a.tag()){case 1:var f=a.getMessage(),g=c[e++].name;d.attributes[g]=k(f);break;case 2:for(var f=a.getMessage(),g=new l.default,h=g.coords,p=g.lengths;f.next();)switch(f.tag()){case 2:for(var q=f.getUInt32(),q=f.pos()+q;f.pos()<q;)p.push(f.getUInt32());break;case 3:for(var q=f.getUInt32(),
q=f.pos()+q,v=0;f.pos()<q;)h[v++]=f.getSInt64();break;default:f.skip()}d.geometry=g;break;case 4:f=a.getMessage();g=new l.default;for(h=g.coords;f.next();)switch(f.tag()){case 3:p=f.getUInt32();p=f.pos()+p;for(q=0;f.pos()<p;)h[q++]=f.getSInt64();break;default:f.skip()}d.centroid=g;break;default:a.skip()}return d}Object.defineProperty(a,"__esModule",{value:!0});var p="esriFieldTypeSmallInteger esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate esriFieldTypeOID esriFieldTypeGeometry esriFieldTypeBlob esriFieldTypeRaster esriFieldTypeGUID esriFieldTypeGlobalID esriFieldTypeXML".split(" "),
g="sqlTypeBigInt sqlTypeBinary sqlTypeBit sqlTypeChar sqlTypeDate sqlTypeDecimal sqlTypeDouble sqlTypeFloat sqlTypeGeometry sqlTypeGUID sqlTypeInteger sqlTypeLongNVarchar sqlTypeLongVarbinary sqlTypeLongVarchar sqlTypeNChar sqlTypeNVarchar sqlTypeOther sqlTypeReal sqlTypeSmallInt sqlTypeSqlXml sqlTypeTime sqlTypeTimestamp sqlTypeTimestamp2 sqlTypeTinyInt sqlTypeVarbinary sqlTypeVarchar".split(" "),q=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],v=["upperLeft",
"lowerLeft"];a.parseFeatureQuery=function(a){a=new f(new Uint8Array(a),new DataView(a));for(var b={};a.next();)switch(a.tag()){case 2:for(var c=a.getMessage(),g={};c.next();)switch(c.tag()){case 1:var k=c.getMessage(),l=new d.default;for(l.geometryType=0>=q.length?null:q[0];k.next();)switch(k.tag()){case 1:l.objectIdFieldName=k.getString();break;case 3:l.globalIdFieldName=k.getString();break;case 4:l.geohashFieldName=k.getString();break;case 5:for(var n=k.getMessage(),p={};n.next();)switch(n.tag()){case 1:p.shapeAreaFieldName=
n.getString();break;case 2:p.shapeLengthFieldName=n.getString();break;case 3:p.units=n.getString();break;default:n.skip()}l.geometryProperties=p;break;case 7:n=k.getEnum();l.geometryType=n>=q.length?null:q[n];break;case 8:n=k.getMessage();for(p={};n.next();)switch(n.tag()){case 1:p.wkid=n.getUInt32();break;case 5:p.wkt=n.getString();break;default:n.skip()}l.spatialReference=p;break;case 10:l.hasZ=k.getBool();break;case 11:l.hasM=k.getBool();break;case 12:n=k.getMessage();for(p={originPosition:0>=
v.length?null:v[0]};n.next();)switch(n.tag()){case 1:var x=n.getEnum();p.originPosition=x>=v.length?null:v[x];break;case 2:for(var x=n.getMessage(),y=[0,0];x.next();)switch(x.tag()){case 1:y[0]=x.getDouble();break;case 2:y[1]=x.getDouble();break;case 3:y.push(x.getDouble());break;case 4:y.push(x.getDouble());break;default:x.skip()}p.scale=y;break;case 3:x=n.getMessage();for(y=[0,0];x.next();)switch(x.tag()){case 1:y[0]=x.getDouble();break;case 2:y[1]=x.getDouble();break;case 3:y.push(x.getDouble());
break;case 4:y.push(x.getDouble());break;default:x.skip()}p.translate=y;break;default:n.skip()}l.transform=p;break;case 9:n=k.getBool();l.exceededTransferLimit=n;break;case 13:n=k.getMessage();l.fields.push(e(n));break;case 15:n=k.getMessage();l.features.push(h(n,l.fields));break;default:k.skip()}g.featureResult=l;break;default:c.skip()}b.queryResult=g;break;default:a.skip()}return b}})},"esri/core/pbf":function(){define(["require","exports"],function(c,a){return function(){function a(a,c,f,k){this._tag=
0;this._dataType=99;this._data=a;this._dataView=c;this._pos=f||0;this._end=k||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var b=this._decodeVarint();this._tag=b>>3;this._dataType=b&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};
a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){var a=4294967295,a=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&
15)<<28)>>>0;if(128>this._data[this._pos++])return a};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){var a=this.getUInt32();return a>>>1^-(a&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,c=this._pos,a=a.getUint32(c,!0)+4294967296*
a.getUint32(c+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,c=this._pos,a=a.getUint32(c,!0)+4294967296*a.getInt32(c+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=
function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),c=this._pos,c=this._toString(this._data,c,c+a);this._skip(a);return c};a.prototype.getBytes=function(){var a=this._getLength(),c=this._pos,c=this._toBytes(this._data,c,c+a);this._skip(a);return c};a.prototype.getMessage=function(){var b=this._getLength(),c=this._pos,c=new a(this._data,this._dataView,c,c+b);this._skip(b);return c};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();
break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,c=this._pos,f=0,k;if(10<=this._end-c){if(k=a[c++],f|=k&127,0!==(k&128)&&(k=a[c++],f|=(k&127)<<7,0!==(k&128)&&(k=a[c++],f|=(k&127)<<14,0!==(k&128)&&(k=a[c++],f|=(k&127)<<21,0!==
(k&128)&&(k=a[c++],f+=268435456*(k&127),0!==(k&128)&&(k=a[c++],f+=34359738368*(k&127),0!==(k&128)&&(k=a[c++],f+=4398046511104*(k&127),0!==(k&128)&&(k=a[c++],f+=562949953421312*(k&127),0!==(k&128)&&(k=a[c++],f+=72057594037927936*(k&127),0!==(k&128)&&(k=a[c++],f+=0x7fffffffffffffff*(k&127),0!==(k&128)))))))))))throw Error("Varint too long!");}else{for(var e=1;c!==this._end;){k=a[c];if(0===(k&128))break;++c;f+=(k&127)*e;e*=128}if(c===this._end)throw Error("Varint overrun!");++c;f+=k*e}this._pos=c;return f};
a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,c,f){var b="",d="";for(f=Math.min(this._end,f);c<f;++c){var h=a[c];h&128?d+="%"+h.toString(16):(b+=decodeURIComponent(d)+String.fromCharCode(h),d="")}d.length&&(b+=decodeURIComponent(d));return b};a.prototype._toBytes=function(a,c,f){f=Math.min(this._end,
f);return new Uint8Array(a.buffer,c,f-c)};return a}()})},"esri/tasks/operations/urlUtils":function(){define(["require","exports"],function(c,a){function f(a){var b={},c;for(c in a)if("declaredClass"!==c){var k=a[c];if(null!=k&&"function"!==typeof k)if(Array.isArray(k)){b[c]=[];for(var e=0;e<k.length;e++)b[c][e]=f(k[e])}else"object"===typeof k?k.toJSON&&(b[c]=JSON.stringify(k)):b[c]=k}return b}Object.defineProperty(a,"__esModule",{value:!0});a.mapParameters=f})},"esri/views/2d/layers/features/controllers/BaseController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators".split(" "),
function(c,a,f,b,d,l,k){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.processor=null;b.remoteClient=null;b.service=null;b.tileStore=null;return b}f(c,a);c.prototype.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])};c.prototype.destroy=function(){};Object.defineProperty(c.prototype,"spatialReference",{get:function(){var a=this.get("tileStore.spatialReference");return a&&a.toJSON()||
null},enumerable:!0,configurable:!0});c.prototype.enableEvent=function(a){};b([k.property()],c.prototype,"processor",void 0);b([k.property({constructOnly:!0})],c.prototype,"remoteClient",void 0);b([k.property({constructOnly:!0})],c.prototype,"service",void 0);b([k.property({dependsOn:["tileStore.spatialReference"]})],c.prototype,"spatialReference",null);b([k.property({constructOnly:!0})],c.prototype,"tileInfo",void 0);b([k.property({constructOnly:!0})],c.prototype,"tileStore",void 0);return c=b([k.subclass()],
c)}(k.declared(d,l));a.default=c})},"esri/core/HandleOwner":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Handles ./accessorSupport/decorators".split(" "),function(c,a,f,b,d,l,k){return function(a){function c(){var b=a.call(this)||this;b.handles=new l;return b}f(c,a);c.prototype.destroy=function(){this.handles.destroy()};b([k.property({readOnly:!0})],c.prototype,"handles",void 0);return c=b([k.subclass("esri.core.HandleOwner")],
c)}(k.declared(d))})},"esri/core/Handles":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ./Accessor ./Collection ./accessorSupport/decorators".split(" "),function(c,a,f,b,d,l,k){return function(a){function c(b){b=a.call(this)||this;b._groups=new Map;return b}f(c,a);c.prototype.destroy=function(){this.removeAll()};Object.defineProperty(c.prototype,"size",{get:function(){var a=0;this._groups.forEach(function(b){a+=b.length});return a},enumerable:!0,
configurable:!0});c.prototype.add=function(a,b){if(!this._isHandle(a)&&!Array.isArray(a)&&!l.isCollection(a))return this;var c=this._getOrCreateGroup(b);Array.isArray(a)||l.isCollection(a)?a.forEach(function(a){return c.push(a)}):c.push(a);this.notifyChange("size");return this};c.prototype.has=function(a){return this._groups.has(this._ensureGroupKey(a))};c.prototype.remove=function(a){if(Array.isArray(a)||l.isCollection(a))return a.forEach(this.remove,this),this;if(!this.has(a))return this;for(var b=
this._getGroup(a),c=0;c<b.length;c++)b[c].remove();this._deleteGroup(a);this.notifyChange("size");return this};c.prototype.removeAll=function(){this._groups.forEach(function(a){for(var b=0;b<a.length;b++)a[b].remove()});this._groups.clear();this.notifyChange("size");return this};c.prototype._isHandle=function(a){return a&&!!a.remove};c.prototype._getOrCreateGroup=function(a){if(this.has(a))return this._getGroup(a);var b=[];this._groups.set(this._ensureGroupKey(a),b);return b};c.prototype._getGroup=
function(a){return this._groups.get(this._ensureGroupKey(a))};c.prototype._deleteGroup=function(a){return this._groups.delete(this._ensureGroupKey(a))};c.prototype._ensureGroupKey=function(a){return a||"_default_"};b([k.property({readOnly:!0})],c.prototype,"size",null);return c=b([k.subclass("esri.core.Handles")],c)}(k.declared(d))})},"esri/views/2d/layers/features/support/DataTile":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){this.tile=
this.displayTile=null;this.done=!1;this.queryInfoHash=null;this.returnExceeded=!1}Object.defineProperty(a.prototype,"key",{get:function(){return this.tile.key},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"id",{get:function(){return this.tile.id},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"bounds",{get:function(){return this.tile.bounds},enumerable:!0,configurable:!0});return a}();a.default=c})},"esri/views/2d/layers/features/support/DataTileFeaturesIndex":function(){define("require exports @dojo/framework/shim/Map @dojo/framework/shim/Set ../../../../../core/SetPool ../../../../../layers/graphics/data/DefaultSpatialIndex ./Tile".split(" "),
function(c,a,f,b,d,l,k){Object.defineProperty(a,"__esModule",{value:!0});var e=[],h=new b.default;c=function(){function a(){this._tileById=new f.default;this._tilesToFeatures=new f.default;this._featureToTiles=new f.default}a.prototype.destroy=function(){this.clear()};a.prototype.add=function(a){var b=this;this.has(a.id)||(this._tileById.set(a.id,a),this._tilesToFeatures.set(a,d.default.acquire()),this._tilesToFeatures.forEach(function(c,d){a!==d&&(k.isParentOf(a,d)?c.forEach(function(c){b._link(a,
c)}):k.isChildOf(a,d)&&b.spatialIndex.forEachFeatureInBounds(a.bounds,function(d){c.has(d.objectId)&&b._link(a,d.objectId)}))}))};a.prototype.clear=function(){this._tilesToFeatures.forEach(function(a){return d.default.release(a)});this._tilesToFeatures.clear();this._featureToTiles.forEach(function(a){return d.default.release(a)});this._featureToTiles.clear();this._tileById.clear()};a.prototype.delete=function(a){var b=this,c=this.get(a.id);e.length=0;this._tilesToFeatures.get(c).forEach(function(a){var d=
b._featureToTiles.get(a);d.has(c)&&1===d.size?e.push(a):b._unlink(c,a)});for(a=0;a<e.length;a++)this._unlink(c,e[a]);this.spatialIndex.removeManyById(e);this._tilesToFeatures.delete(c);this._tileById.delete(c.id);e.length=0};a.prototype.forEach=function(a,b){return this._tileById.forEach(a,b)};a.prototype.get=function(a){return this._tileById.get(a)};a.prototype.has=function(a){return this._tileById.has(a)};a.prototype.setTileFeatures=function(a,b){var c=this,f=this.get(a.id);this._tilesToFeatures.has(f)||
(this._tileById.set(f.id,f),this._tilesToFeatures.set(f,d.default.acquire()));for(a=0;a<b.length;a++)h.add(b[a].objectId);e.length=0;this._tilesToFeatures.get(f).forEach(function(a){if(!h.has(a)){var b=c._featureToTiles.get(a);b.has(f)&&1===b.size?e.push(a):c._unlink(f,a)}});for(a=0;a<e.length;a++)this._unlink(f,e[a]);this.spatialIndex.removeManyById(e);this.spatialIndex.addMany(b);h.forEach(function(a){c._link(f,a)});h.clear();e.length=0};a.prototype.addOrUpdateFeatures=function(a){for(var c=this,
d=new b.default,e=new l.default({geometryType:this.spatialIndex.geometryType,hasM:this.spatialIndex.hasM,hasZ:this.spatialIndex.hasZ}),f=0,g=this.deleteFeaturesById(a.map(function(a){return a.objectId}));f<g.length;f++)d.add(g[f]);e.addMany(a);this._tileById.forEach(function(a){e.forEachFeatureInBounds(a.bounds,function(b){c._link(a,b.objectId);d.add(a)})});this.spatialIndex.addMany(a);var h=[];d.forEach(function(a){return h.push(a)});return h};a.prototype.deleteFeaturesById=function(a){for(var c=
this,e=new b.default,f=function(a){var b=g._featureToTiles.get(a);b&&(b.forEach(function(b){e.add(b);c._tilesToFeatures.get(b).delete(a)}),d.default.release(b),g._featureToTiles.delete(a))},g=this,h=0;h<a.length;h++)f(a[h]);this.spatialIndex.removeManyById(a);var k=[];e.forEach(function(a){return k.push(a)});return k};a.prototype._link=function(a,b){this._featureToTiles.get(b)||this._featureToTiles.set(b,d.default.acquire());this._featureToTiles.get(b).add(a);this._tilesToFeatures.get(a).add(b)};
a.prototype._unlink=function(a,b){this._featureToTiles.get(b).delete(a);this._tilesToFeatures.get(a).delete(b);0===this._featureToTiles.get(b).size&&(d.default.release(this._featureToTiles.get(b)),this._featureToTiles.delete(b))};return a}();a.default=c})},"esri/core/SetPool":function(){define(["require","exports","@dojo/framework/shim/Set"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){this._pool=[];this._set=new f.default}a.prototype.acquire=function(){if(0===
this._pool.length)return new f.default;var a=this._pool.pop();this._set.delete(a);return a};a.prototype.release=function(a){a&&!this._set.has(a)&&(a.clear(),5E4>this._pool.length&&(this._pool.push(a),this._set.add(a)))};a.acquire=function(){return b.acquire()};a.release=function(a){return b.release(a)};return a}();a.default=c;var b=new c})},"esri/views/2d/layers/features/support/TileUpdateQueue":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/scheduling ../../../../../core/accessorSupport/decorators ../../../tiling ../../../libs/gl-matrix/vec2".split(" "),
function(c,a,f,b,d,l,k,e,h){Object.defineProperty(a,"__esModule",{value:!0});var p=[0,0];c=function(a){function c(b){b=a.call(this,b)||this;b._queue=new Map;b._onGoingTile=null;b._onGoingPromise=null;b._isPaused=!1;b._scheduledNextHandle=null;b._timestamp=Date.now();b.tileInfoView=null;b._next=b._next.bind(b);b._finalize=b._finalize.bind(b);return b}f(c,a);Object.defineProperty(c.prototype,"length",{get:function(){return this._queue.size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"updating",{get:function(){return 0<this._queue.size||null!=this._onGoingPromise},enumerable:!0,configurable:!0});c.prototype.cancel=function(a){this._onGoingTile&&this._onGoingTile.tileId===a&&(this._onGoingPromise.cancel(),this._onGoingTile=this._onGoingPromise=null);this._queue.delete(a);this._scheduleNext();this.notifyChange("updating")};c.prototype.clear=function(){this._queue.clear();this._onGoingPromise&&(this._onGoingPromise.cancel(),this._onGoingTile=this._onGoingPromise=null);this._cancelNext();
this.notifyChange("updating")};c.prototype.has=function(a){return this._queue.has(a)};c.prototype.isOngoing=function(a){return this._onGoingTile&&this._onGoingTile.tileId===a};c.prototype.pause=function(){this._isPaused||(this._isPaused=!0,this._cancelNext())};c.prototype.push=function(a,b){this._queue.has(a)||(this._queue.set(a,{tileId:a,key:e.TileKey.pool.acquire(a),timestamp:b||this._timestamp}),this._scheduleNext(),this.notifyChange("updating"))};c.prototype.refresh=function(){this._timestamp=
Date.now();this.reset()};c.prototype.reset=function(){var a=this._onGoingTile;a&&this.push(a.tileId,this._timestamp);this.notifyChange("updating")};c.prototype.resume=function(){this._isPaused&&(this._isPaused=!1,this._scheduleNext());this.notifyChange("updating")};c.prototype._finalize=function(){this._onGoingPromise=this._onGoingTile=null;this.notifyChange("updating");this._scheduleNext()};c.prototype._cancelNext=function(){this._scheduledNextHandle&&(this._scheduledNextHandle.remove(),this._scheduledNextHandle=
null)};c.prototype._scheduleNext=function(){this._isPaused||this._scheduledNextHandle||0===this._queue.size||null!=this._onGoingTile||(this._scheduledNextHandle=l.schedule(this._next))};c.prototype._next=function(){if(null==this._scheduledNextHandle||0===this._queue.size||this._onGoingTile)this._scheduledNextHandle=null;else{this._scheduledNextHandle=null;var a=this._peek(),b=a.tileId;e.TileKey.pool.release(a.key);this._queue.delete(b);this._onGoingTile=a;(a=this._onGoingPromise=this.process(b,this._timestamp))&&
"function"===typeof a.then?this._onGoingPromise.then(this._finalize,this._finalize):this._finalize();this.notifyChange("updating")}};c.prototype._peek=function(){var a=this;if(!this.state)throw Error("state not set");var b=this.tileInfoView,c=this.state.center,d=Number.NEGATIVE_INFINITY,e=Number.POSITIVE_INFINITY,f=null;this._queue.forEach(function(g,k){b.getTileCoords(p,g.key);k=a._timestamp-g.timestamp;isNaN(k)?(k=h.distance(p,c),k<e&&(e=k,f=g)):k===d?(k=h.distance(p,c),k<e&&(e=k,f=g)):k>d&&(d=
k,e=Number.POSITIVE_INFINITY,f=g)});return f};b([k.property({readOnly:!0})],c.prototype,"length",null);b([k.property({constructOnly:!0})],c.prototype,"process",void 0);b([k.property()],c.prototype,"state",void 0);b([k.property({constructOnly:!0})],c.prototype,"tileInfoView",void 0);b([k.property({readOnly:!0})],c.prototype,"updating",null);return c=b([k.subclass()],c)}(k.declared(d));a.default=c})},"esri/views/2d/layers/features/controllers/MemoryController":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/tsSupport/assignHelper ../../../../../geometry ../../../../../core/Error ../../../../../core/Logger ../../../../../core/promiseUtils ../../../../../core/workers ../../../../../core/accessorSupport/decorators ../../../../../geometry/support/spatialReferenceUtils ../../../../../layers/support/FeatureProcessing ../../../../../tasks/support/QuantizationParameters ../../../../../tasks/support/Query ./BaseController ../support/TileUpdateQueue ../../../tiling/TileInfoView".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A){Object.defineProperty(a,"__esModule",{value:!0});var u=e.getLogger("esri.views.2d.layers.features.controllers.MemoryController");c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.type="memory";b._processingInMainThread=!1;return b}f(c,a);c.prototype.initialize=function(){var a=this;this._tileQueue=new r.default({tileInfoView:new A(this.tileStore.tileInfo),process:function(b,c){return a._fetchFeatureSet(b,c)}});this._memorySource=
p.open(this.service.source,{client:this});this.handles.add(this.watch("processor",this._switchProcessor.bind(this)))};c.prototype.destroy=function(){this._tileQueue.clear();this._tileQueue.pause()};Object.defineProperty(c.prototype,"processing",{get:function(){return v.fromWorker(this.configuration.processing)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"updating",{get:function(){return this._tileQueue.updating},enumerable:!0,configurable:!0});c.prototype.onEdits=function(a){this.refresh()};
c.prototype.queryFeatures=function(a){return this._memorySource.invoke("queryFeatures",a)};c.prototype.queryFeatureCount=function(a){return this._memorySource.invoke("queryFeatureCount",a)};c.prototype.queryObjectIds=function(a){return this._memorySource.invoke("queryObjectIds",a)};c.prototype.queryExtent=function(a){return this._memorySource.invoke("queryExtent",a)};c.prototype.redraw=function(){this.refresh()};c.prototype.refresh=function(){this._tileQueue.refresh();for(var a=0,b=this.tileStore.tiles;a<
b.length;a++){var c=b[a];this._tileQueue.push(c.id,c.updateTimestamp)}};c.prototype.setViewState=function(a){this._tileQueue.state=a};c.prototype.onTileUpdate=function(a){this._tileQueue.pause();for(var b=0,c=a.removed;b<c.length;b++){var d=c[b];this._tileQueue.cancel(d.id)}b=0;for(a=a.added;b<a.length;b++)d=a[b],this._tileQueue.push(d.id,d.updateTimestamp);this.processor&&this._tileQueue.resume()};c.prototype._switchProcessor=function(a,b){this.refresh();a&&this._tileQueue.resume()};c.prototype._fetchFeatureSet=
function(a,b){var c=this,d=this.tileStore.get(a),e=this.processor.queryInfo;return this._query(d,e).then(function(a){return c._wrapPoints(a,e)}).then(function(a){return c._sortFeatures(a,e)}).then(function(a){return a.features.length?a:null}).then(function(a){d.updateTimestamp=b;return c.processor.onTileData(d,{addOrUpdate:a&&a.features,clear:!0})}).catch(function(a){d.updateTimestamp=b;"cancel"!==a.dojoType&&(c.processor.onTileError(d,a.message),u.error("query-error",{error:a}));return h.reject(a)})};
c.prototype._query=function(a,b){var c=this,d=new C,e=this._getQuantizationParameters(a),f=b.pixelBuffer*a.resolution;a=a.bounds.slice();a[0]-=f;a[1]-=f;a[2]+=f;a[3]+=f;d.outFields=this.processor.queryInfo.outFields;d.where=this.processor.queryInfo.definitionExpression||"1\x3d1";d.geometry=l.Extent.fromJSON({xmin:a[0],ymin:a[1],xmax:a[2],ymax:a[3],spatialReference:this.spatialReference});this.service.capabilities.query.supportsQuantization?(d.quantizationParameters=e,"esriGeometryPolyline"===this.service.geometryType&&
(d.maxAllowableOffset=e.tolerance)):d.maxAllowableOffset=e.tolerance;d.resultType="tile";d.returnExceededLimitFeatures=!1;d.returnGeometry=!0;d.returnCentroid=b.returnCentroid;d.orderByFields=b.orderByFields;return this.queryFeatures(d.toJSON()).then(function(a){return c._applyProcessing(a)})};c.prototype._applyProcessing=function(a){var b=this.processing;if(!b)return a;if(this._processingInMainThread)return this.remoteClient.invoke("executeProcessing",{featureSet:a});try{var c=b.process(a,b.options);
return c?c:h.reject(new k("FeatureLayer","invalid processing.process() method, returns nothing"))}catch(F){return this._processingInMainThread=!0,this.remoteClient.invoke("executeProcessing",{featureSet:a})}};c.prototype._getQuantizationParameters=function(a){return y.default.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:a.resolution,extent:{xmin:a.bounds[0],ymin:a.bounds[1],xmax:a.bounds[2],ymax:a.bounds[3],spatialReference:this.spatialReference}})};c.prototype._wrapPoints=function(a,
b){if(0===a.features.length)return a;var c=b.returnCentroid;b=b.pixelBuffer;var e=a.geometryType,f=a.spatialReference,g=a.transform;if("esriGeometryPoint"!==e&&"esriGeometryMultipoint"!==e&&!c||!q.isWrappable(f))return a;c=a.features;f=q.getInfo(f);g=Math.round((f.valid[1]-f.valid[0])/g.scale[0]);if(512===g){f=[];for(e=0;e<c.length;e++){var h=c[e],k=h.geometry,h=h.attributes;k&&(k.x<b?(k={geometry:d({},k),attributes:h},k.geometry.x+=g,f.push(k)):k.x>512-b&&(k={geometry:d({},k),attributes:h},k.geometry.x-=
g,f.push(k)))}c.push.apply(c,f)}else for(f=0;f<c.length;f++)if(k=c[f].geometry)k.x<-b?k.x+=g:k.x>512+b&&(k.x-=g);return a};c.prototype._sortFeatures=function(a,b){if(b=b.orderByFields){b=b[0].split(" ");var c=b[0];"DESC"===b[1]&&a.features.sort(function(a,b){return b.attributes[c]-a.attributes[c]})}return a};b([g.property()],c.prototype,"_tileQueue",void 0);b([g.property()],c.prototype,"configuration",void 0);b([g.property({readOnly:!0,dependsOn:["configuration"]})],c.prototype,"processing",null);
b([g.property({dependsOn:["_tileQueue.updating"]})],c.prototype,"updating",null);return c=b([g.subclass()],c)}(g.declared(B.default));a.default=c})},"esri/core/workers":function(){define(["require","exports","./workers/workers"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});for(var b in f)a.hasOwnProperty(b)||(a[b]=f[b])})},"esri/core/workers/workers":function(){define("require exports dojo/sniff dojo/promise/all ../Logger ../promiseUtils ./Connection ./RemoteClient ./WorkerOwner".split(" "),
function(c,a,f,b,d,l,k,e,h){function p(){if(B)return B;for(var a=g+q,c=[],d=function(a){var b=h.create(a).then(function(b){return C[a]=b});c.push(b)},e=0;e<a;e++)d(e);return B=b(c).then(function(){})}Object.defineProperty(a,"__esModule",{value:!0});a.Connection=k;a.RemoteClient=e;(k=f("host-browser")?navigator.hardwareConcurrency:0)||(k=f("safari")&&f("mac")||f("trident")?8:2);var g=f("esri-workers-debug")?1:Math.max(1,Math.ceil(k/2)),q=f("esri-workers-debug")?1:Math.max(1,Math.floor(k/2)),v=d.getLogger("esri.core.workers"),
y=0,C=[];a.initialize=function(){p()};a.open=function(b,d,e){void 0===d&&(d={});if(Array.isArray(b))return new a.Connection(b.map(function(b){return new a.RemoteClient(b,d.client)}));if("string"!==typeof b){v.warn("workers-open:signature-deprecated","DEPRECATED: workers.open() changed signature.");var f=b;b=d;d={client:f,strategy:e?"dedicated":"distributed"}}var h=d.strategy||"distributed";return"local"===h?l.create(function(d){c([b],function(b){d(a.RemoteClient.connect(b))})}).then(function(b){return new a.Connection([new a.RemoteClient(b,
d.client)])}):p().then(function(){if("dedicated"===h){var c=g+y++;y%=q;return C[c].open(b).then(function(b){return new a.Connection([new a.RemoteClient(b,d.client)])})}return l.all(C.map(function(a){return a.open(b)})).then(function(b){return new a.Connection(b.map(function(b){return new a.RemoteClient(b,d.client)}))})})};a.terminate=function(){B&&(B.cancel(),B=null);for(var a=0;a<C.length;a++)C[a]&&C[a].terminate();C.length=0};var B=null})},"esri/core/workers/Connection":function(){define(["require",
"exports","../promiseUtils"],function(c,a,f){return function(){function a(a){this._clientIdx=0;this._clients=a}a.prototype.broadcast=function(a,b){for(var c=[],d=0,f=this._clients;d<f.length;d++)c.push(f[d].invoke(a,b));return c};a.prototype.close=function(){for(var a=0,b=this._clients;a<b.length;a++)b[a].close();this._clients=[]};a.prototype.invoke=function(a,b,c,e){var d=e&&e.client;if(!this._clients||!this._clients.length)return f.reject(Error("Connection closed"));null!=d&&-1!==this._clients.indexOf(d)||
this._clients.some(function(a){return a.isBusy()?!1:(d=a,!0)})||(this._clientIdx=(this._clientIdx+1)%this._clients.length,d=this._clients[this._clientIdx]);a=d.invoke(a,b,c);e&&(e.client=d);return a};a.prototype.openPorts=function(){return f.all(this._clients.map(function(a){return a.openPort()}))};return a}()})},"esri/core/workers/WorkerOwner":function(){define("require exports ../../kernel ../Error ../Logger ../promiseUtils ./utils ./workerFactory".split(" "),function(c,a,f,b,d,l,k,e){var h=d.getLogger("esri.core.workers"),
p=k.MessageType.CANCEL,g=k.MessageType.INVOKE,q=k.MessageType.OPEN,v=k.MessageType.OPENED,y=k.MessageType.RESPONSE;return function(){function a(a,b){this._outJobs=new Map;this._inJobs=new Map;this.worker=a;this.id=b;a.addEventListener("message",this._onMessage.bind(this));a.addEventListener("error",function(a){a.preventDefault();h.error(a)})}a.create=function(b){return e.createWorker().then(function(c){return new a(c,b)})};a.prototype.terminate=function(){this.worker.terminate()};a.prototype.open=
function(a){var b=this,c=k.newJobId(),d=function(){b._outJobs["delete"](c);b._post({type:p,jobId:c})};return l.create(function(e,f){b._outJobs.set(c,{resolve:e,reject:f,cancel:d});b._post({type:q,jobId:c,modulePath:a})},d)};a.prototype._onMessage=function(a){if(a=k.receiveMessage(a))switch(a.type){case v:case y:this._onResponse(a);break;case p:this._onCancel(a);break;case g:this._onInvoke(a)}};a.prototype._onCancel=function(a){(a=this._inJobs.get(a.jobId))&&a.cancel()};a.prototype._onInvoke=function(a){var b=
this,c=a.methodName,d=a.jobId;a=a.data;var e=this._inJobs,g=f.workerMessages[c],h;try{if("function"!==typeof g)throw new TypeError(c+" is not a function");h=g.call(null,a)}catch(D){this._post({type:y,jobId:d,error:k.toInvokeError(D)});return}l.isThenable(h)?(e.set(d,h),h.then(function(a){e["delete"](d);b._post({type:y,jobId:d},a)}).catch(function(a){e["delete"](d);a||(a={message:"Error encountered at method"+c});a.dojoType&&"cancel"===a.dojoType||b._post({type:y,jobId:d,error:k.toInvokeError(a)})})):
this._post({type:y,jobId:d},h)};a.prototype._onResponse=function(a){var c=a.jobId,d=a.error;a=a.data;var e=this._outJobs.get(c);e&&(this._outJobs["delete"](c),d?e.reject(b.fromJSON(JSON.parse(d))):e.resolve(a))};a.prototype._post=function(a,b,c){return k.postMessage(this.worker,a,b,c)};return a}()})},"esri/core/workers/workerFactory":function(){define("require exports ../tsSupport/assignHelper dojo/_base/kernel ../../config ../../request ../has ../Logger ../promiseUtils ../urlUtils ./loaderConfig ./utils ./WorkerFallback".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v){function y(a){return h.create(function(c){function e(l){if(l=q.receiveMessage(l))switch(l.type){case t:l=a;var p=d.workers.loaderUrl||g.DEFAULT_LOADER_URL,x;null!=d["default"]?(x=f({},d),delete x["default"],x=JSON.parse(JSON.stringify(x))):x=JSON.parse(JSON.stringify(d));var v=d.workers.loaderConfig,v=g.default({baseUrl:v.baseUrl,locale:b.locale,has:f({"config-deferredInstrumentation":0,"dojo-test-sniff":0,"esri-secure-context":k("esri-secure-context"),"esri-workers-arraybuffer-transfer":k("esri-workers-arraybuffer-transfer"),
"events-keypress-typed":0,"host-webworker":1},v.has),map:f({},v.map),paths:f({},v.paths),packages:v.packages||[]});l.postMessage({type:n,configure:{esriConfig:x,loaderUrl:p,loaderConfig:v}});break;case u:a.removeEventListener("message",e),a.removeEventListener("error",h),c(a)}}function h(b){b.preventDefault();a.removeEventListener("message",e);a.removeEventListener("error",h);r.warn("Failed to create Worker. Fallback to execute module in main thread",b);a=new v;a.addEventListener("message",e);a.addEventListener("error",
h)}a.addEventListener("message",e);a.addEventListener("error",h)})}Object.defineProperty(a,"__esModule",{value:!0});var C=p.normalize(c.toUrl("./worker.js")),B=!p.hasSameOrigin(C,location.href),r=e.getLogger("esri.core.workers"),A=null;k.add("esri-workers-arraybuffer-transfer",!k("safari")||12<=k("safari"));var u=q.MessageType.CONFIGURED,n=q.MessageType.CONFIGURE,t=q.MessageType.HANDSHAKE;a.createWorker=function(){if(!k("esri-workers"))return y(new v);if(!B){var a=void 0;try{a=new Worker(C)}catch(D){r.warn("Failed to create Worker. Fallback to execute module in main thread",
event),a=new v}return y(a)}A||(A=l(C,{responseType:"text"}));return A.then(function(a){return new Worker(URL.createObjectURL(new Blob([a.data],{type:"text/javascript"})))}).catch(function(a){r.warn("Failed to create Worker. Fallback to execute module in main thread",a);return new v}).then(function(a){return y(a)})}})},"esri/core/workers/loaderConfig":function(){define(["require","exports","../tsSupport/assignHelper","dojo/has","../urlUtils"],function(c,a,f,b,d){Object.defineProperty(a,"__esModule",
{value:!0});b=b("esri-built")?"dojo/dojo-lite.js":"dojo/dojo.js";a.DEFAULT_LOADER_URL=d.makeAbsolute(d.removeQueryParameters(c.toUrl(b)));a.DEFAULT_CONFIG={baseUrl:function(){var a=d.removeQueryParameters(c.toUrl("dojo/x.js"));return d.makeAbsolute(a.slice(0,a.length-5))}(),packages:[{name:"esri"},{name:"dojo"},{name:"dojox"},{name:"dstore"},{name:"moment",main:"moment"},{name:"@dojo"},{name:"cldrjs",main:"dist/cldr"},{name:"globalize",main:"dist/globalize"},{name:"maquette",main:"dist/maquette.umd"},
{name:"maquette-css-transitions",main:"dist/maquette-css-transitions.umd"},{name:"maquette-jsx",main:"dist/maquette-jsx.umd"},{name:"tslib",main:"tslib"}],map:{globalize:{cldr:"cldrjs/dist/cldr","cldr/event":"cldrjs/dist/cldr/event","cldr/supplemental":"cldrjs/dist/cldr/supplemental","cldr/unresolved":"cldrjs/dist/cldr/unresolved"}}};a.default=function(b){var k={async:b.async,isDebug:b.isDebug,locale:b.locale,baseUrl:b.baseUrl,has:f({},b.has),map:f({},b.map),packages:b.packages&&b.packages.concat()||
[],paths:f({},b.paths)};b.hasOwnProperty("async")||(k.async=!0);b.hasOwnProperty("isDebug")||(k.isDebug=!1);b.baseUrl||(k.baseUrl=a.DEFAULT_CONFIG.baseUrl);a.DEFAULT_CONFIG.packages.forEach(function(a){a:{for(var b=k.packages,e=0;e<b.length;e++)if(b[e].name===a.name)break a;a=f({},a);e=d.removeQueryParameters(c.toUrl(a.name+"/x.js"));e=e.slice(0,e.length-5);a.location=d.makeAbsolute(e);b.push(a)}});b=k.map=k.map||{};for(var e=0,h=Object.keys(a.DEFAULT_CONFIG.map);e<h.length;e++){var l=h[e];b[l]||
(b[l]=a.DEFAULT_CONFIG.map[l])}return k}})},"esri/core/workers/WorkerFallback":function(){define(["require","exports","dojo/has","../global","./utils"],function(c,a,f,b,d){var l=function(){return function(){var a=this,b=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(function(c){a[c]=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];return b[c].apply(b,a)}})}}(),k=b.MutationObserver||b.WebKitMutationObserver,e=function(){var a;
if(b.process&&b.process.nextTick)a=function(a){b.process.nextTick(a)};else if(b.Promise)a=function(a){b.Promise.resolve().then(a)};else if(k){var c=[],d=document.createElement("div");(new k(function(){for(;0<c.length;)c.shift()()})).observe(d,{attributes:!0});a=function(a){c.push(a);d.setAttribute("queueStatus","1")}}return a}();return function(){function a(){this._dispatcher=new l;this._isInitialized=!1;this._workerPostMessage({type:d.MessageType.HANDSHAKE})}a.prototype.terminate=function(){};Object.defineProperty(a.prototype,
"onmessage",{get:function(){return this._onmessageHandler},set:function(a){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler);(this._onmessageHandler=a)&&this.addEventListener("message",a)},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"onerror",{get:function(){return this._onerrorHandler},set:function(a){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler);(this._onerrorHandler=a)&&this.addEventListener("error",a)},enumerable:!0,
configurable:!0});a.prototype.postMessage=function(a,b){var c=this;e(function(){c._workerMessageHandler(new MessageEvent("message",{data:a}))})};a.prototype.dispatchEvent=function(a){return this._dispatcher.dispatchEvent(a)};a.prototype.addEventListener=function(a,b,c){this._dispatcher.addEventListener(a,b,c)};a.prototype.removeEventListener=function(a,b,c){this._dispatcher.removeEventListener(a,b,c)};a.prototype._workerPostMessage=function(a,b){var c=this;e(function(){c.dispatchEvent(new MessageEvent("message",
{data:a}))})};a.prototype._workerMessageHandler=function(a){var b=this;if(a=d.receiveMessage(a)){var e=a.jobId;switch(a.type){case d.MessageType.CONFIGURE:this._isInitialized||this._workerPostMessage({type:d.MessageType.CONFIGURED});break;case d.MessageType.OPEN:c(["esri/core/workers/RemoteClient",a.modulePath],function(a,c){a=a.connect(c);b._workerPostMessage({type:d.MessageType.OPENED,jobId:e,data:a})})}}};return a}()})},"esri/views/2d/layers/features/processors/SymbolProcessor":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Error ../../../../../core/Logger ../../../../../core/MapPool ../../../../../core/promiseUtils ../../../../../core/accessorSupport/decorators ../../../../../geometry/SpatialReference ../../../../../layers/support/LabelClass ../../../../../renderers/support/jsonUtils ../../../engine/webgl/definitions ../../../engine/webgl/rendererInfoUtils ../../../engine/webgl/Utils ../../../engine/webgl/collisions/CollisionGrid ../../../engine/webgl/mesh/factories/matcherUtils ../../../engine/webgl/mesh/factories/MaterialStore ../../../engine/webgl/mesh/factories/WGLMeshFactory ../../../engine/webgl/mesh/templates/WGLTemplateStore ../../../engine/webgl/util/BidiText ./BaseProcessor".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A,u,n,t,x){function D(a){var b=a&&a.getSymbols();return a&&("unique-value"===a.type||"class-breaks"===a.type)&&null!==a.backgroundFillSymbol||b.some(function(a){return"simple-fill"===a.type||"picture-fill"===a.type})}function G(a,b){switch(a){case "esriGeometryPoint":return!0;case "esriGeometryPolyline":return!0;case "esriGeometryMultipoint":return!0;case "esriGeometryPolygon":return D(b);default:return J.error(new d("mapview-invalid-type",a+" is not supported")),
!1}}function F(a,b,c){c.has(a)||c.set(a,new Set);a=c.get(a);c=b.length;for(var d=0;d<c;d++){var e=b.charCodeAt(d);a.add(e)}}Object.defineProperty(a,"__esModule",{value:!0});var J=l.getLogger("esri.views.2d.layers.features.processors.SymbolProcessor");c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b._symbolToMosaicItemMap=new Map;b._visualSetPromises=new Map;b.type="symbol";return b}f(c,a);c.prototype.destroy=function(){this._visualSetPromises.forEach(function(a,b){a.cancel()});
this._visualSetPromises.clear();this._symbolToMosaicItemMap.clear();this.notifyChange("updating")};Object.defineProperty(c.prototype,"supportsTileUpdates",{get:function(){return!0},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"labelingInfo",{get:function(){return this.configuration&&this.configuration.labelingInfo?this.configuration.labelingInfo.map(function(a){return g.fromJSON(a)}):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"labelClassInfos",{get:function(){var a=
this;return this.labelingInfo?this.labelingInfo.map(function(b){return{labelOptions:b.getOptions(a.spatialReference),labelExpression:b.getLabelExpression(),labelClass:b}}):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"matcher",{get:function(){return r.createMatcher(this.renderer,this.factory.materials,this.factory.templates,p.fromJSON(this.spatialReference),this.service.fields)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"factory",{get:function(){var a=
this;if(!this.configuration)return null;var b=new A.default,c=new n.default(function(b){return a.remoteClient.invoke("tileRenderer.getMaterialItems",b)},this.configuration.devicePixelRatio);return new u.default(this.service.geometryType,this.service.objectIdField,this.service.fields,this.renderer.visualVariables,this.configuration.devicePixelRatio,p.fromJSON(this.spatialReference),b,c,this.labelingInfo)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"queryInfo",{get:function(){var a=
this.configuration,b=a.renderer,c=a.definitionExpression,d=a.outFields,e=a.gdbVersion,a=a.historicMoment,f=this.service.geometryType,g=this._getReturnCentroid(this.rendererInfo.renderer),h=G(f,this.rendererInfo.renderer),f="esriGeometryPoint"===f||"esriGeometryMultipoint"===f||g?20:0,k=null;(b=b.visualVariables)&&b.some(function(a){if("size"===a.type&&a.field&&!a.normalizationField)return k=[a.field+" DESC"],!0});return{definitionExpression:c,orderByFields:k,outFields:d,pixelBuffer:f,returnCentroid:g,
returnGeometry:h,gdbVersion:e,historicMoment:a}},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"renderer",{get:function(){return this.configuration?q.fromJSON(this.configuration.renderer):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"rendererInfo",{get:function(){return this.configuration?y.createRendererInfo(q.fromJSON(this.configuration.renderer),this.tileStore.spatialReference,{fields:this.service.fields}):null},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,
"updating",{get:function(){return 0<this._visualSetPromises.size},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fields",{get:function(){return this.service.fields},enumerable:!0,configurable:!0});c.prototype.onTileData=function(a,b){var c=this,d=b.addOrUpdate,f=b.remove,g=b.clear;b=(d&&d.length?this._processFeatures(a,d):e.resolve()).then(function(b){return c.remoteClient.invoke("tileRenderer.onTileData",{tileKey:a.id,data:{addOrUpdate:b&&b.message||null,remove:f,clear:g}},b&&
b.transferList||null)}).catch(function(b){return c._handleError(a,b)});this._visualSetPromises.set(a,b);b.then(function(){return c._cleanPromise(a)},function(){return c._cleanPromise(a)});this.notifyChange("updating");return b};c.prototype.onTileError=function(a,b){var c=this;b=this.remoteClient.invoke("tileRenderer.onTileError",{tileKey:a.id,error:b});this._visualSetPromises.set(a,b);b.then(function(){return c._cleanPromise(a)},function(){return c._cleanPromise(a)});this.notifyChange("updating");
return b};c.prototype.onTileUpdate=function(a){var b=0;for(a=a.removed;b<a.length;b++){var c=a[b],d=this._visualSetPromises;if(!d.has(c))break;d.get(c).cancel();d.delete(c);this.notifyChange("updating")}};c.prototype._cleanPromise=function(a){this._visualSetPromises.delete(a);this.notifyChange("updating")};c.prototype._processFeatures=function(a,b){var c=this;if(!b||!b.length)return e.resolve(null);var d=this.factory;return d.analyze(b,this.matcher,{viewingMode:"",scale:a.scale}).then(function(b){return c._getLabelMosaicItems(a,
b).then(function(e){return c._writeFeatures(a,b,e,d)})})};c.prototype._writeFeatures=function(a,b,c,d){var e=d.createMeshData(b.length);a={viewingMode:"",scale:a.scale};for(var f=0;f<b.length;f++)d.write(e,b[f],a,c,this._symbolToMosaicItemMap);return this._encodeDisplayData(e)};c.prototype._encodeDisplayData=function(a){var b={},c=[];a.encode(b,c);return{message:b,transferList:c}};c.prototype._handleError=function(a,b){if(b&&"cancel"!==b.dojoType)return this.remoteClient.invoke("tileRenderer.onTileError",
{tileKey:a.id,error:b.message})};c.prototype._getReturnCentroid=function(a){function b(a){if(!a)return!1;a=a.type;return"simple-marker"===a||"picture-marker"===a||"text"===a}if("esriGeometryPolygon"===this.service.geometryType&&this.labelingInfo)return!0;if("esriGeometryPolygon"!==this.service.geometryType)return!1;switch(a.type){case "simple":return b(a.symbol);case "unique-value":return b(a.defaultSymbol)||a.uniqueValueInfos.some(function(a){return b(a.symbol)});case "class-breaks":return b(a.defaultSymbol)||
a.classBreakInfos.some(function(a){return b(a.symbol)});default:return!0}};c.prototype._getLabelMosaicItems=function(a,b){var c=k.acquire(),d=this._createLabelFeatures(a.scale,b,c),f=this._symbolToMosaicItemMap,g=k.acquire(),h=[],l=0;c.forEach(function(a,b){if(f.has(b.id)){var c=f.get(b.id).glyphMosaicItems,d=[];a.forEach(function(a){if(c&&c.length<a||!c[a])d[a]=a});0<d.length&&(g.set(l,b),h.push({symbol:b.toJSON(),id:l,glyphIds:d}),l++)}else{g.set(l,b);var e=[];a.forEach(function(a){return e.push(a)});
h.push({symbol:b.toJSON(),id:l,glyphIds:e});l++}});if(0<h.length)return this.remoteClient.invoke("tileRenderer.getMaterialItems",h).then(function(a){for(var b=0;b<a.length;b++){var c=a[b],e=g.get(c.id);if(e)if(C.isTextSymbol(e))if(f.has(e.id)){if(e=f.get(e.id).glyphMosaicItems,c=c.mosaicItem.glyphMosaicItems)for(var h=0;h<c.length;h++)null!=c[h]&&(e[h]=c[h])}else f.set(e.id,c.mosaicItem);else f.set(e.id,c.mosaicItem)}k.release(g);return d});k.release(c);return e.resolve(d)};c.prototype._getLabelClassInfos=
function(a){return this.labelClassInfos.map(function(a,b){return{id:b,labelClassInfo:a}}).filter(function(b){b=b.labelClassInfo;return(!b.labelClass.minScale||b.labelClass.minScale>=a||0===b.labelClass.minScale)&&(!b.labelClass.maxScale||b.labelClass.maxScale<=a||0===b.labelClass.maxScale)})};c.prototype._createLabelFeatures=function(a,b,c){if(!this.labelingInfo||!b||0===b.length)return null;a=this._getLabelClassInfos(a);if(0===a.length)return null;for(var d=k.acquire(),e=a.map(function(a){return a.id}),
f=new B.default(v.COLLISION_EARLY_REJECT_BUCKET_SIZE),g=0;g<b.length;g++){var h=b[g],l=this.service.geometryType,n=0,p=0;if("esriGeometryPoint"===l)l=h.geometry,n=l.x,p=l.y;else if("esriGeometryPolygon"===l)n=h.centroid.x,p=h.centroid.y;else return null;l=h.attributes[this.service.objectIdField];if(!f.checkOverlap(n,p)){n=Array(a.length);for(p=0;p<a.length;p++){var q=a[p].labelClassInfo,u=t.bidiText(this._evaluateLabelExpression(h,q)),x=u[0],u=u[1];F(q.labelClass.symbol,x,c);n[p]={text:x,rtl:u}}d.set(l,
{text:n,labelingInfo:e})}}return d};c.prototype._evaluateLabelExpression=function(a,b){return b.labelClass.symbol&&g.evaluateWhere(b.labelClass.where,a.attributes)&&b.labelExpression.expression?g.buildLabelText(b.labelExpression.expression,a,this.fields,b.labelOptions):""};b([h.property({readOnly:!0})],c.prototype,"supportsTileUpdates",null);b([h.property()],c.prototype,"configuration",void 0);b([h.property({dependsOn:["configuration"]})],c.prototype,"labelingInfo",null);b([h.property({dependsOn:["labelingInfo"]})],
c.prototype,"labelClassInfos",null);b([h.property({dependsOn:["factory"]})],c.prototype,"matcher",null);b([h.property({dependsOn:["configuration","service","fields"]})],c.prototype,"factory",null);b([h.property({constructOnly:!0})],c.prototype,"queryInfo",null);b([h.property({dependsOn:["configuration"]})],c.prototype,"renderer",null);b([h.property({dependsOn:["configuration"]})],c.prototype,"rendererInfo",null);b([h.property({readOnly:!0})],c.prototype,"updating",null);b([h.property({dependsOn:["service"]})],
c.prototype,"fields",null);return c=b([h.subclass()],c)}(h.declared(x.default));a.default=c})},"esri/core/MapPool":function(){define(["require","exports","./ObjectPool"],function(c,a,f){c=function(){function a(a,b){void 0===a&&(a=50);void 0===b&&(b=50);this._pool=new f(Map,!1,function(a){return a.clear()},b,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return b.acquire()};a.release=function(a){return b.release(a)};
return a}();var b=new c(100);return c})},"esri/layers/support/LabelClass":function(){define("../../core/date ../../core/JSONSupport ../../core/lang ../../core/kebabDictionary dojo/number ./LabelExpressionInfo ./labelUtils ./types ../../support/arcadeUtils ../../arcade/Feature ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(c,a,f,b,d,l,k,e,h,p,g,q){function v(a){a=(a=h.createSyntaxTree(a))&&a.body&&a.body[0]&&a.body[0].body&&a.body[0].body.body;if(!a||1!==a.length)return null;
a="ExpressionStatement"===a[0].type&&a[0].expression;if(!a||"MemberExpression"!==a.type)return null;var b=a.object;if(!b||"Identifier"!==b.type||"$feature"!==b.name)return null;a=a.property;if(!a)return null;switch(a.type){case "Literal":return a.value;case "Identifier":return a.name}return null}function y(a){return a?"service"===a.origin?!1:!a.layer||!e.isOfType(a.layer,"map-image"):!0}b=b({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",
esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",
esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",
esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});var C=new p,B=a.createSubclass({declaredClass:"esri.layers.support.LabelClass",properties:{name:{type:String,value:null,json:{write:!0}},labelExpression:{type:String,value:null,json:{read:function(a,b,c,d){b=b.labelExpressionInfo;if(!b||!b.value&&!b.expression)return a},write:{allowNull:!0,writer:function(a,b,c,d){this.labelExpressionInfo&&y(d)&&(null!=this.labelExpressionInfo.value?
a=this._templateStringToSql(this.labelExpressionInfo.value):null!=this.labelExpressionInfo.expression&&(d=v(this.labelExpressionInfo.expression))&&(a="["+d+"]"));null!=a&&(b[c]=a)}}}},labelExpressionInfo:{value:null,type:l,json:{write:{overridePolicy:function(a,b,c){return y(c)?{allowNull:!0}:{enabled:!1}},writer:function(a,b,c,d){if(null==a&&null!=this.labelExpression&&y(d))a=new l({expression:this.getLabelExpressionArcade()});else if(!a)return;a=a.toJSON(d);a.expression&&(b[c]=a)}}}},labelPlacement:{type:b.apiValues,
value:null,json:{type:b.jsonValues,read:b.read,write:b.write}},maxScale:{type:Number,value:0,json:{write:function(a,b){if(a||this.minScale)b.maxScale=a}}},minScale:{type:Number,value:0,json:{write:function(a,b){if(a||this.maxScale)b.minScale=a}}},requiredFields:{readOnly:!0,dependsOn:["labelExpression","labelExpressionInfo","where"],get:function(){var a=Object.create(null);this._collectRequiredFields(a);return Object.keys(a)}},symbol:{value:null,types:q.labelTypes,json:{origins:{"web-scene":{read:g.read,
write:{target:{symbol:{types:q.labelTypes3D}},writer:g.writeTarget}}},read:g.read,write:g.writeTarget}},useCodedValues:{type:Boolean,value:null,json:{write:!0}},where:{type:String,value:null,json:{write:!0}}},getLabelExpression:function(){var a={expression:"",type:"none"};this.labelExpressionInfo?this.labelExpressionInfo.value?(a.expression=this.labelExpressionInfo.value,a.type="conventional"):this.labelExpressionInfo.expression&&(a.expression=this.labelExpressionInfo.expression,a.type="arcade"):
null!=this.labelExpression&&(a.expression=this._sqlToTemplateString(this.labelExpression),a.type="conventional");return a},getLabelExpressionArcade:function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return k.convertTemplatedStringToArcade(a.expression);case "arcade":return a.expression}return null},getOptions:function(a){a={spatialReference:a};var b=this.labelExpressionInfo;if(b){var c=b.expression;c&&!b.value&&(a.hasArcadeExpression=!0,a.compiledArcadeFunc=
h.createFunction(c))}return a},getLabelExpressionSingleField:function(){var a=this.getLabelExpression();if(!a)return null;switch(a.type){case "conventional":return(a=a.expression.match(r))&&a[1].trim()||null;case "arcade":return v(a.expression)}return null},clone:function(){return new B({labelExpression:this.labelExpression,labelExpressionInfo:f.clone(this.labelExpressionInfo),labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,symbol:this.symbol.clone(),
where:this.where,useCodedValues:this.useCodedValues})},_collectRequiredFields:function(a){this._collectLabelExpressionRequiredFields(this.getLabelExpression(),a);this._collectWhereRequiredFields(this.where,a)},_sqlToTemplateString:function(a){return a.replace(/\[/g,"{").replace(/\]/g,"}")},_templateStringToSql:function(a){return a.replace(/\{/g,"[").replace(/\}/g,"]")},_collectWhereRequiredFields:function(a,b){null!=a&&(a=a.split(" "),3===a.length&&(b[a[0]]=!0),7===a.length&&(b[a[0]]=!0,b[a[4]]=!0))},
_collectLabelExpressionRequiredFields:function(a,b){"arcade"===a.type?h.extractFieldNames(a.expression).forEach(function(a){b[a]=!0}):(a=a.expression.match(/{[^}]*}/g))&&a.forEach(function(a){b[a.slice(1,-1)]=!0})}});B.evaluateWhere=function(a,b){var c=function(a,b,c){switch(b){case "\x3d":return a==c?!0:!1;case "\x3c\x3e":return a!=c?!0:!1;case "\x3e":return a>c?!0:!1;case "\x3e\x3d":return a>=c?!0:!1;case "\x3c":return a<c?!0:!1;case "\x3c\x3d":return a<=c?!0:!1}return!1};try{if(null==a)return!0;
var d=a.split(" ");if(3===d.length)return c(b[d[0]],d[1],d[2]);if(7===d.length){var e=c(b[d[0]],d[1],d[2]),f=d[3],g=c(b[d[4]],d[5],d[6]);switch(f){case "AND":return e&&g;case "OR":return e||g}}return!1}catch(F){console.log("Error.: can't parse \x3d "+a)}};B.buildLabelText=function(a,b,c,d){var e="";if(d&&d.hasArcadeExpression)d.compiledArcadeFunc&&(C.repurposeFromGraphicLikeObject(b.geometry,b.attributes,{fields:c}),a=h.executeFunction(d.compiledArcadeFunc,{vars:{$feature:C},spatialReference:d.spatialReference}),
null!=a&&(e=a.toString()));else var f=b&&b.attributes||{},e=a.replace(/{[^}]*}/g,function(a){return B.formatField(a.slice(1,-1),a,f,c,d)});return e};B.formatField=function(a,b,e,g,h){var k=a.toLowerCase();for(a=0;a<g.length;a++)if(g[a].name.toLowerCase()===k){b=e[g[a].name];var l=g[a].domain;if(l&&"object"===typeof l){if("codedValue"==l.type)for(e=0;e<l.codedValues.length;e++)l.codedValues[e].code==b&&(b=l.codedValues[e].name);else"range"==l.type&&l.minValue<=b&&b<=l.maxValue&&(b=l.name);break}l=
g[a].type;"date"==l?(l=c.fromJSON(h&&h.dateFormat||"shortDate"),(l="DateFormat"+c.getFormat(l))&&(b=f.substitute({myKey:b},"{myKey:"+l+"}"))):("integer"==l||"small-integer"==l||"long"==l||"double"==l)&&h&&h.numberFormat&&h.numberFormat.digitSeparator&&h.numberFormat.places&&(b=d.format(b,{places:h.numberFormat.places}))}return null==b?"":b};var r=/^\s*\{([^}]+)\}\s*$/i;return B})},"esri/core/date":function(){define(["require","exports","./kebabDictionary"],function(c,a,f){Object.defineProperty(a,
"__esModule",{value:!0});var b={"short-date":"(datePattern: 'M/d/y', selector: 'date')","short-date-le":"(datePattern: 'd/M/y', selector: 'date')","long-month-day-year":"(datePattern: 'MMMM d, y', selector: 'date')","day-short-month-year":"(datePattern: 'd MMM y', selector: 'date')","long-date":"(datePattern: 'EEEE, MMMM d, y', selector: 'date')","short-date-short-time":"(datePattern: 'M/d/y', timePattern: 'h:mm a', selector: 'date and time')","short-date-le-short-time":"(datePattern: 'd/M/y', timePattern: 'h:mm a', selector: 'date and time')",
"short-date-short-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm', selector: 'date and time')","short-date-le-short-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm', selector: 'date and time')","short-date-long-time":"(datePattern: 'M/d/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-le-long-time":"(datePattern: 'd/M/y', timePattern: 'h:mm:ss a', selector: 'date and time')","short-date-long-time-24":"(datePattern: 'M/d/y', timePattern: 'H:mm:ss', selector: 'date and time')",
"short-date-le-long-time-24":"(datePattern: 'd/M/y', timePattern: 'H:mm:ss', selector: 'date and time')","long-month-year":"(datePattern: 'MMMM y', selector: 'date')","short-month-year":"(datePattern: 'MMM y', selector: 'date')",year:"(datePattern: 'y', selector: 'date')"};c=f({shortDate:"short-date",shortDateLE:"short-date-le",longDate:"long-date",dayShortMonthYear:"day-short-month-year",longMonthDayYear:"long-month-day-year",shortDateLongTime:"short-date-long-time",shortDateLELongTime:"short-date-le-long-time",
shortDateShortTime:"short-date-short-time",shortDateLEShortTime:"short-date-le-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLongTime24:"short-date-long-time-24",shortDateLELongTime24:"short-date-le-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year"});a.toJSON=c.toJSON.bind(c);a.fromJSON=c.fromJSON.bind(c);a.getFormat=function(a){return b[a]}})},"esri/layers/support/LabelExpressionInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ./labelUtils".split(" "),
function(c,a,f,b,d,l,k){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.value=null;b.expression=null;return b}f(c,a);d=c;c.prototype.readExpression=function(a,b){return b.value?k.convertTemplatedStringToArcade(b.value):a};c.prototype.writeExpression=function(a,b,c){null!=this.value&&(a=k.convertTemplatedStringToArcade(this.value));b[c]=a};c.prototype.clone=function(){return new d({value:this.value,expression:this.expression})};var d;b([l.property({json:{read:!1,write:!1}})],
c.prototype,"value",void 0);b([l.property({json:{write:{allowNull:!0}}})],c.prototype,"expression",void 0);b([l.reader("expression",["expression","value"])],c.prototype,"readExpression",null);b([l.writer("expression")],c.prototype,"writeExpression",null);return c=d=b([l.subclass("esri.layers.support.LabelExpressionInfo")],c)}(l.declared(d))})},"esri/layers/support/labelUtils":function(){define(["require","exports","../../core/string"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});
var b=/__begin__/ig,d=/__end__/ig,l=/^__begin__/i,k=/__end__$/i;a.convertTemplatedStringToArcade=function(a){a?(a=f.replace(a,function(a,b){return'__begin__$feature["'+b+'"]__end__'}),a=l.test(a)?a.replace(l,""):'"'+a,a=k.test(a)?a.replace(k,""):a+'"',a=a.replace(b,'" + ').replace(d,' + "')):a='""';return a}})},"esri/core/string":function(){define(["require","exports","./object"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});a.replace=function(a,c,l){void 0===l&&(l=/\{([^\}]+)\}/g);
return a.replace(l,"function"===typeof c?c:function(a,b){return f.getDeepValue(b,c)})}})},"esri/layers/support/types":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.isOfType=function(a,b){a=a.constructor._meta;if(!a||!a.bases)return!1;a=a.bases;var c=Array.isArray(b);return a.some(function(a){a=a.__accessorMetadata__;if(!a)return!1;a=a.properties;if(!a||!a.type||!a.type.value)return!1;a=a.type.value;return c?-1!==b.indexOf(a):a===b})}})},"esri/renderers/support/jsonUtils":function(){define("require exports ../../core/Error ../../core/object ../../core/Warning ../ClassBreaksRenderer ../HeatmapRenderer ../SimpleRenderer ../UniqueValueRenderer".split(" "),
function(c,a,f,b,d,l,k,e,h){function p(a,b,c){if(!a)return null;if(a&&(a.styleName||a.styleUrl)&&"uniqueValue"!==a.type)return c&&c.messages&&c.messages.push(new d("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+a.type+"'",{definition:a,context:c})),null;b=a?q[a.type]||null:null;if(b)return b=new b,b.read(a,c),b;c&&c.messages&&a&&c.messages.push(new d("renderer:unsupported","Renderers of type '"+(a.type||"unknown")+"' are not supported",{definition:a,
context:c}));return null}function g(a,b,c){return a?c&&"web-scene"===c.origin&&"heatmap"===a.type?(c.messages&&c.messages.push(new f("renderer:unsupported","Renderer of type '"+a.declaredClass+"' are not supported in scenes.",{renderer:a,context:c})),null):a.write(b,c):null}Object.defineProperty(a,"__esModule",{value:!0});var q={simple:e,uniqueValue:h,classBreaks:l,heatmap:k};a.read=p;a.writeTarget=function(a,c,d,e){(a=g(a,{},e))&&b.setDeepValue(d,a,c)};a.write=g;a.fromJSON=function(a,b){return p(a,
null,b)}})},"esri/renderers/ClassBreaksRenderer":function(){define("../core/declare ../core/lang ../core/kebabDictionary ../core/Error ../core/Logger ../core/accessorSupport/ensureType ../support/arcadeUtils ../symbols/Symbol ../symbols/PolygonSymbol3D ../symbols/support/jsonUtils ../symbols/support/typeUtils ./Renderer ./support/LegendOptions ./support/ClassBreakInfo".split(" "),function(c,a,f,b,d,l,k,e,h,p,g,q,v,y){var C=d.getLogger("esri.renderers.ClassBreaksRenderer");v=v.LegendOptions;y=y.ClassBreakInfo;
f=f({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});var B=l.ensureType(y),r=c(q,{declaredClass:"esri.renderers.ClassBreaksRenderer",properties:{backgroundFillSymbol:{types:{base:e,key:"type",typeMap:{"simple-fill":g.types.typeMap["simple-fill"],"picture-fill":g.types.typeMap["picture-fill"],"polygon-3d":g.types.typeMap["polygon-3d"]}},value:null,json:{origins:{"web-scene":{read:p.read,write:{target:{backgroundFillSymbol:{type:h}},writer:p.writeTarget}}},
read:p.read,write:p.writeTarget}},classBreakInfos:{type:[y],json:{read:function(a,b,c){if(Array.isArray(a)){var d=b.minValue;return a.map(function(a){var b=new y;b.read(a,c);null==b.minValue&&(b.minValue=d);null==b.maxValue&&(b.maxValue=b.minValue);d=b.maxValue;return b})}},write:function(a,b,c,d){a=a.map(function(a){return a.write({},d)});this._areClassBreaksConsecutive()&&a.forEach(function(a){delete a.classMinValue});b[c]=a}}},minValue:{type:Number,readOnly:!0,dependsOn:["classBreakInfos"],get:function(){return this.classBreakInfos[0]&&
this.classBreakInfos[0].minValue||0},json:{read:!1,write:{overridePolicy:function(){return 0!==this.classBreakInfos.length&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}},defaultLabel:{type:String,value:null,json:{write:!0}},defaultSymbol:{types:g.rendererTypes,value:null,json:{origins:{"web-scene":{read:p.read,write:{target:{defaultSymbol:{types:g.rendererTypes3D}},writer:p.writeTarget}}},read:p.read,write:p.writeTarget}},valueExpression:{type:String,value:null,json:{write:!0}},
valueExpressionTitle:{type:String,value:null,json:{write:!0}},compiledFunc:{dependsOn:["valueExpression"],get:function(){return k.createFunction(this.valueExpression)}},legendOptions:{type:v,value:null,json:{write:!0}},field:{value:null,cast:function(a){return null==a?a:"function"===typeof a?a:l.ensureString(a)},json:{type:String,write:function(a,c,d,e){"string"===typeof a?c[d]=a:e&&e.messages?e.messages.push(new b("property:unsupported","ClassBreaksRenderer.field set to a function cannot be written to JSON")):
C.error(".field: cannot write field to JSON since it's not a string value")}}},isMaxInclusive:!0,normalizationField:{type:String,value:null,json:{write:!0}},normalizationTotal:{type:Number,value:null,json:{write:!0}},normalizationType:{type:f.apiValues,value:null,dependsOn:["normalizationField","normalizationTotal"],get:function(){var a=this._get("normalizationType"),b=!!this.normalizationField,c=null!=this.normalizationTotal;if(b||c)a=b&&"field"||c&&"percent-of-total",b&&c&&console.warn("warning: both normalizationField and normalizationTotal are set!");
else if("field"===a||"percent-of-total"===a)a=null;return a},json:{type:f.jsonValues,read:f.read,write:f.write}},requiredFields:{dependsOn:["field","normalizationField","valueExpression"]},type:{type:["class-breaks"],value:"class-breaks",json:{type:["classBreaks"]}}},constructor:function(){this.classBreakInfos=[]},addClassBreakInfo:function(b,c,d){b="number"===typeof b?new y({minValue:b,maxValue:c,symbol:d}):B(a.clone(b));this.classBreakInfos.push(b);1===this.classBreakInfos.length&&this.notifyChange("minValue")},
removeClassBreakInfo:function(a,b){var c,d,e=this.classBreakInfos.length;for(d=0;d<e;d++)if(c=[this.classBreakInfos[d].minValue,this.classBreakInfos[d].maxValue],c[0]==a&&c[1]==b){this.classBreakInfos.splice(d,1);break}},getBreakIndex:function(a,b){var c=this.field,d=this.classBreakInfos,e=a.attributes,f=d.length,g=this.isMaxInclusive;if(this.valueExpression)a=k.executeFunction(this.compiledFunc,k.createExecContext(a,k.getViewInfo(b)));else if("function"===typeof c)a=c(a);else if(a=parseFloat(e[c]),
b=this.normalizationType)if(c=parseFloat(this.normalizationTotal),e=parseFloat(e[this.normalizationField]),"log"===b)a=Math.log(a)*Math.LOG10E;else if("percent-of-total"===b&&!isNaN(c))a=a/c*100;else if("field"===b&&!isNaN(e)){if(isNaN(a)||isNaN(e))return-1;a/=e}if(null!=a&&!isNaN(a)&&"number"===typeof a)for(e=0;e<f;e++)if(b=[d[e].minValue,d[e].maxValue],b[0]<=a&&(g?a<=b[1]:a<b[1]))return e;return-1},getClassBreakInfo:function(a,b){a=this.getBreakIndex(a,b);return-1!==a?this.classBreakInfos[a]:null},
getSymbol:function(a,b){a=this.getBreakIndex(a,b);return-1<a?this.classBreakInfos[a].symbol:this.defaultSymbol},getSymbols:function(){var a=[];this.classBreakInfos.forEach(function(b){b.symbol&&a.push(b.symbol)});this.defaultSymbol&&a.push(this.defaultSymbol);return a},clone:function(){return new r({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,
valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:a.clone(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:a.clone(this.visualVariables),legendOptions:a.clone(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})},collectRequiredFields:function(a){this.inherited(arguments);[this.field,this.normalizationField].forEach(function(b){b&&
(a[b]=!0)});this.valueExpression&&k.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})},_areClassBreaksConsecutive:function(){for(var a=this.classBreakInfos,b=1;b<a.length;b++)if(a[b-1].maxValue!==a[b].minValue)return!1;return!0}});return r})},"esri/renderers/Renderer":function(){define("../core/declare ../core/Accessor ../core/JSONSupport ../core/kebabDictionary ../core/screenUtils ../core/lang ../core/Error ../support/arcadeUtils ../webdoc/support/opacityUtils ../Color ./support/utils ./support/AuthoringInfo".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q){var v=b({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),y=b({widthAndDepth:"width-and-depth"}),C=b({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});b=b({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap"},
{ignoreUnknown:!0});var B=Math.PI,r=h.opacityToTransparency,A=h.transparencyToOpacity;return c([a,f],{declaredClass:"esri.renderers.Renderer",properties:{authoringInfo:{type:q,value:null,json:{write:!0}},requiredFields:{dependsOn:["visualVariables"],get:function(){var a=Object.create(null);this.collectRequiredFields(a);return Object.keys(a).sort()}},type:{type:b.apiValues,readOnly:!0,json:{type:b.jsonValues,read:!1,write:{writer:b.write,ignoreOrigin:!0}}},visualVariables:{json:{read:{source:["visualVariables",
"rotationType","rotationExpression"],reader:function(a,b){return this._readVariables(a,b)}},write:function(a,b,c,d){var e=[];a.forEach(function(a,b){"size"===a.type?e.push(this._writeSizeInfo(a,d,b)):"color"===a.type?e.push(this._writeColorInfo(a,d,b)):"opacity"===a.type?e.push(this._writeOpacityInfo(a,d,b)):"rotation"===a.type&&e.push(this._writeRotationInfo(a,d,b))},this);b.visualVariables=e}}}},constructor:function(){this._cache={}},_rotationRE:/^\[([^\]]+)\]$/i,_viewScaleRE:/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,
_visualVariablesSetter:function(a){var b=this._cache;this.visualVariables&&this.visualVariables.forEach(function(a,c){b.hasOwnProperty(c)&&(b[c]=null)},this);a&&a.some(function(a){return!!a.target})&&a.sort(function(a,b){return a.target===b.target?0:a.target?1:-1});a&&a.forEach(function(a,c){"color"===a.type?b[c]=this._processColorInfo(a):"opacity"===a.type?b[c]=this._processOpacityInfo(a):"size"===a.type?b[c]=this._processSizeInfo(a):"rotation"===a.type&&(b[c]=this._processRotationInfo(a))},this);
this._set("visualVariables",a)},getSymbol:function(a,b){},getVisualVariableValues:function(a,b){var c=this.visualVariables,d;c&&(d=c.map(function(c){var d,e=c.type,f=e+"Info";b=l.mixin({},b);b[f]=c;switch(e){case "size":d=this.getSize(a,b);break;case "color":d=this.getColor(a,b);break;case "opacity":d=this.getOpacity(a,b);break;case "rotation":d=this.getRotationAngle(a,b)}return{variable:c,value:d}},this).filter(function(a){return null!=a.value},this));return d},hasVisualVariables:function(a,b){return a?
!!this.getVisualVariablesForType(a,b):!!(this.getVisualVariablesForType("size",b)||this.getVisualVariablesForType("color",b)||this.getVisualVariablesForType("opacity",b)||this.getVisualVariablesForType("rotation",b))},getVisualVariablesForType:function(a,b){var c=this.visualVariables,d;c&&(d=c.filter(function(c){return c.type===a&&("string"===typeof b?c.target===b:!1===b?!c.target:!0)}))&&0===d.length&&(d=void 0);return d},getSize:function(a,b){var c=this._getVarInfo(b&&b.sizeInfo,"size"),d=c.variable,
c=this._cache[c.cacheKey],e=null;if(d)var f=d.minSize,e=d.maxSize,f="object"===typeof f&&f?this._getSize(a,f,c&&c.minSize,b):f,e="object"===typeof e&&e?this._getSize(a,e,c&&c.maxSize,b):e,e=this._getSize(a,d,c&&c.root,b,[f,e]);return e},getSizeRangeAtScale:function(a,b){var c;a=this._getVarInfo(a,"size");var d=this._cache[a.cacheKey],e={scale:b};if((a=a.variable)&&b){b=a.minSize;var f=a.maxSize;a="object"===typeof b&&b?this._getSize({},b,d&&d.minSize,e):b;d="object"===typeof f&&f?this._getSize({},
f,d&&d.maxSize,e):f;if(null!=a||null!=d)a>d&&(c=d,d=a,a=c),c={minSize:a,maxSize:d}}return c},getColor:function(a,b){var c=this._getVarInfo(b&&b.colorInfo,"color");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b,!1)},getOpacity:function(a,b){var c=this._getVarInfo(b&&b.opacityInfo,"opacity");return this._getColorComponent(a,c.variable,this._cache[c.cacheKey],b,!0)},getRotationAngle:function(a,b){var c=this._getVarInfo(b&&b.rotationInfo,"rotation"),d=c.variable,f=this._cache[c.cacheKey],
g=d.axis||"heading",c="heading"===g&&"arithmetic"===d.rotationType?90:0,g="heading"===g&&"arithmetic"===d.rotationType?-1:1,d=d.field,f=f&&f.compiledFunc,h=a.attributes,k=0;if(d||f)f?k=e.executeFunction(f,e.createExecContext(a,e.getViewInfo(b))):"function"===typeof d?k=d.apply(this,arguments):h&&(k=h[d]||0),k="number"!==typeof k||isNaN(k)?null:c+g*k;return k},collectRequiredFields:function(a){var b=[];this.visualVariables&&(b=b.concat(this.visualVariables));b.forEach(function(b){b&&(b.field&&(a[b.field]=
!0),b.normalizationField&&(a[b.normalizationField]=!0),b.valueExpression&&e.extractFieldNames(b.valueExpression).forEach(function(b){a[b]=!0}))})},_getVarInfo:function(a,b){var c;a&&a.type===b&&this.visualVariables?(c=this.visualVariables.indexOf(a),a=this.visualVariables[c]):this.visualVariables&&(a=(a=this.getVisualVariablesForType(b))&&a[0],c=this.visualVariables.indexOf(a));return{variable:a,cacheKey:c}},_readSizeInfo:function(a){a.axis&&(a.axis=y.fromJSON(a.axis));a.valueUnit&&(a.valueUnit=C.fromJSON(a.valueUnit));
return a},_readColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){Array.isArray(b)?a.colors[c]=p.fromJSON(b):a.colors[c]=new p(b)}),a.stops&&a.stops.forEach(function(b,c){b.color&&Array.isArray(b.color)?a.stops[c].color=p.fromJSON(b.color):b.color&&(a.stops[c].color=new p(b.color))}));return a},_readOpacityInfo:function(a){var b;a&&(b=l.mixin({},a),b.transparencyValues&&(b.opacityValues=b.transparencyValues.map(A),delete b.transparencyValues),b.stops&&(b.stops=b.stops.map(function(a){a=
l.mixin({},a);a.opacity=A(a.transparency);delete a.transparency;return a})));return b},_readVariables:function(a,b){a&&(a=a.map(function(a){a=l.clone(a);a.type=v.fromJSON(a.type);"size"===a.type?a=this._readSizeInfo(a):"color"===a.type?a=this._readColorInfo(a):"opacity"===a.type&&(a=this._readOpacityInfo(a));return a},this));var c=b.rotationType;if(b=b.rotationExpression)c={type:"rotation",rotationType:c},(b=b.match(this._rotationRE))&&b[1]&&(c.field=b[1],a||(a=[]),a.push(c));return a},_createCache:function(a){var b=
a&&a.valueExpression,c=e.createSyntaxTree(b),c=e.createFunction(c),d=!(!a||!a.expression)||this._viewScaleRE.test(b);return{ipData:this._interpolateData(a),hasExpr:!!b,compiledFunc:c,isScaleDriven:d}},_processColorInfo:function(a){a&&(a.colors&&a.colors.forEach(function(b,c){b instanceof p||(a.colors[c]=new p(b))}),a.stops&&a.stops.forEach(function(b,c){!b.color||b.color instanceof p||(a.stops[c].color=new p(b.color))}),this._sortStops(a.stops));return this._createCache(a)},_processOpacityInfo:function(a){this._sortStops(a&&
a.stops);return this._createCache(a)},_processSizeInfo:function(a){a.stops&&Array.isArray(a.stops)?a.stops=this._processSizeInfoStops(a.stops):(a.minSize=a.minSize&&this._processSizeInfoSize(a.minSize),a.maxSize=a.maxSize&&this._processSizeInfoSize(a.maxSize));return{root:this._createCache(a),minSize:this._createCache(a.minSize),maxSize:this._createCache(a.maxSize)}},_processSizeInfoSize:function(a){"object"===typeof a?a.stops=this._processSizeInfoStops(a.stops):a=d.toPt(a);return a},_processSizeInfoStops:function(a){a&&
Array.isArray(a)&&(a.forEach(function(a){a.size=d.toPt(a.size)}),this._sortStops(a));return a},_sortStops:function(a){a&&Array.isArray(a)&&a.sort(function(a,b){return a.value-b.value})},_processRotationInfo:function(a){return this._createCache(a)},_getSize:function(a,b,c,d,f){var h=a.attributes,k=b.field,l=b.stops,n=0,p=c&&c.hasExpr,q=c&&c.compiledFunc,t=c&&c.ipData,x=c&&c.isScaleDriven,u="number"===typeof a,v=u?a:null;if(k||x||p){var r=d&&d.scale,y=f?f[0]:b.minSize,A=f?f[1]:b.maxSize,D=b.minDataValue,
C=b.maxDataValue,K=b.valueUnit||"unknown",Y=b.valueRepresentation,n=b.scaleBy,ca=b.normalizationField,fa=h?parseFloat(h[ca]):void 0,ba=d&&d.shape;x?v=null==r?this._getAverageValue(b):r:"number"!==typeof v&&(p?v=e.executeFunction(q,e.createExecContext(a,e.getViewInfo(d))):"function"===typeof k?v=k.apply(this,arguments):h&&(v=h[k]));if(null==v||ca&&!u&&(isNaN(fa)||0===fa))return null;isNaN(fa)||u||(v/=fa);if(l)A=this._lookupData(v,t),v=A[0],y=A[1],v===y?n=l[v].size:(v=l[v].size,l=l[y].size,n=v+(l-v)*
A[2]);else if(null!=y&&null!=A&&null!=D&&null!=C)v<=D?n=y:v>=C?n=A:(l=(v-D)/(C-D),"area"===n&&ba?(y=(v="circle"===ba)?B*Math.pow(y/2,2):y*y,l=y+l*((v?B*Math.pow(A/2,2):A*A)-y),n=v?2*Math.sqrt(l/B):Math.sqrt(l)):n=y+l*(A-y));else if("unknown"===K)null!=y&&null!=D?(y&&D?(l=v/D,n="circle"===ba?2*Math.sqrt(l*Math.pow(y/2,2)):"square"===ba||"diamond"===ba||"image"===ba?Math.sqrt(l*Math.pow(y,2)):l*y):n=v+(y||D),n=n<y?y:n,null!=A&&n>A&&(n=A)):n=v;else{l=(d&&d.resolution?d.resolution:1)*g.meterIn[K];if("area"===
Y)n=Math.sqrt(v/B)/l,n*=2;else if(n=v/l,"radius"===Y||"distance"===Y)n*=2;null!=y&&n<y&&(n=y);null!=A&&n>A&&(n=A)}}else b&&(n=l&&l[0]&&l[0].size,null==n&&(n=b.minSize));return n=isNaN(n)?0:n},_getAverageValue:function(a){var b=a.stops,c;b?(c=b[0].value,a=b[b.length-1].value):(c=a.minDataValue||0,a=a.maxDataValue||0);return(c+a)/2},_getColorComponent:function(a,b,c,d,f){var g=a.attributes,h=b&&b.field,k="number"===typeof a,l=k?a:null,n=c&&c.hasExpr,p=c&&c.compiledFunc,q=c&&c.ipData,t;if(h||n){var x=
b.normalizationField,u=g&&x?parseFloat(g[x]):void 0;"number"!==typeof l&&(n?l=e.executeFunction(p,e.createExecContext(a,e.getViewInfo(d))):"function"===typeof h?l=h.apply(this,arguments):g&&(l=g[h]));null==l||x&&!k&&(isNaN(u)||0===u)||(isNaN(u)||k||(l/=u),t=f?this._getOpacity(l,b,q):this._getColor(l,b,q,d&&d.color))}else b&&(g=b.stops,f?(t=g&&g[0]&&g[0].opacity,null==t&&(t=b.opacityValues&&b.opacityValues[0])):t=g&&g[0]&&g[0].color||b.colors&&b.colors[0]);return t},_interpolateData:function(a){var b;
if(a)if(a.colors||a.opacityValues){var c=(a.colors||a.opacityValues).length,d=a.minDataValue,e=(a.maxDataValue-d)/(c-1);b=[];for(a=0;a<c;a++)b[a]=d+a*e}else a.stops&&(b=a.stops.map(function(a){return a.value||0}));return b},_getOpacity:function(a,b,c){a=this._lookupData(a,c);var d;b=b||this.opacityInfo;a&&(c=a[0],d=a[1],c===d?d=this._getOpacValue(b,c):(c=this._getOpacValue(b,c),b=this._getOpacValue(b,d),d=c+(b-c)*a[2]));return d},_getOpacValue:function(a,b){return a.opacityValues?a.opacityValues[b]:
a.stops[b].opacity},_getColor:function(a,b,c,d){a=this._lookupData(a,c);b=b||this.colorInfo;if(a){c=a[0];var e=a[1];d=d||new p;c===e?d.setColor(this._getColorObj(b,c)):p.blendColors(this._getColorObj(b,c),this._getColorObj(b,e),a[2],d);return d}},_getColorObj:function(a,b){return a.colors?a.colors[b]:a.stops[b].color},_lookupData:function(a,b){var c;if(b){var d=0,e=b.length-1;b.some(function(b,c){if(a<b)return e=c,!0;d=c;return!1});c=[d,e,(a-b[d])/(b[e]-b[d])]}return c},_processForContext:function(a,
b,c){if(b&&"web-scene"===b.origin){var d=null!=a.expression,e=null!=a.valueExpressionTitle&&"rotation"===a.type;b.messages&&(d&&b.messages.push(new k("property:unsupported",a.type+"VisualVariable.expression is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:c+".expression",context:b})),e&&b.messages.push(new k("property:unsupported",a.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",
{instance:this,propertyName:c+".valueExpressionTitle",context:b})));d&&delete a.expression;e&&delete a.valueExpressionTitle}else"size"===a.type&&this._convertExpressionToArcade(a)},_writeRotationInfo:function(a,b,c){a&&(a=l.mixin({},a),this._processForContext(a,b,"visualVariables["+c+"]"),a.type=v.toJSON(a.type),a=l.fixJson(a,!0));return a},_convertExpressionToArcade:function(a){a&&a.expression&&(a.valueExpression="$view.scale")},_writeSizeInfo:function(a,b,c){if(a){a=l.mixin({},a);this._processForContext(a,
b,"string"===typeof c?c:"visualVariables["+c+"]");var d=a.minSize,e=a.maxSize;d&&(a.minSize="number"===typeof d?d:this._writeSizeInfo(d,b,"visualVariables["+c+"].minSize"));e&&(a.maxSize="number"===typeof e?e:this._writeSizeInfo(e,b,"visualVariables["+c+"].maxSize"));b=a.legendOptions;c=a.axis;a.type=v.toJSON(a.type);c&&(a.axis=y.toJSON(c));b&&(a.legendOptions=l.mixin({},b),b=b.customValues)&&(a.legendOptions.customValues=b.slice(0));a.stops&&(a.stops=a.stops.map(function(a){a=l.mixin({},a);null===
a.label&&delete a.label;return a}));a=l.fixJson(a,!0)}return a},_writeColorInfo:function(a,b,c){a&&(a=l.mixin({},a),this._processForContext(a,b,"visualVariables["+c+"]"),a.type=v.toJSON(a.type),a.colors&&(a.colors=a.colors.map(function(a){return p.toJSON(a)})),a.stops&&(a.stops=a.stops.map(function(a){a=l.mixin({},a);a.color&&(a.color=p.toJSON(a.color));null==a.value&&(a.value=0);null===a.label&&delete a.label;return a})),a.legendOptions&&(a.legendOptions=l.mixin({},a.legendOptions)),a=l.fixJson(a,
!0));return a},_writeOpacityInfo:function(a,b,c){var d;a&&(d=l.mixin({},a),this._processForContext(d,b,"visualVariables["+c+"]"),d.type=v.toJSON(d.type),d.opacityValues&&(d.transparencyValues=d.opacityValues.map(r),delete d.opacityValues),d.stops&&(d.stops=d.stops.map(function(a){a=l.mixin({},a);a.transparency=r(a.opacity);delete a.opacity;null===a.label&&delete a.label;return a})),d.legendOptions&&(d.legendOptions=l.mixin({},d.legendOptions)),d=l.fixJson(d,!0));return d}})})},"esri/renderers/support/AuthoringInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/lang ../../core/accessorSupport/decorators ./AuthoringInfoVisualVariable".split(" "),
function(c,a,f,b,d,l,k,e,h){var p=l({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),g=l({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance"}),q="inches feet yards miles nautical-miles millimeters centimeters decimeters meters kilometers decimal-degrees".split(" ");
return function(a){function c(b){b=a.call(this)||this;b.lengthUnit=null;b.visualVariables=null;return b}f(c,a);d=c;Object.defineProperty(c.prototype,"classificationMethod",{get:function(){var a=this._get("classificationMethod"),b=this.type;return b&&"relationship"!==b?"class-breaks-size"===b||"class-breaks-color"===b?a||"manual":null:a},set:function(a){this._set("classificationMethod",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"fields",{get:function(){return this.type&&
"predominance"!==this.type?null:this._get("fields")},set:function(a){this._set("fields",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"field1",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field1")},set:function(a){this._set("field1",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"field2",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("field2")},set:function(a){this._set("field2",a)},enumerable:!0,
configurable:!0});Object.defineProperty(c.prototype,"focus",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("focus")},set:function(a){this._set("focus",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"numClasses",{get:function(){return this.type&&"relationship"!==this.type?null:this._get("numClasses")},set:function(a){this._set("numClasses",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"standardDeviationInterval",{get:function(){var a=
this.type;return a&&"relationship"!==a&&"class-breaks-size"!==a&&"class-breaks-color"!==a?null:this.classificationMethod&&"standard-deviation"!==this.classificationMethod?null:this._get("standardDeviationInterval")},set:function(a){this._set("standardDeviationInterval",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"type",{get:function(){return this._get("type")},set:function(a){var b=a;"classed-size"===a?b="class-breaks-size":"classed-color"===a&&(b="class-breaks-color");this._set("type",
b)},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new d({classificationMethod:this.classificationMethod,fields:this.fields&&this.fields.slice(0),field1:k.clone(this.field1),field2:k.clone(this.field2),focus:this.focus,numClasses:this.numClasses,lengthUnit:this.lengthUnit,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(function(a){return a.clone()})})};var d;b([e.property({type:p.apiValues,
value:null,dependsOn:["type"],json:{type:p.jsonValues,read:p.read,write:p.write}})],c.prototype,"classificationMethod",null);b([e.property({type:[String],value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"fields",null);b([e.property({value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"field1",null);b([e.property({value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"field2",null);b([e.property({type:String,value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"focus",
null);b([e.property({type:Number,value:null,dependsOn:["type"],json:{write:!0}})],c.prototype,"numClasses",null);b([e.property({type:q,json:{type:q,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],c.prototype,"lengthUnit",void 0);b([e.property({type:[.25,.33,.5,1],value:null,dependsOn:["classificationMethod","type"],json:{type:[.25,.33,.5,1],write:!0}})],c.prototype,"standardDeviationInterval",null);b([e.property({type:String,value:null,json:{type:g.jsonValues,read:g.read,write:g.write}})],
c.prototype,"type",null);b([e.property({type:[h],json:{write:!0}})],c.prototype,"visualVariables",void 0);return c=d=b([e.subclass("esri.renderers.support.AuthoringInfo")],c)}(e.declared(d))})},"esri/renderers/support/AuthoringInfoVisualVariable":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/kebabDictionary ../../core/accessorSupport/decorators ../../core/accessorSupport/decorators/cast".split(" "),
function(c,a,f,b,d,l,k,e){var h=l({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),p=l({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity"}),g={key:function(a){return"number"===typeof a?"number":"string"},typeMap:{number:Number,string:String},base:null},q=["high-to-low","above-and-below","centered-on","extremes"],v="seconds minutes hours days months years".split(" ");return function(a){function c(b){b=a.call(this)||this;b.endTime=null;b.field=null;b.maxSliderValue=null;
b.minSliderValue=null;b.startTime=null;b.type=null;b.units=null;return b}f(c,a);d=c;c.prototype.castEndTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};c.prototype.castStartTime=function(a){return"string"===typeof a||"number"===typeof a?a:null};Object.defineProperty(c.prototype,"style",{get:function(){return"color"===this.type?this._get("style"):null},set:function(a){this._set("style",a)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"theme",{get:function(){return"color"===
this.type?this._get("theme")||"high-to-low":null},set:function(a){this._set("theme",a)},enumerable:!0,configurable:!0});c.prototype.clone=function(){return new d({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})};var d;b([k.property({types:g,json:{write:!0}})],c.prototype,"endTime",void 0);b([e.cast("endTime")],c.prototype,"castEndTime",null);b([k.property({type:String,
json:{write:!0}})],c.prototype,"field",void 0);b([k.property({type:Number,json:{write:!0}})],c.prototype,"maxSliderValue",void 0);b([k.property({type:Number,json:{write:!0}})],c.prototype,"minSliderValue",void 0);b([k.property({types:g,json:{write:!0}})],c.prototype,"startTime",void 0);b([e.cast("startTime")],c.prototype,"castStartTime",null);b([k.property({type:h.apiValues,value:null,dependsOn:["type"],json:{type:h.jsonValues,read:h.read,write:h.write}})],c.prototype,"style",null);b([k.property({type:q,
value:null,dependsOn:["type"],json:{type:q,write:!0}})],c.prototype,"theme",null);b([k.property({type:p.apiValues,json:{type:p.jsonValues,read:p.read,write:p.write}})],c.prototype,"type",void 0);b([k.property({type:v,json:{type:v,write:!0}})],c.prototype,"units",void 0);return c=d=b([k.subclass("esri.renderers.support.AuthoringInfoVisualVariable")],c)}(k.declared(d))})},"esri/renderers/support/LegendOptions":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(c,a,f,b,d,l){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.title=null;return b}f(c,a);d=c;c.prototype.clone=function(){return new d({title:this.title})};var d;b([l.property({type:String,json:{write:!0}})],c.prototype,"title",void 0);return c=d=b([l.subclass("esri.renderers.support.LegendOptions")],c)}(l.declared(d));a.LegendOptions=c;a.default=c})},"esri/renderers/support/ClassBreakInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),
function(c,a,f,b,d,l,k,e){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.minValue=null;b.maxValue=0;b.symbol=null;return b}f(c,a);d=c;c.prototype.clone=function(){return new d({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})};var d;b([l.property({type:String,json:{write:!0}})],c.prototype,"description",
void 0);b([l.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);b([l.property({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],c.prototype,"minValue",void 0);b([l.property({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],c.prototype,"maxValue",void 0);b([l.property({types:e.rendererTypes,json:{origins:{"web-scene":{read:k.read,write:{target:{symbol:{types:e.rendererTypes3D}},writer:k.writeTarget}}},read:k.read,
write:k.writeTarget}})],c.prototype,"symbol",void 0);return c=d=b([l.subclass("esri.renderers.support.ClassBreakInfo")],c)}(l.declared(d));a.ClassBreakInfo=c;a.default=c})},"esri/renderers/HeatmapRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../Color ../core/lang ../core/accessorSupport/decorators ./Renderer ./support/HeatmapColorStop".split(" "),function(c,a,f,b,d,l,k,e,h){return function(a){function c(b){b=a.call(this)||this;
b.blurRadius=10;b.colorStops=[new h.HeatmapColorStop({ratio:0,color:new d("rgba(255, 140, 0, 0)")}),new h.HeatmapColorStop({ratio:.75,color:new d("rgba(255, 140, 0, 1)")}),new h.HeatmapColorStop({ratio:.9,color:new d("rgba(255, 0,   0, 1)")})];b.field=null;b.fieldOffset=0;b.maxPixelIntensity=100;b.minPixelIntensity=0;b.type="heatmap";return b}f(c,a);e=c;c.prototype.clone=function(){return new e({blurRadius:this.blurRadius,colorStops:l.clone(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,
minPixelIntensity:this.minPixelIntensity})};var e;b([k.property({type:Number,json:{write:!0}})],c.prototype,"blurRadius",void 0);b([k.property({type:[h.HeatmapColorStop],json:{write:!0}})],c.prototype,"colorStops",void 0);b([k.property({type:String,json:{write:!0}})],c.prototype,"field",void 0);b([k.property({type:Number,json:{write:{overridePolicy:function(a,b,c){return{enabled:null==c}}}}})],c.prototype,"fieldOffset",void 0);b([k.property({type:Number,json:{write:!0}})],c.prototype,"maxPixelIntensity",
void 0);b([k.property({type:Number,json:{write:!0}})],c.prototype,"minPixelIntensity",void 0);b([k.property({dependsOn:["field"],readOnly:!0})],c.prototype,"requiredFields",void 0);b([k.enumeration.serializable()({heatmap:"heatmap"})],c.prototype,"type",void 0);return c=e=b([k.subclass("esri.renderers.HeatmapRenderer")],c)}(k.declared(e))})},"esri/renderers/support/HeatmapColorStop":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../Color ../../core/JSONSupport ../../core/accessorSupport/decorators".split(" "),
function(c,a,f,b,d,l,k){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(b){b=a.call(this)||this;b.color=null;b.ratio=null;return b}f(c,a);e=c;c.prototype.clone=function(){return new e({color:this.color,ratio:this.ratio})};var e;b([k.property({type:d,json:{write:!0}})],c.prototype,"color",void 0);b([k.property({type:Number,json:{write:!0}})],c.prototype,"ratio",void 0);return c=e=b([k.subclass("esri.renderers.support.HeatmapColorStop")],c)}(k.declared(l));a.HeatmapColorStop=
c;a.default=c})},"esri/renderers/SimpleRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/lang ../core/accessorSupport/decorators ./Renderer ../symbols/support/jsonUtils ../symbols/support/typeUtils".split(" "),function(c,a,f,b,d,l,k,e,h){return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.symbol=null;b.type="simple";return b}f(c,a);k=c;c.prototype.writeSymbolWebScene=
function(a,b,c,d){e.writeTarget(a,b,c,d)};c.prototype.writeSymbol=function(a,b,c,d){e.writeTarget(a,b,c,d)};c.prototype.readSymbol=function(a,b,c){return e.read(a,b,c)};c.prototype.getSymbol=function(a,b){return this.symbol};c.prototype.getSymbols=function(){return this.symbol?[this.symbol]:[]};c.prototype.clone=function(){return new k({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:d.clone(this.visualVariables),authoringInfo:this.authoringInfo&&
this.authoringInfo.clone()})};var k;b([l.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);b([l.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);b([l.property({types:h.rendererTypes})],c.prototype,"symbol",void 0);b([l.writer("web-scene","symbol",{symbol:{types:h.rendererTypes3D}})],c.prototype,"writeSymbolWebScene",null);b([l.writer("symbol")],c.prototype,"writeSymbol",null);b([l.reader("symbol")],c.prototype,"readSymbol",null);b([l.enumeration.serializable()({simple:"simple"})],
c.prototype,"type",void 0);return c=k=b([l.subclass("esri.renderers.SimpleRenderer")],c)}(l.declared(k))})},"esri/renderers/UniqueValueRenderer":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/tsSupport/paramHelper ../symbols ../core/arrayUtils ../core/Error ../core/lang ../core/Logger ../core/urlUtils ../core/accessorSupport/decorators ../core/accessorSupport/ensureType ../portal/Portal ./Renderer ./support/diffUtils ./support/LegendOptions ./support/UniqueValueInfo ../support/arcadeUtils ../symbols/support/jsonUtils ../symbols/support/styleUtils ../symbols/support/typeUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r,A,u,n,t,x){var D=p.getLogger("esri.renderers.UniqueValueRenderer"),G=v.ensureType(A.default);return function(a){function c(b){b=a.call(this)||this;b._valueInfoMap={};b._isDefaultSymbolDerived=!1;b.type="unique-value";b.backgroundFillSymbol=null;b.field=null;b.field2=null;b.field3=null;b.valueExpression=null;b.valueExpressionTitle=null;b.legendOptions=null;b.defaultLabel=null;b.fieldDelimiter=null;b.portal=null;b.styleOrigin=null;b.diff={uniqueValueInfos:function(a,
b){if(a||b){if(!a||!b)return{type:"complete",oldValue:a,newValue:b};for(var c=!1,d={type:"collection",added:[],removed:[],changed:[],unchanged:[]},e=function(e){var f=k.find(a,function(a){return a.value===b[e].value});f?B.diff(f,b[e])?d.changed.push({type:"complete",oldValue:f,newValue:b[e]}):d.unchanged.push({oldValue:f,newValue:b[e]}):d.added.push(b[e]);c=!0},f=0;f<b.length;f++)e(f);e=function(e){k.find(b,function(b){return b.value===a[e].value})||(d.removed.push(a[e]),c=!0)};for(f=0;f<a.length;f++)e(f);
return c?d:void 0}}};b._set("uniqueValueInfos",[]);return b}f(c,a);p=c;c.prototype.writeBackgroundFillSymbolWebScene=function(a,b,c,d){n.writeTarget(a,b,c,d)};c.prototype.castField=function(a){return null==a?a:"function"===typeof a?a:v.ensureString(a)};c.prototype.writeField=function(a,b,c,d){"string"===typeof a?b[c]=a:d&&d.messages?d.messages.push(new e("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):D.error(".field: cannot write field to JSON since it's not a string value")};
Object.defineProperty(c.prototype,"compiledFunc",{get:function(){return u.createFunction(this.valueExpression)},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"defaultSymbol",{set:function(a){this._isDefaultSymbolDerived=!1;this._set("defaultSymbol",a)},enumerable:!0,configurable:!0});c.prototype.readDefaultSymbol=function(a,b,c){return n.read(a,b,c)};c.prototype.writeDefaultSymbolWebScene=function(a,b,c,d){this._isDefaultSymbolDerived||n.writeTarget(a,b,c,d)};c.prototype.writeDefaultSymbol=
function(a,b,c,d){this._isDefaultSymbolDerived||n.writeTarget(a,b,c,d)};c.prototype.readPortal=function(a,b,c){return c.portal||y.getDefault()};c.prototype.readStyleOrigin=function(a,b,c){if(b.styleName)return Object.freeze({styleName:b.styleName});if(b.styleUrl)return a=g.read(b.styleUrl,c),Object.freeze({styleUrl:a})};c.prototype.writeStyleOrigin=function(a,b,c,d){a.styleName?b.styleName=a.styleName:a.styleUrl&&(b.styleUrl=g.write(a.styleUrl,d),g.isAbsolute(b.styleUrl)&&(b.styleUrl=g.normalize(b.styleUrl)))};
Object.defineProperty(c.prototype,"uniqueValueInfos",{set:function(a){this.styleOrigin?D.error("#uniqueValueInfos\x3d","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",a),this._updateValueInfoMap())},enumerable:!0,configurable:!0});c.prototype.addUniqueValueInfo=function(a,b){this.styleOrigin?D.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(a="object"===typeof a?
G(a):new A.default({value:a,symbol:b}),this.uniqueValueInfos.push(a),this._valueInfoMap[a.value]=a)};c.prototype.removeUniqueValueInfo=function(a){if(this.styleOrigin)D.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(var b=0;b<this.uniqueValueInfos.length;b++)if(this.uniqueValueInfos[b].value===a+""){delete this._valueInfoMap[a];this.uniqueValueInfos.splice(b,1);break}};c.prototype.getUniqueValueInfo=function(a,b){var c=
this.field,d=a.attributes,e;this.valueExpression?e=u.executeFunction(this.compiledFunc,u.createExecContext(a,u.getViewInfo(b))):"function"!==typeof c&&this.field2?(a=this.field2,b=this.field3,e=[],c&&e.push(d[c]),a&&e.push(d[a]),b&&e.push(d[b]),e=e.join(this.fieldDelimiter||"")):"function"===typeof c?e=c(a):c&&(e=d[c]);return this._valueInfoMap[e+""]};c.prototype.getSymbol=function(a,b){return(a=this.getUniqueValueInfo(a,b))&&a.symbol||this.defaultSymbol};c.prototype.getSymbols=function(){for(var a=
[],b=0,c=this.uniqueValueInfos;b<c.length;b++){var d=c[b];d.symbol&&a.push(d.symbol)}this.defaultSymbol&&a.push(this.defaultSymbol);return a};c.prototype.clone=function(){var a=new p({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:h.clone(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:h.clone(this.visualVariables),legendOptions:h.clone(this.legendOptions),
authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:h.clone(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(a._isDefaultSymbolDerived=!0);a._set("portal",this.portal);var b=h.clone(this.uniqueValueInfos);this.styleOrigin&&(a._set("styleOrigin",Object.freeze(h.clone(this.styleOrigin))),Object.freeze(b));a._set("uniqueValueInfos",b);a._updateValueInfoMap();return a};c.prototype.collectRequiredFields=function(a){this.inherited(arguments);[this.field,this.field2,
this.field3].forEach(function(b){b&&"string"===typeof b&&(a[b]=!0)});this.valueExpression&&u.extractFieldNames(this.valueExpression).forEach(function(b){a[b]=!0})};c.prototype.populateFromStyle=function(){var a=this;return t.fetchStyle(this.styleOrigin,{portal:this.portal}).then(function(b){var c=[];a._valueInfoMap={};b&&b.data&&Array.isArray(b.data.items)&&b.data.items.forEach(function(d){var e=new l.WebStyleSymbol({styleUrl:b.styleUrl,styleName:b.styleName,portal:a.portal,name:d.name});a.defaultSymbol||
d.name!==b.data.defaultItem||(a.defaultSymbol=e,a._isDefaultSymbolDerived=!0);e=new A.default({value:d.name,symbol:e});c.push(e);a._valueInfoMap[d.name]=e});a._set("uniqueValueInfos",Object.freeze(c));!a.defaultSymbol&&a.uniqueValueInfos.length&&(a.defaultSymbol=a.uniqueValueInfos[0].symbol,a._isDefaultSymbolDerived=!0);return a})};c.prototype._updateValueInfoMap=function(){var a=this;this._valueInfoMap={};this.uniqueValueInfos.forEach(function(b){return a._valueInfoMap[b.value+""]=b})};c.fromPortalStyle=
function(a,b){var c=new p(b&&b.properties);c._set("styleOrigin",Object.freeze({styleName:a}));c._set("portal",b&&b.portal||y.getDefault());b=c.populateFromStyle();b.catch(function(b){D.error("#fromPortalStyle('"+a+"'[, ...])","Failed to create unique value renderer from style name",b)});return b};c.fromStyleUrl=function(a,b){b=new p(b&&b.properties);b._set("styleOrigin",Object.freeze({styleUrl:a}));b=b.populateFromStyle();b.catch(function(b){D.error("#fromStyleUrl('"+a+"'[, ...])","Failed to create unique value renderer from style URL",
b)});return b};var p;b([q.enumeration.serializable()({uniqueValue:"unique-value"})],c.prototype,"type",void 0);b([q.property({types:{base:l.BaseSymbol,key:"type",typeMap:{"simple-fill":x.rendererTypes.typeMap["simple-fill"],"picture-fill":x.rendererTypes.typeMap["picture-fill"],"polygon-3d":x.rendererTypes.typeMap["polygon-3d"]}},json:{read:n.read,write:n.writeTarget}})],c.prototype,"backgroundFillSymbol",void 0);b([q.writer("web-scene","backgroundFillSymbol",{backgroundFillSymbol:{type:l.PolygonSymbol3D}})],
c.prototype,"writeBackgroundFillSymbolWebScene",null);b([q.property({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],c.prototype,"field",void 0);b([q.cast("field")],c.prototype,"castField",null);b([q.writer("field")],c.prototype,"writeField",null);b([q.property({type:String,json:{write:!0}})],c.prototype,"field2",void 0);b([q.property({type:String,json:{write:!0}})],c.prototype,"field3",void 0);b([q.property({type:String,json:{write:!0}})],c.prototype,"valueExpression",void 0);
b([q.property({type:String,json:{write:!0}})],c.prototype,"valueExpressionTitle",void 0);b([q.property({dependsOn:["valueExpression"]})],c.prototype,"compiledFunc",null);b([q.property({type:r.default,json:{write:!0}})],c.prototype,"legendOptions",void 0);b([q.property({type:String,json:{write:!0}})],c.prototype,"defaultLabel",void 0);b([q.property({types:x.rendererTypes})],c.prototype,"defaultSymbol",null);b([q.reader("defaultSymbol")],c.prototype,"readDefaultSymbol",null);b([q.writer("web-scene",
"defaultSymbol",{defaultSymbol:{types:x.rendererTypes3D}})],c.prototype,"writeDefaultSymbolWebScene",null);b([q.writer("defaultSymbol")],c.prototype,"writeDefaultSymbol",null);b([q.property({type:String,json:{write:!0}})],c.prototype,"fieldDelimiter",void 0);b([q.property({type:y,readOnly:!0})],c.prototype,"portal",void 0);b([q.reader("portal",["styleName"])],c.prototype,"readPortal",null);b([q.property({readOnly:!0})],c.prototype,"styleOrigin",void 0);b([q.reader("styleOrigin",["styleName","styleUrl"])],
c.prototype,"readStyleOrigin",null);b([q.writer("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],c.prototype,"writeStyleOrigin",null);b([q.property({type:[A.default],json:{write:{overridePolicy:function(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],c.prototype,"uniqueValueInfos",null);b([q.property({dependsOn:["field","field2","field3","valueExpression"],readOnly:!0})],c.prototype,"requiredFields",void 0);b([d(1,q.cast(x.ensureType))],c.prototype,"addUniqueValueInfo",null);
return c=p=b([q.subclass("esri.renderers.UniqueValueRenderer")],c)}(q.declared(C))})},"esri/core/arrayUtils":function(){define(["require","exports"],function(c,a){function f(a,b,c){for(var d=a.length,e=0;e<d;e++)if(b.call(c,a[e],e,a))return e;return-1}function b(a,b,c,d){void 0===c&&(c=a.length);d=d||p;for(var e=Math.max(0,d.last-10),f=-1,g=e;g<c;++g)if(a[g]===b){f=g;break}if(-1===f){for(g=0;g<e;++g)if(a[g]===b){f=g;break}if(-1===f)return}a[f]=a[c-1];a.pop();d.last=f;return b}function d(a,c,d,e){void 0===
d&&(d=a.length);var f=[];c.forEach(function(c){void 0!==b(a,c,d,e)&&(f.push(c),--d)});return f}function l(a,b){return-1===a.indexOf(b)}function k(a,b,c){return!a.some(b.bind(null,c))}function e(a){return a}Object.defineProperty(a,"__esModule",{value:!0});a.findIndex=f;a.find=function(a,b,c){for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return f}};a.unique=function(a){return a.filter(function(a,b,c){return c.indexOf(a)===b})};a.equals=function(a,b,c){if(!a&&!b)return!0;if(!a||!b||a.length!==
b.length)return!1;if(c)for(var d=0;d<a.length;d++){if(!c(a[d],b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};a.difference=function(a,b,c){var d;c?(d=b.filter(k.bind(null,a,c)),a=a.filter(k.bind(null,b,c))):(d=b.filter(l.bind(null,a)),a=a.filter(l.bind(null,b)));return{added:d,removed:a}};a.intersect=function(a,b,c){return a&&b?c?a.filter(function(a){return-1<f(b,function(b){return c(a,b)})}):a.filter(function(a){return-1<b.indexOf(a)}):[]};a.constant=function(a,b){for(var c=
Array(a),d=0;d<a;d++)c[d]=b;return c};a.range=function(a,b){void 0===b&&(b=a,a=0);for(var c=Array(b-a),d=a;d<b;d++)c[d-a]=d;return c};a.binaryIndexOf=function(a,b,c){for(var d=a.length,e=0,f=d-1;e<f;){var g=e+Math.floor((f-e)/2);b>a[g]?e=g+1:f=g}f=a[e];return c?b>=a[d-1]?-1:f===b?e:e-1:f===b?e:-1};var h=function(){return function(){this.last=0}}();a.RemoveHint=h;var p=new h;c=function(){return function(a){var c=this;this._array=a;this._hint=new h;this.remove=function(a){return b(c._array,a,c._array.length,
c._hint)};this.removeMany=function(a){return d(c._array,a,c._array.length,c._hint)}}}();a.UnorderedRemover=c;a.removeUnordered=b;a.removeUnorderedMany=d;a.keysOfMap=function(a){var b=[];a.forEach(function(a,c){return b.push(c)});return b};a.keysOfSet=function(a,b){void 0===b&&(b=e);var c=[];a.forEach(function(a){return c.push(b(a))});return c};a.fromMapValues=function(a){if(Array.from)return Array.from(a.values());var b=Array(a.size),c=0;a.forEach(function(a){b[c++]=a});return b}})},"esri/renderers/support/diffUtils":function(){define(["require",
"exports","../../core/Accessor","../../core/Collection","../../core/accessorSupport/utils"],function(c,a,f,b,d){function l(a){return a instanceof b?Object.keys(a.items):a instanceof f?d.getProperties(a).keys():a?Object.keys(a):[]}function k(a,c){return a instanceof b?a.items[c]:a[c]}function e(a,b){return Array.isArray(a)&&Array.isArray(b)?a.length!==b.length:!1}function h(a){return a?a.declaredClass:null}function p(a,b){var c=a.diff;if(c&&"function"===typeof c)return c(a,b);var d=l(a),q=l(b);if(0!==
d.length||0!==q.length){if(!d.length||!q.length||e(a,b))return{type:"complete",oldValue:a,newValue:b};var v=q.filter(function(a){return-1===d.indexOf(a)}),A=d.filter(function(a){return-1===q.indexOf(a)}),v=d.filter(function(c){return-1<q.indexOf(c)&&k(a,c)!==k(b,c)}).concat(v,A).sort();if((A=h(a))&&-1<g.indexOf(A)&&v.length)return{type:"complete",oldValue:a,newValue:b};var u,A=a instanceof f&&b instanceof f,n;for(n in v){var t=v[n],x=k(a,t),D=k(b,t),G=void 0;(A||"function"!==typeof x&&"function"!==
typeof D)&&x!==D&&(null!=x||null!=D)&&(G=c&&c[t]&&"function"===typeof c[t]?c[t](x,D):"object"===typeof x&&"object"===typeof D&&h(x)===h(D)?p(x,D):{type:"complete",oldValue:x,newValue:D})&&(u=u||{type:"partial",diff:{}},u.diff[t]=G)}return u}}Object.defineProperty(a,"__esModule",{value:!0});var g=["esri.Color","esri.portal.Portal"];a.diff=function(a,b){if("function"!==typeof a&&"function"!==typeof b&&(a||b))return!a||!b||"object"===typeof a&&"object"===typeof b&&h(a)!==h(b)?{type:"complete",oldValue:a,
newValue:b}:p(a,b)}})},"esri/renderers/support/UniqueValueInfo":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/JSONSupport ../../core/accessorSupport/decorators ../../symbols/support/jsonUtils ../../symbols/support/typeUtils".split(" "),function(c,a,f,b,d,l,k,e){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.description=null;b.label=null;b.symbol=
null;b.value=null;return b}f(c,a);d=c;c.prototype.clone=function(){return new d({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})};var d;b([l.property({type:String,json:{write:!0}})],c.prototype,"description",void 0);b([l.property({type:String,json:{write:!0}})],c.prototype,"label",void 0);b([l.property({types:e.rendererTypes,json:{origins:{"web-scene":{read:k.read,write:{target:{symbol:{types:e.rendererTypes3D}},writer:k.writeTarget}}},
read:k.read,write:k.writeTarget}})],c.prototype,"symbol",void 0);b([l.property({type:String,json:{write:!0}})],c.prototype,"value",void 0);return c=d=b([l.subclass("esri.renderers.support.UniqueValueInfo")],c)}(l.declared(d));a.UniqueValueInfo=c;a.default=c})},"esri/symbols/support/styleUtils":function(){define("require exports ../../request ../../symbols ../../core/Error ../../core/promiseUtils ../../core/urlUtils ../../portal/Portal ../../portal/PortalQueryParams ./jsonUtils ./StyleOrigin ./Thumbnail".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q){function v(a,b){return A(a).then(function(b){return{data:b.data,baseUrl:k.removeFile(a),styleUrl:a}})}function y(a,b){b=b.portal||e.getDefault();var c,d=b.url+" - "+(b.user&&b.user.username)+" - "+a;u[d]||(u[d]=C(a,b).then(function(a){c=a;return a.fetchData()}).then(function(b){return{data:b,baseUrl:c.itemUrl,styleName:a}}));return u[d]}function C(a,b){return b.load().then(function(){var c=new h({disableExtraQuery:!0,query:"owner:"+n+" AND type:"+t+' AND typekeywords:"'+
a+'"'});return b.queryItems(c)}).then(function(b){b=b.results;var c=null,e=a.toLowerCase();if(b&&Array.isArray(b))for(var f=0;f<b.length;f++){var g=b[f];if(g.typeKeywords.some(function(a){return a.toLowerCase()===e})&&g.type===t&&g.owner===n){c=g;break}}if(c)return c.load();throw new d("symbolstyleutils:style-not-found","The style '"+a+"' could not be found",{styleName:a});})}function B(a,b){return a.styleUrl?v(a.styleUrl,b):a.styleName?y(a.styleName,b):l.reject(new d("symbolstyleutils:style-url-and-name-missing",
"Either styleUrl or styleName is required to resolve a style"))}function r(a,c,e){for(var f=a.data,h={portal:e.portal,url:k.urlToObject(a.baseUrl),origin:"portal-item"},n=function(d){if(d.name!==c)return"continue";var f=k.read(d.webRef,h),l={portal:e.portal,url:k.urlToObject(k.removeFile(f)),origin:"portal-item"};return{value:A(f).then(function(f){if((f=p.fromJSON(f.data,l))&&f.isInstanceOf(b.BaseSymbol3D)){if(d.thumbnail)if(d.thumbnail.href){var n=k.read(d.thumbnail.href,h);f.thumbnail=new q.default({url:n})}else d.thumbnail.imageData&&
(f.thumbnail=new q.default({url:"data:image/png;base64,"+d.thumbnail.imageData}));a.styleUrl?f.styleOrigin=new g({portal:e.portal,styleUrl:a.styleUrl,name:c}):a.styleName&&(f.styleOrigin=new g({portal:e.portal,styleName:a.styleName,name:c}))}return f})}},t=0,f=f.items;t<f.length;t++){var x=n(f[t]);if("object"===typeof x)return x.value}return l.reject(new d("symbolstyleutils:symbol-name-not-found","The symbol name '"+c+"' could not be found",{symbolName:c}))}function A(a){return f(k.normalize(a),{responseType:"json",
query:{f:"json"}})}Object.defineProperty(a,"__esModule",{value:!0});var u={};a.fetchStyle=B;a.resolveWebStyleSymbol=function(a,b){return a.name?B(a,b).then(function(c){return r(c,a.name,b)}):l.reject(new d("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))};a.fetchSymbolFromStyle=r;a.styleNameFromItem=function(a){var b=0;for(a=a.typeKeywords;b<a.length;b++){var c=a[b];if(/^Esri.*Style$/.test(c)&&"Esri Style"!==c)return c}};var n="esri_en",t="Style"})},
"esri/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.EXTRUDE_SCALE=64;a.PICTURE_FILL_COLOR=4294967295;a.TILE_SIZE=512;a.ANGLE_FACTOR_256=256/360;a.COLLISION_BUCKET_SIZE=128;a.COLLISION_MAX_ZOOM_DELTA=4;a.COLLISION_EARLY_REJECT_BUCKET_SIZE=32})},"esri/views/2d/engine/webgl/rendererInfoUtils":function(){define("require exports ../../../../core/tsSupport/assignHelper ../../../../Graphic ../../../../arcade/Feature ../../../../support/arcadeUtils ./enums ./visualVariablesUtils".split(" "),
function(c,a,f,b,d,l,k,e){function h(a,c,d){if(!a)return null;var e=0,g={};a=a.clone();var h=a.visualVariables,k=null;if("simple"!==a.type){var q=a.valueExpression;if(!a.field&&q){var u="$$fake"+e++,n=l.createFunction(q);g[u]=function(a,b){p.repurposeFromGraphicLikeObject(a.geometry,a.attributes,d);return l.executeFunction(n,{vars:{$feature:p,$view:l.getViewInfo(b)},spatialReference:c})};a.field=u;a.valueExpression=null;k=function(a,c){c.attributes[u]=g[u](c);return a.valueExpression?a.getSymbol(b.fromJSON(c)):
a.getSymbol(c)}}}h&&(a.visualVariables=h.map(function(a){if(a.normalizationField){var b=a.field,h=a.normalizationField,k="$$fake"+e++;g[k]=function(a,c){return a.attributes[b]/a.attributes[h]};a=f({},a);a.field=k;delete a.normalizationField;return a}if(a.valueExpression&&"$view.scale"!==a.valueExpression){var n=a.valueExpression,k="$$fake"+e++,q=l.createFunction(n);g[k]=function(a,b){p.repurposeFromGraphicLikeObject(a.geometry,a.attributes,d);return l.executeFunction(q,{vars:{$feature:p,$view:l.getViewInfo(b)},
spatialReference:c})};a=f({},a);a.field=k;delete a.valueExpression}return a}));return{renderer:a,normalizingFunctions:g,getSymbolFunction:k}}Object.defineProperty(a,"__esModule",{value:!0});var p=new d;a.createRendererInfo=function(a,b,c){var d=(b=h(a,b,c)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.normalizingFunctions),f=b&&b.getSymbolFunction;a=b&&b.renderer||a;b=e.convertVisualVariables(a.visualVariables);return{renderer:a,vvFields:b.vvFields,vvRanges:b.vvRanges,getValue:function(a,
b){var c=d[b];return c?c(a):a.attributes[b]},getSymbol:function(a){return f?f(this.renderer,a):this.renderer.getSymbol?this.renderer.getSymbol.call(this.renderer,a):null}}};a.getNormalizedRenderer=function(a,b,c){return(b=h(a,b,c)||{renderer:null,normalizingFunctions:null,getSymbolFunction:null},b.renderer)||a};a.getSymbol=function(a,b){return a.getSymbol(b)};a.isRendererWebGLCompatible=function(a){if(!a||-1===["simple","class-breaks","unique-value","heatmap"].indexOf(a.type))return!1;if(a.visualVariables){var b=
0;for(a=a.visualVariables;b<a.length;b++){var c=a[b];switch(c.type){case "color":case "opacity":if(c.stops&&8<c.stops.length)return!1;break;case "size":if(e.getTypeOfSizeVisualVariable(c)===k.WGLVVFlag.SIZE_FIELD_STOPS&&c.stops&&6<c.stops.length)return!1}}}return!0}})},"esri/Graphic":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./geometry ./PopupTemplate ./core/JSONSupport ./core/lang ./core/accessorSupport/decorators ./geometry/support/typeUtils ./symbols/support/jsonUtils ./symbols/support/typeUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v){c=function(a){function c(b,c,d,f){b=a.call(this,b,c,d,f)||this;b.layer=null;b.popupTemplate=null;b.sourceLayer=null;Object.defineProperty(b,"uid",{value:e.generateUID()});return b}b(c,a);e=c;c.prototype.normalizeCtorArgs=function(a,b,c,d){return a&&!a.declaredClass?a:{geometry:a,symbol:b,attributes:c,popupTemplate:d}};Object.defineProperty(c.prototype,"attributes",{set:function(a){var b=this._get("attributes");b!==a&&(this._set("attributes",a),this._notifyLayer("attributes",
b,a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"geometry",{set:function(a){var b=this._get("geometry");b!==a&&(this._set("geometry",a),this._notifyLayer("geometry",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"symbol",{set:function(a){var b=this._get("symbol");b!==a&&(this._set("symbol",a),this._notifyLayer("symbol",b,a))},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"visible",{set:function(a){var b=this._get("visible");b!==
a&&(this._set("visible",a),this._notifyLayer("visible",b,a))},enumerable:!0,configurable:!0});c.prototype.getEffectivePopupTemplate=function(){return this.popupTemplate||this.sourceLayer&&this.sourceLayer.popupTemplate};c.prototype.getAttribute=function(a){return this.attributes&&this.attributes[a]};c.prototype.setAttribute=function(a,b){var c;this.attributes?(c=this.getAttribute(a),this.attributes[a]=b,this._notifyLayer("attributes",c,b,a)):(this.attributes=(c={},c[a]=b,c),this._notifyLayer("attributes",
void 0,b,a))};c.prototype.toJSON=function(){return{geometry:this.geometry&&this.geometry.toJSON(),symbol:this.symbol&&this.symbol.toJSON(),attributes:f({},this.attributes),popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}};c.prototype.clone=function(){return new e({attributes:h.clone(this.attributes),geometry:this.geometry&&this.geometry.clone()||null,layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:this.symbol&&this.symbol.clone()||
null,visible:this.visible})};c.prototype._notifyLayer=function(a,b,c,d){this.layer&&(b={graphic:this,property:a,oldValue:b,newValue:c},"attributes"===a&&(b.attributeName=d),this.layer.graphicChanged(b))};var e;d([p.property({value:null})],c.prototype,"attributes",null);d([p.property({value:null,types:g.types,json:{read:l.fromJSON}})],c.prototype,"geometry",null);d([p.property()],c.prototype,"layer",void 0);d([p.property({type:k})],c.prototype,"popupTemplate",void 0);d([p.property()],c.prototype,"sourceLayer",
void 0);d([p.property({value:null,types:v.types,json:{read:q.read}})],c.prototype,"symbol",null);d([p.property({type:Boolean,value:!0,set:function(a){}})],c.prototype,"visible",null);return c=e=d([p.subclass("esri.Graphic")],c)}(p.declared(e));var y=0;(function(a){a.generateUID=function(){return y++}})(c||(c={}));return c})},"esri/PopupTemplate":function(){define("require exports ./core/tsSupport/assignHelper ./core/tsSupport/declareExtendsHelper ./core/tsSupport/decorateHelper ./core/Collection ./core/date ./core/JSONSupport ./core/kebabDictionary ./core/lang ./core/accessorSupport/decorators ./support/arcadeUtils ./support/actions/ActionBase ./support/actions/ActionButton ./support/actions/ActionToggle".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C){var B=l.ofType({key:"type",defaultKeyValue:"button",base:v,typeMap:{button:y,toggle:C}}),r=h({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),A=h({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});return function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.actions=null;b.content="";b.expressionInfos=null;b.fieldInfos=null;b.layerOptions=null;b.outFields=null;b.overwriteActions=!1;
b.title="";b.relatedRecordsInfo=null;return b}b(c,a);e=c;c.prototype.readContent=function(a,b){var c=this,d=b.description,e=b.mediaInfos;a=b.showAttachments;if((b=b.popupElements)&&b.length)return b.map(function(a){"text"!==a.type||a.text?"media"===a.type&&(a.mediaInfos||e)&&(a.mediaInfos||(a.mediaInfos=e),a.mediaInfos=c._readMediaInfos(a.mediaInfos)):a.text=d;return a});b=[];d?b.push({type:"text",text:d}):b.push({type:"fields"});e&&e.length&&b.push({type:"media",mediaInfos:this._readMediaInfos(e)});
a&&b.push({type:"attachments",displayType:"list"});return b.length?b:d};c.prototype.writeContent=function(a,b){var c=this;b.showAttachments=!1;"string"===typeof a?b.description=a:Array.isArray(a)&&(b.popupElements=p.clone(a),b.popupElements.forEach(function(a){"attachments"!==a.type||b.showAttachments?"media"!==a.type||b.mediaInfos?"text"!==a.type||b.description?"fields"!==a.type||b.fieldInfos||(a.fieldInfos&&(b.fieldInfos=c._writeFieldInfos(p.clone(a.fieldInfos))),delete a.fieldInfos):(a.text&&(b.description=
a.text),delete a.text):(a.mediaInfos&&(b.mediaInfos=p.clone(a.mediaInfos),b.mediaInfos.forEach(function(a){a.type=A.toJSON(a.type)})),delete a.mediaInfos):b.showAttachments=!0;return a}))};c.prototype.writeExpressionInfos=function(a,b){b.expressionInfos=a||null};c.prototype.readFieldInfos=function(a){if(a)return a.forEach(function(a){var b=a.format&&a.format.dateFormat,c=a.stringFieldOption;b&&(a.format.dateFormat=k.fromJSON(b));c&&(a.stringFieldOption=r.fromJSON(c))}),a};c.prototype.writeFieldInfos=
function(a,b){b.fieldInfos=a?this._writeFieldInfos(p.clone(a)):a};c.prototype.writeLayerOptions=function(a,b){b.layerOptions=a||null};c.prototype.writeTitle=function(a,b){b.title=a||""};c.prototype.writeRelatedRecordsInfo=function(a,b){b.relatedRecordsInfo=a||null};Object.defineProperty(c.prototype,"requiredFields",{get:function(){return this.collectRequiredFields()},enumerable:!0,configurable:!0});c.prototype.clone=function(){var a=this.actions,a=a?p.clone(a.toArray()):[];return new e({actions:a,
content:Array.isArray(this.content)?p.clone(this.content):this.content,fieldInfos:this.fieldInfos?p.clone(this.fieldInfos):null,layerOptions:this.layerOptions?p.clone(this.layerOptions):null,overwriteActions:this.overwriteActions,relatedRecordsInfo:this.relatedRecordsInfo?p.clone(this.relatedRecordsInfo):null,title:this.title})};c.prototype.collectRequiredFields=function(){var a=(this.outFields||[]).concat(this._getActionsFields(this.actions),this._getTitleFields(this.title),this._getContentFields(this.content),
this._getExpressionInfoFields(this.expressionInfos));return-1!==a.indexOf("*")?["*"]:a.filter(function(a,b,c){return a&&b===c.indexOf(a)})};c.prototype._getContentElementFields=function(a){var b=this;if(!a||"attachments"===a.type)return[];if("fields"===a.type)return this._getFieldInfoFields(a.fieldInfos||this.fieldInfos);if("media"===a.type)return(a.mediaInfos||[]).reduce(function(a,c){return a.concat(b._getMediaInfoFields(c))},[]);if("text"===a.type)return this._extractFieldNames(a.text)};c.prototype._getMediaInfoFields=
function(a){var b=a.caption,c=a.value||{},d=c.fields,e=void 0===d?[]:d,d=c.normalizeField,f=c.tooltipField,g=c.sourceURL,c=c.linkURL;a=this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(g),this._extractFieldNames(c),e);d&&a.push(d);f&&a.push(f);return a};c.prototype._getContentFields=function(a){var b=this;return"string"===typeof a?this._extractFieldNames(a):Array.isArray(a)?a.reduce(function(a,c){return a.concat(b._getContentElementFields(c))},[]):[]};c.prototype._getExpressionInfoFields=
function(a){return a?a.reduce(function(a,b){return a.concat(q.extractFieldNames(b.expression))},[]):[]};c.prototype._getFieldInfoFields=function(a){return a?a.filter(function(a){return"undefined"===typeof a.visible?!0:!!a.visible}).map(function(a){return a.fieldName}).filter(function(a){return-1===a.indexOf("relationships/")&&-1===a.indexOf("expression/")}):[]};c.prototype._getActionsFields=function(a){var b=this;return a?a.toArray().reduce(function(a,c){return a.concat(b._getActionFields(c))},[]):
[]};c.prototype._getActionFields=function(a){var b=a.className,c=a.type,c="button"===c||"toggle"===c?a.image:"";return this._extractFieldNames(a.title).concat(this._extractFieldNames(b),this._extractFieldNames(c))};c.prototype._getTitleFields=function(a){return"string"===typeof a?this._extractFieldNames(a):[]};c.prototype._readMediaInfos=function(a){a.forEach(function(a){a.type=A.fromJSON(a.type)});return a};c.prototype._writeFieldInfos=function(a){a.forEach(function(a){var b=a.format&&a.format.dateFormat,
c=a.stringFieldOption;b&&(a.format.dateFormat=k.toJSON(b));c&&(a.stringFieldOption=r.toJSON(c));a.format||delete a.format});return a};c.prototype._extractFieldNames=function(a){if(!a||"string"!==typeof a)return[];a=a.match(/{[^}]*}/g);if(!a)return[];var b=/\{(\w+):.+\}/;return(a=a.filter(function(a){return!(0===a.indexOf("{relationships/")||0===a.indexOf("{expression/"))}).map(function(a){return a.replace(b,"{$1}")}))?a.map(function(a){return a.slice(1,-1)}):[]};var e;d([g.property({type:B})],c.prototype,
"actions",void 0);d([g.property()],c.prototype,"content",void 0);d([g.reader("content",["description","popupElements","mediaInfos","showAttachments"])],c.prototype,"readContent",null);d([g.writer("content")],c.prototype,"writeContent",null);d([g.property()],c.prototype,"expressionInfos",void 0);d([g.writer("expressionInfos")],c.prototype,"writeExpressionInfos",null);d([g.property()],c.prototype,"fieldInfos",void 0);d([g.reader("fieldInfos")],c.prototype,"readFieldInfos",null);d([g.writer("fieldInfos")],
c.prototype,"writeFieldInfos",null);d([g.property()],c.prototype,"layerOptions",void 0);d([g.writer("layerOptions")],c.prototype,"writeLayerOptions",null);d([g.property()],c.prototype,"outFields",void 0);d([g.property()],c.prototype,"overwriteActions",void 0);d([g.property({json:{type:String}})],c.prototype,"title",void 0);d([g.writer("title")],c.prototype,"writeTitle",null);d([g.property()],c.prototype,"relatedRecordsInfo",void 0);d([g.writer("relatedRecordsInfo")],c.prototype,"writeRelatedRecordsInfo",
null);d([g.property({dependsOn:"actions title content fieldInfos expressionInfos outFields".split(" "),readOnly:!0})],c.prototype,"requiredFields",null);return c=e=d([g.subclass("esri.PopupTemplate")],c)}(g.declared(e))})},"esri/support/actions/ActionBase":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/Accessor ../../core/Identifiable ../../core/accessorSupport/decorators".split(" "),function(c,a,f,b,d,l,k){return function(a){function c(b){b=
a.call(this)||this;b.active=!1;b.className=null;b.disabled=!1;b.id=null;b.indicator=!1;b.title=null;b.type=null;b.visible=!0;return b}f(c,a);d=c;c.prototype.clone=function(){return new d({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})};var d;b([k.property()],c.prototype,"active",void 0);b([k.property()],c.prototype,"className",void 0);b([k.property()],c.prototype,"disabled",void 0);b([k.property()],c.prototype,
"id",void 0);b([k.property()],c.prototype,"title",void 0);b([k.property()],c.prototype,"type",void 0);b([k.property()],c.prototype,"visible",void 0);return c=d=b([k.subclass("esri.support.actions.ActionBase")],c)}(k.declared(d,l))})},"esri/support/actions/ActionButton":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),function(c,a,f,b,d,l){return function(a){function c(b){b=
a.call(this)||this;b.image=null;b.type="button";return b}f(c,a);h=c;c.prototype.clone=function(){return new h({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})};var h;b([d.property()],c.prototype,"image",void 0);return c=h=b([d.subclass("esri.support.Action.ActionButton")],c)}(d.declared(l))})},"esri/support/actions/ActionToggle":function(){define("require exports ../../core/tsSupport/declareExtendsHelper ../../core/tsSupport/decorateHelper ../../core/accessorSupport/decorators ./ActionBase".split(" "),
function(c,a,f,b,d,l){return function(a){function c(b){b=a.call(this)||this;b.image=null;b.type="toggle";b.value=!1;return b}f(c,a);h=c;c.prototype.clone=function(){return new h({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})};var h;b([d.property()],c.prototype,"image",void 0);b([d.property()],c.prototype,"value",void 0);return c=h=b([d.subclass("esri.support.Action.ActionToggle")],
c)}(d.declared(l))})},"esri/views/2d/engine/webgl/enums":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL";a[a.NONE=5]="NONE";a[a.UNKNOWN=6]="UNKNOWN";a[a.COUNT=7]="COUNT"})(a.WGLGeometryType||(a.WGLGeometryType={}));(function(a){a[a.SUCCEEDED=0]="SUCCEEDED";a[a.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"})(a.WGLGeometryTransactionStatus||
(a.WGLGeometryTransactionStatus={}));(function(a){a[a.NONE=0]="NONE";a[a.FILL=1]="FILL";a[a.LINE=2]="LINE";a[a.MARKER=4]="MARKER";a[a.TEXT=8]="TEXT";a[a.LABEL=16]="LABEL";a[a.LABEL_ALPHA=32]="LABEL_ALPHA";a[a.HITTEST=64]="HITTEST";a[a.HIGHLIGHT=128]="HIGHLIGHT";a[a.CLIP=256]="CLIP";a[a.DEBUG=512]="DEBUG";a[a.NUM_DRAW_PHASES=12]="NUM_DRAW_PHASES"})(a.WGLDrawPhase||(a.WGLDrawPhase={}));(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(a.VVType||
(a.VVType={}));(function(a){a[a.NONE=0]="NONE";a[a.OPACITY=1]="OPACITY";a[a.COLOR=2]="COLOR";a[a.ROTATION=4]="ROTATION";a[a.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE";a[a.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS";a[a.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS";a[a.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"})(a.WGLVVFlag||(a.WGLVVFlag={}));(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";
a[a.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"})(a.WGLVVTarget||(a.WGLVVTarget={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.BUTT=1]="BUTT";a[a.ROUND=2]="ROUND";a[a.SQUARE=3]="SQUARE"})(a.CapType||(a.CapType={}));(function(a){a[a.UNKNOWN=0]="UNKNOWN";a[a.MITER=1]="MITER";a[a.BEVEL=2]="BEVEL";a[a.ROUND=3]="ROUND"})(a.JoinType||(a.JoinType={}));(function(a){a.SIMPLE_MARKER="esriSMS";a.SIMPLE_LINE="esriSLS";a.SIMPLE_FILL="esriSFS";a.PICTURE_MARKER="esriPMS";a.PICTURE_FILL="esriPFS";a.TEXT="esriTS"})(a.EsriSymbolType||
(a.EsriSymbolType={}));(function(a){a.SIMPLE_MARKER="simple-marker";a.SIMPLE_LINE="simple-line";a.SIMPLE_FILL="simple-fill";a.PICTURE_MARKER="picture-marker";a.PICTURE_FILL="picture-fill";a.TEXT="text"})(a.EsriSymbolTypeKebab||(a.EsriSymbolTypeKebab={}))})},"esri/views/2d/engine/webgl/visualVariablesUtils":function(){define("require exports ../../../../core/screenUtils ./color ./enums ./Utils ../../../3d/layers/support/FastSymbolUpdates".split(" "),function(c,a,f,b,d,l,k){function e(a){return l.isNumber(a.minDataValue)&&
l.isNumber(a.maxDataValue)&&null!=a.minSize&&null!=a.maxSize?d.WGLVVFlag.SIZE_MINMAX_VALUE:(a.expression&&"view.scale"===a.expression||a.valueExpression&&"$view.scale"===a.valueExpression)&&Array.isArray(a.stops)?d.WGLVVFlag.SIZE_SCALE_STOPS:(null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==a.valueExpression)&&Array.isArray(a.stops)?d.WGLVVFlag.SIZE_FIELD_STOPS:(null!=a.field||a.expression&&"view.scale"!==a.expression||a.valueExpression&&"$view.scale"!==
a.valueExpression)&&null!=a.valueUnit?d.WGLVVFlag.SIZE_UNIT_VALUE:d.WGLVVFlag.NONE}function h(a){return{value:a.value,size:f.toPt(a.size)}}function p(a){return a.map(function(a){return h(a)})}function g(a){return"string"===typeof a||"number"===typeof a?f.toPt(a):{type:"size",expression:a.expression,stops:p(a.stops)}}function q(a){var b={values:[0,0,0,0,0,0,0,0],opacities:[0,0,0,0,0,0,0,0]};if(l.isString(a.field))if(a.stops){if(8<a.stops.length)return null;a=a.stops;for(var c=0;8>c;++c){var d=a[Math.min(c,
a.length-1)];b.values[c]=d.value;b.opacities[c]=d.opacity}}else if(a.opacityValues){if(!l.isDefined(a.minDataValue)||!l.isDefined(a.maxDataValue)||2!==a.opacityValues.length)return null;b.values[0]=a.minDataValue;b.opacities[0]=a.opacityValues[0];b.values[1]=a.maxDataValue;b.opacities[1]=a.opacityValues[1];for(c=2;8>c;++c)b.values[c]=a.maxDataValue,b.opacities[c]=a.opacityValues[1]}else return null;else if(a.stops&&0<=a.stops.length||a.opacityValues&&0<=a.opacityValues.length)for(a=a.stops&&0<=a.stops.length?
a.stops[0].opacity:a.opacityValues[0],c=0;8>c;c++)b.values[c]=Infinity,b.opacities[c]=a;else return null;return b}Object.defineProperty(a,"__esModule",{value:!0});a.getTypeOfSizeVisualVariable=e;a.getVisualVariableSizeValueRepresentationRatio=function(a,b){if(!a||!b)return a;switch(b){case "radius":case "distance":return 2*a;case "area":return Math.sqrt(a)}return a};a.stopToSizeStop=h;a.normalizeSizeStops=p;a.normalizeSizeElement=g;a.getVisualVariablesFields=function(a){var b=a&&0<a.length?{}:null;
b&&a.forEach(function(a){var c=a.type;a.field&&(b[c]=a.field)});return b};a.convertVisualVariables=function(a){var c=a&&0<a.length?{}:null,h=c?{}:null;if(!c)return{vvFields:c,vvRanges:h};for(var l=0;l<a.length;l++){var r=a[l],v=r.type;r.field&&(c[v]=r.field);if("size"===v){h.size||(h.size={});var u=r;switch(e(u)){case d.WGLVVFlag.SIZE_MINMAX_VALUE:h.size.minMaxValue={minDataValue:u.minDataValue,maxDataValue:u.maxDataValue,minSize:g(u.minSize),maxSize:g(u.maxSize)};break;case d.WGLVVFlag.SIZE_SCALE_STOPS:h.size.scaleStops=
{stops:p(u.stops)};break;case d.WGLVVFlag.SIZE_FIELD_STOPS:for(var r=[],v=[],u=p(u.stops),n=u.length,t=0;6>t;t++){var x=u[Math.min(t,n-1)];r.push(x.value);v.push(f.pt2px(x.size))}h.size.fieldStops={values:r,sizes:v};break;case d.WGLVVFlag.SIZE_UNIT_VALUE:h.size.unitValue={unit:u.valueUnit,valueRepresentation:u.valueRepresentation}}}else if("color"===v)for(r=k.convertVisualVariables([r],{modelSize:null,symbolSize:null,unitInMeters:1,transformation:null}),h.color=r.color,t=0;32>t;t+=4)b.premultiplyAlpha(h.color.colors,
t,!0);else"opacity"===v?h.opacity=q(r):"rotation"===v&&(h.rotation={type:r.rotationType})}return{vvFields:c,vvRanges:h}}})},"esri/views/2d/engine/webgl/color":function(){define(["require","exports","./number"],function(c,a,f){function b(a,b){Array.isArray(b)?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):(a[0]=b.r,a[1]=b.g,a[2]=b.b,a[3]=b.a);return a}function d(a,b,c){void 0===b&&(b=0);void 0===c&&(c=!1);var d=a[b+3];a[b+0]*=d;a[b+1]*=d;a[b+2]*=d;c||(a[b+3]*=255);return a}Object.defineProperty(a,"__esModule",
{value:!0});a.white=[255,255,255,1];var l=[0,0,0,0];a.premultiplyAlpha=d;a.copyAndPremultiply=function(a){return d(b([],a))};a.premultiplyAlphaUint32=function(a){d(b(l,a));return f.i8888to32(l[0],l[1],l[2],l[3])};a.premultiplyAlphaRGBA=function(a){var b=a.a;return f.i8888to32(a.r*b,a.g*b,a.b*b,255*b)}})},"esri/views/2d/engine/webgl/number":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});var f=new Float32Array(1),b=new Uint32Array(f.buffer);a.nextHighestPowerOfTwo=
function(a){a--;a|=a>>1;a|=a>>2;a|=a>>4;a|=a>>8;a|=a>>16;a++;return a};a.toUint32=function(a){f[0]=a;return b[0]};a.i1616to32=function(a,b){return 65535&a|b<<16};a.i8888to32=function(a,b,c,e){return a&255|(b&255)<<8|(c&255)<<16|e<<24};a.i8816to32=function(a,b,c){return a&255|(b&255)<<8|c<<16};a.numTo32=function(a){return a|0}})},"esri/views/2d/engine/webgl/Utils":function(){define("require exports ../../../../arcade/Dictionary ../../../../arcade/Feature ../../../../core/Error ../../../../core/Logger ../../../../core/screenUtils ../../../../support/arcadeUtils ./color ./enums ./SymbolProperties".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g){function q(a){for(var b={},c=0;c<a.length;c++){var d=a[c];b[d.name]=d.strideInBytes}return b}function v(a){switch(a){case p.WGLGeometryType.MARKER:return G;case p.WGLGeometryType.FILL:return F;case p.WGLGeometryType.LINE:return J;case p.WGLGeometryType.TEXT:return E;case p.WGLGeometryType.LABEL:return N}return null}function y(a){switch(a%4){case 0:case 2:return 4;case 1:case 3:return 1}}function C(a){switch(a){case "esriSMS":return"simple-marker";case "esriPMS":return"picture-marker";
case "esriSLS":return"simple-line";case "esriPLS":return"picture-line";case "esriSFS":return"simple-fill";case "esriPFS":return"picture-fill";case "esriTS":return"text"}return a}function B(a){if(a=C(a.type)){switch(a){case "simple-marker":case "picture-marker":return!0;case "CIMPointSymbol":return!0}return!1}}function r(a){if(a=C(a.type)){switch(a){case "simple-fill":case "picture-fill":return!0;case "CIMPolygonSymbol":return!0}return!1}}function A(a){if(a=C(a.type)){switch(a){case "simple-line":case "picture-line":return!0;
case "CIMLineSymbol":return!0}return!1}}function u(a){if(a=C(a.type)){switch(a){case "text":return!0;case "CIMTextSymbol":return!0}return!1}}function n(a){return a&&a.length||0}function t(a){return"string"===typeof a}Object.defineProperty(a,"__esModule",{value:!0});var x,D=l.getLogger("esri.views.2d.engine.webgl.Utils");a.C_HITTEST_SEARCH_SIZE=4;a.C_VBO_GEOMETRY="geometry";a.C_VBO_PERINSTANCE="per_instance";a.C_VBO_PERINSTANCE_VV="per_instance_vv";a.C_VBO_VISIBILITY="visibility";a.C_VBO_VISIBILITY_RANGE=
"visibilityRange";a.C_ICON_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_ICON_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:40,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_ICON_HEATMAP=[{name:a.C_VBO_GEOMETRY,strideInBytes:28,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_FILL_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:24,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,
divisor:0}];a.C_FILL_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:32,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_LINE_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:32,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_LINE_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:44,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_TEXT_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,
divisor:0}];a.C_TEXT_VERTEX_DEF_VV=[{name:a.C_VBO_GEOMETRY,strideInBytes:36,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0}];a.C_LABEL_VERTEX_DEF=[{name:a.C_VBO_GEOMETRY,strideInBytes:20,divisor:0},{name:a.C_VBO_VISIBILITY,strideInBytes:1,divisor:0},{name:a.C_VBO_VISIBILITY_RANGE,strideInBytes:2,divisor:0}];a.C_ICON_STRIDE_SPEC=q(a.C_ICON_VERTEX_DEF);a.C_ICON_STRIDE_SPEC_VV=q(a.C_ICON_VERTEX_DEF_VV);a.C_ICON_STRIDE_SPEC_HEATMAP=q(a.C_ICON_HEATMAP);a.C_FILL_STRIDE_SPEC=q(a.C_FILL_VERTEX_DEF);
a.C_FILL_STRIDE_SPEC_VV=q(a.C_FILL_VERTEX_DEF_VV);a.C_LINE_STRIDE_SPEC=q(a.C_LINE_VERTEX_DEF);a.C_LINE_STRIDE_SPEC_VV=q(a.C_LINE_VERTEX_DEF_VV);a.C_TEXT_STRIDE_SPEC=q(a.C_TEXT_VERTEX_DEF);a.C_TEXT_STRIDE_SPEC_VV=q(a.C_TEXT_VERTEX_DEF_VV);a.C_LABEL_STRIDE_SPEC=q(a.C_LABEL_VERTEX_DEF);a.getStrides=function(b,c,d){void 0===d&&(d=!1);switch(b){case p.WGLGeometryType.MARKER:return c?a.C_ICON_STRIDE_SPEC_VV:d?a.C_ICON_STRIDE_SPEC_HEATMAP:a.C_ICON_STRIDE_SPEC;case p.WGLGeometryType.FILL:return c?a.C_FILL_STRIDE_SPEC_VV:
a.C_FILL_STRIDE_SPEC;case p.WGLGeometryType.LINE:return c?a.C_LINE_STRIDE_SPEC_VV:a.C_LINE_STRIDE_SPEC;case p.WGLGeometryType.TEXT:return c?a.C_TEXT_STRIDE_SPEC_VV:a.C_TEXT_STRIDE_SPEC;case p.WGLGeometryType.LABEL:return a.C_LABEL_STRIDE_SPEC}return null};var G=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],F=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],J=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],E=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY],N=[a.C_VBO_GEOMETRY,a.C_VBO_VISIBILITY,a.C_VBO_VISIBILITY_RANGE];a.getNamedBuffers=
v;a.strideToPackingFactor=y;a.allocateTypedArrayBuffer=function(a,b){switch(b%4){case 0:case 2:return new Uint32Array(Math.floor(a*b/4));case 1:case 3:return new Uint8Array(a*b)}};a.allocateTypedArrayBufferwithData=function(a,b){switch(b%4){case 0:case 2:return new Uint32Array(a);case 1:case 3:return new Uint8Array(a)}};a.getSymbolGeometryType=function(a){return B(a)?p.WGLGeometryType.MARKER:A(a)?p.WGLGeometryType.LINE:r(a)?p.WGLGeometryType.FILL:u(a)?p.WGLGeometryType.TEXT:p.WGLGeometryType.UNKNOWN};
a.normalizeSymbolType=C;a.isMarkerSymbol=B;a.isFillSymbol=r;a.isLineSymbol=A;a.isPictureSymbol=function(a){if(a=C(a.type))switch(a){case "picture-marker":case "picture-line":case "picture-fill":return!0}return!1};a.isTextSymbol=u;a.getTextProperties=function(a){return g.TextProperties.pool.acquire(a.color?h.copyAndPremultiply(a.color):[255,255,255,255],a.haloColor?h.copyAndPremultiply(a.haloColor):[255,255,255,255],k.pt2px(a.haloSize),k.pt2px(a.font.size),a.angle*Math.PI/180,a.xoffset/a.font.size,
a.yoffset/a.font.size,"left"===a.horizontalAlignment?0:"right"===a.horizontalAlignment?1:.5,"top"===a.verticalAlignment?0:"bottom"===a.verticalAlignment?1:.5)};a.isSameUniformValue=function(a,b){return!1};a.isSameMaterialInfo=function(a,b){if(a.materialKey!==b.materialKey||n(a.texBindingInfo)!==n(b.texBindingInfo)||n(a.materialParams)!==n(b.materialParams))return!1;for(var c=a.texBindingInfo.length,d=0;d<c;++d){var e=a.texBindingInfo[d],f=b.texBindingInfo[d];if(e.unit!==f.unit||e.pageId!==f.pageId||
e.semantic!==f.semantic)return!1}a=a.materialParams.length;for(d=0;d<a;)return!1;return!0};a.serializeString=function(a,b,c){for(var d=0,e=a.length,f=0;f<e;++f)b&&(b[c+d]=a.charCodeAt(f)),++d;b&&(b[c+d]=0);++d;return d};a.deserializeString=function(a,b,c){var d=0;a.s="";for(var e=!0;e;){var f=b[c+d];++d;0!==f?a.s+=String.fromCharCode(f):e=!1}return d};a.isDefined=function(a){return null!==a&&void 0!==a};a.isNumber=function(a){return"number"===typeof a};a.isString=t;a.isStringOrNull=function(a){return null==
a||t(a)};a.lerp=function(a,b,c){return a+(b-a)*c};c=function(){function a(){this._arr=[];this._push=this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(b)};a.prototype.getKeys=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};return a}();a.KeysGetter=c;c=function(){function a(){this._arr=[];this._push=this._push.bind(this)}a.prototype._push=function(a,b){this._arr.push(a)};a.prototype.getValues=function(a){this._arr.length=0;a&&a.forEach(this._push);return this._arr};
return a}();a.ValuesGetter=c;a.getCapType=function(a){switch(a){case "butt":return p.CapType.BUTT;case "round":return p.CapType.ROUND;case "square":return p.CapType.SQUARE;default:return D.error(new d("mapview-invalid-type","Cap type "+a+" is not a valid option. Defaulting to round")),p.CapType.ROUND}};a.getJoinType=function(a){switch(a){case "miter":return p.JoinType.MITER;case "bevel":return p.JoinType.BEVEL;case "round":return p.JoinType.ROUND;default:return D.error(new d("mapview-invalid-type",
"Join type "+a+" is not a valid option. Defaulting to round")),p.JoinType.ROUND}};a.getVVType=function(a){switch(a){case "opacity":return p.VVType.OPACITY;case "color":return p.VVType.COLOR;case "rotation":return p.VVType.ROTATION;case "size":return p.VVType.SIZE;default:return D.error("Cannot interpret unknown vv: "+a),null}};a.createArcadeFunction=function(a,c){var d=a.spatialReference,g=a.layer,h=e.createFunction(a.valueExpression),k=new b,l=new f({viewingMode:null,scale:null}),p={},n={vars:{$feature:k,
$view:null},spatialReference:d};return function(a,b){k.repurposeFromGraphicLikeObject(a.geometry,a.attributes,g);b?(n.vars.$view=l,l.attributes.viewingMode=b.viewingMode,l.attributes.scale=b.scale):n.vars.$view=p;a=e.executeFunction(h,n);return c?c(a):a}};a.copyMeshData=function(a,b,c,d,e,f,g){for(var h in f)for(var k=f[h].stride,l=y(k),p=f[h].data,n=c[h].data,q=k*e.vertexCount/l,t=k*a/l,l=k*e.vertexFrom/l,k=0;k<q;++k)n[k+t]=p[k+l];c=e.indexCount;for(k=0;k<c;++k)d[k+b]=g[k+e.indexFrom]-e.vertexFrom+
a};a.C_VBO_INFO=(x={},x[a.C_VBO_GEOMETRY]=35044,x[a.C_VBO_VISIBILITY]=35044,x[a.C_VBO_VISIBILITY_RANGE]=35048,x);a.createGeometryData=function(a,b){for(var c=[],d=0;5>d;++d){for(var e={},f=0,g=v(d);f<g.length;f++){var h=g[f];e[h]={data:b(d,h)}}c.push({data:a(d),buffers:e})}return c};a.resampleHermite=function(a,b,c,d,e,f,g){void 0===g&&(g=!0);var h=b/e;c/=f;for(var k=Math.ceil(h/2),l=Math.ceil(c/2),p=0;p<f;p++)for(var n=0;n<e;n++){for(var q=4*(n+(g?f-p-1:p)*e),t=0,x=0,u=0,r=0,v=0,B=0,A=0,y=(p+.5)*
c,D=Math.floor(p*c);D<(p+1)*c;D++)for(var C=Math.abs(y-(D+.5))/l,F=(n+.5)*h,C=C*C,G=Math.floor(n*h);G<(n+1)*h;G++){var E=Math.abs(F-(G+.5))/k,t=Math.sqrt(C+E*E);-1<=t&&1>=t&&(t=2*t*t*t-3*t*t+1,0<t&&(E=4*(G+D*b),A+=t*a[E+3],u+=t,255>a[E+3]&&(t=t*a[E+3]/250),r+=t*a[E],v+=t*a[E+1],B+=t*a[E+2],x+=t))}d[q]=r/x;d[q+1]=v/x;d[q+2]=B/x;d[q+3]=A/u}}})},"esri/views/2d/engine/webgl/SymbolProperties":function(){define(["require","exports","../../../../core/ObjectPool"],function(c,a,f){Object.defineProperty(a,
"__esModule",{value:!0});c=function(){function a(){this.color=[0,0,0,0];this.haloColor=[0,0,0,0];this.haloSize=0;this.size=12;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=this.angle=0}a.prototype.acquire=function(a,b,c,e,f,p,g,q,v){this.color=a;this.haloColor=b;this.haloSize=c;this.size=e;this.angle=f;this.offsetX=p;this.offsetY=g;this.hAnchor=q;this.vAnchor=v};a.prototype.release=function(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0;this.vAnchor=this.hAnchor=this.offsetY=this.offsetX=
this.angle=this.size=this.haloSize=this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0};a.pool=new f(a);return a}();a.TextProperties=c})},"esri/views/3d/layers/support/FastSymbolUpdates":function(){define(["require","exports","../../../../renderers/support/utils","../graphics/graphicUtils","../../lib/gl-matrix"],function(c,a,f,b,d){function l(a){return null!==a&&void 0!==a}function k(a){return"number"===typeof a}function e(a,b){a&&a.push(b)}function h(a,b,c,d,g){var h=a.minSize,
n=a.maxSize;if(a.expression)return e(g,"Could not convert size info: expression not supported"),!1;if(a.useSymbolValue)return a=d.symbolSize[c],b.minSize[c]=a,b.maxSize[c]=a,b.offset[c]=b.minSize[c],b.factor[c]=0,b.type[c]=1,!0;if(l(a.field)){if(l(a.stops)){if(2===a.stops.length&&k(a.stops[0].size)&&k(a.stops[1].size))return p(a.stops[0].size,a.stops[1].size,a.stops[0].value,a.stops[1].value,b,c),b.type[c]=1,!0;e(g,"Could not convert size info: stops only supported with 2 elements");return!1}if(k(h)&&
k(n)&&l(a.minDataValue)&&l(a.maxDataValue))return p(h,n,a.minDataValue,a.maxDataValue,b,c),b.type[c]=1,!0;if(null!=f.meterIn[a.valueUnit])return b.minSize[c]=-Infinity,b.maxSize[c]=Infinity,b.offset[c]=0,b.factor[c]=1/f.meterIn[a.valueUnit],b.type[c]=1,!0;"unknown"===a.valueUnit?e(g,"Could not convert size info: proportional size not supported"):e(g,"Could not convert size info: scale-dependent size not supported");return!1}if(!l(a.field)){if(a.stops&&a.stops[0]&&k(a.stops[0].size))return b.minSize[c]=
a.stops[0].size,b.maxSize[c]=a.stops[0].size,b.offset[c]=b.minSize[c],b.factor[c]=0,b.type[c]=1,!0;if(k(h))return b.minSize[c]=h,b.maxSize[c]=h,b.offset[c]=h,b.factor[c]=0,b.type[c]=1,!0}e(g,"Could not convert size info: unsupported variant of sizeInfo");return!1}function p(a,b,c,d,e,f){d=0<Math.abs(d-c)?(b-a)/(d-c):0;e.minSize[f]=0<d?a:b;e.maxSize[f]=0<d?b:a;e.offset[f]=a-c*d;e.factor[f]=d}function g(a,b,c,d){if(a.normalizationField||a.valueRepresentation)return e(d,"Could not convert size info: unsupported property"),
null;var f=a.field;if(null!=f&&"string"!==typeof f)return e(d,"Could not convert size info: field is not a string"),null;if(!b.size)b.size={field:a.field,minSize:[0,0,0],maxSize:[0,0,0],offset:[0,0,0],factor:[0,0,0],type:[0,0,0]};else if(a.field)if(!b.size.field)b.size.field=a.field;else if(a.field!==b.size.field)return e(d,"Could not convert size info: multiple fields in use"),null;switch(a.axis){case "width":return(f=h(a,b.size,0,c,d))?b:null;case "height":return(f=h(a,b.size,2,c,d))?b:null;case "depth":return(f=
h(a,b.size,1,c,d))?b:null;case "width-and-depth":return(f=h(a,b.size,0,c,d))&&h(a,b.size,1,c,d),f?b:null;case null:case void 0:case "all":return(f=(f=(f=h(a,b.size,0,c,d))&&h(a,b.size,1,c,d))&&h(a,b.size,2,c,d))?b:null;default:return e(d,'Could not convert size info: unknown axis "'+a.axis+'""'),null}}function q(a,b,c){for(var d=0;3>d;++d){var f=b.unitInMeters;1===a.type[d]&&(f*=b.modelSize[d],a.type[d]=2);a.minSize[d]/=f;a.maxSize[d]/=f;a.offset[d]/=f;a.factor[d]/=f}if(0!==a.type[0])b=0;else if(0!==
a.type[1])b=1;else if(0!==a.type[2])b=2;else return e(c,"No size axis contains a valid size or scale"),!1;for(d=0;3>d;++d)0===a.type[d]&&(a.minSize[d]=a.minSize[b],a.maxSize[d]=a.maxSize[b],a.offset[d]=a.offset[b],a.factor[d]=a.factor[b],a.type[d]=a.type[b]);return!0}function v(a,b,c){a[4*b+0]=c.r/255;a[4*b+1]=c.g/255;a[4*b+2]=c.b/255;a[4*b+3]=c.a}function y(a,b,c){if(a.normalizationField)return e(c,"Could not convert color info: unsupported property"),null;if("string"===typeof a.field)if(a.stops){if(8<
a.stops.length)return e(c,"Could not convert color info: too many color stops"),null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};a=a.stops;for(c=0;8>c;++c){var d=a[Math.min(c,a.length-1)];b.color.values[c]=d.value;v(b.color.colors,c,d.color)}}else if(a.colors){if(!l(a.minDataValue)||!l(a.maxDataValue))return e(c,"Could not convert color info: missing data values"),null;if(2!==a.colors.length)return e(c,"Could not convert color info: invalid colors array"),
null;b.color={field:a.field,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]};b.color.values[0]=a.minDataValue;v(b.color.colors,0,a.colors[0]);b.color.values[1]=a.maxDataValue;v(b.color.colors,1,a.colors[1]);for(c=2;8>c;++c)b.color.values[c]=a.maxDataValue,v(b.color.colors,c,a.colors[1])}else return e(c,"Could not convert color info: missing stops or colors"),null;else if(a.stops&&0<=a.stops.length||a.colors&&0<=a.colors.length)for(a=a.stops&&0<=a.stops.length?
a.stops[0].color:a.colors[0],b.color={field:null,values:[0,0,0,0,0,0,0,0],colors:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]},c=0;8>c;c++)b.color.values[c]=Infinity,v(b.color.colors,c,a);else return e(c,"Could not convert color info: no field and no colors/stops"),null;return b}function C(a,b,c,d){a=2===c&&"arithmetic"===a.rotationType;b.offset[c]=a?90:0;b.factor[c]=a?-1:1;b.type[c]=1}function B(a,b,c){if("string"!==typeof a.field)return e(c,"Could not convert rotation info: field is not a string"),
null;if(!b.rotation)b.rotation={field:a.field,offset:[0,0,0],factor:[1,1,1],type:[0,0,0]};else if(a.field)if(!b.rotation.field)b.rotation.field=a.field;else if(a.field!==b.rotation.field)return e(c,"Could not convert rotation info: multiple fields in use"),null;switch(a.axis){case "tilt":return C(a,b.rotation,0,c),b;case "roll":return C(a,b.rotation,1,c),b;case null:case void 0:case "heading":return C(a,b.rotation,2,c),b;default:return e(c,'Could not convert rotation info: unknown axis "'+a.axis+
'""'),null}}function r(a,b,c){if(!a)return null;var d=!b.supportedTypes||!!b.supportedTypes.size,f=!b.supportedTypes||!!b.supportedTypes.color,h=!b.supportedTypes||!!b.supportedTypes.rotation;return(a=a.reduce(function(a,k){if(!a)return a;if(k.valueExpression)return e(c,"Could not convert visual variables: arcade expressions not supported"),null;switch(k.type){case "size":return d?g(k,a,b,c):a;case "color":return f?y(k,a,c):a;case "rotation":return h?B(k,a,c):a;default:return e(c,"Could not convert visual variables: unsupported type "+
k.type),null}},{size:null,color:null,rotation:null}))&&a.size&&!q(a.size,b,c)?null:a}function A(a,b,c){if(!!a!==!!b||a&&a.field!==b.field)return!1;if(a&&"rotation"===c)for(c=0;3>c;c++)if(a.type[c]!==b.type[c]||a.offset[c]!==b.offset[c]||a.factor[c]!==b.factor[c])return!1;return!0}function u(a,b){var c={vvSizeEnabled:!1,vvSizeMinSize:null,vvSizeMaxSize:null,vvSizeOffset:null,vvSizeFactor:null,vvSizeValue:null,vvColorEnabled:!1,vvColorValues:null,vvColorColors:null,vvSymbolAnchor:null,vvSymbolRotation:null},
d=a&&null!=a.size;a&&a.size?(c.vvSizeEnabled=!0,c.vvSizeMinSize=a.size.minSize,c.vvSizeMaxSize=a.size.maxSize,c.vvSizeOffset=a.size.offset,c.vvSizeFactor=a.size.factor):a&&d&&(c.vvSizeValue=b.transformation.scale);a&&d&&(c.vvSymbolAnchor=b.transformation.anchor,c.vvSymbolRotation=b.transformation.rotation);a&&a.color&&(c.vvColorEnabled=!0,c.vvColorValues=a.color.values,c.vvColorColors=a.color.colors);return c}Object.defineProperty(a,"__esModule",{value:!0});a.convertVisualVariables=r;a.initFastSymbolUpdatesState=
function(a,b){return!a||a.disableFastUpdates?{enabled:!1}:(a=r(a.visualVariables,b))?{enabled:!0,visualVariables:a,materialParameters:u(a,b),customTransformation:a&&null!=a.size}:{enabled:!1}};a.updateFastSymbolUpdatesState=function(a,b,c){if(!b||!a.enabled)return!1;var d=a.visualVariables;b=r(b.visualVariables,c);if(!(b&&A(d.size,b.size,"size")&&A(d.color,b.color,"color")&&A(d.rotation,b.rotation,"rotation")))return!1;a.visualVariables=b;a.materialParameters=u(b,c);a.customTransformation=b&&null!=
b.size;return!0};a.getMaterialParams=u;var n;(function(a){var c=d.mat4d.create(),e=d.vec3d.create();a.evaluateModelTransform=function(a,f,g){if(!a.vvSizeEnabled)return g;d.mat4d.set(g,c);b.computeObjectRotation(a.vvSymbolRotation[2],a.vvSymbolRotation[0],a.vvSymbolRotation[1],c);if(a.vvSizeEnabled){for(g=0;3>g;++g){var h=a.vvSizeOffset[g]+f[0]*a.vvSizeFactor[g],k=g;var l=a.vvSizeMinSize[g],p=a.vvSizeMaxSize[g],h=h<l?l:h>p?p:h;e[k]=h}d.mat4d.scale(c,e,c)}else d.mat4d.scale(c,a.vvSizeValue,c);d.mat4d.translate(c,
a.vvSymbolAnchor,c);return c}})(n||(n={}));a.evaluateModelTransform=n.evaluateModelTransform})},"esri/views/3d/layers/graphics/graphicUtils":function(){define("require exports ../../../../geometry ../../../../geometry/support/aaBoundingBox ../../../../geometry/support/aaBoundingRect ../../../../geometry/support/centroid ../../../../geometry/support/coordsUtils ../../../../geometry/support/webMercatorUtils ../../../../layers/graphics/dehydratedFeatures ../../lib/gl-matrix ../../support/mathUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g){function q(a){var b=a.paths[0];if(!b||0===b.length)return null;b=k.getPointOnPath(b,k.getPathLength(b)/2);return h.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference)}function v(a){if(Array.isArray(a)){for(var b=0;b<a.length;b++)if(!v(a[b]))return!1;return!0}return null==a||0<=a}Object.defineProperty(a,"__esModule",{value:!0});var y=[1,1,1];a.computeCentroid=function(a){if("point"===a.type)return a;if(h.isHydratedGeometry(a))switch(a.type){case "extent":return a.center;
case "polygon":return a.centroid;case "polyline":return q(a);case "mesh":return a.extent.center}else switch(a.type){case "extent":var b=g.isFinite(a.zmin);return h.makeDehydratedPoint(.5*(a.xmax+a.xmin),.5*(a.ymax+a.ymin),b?.5*(a.zmax+a.zmin):void 0,a.spatialReference);case "polygon":return(b=a.rings[0])&&0!==b.length?(b=l.ringsCentroid(a.rings,a.hasZ),a=h.makeDehydratedPoint(b[0],b[1],b[2],a.spatialReference)):a=null,a;case "polyline":return q(a)}};a.convertPointSR=function(a,b){var c=a.spatialReference;
c.isWebMercator&&b.isWGS84?(e.xyToLngLat(a.x,a.y,C),a.x=C[0],a.y=C[1],a.spatialReference=f.SpatialReference.WGS84):b.isWebMercator&&c.isWGS84&&(e.lngLatToXY(a.x,a.y,C),a.x=C[0],a.y=C[1],a.spatialReference=f.SpatialReference.WebMercator)};a.enlargeExtent=function(a,b,c){if(a){b||(b=d.create());var e=.5*a.width*(c-1);c=.5*a.height*(c-1);a.width<1E-7*a.height?e+=c/20:a.height<1E-7*a.width&&(c+=e/20);p.vec4d.set4(a.xmin-e,a.ymin-c,a.xmax+e,a.ymax+c,b);return b}return null};a.updateVertexAttributeAuxpos1w=
function(a,b){for(var c=0;c<a.geometries.length;++c){var d=a.geometries[c].data.vertexAttributes.auxpos1;d&&d.data[3]!==b&&(d.data[3]=b,a.geometryVertexAttrsUpdated(c))}};a.mixinColorAndOpacity=function(a,b){var c=[1,1,1,1];null!=a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);null!==b&&void 0!==b?c[3]=b:null!=a&&3<a.length&&(c[3]=a[3]);return c};a.overrideColor=function(a,b,c,d,e,f){void 0===f&&(f=[0,0,0,0]);for(var g=0;3>g;++g)f[g]=a&&null!=a[g]?a[g]:c&&null!=c[g]?c[g]:e[g];f[3]=null!=b?b:null!=d?d:e[3];return f};
a.computeObjectScale=function(a,b,c,d){void 0===a&&(a=y);void 0===d&&(d=1);var e=Array(3);if(null==b||null==c)e[0]=1,e[1]=1,e[2]=1;else{for(var f=void 0,g=0,h=2;0<=h;h--){var k=a[h],l=void 0,p=null!=k,q=0===h&&!f&&!p,u=c[h];"symbolValue"===k||q?l=0!==u?b[h]/u:1:p&&"proportional"!==k&&isFinite(k)&&(l=0!==u?k/u:1);null!=l&&(f=e[h]=l,g=Math.max(g,Math.abs(l)))}for(h=2;0<=h;h--)null==e[h]?e[h]=f:0===e[h]&&(e[h]=.001*g)}for(h=2;0<=h;h--)e[h]/=d;return e};a.computeSizeWithResourceSize=function(a,b){var c=
b.width,d=b.depth,e=b.height;b=b.isPrimitive?10:1;if(null==c&&null==e&&null==d)return[b*a[0],b*a[1],b*a[2]];for(var c=[c,d,e],f,d=0;3>d;d++)if(e=c[d],null!=e){f=e/a[d];break}for(d=0;3>d;d++)null==c[d]&&(c[d]=a[d]*f);return c};a.validateSymbolLayerSize=function(a){null!=a.isPrimitive&&(a=[a.width,a.depth,a.height]);return v(a)?null:"Symbol sizes may not be negative values"};a.computeObjectRotation=function(a,b,c,d){void 0===d&&(d=p.mat4d.identity());a=a||0;b=b||0;c=c||0;0!==a&&p.mat4d.rotateZ(d,-a/
180*Math.PI,d);0!==b&&p.mat4d.rotateX(d,b/180*Math.PI,d);0!==c&&p.mat4d.rotateY(d,c/180*Math.PI,d);return d};a.demResolutionForBoundingBox=function(a,c){return null!=c.minDemResolution?c.minDemResolution:b.isPoint(a)?c.minDemResolutionForPoints:.01*b.maximumDimension(a)};var C=[0,0]})},"esri/geometry/support/aaBoundingBox":function(){define(["require","exports","../Extent","./aaBoundingRect"],function(c,a,f,b){function d(b){void 0===b&&(b=a.ZERO);return[b[0],b[1],b[2],b[3],b[4],b[5]]}function l(a){return a[0]>=
a[3]?0:a[3]-a[0]}function k(a){return a[1]>=a[4]?0:a[4]-a[1]}function e(a){return a[2]>=a[5]?0:a[5]-a[2]}function h(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}function p(a){return 6===a.length}Object.defineProperty(a,"__esModule",{value:!0});a.create=d;a.fromValues=function(a,b,c,d,e,f){return[a,b,c,d,e,f]};a.fromExtent=function(a,b){void 0===b&&(b=d());b[0]=a.xmin;b[1]=a.ymin;b[2]=a.zmin;b[3]=a.xmax;b[4]=a.ymax;b[5]=a.zmax;return b};a.toExtent=function(a,b){return isFinite(a[2])||
isFinite(a[5])?new f({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],zmin:a[2],zmax:a[5],spatialReference:b}):new f({xmin:a[0],xmax:a[3],ymin:a[1],ymax:a[4],spatialReference:b})};a.fromMinMax=function(a,b,c){void 0===c&&(c=d());c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=b[0];c[4]=b[1];c[5]=b[2];return c};a.expandPointInPlace=function(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[3]&&(a[3]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[4]&&(a[4]=b[1]);b[2]<a[2]&&(a[2]=b[2]);b[2]>a[5]&&(a[5]=b[2])};a.expand=function(a,c,d){void 0===d&&
(d=a);p(c)?(d[0]=Math.min(a[0],c[0]),d[1]=Math.min(a[1],c[1]),d[2]=Math.min(a[2],c[2]),d[3]=Math.max(a[3],c[3]),d[4]=Math.max(a[4],c[4]),d[5]=Math.max(a[5],c[5])):b.is(c)?(d[0]=Math.min(a[0],c[0]),d[1]=Math.min(a[1],c[1]),d[3]=Math.max(a[3],c[2]),d[4]=Math.max(a[4],c[3])):2===c.length?(d[0]=Math.min(a[0],c[0]),d[1]=Math.min(a[1],c[1]),d[3]=Math.max(a[3],c[0]),d[4]=Math.max(a[4],c[1])):3===c.length&&(d[0]=Math.min(a[0],c[0]),d[1]=Math.min(a[1],c[1]),d[2]=Math.min(a[2],c[2]),d[3]=Math.max(a[3],c[0]),
d[4]=Math.max(a[4],c[1]),d[5]=Math.max(a[5],c[2]));return d};a.expandWithBuffer=function(a,b,c,d,e){void 0===e&&(e=a);var f=a[0],g=a[1],h=a[2],k=a[3],l=a[4];a=a[5];for(var p=0;p<d;p++)f=Math.min(f,b[c+3*p]),g=Math.min(g,b[c+3*p+1]),h=Math.min(h,b[c+3*p+2]),k=Math.max(k,b[c+3*p]),l=Math.max(l,b[c+3*p+1]),a=Math.max(a,b[c+3*p+2]);e[0]=f;e[1]=g;e[2]=h;e[3]=k;e[4]=l;e[5]=a;return e};a.expandWithNestedArray=function(a,b,c,d){void 0===d&&(d=a);var e=b.length,f=a[0],g=a[1],h=a[2],k=a[3],l=a[4];a=a[5];if(c)for(c=
0;c<e;c++){var p=b[c],f=Math.min(f,p[0]),g=Math.min(g,p[1]),h=Math.min(h,p[2]),k=Math.max(k,p[0]),l=Math.max(l,p[1]);a=Math.max(a,p[2])}else for(c=0;c<e;c++)p=b[c],f=Math.min(f,p[0]),g=Math.min(g,p[1]),k=Math.max(k,p[0]),l=Math.max(l,p[1]);d[0]=f;d[1]=g;d[2]=h;d[3]=k;d[4]=l;d[5]=a;return d};a.allFinite=function(a){for(var b=0;6>b;b++)if(!isFinite(a[b]))return!1;return!0};a.width=l;a.depth=k;a.height=e;a.diameter=function(a){var b=l(a),c=e(a);a=k(a);return Math.sqrt(b*b+c*c+a*a)};a.center=function(a,
b){void 0===b&&(b=[0,0,0]);b[0]=a[0]+l(a)/2;b[1]=a[1]+k(a)/2;b[2]=a[2]+e(a)/2;return b};a.size=function(a,b){void 0===b&&(b=[0,0,0]);b[0]=l(a);b[1]=k(a);b[2]=e(a);return b};a.maximumDimension=function(a){return Math.max(l(a),e(a),k(a))};a.containsPoint=function(a,b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[0]<=a[3]&&b[1]<=a[4]&&b[2]<=a[5]};a.containsPointWithMargin=function(a,b,c){return b[0]>=a[0]-c&&b[1]>=a[1]-c&&b[2]>=a[2]-c&&b[0]<=a[3]+c&&b[1]<=a[4]+c&&b[2]<=a[5]+c};a.contains=function(a,
b){return b[0]>=a[0]&&b[1]>=a[1]&&b[2]>=a[2]&&b[3]<=a[3]&&b[4]<=a[4]&&b[5]<=a[5]};a.intersects=function(a,b){return Math.max(b[0],a[0])<=Math.min(b[3],a[3])&&Math.max(b[1],a[1])<=Math.min(b[4],a[4])&&Math.max(b[2],a[2])<=Math.min(b[5],a[5])};a.offset=function(a,b,c,d,e){void 0===e&&(e=a);e[0]=a[0]+b;e[1]=a[1]+c;e[2]=a[2]+d;e[3]=a[3]+b;e[4]=a[4]+c;e[5]=a[5]+d;return e};a.setMin=function(a,b,c){void 0===c&&(c=a);c[0]=b[0];c[1]=b[1];c[2]=b[2];c!==a&&(c[3]=a[3],c[4]=a[4],c[5]=a[5]);return c};a.setMax=
function(a,b,c){void 0===c&&(c=a);c[3]=b[0];c[4]=b[1];c[5]=b[2];c!==a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2]);return a};a.set=h;a.empty=function(b){return b?h(b,a.NEGATIVE_INFINITY):d(a.NEGATIVE_INFINITY)};a.toRect=function(a,c){c||(c=b.create());c[0]=a[0];c[1]=a[1];c[2]=a[3];c[3]=a[4];return c};a.fromRect=function(a,b){a[0]=b[0];a[1]=b[1];a[3]=b[2];a[4]=b[3];return a};a.is=p;a.isPoint=function(a){return 0===l(a)&&0===k(a)&&0===e(a)};a.equals=function(a,b,c){if(null==a||null==b)return a===b;if(!p(a)||!p(b))return!1;
if(c)for(var d=0;d<a.length;d++){if(!c(a[d],b[d]))return!1}else for(d=0;d<a.length;d++)if(a[d]!==b[d])return!1;return!0};a.POSITIVE_INFINITY=[-Infinity,-Infinity,-Infinity,Infinity,Infinity,Infinity];a.NEGATIVE_INFINITY=[Infinity,Infinity,Infinity,-Infinity,-Infinity,-Infinity];a.ZERO=[0,0,0,0,0,0]})},"esri/layers/graphics/dehydratedFeatures":function(){define("require exports ../../Graphic ../../core/lang ../../geometry/SpatialReference ../../geometry/support/aaBoundingBox ../../geometry/support/aaBoundingRect ../../geometry/support/quantizationUtils ./dehydratedFeatureComparison".split(" "),
function(c,a,f,b,d,l,k,e,h){function p(a){switch(a){case "esriGeometryPoint":return"point";case "esriGeometryMultipoint":return"multipoint";case "esriGeometryPolyline":return"polyline";case "esriGeometryPolygon":return"polygon";case "esriGeometryEnvelope":return"extent"}}function g(a,b,c,d){return{uid:f.generateUID(),objectId:d&&a.attributes?a.attributes[d]:null,attributes:a.attributes,geometry:q(a.geometry,b,c),visible:!0}}function q(a,b,c){if(!a)return null;switch(b){case "point":return a={x:a.x,
y:a.y,z:a.z,m:a.m,hasZ:null!=a.z,hasM:null!=a.m,type:b,spatialReference:c};case "polyline":return a={paths:a.paths,hasZ:!!a.hasZ,hasM:!!a.hasM,type:b,spatialReference:c};case "polygon":return a={rings:a.rings,hasZ:!!a.hasZ,hasM:!!a.hasM,type:b,spatialReference:c};case "multipoint":return a={points:a.points,hasZ:!!a.hasZ,hasM:!!a.hasM,type:b,spatialReference:c};case "extent":return a={xmin:a.xmin,ymin:a.ymin,zmin:a.zmin,mmin:a.mmin,xmax:a.xmax,ymax:a.ymax,zmax:a.zmax,mmax:a.mmax,hasZ:!!a.hasZ,hasM:!!a.hasM,
type:b,spatialReference:c}}}function v(a){return"declaredClass"in a}function y(a){var b=a.spatialReference.toJSON();switch(a.type){case "point":return{x:a.x,y:a.y,z:a.z,m:a.m,spatialReference:b};case "polygon":var c=a.hasZ,d=a.hasM;return{rings:a.rings,hasZ:c,hasM:d,spatialReference:b};case "polyline":var e=a.paths,c=a.hasZ,d=a.hasM;return{paths:e,hasZ:c,hasM:d,spatialReference:b};case "extent":var e=a.xmin,f=a.xmax,g=a.ymin,h=a.ymax,k=a.zmin,l=a.zmax,p=a.mmin,q=a.mmax,c=a.hasZ,d=a.hasM;return{xmin:e,
xmax:f,ymin:g,ymax:h,zmin:k,zmax:l,mmin:p,mmax:q,hasZ:c,hasM:d,spatialReference:b};case "multipoint":return e=a.points,c=a.hasZ,d=a.hasM,{points:e,hasZ:c,hasM:d,spatialReference:b}}}function C(a,b){l.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[3]=a.x;b[1]=b[4]=a.y;a.hasZ&&(b[2]=b[5]=a.z);break;case "polyline":for(var c=0;c<a.paths.length;c++)l.expandWithNestedArray(b,a.paths[c],a.hasZ);break;case "polygon":for(c=0;c<a.rings.length;c++)l.expandWithNestedArray(b,a.rings[c],
a.hasZ);break;case "multipoint":l.expandWithNestedArray(b,a.points,a.hasZ);break;case "extent":b[0]=a.xmin,b[1]=a.ymin,b[3]=a.xmax,b[4]=a.ymax,null!=a.zmin&&(b[2]=a.zmin),null!=a.zmax&&(b[5]=a.zmax)}}function B(a,b){k.empty(b);"mesh"===a.type&&(a=a.extent);switch(a.type){case "point":b[0]=b[2]=a.x;b[1]=b[3]=a.y;break;case "polyline":for(var c=0;c<a.paths.length;c++)k.expandWithNestedArray(b,a.paths[c]);break;case "polygon":for(c=0;c<a.rings.length;c++)k.expandWithNestedArray(b,a.rings[c]);break;case "multipoint":k.expandWithNestedArray(b,
a.points);break;case "extent":b[0]=a.xmin,b[1]=a.ymin,b[2]=a.xmax,b[3]=a.ymax}}Object.defineProperty(a,"__esModule",{value:!0});a.equals=h.equals;a.isPoint=function(a){return"point"===a.type};a.mapJSONGeometryType=p;a.fromFeatureSetJSON=function(a){var b=p(a.geometryType),c=d.fromJSON(a.spatialReference),f=a.transform;return a.features.map(function(d){d=g(d,b,c,a.objectIdFieldName);var h=d.geometry;if(h&&f)switch(h.type){case "point":d.geometry=e.hydratePoint(f,h,h,h.hasZ,h.hasM);break;case "multipoint":d.geometry=
e.hydrateMultipoint(f,h,h,h.hasZ,h.hasM);break;case "polygon":d.geometry=e.hydratePolygon(f,h,h,h.hasZ,h.hasM);break;case "polyline":d.geometry=e.hydratePolyline(f,h,h,h.hasZ,h.hasM)}return d})};a.fromJSON=g;a.fromJSONGeometry=q;a.makeDehydratedPoint=function(a,b,c,d){return{x:a,y:b,z:c,hasZ:null!=c,hasM:!1,spatialReference:d,type:"point"}};a.isHydratedGeometry=function(a){return"declaredClass"in a};a.isHydratedGraphic=v;a.hydrateGraphic=function(a,c){if(!a||v(a))return a;c=new f({layer:c,sourceLayer:c});
c.visible=a.visible;c.symbol=b.clone(a.symbol);c.attributes=b.clone(a.attributes);a.geometry&&("mesh"===a.geometry.type?c.geometry=a.geometry:c.read({geometry:y(a.geometry)}));return c};a.computeAABB=C;a.expandAABB=function(a,b){C(a,r);l.expand(b,r)};a.computeAABR=B;a.expandAABR=function(a,b){B(a,A);k.expand(b,A)};var r=l.create(),A=k.create()})},"esri/layers/graphics/dehydratedFeatureComparison":function(){define(["require","exports"],function(c,a){function f(a,b){if(a===b)return!0;if(null==a||null==
b||a.length!==b.length)return!1;for(var c=0;c<a.length;c++){var d=a[c],e=b[c];if(d.length!==e.length)return!1;for(var f=0;f<d.length;f++)if(d[f]!==e[f])return!1}return!0}function b(a,b){if(a===b)return!0;if(null==a||null==b||a.length!==b.length)return!1;for(var c=0;c<a.length;c++)if(!f(a[c],b[c]))return!1;return!0}function d(a,b){return a===b||a&&b&&a.equals(b)}function l(a,c){if(a===c)return!0;if(!a||!c||a.type!==c.type)return!1;switch(a.type){case "point":return d(a.spatialReference,c.spatialReference)?
a.x===c.x&&a.y===c.y&&a.z===c.z&&a.m===c.m:!1;case "extent":return a.hasZ===c.hasZ&&a.hasM===c.hasM&&d(a.spatialReference,c.spatialReference)?a.xmin===c.xmin&&a.ymin===c.ymin&&a.zmin===c.zmin&&a.xmax===c.xmax&&a.ymax===c.ymax&&a.zmax===c.zmax:!1;case "polyline":return a.hasZ===c.hasZ&&a.hasM===c.hasM&&d(a.spatialReference,c.spatialReference)?b(a.paths,c.paths):!1;case "polygon":return a.hasZ===c.hasZ&&a.hasM===c.hasM&&d(a.spatialReference,c.spatialReference)?b(a.rings,c.rings):!1;case "multipoint":return a.hasZ===
c.hasZ&&a.hasM===c.hasM&&d(a.spatialReference,c.spatialReference)?f(a.points,c.points):!1;case "mesh":return!1}}function k(a,b){if(a===b)return!0;if(!a||!b)return!1;for(var c in a)if(!(c in b)||a[c]!==b[c])return!1;for(c in b)if(!(c in a))return!1;return!0}Object.defineProperty(a,"__esModule",{value:!0});a.equals=function(a,b){return a===b?!0:null!=a&&null!=b&&a.objectId===b.objectId&&l(a.geometry,b.geometry)&&k(a.attributes,b.attributes)?!0:!1}})},"esri/views/2d/engine/webgl/collisions/CollisionGrid":function(){define(["require",
"exports","../definitions"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a){this._bucketSize=a;this._rowsLength=f.TILE_SIZE/a;this._colsLength=f.TILE_SIZE/a;this._grid=this._initGrid()}a.prototype.checkOverlap=function(a,b){a=Math.floor(a/this._bucketSize);b=Math.floor(b/this._bucketSize);if(0>a||a>=this._rowsLength||0>b||b>=this._colsLength||this._grid[b][a])return!0;this._grid[b][a]=!0;return!1};a.prototype.reset=function(){this._grid=this._initGrid()};
a.prototype._initGrid=function(){for(var a=[],b=0;b<this._rowsLength;b++)a.push(Array(this._colsLength));return a};return a}();a.default=c})},"esri/views/2d/engine/webgl/mesh/factories/matcherUtils":function(){define(["require","exports","../../../../../../core/Error","../../../../../../core/Logger","../../util/Matcher"],function(c,a,f,b,d){Object.defineProperty(a,"__esModule",{value:!0});var l=b.getLogger("esri/views/2d/engine/webgl/mesh/factories/matcherUtils");a.createMatcher=function(a,b,c,p,
g){switch(a.type){case "simple":return d.default.fromSimpleRenderer(a,b,c);case "unique-value":case "uniqueValue":return d.MapMatcher.fromUVRenderer(a,b,c,p,g);case "class-breaks":case "classBreaks":return d.IntervalMatcher.fromCBRenderer(a,b,c,p,g);default:return l.error(new f("mapview-mesh:invalid-renderer","Unable to handle unknown renderer type")),null}}})},"esri/views/2d/engine/webgl/util/Matcher":function(){define("require exports ../../../../../core/tsSupport/extendsHelper ../../../../../core/Logger ../Utils ./vvFlagUtils".split(" "),
function(c,a,f,b,d,l){Object.defineProperty(a,"__esModule",{value:!0});var k=b.getLogger("esri/views/2d/engine/webgl/util/Matcher");c=function(){function a(){this._defaultResult=null}a.fromSimpleRenderer=function(b,c,d){var e=b.getSymbols(),f=l.getVVFlags(b.visualVariables);b=new a;e.length&&(c=d.createTemplateGroup(e[0],null,c,f),b.setDefault(c));return b};a.prototype.size=function(){return 1};a.prototype.getDefault=function(){return this._defaultResult};a.prototype.setDefault=function(a){this._defaultResult=
a};a.prototype.match=function(a,b){return this.getDefault()};return a}();a.default=c;b=function(a){function b(b,c,e,f){var g=a.call(this)||this;g._intervals=[];g._isMaxInclusive=c;e?g._getValue=d.createArcadeFunction(e):b&&b.length?"function"===typeof b?(g._field=null,g._getValue=b):(g._field=b,g._normalizationInfo=f,g._getValue=g._getValueFromField.bind(g)):g._field=null;return g}f(b,a);b.fromCBRenderer=function(a,c,d,e,f){var g=a.isMaxInclusive,h=a.valueExpression,k=a.normalizationField,p=a.normalizationTotal,
q=a.normalizationType,n=l.getVVFlags(a.visualVariables);e=new b(a.field,g,h?{valueExpression:h,spatialReference:e,layer:{fields:f}}:null,{normalizationField:k,normalizationTotal:p,normalizationType:q});f=a.backgroundFillSymbol;g=0;for(h=a.classBreakInfos;g<h.length;g++)k=h[g],p=d.createTemplateGroup(k.symbol,f,c,n),e.add({min:k.minValue,max:k.maxValue},p);if(a=a.defaultSymbol)c=d.createTemplateGroup(a,f,c,n),e.setDefault(c);return e};b.prototype.add=function(a,b){this._intervals.push({interval:a,
result:b});this._intervals.sort(function(a,b){return a.interval.min-b.interval.min})};b.prototype.size=function(){return a.prototype.size.call(this)+this._intervals.length};b.prototype.match=function(a,b){if(!this._getValue)return this.getDefault();a=this._getValue(a,b);if(!a&&(null===a||void 0===a||isNaN(a)))return this.getDefault();for(b=0;b<this._intervals.length;b++){var c=this._intervals[b],d=c.interval,c=c.result,e=this._isMaxInclusive?a<=d.max:a<d.max;if(a>=d.min&&e)return c}return this.getDefault()};
b.prototype._needsNormalization=function(){var a=this._normalizationInfo;return a&&(a.normalizationField||a.normalizationTotal||a.normalizationType)};b.prototype._getValueFromField=function(a){var b=a.attributes[this._field];if(!this._needsNormalization())return b;var c=this._normalizationInfo,d=c.normalizationField,e=c.normalizationTotal,c=c.normalizationType;a=!!d&&a.attributes[d];if(c)switch(c){case "field":return(a||void 0)&&b/a;case "log":return Math.log(b)*Math.LOG10E;case "percent-of-total":return b/
e*100;default:k.error("Found unknown normalization type: "+c)}else k.error("Normalization is required, but no type was set!")};return b}(c);a.IntervalMatcher=b;c=function(a){function b(b,c,e){var f=a.call(this)||this;f._resultsMap=new Map;e?f._getValue=d.createArcadeFunction(e):b&&b.length?"function"===typeof b[0]?(f._fields=null,f._getValue=b[0]):(f._fields=b,f._seperator=c||"",f._getValue=f._getValueFromFields.bind(f)):f._fields=null;return f}f(b,a);b.fromUVRenderer=function(a,c,d,e,f){var g=a.uniqueValueInfos,
h=l.getVVFlags(a.visualVariables),k=[a.field];a.field2&&k.push(a.field2);a.field3&&k.push(a.field3);var p=a.valueExpression,q=a.backgroundFillSymbol;e=new b(k,a.fieldDelimiter,p?{valueExpression:p,spatialReference:e,layer:{fields:f}}:null);for(f=0;f<g.length;f++)k=g[f],p=d.createTemplateGroup(k.symbol,q,c,h),e.add(k.value,p);a.defaultSymbol&&(a=d.createTemplateGroup(a.defaultSymbol,q,c,h),e.setDefault(a));return e};b.prototype.add=function(a,b){this._resultsMap.set(a.toString(),b)};b.prototype.size=
function(){return a.prototype.size.call(this)+this._resultsMap.size};b.prototype.match=function(a,b){if(!this._getValue)return this.getDefault();a=this._getValue(a,b);if(!a&&(null===a||void 0===a))return this.getDefault();a=a.toString();return this._resultsMap.has(a)?this._resultsMap.get(a):this.getDefault()};b.prototype._getValueFromFields=function(a){for(var b=[],c=0,d=this._fields;c<d.length;c++)b.push(a.attributes[d[c]]);return b.join(this._seperator)};return b}(c);a.MapMatcher=c})},"esri/views/2d/engine/webgl/util/vvFlagUtils":function(){define(["require",
"exports","../enums","../visualVariablesUtils"],function(c,a,f,b){function d(a,b){void 0===b&&(b=!1);var c=f.WGLVVFlag.SIZE_FIELD_STOPS|f.WGLVVFlag.SIZE_MINMAX_VALUE|f.WGLVVFlag.SIZE_SCALE_STOPS|f.WGLVVFlag.SIZE_UNIT_VALUE;a=(a&(f.WGLVVTarget.FIELD_TARGETS_OUTLINE|f.WGLVVTarget.MINMAX_TARGETS_OUTLINE|f.WGLVVTarget.SCALE_TARGETS_OUTLINE|f.WGLVVTarget.UNIT_TARGETS_OUTLINE))>>>4;return b?c&a:c&~a}function l(a){var b=d(a,!1);return a&(f.WGLVVFlag.COLOR|f.WGLVVFlag.OPACITY|f.WGLVVFlag.ROTATION|b)}Object.defineProperty(a,
"__esModule",{value:!0});a.getVVFlags=function(a){if(!a)return f.WGLVVFlag.NONE;for(var c=0,d=0;d<a.length;d++){var k=a[d];if("size"===k.type){var g=b.getTypeOfSizeVisualVariable(k),c=c|g;"outline"===k.target&&(c|=g<<4)}else"color"===k.type?c|=f.WGLVVFlag.COLOR:"opacity"===k.type?c|=f.WGLVVFlag.OPACITY:"rotation"===k.type&&(c|=f.WGLVVFlag.ROTATION)}return c};a.getSizeFlagsMask=d;a.getMarkerVVFlags=l;a.getFillVVFlags=function(a){return a&(f.WGLVVFlag.COLOR|f.WGLVVFlag.OPACITY)};a.getLineVVFlags=function(a,
b){if(b)return b=d(a,!0),a&b;b=d(a,!1);return a&(f.WGLVVFlag.COLOR|f.WGLVVFlag.OPACITY|b)};a.getTextVVFlags=function(a){return l(a)}})},"esri/views/2d/engine/webgl/mesh/factories/MaterialStore":function(){define(["require","exports","../../MaterialInfo","../../util/serializationUtils"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(){this._materials=[];this._materialsIndex=new Map}a.prototype.insert=function(a){var b=this._materials.length;this._materials.push(a);
return b};a.prototype._hashGlyph=function(a,b,c){return"G-"+b+"-"+c+"-"+a.page};a.prototype._hashSprite=function(a,b,c){return a?"S-"+b+"-"+c+"-"+a.page+"-"+(a.sdf?1:0):"S-"+b+"-"+c+"--1}"};a.prototype.createSpriteMaterial=function(a,b,c){var d=this._hashSprite(a,b,c);if(this._materialsIndex.has(d))return this._materialsIndex.get(d);var e=this._materials.length;a=f.default.fromSprite(a,b,c);this._materials.push(a);this._materialsIndex.set(d,e);return e};a.prototype.createGlyphMaterial=function(a,
b,c){var d=this._hashGlyph(a,b,c);if(this._materialsIndex.has(d))return this._materialsIndex.get(d);var e=this._materials.length;a=f.default.fromGlyph(a,b,c);this._materials.push(a);this._materialsIndex.set(d,e);return e};a.prototype.get=function(a){return this._materials[a]};a.prototype.serialize=function(a){b.serializeList(a,this._materials);return a};a.deserialize=function(c){var d=new a;d._materials=b.deserializeList(c,f.default);return d};return a}();a.default=c})},"esri/views/2d/engine/webgl/MaterialInfo":function(){define("require exports ./enums ./MaterialInfoUtils ./MaterialInfoUtils_updateMaterialVariations ./MaterialKeyInfo ./util/serializationUtils".split(" "),
function(c,a,f,b,d,l,k){Object.defineProperty(a,"__esModule",{value:!0});var e=function(){function a(a,b,c){this.unit=a;this.pageId=b;this.semantic=c}a.prototype.clone=function(){return new a(this.unit,this.pageId,this.semantic)};a.prototype.serialize=function(a){a.push(this.unit);a.push(this.pageId);return a};a.deserialize=function(b){var c=b.readInt32();b=b.readInt32();return new a(c,b,"u_texture")};return a}();a.TexBindingInfo=e;var h=function(){function a(a,b){this.name=a;this.value=b}a.prototype.clone=
function(){return new a(this.name,this.value)};a.prototype.serialize=function(a){a.push(this.value);return a};a.deserialize=function(b){b=b.readInt32();return new a("u_my_param",b)};return a}();a.MaterialParam=h;c=function(){function a(){this.texBindingInfo=[];this.materialParams=[]}a.fromSprite=function(c,d,h){var g=new a,k=new l;k.geometryType=d;c?(k.sdf=c.sdf,k.pattern=!0,g.texBindingInfo.push(new e(1,c.page,"u_texture"))):(k.sdf=!1,k.pattern=!1);0===h?k.vvOpacity=k.vvSizeMinMaxValue=k.vvSizeScaleStops=
k.vvSizeFieldStops=k.vvSizeUnitValue=k.vvColor=k.vvRotation=!1:(k.vvOpacity=0!==(h&f.WGLVVFlag.OPACITY),k.vvSizeMinMaxValue=0!==(h&f.WGLVVFlag.SIZE_MINMAX_VALUE),k.vvSizeScaleStops=0!==(h&f.WGLVVFlag.SIZE_SCALE_STOPS),k.vvSizeFieldStops=0!==(h&f.WGLVVFlag.SIZE_FIELD_STOPS),k.vvSizeUnitValue=0!==(h&f.WGLVVFlag.SIZE_UNIT_VALUE),k.vvColor=0!==(h&f.WGLVVFlag.COLOR),k.vvRotation=0!==(h&f.WGLVVFlag.ROTATION));k.visibility=!1;g.materialKey=b.getMaterialKey(k);g.materialKeyInfo=k;return g};a.fromGlyph=function(c,
d,h){var g=new a,k=new l;k.geometryType=d;k.sdf=!0;k.pattern=!1;k.visibility=!1;k.heatmap=!1;g.texBindingInfo.push(new e(2,c.page,"u_texture"));0===h?k.vvOpacity=k.vvSizeMinMaxValue=k.vvSizeScaleStops=k.vvSizeFieldStops=k.vvSizeUnitValue=k.vvColor=k.vvRotation=!1:(k.vvOpacity=0!==(h&f.WGLVVFlag.OPACITY),k.vvSizeMinMaxValue=0!==(h&f.WGLVVFlag.SIZE_MINMAX_VALUE),k.vvSizeScaleStops=0!==(h&f.WGLVVFlag.SIZE_SCALE_STOPS),k.vvSizeFieldStops=0!==(h&f.WGLVVFlag.SIZE_FIELD_STOPS),k.vvSizeUnitValue=0!==(h&f.WGLVVFlag.SIZE_UNIT_VALUE),
k.vvColor=0!==(h&f.WGLVVFlag.COLOR),k.vvRotation=0!==(h&f.WGLVVFlag.ROTATION));g.materialKey=b.getMaterialKey(k);g.materialKeyInfo=k;return g};a.prototype.copy=function(a){this.materialParams=a.materialParams.map(function(a){return a.clone()});this.texBindingInfo=a.texBindingInfo.map(function(a){return a.clone()});a.materialKeyInfo&&(this.materialKeyInfo=new l,this.materialKeyInfo.copy(a.materialKeyInfo));this.materialKey=a.materialKey};a.prototype.serialize=function(a){a.push(this.materialKey);k.serializeList(a,
this.texBindingInfo);k.serializeList(a,this.materialParams);return a};a.deserialize=function(b){var c=new a;c.materialKey=b.readInt32();c.texBindingInfo=k.deserializeList(b,e);c.materialParams=k.deserializeList(b,h);c.materialKeyInfo=new l;d(c.materialKeyInfo,c.materialKey);return c};return a}();a.default=c})},"esri/views/2d/engine/webgl/MaterialInfoUtils":function(){define(["require","exports","./enums","./MaterialInfo","./MaterialKeyInfo"],function(c,a,f,b,d){function l(a){var b=[];b[0]=a.sdf?!0:
!1;b[1]=a.vvSizeMinMaxValue?!0:!1;b[2]=a.vvSizeScaleStops?!0:!1;b[3]=a.vvSizeFieldStops?!0:!1;b[4]=a.vvSizeUnitValue?!0:!1;b[5]=a.vvColor?!0:!1;b[6]=a.vvRotation?!0:!1;b[7]=a.vvOpacity?!0:!1;b[8]=a.visibility?!0:!1;b[9]=a.pattern?!0:!1;b[10]=a.heatmap?!0:!1;return b.reduce(function(a,b,c){b&&(a|=1<<c+2);return a},0)}function k(a){if(a.geometryType===f.WGLGeometryType.UNKNOWN)return-1;var b=l(a)<<3;return a.geometryType+b}Object.defineProperty(a,"__esModule",{value:!0});a.createTextMaterialInfo=function(a,
c,l){var e=new b.default,h=new d;h.geometryType=l;h.sdf=!0;h.pattern=!1;h.visibility=!1;h.heatmap=!1;e.texBindingInfo.push(new b.TexBindingInfo(2,a.page,"u_texture"));0===c?h.vvOpacity=h.vvSizeMinMaxValue=h.vvSizeScaleStops=h.vvSizeFieldStops=h.vvSizeUnitValue=h.vvColor=h.vvRotation=!1:(h.vvOpacity=0!==(c&f.WGLVVFlag.OPACITY),h.vvSizeMinMaxValue=0!==(c&f.WGLVVFlag.SIZE_MINMAX_VALUE),h.vvSizeScaleStops=0!==(c&f.WGLVVFlag.SIZE_SCALE_STOPS),h.vvSizeFieldStops=0!==(c&f.WGLVVFlag.SIZE_FIELD_STOPS),h.vvSizeUnitValue=
0!==(c&f.WGLVVFlag.SIZE_UNIT_VALUE),h.vvColor=0!==(c&f.WGLVVFlag.COLOR),h.vvRotation=0!==(c&f.WGLVVFlag.ROTATION));e.materialKey=k(h);e.materialKeyInfo=h;return e};a.createMaterialInfo=function(a,c,l){var e=new b.default,h=new d;h.geometryType=c;a?(a=a.spriteMosaicItem,h.sdf=a.sdf,h.pattern=!0,e.texBindingInfo.push(new b.TexBindingInfo(1,a.page,"u_texture"))):(h.sdf=!1,h.pattern=!1);0===l?h.vvOpacity=h.vvSizeMinMaxValue=h.vvSizeScaleStops=h.vvSizeFieldStops=h.vvSizeUnitValue=h.vvColor=h.vvRotation=
!1:(h.vvOpacity=0!==(l&f.WGLVVFlag.OPACITY),h.vvSizeMinMaxValue=0!==(l&f.WGLVVFlag.SIZE_MINMAX_VALUE),h.vvSizeScaleStops=0!==(l&f.WGLVVFlag.SIZE_SCALE_STOPS),h.vvSizeFieldStops=0!==(l&f.WGLVVFlag.SIZE_FIELD_STOPS),h.vvSizeUnitValue=0!==(l&f.WGLVVFlag.SIZE_UNIT_VALUE),h.vvColor=0!==(l&f.WGLVVFlag.COLOR),h.vvRotation=0!==(l&f.WGLVVFlag.ROTATION));h.visibility=!1;e.materialKey=k(h);e.materialKeyInfo=h;return e};a.getMaterialKey=k;a.getMaterialVariations=function(a){var b=a&7;a>>=3;return{geometryType:b,
programOptions:{id:0!==(a&1),highlight:0!==(a&2),isSDF:0!==(a&4),vvSizeMinMaxValue:0!==(a&8),vvSizeScaleStops:0!==(a&16),vvSizeFieldStops:0!==(a&32),vvSizeUnitValue:0!==(a&64),vvColor:0!==(a&128),vvRotation:0!==(a&256),vvOpacity:0!==(a&512),visibility:0!==(a&1024),pattern:0!==(a&2048),heatmap:0!==(a&4096)}}}})},"esri/views/2d/engine/webgl/MaterialKeyInfo":function(){define(["require","exports"],function(c,a){return function(){function a(){this.heatmap=this.pattern=this.visibility=this.vvOpacity=this.vvRotation=
this.vvColor=this.vvSizeUnitValue=this.vvSizeFieldStops=this.vvSizeScaleStops=this.vvSizeMinMaxValue=this.sdf=!1}a.prototype.copy=function(a){this.geometryType=a.geometryType;this.sdf=a.sdf;this.vvSizeMinMaxValue=a.vvSizeMinMaxValue;this.vvSizeScaleStops=a.vvSizeScaleStops;this.vvSizeFieldStops=a.vvSizeFieldStops;this.vvSizeUnitValue=a.vvSizeUnitValue;this.vvColor=a.vvColor;this.vvRotation=a.vvRotation;this.vvOpacity=a.vvOpacity;this.visibility=a.visibility;this.pattern=a.pattern;this.heatmap=a.heatmap};
a.prototype.hasVV=function(){void 0===this._hasVV&&(this._hasVV=this.vvColor||this.vvOpacity||this.vvRotation||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue);return this._hasVV};a.prototype.hasVVSize=function(){return this.vvSizeMinMaxValue||this.vvSizeFieldStops||this.vvSizeScaleStops||this.vvSizeUnitValue};a.prototype.hasVVColor=function(){return this.vvColor};a.prototype.hasVVRotation=function(){return this.vvRotation};a.prototype.hasVVOpacity=function(){return this.vvOpacity};
return a}()})},"esri/views/2d/engine/webgl/MaterialInfoUtils_updateMaterialVariations":function(){define(["require","exports"],function(c,a){return function(a,b){a.geometryType=b&7;b>>=3;a.sdf=0!==(b&4);a.vvSizeMinMaxValue=0!==(b&8);a.vvSizeScaleStops=0!==(b&16);a.vvSizeFieldStops=0!==(b&32);a.vvSizeUnitValue=0!==(b&64);a.vvColor=0!==(b&128);a.vvRotation=0!==(b&256);a.vvOpacity=0!==(b&512);a.visibility=0!==(b&1024);a.pattern=0!==(b&2048);a.heatmap=0!==(b&4096);return a}})},"esri/views/2d/engine/webgl/util/serializationUtils":function(){define(["require",
"exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});a.serializeList=function(a,b){if(null===b)a.push(0);else{a.push(b.length);for(var c=0;c<b.length;c++)b[c].serialize(a);return a}};a.deserializeList=function(a,b,c){for(var d=a.readInt32(),d=Array(d),f=0;f<d.length;f++)d[f]=b.deserialize(a,c);return d}})},"esri/views/2d/engine/webgl/mesh/factories/WGLMeshFactory":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../symbols/SimpleLineSymbol ../../definitions ../../enums ../../WGLDisplayObject ../MeshData ../VertexVector ./VVFactory ../templates/WGLLabelTemplate ../templates/WGLLineTemplate ../templates/WGLMarkerTemplate ../../util/vvFlagUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B){Object.defineProperty(a,"__esModule",{value:!0});var r=d.getLogger("esri.views.2d.engine.webgl.WGLMeshFactory"),A={esriGeometryPoint:"above-right above-center above-left center-center center-left center-right below-center below-left below-right".split(" "),esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:null,esriGeometryMultipoint:null,esriGeometryEnvelope:null};c=function(){function a(a,c,d,e,f,g,h,k,l){var n=this;this._labelsDebugTemplate=
null;this._materials=h;this._geometryType=a;this._idField=c;this._pixelRatio=f;this._vvFlags=B.getVVFlags(e);this._vvFactory=new q.default(e,d,g);this._vvBuf=new ArrayBuffer(16);this._vvBufU32=new Uint32Array(this._vvBuf);this._vvBufF32=new Float32Array(this._vvBuf);this._templateStore=k;l&&(this._validateLabelingInfo(l)?this._labelTemplates=l.map(function(a){return v.default.fromText(n._materials,0,a.symbol,f,a.labelPlacement)}):r.error(new b("mapview-labeling:unsupported-geometry","LabelingInfo failed validation - unable to create labels for layer.")))}
Object.defineProperty(a.prototype,"materials",{get:function(){return this._materials},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"templates",{get:function(){return this._templateStore},enumerable:!0,configurable:!0});a.prototype.createMeshData=function(a){var b=Array(5),c=!!B.getMarkerVVFlags(this._vvFlags),d=!!B.getFillVVFlags(this._vvFlags),f=!!B.getLineVVFlags(this._vvFlags,"esriGeometryPolyline"!==this._geometryType),h=!!B.getTextVVFlags(this._vvFlags);b[e.WGLGeometryType.MARKER]=
new g.VertexVectors(e.WGLGeometryType.MARKER,c,a);b[e.WGLGeometryType.FILL]=new g.VertexVectors(e.WGLGeometryType.FILL,d,a);b[e.WGLGeometryType.LINE]=new g.VertexVectors(e.WGLGeometryType.LINE,f,a);b[e.WGLGeometryType.TEXT]=new g.VertexVectors(e.WGLGeometryType.TEXT,h,a);b[e.WGLGeometryType.LABEL]=new g.VertexVectors(e.WGLGeometryType.LABEL,!1,this._labelTemplates&&0<this._labelTemplates.length?a:0);return new p.default([],b,this._materials)};a.prototype.analyze=function(a,b,c){for(var d=0;d<a.length;d++){var e=
a[d],f=-1;b&&(f=b.match(e,c));e.groupId=f}return this._templateStore.finalize().then(function(){return a})};a.prototype.write=function(a,b,c,d,e){var f=this._templateStore.getTemplateGroup(b.groupId),g=b.attributes[this._idField],k=new h(g),l=!!d&&!!this._labelTemplates&&d.has(g);if(f&&(b.geometry||b.centroid)){this._vvFactory.computeVV(this._vvBufF32,b,c);c=k.displayRecords;for(var p=0;p<f.length;p++){var n=f[p],q=a.get(n.geometryType);n.writeMesh(c,q,this._geometryType,g,b,this._pixelRatio,this._vvBufU32)}l&&
(f=this._getLabelReference(f),this._writeLabelMesh(k,a,g,b,e,d.get(g),f));a.pushDisplayObject(k)}};a.prototype._hasBadLabelClass=function(a,c){var d=a.labelPlacement,e=A[c];if(!e)return r.error(new b("mapview-labeling:unsupported-geometry-type","Unable to create labels for WebGL Feature Layer, "+c+" is not supported")),!0;e.some(function(a){return a===d})||(e=e[0],d&&r.warn("Found invalid label placement type "+d+" for "+c+". Defaulting to "+e),a.labelPlacement=e);return!1};a.prototype._validateLabelingInfo=
function(a){var b=this;return!a.some(function(a){return b._hasBadLabelClass(a,b._geometryType)})};a.prototype._getLabelReference=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c instanceof C.default)return c}return null};a.prototype._writeLabelMesh=function(a,b,c,d,e,f,g){for(var h=a.displayRecords,l=0,p=0,n=-1,q=-1,r=0;r<f.labelingInfo.length;r++){var t=f.labelingInfo[r],x=f.text[r],A=this._labelTemplates[t],u=b.get(A.geometryType),v=e.get(A.symbolId).glyphMosaicItems,y=h.length;A.bindReferenceTemplate(g);
var B=A.computeAnchor(this._geometryType,d);0===r&&(n=Math.floor(B[0]/k.COLLISION_BUCKET_SIZE),q=Math.floor(B[1]/k.COLLISION_BUCKET_SIZE));A.computeGlyphs(v,x)||(x=A.bounds,A.writeMesh(h,u,this._geometryType,c,d,this._pixelRatio,this._vvBufU32),a.anchor=B,a.addMetric(x,y,h.length-y,t),t=x.center,l=Math.max(x.halfWidth+Math.abs(t[0]),l),p=Math.max(x.halfHeight+Math.abs(t[1]),p))}a.metrics.length&&(c=2.5*Math.max(l,p),b=Math.ceil(Math.abs((c-a.anchor[0]%k.COLLISION_BUCKET_SIZE)/k.COLLISION_BUCKET_SIZE)),
c=Math.ceil(Math.abs((c-a.anchor[1]%k.COLLISION_BUCKET_SIZE)/k.COLLISION_BUCKET_SIZE)),a.xBucket=n,a.yBucket=q,a.xOverflow=b,a.yOverflow=c)};a.prototype._debugLabels=function(a,b,c,d,e){d={geometry:{paths:[[[d[0]+e.center[0]-e.width/2,d[1]+e.center[1]+e.height/2],[0,-e.height],[e.width,0],[0,e.height],[-e.width,0]]]},attributes:{}};e=this._getLabelDebugTemplate();b=b.get(e.geometryType);e.writeMesh(a,b,"esriGeometryPolyline",c,d,this._pixelRatio,null)};a.prototype._getLabelDebugTemplate=function(){this._labelsDebugTemplate||
(this._labelsDebugTemplate=this._createLabelsDebugTemplate());return this._labelsDebugTemplate};a.prototype._createLabelsDebugTemplate=function(){var a=new l({style:"solid",width:1,color:[255,0,0,1]});return y.default.fromSimpleLine(this._materials,0,a,null,this._pixelRatio)};return a}();a.default=c})},"esri/views/2d/engine/webgl/WGLDisplayObject":function(){define("require exports ../../../../core/libs/gl-matrix/vec2 ./WGLDisplayRecord ./collisions/Metric ./util/serializationUtils".split(" "),function(c,
a,f,b,d,l){return function(){function a(a){this.yOverflow=this.xOverflow=this.yBucket=this.xBucket=-1;this.id=a;this.displayRecords=[];this.metrics=[];this.anchor=null}a.prototype.copy=function(){var b=new a(this.id);b.set(this);return b};a.prototype.set=function(a){this.id=a.id;this.displayRecords=a.displayRecords;this.metrics=a.metrics;this.anchor=a.anchor;this.xBucket=a.xBucket;this.yBucket=a.yBucket;this.xOverflow=a.xOverflow;this.yOverflow=a.yOverflow};a.prototype.addMetric=function(a,b,c,f){this.metrics.push(new d.default(a,
{from:b,count:c},f))};a.prototype.serialize=function(a){a.push(this.id);l.serializeList(a,this.metrics);l.serializeList(a,this.displayRecords);this.anchor?(a.writeF32(this.anchor[0]),a.writeF32(this.anchor[1]),a.push(this.xBucket),a.push(this.yBucket),a.push(this.xOverflow),a.push(this.yOverflow)):(a.writeF32(0),a.writeF32(0));return a};a.deserialize=function(c,h){var e=h.store,g=c.readInt32();h=new a(g);e={id:g,store:e};g=l.deserializeList(c,d.default);g.length&&(h.metrics=g);h.displayRecords=l.deserializeList(c,
b,e);e=c.readF32();g=c.readF32();if(e||g)h.anchor=f.fromValues(e,g),h.xBucket=c.readInt32(),h.yBucket=c.readInt32(),h.xOverflow=c.readInt32(),h.yOverflow=c.readInt32();return h};return a}()})},"esri/core/libs/gl-matrix/vec2":function(){define(["./common"],function(c){var a={create:function(){var a=new c.ARRAY_TYPE(2);a[0]=0;a[1]=0;return a},clone:function(a){var b=new c.ARRAY_TYPE(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var d=new c.ARRAY_TYPE(2);d[0]=a;d[1]=b;return d},copy:function(a,
b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,c){a[0]=b;a[1]=c;return a},add:function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a},subtract:function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];return a}};a.sub=a.subtract;a.multiply=function(a,b,c){a[0]=b[0]*c[0];a[1]=b[1]*c[1];return a};a.mul=a.multiply;a.divide=function(a,b,c){a[0]=b[0]/c[0];a[1]=b[1]/c[1];return a};a.div=a.divide;a.ceil=function(a,b){a[0]=Math.ceil(b[0]);a[1]=Math.ceil(b[1]);return a};a.floor=function(a,b){a[0]=Math.floor(b[0]);
a[1]=Math.floor(b[1]);return a};a.min=function(a,b,c){a[0]=Math.min(b[0],c[0]);a[1]=Math.min(b[1],c[1]);return a};a.max=function(a,b,c){a[0]=Math.max(b[0],c[0]);a[1]=Math.max(b[1],c[1]);return a};a.round=function(a,b){a[0]=Math.round(b[0]);a[1]=Math.round(b[1]);return a};a.scale=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a};a.scaleAndAdd=function(a,b,c,l){a[0]=b[0]+c[0]*l;a[1]=b[1]+c[1]*l;return a};a.distance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return Math.sqrt(c*c+a*a)};a.dist=a.distance;
a.squaredDistance=function(a,b){var c=b[0]-a[0];a=b[1]-a[1];return c*c+a*a};a.sqrDist=a.squaredDistance;a.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};a.len=a.length;a.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};a.sqrLen=a.squaredLength;a.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};a.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};a.normalize=function(a,b){var c=b[0],f=b[1],c=c*c+f*f;0<c&&(c=1/Math.sqrt(c),a[0]=b[0]*c,a[1]=b[1]*c);return a};a.dot=
function(a,b){return a[0]*b[0]+a[1]*b[1]};a.cross=function(a,b,c){b=b[0]*c[1]-b[1]*c[0];a[0]=a[1]=0;a[2]=b;return a};a.lerp=function(a,b,c,l){var d=b[0];b=b[1];a[0]=d+l*(c[0]-d);a[1]=b+l*(c[1]-b);return a};a.random=function(a,b){b=b||1;var d=2*c.RANDOM()*Math.PI;a[0]=Math.cos(d)*b;a[1]=Math.sin(d)*b;return a};a.transformMat2=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b;a[1]=c[1]*d+c[3]*b;return a};a.transformMat2d=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[2]*b+c[4];a[1]=c[1]*d+c[3]*
b+c[5];return a};a.transformMat3=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[3]*b+c[6];a[1]=c[1]*d+c[4]*b+c[7];return a};a.transformMat4=function(a,b,c){var d=b[0];b=b[1];a[0]=c[0]*d+c[4]*b+c[12];a[1]=c[1]*d+c[5]*b+c[13];return a};a.forEach=function(){var c=a.create();return function(a,d,f,k,e,h){d||(d=2);f||(f=0);for(k=k?Math.min(k*d+f,a.length):a.length;f<k;f+=d)c[0]=a[f],c[1]=a[f+1],e(c,c,h),a[f]=c[0],a[f+1]=c[1];return a}}();a.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};a.exactEquals=
function(a,b){return a[0]===b[0]&&a[1]===b[1]};a.equals=function(a,b){var d=a[0];a=a[1];var f=b[0];b=b[1];return Math.abs(d-f)<=c.EPSILON*Math.max(1,Math.abs(d),Math.abs(f))&&Math.abs(a-b)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return a})},"esri/core/libs/gl-matrix/common":function(){define([],function(){var c={EPSILON:1E-6};c.ARRAY_TYPE="undefined"!==typeof Float32Array?Float32Array:Array;c.RANDOM=Math.random;c.ENABLE_SIMD=!1;c.SIMD_AVAILABLE=c.ARRAY_TYPE===Float32Array&&"SIMD"in this;c.USE_SIMD=
c.ENABLE_SIMD&&c.SIMD_AVAILABLE;c.setMatrixArrayType=function(a){c.ARRAY_TYPE=a};var a=Math.PI/180;c.toRadian=function(c){return c*a};c.equals=function(a,b){return Math.abs(a-b)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return c})},"esri/views/2d/engine/webgl/WGLDisplayRecord":function(){define(["require","exports","../../../../core/Logger","./MeshData","./Utils"],function(c,a,f,b,d){var l=f.getLogger("esri/views/2d/engine/webgl/WGLDisplayRecord");return function(){function a(a,b,c){this.id=
a;this.geometryType=b;this._materialInfo=c;this.meshData=null;this.indexCount=this.indexFrom=this.vertexCount=this.vertexFrom=this.zOrder=this.symbolLevel=0}Object.defineProperty(a.prototype,"sortKey",{get:function(){void 0===this._sortKey&&this._computeSortKey();return this._sortKey},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"materialInfo",{get:function(){return"number"===typeof this._materialInfo?(l.warn("Tried to read materialInfo, but found an index! Was materialInfo deserialized correctly?"),
null):this._materialInfo},set:function(a){this._materialInfo=a},enumerable:!0,configurable:!0});a.prototype.copy=function(){var b=new a(this.id,this.geometryType,this._materialInfo);b.vertexFrom=this.vertexFrom;b.vertexCount=this.vertexCount;b.indexFrom=this.indexFrom;b.indexCount=this.indexCount;b.zOrder=this.zOrder;b.symbolLevel=this.symbolLevel;b.meshData=this.meshData;return b};a.prototype.setMeshDataFromBuffers=function(a,c,f){var e=new b,h;for(h in c){for(var k=c[h].stride,l=c[h].data,p=[],
B=d.strideToPackingFactor(k),r=0;r<k*a.vertexCount/B;++r)p[r]=l[r+k*a.vertexFrom/B];e.vertexData.set(h,p)}for(r=e.indexData.length=0;r<a.indexCount;++r)e.indexData[r]=f[r+a.indexFrom]-a.vertexFrom;e.vertexCount=a.vertexCount;this.meshData=e};a.prototype.readMeshDataFromBuffers=function(a,c){this.meshData?this.meshData.clear():this.meshData=new b;for(var e in a){for(var f=a[e].stride,h=a[e].data,k=[],l=d.strideToPackingFactor(f),C=0;C<f*this.vertexCount/l;++C)k[C]=h[C+f*this.vertexFrom/l];this.meshData.vertexData.set(e,
k)}for(C=this.meshData.indexData.length=0;C<this.indexCount;++C)this.meshData.indexData[C]=c[C+this.indexFrom]-this.vertexFrom;this.meshData.vertexCount=this.vertexCount};a.prototype.writeMeshDataToBuffers=function(a,b,c,f){for(var e in b)for(var g=b[e].stride,h=this.meshData.vertexData.get(e),k=b[e].data,l=d.strideToPackingFactor(g),p=0;p<g*this.meshData.vertexCount/l;++p)k[p+g*a/l]=h[p];for(p=0;p<this.meshData.indexData.length;++p)f[p+c]=this.meshData.indexData[p]+a;this.vertexFrom=a;this.vertexCount=
this.meshData.vertexCount;this.indexFrom=c;this.indexCount=this.meshData.indexData.length};a.writeAllMeshDataToBuffers=function(a,b,c){for(var d=0,e=0,f=0;f<a.length;f++){var h=a[f];h.writeMeshDataToBuffers(d,b,e,c);d+=h.vertexCount;e+=h.indexCount}};a.prototype._computeSortKey=function(){this._sortKey=(this.symbolLevel&31)<<12|(this.zOrder&127)<<4|this.geometryType&7};a.prototype.serialize=function(a){a.push(this.geometryType);a.push(this._materialInfo);a.push(this.symbolLevel);a.push(this.zOrder);
a.push(this.vertexFrom);a.push(this.vertexCount);a.push(this.indexFrom);a.push(this.indexCount);return a};a.deserialize=function(b,c){var d=b.readInt32(),e=c.store&&c.store.get(b.readInt32())||b.readInt32();c=new a(c.id,d,e);c.symbolLevel=b.readInt32();c.zOrder=b.readInt32();c.vertexFrom=b.readInt32();c.vertexCount=b.readInt32();c.indexFrom=b.readInt32();c.indexCount=b.readInt32();return c};return a}()})},"esri/views/2d/engine/webgl/MeshData":function(){define(["require","exports"],function(c,a){return function(){function a(){this.vertexData=
new Map;this.vertexCount=0;this.indexData=[]}a.prototype.clear=function(){this.vertexData.clear();this.vertexCount=0;this.indexData=[]};a.prototype.update=function(a,c,f){for(var b in a)this.vertexData.set(b,a[b]);for(b in this.vertexData)null===a[b]&&this.vertexData.delete(b);this.vertexCount=c;this.indexData=f};return a}()})},"esri/views/2d/engine/webgl/collisions/Metric":function(){define(["require","exports","./BoundingBox"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,
b,c,e,f){void 0===e&&(e=255);void 0===f&&(f=0);this.bounds=a;this.range=b;this.index=c;this.minZoom=e;this.maxZoom=f}a.prototype.serialize=function(a){this.bounds.serialize(a);a.push(this.range.from);a.push(this.range.count);a.push(this.index);return a};a.deserialize=function(b){var c=f.default.deserialize(b),d=b.readInt32(),e=b.readInt32(),d={from:d,count:e};b=b.readInt32();return new a(c,d,b)};return a}();a.default=c})},"esri/views/2d/engine/webgl/collisions/BoundingBox":function(){define(["require",
"exports","../../../../../core/libs/gl-matrix/vec2"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,b,c,e){this.width=c;this.height=e;this.center=f.fromValues(a,b)}Object.defineProperty(a.prototype,"x",{get:function(){return this.center[0]},set:function(a){this.center[0]=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"y",{get:function(){return this.center[1]},set:function(a){this.center[1]=a},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,
"halfWidth",{get:function(){return this.width/2},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"halfHeight",{get:function(){return this.height/2},enumerable:!0,configurable:!0});a.prototype.serialize=function(a){a.writeF32(this.center[0]);a.writeF32(this.center[1]);a.push(this.width);a.push(this.height);return a};a.deserialize=function(b){var c=b.readF32(),d=b.readF32(),e=b.readInt32();b=b.readInt32();return new a(c,d,e,b)};return a}();a.default=c})},"esri/views/2d/engine/webgl/mesh/MeshData":function(){define(["require",
"exports","../util/serializationUtils","../util/Writer"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,b,c){this.displayObjects=a;this.vertexVectorsMap=b;this._materials=c}a.prototype.get=function(a){return this.vertexVectorsMap[a]};a.prototype.pushDisplayObject=function(a){this.displayObjects.push(a)};a.prototype.encode=function(a,c){var d=f.serializeList(new b.default(Uint32Array,this._guessSize()),this.displayObjects).buffer(),h=this._materials.serialize(new b.default(Uint32Array)).buffer(),
k={};c.push(d);c.push(h);for(var g in this.vertexVectorsMap){var l=this.vertexVectorsMap[g];k[g]={};l.transfer(k[g],c)}a.displayObjects=d;a.materialStore=h;a.vertexBuffersMap=k;this.destroy()};a.prototype.destroy=function(){this.displayObjects=this.vertexVectorsMap=null};a.prototype._guessSize=function(){for(var a=this.displayObjects,b=Math.min(a.length,4),c=0,d=0;d<b;d++)c=Math.max(c,a[d].displayRecords.length);return 2*(12*a.length+a.length*c*40)};return a}();a.default=c})},"esri/views/2d/engine/webgl/util/Writer":function(){define(["require",
"exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,c){this._pos=0;c=c?this._roundToNearest(c,a.BYTES_PER_ELEMENT):40;this._array=new ArrayBuffer(c);this._buffer=new a(this._array);this._ctor=a}Object.defineProperty(a.prototype,"length",{get:function(){return this._pos},enumerable:!0,configurable:!0});a.prototype._roundToNearest=function(a,c){a=Math.round(a);return a+(c-a%c)};a.prototype._ensureSize=function(a){if(this._pos+a>=this._buffer.length){a=
this._roundToNearest(1.5*(this._array.byteLength+a*this._buffer.BYTES_PER_ELEMENT),this._buffer.BYTES_PER_ELEMENT);a=new ArrayBuffer(a);var b=new this._ctor(a);b.set(this._buffer,0);this._array=a;this._buffer=b}};a.prototype.writeF32=function(a){this._ensureSize(1);var b=this._pos;(new Float32Array(this._array,4*this._pos,1))[0]=a;this._pos++;return b};a.prototype.push=function(a){this._ensureSize(1);var b=this._pos;this._buffer[this._pos++]=a;return b};a.prototype.writeRegion=function(a){this._ensureSize(a.length);
var b=this._pos;this._buffer.set(a,this._pos);this._pos+=a.length;return b};a.prototype.buffer=function(){var a=this._array.slice(0,4*this._pos);this.destroy();return a};a.prototype.destroy=function(){this._buffer=this._array=null};return a}();a.default=c})},"esri/views/2d/engine/webgl/mesh/VertexVector":function(){define(["require","exports","../Utils","../util/Writer"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});var d=function(){function a(a,b){this.data=a;this.stride=b;this.vertexCount=
0}a.prototype.transfer=function(a,b){var c=this.data.buffer();a.vertexCount=this.vertexCount;a.data=c;a.stride=this.stride;b.push(c)};return a}();a.default=d;c=function(){function a(a,c,h){this.geometryType=a;this.indexVector=new b.default(Uint32Array,h);this.namedVectors={};a=f.getStrides(a,c);for(var e in a){c=a[e];var g=void 0;switch(c%4){case 0:case 2:g=new b.default(Uint32Array,c/4*h);break;case 1:case 3:g=new b.default(Uint8Array,c*h)}this.namedVectors[e]=new d(g,c)}}a.prototype.get=function(a){return this.namedVectors[a].data};
a.prototype.transfer=function(a,b){var c=this.indexVector.buffer(),d={};b.push(c);for(var e in this.namedVectors){var f=this.namedVectors[e];d[e]={};f.transfer(d[e],b)}a.geometryType=this.geometryType;a.indexBuffer=c;a.namedBuffers=d;this.destroy()};a.prototype.destroy=function(){this.namedVectors=this.indexVector=null};return a}();a.VertexVectors=c})},"esri/views/2d/engine/webgl/mesh/factories/VVFactory":function(){define("require exports ../../../../../../core/Error ../../../../../../core/Logger ../../enums ../../Utils ../../visualVariablesUtils".split(" "),
function(c,a,f,b,d,l,k){Object.defineProperty(a,"__esModule",{value:!0});var e=b.getLogger("esri.views.2d.engine.webgl.mesh.VVFactory"),h;(function(a){a[a.NONE=0]="NONE";a[a.MISSING_DATA=1]="MISSING_DATA"})(h=a.VVError||(a.VVError={}));var p=function(){function a(){this._vvMap=new Map}a.prototype.set=function(a,b){this._vvMap.set(a,b)};a.prototype.getValue=function(a,b,c){return this._vvMap.has(a)?this._vvMap.get(a)(b,c):0};return a}();c=function(){function a(a,b,c){this._createVVFunctionMap(a,b,
c)}a.prototype.computeVV=function(a,b,c){if(!this._vvMap)return h.NONE;var e=this._vvMap.getValue(d.VVType.SIZE,b,c),f=this._vvMap.getValue(d.VVType.COLOR,b,c),g=this._vvMap.getValue(d.VVType.OPACITY,b,c);b=this._vvMap.getValue(d.VVType.ROTATION,b,c);a[d.VVType.SIZE]=this._isErrorVV(e)?NaN:e;a[d.VVType.COLOR]=this._isErrorVV(f)?NaN:f;a[d.VVType.OPACITY]=this._isErrorVV(g)?NaN:g;a[d.VVType.ROTATION]=this._isErrorVV(b)?NaN:b;return h.NONE};a.prototype._isErrorVV=function(a){return null===a||isNaN(a)||
Infinity===a};a.prototype._createVVFunctionMap=function(a,b,c){if(a&&a.length)for(var d=0;d<a.length;d++){var e=a[d],f=l.getVVType(e.type);if(e=this._createGetValueFunction(e,b,c))this._vvMap||(this._vvMap=new p),this._vvMap.set(f,e)}};a.prototype._createGetValueFunction=function(a,b,c){if(l.getVVType(a.type)===d.VVType.SIZE){var e=k.getTypeOfSizeVisualVariable(a);return e===d.WGLVVFlag.SIZE_SCALE_STOPS?null:this._createNormalizedFunction(a,b,c,e===d.WGLVVFlag.SIZE_UNIT_VALUE&&function(b){return k.getVisualVariableSizeValueRepresentationRatio(b,
a.valueRepresentation)})}return this._createNormalizedFunction(a,b,c)};a.prototype._createNormalizedFunction=function(a,b,c,d){var g=a.field;if(g){if("string"===typeof g){var h=a.normalizationField;return h?function(a){if(a.attributes[g]&&a.attributes[h])return a=a.attributes[g]/a.attributes[h],d?d(a):a}:d?function(a){return d(a.attributes[g])}:function(a){return a.attributes[g]}}if("function"===typeof g)return e.error(new f("mapview-rendering:unsupported-feature","Function field types are not currently supported. Please use a valueExpression instead")),
function(a){};e.error(new f("mapview-rendering:invalid-type","The field for a vv must be a string or a number, but got "+typeof g));return function(a){}}if(a.valueExpression&&"$view.scale"!==a.valueExpression)return l.createArcadeFunction({valueExpression:a.valueExpression,spatialReference:c,layer:{fields:b}},d);e.error("Unable to create a normalized function for visual variable: "+a);return function(a){}};return a}();a.default=c})},"esri/views/2d/engine/webgl/mesh/templates/WGLLabelTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../../../../../geometry/support/centroid ../../color ../../enums ../../fontUtils ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ./WGLTextTemplate".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C,B,r){Object.defineProperty(a,"__esModule",{value:!0});var A=b.getLogger("esri.views.2d.engine.webgl.WGLLabelTemplate"),u=24*1.2,n=q.i8888to32(255,255,255,255),t={xOffset:0,yOffset:0,width:0,height:0};c=function(a){function b(b,c,e){var f=a.call(this)||this;f.geometryType=p.WGLGeometryType.LABEL;f.vvFlags=0;f._textBoxVerticalOffset=0;f._textBoxHorizontalOffset=0;f._refTemplate=t;f._xOffset=c.xoffset;f._yOffset=-c.yoffset;f._decorationOffset=g.getFontDecorationOffset(c.font);
var l=c.haloColor;f._color=(c.color&&h.premultiplyAlphaRGBA(c.color))|0;var n=c.yoffset/c.font.size;f._shapingXOffset=c.xoffset/c.font.size*24;f._shapingYOffset=24*n;f._haloColor=(l&&h.premultiplyAlphaRGBA(l))|0;f._haloSize=10*d.pt2px(d.toPt(c.haloSize||0));f._textPropSize=d.pt2px(c.font.size);f._textPropAngle=c.angle*Math.PI/180;f._textPropHJustification="left"===c.horizontalAlignment?0:"right"===c.horizontalAlignment?1:.5;l=0;n=.5;switch(e){case "above-center":case "above-left":case "above-right":l=
-.5;n=0;break;case "below-center":case "below-left":case "below-right":l=.5,n=1}var q=0,r=.5;switch(e){case "above-left":case "center-left":case "below-left":q=-.5;r=1;break;case "above-right":case "center-right":case "below-right":q=.5,r=0}f._textPropHAnchorPlacement=r;f._textPropVAnchorPlacement=n;f._placementDirection=[q,l];f._materialStore=b;f.symbolId=c.id;f.anchor=k.create();return f}f(b,a);b.fromText=function(a,c,d,e,f,g){return new b(a,d,f)};Object.defineProperty(b.prototype,"bounds",{get:function(){return this._bounds},
enumerable:!0,configurable:!0});b.prototype.computeGlyphs=function(a,b){var c=b.text;if(!c||!c.length)return this._computedGlyphs=[],1;a=this._computeShaping(a,240,u,0,this._shapingXOffset,this._shapingYOffset,this._textPropHAnchorPlacement,this._textPropVAnchorPlacement,this._textPropHJustification).getShaping(c,b.rtl);isNaN(this._decorationOffset)||v.addDecoration(a,this._decorationOffset);b=Array(a.length);for(c=0;c<a.length;c++){var d=this._textPropAngle,e=this._textPropSize,f=this._haloSize,
g=this._materialStore.createGlyphMaterial(a[c].glyphMosaicItem,p.WGLGeometryType.LABEL,this.vvFlags);b[c]=r.ComputedGlyph.from(a[c],g,d,e,f)}this._computedGlyphs=b;if(!a||0===a.length)return 2;a=v.getBox(a);b=this._textPropSize/24;a.width*=b;a.height*=b;a.x*=b;a.y*=b;0>this._placementDirection[0]?this._textBoxHorizontalOffset=-a.x-a.width:0<this._placementDirection[0]&&(this._textBoxHorizontalOffset=-a.x);0>this._placementDirection[1]?this._textBoxVerticalOffset=-a.y:0<this._placementDirection[1]&&
(this._textBoxVerticalOffset=-a.y+a.height);c=a.width/2;d=a.height/2;this._textPropAngle&&(b=k.fromValues(-c,-d),c=k.fromValues(c,d),d=l.create(),l.rotate(d,d,this._textPropAngle),k.transformMat2d(b,b,d),k.transformMat2d(c,c,d),d=Math.abs(c[1]-b[1]),a.width=Math.abs(c[0]-b[0]),a.height=d);this._bounds=new C.default(a.x,a.y,a.width+10,a.height+10);a=this._placementDirection[1]*(this._refTemplate.height+this._bounds.height);this._bounds.center[0]=this._placementDirection[0]*(this._refTemplate.width+
this._bounds.width)+this._xOffset;this._bounds.center[1]=a+this._yOffset;return 0};b.prototype.bindReferenceTemplate=function(a){this._refTemplate=a?a:t};b.prototype.computeAnchor=function(a,b){var c=this._refTemplate.xOffset,d=this._refTemplate.yOffset;switch(a){case "esriGeometryPoint":b=b.geometry;a=b.x;b=b.y;this._setAnchor(a,b);break;case "esriGeometryMultipoint":a=b.geometry;b=this._computeAnchorMultipoint(a.points);a=b.x;b=b.y;this._setAnchor(a,b);break;case "esriGeometryPolygon":if(b.centroid){a=
b.centroid;this._setAnchor(a.x,a.y);break}a=b.geometry;b=this._computeAnchorRings(a.rings);if(!b)break;a=b.x;b=b.y;this._setAnchor(a,b);break;case "esriGeometryPolyline":a=b.geometry;b=this._computeAnchorRings(a.paths);if(!b)break;a=b.x;b=b.y;this._setAnchor(a,b);break;default:A.error("Unable to handle geometryType: "+a)}return k.fromValues(this.anchor[0]+c,this.anchor[1]+d)};b.prototype.writeMesh=function(a,b,c,d,e,f,g){c=b.indexVector;e=b.get("geometry");f=b.get("visibility");b=b.get("visibilityRange");
g=this._getOffset(e);var h=q.i8888to32(this._refTemplate.xOffset,-this._refTemplate.yOffset,this._placementDirection[0]*(this._refTemplate.width+10)+this._textBoxHorizontalOffset,this._placementDirection[1]*(this._refTemplate.height+10)+this._textBoxVerticalOffset);this._writeVertices(a,c,e,f,b,d,g,h,this.anchor[0],this.anchor[1])};b.prototype._setAnchor=function(a,b){this.anchor[0]=a;this.anchor[1]=b};b.prototype._computeAnchorMultipoint=function(a){return a.length&&a[0].length?{x:a[0][0],y:a[0][1]}:
null};b.prototype._computeAnchorRings=function(a){if(!a.length||!a[0].length||!a[0][0].length)return null;a=e.ringsCentroid(a,!1);return{x:a[0],y:a[1]}};b.prototype._computeShaping=function(a,b,c,d,e,f,g,h,k){return this._shaping=new v([a],240,u,0,[e,f],g,h,k)};b.prototype._getOffset=function(a){return a.length/5};b.prototype._writeVertices=function(a,b,c,d,e,f,g,h,k,l){var p=this._computedGlyphs,n=q.i1616to32(2*k,2*l);k=q.i1616to32(2*k+1,2*l);l=0;var t=q.i8888to32(0,(f&16711680)>>16,(f&65280)>>8,
f&255);if(this._haloSize)for(var r=0;r<p.length;r++,l+=4){var x=p[r].materialId,u=this._materialStore.get(x),x=new y(f,this.geometryType,x);x.vertexFrom=g+l;x.indexFrom=b.length;this._writeGlyph(x,c,d,e,t,k,this._haloColor,h,p[r],u);this._writeIndices(x,b,g+l);a.push(x)}for(r=0;r<p.length;r++,l+=4)x=p[r].materialId,u=this._materialStore.get(x),x=new y(f,this.geometryType,x),x.vertexFrom=g+l,x.indexFrom=b.length,this._writeGlyph(x,c,d,e,t,n,this._color,h,p[r],u),this._writeIndices(x,b,g+l),a.push(x)};
b.prototype._writeGlyph=function(a,b,c,d,e,f,g,h,k,l){b.push(f);b.push(g);b.push(k.vertexOffsetUpperLeft);b.push(k.texFontSizeUpperLeft);b.push(h);c.push(255);b.push(f);b.push(g);b.push(k.vertexOffsetUpperRight);b.push(k.texFontSizeUpperRight);b.push(h);c.push(255);b.push(f);b.push(g);b.push(k.vertexOffsetLowerLeft);b.push(k.texFontSizeLowerLeft);b.push(h);c.push(255);b.push(f);b.push(g);b.push(k.vertexOffsetLowerRight);b.push(k.texFontSizeLowerRight);b.push(h);c.push(255);d.push(n);d.push(n);a.vertexCount+=
4};b.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return b}(B.default);a.default=c})},"esri/core/libs/gl-matrix/mat2d":function(){define(["./common"],function(c){var a={create:function(){var a=new c.ARRAY_TYPE(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new c.ARRAY_TYPE(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];
a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},fromValues:function(a,b,d,l,k,e){var f=new c.ARRAY_TYPE(6);f[0]=a;f[1]=b;f[2]=d;f[3]=l;f[4]=k;f[5]=e;return f},set:function(a,b,c,l,k,e,h){a[0]=b;a[1]=c;a[2]=l;a[3]=k;a[4]=e;a[5]=h;return a},invert:function(a,b){var c=b[0],f=b[1],k=b[2],e=b[3],h=b[4];b=b[5];var p=c*e-f*k;if(!p)return null;p=1/p;a[0]=e*p;a[1]=-f*p;a[2]=-k*p;a[3]=c*p;a[4]=(k*b-e*h)*p;a[5]=(f*h-c*b)*p;return a},
determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,c){var d=b[0],f=b[1],e=b[2],h=b[3],p=b[4];b=b[5];var g=c[0],q=c[1],v=c[2],y=c[3],C=c[4];c=c[5];a[0]=d*g+e*q;a[1]=f*g+h*q;a[2]=d*v+e*y;a[3]=f*v+h*y;a[4]=d*C+e*c+p;a[5]=f*C+h*c+b;return a}};a.mul=a.multiply;a.rotate=function(a,b,c){var d=b[0],f=b[1],e=b[2],h=b[3],p=b[4];b=b[5];var g=Math.sin(c);c=Math.cos(c);a[0]=d*c+e*g;a[1]=f*c+h*g;a[2]=d*-g+e*c;a[3]=f*-g+h*c;a[4]=p;a[5]=b;return a};a.scale=function(a,b,c){var d=b[1],f=b[2],
e=b[3],h=b[4],p=b[5],g=c[0];c=c[1];a[0]=b[0]*g;a[1]=d*g;a[2]=f*c;a[3]=e*c;a[4]=h;a[5]=p;return a};a.translate=function(a,b,c){var d=b[0],f=b[1],e=b[2],h=b[3],p=b[4];b=b[5];var g=c[0];c=c[1];a[0]=d;a[1]=f;a[2]=e;a[3]=h;a[4]=d*g+e*c+p;a[5]=f*g+h*c+b;return a};a.fromRotation=function(a,b){var c=Math.sin(b);b=Math.cos(b);a[0]=b;a[1]=c;a[2]=-c;a[3]=b;a[4]=0;a[5]=0;return a};a.fromScaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=b[1];a[4]=0;a[5]=0;return a};a.fromTranslation=function(a,b){a[0]=1;a[1]=
0;a[2]=0;a[3]=1;a[4]=b[0];a[5]=b[1];return a};a.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};a.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};a.add=function(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];a[2]=b[2]+c[2];a[3]=b[3]+c[3];a[4]=b[4]+c[4];a[5]=b[5]+c[5];return a};a.subtract=function(a,b,c){a[0]=b[0]-c[0];a[1]=b[1]-c[1];a[2]=b[2]-c[2];a[3]=b[3]-c[3];a[4]=b[4]-c[4];
a[5]=b[5]-c[5];return a};a.sub=a.subtract;a.multiplyScalar=function(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*c;a[5]=b[5]*c;return a};a.multiplyScalarAndAdd=function(a,b,c,l){a[0]=b[0]+c[0]*l;a[1]=b[1]+c[1]*l;a[2]=b[2]+c[2]*l;a[3]=b[3]+c[3]*l;a[4]=b[4]+c[4]*l;a[5]=b[5]+c[5]*l;return a};a.exactEquals=function(a,b){return a[0]===b[0]&&a[1]===b[1]&&a[2]===b[2]&&a[3]===b[3]&&a[4]===b[4]&&a[5]===b[5]};a.equals=function(a,b){var d=a[0],f=a[1],k=a[2],e=a[3],h=a[4];a=a[5];var p=b[0],
g=b[1],q=b[2],v=b[3],y=b[4];b=b[5];return Math.abs(d-p)<=c.EPSILON*Math.max(1,Math.abs(d),Math.abs(p))&&Math.abs(f-g)<=c.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(k-q)<=c.EPSILON*Math.max(1,Math.abs(k),Math.abs(q))&&Math.abs(e-v)<=c.EPSILON*Math.max(1,Math.abs(e),Math.abs(v))&&Math.abs(h-y)<=c.EPSILON*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(a-b)<=c.EPSILON*Math.max(1,Math.abs(a),Math.abs(b))};return a})},"esri/views/2d/engine/webgl/fontUtils":function(){define(["require","exports"],
function(c,a){function f(a){a=a.toLowerCase().split(" ").join("-");switch(a){case "serif":return"noto-serif";case "sans-serif":return"arial-unicode-ms";case "monospace":return"ubuntu-mono";case "fantasy":return"cabin-sketch";case "cursive":return"redressed";default:return a}}Object.defineProperty(a,"__esModule",{value:!0});a.getFullyQualifiedFontName=function(a){var b;a:{if(a.weight)switch(a.weight.toLowerCase()){case "bold":case "bolder":b="-bold";break a}b=""}var c;a:{if(a.style)switch(a.style.toLowerCase()){case "italic":case "oblic":c=
"-italic";break a}c=""}b+=c;return f(a.family)+(0<b.length?b:"-regular")};a.getFontDecorationOffset=function(a){switch(a.decoration.toLowerCase()){case "underline":return 8;case "line-through":return-3}return NaN}})},"esri/views/2d/engine/webgl/TextShaping":function(){define(["require","exports","./Rect"],function(c,a,f){return function(){function a(a,b,c,e,f,p,g,q){this._glyphItems=a;this._maxWidth=b;this._lineHeight=c;this._letterSpacing=e;this._offset=f;this._hAnchor=p;this._vAnchor=g;this._justify=
q}a.prototype.getShaping=function(a,b){for(var c=this._letterSpacing,d=this._lineHeight,f=this._justify,l=this._maxWidth,g=[],q=0,v=0,y=0,C=0,B=-1,r=0,A=-1,u=a.length,n=0;n<u;n++){var t=a.charCodeAt(n);if(10===t){if(n!==u-1){if(B>=C){var q=g[B],x=q.x+q.glyphMosaicItem.metrics.advance,r=Math.max(x,r);f&&this._applyJustification(g,C,B);C=g.length}v=b?v-d:v+d;q=0;++y}}else{for(var x=void 0,D=0,G=this._glyphItems;D<G.length&&!(x=G[D][t]);D++);if(x){g.push({codePoint:t,x:q,y:v,glyphMosaicItem:x});q+=x.metrics.advance+
c;if(0<l&&q>l&&0<=A){D=A+1;x=g[D].x;r=Math.max(x,r);for(G=D;G<g.length;G++)g[G].y=b?g[G].y-d:g[G].y+d,g[G].x-=x;f&&this._applyJustification(g,C,A);v=b?v-d:v+d;q-=x;++y;C=D;A=-1}++B;32===t&&(A=g.length-1)}}}B>=C&&(q=g[B],r=Math.max(r,q.x+q.glyphMosaicItem.metrics.advance),f&&this._applyJustification(g,C,B));if(0<g.length)for(a=(f-this._hAnchor)*r,c=(-this._vAnchor*(y+1)+.5)*d,b&&y&&(c+=y*d),a+=this._offset[0],c+=this._offset[1],b=0;b<g.length;b++)d=g[b],d.x+=a,d.y+=c;return g};a.getBox=function(a){var b=
a.length;if(0!==b){for(var c=a[0].x+a[0].glyphMosaicItem.metrics.left,d=c,f=a[0].y,p=f,g=f,q=1;q<b;q++){var v=a[q],y=v.x+v.glyphMosaicItem.metrics.left;y<c&&(c=y);y>d&&(d=y);v=v.y;v<f&&(f=v);v>p&&(p=v);v!==g&&(d=Math.max(d,a[q-1].x+a[q-1].glyphMosaicItem.metrics.left+a[q-1].glyphMosaicItem.metrics.width),g=v)}d=Math.max(d,a[b-1].x+a[b-1].glyphMosaicItem.metrics.left+a[b-1].glyphMosaicItem.metrics.width);p+=12;return{x:c,y:p,width:d-c,height:p-(f-12)}}};a.addDecoration=function(a,b){var c=a.length;
if(0!==c){for(var d=a[0].x+a[0].glyphMosaicItem.metrics.left,h=a[0].y,l=1;l<c;l++){var g=a[l];if(g.y!==h){var q=a[l-1].x+a[l-1].glyphMosaicItem.metrics.left+a[l-1].glyphMosaicItem.metrics.width;a.push({codePoint:0,x:d,y:h+b-3,glyphMosaicItem:{rect:new f(4,0,4,8),metrics:{width:q-d,height:8,left:0,top:0,advance:0},page:0}});h=g.y;d=g.x+g.glyphMosaicItem.metrics.left}}c=a[c-1].x+a[c-1].glyphMosaicItem.metrics.left+a[c-1].glyphMosaicItem.metrics.width;a.push({codePoint:0,x:d,y:h+b-3,glyphMosaicItem:{rect:new f(4,
0,4,8),metrics:{width:c-d,height:8,left:0,top:0,advance:0},page:0}})}};a.prototype._applyJustification=function(a,b,c){for(var d=a[c],d=(d.x+d.glyphMosaicItem.metrics.advance)*this._justify;b<=c;b++)a[b].x-=d};return a}()})},"esri/views/2d/engine/webgl/Rect":function(){define(["require","exports"],function(c,a){return function(){function a(a,c,f,k){void 0===a&&(a=0);void 0===c&&(c=0);void 0===f&&(f=0);void 0===k&&(k=0);this.x=a;this.y=c;this.width=f;this.height=k}Object.defineProperty(a.prototype,
"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},"esri/views/2d/engine/webgl/mesh/templates/WGLMeshTemplate":function(){define(["require","exports","../../../../../../core/tsSupport/extendsHelper"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});c=function(){return function(){}}();a.default=c})},"esri/views/2d/engine/webgl/mesh/templates/WGLTextTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../color ../../definitions ../../enums ../../Geometry ../../number ../../TextShaping ../../WGLDisplayRecord ../../collisions/BoundingBox ./WGLMeshTemplate ../../util/BidiText".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C){Object.defineProperty(a,"__esModule",{value:!0});var B=b.getLogger("esri.views.2d.engine.webgl.WGLTextTemplate"),r=24*1.2,A=function(){function a(a,b,c,d,e,f,g,h,k){this.materialId=a;this.vertexOffsetUpperLeft=b;this.vertexOffsetUpperRight=c;this.vertexOffsetLowerLeft=d;this.vertexOffsetLowerRight=e;this.texFontSizeUpperLeft=f;this.texFontSizeUpperRight=g;this.texFontSizeLowerLeft=h;this.texFontSizeLowerRight=k}a.from=function(b,c,d,e,f){var g=b.glyphMosaicItem,
k=g.rect,l=g.metrics,n=Math.round(k.x/4),q=Math.round(k.y/4),g=n+Math.round(k.width/4),r=q+Math.round(k.height/4);if(b.codePoint){var t=b.x+0+l.left;b=b.y+-17-l.top;b=new h.Point(t-4,b-4);k=new h.Point(b.x+k.width,b.y+k.height)}else t=b.x,b=b.y,b=new h.Point(t,b),k=new h.Point(b.x+l.width,b.y+l.height);l=new h.Point(b.x,k.y);t=new h.Point(k.x,b.y);if(d){var x=Math.cos(d);d=Math.sin(d);b.rotate(x,d);k.rotate(x,d);l.rotate(x,d);t.rotate(x,d)}d=p.i1616to32(8*b.x,8*b.y);b=p.i1616to32(8*t.x,8*t.y);l=p.i1616to32(8*
l.x,8*l.y);k=p.i1616to32(8*k.x,8*k.y);t=p.i8888to32(n,q,e,f);q=p.i8888to32(g,q,e,f);n=p.i8888to32(n,r,e,f);e=p.i8888to32(g,r,e,f);return new a(c,d,b,l,k,t,q,n,e)};return a}();a.ComputedGlyph=A;c=function(a){function b(b,c,f){var g=a.call(this)||this;g.geometryType=e.WGLGeometryType.TEXT;var h=f.haloColor;g.color=(f.color&&l.premultiplyAlphaRGBA(f.color))|0;g.textSize=d.pt2px(f.font.size);var p=f.yoffset/f.font.size;g.shapingXOffset=f.xoffset/f.font.size*24;g.shapingYOffset=24*p;g.haloColor=(h&&l.premultiplyAlphaRGBA(h))|
0;g.haloSize=10*d.pt2px(d.toPt(f.haloSize||0));g.textPropColor=g.color||k.PICTURE_FILL_COLOR;g.textPropSize=d.pt2px(f.font.size);g.textPropAngle=f.angle*Math.PI/180;g.xOffset=d.pt2px(f.xoffset);g.yOffset=d.pt2px(f.yoffset);g.textPropHAnchor="left"===f.horizontalAlignment?0:"right"===f.horizontalAlignment?1:.5;g.textPropVAnchor="top"===f.verticalAlignment?0:"bottom"===f.verticalAlignment?1:.5;g.textPropHaloColor=g.haloColor||4294967295;g.textPropHaloSize=d.pt2px(d.toPt(f.haloSize||0));g._materialStore=
b;g.vvFlags=c;return g}f(b,a);b.fromText=function(a,c,d,e,f){a=new b(a,c,d);a.computeGlyphs(f,d.text,!1);return a};b.prototype.writeMesh=function(a,b,c,d,e,f,g){f=b.indexVector;var h=b.get("geometry");b=b.get("visibility");var k=this._getOffset(h);switch(c){case "esriGeometryPoint":e=e.geometry;c=e.x;e=e.y;this._writeVertices(a,f,h,b,k,d,c,e,g);break;case "esriGeometryPolygon":if(e.centroid){e=e.centroid;c=e.x;e=e.y;this._writeVertices(a,f,h,b,k,d,c,e,g);break}default:B.error("Unable to handle geometryType: "+
c)}};b.prototype.computeGlyphs=function(a,b,c){if(!b||!b.length)return this._computedGlyphs=[],null;a=this._computeShaping(a,240,r,0,this.shapingXOffset,this.shapingYOffset,this.textPropHAnchor,this.textPropVAnchor,.5);b=C.bidiText(b);b=a.getShaping(b[0],b[1]);a=Array(b.length);for(var d=0;d<b.length;d++){var f=this.textPropAngle,h=this.textSize,k=this.haloSize,l=this._materialStore.createGlyphMaterial(b[d].glyphMosaicItem,e.WGLGeometryType.TEXT,this.vvFlags);a[d]=A.from(b[d],l,f,h,k)}this._computedGlyphs=
a;if(!c)return null;c=g.getBox(b);c.width*=this.textSize/24;c.height*=this.textSize/24;return new v.default(c.x,c.y,c.width,c.height)};b.prototype._computeShaping=function(a,b,c,d,e,f,h,k,l){return this._shaping=new g([a],240,r,0,[e,f],h,k,.5)};b.prototype._getOffset=function(a){return a.length/(this.vvFlags?9:5)};b.prototype._writeVertices=function(a,b,c,d,e,f,g,h,k){var l=this._computedGlyphs,n=p.i1616to32(2*g,2*h);g=p.i1616to32(2*g+1,2*h);h=0;if(this.haloSize)for(var r=0;r<l.length;r++,h+=4){var t=
l[r].materialId,x=this._materialStore.get(t),t=new q(f,this.geometryType,t);t.vertexFrom=e+h;t.indexFrom=b.length;this._writeVertex(t,c,d,f,g,this.haloColor,l[r],x,k);this._writeIndices(t,b,e+h);a.push(t)}for(r=0;r<l.length;r++,h+=4)t=l[r].materialId,x=this._materialStore.get(t),t=new q(f,this.geometryType,t),t.vertexFrom=e+h,t.indexFrom=b.length,this._writeVertex(t,c,d,f,n,this.color,l[r],x,k),this._writeIndices(t,b,e+h),a.push(t)};b.prototype._writeVertex=function(a,b,c,d,e,f,g,h,k){b.push(e);b.push(d);
b.push(f);b.push(g.vertexOffsetUpperLeft);b.push(g.texFontSizeUpperLeft);this._writeVV(b,k,h);c.push(255);b.push(e);b.push(d);b.push(f);b.push(g.vertexOffsetUpperRight);b.push(g.texFontSizeUpperRight);this._writeVV(b,k,h);c.push(255);b.push(e);b.push(d);b.push(f);b.push(g.vertexOffsetLowerLeft);b.push(g.texFontSizeLowerLeft);this._writeVV(b,k,h);c.push(255);b.push(e);b.push(d);b.push(f);b.push(g.vertexOffsetLowerRight);b.push(g.texFontSizeLowerRight);this._writeVV(b,k,h);c.push(255);a.vertexCount+=
4};b.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(a.push(b[e.VVType.SIZE]),a.push(b[e.VVType.COLOR]),a.push(b[e.VVType.OPACITY]),a.push(b[e.VVType.ROTATION]))};b.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return b}(y.default);a.default=c})},"esri/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(c,a){Object.defineProperty(a,"__esModule",{value:!0});c=function(){function a(a,
c){this.x=a;this.y=c}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,c){return a===this.x&&c===this.y};a.prototype.isEqual=function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,c){this.x=a;this.y=c};a.prototype.normalize=function(){var a=this.x,c=this.y,a=Math.sqrt(a*a+c*c);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,c){this.x+=a;this.y+=c};a.prototype.assign=
function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,c){this.x=a.x+c.x;this.y=a.y+c.y};a.prototype.assignSub=function(a,c){this.x=a.x-c.x;this.y=a.y-c.y};a.prototype.rotate=function(a,c){var b=this.x,d=this.y;this.x=b*a-d*c;this.y=b*c+d*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,c=this.y;return Math.sqrt(a*a+c*c)};a.distance=function(a,c){var b=c.x-a.x;a=c.y-a.y;return Math.sqrt(b*b+a*a)};a.add=function(b,c){return new a(b.x+c.x,
b.y+c.y)};a.sub=function(b,c){return new a(b.x-c.x,b.y-c.y)};return a}();a.Point=c})},"esri/views/2d/engine/webgl/util/BidiText":function(){define(["require","exports","dojox/string/BidiEngine"],function(c,a,f){Object.defineProperty(a,"__esModule",{value:!0});var b=new f;a.bidiText=function(a){if(!b.hasBidiChar(a))return[a,!1];var c;c="rtl"===b.checkContextual(a)?"IDNNN":"ICNNN";return[b.bidiTransform(a,c,"VLYSN"),!0]}})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare",
"dojo/Stateful"],function(c,a,f){function b(a,c,f,g,h){var k=a;void 0===c&&(c=h.defInFormat);void 0===f&&(f=h.defOutFormat);void 0===g&&(g=h.defSwap);if(c!==f){var p,m=c.substring(0,1);p=c.substring(1,4);var n=f.substring(0,1),q=f.substring(1,4);"C"===p.charAt(0)&&(p=d(k),p="ltr"===p||"rtl"===p?p.toUpperCase():"L"===c.charAt(2)?"LTR":"RTL",c=m+p);"C"===q.charAt(0)&&(p=d(k),"rtl"===p?q="RTL":"ltr"===p?(k=k.split(""),k.reverse(),p=d(k.join("")),q=p.toUpperCase()):q="L"===f.charAt(2)?"LTR":"RTL",f=n+
q)}if(c===f)return a;n=c.substring(0,1);k=c.substring(1,4);m=f.substring(0,1);q=f.substring(1,4);h.inFormat=c;h.outFormat=f;h.swap=g;if("L"===n&&"VLTR"===f){if("LTR"===k)return h.dir=G,l(a,h);if("RTL"===k)return h.dir=F,l(a,h)}if("V"===n&&"V"===m)return h.dir="RTL"===k?F:G,e(a,h);if("L"===n&&"VRTL"===f)return h.dir="LTR"===k?G:F,a=l(a,h),e(a);if("VLTR"===c&&"LLTR"===f)return h.dir=G,l(a,h);if("V"===n&&"L"===m&&k!==q)return a=e(a),"RTL"===k?b(a,"LLTR","VLTR",g,h):b(a,"LRTL","VRTL",g,h);if("VRTL"===
c&&"LRTL"===f)return b(a,"LRTL","VRTL",g,h);if("L"===n&&"L"===m)return c=h.swap,h.swap=c.substr(0,1)+"N","RTL"===k?(h.dir=F,a=l(a,h),h.swap="N"+c.substr(1,2),h.dir=G,a=l(a,h)):(h.dir=G,a=l(a,h),h.swap="N"+c.substr(1,2),a=b(a,"VLTR","LRTL",h.swap,h)),a}function d(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?"ltr":"rtl":""}function l(a,b){a=a.split("");var c=[];k(a,c,b);if(0!==b.hiLevel&&b.swap.substr(0,1)!==b.swap.substr(1,2))for(var d=
0;d<a.length;d++)if(1===c[d]){var e=d,f;b:{f=a[d];for(var h=void 0,l=0,p=N.length-1;l<=p;)if(h=Math.floor((l+p)/2),f<N[h][0])p=h-1;else if(f>N[h][0])l=h+1;else{f=N[h][1];break b}}a[e]=f}g(2,a,c,b);g(1,a,c,b);n=c;return a.join("")}function k(a,b,c){var d=a.length,e=c.dir?fa:ca,f=null,g=null,h=null,f=0,g=g=null,k=-1,l=g=null,p=[],m=[];c.hiLevel=c.dir;c.lastArabic=!1;c.hasUbatAl=!1;c.hasUbatB=!1;c.hasUbatS=!1;for(g=0;g<d;g++){var l=g,h=a[g].charCodeAt(0),n=Ya[h>>8];p[l]=n<Ja?n:Oa[n-Ja][h&255]}for(l=
0;l<d;l++){m[l]=g=q(a,p,m,l,c);f=e[f][g];g=f&240;f&=15;b[l]=h=e[f][x];if(0<g){if(16===g)for(g=k;g<l;g++)b[g]=1;k=-1}if(g=e[f][D])-1===k&&(k=l);else if(-1<k){for(g=k;g<l;g++)b[g]=h;k=-1}p[l]===Ea&&(b[l]=0);c.hiLevel|=h}if(c.hasUbatS)for(a=0;a<d;a++)if(p[a]===na)for(b[a]=c.dir,e=a-1;0<=e;e--)if(p[e]===Sa)b[e]=c.dir;else break}function e(a,b){a=a.split("");if(b){var c=[];k(a,c,b);n=c}a.reverse();A.reverse();return a.join("")}function h(a){for(var b=0;b<K.length;b++)if(a>=K[b]&&a<=Y[b])return!0;return!1}
function p(a,b,c,d){for(;b*c<d&&y(a[b]);)b+=c;return b*c<d&&h(a[b])?!0:!1}function g(a,b,c,d){if(!(d.hiLevel<a))if(1!==a||d.dir!==F||d.hasUbatB){d=b.length;for(var e=0,f,g,h;e<d;){if(c[e]>=a){for(f=e+1;f<d&&c[f]>=a;)f++;for(g=f-1;e<g;e++,g--)h=b[e],b[e]=b[g],b[g]=h,h=A[e],A[e]=A[g],A[g]=h;e=f}e++}}else b.reverse(),A.reverse()}function q(a,b,c,d,e){return{UBAT_L:function(){e.lastArabic=!1;return ba},UBAT_R:function(){e.lastArabic=!1;return ea},UBAT_ON:function(){return sa},UBAT_AN:function(){return ra},
UBAT_EN:function(){return e.lastArabic?ra:oa},UBAT_AL:function(){e.lastArabic=!0;e.hasUbatAl=!0;return ea},UBAT_WS:function(){return sa},UBAT_CS:function(){var a,f;if(1>d||d+1>=b.length||(a=c[d-1])!==oa&&a!==ra||(f=b[d+1])!==oa&&f!==ra)return sa;e.lastArabic&&(f=ra);return f===a?f:sa},UBAT_ES:function(){return(0<d?c[d-1]:Ea)===oa&&d+1<b.length&&b[d+1]===oa?oa:sa},UBAT_ET:function(){if(0<d&&c[d-1]===oa)return oa;if(e.lastArabic)return sa;for(var a=d+1,f=b.length;a<f&&b[a]===Ka;)a++;return a<f&&b[a]===
oa?oa:sa},UBAT_NSM:function(){if("VLTR"===e.inFormat){for(var f=b.length,g=d+1;g<f&&b[g]===Na;)g++;if(g<f&&(f=a[d],g=b[g],(1425<=f&&2303>=f||64286===f)&&(g===ea||g===Ca)))return ea}return 1>d||b[d-1]===Ea?sa:c[d-1]},UBAT_B:function(){e.lastArabic=!0;e.hasUbatB=!0;return e.dir},UBAT_S:function(){e.hasUbatS=!0;return sa},UBAT_LRE:function(){e.lastArabic=!1;return sa},UBAT_RLE:function(){e.lastArabic=!1;return sa},UBAT_LRO:function(){e.lastArabic=!1;return sa},UBAT_RLO:function(){e.lastArabic=!1;return sa},
UBAT_PDF:function(){e.lastArabic=!1;return sa},UBAT_BN:function(){return sa}}[R[b[d]]]()}function v(a,b){for(var c=0;c<O.length;c++)if(a===O[c])return b[c];return a}function y(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function C(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function B(a,b){for(var c=0;c<Z.length;c++)if(a===Z[c])return b[c];return a}function r(a,b,c,d){for(var e=0;e<a.length;e++)if(a[e]>b||!c&&a[e]===b)a[e]+=d}c.getObject("string",!0,
dojox);c=a("dojox.string.BidiEngine",f,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],targetToSource:[],levels:[],bidiTransform:function(a,c,d){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var e=this.sourceToTarget,f=this.targetToSource,g=a.length;A=[];n=[];for(var k=0;k<g;k++)e[k]=k,f[k]=k,A[k]=k;if(!this.checkParameters(c,d))return a;c=this.inputFormat;d=this.outputFormat;var e=a,e=t,k=C(c.charAt(1)),f=C(d.charAt(1)),l="I"===c.charAt(0)?"L":c.charAt(0),g="I"===d.charAt(0)?
"L":d.charAt(0),k=l+k,f=g+f,g=c.charAt(2)+d.charAt(2);e.defInFormat=k;e.defOutFormat=f;e.defSwap=g;a=b(a,k,f,g,e);e=!1;if("R"===d.charAt(1))e=!0;else if("C"===d.charAt(1)||"D"===d.charAt(1))e=this.checkContextual(a);f=this.sourceToTarget=A;g=Array(f.length);for(k=0;k<f.length;k++)g[f[k]]=k;u=this.targetToSource=g;if(c.charAt(3)===d.charAt(3))e=a;else if("S"===d.charAt(3))if(c=e,d=!0,0===a.length)e=void 0;else{void 0===c&&(c=!0);void 0===d&&(d=!0);a=String(a);a=a.split("");var m=0,f=1,e=a.length;c||
(m=a.length-1,f=-1,e=1);for(var g=e,k=d,q=0,e=[],l=0;m*f<g;m+=f)if(h(a[m])||y(a[m])){var x;if(x="\u0644"===a[m])b:{for(var z=a,F=m+f,D=f,E=g;F*D<E&&y(z[F]);)F+=D;x=" ";if(F*D<E)for(x=z[F],z=0;z<Z.length;z++)if(Z[z]===x){x=!0;break b}x=!1}if(x){a[m]=0===q?B(a[m+f],ia):B(a[m+f],S);m+=f;q=a;x=m;z=f;for(F=g;x*z<F&&y(q[x]);)x+=z;x*z<F&&(q[x]=" ");k&&(e[l]=m,l++);q=0}else{x=a[m];if(1===q){z=m;if(p(a,m+f,f,g))b:for(F=a[m],D=0;D<O.length;D++){if(F===O[D]){F=qa[D];break b}}else F=v(a[m],T);a[z]=F}else!0===
p(a,m+f,f,g)?a[m]=v(a[m],X):a[m]=v(a[m],ha);y(x)||(q=1);b:{for(z=0;z<M.length;z++)if(M[z]===x){x=!0;break b}x=!1}!0===x&&(q=0)}}else q=0;f="";for(g=0;g<a.length;g++){if(k=d){b:{for(k=0;k<e.length;k++)if(e[k]===g)break b;k=-1}k=-1<k}k?(r(u,g,!c,-1),A.splice(g,1)):f+=a[g]}e=f}else if(c=a,d=e,a=!0,0===c.length)e=void 0;else for(void 0===a&&(a=!0),void 0===d&&(d=!0),c=String(c),e="",f=[],f=c.split(""),g=0;g<c.length;g++)k=!1,"\ufe70"<=f[g]&&"\ufeff">f[g]?(l=c.charCodeAt(g),"\ufef5"<=f[g]&&"\ufefc">=f[g]?
(d?(0<g&&a&&" "===f[g-1]?e=e.substring(0,e.length-1)+"\u0644":(e+="\u0644",k=!0),e+=Z[(l-65269)/2]):(e+=Z[(l-65269)/2],e+="\u0644",g+1<c.length&&a&&" "===f[g+1]?g++:k=!0),k&&(r(u,g,!0,1),A.splice(g,0,A[g]))):e+=aa[l-65136]):e+=f[g];this.sourceToTarget=A;this.targetToSource=u;this.levels=n;return e},_inputFormatSetter:function(a){if(!J.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=a},_outputFormatSetter:function(a){if(!J.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");
this.outputFormat=a},checkParameters:function(a,b){a?this.set("inputFormat",a):a=this.inputFormat;b?this.set("outputFormat",b):b=this.outputFormat;return a===b?!1:!0},checkContextual:function(a){a=d(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(Xa){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return E.test(a)}});var A=[],u=[],n=[],t={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,
hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},x=5,D=6,G=0,F=1,J=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,E=/[\u0591-\u06ff\ufb1d-\ufefc]/,N=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],
["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],Z=["\u0622","\u0623","\u0625","\u0627"],ia=["\ufef5","\ufef7","\ufef9","\ufefb"],S=["\ufef6","\ufef8","\ufefa","\ufefc"],O="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),
ha="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),T="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),
qa="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),X="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),
M="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),aa="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
K=["\u0621","\u0641"],Y=["\u063a","\u064a"],ca=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],fa=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],ba=0,ea=1,oa=2,ra=3,sa=4,Ea=5,na=6,Ca=7,Sa=8,Ka=11,Na=12,R="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),Ja=100;a=ba;f=ea;var W=oa,ya=ra,m=sa,ua=Ea,Ta=na,z=Ca,Ha=
Sa,da=Ka,H=Na,Ya=[Ja+0,a,a,a,a,Ja+1,Ja+2,Ja+3,f,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,Ja+4,m,m,m,a,m,a,m,a,m,m,m,a,a,m,m,a,a,a,a,a,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,a,a,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,a,a,a,a,a,a,a,a,a,a,a,a,a,a,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,a,a,m,m,a,a,m,m,a,a,m,m,m,m,m,m,m,m,m,
m,m,m,m,m,m,m,m,m,m,m,m,m,m,a,a,a,Ja+5,z,z,Ja+6,Ja+7],Oa=[[18,18,18,18,18,18,18,18,18,Ta,ua,Ta,Ha,ua,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ua,ua,ua,Ta,Ha,m,m,da,da,da,m,m,m,m,m,10,9,10,9,9,W,W,W,W,W,W,W,W,W,W,9,m,m,m,m,m,m,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,m,m,m,m,m,m,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,m,m,m,m,18,18,18,18,18,18,ua,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,m,da,da,da,da,m,m,m,m,a,m,m,18,m,m,da,da,W,W,m,a,
m,m,m,W,a,m,m,m,m,m,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,m,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,m,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,m,m,m,m,m,m,m,m,m,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,m,m,a,a,a,a,a,a,a,m,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,m,a,m,m,m,m,m,m,m,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,
H,H,H,H,H,H,H,H,H,H,H,H,H,H,f,H,f,H,H,f,H,H,f,H,m,m,m,m,m,m,m,m,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,m,m,m,m,m,f,f,f,f,f,m,m,m,m,m,m,m,m,m,m,m],[ya,ya,ya,ya,m,m,m,m,z,da,da,z,9,z,m,m,H,H,H,H,H,H,H,H,H,H,H,z,m,m,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,ya,ya,ya,ya,ya,ya,ya,ya,ya,ya,da,ya,ya,z,z,z,H,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,
z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,H,H,H,H,H,H,H,ya,m,H,H,H,H,H,H,z,z,H,H,m,H,H,H,H,z,z,W,W,W,W,W,W,W,W,W,W,z,z,z,z,z,z],[z,z,z,z,z,z,z,z,z,z,z,z,z,z,m,z,z,H,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,m,m,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,
z,z,z,z,z,z,z,z,z,z,z,z,z,H,H,H,H,H,H,H,H,H,H,H,z,m,m,m,m,m,m,m,m,m,m,m,m,m,m,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,f,H,H,H,H,H,H,H,H,H,f,f,m,m,m,m,f,m,m,m,m,m],[Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,Ha,18,18,18,a,f,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,Ha,ua,13,14,15,16,17,9,da,da,da,da,da,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,9,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,Ha,18,18,18,18,18,m,m,m,m,m,18,18,18,18,18,18,W,a,m,m,W,W,W,W,W,W,10,10,m,m,m,
a,W,W,W,W,W,W,W,W,W,W,10,10,m,m,m,m,a,a,a,a,a,a,a,a,a,a,a,a,a,m,m,m,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,da,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m],[a,a,a,a,a,a,a,m,m,m,m,m,m,m,m,m,m,m,m,a,a,a,a,a,m,m,m,m,m,f,H,f,f,f,f,f,f,f,f,f,f,10,f,f,f,f,f,f,f,f,f,f,f,f,f,m,f,f,f,f,f,m,f,m,f,f,m,f,f,m,f,f,f,f,f,f,f,f,f,f,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,
z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z],[H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,H,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,H,H,H,H,H,H,H,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,9,m,9,m,m,9,m,m,m,m,m,m,m,m,m,da,m,m,10,
10,m,m,m,m,m,da,da,m,m,m,m,m,z,z,z,z,z,m,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,z,m,m,18],[m,m,m,da,da,da,m,m,m,m,m,10,9,10,9,9,W,W,W,W,W,W,W,W,W,W,9,m,m,m,m,m,m,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,m,m,m,m,m,m,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,m,m,m,m,m,m,m,m,m,m,m,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,m,m,m,a,a,a,a,a,a,m,m,a,a,a,a,a,a,m,m,a,a,a,a,a,a,m,m,a,a,a,m,m,m,da,da,m,m,m,da,da,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m,m]];return c})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(c,a,f,b){return c("dojo.Stateful",null,{_attrPairNames:{},
_getAttrNames:function(a){var b=this._attrPairNames;return b[a]?b[a]:b[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,b){return"function"===typeof this[b.g]?this[b.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,c){if("object"===typeof a){for(var d in a)a.hasOwnProperty(d)&&"_watchCallbacks"!=d&&this.set(d,a[d]);return this}d=this._getAttrNames(a);var e=this._get(a,d);d=this[d.s];var f;"function"===typeof d?f=
d.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=c;if(this._watchCallbacks){var l=this;b(f,function(){l._watchCallbacks(a,e,c)})}return this},_changeAttrValue:function(a,b){var c=this.get(a);this[a]=b;this._watchCallbacks&&this._watchCallbacks(a,c,b);return this},watch:function(a,b){var c=this._watchCallbacks;if(!c)var d=this,c=this._watchCallbacks=function(a,b,e,f){var g=function(c){if(c){c=c.slice();for(var f=0,g=c.length;f<g;f++)c[f].call(d,a,b,e)}};g(c["_"+a]);f||g(c["*"])};b||"function"!==
typeof a?a="_"+a:(b=a,a="*");var h=c[a];"object"!==typeof h&&(h=c[a]=[]);h.push(b);a={};a.unwatch=a.remove=function(){var a=f.indexOf(h,b);-1<a&&h.splice(a,1)};return a}})})},"esri/views/2d/engine/webgl/mesh/templates/WGLLineTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../color ../../definitions ../../enums ../../enums ../../LineTess ../../number ../../TileClipper ../../Utils ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y){Object.defineProperty(a,"__esModule",{value:!0});var C=b.getLogger("esri.views.2d.engine.webgl.WGLLineTemplate"),B=h.allocTriangles(20),r=h.allocTriangles(20),A=[h.allocExtrudeVectors(),h.allocExtrudeVectors()],u=h.allocExtrudeVectors(),n=l.TILE_SIZE+8,t=new h.Tessellator({distanceAlongCorrection:!0}),x=new g.TileClipper(0,0,0,1,8);x.setExtent(l.TILE_SIZE);c=function(a){function b(b,c,d,e,f,g,h,l,p,n,q){var r=a.call(this)||this;r.capType=g;r.joinType=h;r.fillColor=
l;r.tl=p;r.br=n;r.hasPattern=q;r.geometryType=k.WGLGeometryType.LINE;r.halfWidth=0<e?.5*(e+1/f):0;r._materialStore=b;r.vvFlags=c;r.materialId=r._materialStore.createSpriteMaterial(d,r.geometryType,c);return r}f(b,a);b.fromSimpleLine=function(a,c,e,f,g){var h=e.color,k=q.getCapType(e.cap||"round"),l=q.getJoinType(e.join||"round"),h=h&&"none"!==e.style&&d.premultiplyAlphaRGBA(h)||0;"none"===e.style&&(h=0);if(!f)return new b(a,c,f,e.width,g,k,l,h,0,0,!1);var n=f.rect,r=n.x+1+f.width,t=n.y+1+f.height,
n=p.i1616to32(n.x+1,n.y+1),r=p.i1616to32(r,t);return new b(a,c,f,e.width,g,k,l,h,n,r,!0)};b.fromPictureLineSymbol=function(a,b,c,d){C.error("PictureLineSymbol support does not exist!");return null};b.prototype.writeMesh=function(a,b,c,d,f,g,h){if(this.vvFlags&e.WGLVVFlag.COLOR||0!==this.fillColor){g=this._materialStore.get(this.materialId);var k=b.indexVector,l=b.get("geometry");b=b.get("visibility");var p=this.halfWidth,n=new v(d,this.geometryType,this.materialId),q=this._getOffset(l,g);n.vertexFrom=
q;n.indexFrom=k.length;a.push(n);switch(c){case "esriGeometryPolyline":a=this._clipLines(f.geometry.paths);this._write(n,k,l,b,q,d,p,a,g,h);break;case "esriGeometryPolygon":a=this._clipLines(f.geometry.rings);this._write(n,k,l,b,q,d,p,a,g,h);break;default:C.error("Unable to handle geometryType: "+c)}}};b.prototype._clipLines=function(a){for(var b=[],c=!1,d=0;d<a.length;){var e=[],f=a[d];x.reset(2);var g=f[0],h=g[0],g=g[1];if(c)x.moveTo(h,g);else{if(-8>h||h>n||-8>g||g>n){c=!0;continue}e.push({x:h,
y:g})}for(var k=!1,l=f.length,p=1;p<l;++p)if(h+=f[p][0],g+=f[p][1],c)x.lineTo(h,g);else{if(-8>h||h>n||-8>g||g>n){k=!0;break}e.push({x:h,y:g})}if(k)c=!0;else{if(c){if(e=x.resultWithStarts())for(c=0;c<e.length;c++)b.push(e[c])}else b.push({line:e,start:0});d++;c=!1}}return b};b.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?11:8;return a.length/b};b.prototype._write=function(a,b,c,d,e,f,g,k,l,p){for(var n=0,q=0;q<k.length;q++){var r=k[q],x=r.line;if(!(2>x.length))for(var v=x[0],y=x[x.length-
1],C=y.x-v.x,v=y.y-v.y,C=1E-6>C*C+v*v,F=r.start%65535,r=A[1],v=0;v<x.length;v++){var D=x[v],y=r===A[v%2]?A[(v+1)%2]:A[v%2],T=0===v,E=v===x.length-1;E&&C&&!this.hasPattern?h.copyExtrudeVectors(y,u):(this._computeExtrudeVectors(y,v,x,C),n+=this._writeVertices(c,d,f,g,D.x,D.y,y,F,n,l,p),!y.capCenter||C&&E||this._writePieIndices(a,b,e,y),C&&T&&!this.hasPattern&&h.copyExtrudeVectors(u,y));T||this._writeBridgeIndices(a,b,e,r,y);if(!E){var E=x[v+1],T=[E.x-D.x,E.y-D.y],ha=h.length(T),T=[T[0]/ha,T[1]/ha],
ha=F+ha;if(65535<ha){var G=(65535-F)/(ha-F),F=D.x+(E.x-D.x)*G,D=D.y+(E.y-D.y)*G,E=r;t.buttCap(E,T,T);n+=this._writeVertices(c,d,f,g,F,D,E,65535,n,l,p);t.bridge(B,y,E);this._writeBridgeIndices(a,b,e,y,E);t.buttCap(E,T,T);F=ha-65535}else F=ha,r=y}}}a.vertexCount=n};b.prototype._writeVertices=function(a,b,c,d,e,f,g,h,k,l,n){var q=0,r=p.i1616to32(e,f),t=g.vectors;g=t.items;for(t=t.count;q<t;++q){var x=g[q].vector,u=x[0],x=x[1],A=g[q].texCoords,v=A[0],y=A[1],B=g[q].direction,A=B[0],C=B[1],B=p.i1616to32(h,
31*d),u=p.i8888to32(Math.round(31*u),Math.round(31*x),Math.round(31*v),Math.round(31*y)),x=p.i8888to32(Math.round(31*A),Math.round(31*C),0,0);a.push(r);a.push(c);a.push(this.fillColor);a.push(u);a.push(B);a.push(this.tl);a.push(this.br);a.push(x);this._writeVV(a,n,l);b.push(255);g[q].base={index:k+q,point:[e,f]}}return q};b.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(a.push(b[k.VVType.SIZE]),a.push(b[k.VVType.COLOR]),a.push(b[k.VVType.OPACITY]))};b.prototype._writeBridgeIndices=
function(a,b,c,d,e){t.bridge(B,d,e);for(d=0;d<B.count;++d)e=B.items[d],b.push(c+e.v1.base.index),b.push(c+e.v2.base.index),b.push(c+e.v3.base.index),a.indexCount+=3};b.prototype._writePieIndices=function(a,b,c,d){t.pie(r,d);for(d=0;d<r.count;++d){var e=r.items[d];b.push(c+e.v1.base.index);b.push(c+e.v2.base.index);b.push(c+e.v3.base.index);a.indexCount+=3}};b.prototype._computeExtrudeVectors=function(a,b,c,d){var e=c[b],f=[void 0,void 0],g=[void 0,void 0];if(0<b&&b<c.length-1){var k=c[(b+c.length-
1)%c.length],l=c[(b+1)%c.length];h.normalize(f,[e.x-k.x,e.y-k.y]);h.normalize(g,[l.x-e.x,l.y-e.y])}else if(0===b)l=c[(b+1)%c.length],h.normalize(g,[l.x-e.x,l.y-e.y]),d?(k=c[c.length-2],h.normalize(f,[e.x-k.x,e.y-k.y])):f=g;else if(b===c.length-1)k=c[(b+c.length-1)%c.length],h.normalize(f,[e.x-k.x,e.y-k.y]),d?(k=c[1],h.normalize(g,[k.x-e.x,k.y-e.y])):g=f;else{console.error("Vertex index 'i' out of range.");return}d||0!==b?d||b!==c.length-1?this._computeJoinExtrudeVectors(a,f,g):this._computeCapExtrudeVectors(a,
f,g,h.CapPosition.END):this._computeCapExtrudeVectors(a,f,g,h.CapPosition.START)};b.prototype._computeCapExtrudeVectors=function(a,b,c,d){switch(this.capType){case k.CapType.BUTT:t.buttCap(a,b,c);break;case k.CapType.ROUND:var e=h.getNumberOfSlices(Math.PI);t.roundCap(a,b,c,d,e,d===h.CapPosition.START?-1:1);break;case k.CapType.SQUARE:t.squareCap(a,b,c,d);break;default:C.error("Encountered unknown cap type: "+this.capType+", defaulting to BUTT"),t.buttCap(a,b,c)}};b.prototype._computeJoinExtrudeVectors=
function(a,b,c){var d=h.getRads(b,c);if(d>Math.PI-.05)t.rectJoin(a,b,c);else if(this.joinType===k.JoinType.MITER||.1>d).05>d?t.fastMiterJoin(a,b,c):d<h.MITER_SAFE_RADS?t.miterJoin(a,b,c):t.bevelJoin(a,b,c,h.SYSTEM_MAG_LIMIT);else if(this.joinType===k.JoinType.BEVEL)t.bevelJoin(a,b,c,1);else if(this.joinType===k.JoinType.ROUND){var e=h.getNumberOfSlices(d);2.3>d?2>e||.5>d?t.bevelJoin(a,b,c,1):t.roundJoin(a,b,c,e):t.unitRoundJoin(a,b,c,e)}};return b}(y.default);a.default=c})},"esri/views/2d/engine/webgl/LineTess":function(){define(["require",
"exports"],function(c,a){function f(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push(void 0);return b}function b(a,b){n.vector[0]=a.vector[0];n.vector[1]=a.vector[1];n.texCoords[0]=a.texCoords[0];n.texCoords[1]=a.texCoords[1];n.direction[0]=a.direction[0];n.direction[1]=a.direction[1];n.base=a.base;a.vector[0]=b.vector[0];a.vector[1]=b.vector[1];a.texCoords[0]=b.texCoords[0];a.texCoords[1]=b.texCoords[1];a.direction[0]=b.direction[0];a.direction[1]=b.direction[1];a.base=b.base;b.vector[0]=
n.vector[0];b.vector[1]=n.vector[1];b.texCoords[0]=n.texCoords[0];b.texCoords[1]=n.texCoords[1];b.direction[0]=n.direction[0];b.direction[1]=n.direction[1];b.base=n.base}function d(a,b){return a[0]*b[0]+a[1]*b[1]}function l(a){return Math.sqrt(d(a,a))}function k(a,b){var c=l(b);a[0]=b[0]/c;a[1]=b[1]/c;return a}function e(a,b){a[0]=-b[1];a[1]=b[0];return a}function h(a,b){return a[0]*b[1]-a[1]*b[0]}function p(a,b){a[0]=-b[0];a[1]=-b[1];return a}function g(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a}function q(a,
b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a}function v(a,b){a=d(a,b);return.999<a?0:-.999>a?Math.PI:Math.acos(a)}function y(a,b,c,d,e){if(0===d)a.count=0;else{var f=l(b),h=g(t[0],b,1/f);c=g(t[1],c,1/f);h=v(h,c);h=(e?-1:1)*h/d;e=Math.cos(h);h=Math.sin(h);c=b[0];var k=b[1];for(b=0;b<d-1;++b)f=c,c=e*f-h*k,k=h*f+e*k,a.items[b][0]=c,a.items[b][1]=k;a.count=d-1}}function C(a){var b=a.count,c=Math.floor(b/2),d;for(d=0;d<c;++d){var e=a.items[d];a.items[d]=a.items[b-d-1];a.items[b-d-1]=e}}Object.defineProperty(a,
"__esModule",{value:!0});var B;(function(a){a[a.ENTRY=1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"})(B=a.VectorRole||(a.VectorRole={}));var r;(function(a){a[a.START=1]="START";a[a.END=2]="END"})(r=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var A=a.SYSTEM_MAG_LIMIT*a.SYSTEM_MAG_LIMIT,u=8/(2*Math.PI);a.allocTriangles=function(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],
direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return b};a.allocExtrudeVectors=function(){var a={items:[],count:0},b;for(b=0;30>b;++b)a.items.push({vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]});b={};b[B.ENTRY]=f(20);b[B.EXIT]=f(20);b[B.CAP]=f(20);return{vectors:a,lists:b}};a.copyExtrudeVectors=function(a,b){var c;for(c=0;c<b.vectors.count;++c)a.vectors.items[c].vector[0]=
b.vectors.items[c].vector[0],a.vectors.items[c].vector[1]=b.vectors.items[c].vector[1],a.vectors.items[c].texCoords[0]=b.vectors.items[c].texCoords[0],a.vectors.items[c].texCoords[1]=b.vectors.items[c].texCoords[1],a.vectors.items[c].direction[0]=b.vectors.items[c].direction[0],a.vectors.items[c].direction[1]=b.vectors.items[c].direction[1],a.vectors.items[c].base=b.vectors.items[c].base;a.vectors.count=b.vectors.count;var d=b.lists[B.ENTRY],e=a.lists[B.ENTRY],f=b.lists[B.EXIT],g=a.lists[B.EXIT],
h=b.lists[B.CAP],k=a.lists[B.CAP];for(c=0;c<d.count;++c)e.items[c]=d.items[c];e.count=d.count;for(c=0;c<f.count;++c)g.items[c]=f.items[c];g.count=f.count;for(c=0;c<h.count;++c)k.items[c]=h.items[c];k.count=h.count;a.capCenter=b.capCenter};var n={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0],base:void 0};a.swapExtrudeVectors=b;var t=[];for(c=0;32>c;++c)t.push([void 0,void 0]);var x=function(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push([void 0,void 0]);return b}(8);
a.length=l;a.normalize=k;a.getNumberOfSlices=function(a){return Math.max(Math.round(a*u),1)};a.getRads=v;a.reverse=C;var D=[void 0,void 0],G=[void 0,void 0],F=[0,0],J=[0,0],E=[0,0],N=[0,0],Z=Math.cos(Math.PI/4),ia=Math.sin(Math.PI/4),S=Math.sqrt(2);c=function(){function a(a){this._distanceAlongCorrection=a.distanceAlongCorrection}a.prototype.bridge=function(a,c,d){var e=c.vectors;c=c.lists[B.EXIT];var f=d.vectors,g=d.lists[B.ENTRY],h,k;if(c.count===g.count+1)d=c.items,h=e.items,k=g.items,f=f.items;
else if(g.count===c.count+1)d=g.items,h=f.items,k=c.items,f=e.items;else if(c.count===g.count)d=g.items,h=f.items,k=c.items,f=e.items;else{console.error("Cannot bridge "+c.count+" to "+g.count+".");a.count=0;return}e=c.count+g.count-2;a.count=e;D[0]=d;D[1]=k;G[0]=h;G[1]=f;for(c=0;c<e;++c)d=a.items[c],h=(c+0)%2,h=G[h][D[h][Math.floor((c+0)/2)]],d.v1.vector[0]=h.vector[0],d.v1.vector[1]=h.vector[1],d.v1.texCoords[0]=h.texCoords[0],d.v1.texCoords[1]=h.texCoords[1],d.v1.direction[0]=h.direction[0],d.v1.direction[1]=
h.direction[1],d.v1.base=h.base,h=(c+1)%2,h=G[h][D[h][Math.floor((c+1)/2)]],d.v2.vector[0]=h.vector[0],d.v2.vector[1]=h.vector[1],d.v2.texCoords[0]=h.texCoords[0],d.v2.texCoords[1]=h.texCoords[1],d.v2.direction[0]=h.direction[0],d.v2.direction[1]=h.direction[1],d.v2.base=h.base,h=(c+2)%2,h=G[h][D[h][Math.floor((c+2)/2)]],d.v3.vector[0]=h.vector[0],d.v3.vector[1]=h.vector[1],d.v3.texCoords[0]=h.texCoords[0],d.v3.texCoords[1]=h.texCoords[1],d.v3.direction[0]=h.direction[0],d.v3.direction[1]=h.direction[1],
d.v3.base=h.base,h=d.v1.base&&d.v1.base.point||F,k=d.v2.base&&d.v2.base.point||F,f=d.v3.base&&d.v3.base.point||F,J[0]=h[0]+d.v1.vector[0],J[1]=h[1]+d.v1.vector[1],E[0]=k[0]+d.v2.vector[0],E[1]=k[1]+d.v2.vector[1],N[0]=f[0]+d.v3.vector[0],N[1]=f[1]+d.v3.vector[1],0>(E[0]-J[0])*(N[1]-J[1])-(N[0]-J[0])*(E[1]-J[1])||b(d.v2,d.v3)};a.prototype.pie=function(a,c){if(0===c.lists[B.CAP].count)a.count=0;else if(1===c.lists[B.CAP].count)console.error("A single vector is not enough to define a pie."),a.count=
0;else{a.count=c.lists[B.CAP].count-1;var d;for(d=0;d<a.count;++d){var e=a.items[d],f=c.vectors.items[c.lists[B.CAP].items[d]];e.v1.vector[0]=f.vector[0];e.v1.vector[1]=f.vector[1];e.v1.texCoords[0]=f.texCoords[0];e.v1.texCoords[1]=f.texCoords[1];e.v1.direction[0]=f.direction[0];e.v1.direction[1]=f.direction[1];e.v1.base=f.base;f=c.vectors.items[c.lists[B.CAP].items[d+1]];e.v2.vector[0]=f.vector[0];e.v2.vector[1]=f.vector[1];e.v2.texCoords[0]=f.texCoords[0];e.v2.texCoords[1]=f.texCoords[1];e.v2.direction[0]=
f.direction[0];e.v2.direction[1]=f.direction[1];e.v2.base=f.base;f=c.vectors.items[c.capCenter];e.v3.vector[0]=f.vector[0];e.v3.vector[1]=f.vector[1];e.v3.texCoords[0]=f.texCoords[0];e.v3.texCoords[1]=f.texCoords[1];e.v3.direction[0]=f.direction[0];e.v3.direction[1]=f.direction[1];e.v3.base=f.base;var f=e.v1.base&&e.v1.base.point||F,g=e.v2.base&&e.v2.base.point||F,h=e.v3.base&&e.v3.base.point||F;J[0]=f[0]+e.v1.vector[0];J[1]=f[1]+e.v1.vector[1];E[0]=g[0]+e.v2.vector[0];E[1]=g[1]+e.v2.vector[1];N[0]=
h[0]+e.v3.vector[0];N[1]=h[1]+e.v3.vector[1];0>(E[0]-J[0])*(N[1]-J[1])-(N[0]-J[0])*(E[1]-J[1])||b(e.v2,e.v3)}}};a.prototype.buttCap=function(a,b,c){this.fastMiterJoin(a,b,c)};a.prototype.roundCap=function(a,b,c,d,e,f){void 0===f&&(f=0);this.fastMiterJoin(a,b,c);c=d===r.START?0:1;d=d===r.START?1:0;a.capCenter=a.vectors.count;b=a.vectors.items[a.capCenter];b.vector[0]=0;b.vector[1]=0;b.texCoords[0]=0;b.texCoords[1]=0;b.direction[0]=0;b.direction[1]=0;++a.vectors.count;y(x,a.vectors.items[c].vector,
a.vectors.items[d].vector,e,!1);e=a.vectors.count;b=a.lists[B.CAP];b.items[0]=c;c=a.vectors.items[c].texCoords[1];var g=a.vectors.items[d].texCoords[1],h;for(h=0;h<x.count;++h){var k=f*(1-Math.abs(x.count/2-h)/(x.count/2)),l=c+h/(x.count-1)*(g-c),p=x.items[h],n=a.vectors.items[e+h];n.vector[0]=p[0];n.vector[1]=p[1];n.texCoords[0]=k;n.texCoords[1]=l;n.direction[0]=0;n.direction[1]=0;b.items[h+1]=e+h}b.items[x.count+1]=d;b.count=x.count+2;a.vectors.count=e+x.count};a.prototype.squareCap=function(a,
b,c,d){this.fastMiterJoin(a,b,c);b=d===r.START?0:1;c=d===r.START?1:0;var e=t[0],f=t[1],h=t[2],k=t[3];d=t[4];var l=a.vectors.items[b].vector;e[0]=Z*l[0]-ia*l[1];e[1]=ia*l[0]+Z*l[1];g(k,e,S);f[0]=Z*e[0]-ia*e[1];f[1]=ia*e[0]+Z*e[1];h[0]=Z*f[0]-ia*f[1];h[1]=ia*f[0]+Z*f[1];g(d,h,S);b=a.vectors.items[b];b.vector[0]=k[0];b.vector[1]=k[1];a=a.vectors.items[c];a.vector[0]=d[0];a.vector[1]=d[1]};a.prototype.fastMiterJoin=function(a,b,c){c=e(t[0],c);b=p(t[1],c);var d=a.vectors.items[0];d.vector[0]=c[0];d.vector[1]=
c[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=0;c=a.vectors.items[1];c.vector[0]=b[0];c.vector[1]=b[1];c.texCoords[0]=0;c.texCoords[1]=1;c.direction[0]=0;c.direction[1]=0;a.vectors.count=2;b=a.lists[B.ENTRY];b.items[0]=0;b.items[1]=1;b.count=2;b=a.lists[B.EXIT];b.items[0]=0;b.items[1]=1;b.count=2;a.lists[B.CAP].count=0;a.capCenter=void 0};a.prototype.miterJoin=function(a,b,c){var f=e(t[0],b),h=e(t[1],c),l=t[2];l[0]=f[0]+h[0];l[1]=f[1]+h[1];h=k(t[3],l);f=d(h,f);h=g(t[4],h,
1/f);f=p(t[5],h);this._distanceAlongCorrection?(l=a.vectors.items[0],l.vector[0]=h[0],l.vector[1]=h[1],l.texCoords[0]=0,l.texCoords[1]=-1,l.direction[0]=b[0],l.direction[1]=b[1],l=a.vectors.items[1],l.vector[0]=f[0],l.vector[1]=f[1],l.texCoords[0]=0,l.texCoords[1]=1,l.direction[0]=b[0],l.direction[1]=b[1],b=a.vectors.items[2],b.vector[0]=h[0],b.vector[1]=h[1],b.texCoords[0]=0,b.texCoords[1]=-1,b.direction[0]=c[0],b.direction[1]=c[1],b=a.vectors.items[3],b.vector[0]=f[0],b.vector[1]=f[1],b.texCoords[0]=
0,b.texCoords[1]=1,b.direction[0]=c[0],b.direction[1]=c[1],a.vectors.count=4,c=a.lists[B.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[B.EXIT],c.items[0]=2,c.items[1]=3):(l=a.vectors.items[0],l.vector[0]=h[0],l.vector[1]=h[1],l.texCoords[0]=0,l.texCoords[1]=-1,l.direction[0]=0,l.direction[1]=0,l=a.vectors.items[1],l.vector[0]=f[0],l.vector[1]=f[1],l.texCoords[0]=0,l.texCoords[1]=1,l.direction[0]=0,l.direction[1]=0,a.vectors.count=2,c=a.lists[B.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[B.EXIT],
c.items[0]=0,c.items[1]=1);c.count=2;a.lists[B.CAP].count=0;a.capCenter=void 0};a.prototype.bevelJoin=function(a,b,c,f){var l=f*f;f=h(b,c);var n=0<f?[-1,1]:[1,-1],r=n[0],n=n[1],x=0<f?p(t[0],e(t[1],b)):e(t[2],b),u=0<f?p(t[3],e(t[4],c)):e(t[5],c),v=t[6];v[0]=x[0]+u[0];v[1]=x[1]+u[1];var y=k(t[7],v),D=p(t[8],y),F=d(y,x),v=h(y,x),G=Math.abs(v/F),v=1+G*G,E=v<A?[G,this._distanceAlongCorrection]:[Math.sqrt(A-1),!0],J=E[0],E=E[1],N=v<l?[G,this._distanceAlongCorrection]:[Math.sqrt(l-1),!0],G=N[0];(N=N[1])&&
E?(E=a.vectors.items[0],q(E.vector,p(t[9],x),g(t[10],p(t[11],b),J)),E.texCoords[0]=0,E.texCoords[1]=r,E.direction[0]=this._distanceAlongCorrection?b[0]:0,E.direction[1]=this._distanceAlongCorrection?b[1]:0,D=a.vectors.items[1],q(D.vector,p(t[12],u),g(t[13],c,J)),D.texCoords[0]=0,D.texCoords[1]=r,D.direction[0]=this._distanceAlongCorrection?c[0]:0,D.direction[1]=this._distanceAlongCorrection?c[1]:0,r=a.vectors.items[2],r.vector[0]=0,r.vector[1]=0,r.texCoords[0]=0,r.texCoords[1]=0,r.direction[0]=0,
r.direction[1]=0,r=a.vectors.items[3],q(r.vector,x,g(t[14],b,G)),r.texCoords[0]=0,r.texCoords[1]=n,r.direction[0]=this._distanceAlongCorrection?b[0]:0,r.direction[1]=this._distanceAlongCorrection?b[1]:0,b=a.vectors.items[4],q(b.vector,u,g(t[15],p(t[16],c),G)),b.texCoords[0]=0,b.texCoords[1]=n,b.direction[0]=this._distanceAlongCorrection?c[0]:0,b.direction[1]=this._distanceAlongCorrection?c[1]:0,a.vectors.count=5,c=a.lists[B.ENTRY],c.items[0]=0,c.items[1]=2,c.items[2]=3,c.count=3,c=a.lists[B.EXIT],
c.items[0]=1,c.items[1]=2,c.items[2]=4,c.count=3,v<l?(l=a.lists[B.CAP],l.count=0,a.capCenter=void 0):(l=a.lists[B.CAP],l.items[0]=3,l.items[1]=4,l.count=2,a.capCenter=2)):!N&&E?(E=a.vectors.items[0],q(E.vector,p(t[9],x),g(t[10],p(t[11],b),J)),E.texCoords[0]=0,E.texCoords[1]=r,E.direction[0]=this._distanceAlongCorrection?b[0]:0,E.direction[1]=this._distanceAlongCorrection?b[1]:0,D=a.vectors.items[1],q(D.vector,p(t[12],u),g(t[13],c,J)),D.texCoords[0]=0,D.texCoords[1]=r,D.direction[0]=this._distanceAlongCorrection?
c[0]:0,D.direction[1]=this._distanceAlongCorrection?c[1]:0,r=a.vectors.items[2],r.vector[0]=0,r.vector[1]=0,r.texCoords[0]=0,r.texCoords[1]=0,r.direction[0]=0,r.direction[1]=0,r=a.vectors.items[3],g(r.vector,y,1/F),r.texCoords[0]=0,r.texCoords[1]=n,r.direction[0]=0,r.direction[1]=0,a.vectors.count=4,c=a.lists[B.ENTRY],c.items[0]=0,c.items[1]=2,c.items[2]=3,c.count=3,c=a.lists[B.EXIT],c.items[0]=1,c.items[1]=2,c.items[2]=3,c.count=3,a.lists[B.CAP].count=0,a.capCenter=void 0):N&&!E?(E=a.vectors.items[0],
g(E.vector,D,1/F),E.texCoords[0]=0,E.texCoords[1]=r,E.direction[0]=0,E.direction[1]=0,D=a.vectors.items[1],D.vector[0]=0,D.vector[1]=0,D.texCoords[0]=0,D.texCoords[1]=0,D.direction[0]=0,D.direction[1]=0,r=a.vectors.items[2],q(r.vector,x,g(t[9],b,G)),r.texCoords[0]=0,r.texCoords[1]=n,r.direction[0]=this._distanceAlongCorrection?b[0]:0,r.direction[1]=this._distanceAlongCorrection?b[1]:0,r=a.vectors.items[3],q(r.vector,u,g(t[10],p(t[11],c),G)),r.texCoords[0]=0,r.texCoords[1]=n,r.direction[0]=this._distanceAlongCorrection?
c[0]:0,r.direction[1]=this._distanceAlongCorrection?c[1]:0,a.vectors.count=4,c=a.lists[B.ENTRY],c.items[0]=0,c.items[1]=1,c.items[2]=2,c.count=3,c=a.lists[B.EXIT],c.items[0]=0,c.items[1]=1,c.items[2]=3,c.count=3,v<l?(l=a.lists[B.CAP],l.count=0,a.capCenter=void 0):(l=a.lists[B.CAP],l.items[0]=2,l.items[1]=3,l.count=2,a.capCenter=1)):N||E||(E=a.vectors.items[0],g(E.vector,D,1/F),E.texCoords[0]=0,E.texCoords[1]=r,E.direction[0]=0,E.direction[1]=0,D=a.vectors.items[1],g(D.vector,y,1/F),D.texCoords[0]=
0,D.texCoords[1]=n,D.direction[0]=0,D.direction[1]=0,a.vectors.count=2,c=a.lists[B.ENTRY],c.items[0]=0,c.items[1]=1,c.count=2,c=a.lists[B.EXIT],c.items[0]=0,c.items[1]=1,c.count=2,a.lists[B.CAP].count=0,a.capCenter=void 0);0>f&&(C(a.lists[B.ENTRY]),C(a.lists[B.EXIT]))};a.prototype.roundJoin=function(a,b,c,f){var l=h(b,c),n=0<l?[-1,1]:[1,-1],r=n[0],n=n[1],u=0<l?p(t[0],e(t[1],b)):e(t[2],b),v=0<l?p(t[3],e(t[4],c)):e(t[5],c),D=t[6];D[0]=u[0]+v[0];D[1]=u[1]+v[1];var F=k(t[7],D),D=p(t[8],F),G=d(F,u),F=
h(F,u),F=Math.abs(F/G),E=1+F*F<A?[F,this._distanceAlongCorrection]:[Math.sqrt(A-1),!0],F=E[0];E[1]?(E=a.vectors.items[0],E.vector[0]=u[0],E.vector[1]=u[1],E.texCoords[0]=0,E.texCoords[1]=n,E.direction[0]=0,E.direction[1]=0,E=a.vectors.items[1],E.vector[0]=v[0],E.vector[1]=v[1],E.texCoords[0]=0,E.texCoords[1]=n,E.direction[0]=0,E.direction[1]=0,E=a.vectors.items[2],q(E.vector,p(t[9],u),g(t[10],p(t[11],b),F)),E.texCoords[0]=0,E.texCoords[1]=r,E.direction[0]=this._distanceAlongCorrection?b[0]:0,E.direction[1]=
this._distanceAlongCorrection?b[1]:0,b=a.vectors.items[3],q(b.vector,p(t[12],v),g(t[13],c,F)),b.texCoords[0]=0,b.texCoords[1]=r,b.direction[0]=this._distanceAlongCorrection?c[0]:0,b.direction[1]=this._distanceAlongCorrection?c[1]:0,c=a.vectors.items[4],c.vector[0]=0,c.vector[1]=0,c.texCoords[0]=0,c.texCoords[1]=0,c.direction[0]=0,c.direction[1]=0,a.vectors.count=5,c=a.lists[B.ENTRY],c.items[0]=2,c.items[1]=4,c.items[2]=0,c.count=3,c=a.lists[B.EXIT],c.items[0]=3,c.items[1]=4,c.items[2]=1,c.count=3,
a.capCenter=4):(E=a.vectors.items[0],E.vector[0]=u[0],E.vector[1]=u[1],E.texCoords[0]=0,E.texCoords[1]=n,E.direction[0]=0,E.direction[1]=0,E=a.vectors.items[1],E.vector[0]=v[0],E.vector[1]=v[1],E.texCoords[0]=0,E.texCoords[1]=n,E.direction[0]=0,E.direction[1]=0,E=a.vectors.items[2],g(E.vector,D,1/G),E.texCoords[0]=0,E.texCoords[1]=r,E.direction[0]=0,E.direction[1]=0,b=a.vectors.items[3],b.vector[0]=0,b.vector[1]=0,b.texCoords[0]=0,b.texCoords[1]=0,b.direction[0]=0,b.direction[1]=0,a.vectors.count=
4,c=a.lists[B.ENTRY],c.items[0]=2,c.items[1]=3,c.items[2]=0,c.count=3,c=a.lists[B.EXIT],c.items[0]=2,c.items[1]=3,c.items[2]=1,c.count=3,a.capCenter=3);y(x,u,v,f,0>l);f=a.vectors.count;u=a.lists[B.CAP];for(v=u.items[0]=0;v<x.count;++v)c=x.items[v],r=a.vectors.items[f+v],r.vector[0]=c[0],r.vector[1]=c[1],r.texCoords[0]=0,r.texCoords[1]=n,r.direction[0]=0,r.direction[1]=0,u.items[v+1]=f+v;u.items[x.count+1]=1;u.count=x.count+2;a.vectors.count=f+x.count;0>l&&(C(a.lists[B.ENTRY]),C(a.lists[B.EXIT]))};
a.prototype.unitRoundJoin=function(a,b,c,d){var f=h(b,c),g=0<f?[-1,1]:[1,-1],k=g[0],g=g[1];b=0<f?p(t[0],e(t[1],b)):e(t[2],b);c=0<f?p(t[3],e(t[4],c)):e(t[5],c);var l=a.vectors.items[0];l.vector[0]=b[0];l.vector[1]=b[1];l.texCoords[0]=0;l.texCoords[1]=g;l.direction[0]=0;l.direction[1]=0;l=a.vectors.items[1];l.vector[0]=c[0];l.vector[1]=c[1];l.texCoords[0]=0;l.texCoords[1]=g;l.direction[0]=0;l.direction[1]=0;l=a.vectors.items[2];p(l.vector,b);l.texCoords[0]=0;l.texCoords[1]=k;l.direction[0]=0;l.direction[1]=
0;l=a.vectors.items[3];p(l.vector,c);l.texCoords[0]=0;l.texCoords[1]=k;l.direction[0]=0;l.direction[1]=0;k=a.vectors.items[4];k.vector[0]=0;k.vector[1]=0;k.texCoords[0]=0;k.texCoords[1]=0;k.direction[0]=0;k.direction[1]=0;a.vectors.count=5;k=a.lists[B.ENTRY];k.items[0]=2;k.items[1]=0;k.count=2;k=a.lists[B.EXIT];k.items[0]=3;k.items[1]=1;k.count=2;a.capCenter=4;y(x,b,c,d,0>f);d=a.vectors.count;b=a.lists[B.CAP];for(k=b.items[0]=0;k<x.count;++k)c=x.items[k],l=a.vectors.items[d+k],l.vector[0]=c[0],l.vector[1]=
c[1],l.texCoords[0]=0,l.texCoords[1]=g,l.direction[0]=0,l.direction[1]=0,b.items[k+1]=d+k;b.items[x.count+1]=1;b.count=x.count+2;a.vectors.count=d+x.count;0>f&&(C(a.lists[B.ENTRY]),C(a.lists[B.EXIT]))};a.prototype.rectJoin=function(a,b,c){b=e(t[0],b);c=e(t[1],c);var d=a.vectors.items[0];d.vector[0]=b[0];d.vector[1]=b[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=0;d=a.vectors.items[1];d.vector[0]=c[0];d.vector[1]=c[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=
0;d=a.vectors.items[2];p(d.vector,b);d.texCoords[0]=0;d.texCoords[1]=1;d.direction[0]=0;d.direction[1]=0;b=a.vectors.items[3];p(b.vector,c);b.texCoords[0]=0;b.texCoords[1]=1;b.direction[0]=0;b.direction[1]=0;a.vectors.count=4;b=a.lists[B.ENTRY];b.items[0]=0;b.items[1]=2;b.count=2;b=a.lists[B.EXIT];b.items[0]=1;b.items[1]=3;b.count=2;a.capCenter=void 0};return a}();a.Tessellator=c})},"esri/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./definitions","./Geometry","./GeometryUtils"],
function(c,a,f,b,d){Object.defineProperty(a,"__esModule",{value:!0});var l=function(){return function(a,b,c){this.ratio=a;this.x=b;this.y=c}}();c=function(){function a(a,b,c,d,e){void 0===d&&(d=8);void 0===e&&(e=8);this.lines=[];this.starts=[];this.pixelRatio=d;this.pixelMargin=e;this.tileSize=f.TILE_SIZE*d;this.dz=a;this.yPos=b;this.xPos=c}a.prototype.setExtent=function(a){this.finalRatio=this.tileSize/a*(1<<this.dz);var b=this.pixelRatio*this.pixelMargin,b=b/this.finalRatio;a>>=this.dz;b>a&&(b=
a);this.margin=b;this.xmin=a*this.xPos-b;this.ymin=a*this.yPos-b;this.xmax=this.xmin+a+2*b;this.ymax=this.ymin+a+2*b};a.prototype.reset=function(a){this.type=a;this.lines=[];this.starts=[];this.line=null;this.start=0};a.prototype.moveTo=function(a,c){this._pushLine();this._prevIsIn=this._isIn(a,c);this._moveTo(a,c,this._prevIsIn);this._prevPt=new b.Point(a,c);this._firstPt=new b.Point(a,c);this._dist=0};a.prototype.lineTo=function(a,c){var d=this._isIn(a,c),e=new b.Point(a,c),f=b.Point.distance(this._prevPt,
e),h,k,p;if(d)this._prevIsIn?this._lineTo(a,c,!0):(h=this._prevPt,k=e,a=this._intersect(k,h),this.start=this._dist+f*(1-this._r),this._lineTo(a.x,a.y,!0),this._lineTo(k.x,k.y,!0));else if(this._prevIsIn)k=this._prevPt,h=e,a=this._intersect(k,h),this._lineTo(a.x,a.y,!0),this._lineTo(h.x,h.y,!1);else{var r=this._prevPt;if(!(r.x<=this.xmin&&e.x<=this.xmin||r.x>=this.xmax&&e.x>=this.xmax||r.y<=this.ymin&&e.y<=this.ymin||r.y>=this.ymax&&e.y>=this.ymax)){a=[];if(r.x<this.xmin&&e.x>this.xmin||r.x>this.xmin&&
e.x<this.xmin)c=(this.xmin-r.x)/(e.x-r.x),p=r.y+c*(e.y-r.y),p<=this.ymin?k=!1:p>=this.ymax?k=!0:a.push(new l(c,this.xmin,p));if(r.x<this.xmax&&e.x>this.xmax||r.x>this.xmax&&e.x<this.xmax)c=(this.xmax-r.x)/(e.x-r.x),p=r.y+c*(e.y-r.y),p<=this.ymin?k=!1:p>=this.ymax?k=!0:a.push(new l(c,this.xmax,p));if(r.y<this.ymin&&e.y>this.ymin||r.y>this.ymin&&e.y<this.ymin)c=(this.ymin-r.y)/(e.y-r.y),p=r.x+c*(e.x-r.x),p<=this.xmin?h=!1:p>=this.xmax?h=!0:a.push(new l(c,p,this.ymin));if(r.y<this.ymax&&e.y>this.ymax||
r.y>this.ymax&&e.y<this.ymax)c=(this.ymax-r.y)/(e.y-r.y),p=r.x+c*(e.x-r.x),p<=this.xmin?h=!1:p>=this.xmax?h=!0:a.push(new l(c,p,this.ymax));if(0===a.length)h?k?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):k?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<a.length&&a[0].ratio>a[1].ratio)this.start=this._dist+f*a[1].ratio,this._lineTo(a[1].x,a[1].y,!0),this._lineTo(a[0].x,a[0].y,!0);else for(this.start=this._dist+f*a[0].ratio,h=0;h<a.length;h++)this._lineTo(a[h].x,
a[h].y,!0)}this._lineTo(e.x,e.y,!1)}this._dist+=f;this._prevIsIn=d;this._prevPt=e};a.prototype.close=function(){if(2<this.line.length){var a=this._firstPt,b=this._prevPt;a.x===b.x&&a.y===b.y||this.lineTo(a.x,a.y);a=this.line;for(b=a.length;4<=b;)if(a[0].x===a[1].x&&a[0].x===a[b-2].x||a[0].y===a[1].y&&a[0].y===a[b-2].y)a.pop(),a[0].x=a[b-2].x,a[0].y=a[b-2].y,--b;else break}};a.prototype.result=function(a){void 0===a&&(a=!0);this._pushLine();if(0===this.lines.length)return null;3===this.type&&a&&k.simplify(this.tileSize,
this.margin*this.finalRatio,this.lines);return this.lines};a.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var a=this.lines,b=a.length;if(0===b)return null;for(var c=[],d=0;d<b;d++)c.push({line:a[d],start:this.starts[d]||0});return c};a.prototype._isIn=function(a,b){return a>=this.xmin&&a<=this.xmax&&b>=this.ymin&&b<=this.ymax};a.prototype._intersect=function(a,c){var d,e,f;if(c.x>=this.xmin&&c.x<=this.xmax)e=c.y<=this.ymin?this.ymin:this.ymax,
f=(e-a.y)/(c.y-a.y),d=a.x+f*(c.x-a.x);else if(c.y>=this.ymin&&c.y<=this.ymax)d=c.x<=this.xmin?this.xmin:this.xmax,f=(d-a.x)/(c.x-a.x),e=a.y+f*(c.y-a.y);else{e=c.y<=this.ymin?this.ymin:this.ymax;d=c.x<=this.xmin?this.xmin:this.xmax;var h=(d-a.x)/(c.x-a.x),k=(e-a.y)/(c.y-a.y);h<k?(f=h,e=a.y+h*(c.y-a.y)):(f=k,d=a.x+k*(c.x-a.x))}this._r=f;return new b.Point(d,e)};a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===
this.type?1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};a.prototype._moveTo=function(a,c,d){3!==this.type?d&&(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(a,c))):(d||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),c<this.ymin&&(c=this.ymin),c>
this.ymax&&(c=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line.push(new b.Point(a,c)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,c,d){if(3!==this.type)if(d){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);c=Math.round((c-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(d=this.line[this.line.length-1],d.equals(a,c)))return;this.line.push(new b.Point(a,c))}else this.line&&
0<this.line.length&&this._pushLine();else if(d||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),c<this.ymin&&(c=this.ymin),c>this.ymax&&(c=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),c=Math.round((c-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){d=this.line[this.line.length-1];var e=d.x===a,f=d.y===c;e&&f||(this._is_h&&e?(d.x=a,d.y=c,d=this.line[this.line.length-2],d.x===a&&d.y===c?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=
!1:(d=this.line[this.line.length-2],this._is_h=d.x===a,this._is_v=d.y===c)):(this._is_h=d.x===a,this._is_v=d.y===c)):this._is_v&&f?(d.x=a,d.y=c,d=this.line[this.line.length-2],d.x===a&&d.y===c?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(d=this.line[this.line.length-2],this._is_h=d.x===a,this._is_v=d.y===c)):(this._is_h=d.x===a,this._is_v=d.y===c)):(this.line.push(new b.Point(a,c)),this._is_h=e,this._is_v=f))}else this.line.push(new b.Point(a,c))};return a}();a.TileClipper=c;c=function(){function a(){}
a.prototype.setExtent=function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=[];this.line=null};a.prototype.moveTo=function(a,c){this.line&&this.lines.push(this.line);this.line=[];var d=this._ratio;this.line.push(new b.Point(Math.round(a*d),Math.round(c*d)))};a.prototype.lineTo=function(a,c){var d=this._ratio;this.line.push(new b.Point(Math.round(a*d),Math.round(c*d)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};
a.prototype.result=function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&1!==this._ratio&&k.simplify(4096,64,this.lines);return this.lines};return a}();a.SimpleBuilder=c;var k=function(){function a(){}a.simplify=function(b,c,d){if(d){var e=-c,f=b+c,g=-c,h=b+c;b=[];c=[];for(var k=d.length,l=0;l<k;++l){var p=d[l];if(p&&!(2>p.length))for(var u=p[0],n=void 0,t=p.length,x=1;x<t;++x)n=p[x],u.x===n.x&&(u.x<=e&&(u.y>n.y?(b.push(l),b.push(x),b.push(0),b.push(-1)):
(c.push(l),c.push(x),c.push(0),c.push(-1))),u.x>=f&&(u.y<n.y?(b.push(l),b.push(x),b.push(1),b.push(-1)):(c.push(l),c.push(x),c.push(1),c.push(-1)))),u.y===n.y&&(u.y<=g&&(u.x<n.x?(b.push(l),b.push(x),b.push(2),b.push(-1)):(c.push(l),c.push(x),c.push(2),c.push(-1))),u.y>=h&&(u.x>n.x?(b.push(l),b.push(x),b.push(3),b.push(-1)):(c.push(l),c.push(x),c.push(3),c.push(-1)))),u=n}0!==b.length&&0!==c.length&&(a.fillParent(d,c,b),a.fillParent(d,b,c),e=[],a.calcDeltas(e,c,b),a.calcDeltas(e,b,c),a.addDeltas(e,
d))}};a.fillParent=function(a,b,c){for(var e=c.length,f=b.length,g=0;g<f;g+=4){for(var h=b[g],k=b[g+1],l=b[g+2],p=a[h][k-1],h=a[h][k],k=8092,u=-1,n=0;n<e;n+=4)if(c[n+2]===l){var t=c[n],x=c[n+1],D=a[t][x-1],t=a[t][x];switch(l){case 0:case 1:d.between(p.y,D.y,t.y)&&d.between(h.y,D.y,t.y)&&(D=Math.abs(t.y-D.y),D<k&&(k=D,u=n));break;case 2:case 3:d.between(p.x,D.x,t.x)&&d.between(h.x,D.x,t.x)&&(D=Math.abs(t.x-D.x),D<k&&(k=D,u=n))}}b[g+3]=u}};a.calcDeltas=function(b,c,d){for(var e=c.length,f=0;f<e;f+=
4){var g=a.calcDelta(f,c,d,[]);b.push(c[f]);b.push(c[f+1]);b.push(c[f+2]);b.push(g)}};a.calcDelta=function(b,c,d,e){b=c[b+3];if(-1===b)return 0;var f=e.length;if(1<f&&e[f-2]===b)return 0;e.push(b);return a.calcDelta(b,d,c,e)+1};a.addDeltas=function(a,b){for(var c=a.length,d=0,e=0;e<c;e+=4){var f=a[e+3];f>d&&(d=f)}for(e=0;e<c;e+=4){var h=b[a[e]],k=a[e+1],f=d-a[e+3];switch(a[e+2]){case 0:h[k-1].x-=f;h[k].x-=f;1===k&&(h[h.length-1].x-=f);k===h.length-1&&(h[0].x-=f);break;case 1:h[k-1].x+=f;h[k].x+=f;
1===k&&(h[h.length-1].x+=f);k===h.length-1&&(h[0].x+=f);break;case 2:h[k-1].y-=f;h[k].y-=f;1===k&&(h[h.length-1].y-=f);k===h.length-1&&(h[0].y-=f);break;case 3:h[k-1].y+=f,h[k].y+=f,1===k&&(h[h.length-1].y+=f),k===h.length-1&&(h[0].y+=f)}}};return a}()})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(c,a){function f(a,b){a%=b;return 0<=a?a:a+b}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=
2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var b=1/Math.LN2;a.positiveMod=f;a.radToByte=function(b){return f(b*a.C_RAD_TO_256,256)};a.degToByte=function(b){return f(b*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*b};a.sqr=function(a){return a*a};a.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};a.interpolate=function(a,b,c){return a*(1-c)+b*c};
a.between=function(a,b,c){return a>=b&&a<=c||a>=c&&a<=b}})},"esri/views/2d/engine/webgl/mesh/templates/WGLMarkerTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/Logger ../../../../../../core/screenUtils ../../../../../../core/libs/gl-matrix/mat2d ../../../../../../core/libs/gl-matrix/vec2 ../../color ../../definitions ../../enums ../../number ../../WGLDisplayRecord ./WGLMeshTemplate".split(" "),function(c,a,f,b,d,l,k,e,h,p,g,q,v){Object.defineProperty(a,
"__esModule",{value:!0});var y=b.getLogger("esri.views.2d.engine.webgl.WGLMeshTemplate");c=function(a){function b(b,c,d,e,f,h,q,v,y,B,C){var n=a.call(this)||this;n.geometryType=p.WGLGeometryType.MARKER;var r=k.create(),t=l.create(),x=C.sdf?.5:1;l.translate(t,t,new Float32Array([x*d,x*-e]));f&&l.rotate(t,t,3.14159265359/180*f);n._materialStore=b;n.vvFlags=c;n._materialId=b.createSpriteMaterial(C,n.geometryType,c);n._fillColor=h;n._outlineColor=y;n._sizeOutlineWidth=g.i8888to32(q,v,B,0);b=Math.round(C.rect.x/
4)-128;c=Math.round(C.rect.y/4)-128;f=b+Math.round(C.rect.width/4);C=c+Math.round(C.rect.height/4);r.set([-.5*q,-.5*v]);k.transformMat2d(r,r,t);n._offsetAndTexUpperLeft=g.i8888to32(r[0],r[1],b,c);r.set([.5*q,-.5*v]);k.transformMat2d(r,r,t);n._offsetAndTexUpperRight=g.i8888to32(r[0],r[1],f,c);r.set([-.5*q,.5*v]);k.transformMat2d(r,r,t);n._offsetAndTexBottomLeft=g.i8888to32(r[0],r[1],b,C);r.set([.5*q,.5*v]);k.transformMat2d(r,r,t);n._offsetAndTexBottomRight=g.i8888to32(r[0],r[1],f,C);n.height=v;n.width=
q;n.xOffset=d;n.yOffset=e;return n}f(b,a);b.fromPictureMarker=function(a,c,e,f,g){g=Math.round(d.pt2px(e.width));var k=Math.round(d.pt2px(e.height)),l=h.PICTURE_FILL_COLOR,n=Math.round(d.pt2px(e.xoffset||0)),p=Math.round(d.pt2px(e.yoffset||0));return new b(a,c,n,p,e.angle,l,g,k,0,0,f)};b.fromSimpleMarker=function(a,c,f,g,h){h=e.premultiplyAlphaRGBA(f.color);var k=Math.round(d.pt2px(f.size)),l=Math.round(d.pt2px(f.xoffset||0)),n=Math.round(d.pt2px(f.yoffset||0)),p=f.outline,r=(p&&p.color&&e.premultiplyAlphaRGBA(p.color))|
0,p=(p&&p.width&&Math.round(d.pt2px(p.width)))|0;return new b(a,c,l,n,f.angle,h,k,k,r,p,g)};b.prototype.writeMesh=function(a,b,c,d,e,f,g){f=this._materialStore.get(this._materialId);var h=b.indexVector,k=b.get("geometry");b=b.get("visibility");var l=new q(d,this.geometryType,this._materialId),n=this._getOffset(k,f);a.push(l);l.vertexFrom=n;l.indexFrom=h.length;switch(c){case "esriGeometryPoint":c=e.geometry;a=c.x;c=c.y;this._writeVertices(l,k,b,d,this._getPos(a,c),f,g);this._writeIndices(l,h,n);break;
case "esriGeometryPolyline":this._writeMany(l,h,k,b,n,d,e.geometry.paths[0],f,g);break;case "esriGeometryPolygon":(c=e.centroid)?(a=c.x,c=c.y,this._writeVertices(l,k,b,d,this._getPos(a,c),f,g),this._writeIndices(l,h,n)):y.error("Tried to render polygon geometries as markers, but found no centroid!");break;case "esriGeometryMultipoint":this._writeMany(l,h,k,b,n,d,e.geometry.points,f,g);break;default:y.error("Unable to handle geometryType: "+c)}};b.prototype._getPos=function(a,b){return g.i1616to32(a,
b)};b.prototype._writeMany=function(a,b,c,d,e,f,g,h,k){for(var l=0,n=0,p=0,r=0;r<g.length;r++){var q=g[r],t=q[0],q=q[1];this._writeVertices(a,c,d,f,this._getPos(t+l,q+n),h,k);this._writeIndices(a,b,e+p);l+=t;n+=q;p+=4}};b.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?10:6;return a.length/b};b.prototype._writeVertices=function(a,b,c,d,e,f,g){b.push(e);b.push(this._offsetAndTexUpperLeft);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,
g,f);c.push(255);b.push(e);b.push(this._offsetAndTexUpperRight);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(255);b.push(e);b.push(this._offsetAndTexBottomLeft);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);this._writeVV(b,g,f);c.push(255);b.push(e);b.push(this._offsetAndTexBottomRight);b.push(d);b.push(this._fillColor);b.push(this._outlineColor);b.push(this._sizeOutlineWidth);
this._writeVV(b,g,f);c.push(255);a.vertexCount+=4};b.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(a.push(b[p.VVType.SIZE]),a.push(b[p.VVType.COLOR]),a.push(b[p.VVType.OPACITY]),a.push(b[p.VVType.ROTATION]))};b.prototype._writeIndices=function(a,b,c){b.push(c+0);b.push(c+1);b.push(c+2);b.push(c+1);b.push(c+3);b.push(c+2);a.indexCount+=6};return b}(v.default);a.default=c})},"esri/views/2d/engine/webgl/mesh/templates/WGLTemplateStore":function(){define("require exports ../../../../../../core/Error ../../../../../../core/Logger ../../../../../../core/promiseUtils ../../enums ./WGLFillTemplate ./WGLLineTemplate ./WGLMarkerTemplate ./WGLTextTemplate ../../util/BidiText ../../util/vvFlagUtils".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q){function v(a,b){return a.acquire().then(function(){return b()}).then(function(){return a.release()})}Object.defineProperty(a,"__esModule",{value:!0});var y=b.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLTemplateStore"),C=[],B=function(){function a(){this._resolver=this._promise=null}a.prototype.isHeld=function(){return!!this._promise};a.prototype.acquire=function(){var a=this;if(this._promise)return this._promise.then(function(){return a.acquire()});this._promise=
d.create(function(b){return a._resolver=b});return d.resolve()};a.prototype.release=function(){var a=this._resolver;this._promise=this._resolver=null;a()};return a}();c=function(){function a(a,b){this._templateIdCounter=this._idCounter=0;this._idToTemplateGroup=new Map;this._symbolToTemplate=new Map;this._fetchQueue=[];this._idToResolver=new Map;this._pixelRatio=1;this._lock=new B;this._fetchResource=a;this._pixelRatio=b}a.prototype.createTemplateGroup=function(a,b,c,d){var e=this._hashSymbol(a);
if(!this._symbolToTemplate.has(e)){var f=[];b&&this._createMeshTemplates(f,c,b,d,this._pixelRatio,!0);this._createMeshTemplates(f,c,a,d,this._pixelRatio,!1);a=this._createGroupId();this._idToTemplateGroup.set(a,f);this._symbolToTemplate.set(e,a)}return this._symbolToTemplate.get(e)};a.prototype.getTemplateGroup=function(a){return this._idToTemplateGroup.has(a)?this._idToTemplateGroup.get(a):C};a.prototype.finalize=function(){return this._fetchQueue.length||this._lock.isHeld()?v(this._lock,this._fetchAllQueuedResources.bind(this)):
d.resolve()};a.prototype._fetchAllQueuedResources=function(){var a=this;if(!this._fetchQueue.length)return d.resolve();var b=this._fetchQueue;this._fetchQueue=[];return this._fetchResource(b).then(function(b){for(var c=0;c<b.length;c++){var d=b[c],e=d.id,d=d.mosaicItem;a._idToResolver.get(e)(d);a._idToResolver.delete(e)}}).catch(function(c){"cancel"===c.dojoType?a._fetchQueue=a._fetchQueue.concat(b):y.error(new f("mapview-template-store","Unable to fetch requested texture resources",c))})};a.prototype._createGroupId=
function(){return this._idCounter++};a.prototype._createTemplateId=function(){return this._templateIdCounter++};a.prototype._getCodepoints=function(a){a=g.bidiText(a.text)[0];for(var b=[],c=0;c<a.length;c++)b.push(a.charCodeAt(c));return b};a.prototype._getMosaicItem=function(a){var b=this,c=this._createTemplateId(),e="text"===a.type&&this._getCodepoints(a),f=d.create(function(a){return b._idToResolver.set(c,a)});this._fetchQueue.push({symbol:a.toJSON(),id:c,glyphIds:e});return f};a.prototype._hashSymbol=
function(a){return JSON.stringify(a)};a.prototype._createMeshTemplates=function(a,b,c,d,f,g){if(-1!==c.type.indexOf("3d"))return y.error("3D symbols are not supported with MapView"),a;var n=a.length;a.push(null);switch(c.type){case l.EsriSymbolTypeKebab.SIMPLE_MARKER:return this._getMosaicItem(c).then(function(e){a[n]=h.default.fromSimpleMarker(b,q.getMarkerVVFlags(d),c,e.spriteMosaicItem,f)}),a;case l.EsriSymbolTypeKebab.PICTURE_MARKER:return this._getMosaicItem(c).then(function(e){a[n]=h.default.fromPictureMarker(b,
q.getMarkerVVFlags(d),c,e.spriteMosaicItem,f)}),a;case l.EsriSymbolTypeKebab.SIMPLE_FILL:return this._getMosaicItem(c).then(function(e){a[n]=k.default.fromSimpleFill(b,q.getFillVVFlags(d),c,e.spriteMosaicItem,f,g)}),c.outline&&(a.push(null),this._getMosaicItem(c.outline).then(function(g){a[n+1]=e.default.fromSimpleLine(b,q.getLineVVFlags(d,!0),c.outline,g.spriteMosaicItem,f)})),a;case l.EsriSymbolTypeKebab.PICTURE_FILL:return this._getMosaicItem(c).then(function(e){a[n]=k.default.fromPictureFill(b,
q.getFillVVFlags(d),c,e.spriteMosaicItem,f,g)}),c.outline&&(a.push(null),this._getMosaicItem(c.outline).then(function(g){a[n+1]=e.default.fromSimpleLine(b,q.getLineVVFlags(d,!0),c.outline,g.spriteMosaicItem,f)})),a;case l.EsriSymbolTypeKebab.SIMPLE_LINE:return this._getMosaicItem(c).then(function(g){a[n]=e.default.fromSimpleLine(b,q.getLineVVFlags(d,!1),c,g.spriteMosaicItem,f)}),a;case l.EsriSymbolTypeKebab.TEXT:return this._getMosaicItem(c).then(function(e){a[n]=p.default.fromText(b,q.getTextVVFlags(d),
c,f,e.glyphMosaicItems)}),a;default:return y.error("Unable to create mesh template for unknown symbol type: "+c.type),a}};return a}();a.default=c})},"esri/views/2d/engine/webgl/mesh/templates/WGLFillTemplate":function(){define("require exports ../../../../../../core/tsSupport/extendsHelper ../../../../../../core/has ../../../../../../core/Logger ../../../../../../core/libs/earcut/earcut ../../color ../../definitions ../../enums ../../enums ../../number ../../TileClipper ../../WGLDisplayRecord ../Tesselator ./WGLMeshTemplate".split(" "),
function(c,a,f,b,d,l,k,e,h,p,g,q,v,y,C){Object.defineProperty(a,"__esModule",{value:!0});var B=d.getLogger("esri.views.2d.engine.webgl.mesh.templates.WGLFillTemplate"),r=[],A=[];c=function(a){function c(c,d,f,g,k,l,n,p){var r=a.call(this)||this;r.fillColor=g;r.tl=k;r.br=l;r.aux=n;r.isBFS=p;r.geometryType=h.WGLGeometryType.FILL;r.useLibtess=!1;g=b("esri-featurelayer-webgl");r.useLibtess="libtess"===((g||{}).tesselator||"libtess");r.useLibtess&&(r._tesselator=new y.default);r.vvFlags=d;r._materialStore=
c;r.materialId=r._materialStore.createSpriteMaterial(f,r.geometryType,d);r._tileClipper=new q.TileClipper(0,0,0,1,8);r._tileClipper.setExtent(e.TILE_SIZE);return r}f(c,a);c.fromSimpleFill=function(a,b,d,e,f,h){void 0===h&&(h=!1);d=(f=d.color)&&"none"!==d.style&&k.premultiplyAlphaRGBA(f)||0;if(!e)return new c(a,b,null,d,0,0,0,h);var l=e.rect;f=l.x+1;var n=l.y+1,p=l.x+1+e.width,q=l.y+1+e.height,l=g.i1616to32(f,n),r=g.i1616to32(p,q);f=g.i8888to32(g.nextHighestPowerOfTwo(p-f),g.nextHighestPowerOfTwo(q-
n),0,0);return new c(a,b,e,d,l,r,f,h)};c.fromPictureFill=function(a,b,d,f,h,k){void 0===k&&(k=!1);h=e.PICTURE_FILL_COLOR;var l=f.rect,n=l.x+1+f.width,p=l.y+1+f.height,l=g.i1616to32(l.x+1,l.y+1),n=g.i1616to32(n,p);d=g.i8888to32(g.nextHighestPowerOfTwo(d.width),g.nextHighestPowerOfTwo(d.height),0,0);return new c(a,b,f,h,l,n,d,k)};c.prototype.writeMesh=function(a,b,c,d,e,f,g){r.length=0;if(this.vvFlags&p.WGLVVFlag.COLOR||0!==this.fillColor)if("esriGeometryPolygon"!==c)B.error("Unable to handle geometryType: "+
c);else{var h=e.geometry,h=(e=this._isClippingRequired(h))?this._clip(h,!this.useLibtess):h.rings;return this.useLibtess?this._writeMeshLibtess(a,b,c,d,h,e,f,g):this._writeMeshEarcut(a,b,c,d,h,e,f,g)}};c.prototype._isClippingRequired=function(a){var b=e.TILE_SIZE+8,c=0;for(a=a.rings;c<a.length;c++){var d=a[c],f=d.length;if(!(3>f)){var g=d[0][0],h=d[0][1];if(-8>g||g>b||-8>h||h>b)return!0;for(var k=1;k<f;++k)if(g+=d[k][0],h+=d[k][1],-8>g||g>b||-8>h||h>b)return!0}}return!1};c.prototype._clip=function(a,
b){var c;this._tileClipper.reset(3);for(var d=0,e=a.rings;d<e.length;d++){var f=e[d],g=f.length;if(!(3>g)){a=f[0][0];c=f[0][1];this._tileClipper.moveTo(a,c);for(var h=1;h<g;++h)a+=f[h][0],c+=f[h][1],this._tileClipper.lineTo(a,c);this._tileClipper.close()}}return this._tileClipper.result(b)};c.prototype._writeMeshLibtess=function(a,b,c,d,e,f,g,h){if(e&&e.length){c=this._materialStore.get(this.materialId);g=[];var k=b.indexVector,l=b.get("geometry");b=b.get("visibility");var n=new v(d,this.geometryType,
this.materialId),p=this._getOffset(l,c);n.vertexFrom=p;n.indexFrom=k.length;a.push(n);this._tesselator.beginPolygon(r,g);for(a=0;a<e.length;a++){var q=e[a];if(!(3>q.length)){this._tesselator.beginContour();var t=void 0,x=void 0;f?(t=q[0].x,x=q[0].y):(t=q[0][0],x=q[0][1]);var u=[t,x,0];this._tesselator.addVertex(u,u);for(u=1;u<q.length-1;u++){var y=void 0,B=void 0;f?(t=q[u].x,x=q[u].y):(y=q[u][0],B=q[u][1],t+=y,x+=B);y=[t,x,0];this._tesselator.addVertex(y,y)}this._tesselator.endContour()}}this._tesselator.endPolygon();
this._writeVerticesLibTess(n,l,b,d,r,c,h);this._writeIndicesLibTess(n,k,p,g)}};c.prototype._writeMeshEarcut=function(a,b,c,d,e,f,g,h){if(e&&e.length){c=this._materialStore.get(this.materialId);g=b.indexVector;var k=b.get("geometry");b=b.get("visibility");var l=new v(d,this.geometryType,this.materialId),n=this._getOffset(k,c);l.vertexFrom=n;l.indexFrom=g.length;a.push(l);for(var p=a=0,q=0;q<e.length;q++){var t=e[q],x=p,u=void 0,y=void 0;f?(u=t[0].x,y=t[0].y):(u=t[0][0],y=t[0][1]);r[p++]=u;r[p++]=y;
for(var B=0,C=1;C<t.length;++C){var D=void 0,F=void 0;f?(D=u,F=y,u=t[C].x,y=t[C].y,D=u-D,F=y-F):(D=t[C][0],F=t[C][1],u+=D,y+=F);B-=D*(y+y+F);r[p++]=u;r[p++]=y}0<B?(0<x-a&&(this._write(l,g,k,b,n,d,r,A,a,x,c,h),a=x),A.length=0):0>B?0<x-a?A.push(.5*(x-a)):p=x:p=x}0<p-a&&this._write(l,g,k,b,n,d,r,A,a,p,c,h);r.length=A.length=0}};c.prototype._write=function(a,b,c,d,e,f,g,h,k,n,p,q){e=l(g.slice(k,n),h,2);e.length&&(k=this._getOffset(c,p),this._writeVertices(a,c,d,f,g,h,p,q),this._writeIndices(a,b,k,e))};
c.prototype._getOffset=function(a,b){b=b.materialKeyInfo.hasVV()?8:6;return a.length/b};c.prototype._writeVertices=function(a,b,c,d,e,f,h,k){for(f=0;f<e.length;f+=2){var l=g.i1616to32(e[f],e[f+1]);b.push(l);b.push(d);b.push(this.fillColor);b.push(this.tl);b.push(this.br);b.push(this.aux);this._writeVV(b,k,h);c.push(255);a.vertexCount++}};c.prototype._writeIndices=function(a,b,c,d){for(var e=0;e<d.length;e+=3)b.push(c+d[e]),b.push(c+d[e+1]),b.push(c+d[e+2]),a.indexCount+=3};c.prototype._writeVerticesLibTess=
function(a,b,c,d,e,f,h){for(var k=0;k<e.length;k+=2){var l=g.i1616to32(e[k],e[k+1]);b.push(l);b.push(d);b.push(this.fillColor);b.push(this.tl);b.push(this.br);b.push(this.aux);this._writeVV(b,h,f);c.push(255);a.vertexCount++}};c.prototype._writeIndicesLibTess=function(a,b,c,d){for(var e=0;e<d.length;e++)b.push(c+d[e]),a.indexCount++};c.prototype._writeVV=function(a,b,c){c.materialKeyInfo.hasVV()&&(this.isBFS?(a.push(4294967295),a.push(4294967295)):(a.push(b[h.VVType.COLOR]),a.push(b[h.VVType.OPACITY])))};
return c}(C.default);a.default=c})},"esri/views/2d/engine/webgl/mesh/Tesselator":function(){define(["require","exports","../../../../../core/Logger","../../../../../core/libs/libtess/libtess"],function(c,a,f,b){Object.defineProperty(a,"__esModule",{value:!0});var d=f.getLogger("esri.views.2d.engine.webgl.mesh.templates.Tesselator");c=function(){function a(){this._indexCounter=this._currentVertexIndex=0;this._triangleIndices=[-1,-1,-1];this.glu=new b.GluTesselator;this.glu.gluTessCallback(b.gluEnum.GLU_TESS_BEGIN,
this._begincallback.bind(this));this.glu.gluTessCallback(b.gluEnum.GLU_TESS_VERTEX_DATA,this._vertexCallback.bind(this));this.glu.gluTessCallback(b.gluEnum.GLU_TESS_END,this._endcallback.bind(this));this.glu.gluTessCallback(b.gluEnum.GLU_TESS_COMBINE,this._combinecallback.bind(this));this.glu.gluTessCallback(b.gluEnum.GLU_TESS_ERROR,this._errorcallback.bind(this));this.glu.gluTessCallback(b.gluEnum.GLU_TESS_EDGE_FLAG,this._edgeCallback.bind(this));this.glu.gluTessProperty(b.gluEnum.GLU_TESS_WINDING_RULE,
b.windingRule.GLU_TESS_WINDING_ODD)}a.prototype.beginPolygon=function(a,b){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;this._indexCounter=this._currentVertexIndex=0;this.glu.gluTessBeginPolygon(a);this._indices=b};a.prototype.endPolygon=function(){this.glu.gluTessEndPolygon()};a.prototype.beginContour=function(){this.glu.gluTessBeginContour()};a.prototype.endContour=function(){this.glu.gluTessEndContour()};a.prototype.addVertex=function(a,b){this.glu.gluTessVertex(a,
b)};a.prototype._vertexCallback=function(a,b){b[b.length]=a[0];b[b.length]=a[1];this._triangleIndices[this._currentVertexIndex]=-1;if(2<=this._currentVertexIndex){for(a=0;3>a;a++)-1===this._triangleIndices[a]&&(this._triangleIndices[a]=this._indexCounter++),this._indices[this._indices.length]=this._triangleIndices[a];this._currentVertexIndex=0}else this._currentVertexIndex++};a.prototype._begincallback=function(a){this._triangleIndices[0]=-1;this._triangleIndices[1]=-1;this._triangleIndices[2]=-1;
this._currentVertexIndex=0};a.prototype._endcallback=function(){this._currentVertexIndex=0};a.prototype._errorcallback=function(a){d.error("Encountered error during tesselation: "+a)};a.prototype._combinecallback=function(a,b,c){return[a[0],a[1],a[2]]};a.prototype._edgeCallback=function(a){};return a}();a.default=c})},"esri/core/libs/libtess/libtess":function(){define([],function(){var c={DEBUG:!1,assert:function(a,f){if(c.DEBUG&&!a)throw Error("Assertion failed"+(f?": "+f:""));},GLU_TESS_MAX_COORD:1E150,
TRUE_PROJECT:!1,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},
gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};c.geom.vertEq=function(a,
c){return a.s===c.s&&a.t===c.t};c.geom.vertLeq=function(a,c){return a.s<c.s||a.s===c.s&&a.t<=c.t};c.geom.edgeEval=function(a,f,b){c.assert(c.geom.vertLeq(a,f)&&c.geom.vertLeq(f,b));var d=f.s-a.s,l=b.s-f.s;return 0<d+l?d<l?f.t-a.t+d/(d+l)*(a.t-b.t):f.t-b.t+l/(d+l)*(b.t-a.t):0};c.geom.edgeSign=function(a,f,b){c.assert(c.geom.vertLeq(a,f)&&c.geom.vertLeq(f,b));var d=f.s-a.s,l=b.s-f.s;return 0<d+l?(f.t-b.t)*d+(f.t-a.t)*l:0};c.geom.transLeq=function(a,c){return a.t<c.t||a.t===c.t&&a.s<=c.s};c.geom.transEval=
function(a,f,b){c.assert(c.geom.transLeq(a,f)&&c.geom.transLeq(f,b));var d=f.t-a.t,l=b.t-f.t;return 0<d+l?d<l?f.s-a.s+d/(d+l)*(a.s-b.s):f.s-b.s+l/(d+l)*(b.s-a.s):0};c.geom.transSign=function(a,f,b){c.assert(c.geom.transLeq(a,f)&&c.geom.transLeq(f,b));var d=f.t-a.t,l=b.t-f.t;return 0<d+l?(f.s-b.s)*d+(f.s-a.s)*l:0};c.geom.edgeGoesLeft=function(a){return c.geom.vertLeq(a.dst(),a.org)};c.geom.edgeGoesRight=function(a){return c.geom.vertLeq(a.org,a.dst())};c.geom.vertL1dist=function(a,c){return Math.abs(a.s-
c.s)+Math.abs(a.t-c.t)};c.geom.vertCCW=function(a,c,b){return 0<=a.s*(c.t-b.t)+c.s*(b.t-a.t)+b.s*(a.t-c.t)};c.geom.interpolate_=function(a,c,b,d){a=0>a?0:a;b=0>b?0:b;return a<=b?0===b?(c+d)/2:c+a/(a+b)*(d-c):d+b/(a+b)*(c-d)};c.geom.edgeIntersect=function(a,f,b,d,l){var k,e;c.geom.vertLeq(a,f)||(k=a,a=f,f=k);c.geom.vertLeq(b,d)||(k=b,b=d,d=k);c.geom.vertLeq(a,b)||(k=a,a=b,b=k,k=f,f=d,d=k);c.geom.vertLeq(b,f)?c.geom.vertLeq(f,d)?(k=c.geom.edgeEval(a,b,f),e=c.geom.edgeEval(b,f,d),0>k+e&&(k=-k,e=-e),
l.s=c.geom.interpolate_(k,b.s,e,f.s)):(k=c.geom.edgeSign(a,b,f),e=-c.geom.edgeSign(a,d,f),0>k+e&&(k=-k,e=-e),l.s=c.geom.interpolate_(k,b.s,e,d.s)):l.s=(b.s+f.s)/2;c.geom.transLeq(a,f)||(k=a,a=f,f=k);c.geom.transLeq(b,d)||(k=b,b=d,d=k);c.geom.transLeq(a,b)||(k=a,a=b,b=k,k=f,f=d,d=k);c.geom.transLeq(b,f)?c.geom.transLeq(f,d)?(k=c.geom.transEval(a,b,f),e=c.geom.transEval(b,f,d),0>k+e&&(k=-k,e=-e),l.t=c.geom.interpolate_(k,b.t,e,f.t)):(k=c.geom.transSign(a,b,f),e=-c.geom.transSign(a,d,f),0>k+e&&(k=-k,
e=-e),l.t=c.geom.interpolate_(k,b.t,e,d.t)):l.t=(b.t+f.t)/2};c.mesh={};c.mesh.makeEdge=function(a){var f=c.mesh.makeEdgePair_(a.eHead);c.mesh.makeVertex_(f,a.vHead);c.mesh.makeVertex_(f.sym,a.vHead);c.mesh.makeFace_(f,a.fHead);return f};c.mesh.meshSplice=function(a,f){var b=!1,d=!1;a!==f&&(f.org!==a.org&&(d=!0,c.mesh.killVertex_(f.org,a.org)),f.lFace!==a.lFace&&(b=!0,c.mesh.killFace_(f.lFace,a.lFace)),c.mesh.splice_(f,a),d||(c.mesh.makeVertex_(f,a.org),a.org.anEdge=a),b||(c.mesh.makeFace_(f,a.lFace),
a.lFace.anEdge=a))};c.mesh.deleteEdge=function(a){var f=a.sym,b=!1;a.lFace!==a.rFace()&&(b=!0,c.mesh.killFace_(a.lFace,a.rFace()));a.oNext===a?c.mesh.killVertex_(a.org,null):(a.rFace().anEdge=a.oPrev(),a.org.anEdge=a.oNext,c.mesh.splice_(a,a.oPrev()),b||c.mesh.makeFace_(a,a.lFace));f.oNext===f?(c.mesh.killVertex_(f.org,null),c.mesh.killFace_(f.lFace,null)):(a.lFace.anEdge=f.oPrev(),f.org.anEdge=f.oNext,c.mesh.splice_(f,f.oPrev()));c.mesh.killEdge_(a)};c.mesh.addEdgeVertex=function(a){var f=c.mesh.makeEdgePair_(a),
b=f.sym;c.mesh.splice_(f,a.lNext);f.org=a.dst();c.mesh.makeVertex_(b,f.org);f.lFace=b.lFace=a.lFace;return f};c.mesh.splitEdge=function(a){var f=c.mesh.addEdgeVertex(a).sym;c.mesh.splice_(a.sym,a.sym.oPrev());c.mesh.splice_(a.sym,f);a.sym.org=f.org;f.dst().anEdge=f.sym;f.sym.lFace=a.rFace();f.winding=a.winding;f.sym.winding=a.sym.winding;return f};c.mesh.connect=function(a,f){var b=!1,d=c.mesh.makeEdgePair_(a),l=d.sym;f.lFace!==a.lFace&&(b=!0,c.mesh.killFace_(f.lFace,a.lFace));c.mesh.splice_(d,a.lNext);
c.mesh.splice_(l,f);d.org=a.dst();l.org=f.org;d.lFace=l.lFace=a.lFace;a.lFace.anEdge=l;b||c.mesh.makeFace_(d,a.lFace);return d};c.mesh.zapFace=function(a){var f=a.anEdge,b=f.lNext,d;do if(d=b,b=d.lNext,d.lFace=null,null===d.rFace()){d.oNext===d?c.mesh.killVertex_(d.org,null):(d.org.anEdge=d.oNext,c.mesh.splice_(d,d.oPrev()));var l=d.sym;l.oNext===l?c.mesh.killVertex_(l.org,null):(l.org.anEdge=l.oNext,c.mesh.splice_(l,l.oPrev()));c.mesh.killEdge_(d)}while(d!==f);f=a.prev;a=a.next;a.prev=f;f.next=a};
c.mesh.meshUnion=function(a,c){var b=a.fHead,d=a.vHead,f=a.eHead,k=c.fHead,e=c.vHead;c=c.eHead;k.next!==k&&(b.prev.next=k.next,k.next.prev=b.prev,k.prev.next=b,b.prev=k.prev);e.next!==e&&(d.prev.next=e.next,e.next.prev=d.prev,e.prev.next=d,d.prev=e.prev);c.next!==c&&(f.sym.next.sym.next=c.next,c.next.sym.next=f.sym.next,c.sym.next.sym.next=f,f.sym.next=c.sym.next);return a};c.mesh.deleteMesh=function(a){};c.mesh.makeEdgePair_=function(a){var f=new c.GluHalfEdge,b=new c.GluHalfEdge,d=a.sym.next;b.next=
d;d.sym.next=f;f.next=a;a.sym.next=b;f.sym=b;f.oNext=f;f.lNext=b;b.sym=f;b.oNext=b;return b.lNext=f};c.mesh.splice_=function(a,c){var b=a.oNext,d=c.oNext;b.sym.lNext=c;d.sym.lNext=a;a.oNext=d;c.oNext=b};c.mesh.makeVertex_=function(a,f){var b=f.prev,d=new c.GluVertex(f,b);b.next=d;f.prev=d;f=d.anEdge=a;do f.org=d,f=f.oNext;while(f!==a)};c.mesh.makeFace_=function(a,f){var b=f.prev,d=new c.GluFace(f,b);b.next=d;f.prev=d;d.anEdge=a;d.inside=f.inside;f=a;do f.lFace=d,f=f.lNext;while(f!==a)};c.mesh.killEdge_=
function(a){var c=a.next;a=a.sym.next;c.sym.next=a;a.sym.next=c};c.mesh.killVertex_=function(a,c){var b=a.anEdge,d=b;do d.org=c,d=d.oNext;while(d!==b);c=a.prev;a=a.next;a.prev=c;c.next=a};c.mesh.killFace_=function(a,c){var b=a.anEdge,d=b;do d.lFace=c,d=d.lNext;while(d!==b);c=a.prev;a=a.next;a.prev=c;c.next=a};c.normal={};c.normal.S_UNIT_X_=1;c.normal.S_UNIT_Y_=0;c.normal.projectPolygon=function(a,f,b,d){var l=!1,k=[f,b,d];0===f&&0===b&&0===d&&(c.normal.computeNormal_(a,k),l=!0);b=c.normal.longAxis_(k);
f=a.mesh.vHead;if(c.TRUE_PROJECT){c.normal.normalize_(k);d=[0,0,0];var e=[0,0,0];d[b]=0;d[(b+1)%3]=c.normal.S_UNIT_X_;d[(b+2)%3]=c.normal.S_UNIT_Y_;b=c.normal.dot_(d,k);d[0]-=b*k[0];d[1]-=b*k[1];d[2]-=b*k[2];c.normal.normalize_(d);e[0]=k[1]*d[2]-k[2]*d[1];e[1]=k[2]*d[0]-k[0]*d[2];e[2]=k[0]*d[1]-k[1]*d[0];c.normal.normalize_(e);for(k=f.next;k!==f;k=k.next)k.s=c.normal.dot_(k.coords,d),k.t=c.normal.dot_(k.coords,e)}else for(d=(b+1)%3,e=(b+2)%3,b=0<k[b]?1:-1,k=f.next;k!==f;k=k.next)k.s=k.coords[d],k.t=
b*k.coords[e];l&&c.normal.checkOrientation_(a)};c.normal.dot_=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]};c.normal.normalize_=function(a){var f=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];c.assert(0<f);f=Math.sqrt(f);a[0]/=f;a[1]/=f;a[2]/=f};c.normal.longAxis_=function(a){var c=0;Math.abs(a[1])>Math.abs(a[0])&&(c=1);Math.abs(a[2])>Math.abs(a[c])&&(c=2);return c};c.normal.computeNormal_=function(a,f){var b=[-2*c.GLU_TESS_MAX_COORD,-2*c.GLU_TESS_MAX_COORD,-2*c.GLU_TESS_MAX_COORD],d=[2*c.GLU_TESS_MAX_COORD,
2*c.GLU_TESS_MAX_COORD,2*c.GLU_TESS_MAX_COORD],l=[],k=[],e;a=a.mesh.vHead;for(e=a.next;e!==a;e=e.next)for(var h=0;3>h;++h){var p=e.coords[h];p<d[h]&&(d[h]=p,k[h]=e);p>b[h]&&(b[h]=p,l[h]=e)}e=0;b[1]-d[1]>b[0]-d[0]&&(e=1);b[2]-d[2]>b[e]-d[e]&&(e=2);if(d[e]>=b[e])f[0]=0,f[1]=0,f[2]=1;else{b=0;d=k[e];l=l[e];k=[0,0,0];d=[d.coords[0]-l.coords[0],d.coords[1]-l.coords[1],d.coords[2]-l.coords[2]];h=[0,0,0];for(e=a.next;e!==a;e=e.next)h[0]=e.coords[0]-l.coords[0],h[1]=e.coords[1]-l.coords[1],h[2]=e.coords[2]-
l.coords[2],k[0]=d[1]*h[2]-d[2]*h[1],k[1]=d[2]*h[0]-d[0]*h[2],k[2]=d[0]*h[1]-d[1]*h[0],p=k[0]*k[0]+k[1]*k[1]+k[2]*k[2],p>b&&(b=p,f[0]=k[0],f[1]=k[1],f[2]=k[2]);0>=b&&(f[0]=f[1]=f[2]=0,f[c.normal.longAxis_(d)]=1)}};c.normal.checkOrientation_=function(a){for(var c=0,b=a.mesh.fHead,d=b.next;d!==b;d=d.next){var l=d.anEdge;if(!(0>=l.winding)){do c+=(l.org.s-l.dst().s)*(l.org.t+l.dst().t),l=l.lNext;while(l!==d.anEdge)}}if(0>c)for(a=a.mesh.vHead,c=a.next;c!==a;c=c.next)c.t=-c.t};c.render={};c.render.renderMesh=
function(a,f,b){for(var d=!1,l=-1,k=f.fHead.prev;k!==f.fHead;k=k.prev)if(k.inside){d||(a.callBeginCallback(c.primitiveType.GL_TRIANGLES),d=!0);var e=k.anEdge;c.assert(e.lNext.lNext.lNext===e,"renderMesh called with non-triangulated mesh");do{if(b){var h=e.rFace().inside?0:1;l!==h&&(l=h,a.callEdgeFlagCallback(!!l))}a.callVertexCallback(e.org.data);e=e.lNext}while(e!==k.anEdge)}d&&a.callEndCallback()};c.render.renderBoundary=function(a,f){for(var b=f.fHead.next;b!==f.fHead;b=b.next)if(b.inside){a.callBeginCallback(c.primitiveType.GL_LINE_LOOP);
var d=b.anEdge;do a.callVertexCallback(d.org.data),d=d.lNext;while(d!==b.anEdge);a.callEndCallback()}};c.sweep={};c.sweep.SENTINEL_COORD_=4*c.GLU_TESS_MAX_COORD;c.sweep.TOLERANCE_NONZERO_=!1;c.sweep.computeInterior=function(a){a.fatalError=!1;c.sweep.removeDegenerateEdges_(a);c.sweep.initPriorityQ_(a);c.sweep.initEdgeDict_(a);for(var f;null!==(f=a.pq.extractMin());){for(;;){var b=a.pq.minimum();if(null===b||!c.geom.vertEq(b,f))break;b=a.pq.extractMin();c.sweep.spliceMergeVertices_(a,f.anEdge,b.anEdge)}c.sweep.sweepEvent_(a,
f)}f=a.dict.getMin().getKey();a.event=f.eUp.org;c.sweep.doneEdgeDict_(a);c.sweep.donePriorityQ_(a);c.sweep.removeDegenerateFaces_(a.mesh);a.mesh.checkMesh()};c.sweep.addWinding_=function(a,c){a.winding+=c.winding;a.sym.winding+=c.sym.winding};c.sweep.edgeLeq_=function(a,f,b){a=a.event;f=f.eUp;b=b.eUp;if(f.dst()===a)return b.dst()===a?c.geom.vertLeq(f.org,b.org)?0>=c.geom.edgeSign(b.dst(),f.org,b.org):0<=c.geom.edgeSign(f.dst(),b.org,f.org):0>=c.geom.edgeSign(b.dst(),a,b.org);if(b.dst()===a)return 0<=
c.geom.edgeSign(f.dst(),a,f.org);f=c.geom.edgeEval(f.dst(),a,f.org);a=c.geom.edgeEval(b.dst(),a,b.org);return f>=a};c.sweep.deleteRegion_=function(a,f){f.fixUpperEdge&&c.assert(0===f.eUp.winding);f.eUp.activeRegion=null;a.dict.deleteNode(f.nodeUp);f.nodeUp=null};c.sweep.fixUpperEdge_=function(a,f){c.assert(a.fixUpperEdge);c.mesh.deleteEdge(a.eUp);a.fixUpperEdge=!1;a.eUp=f;f.activeRegion=a};c.sweep.topLeftRegion_=function(a){var f=a.eUp.org;do a=a.regionAbove();while(a.eUp.org===f);a.fixUpperEdge&&
(f=c.mesh.connect(a.regionBelow().eUp.sym,a.eUp.lNext),c.sweep.fixUpperEdge_(a,f),a=a.regionAbove());return a};c.sweep.topRightRegion_=function(a){var c=a.eUp.dst();do a=a.regionAbove();while(a.eUp.dst()===c);return a};c.sweep.addRegionBelow_=function(a,f,b){var d=new c.ActiveRegion;d.eUp=b;d.nodeUp=a.dict.insertBefore(f.nodeUp,d);return b.activeRegion=d};c.sweep.isWindingInside_=function(a,f){switch(a.windingRule){case c.windingRule.GLU_TESS_WINDING_ODD:return 0!==(f&1);case c.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==
f;case c.windingRule.GLU_TESS_WINDING_POSITIVE:return 0<f;case c.windingRule.GLU_TESS_WINDING_NEGATIVE:return 0>f;case c.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return 2<=f||-2>=f}c.assert(!1);return!1};c.sweep.computeWinding_=function(a,f){f.windingNumber=f.regionAbove().windingNumber+f.eUp.winding;f.inside=c.sweep.isWindingInside_(a,f.windingNumber)};c.sweep.finishRegion_=function(a,f){var b=f.eUp,d=b.lFace;d.inside=f.inside;d.anEdge=b;c.sweep.deleteRegion_(a,f)};c.sweep.finishLeftRegions_=function(a,
f,b){var d=f;for(f=f.eUp;d!==b;){d.fixUpperEdge=!1;var l=d.regionBelow(),k=l.eUp;if(k.org!==f.org){if(!l.fixUpperEdge){c.sweep.finishRegion_(a,d);break}k=c.mesh.connect(f.lPrev(),k.sym);c.sweep.fixUpperEdge_(l,k)}f.oNext!==k&&(c.mesh.meshSplice(k.oPrev(),k),c.mesh.meshSplice(f,k));c.sweep.finishRegion_(a,d);f=l.eUp;d=l}return f};c.sweep.addRightEdges_=function(a,f,b,d,l,k){var e=!0;do c.assert(c.geom.vertLeq(b.org,b.dst())),c.sweep.addRegionBelow_(a,f,b.sym),b=b.oNext;while(b!==d);for(null===l&&(l=
f.regionBelow().eUp.rPrev());;){d=f.regionBelow();b=d.eUp.sym;if(b.org!==l.org)break;b.oNext!==l&&(c.mesh.meshSplice(b.oPrev(),b),c.mesh.meshSplice(l.oPrev(),b));d.windingNumber=f.windingNumber-b.winding;d.inside=c.sweep.isWindingInside_(a,d.windingNumber);f.dirty=!0;!e&&c.sweep.checkForRightSplice_(a,f)&&(c.sweep.addWinding_(b,l),c.sweep.deleteRegion_(a,f),c.mesh.deleteEdge(l));e=!1;f=d;l=b}f.dirty=!0;c.assert(f.windingNumber-b.winding===d.windingNumber);k&&c.sweep.walkDirtyRegions_(a,f)};c.sweep.callCombine_=
function(a,f,b,d,l){var k=[f.coords[0],f.coords[1],f.coords[2]];f.data=null;f.data=a.callCombineCallback(k,b,d);null===f.data&&(l?a.fatalError||(a.callErrorCallback(c.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),a.fatalError=!0):f.data=b[0])};c.sweep.spliceMergeVertices_=function(a,f,b){var d=[null,null,null,null];d[0]=f.org.data;d[1]=b.org.data;c.sweep.callCombine_(a,f.org,d,[.5,.5,0,0],!1);c.mesh.meshSplice(f,b)};c.sweep.vertexWeights_=function(a,f,b,d,l){var k=c.geom.vertL1dist(f,a),e=c.geom.vertL1dist(b,
a),h=l+1;d[l]=.5*e/(k+e);d[h]=.5*k/(k+e);a.coords[0]+=d[l]*f.coords[0]+d[h]*b.coords[0];a.coords[1]+=d[l]*f.coords[1]+d[h]*b.coords[1];a.coords[2]+=d[l]*f.coords[2]+d[h]*b.coords[2]};c.sweep.getIntersectData_=function(a,f,b,d,l,k){var e=[0,0,0,0],h=[b.data,d.data,l.data,k.data];f.coords[0]=f.coords[1]=f.coords[2]=0;c.sweep.vertexWeights_(f,b,d,e,0);c.sweep.vertexWeights_(f,l,k,e,2);c.sweep.callCombine_(a,f,h,e,!0)};c.sweep.checkForRightSplice_=function(a,f){var b=f.regionBelow(),d=f.eUp,l=b.eUp;if(c.geom.vertLeq(d.org,
l.org)){if(0<c.geom.edgeSign(l.dst(),d.org,l.org))return!1;c.geom.vertEq(d.org,l.org)?d.org!==l.org&&(a.pq.remove(d.org.pqHandle),c.sweep.spliceMergeVertices_(a,l.oPrev(),d)):(c.mesh.splitEdge(l.sym),c.mesh.meshSplice(d,l.oPrev()),f.dirty=b.dirty=!0)}else{if(0>c.geom.edgeSign(d.dst(),l.org,d.org))return!1;f.regionAbove().dirty=f.dirty=!0;c.mesh.splitEdge(d.sym);c.mesh.meshSplice(l.oPrev(),d)}return!0};c.sweep.checkForLeftSplice_=function(a,f){var b=f.regionBelow();a=f.eUp;var d=b.eUp;c.assert(!c.geom.vertEq(a.dst(),
d.dst()));if(c.geom.vertLeq(a.dst(),d.dst())){if(0>c.geom.edgeSign(a.dst(),d.dst(),a.org))return!1;f.regionAbove().dirty=f.dirty=!0;b=c.mesh.splitEdge(a);c.mesh.meshSplice(d.sym,b);b.lFace.inside=f.inside}else{if(0<c.geom.edgeSign(d.dst(),a.dst(),d.org))return!1;f.dirty=b.dirty=!0;b=c.mesh.splitEdge(d);c.mesh.meshSplice(a.lNext,d.sym);b.rFace().inside=f.inside}return!0};c.sweep.checkForIntersect_=function(a,f){var b=f.regionBelow(),d=f.eUp,l=b.eUp,k=d.org,e=l.org,h=d.dst(),p=l.dst(),g=new c.GluVertex;
c.assert(!c.geom.vertEq(p,h));c.assert(0>=c.geom.edgeSign(h,a.event,k));c.assert(0<=c.geom.edgeSign(p,a.event,e));c.assert(k!==a.event&&e!==a.event);c.assert(!f.fixUpperEdge&&!b.fixUpperEdge);if(k===e||Math.min(k.t,h.t)>Math.max(e.t,p.t))return!1;if(c.geom.vertLeq(k,e)){if(0<c.geom.edgeSign(p,k,e))return!1}else if(0>c.geom.edgeSign(h,e,k))return!1;c.geom.edgeIntersect(h,k,p,e,g);c.assert(Math.min(k.t,h.t)<=g.t);c.assert(g.t<=Math.max(e.t,p.t));c.assert(Math.min(p.s,h.s)<=g.s);c.assert(g.s<=Math.max(e.s,
k.s));c.geom.vertLeq(g,a.event)&&(g.s=a.event.s,g.t=a.event.t);var q=c.geom.vertLeq(k,e)?k:e;c.geom.vertLeq(q,g)&&(g.s=q.s,g.t=q.t);if(c.geom.vertEq(g,k)||c.geom.vertEq(g,e))return c.sweep.checkForRightSplice_(a,f),!1;if(!c.geom.vertEq(h,a.event)&&0<=c.geom.edgeSign(h,a.event,g)||!c.geom.vertEq(p,a.event)&&0>=c.geom.edgeSign(p,a.event,g)){if(p===a.event)return c.mesh.splitEdge(d.sym),c.mesh.meshSplice(l.sym,d),f=c.sweep.topLeftRegion_(f),d=f.regionBelow().eUp,c.sweep.finishLeftRegions_(a,f.regionBelow(),
b),c.sweep.addRightEdges_(a,f,d.oPrev(),d,d,!0),!0;if(h===a.event)return c.mesh.splitEdge(l.sym),c.mesh.meshSplice(d.lNext,l.oPrev()),b=f,f=c.sweep.topRightRegion_(f),k=f.regionBelow().eUp.rPrev(),b.eUp=l.oPrev(),l=c.sweep.finishLeftRegions_(a,b,null),c.sweep.addRightEdges_(a,f,l.oNext,d.rPrev(),k,!0),!0;0<=c.geom.edgeSign(h,a.event,g)&&(f.regionAbove().dirty=f.dirty=!0,c.mesh.splitEdge(d.sym),d.org.s=a.event.s,d.org.t=a.event.t);0>=c.geom.edgeSign(p,a.event,g)&&(f.dirty=b.dirty=!0,c.mesh.splitEdge(l.sym),
l.org.s=a.event.s,l.org.t=a.event.t);return!1}c.mesh.splitEdge(d.sym);c.mesh.splitEdge(l.sym);c.mesh.meshSplice(l.oPrev(),d);d.org.s=g.s;d.org.t=g.t;d.org.pqHandle=a.pq.insert(d.org);c.sweep.getIntersectData_(a,d.org,k,h,e,p);f.regionAbove().dirty=f.dirty=b.dirty=!0;return!1};c.sweep.walkDirtyRegions_=function(a,f){for(var b=f.regionBelow();;){for(;b.dirty;)f=b,b=b.regionBelow();if(!f.dirty&&(b=f,f=f.regionAbove(),null===f||!f.dirty))break;f.dirty=!1;var d=f.eUp,l=b.eUp;d.dst()!==l.dst()&&c.sweep.checkForLeftSplice_(a,
f)&&(b.fixUpperEdge?(c.sweep.deleteRegion_(a,b),c.mesh.deleteEdge(l),b=f.regionBelow(),l=b.eUp):f.fixUpperEdge&&(c.sweep.deleteRegion_(a,f),c.mesh.deleteEdge(d),f=b.regionAbove(),d=f.eUp));if(d.org!==l.org)if(d.dst()===l.dst()||f.fixUpperEdge||b.fixUpperEdge||d.dst()!==a.event&&l.dst()!==a.event)c.sweep.checkForRightSplice_(a,f);else if(c.sweep.checkForIntersect_(a,f))break;d.org===l.org&&d.dst()===l.dst()&&(c.sweep.addWinding_(l,d),c.sweep.deleteRegion_(a,f),c.mesh.deleteEdge(d),f=b.regionAbove())}};
c.sweep.connectRightVertex_=function(a,f,b){var d=b.oNext,l=f.regionBelow(),k=f.eUp,e=l.eUp,h=!1;k.dst()!==e.dst()&&c.sweep.checkForIntersect_(a,f);c.geom.vertEq(k.org,a.event)&&(c.mesh.meshSplice(d.oPrev(),k),f=c.sweep.topLeftRegion_(f),d=f.regionBelow().eUp,c.sweep.finishLeftRegions_(a,f.regionBelow(),l),h=!0);c.geom.vertEq(e.org,a.event)&&(c.mesh.meshSplice(b,e.oPrev()),b=c.sweep.finishLeftRegions_(a,l,null),h=!0);h?c.sweep.addRightEdges_(a,f,b.oNext,d,d,!0):(d=c.geom.vertLeq(e.org,k.org)?e.oPrev():
k,d=c.mesh.connect(b.lPrev(),d),c.sweep.addRightEdges_(a,f,d,d.oNext,d.oNext,!1),d.sym.activeRegion.fixUpperEdge=!0,c.sweep.walkDirtyRegions_(a,f))};c.sweep.connectLeftDegenerate_=function(a,f,b){var d=f.eUp;if(c.geom.vertEq(d.org,b))c.assert(c.sweep.TOLERANCE_NONZERO_),c.sweep.TOLERANCE_NONZERO_&&c.sweep.spliceMergeVertices_(a,d,b.anEdge);else if(c.geom.vertEq(d.dst(),b)){if(c.assert(c.sweep.TOLERANCE_NONZERO_),c.sweep.TOLERANCE_NONZERO_){f=c.sweep.topRightRegion_(f);var d=f.regionBelow(),l=d.eUp.sym,
k=l.oNext,e=k;d.fixUpperEdge&&(c.assert(k!==l),c.sweep.deleteRegion_(a,d),c.mesh.deleteEdge(l),l=k.oPrev());c.mesh.meshSplice(b.anEdge,l);c.geom.edgeGoesLeft(k)||(k=null);c.sweep.addRightEdges_(a,f,l.oNext,e,k,!0)}}else c.mesh.splitEdge(d.sym),f.fixUpperEdge&&(c.mesh.deleteEdge(d.oNext),f.fixUpperEdge=!1),c.mesh.meshSplice(b.anEdge,d),c.sweep.sweepEvent_(a,b)};c.sweep.connectLeftVertex_=function(a,f){var b=new c.ActiveRegion;b.eUp=f.anEdge.sym;var b=a.dict.search(b).getKey(),d=b.regionBelow(),l=b.eUp,
k=d.eUp;0===c.geom.edgeSign(l.dst(),f,l.org)?c.sweep.connectLeftDegenerate_(a,b,f):(d=c.geom.vertLeq(k.dst(),l.dst())?b:d,b.inside||d.fixUpperEdge?(l=d===b?c.mesh.connect(f.anEdge.sym,l.lNext):c.mesh.connect(k.dNext(),f.anEdge).sym,d.fixUpperEdge?c.sweep.fixUpperEdge_(d,l):c.sweep.computeWinding_(a,c.sweep.addRegionBelow_(a,b,l)),c.sweep.sweepEvent_(a,f)):c.sweep.addRightEdges_(a,b,f.anEdge,f.anEdge,null,!0))};c.sweep.sweepEvent_=function(a,f){a.event=f;for(var b=f.anEdge;null===b.activeRegion;)if(b=
b.oNext,b===f.anEdge){c.sweep.connectLeftVertex_(a,f);return}f=c.sweep.topLeftRegion_(b.activeRegion);var d=f.regionBelow(),b=d.eUp,d=c.sweep.finishLeftRegions_(a,d,null);d.oNext===b?c.sweep.connectRightVertex_(a,f,d):c.sweep.addRightEdges_(a,f,d.oNext,b,b,!0)};c.sweep.addSentinel_=function(a,f){var b=new c.ActiveRegion,d=c.mesh.makeEdge(a.mesh);d.org.s=c.sweep.SENTINEL_COORD_;d.org.t=f;d.dst().s=-c.sweep.SENTINEL_COORD_;d.dst().t=f;a.event=d.dst();b.eUp=d;b.windingNumber=0;b.inside=!1;b.fixUpperEdge=
!1;b.sentinel=!0;b.dirty=!1;b.nodeUp=a.dict.insert(b)};c.sweep.initEdgeDict_=function(a){a.dict=new c.Dict(a,c.sweep.edgeLeq_);c.sweep.addSentinel_(a,-c.sweep.SENTINEL_COORD_);c.sweep.addSentinel_(a,c.sweep.SENTINEL_COORD_)};c.sweep.doneEdgeDict_=function(a){for(var f=0,b;null!==(b=a.dict.getMin().getKey());)b.sentinel||(c.assert(b.fixUpperEdge),c.assert(1===++f)),c.assert(0===b.windingNumber),c.sweep.deleteRegion_(a,b);a.dict=null};c.sweep.removeDegenerateEdges_=function(a){for(var f=a.mesh.eHead,
b,d=f.next;d!==f;d=b){b=d.next;var l=d.lNext;c.geom.vertEq(d.org,d.dst())&&d.lNext.lNext!==d&&(c.sweep.spliceMergeVertices_(a,l,d),c.mesh.deleteEdge(d),d=l,l=d.lNext);if(l.lNext===d){if(l!==d){if(l===b||l===b.sym)b=b.next;c.mesh.deleteEdge(l)}if(d===b||d===b.sym)b=b.next;c.mesh.deleteEdge(d)}}};c.sweep.initPriorityQ_=function(a){var f=new c.PriorityQ;a.pq=f;a=a.mesh.vHead;var b;for(b=a.next;b!==a;b=b.next)b.pqHandle=f.insert(b);f.init()};c.sweep.donePriorityQ_=function(a){a.pq.deleteQ();a.pq=null};
c.sweep.removeDegenerateFaces_=function(a){for(var f,b=a.fHead.next;b!==a.fHead;b=f)f=b.next,b=b.anEdge,c.assert(b.lNext!==b),b.lNext.lNext===b&&(c.sweep.addWinding_(b.oNext,b),c.mesh.deleteEdge(b))};c.tessmono={};c.tessmono.tessellateMonoRegion_=function(a){a=a.anEdge;for(c.assert(a.lNext!==a&&a.lNext.lNext!==a);c.geom.vertLeq(a.dst(),a.org);a=a.lPrev());for(;c.geom.vertLeq(a.org,a.dst());a=a.lNext);for(var f=a.lPrev(),b;a.lNext!==f;)if(c.geom.vertLeq(a.dst(),f.org)){for(;f.lNext!==a&&(c.geom.edgeGoesLeft(f.lNext)||
0>=c.geom.edgeSign(f.org,f.dst(),f.lNext.dst()));)b=c.mesh.connect(f.lNext,f),f=b.sym;f=f.lPrev()}else{for(;f.lNext!==a&&(c.geom.edgeGoesRight(a.lPrev())||0<=c.geom.edgeSign(a.dst(),a.org,a.lPrev().org));)b=c.mesh.connect(a,a.lPrev()),a=b.sym;a=a.lNext}for(c.assert(f.lNext!==a);f.lNext.lNext!==a;)b=c.mesh.connect(f.lNext,f),f=b.sym};c.tessmono.tessellateInterior=function(a){for(var f,b=a.fHead.next;b!==a.fHead;b=f)f=b.next,b.inside&&c.tessmono.tessellateMonoRegion_(b)};c.tessmono.discardExterior=
function(a){for(var f,b=a.fHead.next;b!==a.fHead;b=f)f=b.next,b.inside||c.mesh.zapFace(b)};c.tessmono.setWindingNumber=function(a,f,b){for(var d,l=a.eHead.next;l!==a.eHead;l=d)d=l.next,l.rFace().inside!==l.lFace.inside?l.winding=l.lFace.inside?f:-f:b?c.mesh.deleteEdge(l):l.winding=0};c.Dict=function(a,f){this.head_=new c.DictNode;this.frame_=a;this.leq_=f};c.Dict.prototype.deleteDict_=function(){};c.Dict.prototype.insertBefore=function(a,f){do a=a.prev;while(null!==a.key&&!this.leq_(this.frame_,a.key,
f));f=new c.DictNode(f,a.next,a);a.next.prev=f;return a.next=f};c.Dict.prototype.insert=function(a){return this.insertBefore(this.head_,a)};c.Dict.prototype.deleteNode=function(a){a.next.prev=a.prev;a.prev.next=a.next};c.Dict.prototype.search=function(a){var c=this.head_;do c=c.next;while(null!==c.key&&!this.leq_(this.frame_,a,c.key));return c};c.Dict.prototype.getMin=function(){return this.head_.next};c.Dict.prototype.getMax=function(){return this.head_.prev};c.DictNode=function(a,c,b){this.key=
a||null;this.next=c||this;this.prev=b||this};c.DictNode.prototype.getKey=function(){return this.key};c.DictNode.prototype.getSuccessor=function(){return this.next};c.DictNode.prototype.getPredecessor=function(){return this.prev};c.GluTesselator=function(){this.state_=c.GluTesselator.tessState_.T_DORMANT;this.errorCallback_=this.mesh=this.lastEdge_=null;this.normal_=[0,0,0];this.windingRule=c.windingRule.GLU_TESS_WINDING_ODD;this.fatalError=!1;this.combineCallback_=this.event=this.pq=this.dict=null;
this.boundaryOnly_=!1;this.polygonData_=this.meshCallback_=this.endCallback_=this.vertexCallback_=this.edgeFlagCallback_=this.beginCallback_=null};c.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2};c.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(c.GluTesselator.tessState_.T_DORMANT)};c.GluTesselator.prototype.gluTessProperty=function(a,f){switch(a){case c.gluEnum.GLU_TESS_TOLERANCE:return;case c.gluEnum.GLU_TESS_WINDING_RULE:switch(f){case c.windingRule.GLU_TESS_WINDING_ODD:case c.windingRule.GLU_TESS_WINDING_NONZERO:case c.windingRule.GLU_TESS_WINDING_POSITIVE:case c.windingRule.GLU_TESS_WINDING_NEGATIVE:case c.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:this.windingRule=
f;return}break;case c.gluEnum.GLU_TESS_BOUNDARY_ONLY:this.boundaryOnly_=!!f;return;default:this.callErrorCallback(c.gluEnum.GLU_INVALID_ENUM);return}this.callErrorCallback(c.gluEnum.GLU_INVALID_VALUE)};c.GluTesselator.prototype.gluGetTessProperty=function(a){switch(a){case c.gluEnum.GLU_TESS_TOLERANCE:return 0;case c.gluEnum.GLU_TESS_WINDING_RULE:return a=this.windingRule,c.assert(a===c.windingRule.GLU_TESS_WINDING_ODD||a===c.windingRule.GLU_TESS_WINDING_NONZERO||a===c.windingRule.GLU_TESS_WINDING_POSITIVE||
a===c.windingRule.GLU_TESS_WINDING_NEGATIVE||a===c.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO),a;case c.gluEnum.GLU_TESS_BOUNDARY_ONLY:return c.assert(!0===this.boundaryOnly_||!1===this.boundaryOnly_),this.boundaryOnly_;default:this.callErrorCallback(c.gluEnum.GLU_INVALID_ENUM)}return!1};c.GluTesselator.prototype.gluTessNormal=function(a,c,b){this.normal_[0]=a;this.normal_[1]=c;this.normal_[2]=b};c.GluTesselator.prototype.gluTessCallback=function(a,f){f=f?f:null;switch(a){case c.gluEnum.GLU_TESS_BEGIN:case c.gluEnum.GLU_TESS_BEGIN_DATA:this.beginCallback_=
f;break;case c.gluEnum.GLU_TESS_EDGE_FLAG:case c.gluEnum.GLU_TESS_EDGE_FLAG_DATA:this.edgeFlagCallback_=f;break;case c.gluEnum.GLU_TESS_VERTEX:case c.gluEnum.GLU_TESS_VERTEX_DATA:this.vertexCallback_=f;break;case c.gluEnum.GLU_TESS_END:case c.gluEnum.GLU_TESS_END_DATA:this.endCallback_=f;break;case c.gluEnum.GLU_TESS_ERROR:case c.gluEnum.GLU_TESS_ERROR_DATA:this.errorCallback_=f;break;case c.gluEnum.GLU_TESS_COMBINE:case c.gluEnum.GLU_TESS_COMBINE_DATA:this.combineCallback_=f;break;case c.gluEnum.GLU_TESS_MESH:this.meshCallback_=
f;break;default:this.callErrorCallback(c.gluEnum.GLU_INVALID_ENUM)}};c.GluTesselator.prototype.gluTessVertex=function(a,f){var b=!1,d=[0,0,0];this.requireState_(c.GluTesselator.tessState_.T_IN_CONTOUR);for(var l=0;3>l;++l){var k=a[l];k<-c.GLU_TESS_MAX_COORD&&(k=-c.GLU_TESS_MAX_COORD,b=!0);k>c.GLU_TESS_MAX_COORD&&(k=c.GLU_TESS_MAX_COORD,b=!0);d[l]=k}b&&this.callErrorCallback(c.errorType.GLU_TESS_COORD_TOO_LARGE);this.addVertex_(d,f)};c.GluTesselator.prototype.gluTessBeginPolygon=function(a){this.requireState_(c.GluTesselator.tessState_.T_DORMANT);
this.state_=c.GluTesselator.tessState_.T_IN_POLYGON;this.mesh=new c.GluMesh;this.polygonData_=a};c.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(c.GluTesselator.tessState_.T_IN_POLYGON);this.state_=c.GluTesselator.tessState_.T_IN_CONTOUR;this.lastEdge_=null};c.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(c.GluTesselator.tessState_.T_IN_CONTOUR);this.state_=c.GluTesselator.tessState_.T_IN_POLYGON};c.GluTesselator.prototype.gluTessEndPolygon=function(){this.requireState_(c.GluTesselator.tessState_.T_IN_POLYGON);
this.state_=c.GluTesselator.tessState_.T_DORMANT;c.normal.projectPolygon(this,this.normal_[0],this.normal_[1],this.normal_[2]);c.sweep.computeInterior(this);if(!this.fatalError){var a=this.mesh;this.boundaryOnly_?c.tessmono.setWindingNumber(a,1,!0):c.tessmono.tessellateInterior(a);this.mesh.checkMesh();if(this.beginCallback_||this.endCallback_||this.vertexCallback_||this.edgeFlagCallback_)this.boundaryOnly_?c.render.renderBoundary(this,this.mesh):c.render.renderMesh(this,this.mesh,!!this.edgeFlagCallback_);
if(this.meshCallback_){c.tessmono.discardExterior(this.mesh);this.meshCallback_(this.mesh);this.polygonData_=this.mesh=null;return}}c.mesh.deleteMesh(this.mesh);this.mesh=this.polygonData_=null};c.GluTesselator.prototype.requireState_=function(a){this.state_!==a&&this.gotoState_(a)};c.GluTesselator.prototype.gotoState_=function(a){for(;this.state_!==a;)if(this.state_<a)switch(this.state_){case c.GluTesselator.tessState_.T_DORMANT:this.callErrorCallback(c.errorType.GLU_TESS_MISSING_BEGIN_POLYGON);
this.gluTessBeginPolygon(null);break;case c.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(c.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state_){case c.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorCallback(c.errorType.GLU_TESS_MISSING_END_CONTOUR);this.gluTessEndContour();break;case c.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorCallback(c.errorType.GLU_TESS_MISSING_END_POLYGON),this.gluTessEndPolygon()}};c.GluTesselator.prototype.addVertex_=
function(a,f){var b=this.lastEdge_;null===b?(b=c.mesh.makeEdge(this.mesh),c.mesh.meshSplice(b,b.sym)):(c.mesh.splitEdge(b),b=b.lNext);b.org.data=f;b.org.coords[0]=a[0];b.org.coords[1]=a[1];b.org.coords[2]=a[2];b.winding=1;b.sym.winding=-1;this.lastEdge_=b};c.GluTesselator.prototype.callBeginCallback=function(a){this.beginCallback_&&this.beginCallback_(a,this.polygonData_)};c.GluTesselator.prototype.callVertexCallback=function(a){this.vertexCallback_&&this.vertexCallback_(a,this.polygonData_)};c.GluTesselator.prototype.callEdgeFlagCallback=
function(a){this.edgeFlagCallback_&&this.edgeFlagCallback_(a,this.polygonData_)};c.GluTesselator.prototype.callEndCallback=function(){this.endCallback_&&this.endCallback_(this.polygonData_)};c.GluTesselator.prototype.callCombineCallback=function(a,c,b){return this.combineCallback_?this.combineCallback_(a,c,b,this.polygonData_)||null:null};c.GluTesselator.prototype.callErrorCallback=function(a){this.errorCallback_&&this.errorCallback_(a,this.polygonData_)};c.GluFace=function(a,c){this.next=a||this;
this.prev=c||this;this.anEdge=null;this.inside=!1};c.GluHalfEdge=function(a){this.next=a||this;this.activeRegion=this.lFace=this.org=this.lNext=this.oNext=this.sym=null;this.winding=0};c.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace};c.GluHalfEdge.prototype.dst=function(){return this.sym.org};c.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext};c.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym};c.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym};
c.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext};c.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym};c.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym};c.GluMesh=function(){this.vHead=new c.GluVertex;this.fHead=new c.GluFace;this.eHead=new c.GluHalfEdge;this.eHeadSym=new c.GluHalfEdge;this.eHead.sym=this.eHeadSym;this.eHeadSym.sym=this.eHead};c.GluMesh.prototype.checkMesh=function(){if(c.DEBUG){var a=this.fHead,f=this.vHead,b=this.eHead,d,l;for(d=d=a;(l=
d.next)!==a;d=l){c.assert(l.prev===d);d=l.anEdge;do c.assert(d.sym!==d),c.assert(d.sym.sym===d),c.assert(d.lNext.oNext.sym===d),c.assert(d.oNext.sym.lNext===d),c.assert(d.lFace===l),d=d.lNext;while(d!==l.anEdge)}c.assert(l.prev===d&&null===l.anEdge);for(d=d=f;(a=d.next)!==f;d=a){c.assert(a.prev===d);d=a.anEdge;do c.assert(d.sym!==d),c.assert(d.sym.sym===d),c.assert(d.lNext.oNext.sym===d),c.assert(d.oNext.sym.lNext===d),c.assert(d.org===a),d=d.oNext;while(d!==a.anEdge)}c.assert(a.prev===d&&null===
a.anEdge&&null===a.data);for(f=f=b;(d=f.next)!==b;f=d)c.assert(d.sym.next===f.sym),c.assert(d.sym!==d),c.assert(d.sym.sym===d),c.assert(null!==d.org),c.assert(null!==d.dst()),c.assert(d.lNext.oNext.sym===d),c.assert(d.oNext.sym.lNext===d);c.assert(d.sym.next===f.sym&&d.sym===this.eHeadSym&&d.sym.sym===d&&null===d.org&&null===d.dst()&&null===d.lFace&&null===d.rFace())}};c.GluVertex=function(a,c){this.next=a||this;this.prev=c||this;this.data=this.anEdge=null;this.coords=[0,0,0];this.pqHandle=this.t=
this.s=0};c.PriorityQ=function(){this.verts_=[];this.order_=null;this.size_=0;this.initialized_=!1;this.heap_=new c.PriorityQHeap};c.PriorityQ.prototype.deleteQ=function(){this.verts_=this.order_=this.heap_=null};c.PriorityQ.prototype.init=function(){this.order_=[];for(var a=0;a<this.size_;a++)this.order_[a]=a;a=function(a){return function(b,f){return c.geom.vertLeq(a[b],a[f])?1:-1}}(this.verts_);this.order_.sort(a);this.initialized_=!0;this.heap_.init();if(c.DEBUG)for(var f=0+this.size_-1,a=0;a<
f;++a)c.assert(c.geom.vertLeq(this.verts_[this.order_[a+1]],this.verts_[this.order_[a]]))};c.PriorityQ.prototype.insert=function(a){if(this.initialized_)return this.heap_.insert(a);var c=this.size_++;this.verts_[c]=a;return-(c+1)};c.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var f=this.heap_.minimum();if(c.geom.vertLeq(f,a))return this.heap_.extractMin()}do--this.size_;while(0<this.size_&&
null===this.verts_[this.order_[this.size_-1]]);return a};c.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var a=this.verts_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var f=this.heap_.minimum();if(c.geom.vertLeq(f,a))return f}return a};c.PriorityQ.prototype.remove=function(a){if(0<=a)this.heap_.remove(a);else for(a=-(a+1),c.assert(a<this.verts_.length&&null!==this.verts_[a]),this.verts_[a]=null;0<this.size_&&null===this.verts_[this.order_[this.size_-
1]];)--this.size_};c.PriorityQHeap=function(){this.heap_=c.PriorityQHeap.reallocNumeric_([0],c.PriorityQHeap.INIT_SIZE_+1);this.verts_=[null,null];this.handles_=[0,0];this.size_=0;this.max_=c.PriorityQHeap.INIT_SIZE_;this.freeList_=0;this.initialized_=!1;this.heap_[1]=1};c.PriorityQHeap.INIT_SIZE_=32;c.PriorityQHeap.reallocNumeric_=function(a,c){for(var b=Array(c),d=0;d<a.length;d++)b[d]=a[d];for(;d<c;d++)b[d]=0;return b};c.PriorityQHeap.prototype.init=function(){for(var a=this.size_;1<=a;--a)this.floatDown_(a);
this.initialized_=!0};c.PriorityQHeap.prototype.insert=function(a){var f=++this.size_;2*f>this.max_&&(this.max_*=2,this.handles_=c.PriorityQHeap.reallocNumeric_(this.handles_,this.max_+1));var b;0===this.freeList_?b=f:(b=this.freeList_,this.freeList_=this.handles_[this.freeList_]);this.verts_[b]=a;this.handles_[b]=f;this.heap_[f]=b;this.initialized_&&this.floatUp_(f);return b};c.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_};c.PriorityQHeap.prototype.minimum=function(){return this.verts_[this.heap_[1]]};
c.PriorityQHeap.prototype.extractMin=function(){var a=this.heap_,c=this.verts_,b=this.handles_,d=a[1],l=c[d];0<this.size_&&(a[1]=a[this.size_],b[a[1]]=1,c[d]=null,b[d]=this.freeList_,this.freeList_=d,0<--this.size_&&this.floatDown_(1));return l};c.PriorityQHeap.prototype.remove=function(a){var f=this.heap_,b=this.verts_,d=this.handles_;c.assert(1<=a&&a<=this.max_&&null!==b[a]);var l=d[a];f[l]=f[this.size_];d[f[l]]=l;l<=--this.size_&&(1>=l?this.floatDown_(l):c.geom.vertLeq(b[f[l>>1]],b[f[l]])?this.floatDown_(l):
this.floatUp_(l));b[a]=null;d[a]=this.freeList_;this.freeList_=a};c.PriorityQHeap.prototype.floatDown_=function(a){for(var f=this.heap_,b=this.verts_,d=this.handles_,l=f[a];;){var k=a<<1;k<this.size_&&c.geom.vertLeq(b[f[k+1]],b[f[k]])&&(k+=1);c.assert(k<=this.max_);var e=f[k];if(k>this.size_||c.geom.vertLeq(b[l],b[e])){f[a]=l;d[l]=a;break}f[a]=e;d[e]=a;a=k}};c.PriorityQHeap.prototype.floatUp_=function(a){for(var f=this.heap_,b=this.verts_,d=this.handles_,l=f[a];;){var k=a>>1,e=f[k];if(0===k||c.geom.vertLeq(b[e],
b[l])){f[a]=l;d[l]=a;break}f[a]=e;d[e]=a;a=k}};c.ActiveRegion=function(){this.nodeUp=this.eUp=null;this.windingNumber=0;this.fixUpperEdge=this.dirty=this.sentinel=this.inside=!1};c.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()};c.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};return c})},"esri/views/2d/layers/features/processors/BaseProcessor":function(){define("require exports ../../../../../core/tsSupport/declareExtendsHelper ../../../../../core/tsSupport/decorateHelper ../../../../../core/Accessor ../../../../../core/HandleOwner ../../../../../core/accessorSupport/decorators ../../../support/Evented".split(" "),
function(c,a,f,b,d,l,k,e){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){return null!==a&&a.apply(this,arguments)||this}f(c,a);c.prototype.initialize=function(){this.handles.add([this.tileStore.on("update",this.onTileUpdate.bind(this))])};c.prototype.destroy=function(){};Object.defineProperty(c.prototype,"supportsTileUpdates",{get:function(){return!1},enumerable:!0,configurable:!0});Object.defineProperty(c.prototype,"spatialReference",{get:function(){var a=this.get("tileStore.spatialReference");
return a&&a.toJSON()||null},enumerable:!0,configurable:!0});b([k.property({readOnly:!0})],c.prototype,"supportsTileUpdates",null);b([k.property({constructOnly:!0})],c.prototype,"remoteClient",void 0);b([k.property({constructOnly:!0})],c.prototype,"service",void 0);b([k.property({dependsOn:["tileStore.spatialReference"]})],c.prototype,"spatialReference",null);b([k.property({constructOnly:!0})],c.prototype,"tileInfo",void 0);b([k.property({constructOnly:!0})],c.prototype,"tileStore",void 0);return c=
b([k.subclass()],c)}(k.declared(d,l,e.default));a.default=c})},"*noref":1}});
define("require exports ../../../../core/tsSupport/declareExtendsHelper ../../../../core/tsSupport/decorateHelper ../../../../core/Accessor ../../../../core/promiseUtils ../../../../core/accessorSupport/decorators ../../../../layers/support/TileInfo ../../ViewState ./controllers ./processors ./support/TileStore".split(" "),function(c,a,f,b,d,l,k,e,h,p,g,q){Object.defineProperty(a,"__esModule",{value:!0});c=function(a){function c(){var b=null!==a&&a.apply(this,arguments)||this;b.controller=null;b.processor=
null;b.remoteClient=null;b.serviceAndViewInfo=null;b.tileStore=null;b.viewState=null;return b}f(c,a);c.prototype.initialize=function(){var a=this;this.watch("updating",function(b){a.remoteClient.invoke("setUpdating",b)})};c.prototype.destroy=function(){this.controller&&this.controller.destroy();this.processor&&this.processor.destroy()};Object.defineProperty(c.prototype,"updating",{get:function(){var a=this.controller,b=this.processor;return!a||!b||a.updating||b.updating||!1},enumerable:!0,configurable:!0});
c.prototype.startup=function(a){var b=e.fromJSON(a.tileInfo);this.serviceAndViewInfo=a;this.tileStore=new q.default(b)};c.prototype.configure=function(a){var b=this,c=this.controller,d=this.processor,e=a.controller,f=a.processor;a=[null,null];e&&(a[0]=p.createController(e.type,{remoteClient:this.remoteClient,tileStore:this.tileStore,serviceAndViewInfo:this.serviceAndViewInfo}));f&&(a[1]=g.createProcessor(f.type,{remoteClient:this.remoteClient,tileStore:this.tileStore,serviceAndViewInfo:this.serviceAndViewInfo}));
return l.all(a).then(function(a){var g=a[0];a=a[1];g&&(c&&c===b.controller&&c.destroy(),b.controller=g,g.configuration=e,g.setViewState(b.viewState),a||(g.processor=b.processor));a&&(d&&d===b.processor&&d.destroy(),b.processor=a,a.configuration=f,c.processor=a)})};c.prototype.setViewState=function(a){a=h.fromJSON(a);this._set("viewState",a);this.tileStore.setViewState(a);this.controller&&this.controller.setViewState(a)};b([k.property()],c.prototype,"controller",void 0);b([k.property()],c.prototype,
"processor",void 0);b([k.property({dependsOn:["controller.updating","processor.updating"]})],c.prototype,"updating",null);b([k.property()],c.prototype,"viewState",void 0);return c=b([k.subclass()],c)}(k.declared(d));a.default=c});
// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.9/esri/copyright.txt for details.
//>>built
require({cache:{"esri/request":function(){define("require exports ./core/tsSupport/assignHelper dojo/Deferred dojo/has!host-webworker?./core/workers/request dojo/io-query dojo/_base/url dojo/errors/CancelError dojo/request/xhr ./config ./core/deferredUtils ./core/Error ./core/global ./core/has ./core/lang ./core/promiseUtils ./core/urlUtils".split(" "),function(u,a,e,m,d,k,q,g,b,f,c,n,C,z,D,p,w){function I(a,c){void 0===c&&(c=!1);w.isBlobProtocol(a.url)||w.isDataProtocol(a.url)||!a.content||(a.preventCache&&
(a.content["request.preventCache"]=Date.now()),a.url=w.addQueryParameters(a.url,a.content));var b=new Image;b.crossOrigin=a.withCredentials?"use-credentials":"anonymous";var f=!1,g=new m(function(){f=!0;b.onload=b.onerror=b.onabort=null;b.src=""}),x=function(){b.onload=b.onerror=b.onabort=null;c&&URL.revokeObjectURL(this.src);f||g.reject(Error("Unable to load the resource"))};b.onload=function(){b.onload=b.onerror=b.onabort=null;c&&URL.revokeObjectURL(this.src);f||g.resolve(this)};b.onerror=x;b.onabort=
x;b.alt="";b.src=a.url;return g.promise}function F(a){a=new q(a);return(a.host+(a.port?":"+a.port:"")).toLowerCase()}function B(){return J?J:J=p.create(function(a){u(["./identity/IdentityManager"],a)}).then(function(a){M=a})}function A(a,c){var f=!!a.useProxy,g=a.method||"auto";a=e({},a);a.content=a.content||{};a._ssl&&(a.url=a.url.replace(/^http:/i,"https:"));var n=a.url,d=w.isBlobProtocol(n)||w.isDataProtocol(n);a._token&&(a.content.token=a._token);var x=0,p;d||(p=k.objectToQuery(a.content),x=p.length+
n.length+1,z("esri-url-encodes-apostrophe")&&(x=p.replace(/'/g,"%27").length+n.length+1));a.timeout=null!=a.timeout?a.timeout:E.timeout;a.handleAs=a.handleAs||"json";try{var q=p=void 0,r=!d&&("post"===g||!!a.body||x>E.maxUrlLength),y=!d&&(f||!!w.getProxyRule(a.url)),C;if(C=!y&&"image"===a.handleAs&&E.proxyUrl&&!d){var t=w.getOrigin(a.url);C=!(!t||D.endsWith(t,".arcgis.com")||w.hasSameOrigin(t,w.appUrl)||-1!==G._corsServers.indexOf(t)||w.isTrustedServer(t))}C&&(a.handleAs="blob");y&&(z("host-browser")||
z("host-webworker"))&&(p=w.getProxyUrl(n),q=p.path,!r&&q.length+1+x>E.maxUrlLength&&(r=!0),p.query&&(a.content=e({},p.query,a.content)),r||(a.preventCache&&(a.content["request.preventCache"]=Date.now(),a.preventCache=!1),a.url=w.addQueryParameters(a.url,a.content),a.content=null),a.url=q+"?"+a.url);if(!d){var ha=a.headers;!z("host-browser")&&!z("host-webworker")||ha&&ha.hasOwnProperty("X-Requested-With")||(ha=a.headers=ha||{},ha["X-Requested-With"]=null);if(z("host-browser")&&c){var A=a.content&&
a.content.token;A&&(c.set?c.set("token",A):c.append("token",A));a.contentType=!1}if(!a.hasOwnProperty("withCredentials"))if(f=y?q:n,w.isTrustedServer(f))a.withCredentials=!0;else if(M){var H=M.findServerInfo(f);H&&H.webTierAuth&&(a.withCredentials=!0)}}if(r)return"image"===a.handleAs&&(a.handleAs="blob"),a.body?(a.data=c||a.body,a.query=a.content):a.data=a.content,delete a.body,delete a.content,!y&&z("safari")&&(a.url+=(-1===a.url.indexOf("?")?"?":"\x26")+"_ts\x3d"+(new Date).getTime()+R++),b.post(a.url,
a);if("image"===a.handleAs)return I(a);a.query=a.content;delete a.content;return b.get(a.url,a)}catch(ia){return a=new m,a.reject(ia),a.promise}}function r(a,c,b,f){function g(a){a._pendingDfd=A(b,p);var c=!!a._pendingDfd.response;(a._pendingDfd.response||a._pendingDfd).then(function(a){if(!c||!a.data)return a;E.proxyUrl&&!D.startsWith(a.url,E.proxyUrl)&&S(a.url);var b=a.getHeader("Content-Type");if(b&&(b=b.toLowerCase(),-1===b.indexOf("text/plain")&&-1===b.indexOf("application/json")))return a;b=
a.data;if(b instanceof ArrayBuffer&&750>=b.byteLength)b=new Blob([b]);else if(!(b instanceof Blob&&750>=b.size))return a;var f=new m,g=new FileReader;g.readAsText(b);g.onloadend=function(){if(!g.error)try{var c=JSON.parse(g.result);c.error&&(Object.isExtensible(a)||(a=e({},a)),a._jsonData=c)}catch(ka){}f.resolve(a)};return f.promise}).then(function(a){return c&&!a._jsonData&&"image"===f.requestOptions.responseType&&a.data instanceof Blob?(c=!1,b.url=URL.createObjectURL(a.data),I(b,!0)):a}).then(function(b){var g=
c?b.data:b,n=c?b.getHeader.bind(b):L;if(g&&(b=c&&b._jsonData||g,b.error||"error"===b.status))throw g=D.mixin(Error(),b.error||b),g.getHeader=n,g;a.resolve({data:g,url:f.url,requestOptions:f.requestOptions,getHeader:n});a._pendingDfd=null}).catch(function(c){var g,n,x,p;c&&(g=Number(c.code),n=c.hasOwnProperty("subcode")?Number(c.subcode):null,x=(x=c.messageCode)&&x.toUpperCase(),p=c.response);if(p&&0===p.status&&E.proxyUrl&&!d&&"post"!==b.method&&p.url&&!D.startsWith(p.url,E.proxyUrl))w.addProxyRule({proxyUrl:E.proxyUrl,
urlPrefix:w.removeFile(w.urlToObject(b.url).path)}),r(a,!0,b,f);else{if(403===g&&(4===n||c.message&&-1<c.message.toLowerCase().indexOf("ssl")&&-1===c.message.toLowerCase().indexOf("permission"))){if(!b._ssl){b._ssl=b._sslFromServer=!0;r(a,!0,b,f);return}}else if(k&&"no-prompt"!==b.authMode&&M._errorCodes&&-1!==M._errorCodes.indexOf(g)&&!M._isPublic(b.url)&&(403!==g||P&&-1===P.indexOf(x)&&(null==n||2===n&&b._token))){t(a,b,f,H("request:server",c,f));return}p&&0<p.status&&p.url&&E.proxyUrl&&!D.startsWith(p.url,
E.proxyUrl)&&S(p.url);a.reject(H("request:server",c,f));a._pendingDfd=null}})}var d=b.body,k=b.useIdentity,x,p=null,q=d instanceof FormData;if(q||d&&d.elements)p=q?d:new FormData(d);var C=!!(-1!==b.url.toLowerCase().indexOf("token\x3d")||b.content&&b.content.token||p&&p.get&&p.get("token")||d&&d.elements&&d.elements.token);c||(!k||C||b._token||M._isPublic(b.url)||(c=function(a){a&&(b._token=a.token,b._ssl=a.ssl)},"immediate"===b.authMode?x=M.getCredential(b.url).then(c):"no-prompt"===b.authMode?x=
M.checkSignInStatus(b.url).then(c).catch(function(){}):c(M.findCredential(b.url))),a.then(function(a){(/\/sharing\/rest\/accounts\/self/i.test(b.url)||/\/sharing\/rest\/portals\/self/i.test(b.url))&&!C&&!b._token&&a.user&&a.user.username&&(w.isTrustedServer(b.url)||E.trustedServers.push(F(b.url)));var c=b._credential;if(c){var f=M.findServerInfo(c.server),f=f&&f.owningSystemUrl,g=void 0;f&&(f=f.replace(/\/?$/,"/sharing"),(g=M.findCredential(f,c.userId))&&-1===M._getIdenticalSvcIdx(f,g)&&g.resources.splice(0,
0,f))}return a}).always(function(a){delete b._credential;if(a){var c=!!b._ssl;a instanceof n?a.details.ssl=c:a.ssl=c}}));x?x.then(function(){a.isCanceled()||g(a)}).catch(function(c){a.reject(c)}):g(a);return a.promise}function t(a,c,b,f){a._pendingDfd=M.getCredential(c.url,{error:f,token:c._token});a._pendingDfd.then(function(f){c._token=f.token;c._credential=f;c._ssl=c._sslFromServer||f.ssl;r(a,!0,c,b)}).catch(function(c){a.reject(c);a._pendingDfd=null})}function H(a,c,b){var f="Error",g={url:b.url,
requestOptions:b.requestOptions,getHeader:L};if(c instanceof n)return c.details?(c.details=D.clone(c.details),c.details.url=b.url,c.details.requestOptions=b.requestOptions):c.details=g,c;if(c){var d=c.response;b=d&&d.getHeader;var d=d&&d.status,k=c.message;b=c.getHeader||b;k&&(f=k);b&&(g.getHeader=b);g.httpStatus=(null!=c.httpCode?c.httpCode:c.code)||d;g.subCode=c.subcode;g.messageCode=c.messageCode;g.messages="string"===typeof c.details?[c.details]:c.details}a=new n(a,f,g);c&&"cancel"===c.dojoType&&
(a.name="AbortError",a.dojoType="cancel");return a}function S(a){w.isBlobProtocol(a)||w.isDataProtocol(a)||(a=w.getOrigin(a))&&-1===G._corsServers.indexOf(a)&&G._corsServers.push(a)}function G(a,b){if(d&&C.invokeStaticMessage)return d.execute(a,b);w.isBlobProtocol(a)||w.isDataProtocol(a)||(a=w.normalize(a));var f={url:a,requestOptions:e({},b)},k=w.getInterceptor(a);if(k){if(null!=k.responseData)return p.resolve({data:k.responseData,requestOptions:f.requestOptions,getHeader:L,url:a});k.headers&&(f.requestOptions.headers=
e({},f.requestOptions.headers,k.headers));k.query&&(f.requestOptions.query=e({},f.requestOptions.query,k.query));if(k.before&&(b=k.before(f),null!=b))return b instanceof Error||b instanceof n?p.reject(H("request:interceptor",b,f)):p.resolve({data:b,requestOptions:f.requestOptions,getHeader:L,url:f.url})}var x=e({url:f.url},f.requestOptions);x.content=x.query;delete x.query;x.preventCache=!!x.cacheBust;delete x.cacheBust;x.handleAs=x.responseType;delete x.responseType;"array-buffer"===x.handleAs&&
(x.handleAs="arraybuffer");if("image"===x.handleAs){if(z("host-webworker"))return p.reject(H("request:invalid-parameters",Error("responseType 'image' is not supported in Web Workers or Node environment"),f))}else if(w.isDataProtocol(a))return p.reject(H("request:invalid-parameters",Error("Data URLs are not supported for responseType \x3d "+x.handleAs),f));var m=E.useIdentity;"anonymous"===x.authMode&&(m=!1);x.useIdentity=m;x.urlObj=new q(x.url);var D=c.makeDeferredCancellingPending(),y;f.requestOptions.signal&&
(a=f.requestOptions.signal,y=function(){D.cancel(H("AbortError",new g("Request canceled"),f))},a.aborted?y():a.addEventListener("abort",y));p.resolve().then(function(){if(m&&!M)return B()}).always(function(){D.isCanceled()||r(D,!1,x,f)});return D.then(function(a){f.requestOptions.signal&&f.requestOptions.signal.removeEventListener("abort",y);k&&k.after&&k.after(a);return a}).catch(function(a){f.requestOptions.signal&&f.requestOptions.signal.removeEventListener("abort",y);throw a;})}var E=f.request,
P=["COM_0056","COM_0057"],R=0,L=function(){return null},M,J;(G||(G={}))._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];return G})},"dojo/_base/url":function(){define(["./kernel"],function(u){var a=/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/,e=/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,m=function(){for(var d=arguments,k=[d[0]],q=1;q<d.length;q++)if(d[q]){var g=new m(d[q]+""),k=new m(k[0]+"");if(""==g.path&&!g.scheme&&!g.authority&&
!g.query)null!=g.fragment&&(k.fragment=g.fragment),g=k;else if(!g.scheme&&(g.scheme=k.scheme,!g.authority&&(g.authority=k.authority,"/"!=g.path.charAt(0)))){for(var k=(k.path.substring(0,k.path.lastIndexOf("/")+1)+g.path).split("/"),b=0;b<k.length;b++)"."==k[b]?b==k.length-1?k[b]="":(k.splice(b,1),b--):0<b&&(1!=b||""!=k[0])&&".."==k[b]&&".."!=k[b-1]&&(b==k.length-1?(k.splice(b,1),k[b-1]=""):(k.splice(b-1,2),b-=2));g.path=k.join("/")}k=[];g.scheme&&k.push(g.scheme,":");g.authority&&k.push("//",g.authority);
k.push(g.path);g.query&&k.push("?",g.query);g.fragment&&k.push("#",g.fragment)}this.uri=k.join("");d=this.uri.match(a);this.scheme=d[2]||(d[1]?"":null);this.authority=d[4]||(d[3]?"":null);this.path=d[5];this.query=d[7]||(d[6]?"":null);this.fragment=d[9]||(d[8]?"":null);null!=this.authority&&(d=this.authority.match(e),this.user=d[3]||null,this.password=d[4]||null,this.host=d[6]||d[7],this.port=d[9]||null)};m.prototype.toString=function(){return this.uri};return u._Url=m})},"esri/core/deferredUtils":function(){define(["dojo/Deferred"],
function(u){var a={makeDeferredCancellingPending:function(){var e={},m=a._dfdCanceller.bind(null,e),m=new u(m);return e.deferred=m},_dfdCanceller:function(a){a=a.deferred?a.deferred:a;a.canceled=!0;var e=a._pendingDfd;a.isResolved()||!e||e.isResolved()||e.cancel();a._pendingDfd=null},_fixDfd:function(a){var e=a.then;a.then=function(a,k,q){if(a){var g=a;a=function(a){return a&&a._argsArray?g.apply(null,a):g(a)}}return e.call(this,a,k,q)};return a},_resDfd:function(a,m,d){var k=m.length;1===k?d?a.reject(m[0]):
a.resolve(m[0]):1<k?(m._argsArray=!0,a.resolve(m)):a.resolve()}};return a})},"esri/core/urlUtils":function(){define("require exports ./tsSupport/assignHelper dojo/io-query dojo/_base/url ../config ./Error ./global ./lang ./Logger".split(" "),function(u,a,e,m,d,k,q,g,b,f){function c(a){var c={path:null,query:null},b=new d(a),f=a.indexOf("?");null===b.query?c.path=a:(c.path=a.substring(0,f),c.query=m.queryToObject(b.query));b.fragment&&(c.hash=b.fragment,null===b.query&&(c.path=c.path.substring(0,c.path.length-
(b.fragment.length+1))));return c}function n(a){var c=a.indexOf("?");-1!==c?(Z.path=a.slice(0,c),Z.query=a.slice(c+1)):(Z.path=a,Z.query=null);return Z}function C(a){a=n(a).path;a&&"/"===a[a.length-1]||(a+="/");a=M(a,!0);return a=a.toLowerCase()}function z(a){var c=T.proxyRules;a=C(a);for(var b=0;b<c.length;b++)if(0===a.indexOf(c[b].urlPrefix))return c[b]}function D(a){a=F(a);var c=a.indexOf("/sharing");return 0<c?a.substring(0,c):a.replace(/\/+$/,"")}function p(a,c,b){void 0===b&&(b=!1);a=y(a);c=
y(c);return b||a.scheme===c.scheme?a.host.toLowerCase()===c.host.toLowerCase()&&a.port===c.port:!1}function w(c,b,f){void 0===b&&(b=a.appBaseUrl);if(G(c))return f&&f.preserveProtocolRelative?c:"http"===a.appUrl.scheme&&a.appUrl.authority===A(c).slice(2)?"http:"+c:"https:"+c;if(E(c))return c;f=B;if("/"===c[0]){var g=b.indexOf("//"),g=b.indexOf("/",g+2);b=-1===g?b:b.slice(0,g)}return f(b,c)}function I(c,b,f){void 0===b&&(b=a.appBaseUrl);if(!r(c))return c;var g=F(c),n=g.toLowerCase();b=F(b).toLowerCase().replace(/\/+$/,
"");if((f=f?F(f).toLowerCase().replace(/\/+$/,""):null)&&0!==b.indexOf(f))return c;for(var d=function(a,c,b){b=a.indexOf(c,b);return-1===b?a.length:b},k=d(n,"/",n.indexOf("//")+2),p=-1;n.slice(0,k+1)===b.slice(0,k)+"/";){p=k+1;if(k===n.length)break;k=d(n,"/",k+1)}if(-1===p||f&&p<f.length)return c;c=g.slice(p);g=b.slice(p-1).replace(/[^/]+/g,"").length;if(0<g)for(n=0;n<g;n++)c="../"+c;else c="./"+c;return c}function F(a){a=a.trim();a=w(a);if(/^https?:\/\//i.test(a)){var c=n(a);a=c.path.replace(/\/{2,}/g,
"/");a=a.replace("/","//");c.query&&(a+="?"+c.query)}a=a.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2");return a=J(a)}function B(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];if(a&&a.length){c=[];if(r(a[0])){var b=a[0],f=b.indexOf("//");c.push(b.slice(0,f+1));Y.test(a[0])&&(c[0]+="/");a[0]=b.slice(f+2)}else"/"===a[0][0]&&c.push("");a=a.reduce(function(a,c){return c?a.concat(c.split("/")):a},[]);for(b=0;b<a.length;b++)f=a[b],".."===f&&0<c.length?c.pop():!f||"."===f&&0!==c.length||
c.push(f);return c.join("/")}}function A(a){if(t(a)||H(a))return null;var c=a.indexOf("://");if(-1===c&&G(a))c=2;else if(-1!==c)c+=3;else return null;c=a.indexOf("/",c);return-1===c?a:a.slice(0,c)}function r(a){return G(a)||E(a)}function t(a){return"blob:"===a.slice(0,5)}function H(a){return"data:"===a.slice(0,5)}function S(a){return(a=a.match(ea))?{mediaType:a[1],isBase64:!!a[2],data:a[3]}:null}function G(a){return a&&"/"===a[0]&&"/"===a[1]}function E(a){return U.test(a)}function P(c){return Q.test(c)||
"http"===a.appUrl.scheme&&G(c)}function R(a){return G(a)?"https:"+a:a.replace(Q,"https:")}function L(){return"https"===a.appUrl.scheme}function M(a,c){void 0===c&&(c=!1);if(G(a))return a.slice(2);a=a.replace(U,"");c&&1<a.length&&"/"===a[0]&&"/"===a[1]&&(a=a.slice(2));return a}function J(c){var f=T.httpsDomains;if(!P(c))return c;var g=c.indexOf("/",7),n;n=-1===g?c:c.slice(0,g);n=n.toLowerCase().slice(7);if(W.test(n))if(b.endsWith(n,":80"))n=n.slice(0,-3),c=c.replace(":80","");else return c;if("http"===
a.appUrl.scheme&&n===a.appUrl.authority&&!ca.test(c))return c;if(L()&&n===a.appUrl.authority||f&&f.some(function(a){return n===a||b.endsWith(n,"."+a)})||L()&&!z(c))c=R(c);return c}function x(a,c,b){if(!(c&&b&&a&&r(a)))return a;var f=a.indexOf("//"),g=a.indexOf("/",f+2),n=a.indexOf(":",f+2),g=Math.min(0>g?a.length:g,0>n?a.length:n);if(a.slice(f+2,g).toLowerCase()!==c.toLowerCase())return a;c=a.slice(0,f+2);a=a.slice(g);return""+c+b+a}function y(c){if("string"===typeof c)return new d(w(c));c.scheme||
(c.scheme=a.appUrl.scheme);return c}Object.defineProperty(a,"__esModule",{value:!0});var K=f.getLogger("esri.core.urlUtils"),T=k.request,U=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,Q=/^\s*http:/i,V=/^\s*https:/i,Y=/^\s*file:/i,W=/:\d+$/,ca=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i;a.appUrl=new d(g.location);a.trustedServersUrlCache={};a.appBaseUrl=function(){var c=a.appUrl.path,c=c.substring(0,c.lastIndexOf(c.split("/")[c.split("/").length-1]));return""+(a.appUrl.scheme+"://"+a.appUrl.host+(null!=
a.appUrl.port?":"+a.appUrl.port:""))+c}();a.urlToObject=c;a.getProxyUrl=function(b){void 0===b&&(b=!1);var f,g=T.proxyUrl;if("string"===typeof b){if(f=b,f=V.test(f)||"https"===a.appUrl.scheme&&G(f),b=z(b))g=b.proxyUrl}else f=!!b;if(!g)throw K.warn("esri/config: esriConfig.request.proxyUrl is not set."),new q("urlutils:proxy-not-set","esri/config: esriConfig.request.proxyUrl is not set.");f&&L()&&(g=R(g));return c(g)};a.addProxy=function(a){var b=z(a),f,g;b&&(g=n(b.proxyUrl),f=g.path,g=g.query?m.queryToObject(g.query):
null);f&&(b=c(a),a=f+"?"+b.path,(f=m.objectToQuery(e({},g,b.query)))&&(a=a+"?"+f));return a};var Z={path:"",query:""};a.addProxyRule=function(a){a={proxyUrl:a.proxyUrl,urlPrefix:C(a.urlPrefix)};for(var c=T.proxyRules,b=a.urlPrefix,f=c.length,g=0;g<c.length;g++){var n=c[g].urlPrefix;if(0===b.indexOf(n)){if(b.length===n.length)return-1;f=g;break}0===n.indexOf(b)&&(f=g+1)}c.splice(f,0,a);return f};a.getProxyRule=z;a.hasSamePortal=function(a,c){a=D(a);c=D(c);return M(a)===M(c)};a.getInterceptor=function(a){var c=
function(c){return null==c||c instanceof RegExp&&c.test(a)||"string"===typeof c&&b.startsWith(a,c)},f=T.interceptors;if(f)for(var g=0;g<f.length;g++){var n=f[g];if(Array.isArray(n.urls)){if(n.urls.some(c))return n}else if(c(n.urls))return n}return null};a.hasSameOrigin=p;a.isTrustedServer=function(c){if("string"===typeof c)if(r(c))c=y(c);else return!0;for(var b=T.trustedServers||[],f=0;f<b.length;f++){var g;g=b[f];a.trustedServersUrlCache[g]||(E(g)||G(g)?a.trustedServersUrlCache[g]=[new d(w(g))]:
a.trustedServersUrlCache[g]=[new d("http://"+g),new d("https://"+g)]);g=a.trustedServersUrlCache[g];for(var n=0;n<g.length;n++)if(p(c,g[n]))return!0}return!1};a.makeAbsolute=w;a.makeRelative=I;a.normalize=F;a.join=B;a.getOrigin=A;a.isAbsolute=r;a.isBlobProtocol=t;a.isDataProtocol=H;a.dataToArrayBuffer=function(a){a=S(a);if(!a||!a.isBase64)return null;a=atob(a.data);for(var c=new Uint8Array(a.length),b=0;b<a.length;b++)c[b]=a.charCodeAt(b);return c.buffer};var ea=/^data:(.*?)(;base64)?,(.*)$/;a.dataComponents=
S;a.makeData=function(a){return a.isBase64?"data:"+a.mediaType+";base64,"+a.data:"data:"+a.mediaType+","+a.data};a.isProtocolRelative=G;a.hasProtocol=E;a.toHTTP=function(a){return G(a)?"http:"+a:a.replace(V,"http:")};a.toHTTPS=R;a.removeFile=function(a){var c=0;if(r(a)){var b=a.indexOf("//");-1!==b&&(c=b+2)}b=a.lastIndexOf("/");return b<c?a:a.slice(0,b+1)};a.removeTrailingSlash=function(a){return a.replace(/\/+$/,"")};a.changeDomain=x;a.read=function(c,b){var f=b&&b.url&&b.url.path;c&&f&&(c=w(c,f,
{preserveProtocolRelative:!0}));(b=b&&b.portal)&&!b.isPortal&&b.urlKey&&b.customBaseUrl?(f=b.urlKey+"."+b.customBaseUrl,b=p(a.appUrl,a.appUrl.scheme+"://"+f)?x(c,b.portalHostname,f):x(c,f,b.portalHostname)):b=c;return b};a.write=function(a,c){if(!a)return a;!r(a)&&c&&c.blockedRelativeUrls&&c.blockedRelativeUrls.push(a);var b=w(a);if(c){var f=c.verifyItemRelativeUrls&&c.verifyItemRelativeUrls.rootPath||c.url&&c.url.path;f&&(b=I(b,f,f),b!==a&&c.verifyItemRelativeUrls&&c.verifyItemRelativeUrls.writtenUrls.push(b))}a=
b;b=(c=c&&c.portal)&&!c.isPortal&&c.urlKey&&c.customBaseUrl?x(a,c.urlKey+"."+c.customBaseUrl,c.portalHostname):a;return b};a.writeOperationalLayerUrl=function(a,c){a&&G(a)&&(a="https:"+a);c.url=a?F(a):a};a.isSVG=function(a){return ba.test(a)};a.removeQueryParameters=function(a,b){a=c(a);var f=Object.keys(a.query||{});0<f.length&&b&&b.warn("removeQueryParameters()","Url query parameters are not supported, the following parameters have been removed: "+f.join(", ")+".");return a.path};a.addQueryParameter=
function(a,b,f){a=c(a);var g=a.query||{};g[b]=f;return a.path+"?"+m.objectToQuery(g)};a.addQueryParameters=function(a,b){a=c(a);var f=a.query||{},g;for(g in b)f[g]=b[g];return(b=m.objectToQuery(f))?a.path+"?"+b:a.path};a.removeQueryParameter=function(a,b){var f=c(a),g=f.path,f=f.query;if(!f)return a;delete f[b];return(a=m.objectToQuery(f))?g+"?"+a:g};var ba=/(^data:image\/svg|\.svg$)/i})},"esri/core/Logger":function(){define(["require","exports","./has"],function(u,a,e){var m={info:0,warn:1,error:2};
u=function(){function a(d){void 0===d&&(d={});this.module=d.module||"";this.writer=d.writer||null;this.level=d.level||null;null!=d.enabled&&(this.enabled=!!d.enabled);a._loggers[this.module]=this;d=this.module.lastIndexOf(".");-1!==d&&(this.parent=a.getLogger(this.module.slice(0,d)))}a.prototype.log=function(a){for(var d=[],g=1;g<arguments.length;g++)d[g-1]=arguments[g];this._isEnabled()&&this._matchLevel(a)&&(g=this._inheritedWriter())&&g.apply(void 0,[a,this.module].concat(d))};a.prototype.error=
function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["error"].concat(a))};a.prototype.warn=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["warn"].concat(a))};a.prototype.info=function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];this.log.apply(this,["info"].concat(a))};a.prototype.getLogger=function(d){return a.getLogger(this.module+"."+d)};a.getLogger=function(d){var k=a._loggers[d];k||(k=new a({module:d}));
return k};a.prototype._parentWithMember=function(a,d){for(var g=this;g&&null==g[a];)g=g.parent;return g?g[a]:d};a.prototype._inheritedWriter=function(){return this._parentWithMember("writer",this._consoleWriter)};a.prototype._consoleWriter=function(a,d){for(var g=[],b=2;b<arguments.length;b++)g[b-2]=arguments[b];console[a].apply(console,["["+d+"]"].concat(g))};a.prototype._matchLevel=function(a){return m[this._parentWithMember("level","error")]<=m[a]};a.prototype._isEnabled=function(){return this._parentWithMember("enabled",
!0)};a._loggers={};return a}();u.getLogger("esri").level="warn";return u})},"esri/views/2d/tiling/enums":function(){define(["require","exports"],function(u,a){Object.defineProperty(a,"__esModule",{value:!0});u=a.TileStatus||(a.TileStatus={});u[u.INITIALIZED=0]="INITIALIZED";u[u.NO_DATA=1]="NO_DATA";u[u.READY=2]="READY";u[u.MODIFIED=3]="MODIFIED";u[u.INVALID=4]="INVALID"})},"esri/views/vectorTiles/WorkerTile":function(){define("require exports dojo/Deferred ../../core/executeAsync ../../core/ObjectPool ../../core/promiseUtils ../2d/tiling/enums ./BackgroundBucket ./CircleBucket ./FillBucket ./GeometryUtils ./IndexMemoryBuffer ./LineBucket ./Placement ./SymbolBucket ./TileParser ./VertexMemoryBuffer".split(" "),
function(u,a,e,m,d,k,q,g,b,f,c,n,C,z,D,p,w){return function(){function a(){this.rotation=0;this.status=q.TileStatus.INITIALIZED;this._symbolBuckets=[];this.placementEngine=new z.PlacementEngine;this.fillVertexBuffer=new w.FillVertexBuffer(!1);this.fillDDVertexBuffer=new w.FillVertexBuffer(!0);this.fillIndexBuffer=new n.TriangleIndexBuffer;this.outlineVertexBuffer=new w.OutlineVertexBuffer(!1);this.outlineDDVertexBuffer=new w.OutlineVertexBuffer(!0);this.outlineIndexBuffer=new n.TriangleIndexBuffer;
this.lineVertexBuffer=new w.LineVertexBuffer(!1);this.lineDDVertexBuffer=new w.LineVertexBuffer(!0);this.lineIndexBuffer=new n.TriangleIndexBuffer;this.iconVertexBuffer=new w.SymbolVertexBuffer(!1);this.iconDDVertexBuffer=new w.SymbolVertexBuffer(!0);this.iconIndexBuffer=new n.TriangleIndexBuffer;this.textVertexBuffer=new w.SymbolVertexBuffer(!1);this.textDDVertexBuffer=new w.SymbolVertexBuffer(!0);this.textIndexBuffer=new n.TriangleIndexBuffer;this.circleVertexBuffer=new w.CircleVertexBuffer;this.circleIndexBuffer=
new n.TriangleIndexBuffer}a.prototype.initialize=function(a,b,f,g){void 0===g&&(g=0);this.tileKey=a;this.refKey=b;this._workerTileHandler=f;this.rotation=g;this.placementEngine.setAngle(c.C_DEG_TO_RAD*g)};a.prototype.release=function(){this.tileKey=this.refKey="";this.status=q.TileStatus.INITIALIZED;this.rotation=0;this.fillVertexBuffer.reset();this.fillDDVertexBuffer.reset();this.fillIndexBuffer.reset();this.outlineVertexBuffer.reset();this.outlineDDVertexBuffer.reset();this.outlineIndexBuffer.reset();
this.lineVertexBuffer.reset();this.lineDDVertexBuffer.reset();this.lineIndexBuffer.reset();this.iconVertexBuffer.reset();this.iconDDVertexBuffer.reset();this.iconIndexBuffer.reset();this.textVertexBuffer.reset();this.textDDVertexBuffer.reset();this.textIndexBuffer.reset();this.circleVertexBuffer.reset();this.circleIndexBuffer.reset();this.placementEngine.reset();this._symbolBuckets.length=0;this._workerTileHandler=null};a.prototype.setDataAndParse=function(a,c){var n=this,d=new e(function(a){n.status=
q.TileStatus.INVALID});this._parse(a,c).then(function(a){n.status=q.TileStatus.READY;for(var c=new Uint32Array([1,n.fillVertexBuffer.sizeInBytes,2,n.fillDDVertexBuffer.sizeInBytes,3,n.fillIndexBuffer.sizeInBytes,4,n.outlineVertexBuffer.sizeInBytes,5,n.outlineDDVertexBuffer.sizeInBytes,6,n.outlineIndexBuffer.sizeInBytes,7,n.lineVertexBuffer.sizeInBytes,8,n.lineDDVertexBuffer.sizeInBytes,9,n.lineIndexBuffer.sizeInBytes,10,n.iconVertexBuffer.sizeInBytes,11,n.iconDDVertexBuffer.sizeInBytes,12,n.iconIndexBuffer.sizeInBytes,
13,n.textVertexBuffer.sizeInBytes,14,n.textDDVertexBuffer.sizeInBytes,15,n.textIndexBuffer.sizeInBytes,16,n.circleVertexBuffer.sizeInBytes,17,n.circleIndexBuffer.sizeInBytes]),p=[],k=a.length,e=0;e<k;e++){var r=a[e];if(r instanceof f)p.push(r.layerIndex),p.push(1),p.push(r.fillIndexStart),p.push(r.fillIndexCount),p.push(r.outlineIndexStart),p.push(r.outlineIndexCount);else if(r instanceof C)p.push(r.layerIndex),p.push(2),p.push(r.lineIndexStart),p.push(r.lineIndexCount);else if(r instanceof D){p.push(r.layerIndex);
p.push(3);p.push(r.sdfMarker?1:0);var w=r.markerPageMap;p.push(w.size);w.forEach(function(a,c){p.push(c);p.push(a[0]);p.push(a[1])});r=r.glyphsPageMap;p.push(r.size);r.forEach(function(a,c){p.push(c);p.push(a[0]);p.push(a[1])})}else r instanceof b?(p.push(r.layerIndex),p.push(4),p.push(r.circleIndexStart),p.push(r.circleIndexCount)):r instanceof g&&(p.push(r.layerIndex),p.push(0))}a=new Uint32Array(p);var k=n.fillVertexBuffer.toBuffer(),e=n.fillDDVertexBuffer.toBuffer(),r=n.fillIndexBuffer.toBuffer(),
w=n.outlineVertexBuffer.toBuffer(),m=n.outlineDDVertexBuffer.toBuffer(),z=n.outlineIndexBuffer.toBuffer(),t=n.lineVertexBuffer.toBuffer(),x=n.lineDDVertexBuffer.toBuffer(),y=n.lineIndexBuffer.toBuffer(),K=n.iconVertexBuffer.toBuffer(),I=n.iconDDVertexBuffer.toBuffer(),A=n.iconIndexBuffer.toBuffer(),B=n.textVertexBuffer.toBuffer(),F=n.textDDVertexBuffer.toBuffer(),u=n.textIndexBuffer.toBuffer(),W=n.circleVertexBuffer.toBuffer(),ca=n.circleIndexBuffer.toBuffer();d.resolve({result:{bufferDataInfo:c.buffer,
bucketDataInfo:a.buffer,bufferData:[k,e,r,w,m,z,t,x,y,K,I,A,B,F,u,W,ca]},transferList:[k,e,r,w,m,z,t,x,y,K,I,A,B,F,u,W,ca,c.buffer,a.buffer]})});return d.promise};a.prototype.addBucket=function(a){this._symbolBuckets.push(a)};a.prototype.updateSymbols=function(a){var b=this,f=this._symbolBuckets;if(!f||0===f.length)return k.resolve();this.rotation=a;var g=this.placementEngine;g.reset();g.setAngle(a/256*360*c.C_DEG_TO_RAD);var n=this.iconVertexBuffer;n.reset();var d=this.iconDDVertexBuffer;d.reset();
var p=this.iconIndexBuffer;p.reset();var e=this.textVertexBuffer;e.reset();var w=this.textDDVertexBuffer;w.reset();var D=this.textIndexBuffer;D.reset();var C=[],z=f.length,I=0;return m(function(){if(b.status===q.TileStatus.INVALID||b.status===q.TileStatus.INITIALIZED)return!0;if(I<z){var a=f[I++],c=a.layer;if(a=a.copy(c.hasDataDrivenIcon?d:n,p,c.hasDataDrivenText?w:e,D,g))C.push(a),a.updateSymbols()}return I>=z}).then(function(){if(b.status===q.TileStatus.INVALID||b.status===q.TileStatus.INITIALIZED||
0===n.sizeInBytes&&0===d.sizeInBytes&&0===p.sizeInBytes&&0===e.sizeInBytes&&0===w.sizeInBytes&&0===D.sizeInBytes)return{result:null,transferList:null};var a=new Uint32Array([10,n.sizeInBytes,11,d.sizeInBytes,12,p.sizeInBytes,13,e.sizeInBytes,14,w.sizeInBytes,15,D.sizeInBytes]),c=[];z=C.length;for(var f=0;f<z;f++){var g=C[f];c.push(g.layerIndex);c.push(3);c.push(g.sdfMarker?1:0);var k=g.markerPageMap;c.push(k.size);k.forEach(function(a,b){c.push(b);c.push(a[0]);c.push(a[1])});g=g.glyphsPageMap;c.push(g.size);
g.forEach(function(a,b){c.push(b);c.push(a[0]);c.push(a[1])})}var f=new Uint32Array(c),g=n.toBuffer(),k=d.toBuffer(),r=p.toBuffer(),m=e.toBuffer(),t=w.toBuffer(),I=D.toBuffer();return{result:{bufferDataInfo:a.buffer,bucketDataInfo:f.buffer,bufferData:[g,k,r,m,t,I]},transferList:[g,k,r,m,t,I,a.buffer,f.buffer]}}).catch(function(){return null})};a.prototype.setObsolete=function(){this.status=q.TileStatus.INVALID};a.prototype.getLayers=function(){return this._workerTileHandler.getLayers()};a.prototype.getWorkerTileHandler=
function(){return this._workerTileHandler};a.prototype._parse=function(a,c){if(!a||0===a.byteLength)return k.resolve([]);this.status=q.TileStatus.MODIFIED;return(new p(a,this,c)).parse()};a.pool=new d(a);return a}()})},"esri/core/executeAsync":function(){define("require exports ./has ./nextTick ./now ./promiseUtils".split(" "),function(u,a,e,m,d,k){function q(){var a=0===b.length;if(!a){for(var k=d();!a&&d()-k<g;){var e=b[c];if(e){if(!0===e()){var D=f.get(e);b[c]=null;f.delete(e);D()}c=(c+1)%b.length}else b.splice(c,
1),c=(a=0===b.length)?0:c%b.length}a||m(q)}}var g=e("host-browser")?6:200,b=[],f=new Map,c=0;return function(a){return a?k.create(function(c){b.push(a);f.set(a,c);1===b.length&&m(q)},function(){b[b.indexOf(a)]=null;f.delete(a)}):k.reject(new TypeError("callback is not a function"))}})},"esri/core/nextTick":function(){define(["require","exports","./global"],function(u,a,e){function m(){if(e.postMessage&&!e.importScripts){var a=e.onmessage,d=!0;e.onmessage=function(){d=!1};e.postMessage("","*");e.onmessage=
a;return d}return!1}var d=e.MutationObserver||e.WebKitMutationObserver;return function(){var a;if(e.process&&e.process.nextTick)a=function(a){e.process.nextTick(a)};else if(e.Promise)a=function(a){e.Promise.resolve().then(a)};else if(d){var q=[],g=document.createElement("div");(new d(function(){for(;0<q.length;)q.shift()()})).observe(g,{attributes:!0});a=function(a){q.push(a);g.setAttribute("queueStatus","1")}}else if(m()){var b=[];e.addEventListener("message",function(a){if(a.source===e&&"esri-nexttick-message"===
a.data)for(a.stopPropagation();b.length;)b.shift()()},!0);a=function(a){b.push(a);e.postMessage("esri-nexttick-message","*")}}else a=e.setImmediate?function(a){return e.setImmediate(a)}:function(a){return e.setTimeout(a,0)};return a}()})},"esri/core/now":function(){define(["require","exports","./global"],function(u,a,e){return function(){var a=e.performance||{};if(a.now)return function(){return a.now()};if(a.webkitNow)return function(){return a.webkitNow()};if(a.mozNow)return function(){return a.mozNow()};
if(a.msNow)return function(){return a.msNow()};if(a.oNow)return function(){return a.oNow()};var d;d=a.timing&&a.timing.navigationStart?a.timing.navigationStart:Date.now();return function(){return Date.now()-d}}()})},"esri/core/ObjectPool":function(){define(["require","exports"],function(u,a){var e=function(){return function(){}}();return function(){function a(a,k,e,g,b){void 0===g&&(g=1);void 0===b&&(b=0);this.classConstructor=a;this.acquireFunctionOrWithConstructor=k;this.releaseFunction=e;this.growthSize=
g;!0===k?this.acquireFunction=this._constructorAcquireFunction:"function"===typeof k&&(this.acquireFunction=k);this._pool=Array(b);this._set=new Set;this._initialSize=b;for(a=0;a<b;a++)this._pool[a]=new this.classConstructor;this.growthSize=Math.max(g,1)}a.prototype.acquire=function(){for(var a=[],k=0;k<arguments.length;k++)a[k]=arguments[k];k=this.classConstructor||e;if(0===this._pool.length)for(var q=this.growthSize,g=0;g<q;g++)this._pool[g]=new k;k=this._pool.pop();this.acquireFunction?this.acquireFunction.apply(this,
[k].concat(a)):k&&k.acquire&&"function"===typeof k.acquire&&k.acquire.apply(k,a);this._set.delete(k);return k};a.prototype.release=function(a){a&&!this._set.has(a)&&(this.releaseFunction?this.releaseFunction(a):a&&a.release&&"function"===typeof a.release&&a.release(),this._pool.push(a),this._set.add(a))};a.prototype.prune=function(a){void 0===a&&(a=this._initialSize);if(!(this._pool.length<=a))for(var d;a>this._pool.length;)d=this._pool.shift(),this._set.delete(d),d.dispose&&"function"===typeof d.dispose&&
d.dispose()};a.prototype._constructorAcquireFunction=function(a){for(var d=[],e=1;e<arguments.length;e++)d[e-1]=arguments[e];var g;(g=this.classConstructor).call.apply(g,[a].concat(d))};return a}()})},"esri/views/vectorTiles/BackgroundBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(u,a,e,m,d){return function(a){function d(g,b){return a.call(this,g,b)||this}e(d,a);return d}(d)})},"esri/core/tsSupport/decorateHelper":function(){define([],
function(){return function(u,a,e,m){var d=arguments.length,k=3>d?a:null===m?m=Object.getOwnPropertyDescriptor(a,e):m,q;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)k=Reflect.decorate(u,a,e,m);else for(var g=u.length-1;0<=g;g--)if(q=u[g])k=(3>d?q(k):3<d?q(a,e,k):q(a,e))||k;return 3<d&&k&&Object.defineProperty(a,e,k),k}})},"esri/views/vectorTiles/Bucket":function(){define(["require","exports"],function(u,a){return function(){function a(a,d){this.layerExtent=4096;this._features=
[];this.layer=a;this.zoom=d;this._filter=a.getFeatureFilter()}a.prototype.pushFeature=function(a){this._filter.filter(a)&&this._features.push(a)};a.prototype.hasFeatures=function(){return 0<this._features.length};a.prototype.processFeatures=function(a,d){};a.prototype.assignBufferInfo=function(a){};return a}()})},"esri/views/vectorTiles/CircleBucket":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./Bucket"],function(u,a,e,m,d){return function(a){function d(g,
b,f,c){g=a.call(this,g,b)||this;g._circleVertexBuffer=f;g._circleIndexBuffer=c;return g}e(d,a);Object.defineProperty(d.prototype,"circleIndexStart",{get:function(){return this._circleIndexStart},enumerable:!0,configurable:!0});Object.defineProperty(d.prototype,"circleIndexCount",{get:function(){return this._circleIndexCount},enumerable:!0,configurable:!0});d.prototype.assignBufferInfo=function(a){a._circleIndexStart=this._circleIndexStart;a._circleIndexCount=this._circleIndexCount};d.prototype.processFeatures=
function(a,b){b=this._circleVertexBuffer;var f=this._circleIndexBuffer;this._circleIndexStart=f.index;this._circleIndexCount=0;var c=this.layer,g=this.zoom;a&&a.setExtent(this.layerExtent);for(var d=1,k=[1,1,1,1],e=1,p=0,w=1,q=[1,1,1,1],m=1,B=0,A=this._features;B<A.length;B++){var r=A[B],t=r.getGeometry(a);if(t)for(c.hasDataDrivenRadius&&(d=c.getPaintValue("circle-radius",g,r)),c.hasDataDrivenColor&&(k=c.getPaintValue("circle-color",g,r)),c.hasDataDrivenOpacity&&(e=c.getPaintValue("circle-opacity",
g,r)),c.hasDataDrivenStrokeWidth&&(w=c.getPaintValue("circle-stroke-width",g,r)),c.hasDataDrivenStrokeColor&&(q=c.getPaintValue("circle-stroke-color",g,r)),c.hasDataDrivenStrokeOpacity&&(m=c.getPaintValue("circle-stroke-opacity",g,r)),c.hasDataDrivenBlur&&(p=c.getPaintValue("circle-blur",g,r)),r=0;r<t.length;r++){var H=t[r];if(H)for(var S=0;S<H.length;S++){var G=H[S],E=b.index;b.add(G.x,G.y,0,0,d,k,e,p,w,q,m);b.add(G.x,G.y,0,1,d,k,e,p,w,q,m);b.add(G.x,G.y,1,0,d,k,e,p,w,q,m);b.add(G.x,G.y,1,1,d,k,
e,p,w,q,m);f.add(E+0,E+1,E+2);f.add(E+1,E+2,E+3);this._circleIndexCount+=6}}}};return d}(d)})},"esri/views/vectorTiles/FillBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../../core/ArrayPool ../../core/libs/earcut/earcut ../2d/engine/webgl/Geometry ./Bucket".split(" "),function(u,a,e,m,d,k,q,g){return function(a){function b(c,b,f,g,d,p){b=a.call(this,c,b)||this;if(c.hasDataDrivenFill!==f.isDataDriven())throw Error("incompatible fill buffer");
if(c.hasDataDrivenOutline!==d.isDataDriven())throw Error("incompatible outline buffer");b._fillVertexBuffer=f;b._fillIndexBuffer=g;b._outlineVertexBuffer=d;b._outlineIndexBuffer=p;return b}e(b,a);Object.defineProperty(b.prototype,"fillIndexStart",{get:function(){return this._fillIndexStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"fillIndexCount",{get:function(){return this._fillIndexCount},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"outlineIndexStart",
{get:function(){return this._outlineIndexStart},enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"outlineIndexCount",{get:function(){return this._outlineIndexCount},enumerable:!0,configurable:!0});b.prototype.assignBufferInfo=function(a){a._fillIndexStart=this._fillIndexStart;a._fillIndexCount=this._fillIndexCount;a.layer.getPaintProperty("fill-outline-color")?(a._outlineIndexStart=this._outlineIndexStart,a._outlineIndexCount=this._outlineIndexCount):(a._outlineIndexStart=0,a._outlineIndexCount=
0)};b.prototype.processFeatures=function(a,b){this._fillIndexStart=this._fillIndexBuffer.index;this._fillIndexCount=0;this._outlineIndexStart=this._outlineIndexBuffer.index;this._outlineIndexCount=0;b=this.layer;var c=this.zoom,f=b.hasDataDrivenFill,g=b.hasDataDrivenOutline;a&&a.setExtent(this.layerExtent);var n=b.getPaintValue("fill-pattern",c),d=b.getPaintValue("fill-antialias",c)&&void 0===n,k=[1,1,1,1],e=[1,1,1,1],q=1;if(b.outlineUsesFillColor){if(d&&!b.hasDataDrivenOpacity){var m=b.getPaintValue("fill-opacity",
c),r=b.getPaintValue("fill-opacity",c+1);1>m&&1>r&&(d=!1)}d&&!b.hasDataDrivenColor&&(m=b.getPaintValue("fill-color",c),r=b.getPaintValue("fill-color",c+1),1>m[3]&&1>r[3]&&(d=!1))}m=0;for(r=this._features;m<r.length;m++){var t=r[m];!n&&b.hasDataDrivenColor&&(k=b.getPaintValue("fill-color",c,t));b.hasDataDrivenOpacity&&(q=b.getPaintValue("fill-opacity",c,t));!n&&b.hasDataDrivenOutlineColor&&(e=b.getPaintValue("fill-outline-color",c,t));var H=void 0;f&&(H={color:k,opacity:q});var S=void 0;g&&(S={color:b.outlineUsesFillColor?
k:e,opacity:q});t=t.getGeometry(a);this._processFeature(t,d,b.outlineUsesFillColor,H,S)}};b.prototype._processFeature=function(a,f,g,d,k){if(a){var c=a.length;if(f&&(!g||!k||1===k.color[3]*k.opacity))for(f=0;f<c;f++)this._processOutline(a[f],k);var n;for(f=0;f<c;f++)k=b._area(a[f]),128<k?(void 0!==n&&this._processFill(a,n,d),n=[f]):-128>k&&void 0!==n&&n.push(f);void 0!==n&&this._processFill(a,n,d)}};b.prototype._processOutline=function(a,b){var c=this._outlineVertexBuffer,f=this._outlineIndexBuffer,
g=f.index,d,n,k,e=new q.Point(0,0),m=new q.Point(0,0),A=new q.Point(0,0),r=-1,t=-1,H=-1,S=-1,G=-1,E=!1,P=a.length;if(!(2>P)){var R=a[0];for(d=a[P-1];P&&d.isEqual(R);)--P,d=a[P-1];if(!(2>P-0)){for(R=0;R<P;++R){0===R?(d=a[P-1],n=a[0],k=a[1],e.assignSub(n,d),e.normalize(),e.rightPerpendicular()):(d=n,n=k,k=R!==P-1?a[R+1]:a[0],e.assign(m));d=this._isClipEdge(d,n);-1===S&&(E=d);m.assignSub(k,n);m.normalize();m.rightPerpendicular();H=e.x*m.y-e.y*m.x;A.assignAdd(e,m);A.normalize();var L=-A.x*-e.x+-A.y*-e.y,
L=Math.abs(0!==L?1/L:1);8<L&&(L=8);0<=H?(H=c.add(n.x,n.y,e.x,e.y,0,1,b),-1===S&&(S=H),0<=r&&0<=t&&0<=H&&!d&&f.add(r,t,H),t=c.add(n.x,n.y,L*-A.x,L*-A.y,0,-1,b),-1===G&&(G=t),0<=r&&0<=t&&0<=H&&!d&&f.add(r,t,H),r=t,t=H,H=c.add(n.x,n.y,A.x,A.y,0,1,b),0<=r&&0<=t&&0<=H&&!d&&f.add(r,t,H),t=c.add(n.x,n.y,m.x,m.y,0,1,b)):(H=c.add(n.x,n.y,L*A.x,L*A.y,0,1,b),-1===S&&(S=H),0<=r&&0<=t&&0<=H&&!d&&f.add(r,t,H),t=c.add(n.x,n.y,-e.x,-e.y,0,-1,b),-1===G&&(G=t),0<=r&&0<=t&&0<=H&&!d&&f.add(r,t,H),r=t,t=H,H=c.add(n.x,
n.y,-A.x,-A.y,0,-1,b),0<=r&&0<=t&&0<=H&&!d&&f.add(r,t,H),r=c.add(n.x,n.y,-m.x,-m.y,0,-1,b));0<=r&&0<=t&&0<=H&&!d&&f.add(r,t,H)}0<=r&&0<=t&&0<=S&&!E&&f.add(r,t,S);0<=r&&0<=S&&0<=G&&!E&&f.add(r,G,S);this._outlineIndexCount+=3*(f.index-g)}}};b.prototype._processFill=function(a,b,f){var c;1<b.length&&(c=[]);for(var g=0,n=0;n<b.length;n++){var e=b[n];0!==g&&c.push(g);g+=a[e].length}for(var n=2*g,g=d.acquire(),m=0;m<b.length;m++)for(var e=b[m],e=a[e],q=e.length,C=0;C<q;++C)g.push(e[C].x),g.push(e[C].y);
a=k(g,c,2);b=a.length;if(0<b){c=this._fillVertexBuffer.index;for(m=0;m<n;)this._fillVertexBuffer.add(g[m++],g[m++],f);for(f=0;f<b;)this._fillIndexBuffer.add(c+a[f++],c+a[f++],c+a[f++]);this._fillIndexCount+=b}d.release(g)};b.prototype._isClipEdge=function(a,b){return a.x===b.x?-64>=a.x||4160<=a.x:a.y===b.y?-64>=a.y||4160<=a.y:!1};b._area=function(a){for(var c=0,b=a.length-1,f=0;f<b;f++)c+=(a[f].x-a[f+1].x)*(a[f].y+a[f+1].y);c+=(a[b].x-a[0].x)*(a[b].y+a[0].y);return.5*c};return b}(g)})},"esri/core/ArrayPool":function(){define(["require",
"exports","./ObjectPool"],function(u,a,e){function m(a){a.length=0}var d=Array.prototype.splice;u=function(){function a(a,b){void 0===a&&(a=50);void 0===b&&(b=50);this._pool=new e(Array,!1,m,b,a)}a.prototype.acquire=function(){return this._pool.acquire()};a.prototype.copy=function(a){var b=this.acquire();a.unshift(0,0);d.apply(b,a);a.splice(0,2);return b};a.prototype.release=function(a){this._pool.release(a)};a.acquire=function(){return k.acquire()};a.copy=function(a){return k.copy(a)};a.release=
function(a){return k.release(a)};return a}();var k=new u(100);return u})},"esri/core/libs/earcut/earcut":function(){define([],function(){function u(c,f,g){g=g||2;B=c.length/g+(f?2*f.length:0);A=!1;var d=f&&f.length,n=d?f[0]*g:c.length,p=a(c,0,n,g,!0),r=[];if(!p)return r;var w,C,z,t;if(d)a:{var x=g,d=[],y,K,I;t=0;for(y=f.length;t<y;t++)K=f[t]*x,I=t<y-1?f[t+1]*x:c.length,K=a(c,K,I,x,!1),K===K.next&&(K.steiner=!0),d.push(b(K));d.sort(k);for(t=0;t<d.length;t++){if(!p){p=null;break a}f=d[t];x=p;if(x=q(f,
x))f=D(x,f),e(f,f.next);p=e(p,p.next)}}if(A)return r;if(c.length>80*g){w=z=c[0];C=d=c[1];for(x=g;x<n;x+=g)t=c[x],f=c[x+1],t<w&&(w=t),f<C&&(C=f),t>z&&(z=t),f>d&&(d=f);z=Math.max(z-w,d-C)}m(p,r,g,w,C,z);return r}function a(a,c,b,f,g){var d;if(g===0<F(a,c,b,f))for(g=c;g<b;g+=f)d=p(g,a[g],a[g+1],d);else for(g=b-f;g>=c;g-=f)d=p(g,a[g],a[g+1],d);d&&n(d,d.next)&&(w(d),d=d.next);return d}function e(a,b){if(!a)return a;b||(b=a);var f,g=0,d=B*B/2;do{f=!1;if(a.steiner||!n(a,a.next)&&0!==c(a.prev,a,a.next))a=
a.next;else{w(a);a=b=a.prev;if(a===a.next)return null;f=!0}if(g++>d)return A=!0,null}while(f||a!==b);return b}function m(a,b,p,k,q,I,B){if(a){if(!B&&I){var r=a,t=r;do null===t.z&&(t.z=g(t.x,t.y,k,q,I)),t.prevZ=t.prev,t=t.nextZ=t.next;while(t!==r);t.prevZ.nextZ=null;t.prevZ=null;var r=t,G,J,x,y,K,H,E=1;do{t=r;x=r=null;for(y=0;t;){y++;J=t;for(G=K=0;G<E&&(K++,J=J.nextZ,J);G++);for(H=E;0<K||0<H&&J;)0===K?(G=J,J=J.nextZ,H--):0!==H&&J?t.z<=J.z?(G=t,t=t.nextZ,K--):(G=J,J=J.nextZ,H--):(G=t,t=t.nextZ,K--),
x?x.nextZ=G:r=G,G.prevZ=x,x=G;t=J}x.nextZ=null;E*=2}while(1<y)}for(r=a;a.prev!==a.next;){t=a.prev;J=a.next;if(I)a:{x=a;H=k;var F=q,V=I;y=x.prev;K=x;E=x.next;if(0<=c(y,K,E))x=!1;else{var S=y.x>K.x?y.x>E.x?y.x:E.x:K.x>E.x?K.x:E.x,u=y.y>K.y?y.y>E.y?y.y:E.y:K.y>E.y?K.y:E.y;G=g(y.x<K.x?y.x<E.x?y.x:E.x:K.x<E.x?K.x:E.x,y.y<K.y?y.y<E.y?y.y:E.y:K.y<E.y?K.y:E.y,H,F,V);H=g(S,u,H,F,V);for(F=x.nextZ;F&&F.z<=H;){if(F!==x.prev&&F!==x.next&&f(y.x,y.y,K.x,K.y,E.x,E.y,F.x,F.y)&&0<=c(F.prev,F,F.next)){x=!1;break a}F=
F.nextZ}for(F=x.prevZ;F&&F.z>=G;){if(F!==x.prev&&F!==x.next&&f(y.x,y.y,K.x,K.y,E.x,E.y,F.x,F.y)&&0<=c(F.prev,F,F.next)){x=!1;break a}F=F.prevZ}x=!0}}else x=d(a);if(x)b.push(t.i/p),b.push(a.i/p),b.push(J.i/p),w(a),r=a=J.next;else{if(A)break;a=J;if(a===r){if(!B)m(e(a),b,p,k,q,I,1);else if(1===B){B=b;r=p;t=a;do J=t.prev,x=t.next.next,!n(J,x)&&C(J,t,t.next,x)&&z(J,x)&&z(x,J)&&(B.push(J.i/r),B.push(t.i/r),B.push(x.i/r),w(t),w(t.next),t=a=x),t=t.next;while(t!==a);a=t;m(a,b,p,k,q,I,2)}else if(2===B)a:{B=
a;do{for(r=B.next.next;r!==B.prev;){if(t=B.i!==r.i){t=B;J=r;x=void 0;if(x=t.next.i!==J.i&&t.prev.i!==J.i){x=void 0;b:{x=t;do{if(x.i!==t.i&&x.next.i!==t.i&&x.i!==J.i&&x.next.i!==J.i&&C(x,x.next,t,J)){x=!0;break b}x=x.next}while(x!==t);x=!1}x=!x}y=void 0;if(y=x&&z(t,J)&&z(J,t)){x=t;y=!1;K=(t.x+J.x)/2;J=(t.y+J.y)/2;do x.y>J!==x.next.y>J&&K<(x.next.x-x.x)*(J-x.y)/(x.next.y-x.y)+x.x&&(y=!y),x=x.next;while(x!==t)}t=y}if(t){a=D(B,r);B=e(B,B.next);a=e(a,a.next);m(B,b,p,k,q,I);m(a,b,p,k,q,I);break a}r=r.next}B=
B.next}while(B!==a)}break}}}}}function d(a){var b=a.prev,g=a.next;if(0<=c(b,a,g))return!1;for(var d=a.next.next,n=0;d!==a.prev;){if(f(b.x,b.y,a.x,a.y,g.x,g.y,d.x,d.y)&&0<=c(d.prev,d,d.next))return!1;d=d.next;if(n++>B)return A=!0,!1}return!0}function k(a,c){return a.x-c.x}function q(a,c){var b=c,g=a.x,d=a.y,n=-Infinity,p;do{if(!b)return null;if(d<=b.y&&d>=b.next.y){var k=b.x+(d-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(k<=g&&k>n){n=k;if(k===g){if(d===b.y)return b;if(d===b.next.y)return b.next}p=b.x<b.next.x?
b:b.next}}b=b.next}while(b!==c);if(!p)return null;if(g===n)return p.prev;c=p;for(var k=p.x,e=p.y,m=Infinity,q,b=p.next;b!==c;)g>=b.x&&b.x>=k&&f(d<e?g:n,d,k,e,d<e?n:g,d,b.x,b.y)&&(q=Math.abs(d-b.y)/(g-b.x),(q<m||q===m&&b.x>p.x)&&z(b,a)&&(p=b,m=q)),b=b.next;return p}function g(a,c,b,f,g){a=32767*(a-b)/g;c=32767*(c-f)/g;a=(a|a<<8)&16711935;a=(a|a<<4)&252645135;a=(a|a<<2)&858993459;c=(c|c<<8)&16711935;c=(c|c<<4)&252645135;c=(c|c<<2)&858993459;return(a|a<<1)&1431655765|((c|c<<1)&1431655765)<<1}function b(a){var c=
a,b=a;do c.x<b.x&&(b=c),c=c.next;while(c!==a);return b}function f(a,c,b,f,g,d,n,p){return 0<=(g-n)*(c-p)-(a-n)*(d-p)&&0<=(a-n)*(f-p)-(b-n)*(c-p)&&0<=(b-n)*(d-p)-(g-n)*(f-p)}function c(a,c,b){return(c.y-a.y)*(b.x-c.x)-(c.x-a.x)*(b.y-c.y)}function n(a,c){return a.x===c.x&&a.y===c.y}function C(a,b,f,g){return n(a,b)&&n(f,g)||n(a,g)&&n(f,b)?!0:0<c(a,b,f)!==0<c(a,b,g)&&0<c(f,g,a)!==0<c(f,g,b)}function z(a,b){return 0>c(a.prev,a,a.next)?0<=c(a,b,a.next)&&0<=c(a,a.prev,b):0>c(a,b,a.prev)||0>c(a,a.next,b)}
function D(a,c){var b=new I(a.i,a.x,a.y),f=new I(c.i,c.x,c.y),g=a.next,d=c.prev;a.next=c;c.prev=a;b.next=g;g.prev=b;f.next=b;b.prev=f;d.next=f;f.prev=d;return f}function p(a,c,b,f){a=new I(a,c,b);f?(a.next=f.next,a.prev=f,f.next.prev=a,f.next=a):(a.prev=a,a.next=a);return a}function w(a){a.next.prev=a.prev;a.prev.next=a.next;a.prevZ&&(a.prevZ.nextZ=a.nextZ);a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function I(a,c,b){this.i=a;this.x=c;this.y=b;this.nextZ=this.prevZ=this.z=this.next=this.prev=null;this.steiner=
!1}function F(a,c,b,f){for(var g=0,d=b-f;c<b;c+=f)g+=(a[d]-a[c])*(a[c+1]+a[d+1]),d=c;return g}var B,A;u.deviation=function(a,c,b,f){var g=c&&c.length,d=Math.abs(F(a,0,g?c[0]*b:a.length,b));if(g)for(var g=0,n=c.length;g<n;g++)d-=Math.abs(F(a,c[g]*b,g<n-1?c[g+1]*b:a.length,b));for(g=c=0;g<f.length;g+=3){var n=f[g]*b,p=f[g+1]*b,k=f[g+2]*b;c+=Math.abs((a[n]-a[k])*(a[p+1]-a[n+1])-(a[n]-a[p])*(a[k+1]-a[n+1]))}return 0===d&&0===c?0:Math.abs((c-d)/d)};u.flatten=function(a){for(var c=a[0][0].length,b={vertices:[],
holes:[],dimensions:c},f=0,g=0;g<a.length;g++){for(var d=0;d<a[g].length;d++)for(var n=0;n<c;n++)b.vertices.push(a[g][d][n]);0<g&&(f+=a[g-1].length,b.holes.push(f))}return b};return u})},"esri/views/2d/engine/webgl/Geometry":function(){define(["require","exports"],function(u,a){Object.defineProperty(a,"__esModule",{value:!0});u=function(){function a(a,d){this.x=a;this.y=d}a.prototype.clone=function(){return new a(this.x,this.y)};a.prototype.equals=function(a,d){return a===this.x&&d===this.y};a.prototype.isEqual=
function(a){return a.x===this.x&&a.y===this.y};a.prototype.setCoords=function(a,d){this.x=a;this.y=d};a.prototype.normalize=function(){var a=this.x,d=this.y,a=Math.sqrt(a*a+d*d);this.x/=a;this.y/=a};a.prototype.rightPerpendicular=function(){var a=this.x;this.x=this.y;this.y=-a};a.prototype.move=function(a,d){this.x+=a;this.y+=d};a.prototype.assign=function(a){this.x=a.x;this.y=a.y};a.prototype.assignAdd=function(a,d){this.x=a.x+d.x;this.y=a.y+d.y};a.prototype.assignSub=function(a,d){this.x=a.x-d.x;
this.y=a.y-d.y};a.prototype.rotate=function(a,d){var k=this.x,e=this.y;this.x=k*a-e*d;this.y=k*d+e*a};a.prototype.scale=function(a){this.x*=a;this.y*=a};a.prototype.length=function(){var a=this.x,d=this.y;return Math.sqrt(a*a+d*d)};a.distance=function(a,d){var k=d.x-a.x;a=d.y-a.y;return Math.sqrt(k*k+a*a)};a.add=function(e,d){return new a(e.x+d.x,e.y+d.y)};a.sub=function(e,d){return new a(e.x-d.x,e.y-d.y)};return a}();a.Point=u})},"esri/views/vectorTiles/GeometryUtils":function(){define(["require",
"exports"],function(u,a){function e(a,k){a%=k;return 0<=a?a:a+k}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var m=1/Math.LN2;a.positiveMod=e;a.radToByte=function(d){return e(d*a.C_RAD_TO_256,256)};a.degToByte=function(d){return e(d*a.C_DEG_TO_256,256)};a.log2=
function(a){return Math.log(a)*m};a.sqr=function(a){return a*a};a.clamp=function(a,k,e){return Math.min(Math.max(a,k),e)};a.interpolate=function(a,k,e){return a*(1-e)+k*e};a.between=function(a,k,e){return a>=k&&a<=e||a>=e&&a<=k}})},"esri/views/vectorTiles/IndexMemoryBuffer":function(){define(["require","exports","../../core/tsSupport/extendsHelper","../../core/tsSupport/decorateHelper","./MemoryBuffer"],function(u,a,e,m,d){Object.defineProperty(a,"__esModule",{value:!0});u=function(a){function d(){return a.call(this,
12)||this}e(d,a);d.prototype.add=function(a,b,f){var c=this.array;c.push(a);c.push(b);c.push(f)};return d}(d);a.TriangleIndexBuffer=u;d=function(a){function d(){return a.call(this,4)||this}e(d,a);d.prototype.add=function(a){this.array.push(a)};return d}(d);a.PointElementMemoryBuffer=d})},"esri/views/vectorTiles/MemoryBuffer":function(){define(["require","exports"],function(u,a){return function(){function a(a){this._array=[];0>=a&&console.error("strideInBytes must be positive!");this._stride=a}Object.defineProperty(a.prototype,
"array",{get:function(){return this._array},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"index",{get:function(){return 4*this._array.length/this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"itemSize",{get:function(){return this._stride},enumerable:!0,configurable:!0});Object.defineProperty(a.prototype,"sizeInBytes",{get:function(){return 4*this._array.length},enumerable:!0,configurable:!0});a.prototype.reset=function(){this.array.length=0};a.prototype.toBuffer=
function(){return(new Uint32Array(this._array)).buffer};a.i1616to32=function(a,d){return 65535&a|d<<16};a.i8888to32=function(a,d,k,e){return a&255|(d&255)<<8|(k&255)<<16|e<<24};a.i8816to32=function(a,d,k){return a&255|(d&255)<<8|k<<16};return a}()})},"esri/views/vectorTiles/LineBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ../2d/engine/webgl/LineTess ./Bucket ./style/StyleLayer".split(" "),function(u,a,e,m,d,k,q){var g=new d.Tessellator({distanceAlongCorrection:!0});
return function(a){function b(c,b,f,g){b=a.call(this,c,b)||this;b.extrudeVectorsDoubleBuffer=[d.allocExtrudeVectors(),d.allocExtrudeVectors()];b.firstExtrudeVectors=d.allocExtrudeVectors();b.recycledTriangleBridge=d.allocTriangles(20);b.recycledTrianglePie=d.allocTriangles(20);if(c.hasDataDrivenLine!==f.isDataDriven())throw Error("incompatible line buffer");b._lineVertexBuffer=f;b._lineIndexBuffer=g;return b}e(b,a);Object.defineProperty(b.prototype,"lineIndexStart",{get:function(){return this._lineIndexStart},
enumerable:!0,configurable:!0});Object.defineProperty(b.prototype,"lineIndexCount",{get:function(){return this._lineIndexCount},enumerable:!0,configurable:!0});b.prototype.assignBufferInfo=function(a){a._lineIndexStart=this._lineIndexStart;a._lineIndexCount=this._lineIndexCount};b.prototype.processFeatures=function(a,b){this._lineIndexStart=this._lineIndexBuffer.index;this._lineIndexCount=0;b=this.layer;var c=this.zoom,f=b.hasDataDrivenLine;a&&a.setExtent(this.layerExtent);for(var g=b.getPaintValue("line-pattern",
c),d=[1,1,1,1],n=1,k=1,e=0,m=this._features;e<m.length;e++){var A=m[e],r=new q.LineLayout(b,c,A);!g&&b.hasDataDrivenColor&&(d=b.getPaintValue("line-color",c,A));b.hasDataDrivenOpacity&&(n=b.getPaintValue("line-opacity",c,A));b.hasDataDrivenWidth&&(k=b.getPaintValue("line-width",c,A));var t=void 0;if(f&&(t={color:d,opacity:n,size:Math.max(Math.min(k,256),0)},0>=t.size||0>=t.opacity||0>=t.color[3]))continue;A=A.getGeometry(a);this._processFeature(r,A,t)}};b.prototype._processFeature=function(a,b,f){if(b)for(var c=
b.length,g=0;g<c;g++)this._processGeometry(b[g],a,f)};b.prototype._processGeometry=function(a,b,f){if(!(2>a.length)){for(var c=a[0],g=a[a.length-1],n=g.x-c.x,g=g.y-c.y,c=1E-6>n*n+g*g,k=a[0],e=1;e<a.length;)n=a[e].x-k.x,g=a[e].y-k.y,1E-6>n*n+g*g?a.splice(e,1):(k=a[e],++e);if(!(2>a.length)){this.vertices=a;this.verticesLen=a.length;this.isClosed=c;this.cap=b.cap;this.join=b.join;this.almostParallelRads=.05;this.veryShallowRads=.1;this.miterSafeRads=d.MITER_SAFE_RADS;this.miterLimitMag=Math.min(b.miterLimit,
d.SYSTEM_MAG_LIMIT);this.roundLimitRads=Math.min(b.roundLimit,.5);this.newRoundJoinsSafeRads=2.3;b=this._lineIndexBuffer.index;for(var n=0,q=void 0,g=this.verticesLen,k=0;k<g;++k){var e=a[k],m=a[(k+g-1)%g],C=c&&this._isClipEdge(m,e),m=q===this.extrudeVectorsDoubleBuffer[k%2]?this.extrudeVectorsDoubleBuffer[(k+1)%2]:this.extrudeVectorsDoubleBuffer[k%2];k<g-1||!c||this.hasPattern?(this._computeExtrudeVectors(m,k),this._writeGPUVertices(e.x,e.y,n,m,f),!m.capCenter||c&&k===g-1||this._writeGPUPieElements(m,
C),c&&0===k&&!this.hasPattern&&d.copyExtrudeVectors(this.firstExtrudeVectors,m)):d.copyExtrudeVectors(m,this.firstExtrudeVectors);q&&this._writeGPUBridgeElements(q,m,C);k<g-1&&(q=a[k+1],e=d.length([q.x-e.x,q.y-e.y]),n+=e);q=m}this._lineIndexCount+=3*(this._lineIndexBuffer.index-b)}}};b.prototype._computeExtrudeVectors=function(a,b){var c=this.vertices,f=this.verticesLen,g=this.isClosed,n=c[b],k=[void 0,void 0],e=[void 0,void 0];if(0<b&&b<f-1){var q=c[(b+f-1)%f],m=c[(b+1)%f];d.normalize(k,[n.x-q.x,
n.y-q.y]);d.normalize(e,[m.x-n.x,m.y-n.y])}else if(0===b)m=c[(b+1)%f],d.normalize(e,[m.x-n.x,m.y-n.y]),g?(c=c[f-2],d.normalize(k,[n.x-c.x,n.y-c.y])):k=e;else if(b===f-1)q=c[(b+f-1)%f],d.normalize(k,[n.x-q.x,n.y-q.y]),g?(c=c[1],d.normalize(e,[c.x-n.x,c.y-n.y])):e=k;else{console.error("Vertex index 'i' out of range.");return}g||0!==b?g||b!==f-1?this._computeJoinExtrudeVectors(a,k,e):this._computeCapExtrudeVectors(a,k,e,d.CapPosition.END):this._computeCapExtrudeVectors(a,k,e,d.CapPosition.START)};b.prototype._computeCapExtrudeVectors=
function(a,b,f,k){0===this.cap?g.buttCap(a,b,f):1===this.cap?g.roundCap(a,b,f,k,d.getNumberOfSlices(Math.PI),k===d.CapPosition.START?-1:1):2===this.cap?g.squareCap(a,b,f,k):g.buttCap(a,b,f)};b.prototype._computeJoinExtrudeVectors=function(a,b,f){var c=d.getRads(b,f);if(c>Math.PI-this.almostParallelRads)g.rectJoin(a,b,f);else if(0===this.join&&c>=this.veryShallowRads)g.bevelJoin(a,b,f,1);else if(1===this.join&&c>=this.veryShallowRads){var n=d.getNumberOfSlices(c);c<this.newRoundJoinsSafeRads?2>n||
c<this.roundLimitRads?g.bevelJoin(a,b,f,1):g.roundJoin(a,b,f,n):g.unitRoundJoin(a,b,f,n)}else c<this.almostParallelRads?g.fastMiterJoin(a,b,f):c<this.miterSafeRads?g.miterJoin(a,b,f):g.bevelJoin(a,b,f,this.miterLimitMag)};b.prototype._writeGPUVertices=function(a,b,f,g,d){for(var c=0;c<g.vectors.count;++c){var n=g.vectors.items[c].vector[0],k=g.vectors.items[c].vector[1],e=g.vectors.items[c].texCoords[0],q=g.vectors.items[c].texCoords[1];g.vectors.items[c].base=this._lineVertexBuffer.index;this._lineVertexBuffer.add(a,
b,n,k,e,q,f,d)}};b.prototype._writeGPUBridgeElements=function(a,b,f){g.bridge(this.recycledTriangleBridge,a,b);if(!f)for(a=0;a<this.recycledTriangleBridge.count;++a)b=this.recycledTriangleBridge.items[a],this._lineIndexBuffer.add(b.v1.base,b.v2.base,b.v3.base)};b.prototype._writeGPUPieElements=function(a,b){g.pie(this.recycledTrianglePie,a);if(!b)for(a=0;a<this.recycledTrianglePie.count;++a)b=this.recycledTrianglePie.items[a],this._lineIndexBuffer.add(b.v1.base,b.v2.base,b.v3.base)};b.prototype._isClipEdge=
function(a,b){return a.x===b.x?-64>=a.x||4160<=a.x:a.y===b.y?-64>=a.y||4160<=a.y:!1};return b}(k)})},"esri/views/2d/engine/webgl/LineTess":function(){define(["require","exports"],function(u,a){function e(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push(void 0);return b}function m(a,b){B.vector[0]=a.vector[0];B.vector[1]=a.vector[1];B.texCoords[0]=a.texCoords[0];B.texCoords[1]=a.texCoords[1];B.direction[0]=a.direction[0];B.direction[1]=a.direction[1];B.base=a.base;a.vector[0]=b.vector[0];
a.vector[1]=b.vector[1];a.texCoords[0]=b.texCoords[0];a.texCoords[1]=b.texCoords[1];a.direction[0]=b.direction[0];a.direction[1]=b.direction[1];a.base=b.base;b.vector[0]=B.vector[0];b.vector[1]=B.vector[1];b.texCoords[0]=B.texCoords[0];b.texCoords[1]=B.texCoords[1];b.direction[0]=B.direction[0];b.direction[1]=B.direction[1];b.base=B.base}function d(a,b){return a[0]*b[0]+a[1]*b[1]}function k(a){return Math.sqrt(d(a,a))}function q(a,b){var c=k(b);a[0]=b[0]/c;a[1]=b[1]/c;return a}function g(a,b){a[0]=
-b[1];a[1]=b[0];return a}function b(a,b){return a[0]*b[1]-a[1]*b[0]}function f(a,b){a[0]=-b[0];a[1]=-b[1];return a}function c(a,b,c){a[0]=b[0]*c;a[1]=b[1]*c;return a}function n(a,b,c){a[0]=b[0]+c[0];a[1]=b[1]+c[1];return a}function C(a,b){a=d(a,b);return.999<a?0:-.999>a?Math.PI:Math.acos(a)}function z(a,b,f,g,d){if(0===g)a.count=0;else{var n=k(b),e=c(A[0],b,1/n);f=c(A[1],f,1/n);e=C(e,f);e=(d?-1:1)*e/g;d=Math.cos(e);e=Math.sin(e);f=b[0];var p=b[1];for(b=0;b<g-1;++b)n=f,f=d*n-e*p,p=e*n+d*p,a.items[b][0]=
f,a.items[b][1]=p;a.count=g-1}}function D(a){var b=a.count,c=Math.floor(b/2),f;for(f=0;f<c;++f){var g=a.items[f];a.items[f]=a.items[b-f-1];a.items[b-f-1]=g}}Object.defineProperty(a,"__esModule",{value:!0});var p;(function(a){a[a.ENTRY=1]="ENTRY";a[a.EXIT=2]="EXIT";a[a.CAP=3]="CAP"})(p=a.VectorRole||(a.VectorRole={}));var w;(function(a){a[a.START=1]="START";a[a.END=2]="END"})(w=a.CapPosition||(a.CapPosition={}));a.SYSTEM_MAG_LIMIT=3.8;a.MITER_SAFE_RADS=2*Math.acos(1/a.SYSTEM_MAG_LIMIT);var I=a.SYSTEM_MAG_LIMIT*
a.SYSTEM_MAG_LIMIT,F=8/(2*Math.PI);a.allocTriangles=function(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push({v1:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v2:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]},v3:{vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,void 0]}});return b};a.allocExtrudeVectors=function(){var a={items:[],count:0},b;for(b=0;30>b;++b)a.items.push({vector:[void 0,void 0],texCoords:[void 0,
void 0],direction:[void 0,void 0]});b={};b[p.ENTRY]=e(20);b[p.EXIT]=e(20);b[p.CAP]=e(20);return{vectors:a,lists:b}};a.copyExtrudeVectors=function(a,b){var c;for(c=0;c<b.vectors.count;++c)a.vectors.items[c].vector[0]=b.vectors.items[c].vector[0],a.vectors.items[c].vector[1]=b.vectors.items[c].vector[1],a.vectors.items[c].texCoords[0]=b.vectors.items[c].texCoords[0],a.vectors.items[c].texCoords[1]=b.vectors.items[c].texCoords[1],a.vectors.items[c].direction[0]=b.vectors.items[c].direction[0],a.vectors.items[c].direction[1]=
b.vectors.items[c].direction[1],a.vectors.items[c].base=b.vectors.items[c].base;a.vectors.count=b.vectors.count;var f=b.lists[p.ENTRY],g=a.lists[p.ENTRY],d=b.lists[p.EXIT],n=a.lists[p.EXIT],k=b.lists[p.CAP],e=a.lists[p.CAP];for(c=0;c<f.count;++c)g.items[c]=f.items[c];g.count=f.count;for(c=0;c<d.count;++c)n.items[c]=d.items[c];n.count=d.count;for(c=0;c<k.count;++c)e.items[c]=k.items[c];e.count=k.count;a.capCenter=b.capCenter};var B={vector:[void 0,void 0],texCoords:[void 0,void 0],direction:[void 0,
void 0],base:void 0};a.swapExtrudeVectors=m;var A=[];for(u=0;32>u;++u)A.push([void 0,void 0]);var r=function(a){var b={items:[],count:0},c;for(c=0;c<a;++c)b.items.push([void 0,void 0]);return b}(8);a.length=k;a.normalize=q;a.getNumberOfSlices=function(a){return Math.max(Math.round(a*F),1)};a.getRads=C;a.reverse=D;var t=[void 0,void 0],H=[void 0,void 0],S=[0,0],G=[0,0],E=[0,0],P=[0,0],R=Math.cos(Math.PI/4),L=Math.sin(Math.PI/4),M=Math.sqrt(2);u=function(){function a(a){this._distanceAlongCorrection=
a.distanceAlongCorrection}a.prototype.bridge=function(a,b,c){var f=b.vectors;b=b.lists[p.EXIT];var g=c.vectors,d=c.lists[p.ENTRY],n,k;if(b.count===d.count+1)c=b.items,n=f.items,k=d.items,g=g.items;else if(d.count===b.count+1)c=d.items,n=g.items,k=b.items,g=f.items;else if(b.count===d.count)c=d.items,n=g.items,k=b.items,g=f.items;else{console.error("Cannot bridge "+b.count+" to "+d.count+".");a.count=0;return}f=b.count+d.count-2;a.count=f;t[0]=c;t[1]=k;H[0]=n;H[1]=g;for(b=0;b<f;++b)c=a.items[b],n=
(b+0)%2,n=H[n][t[n][Math.floor((b+0)/2)]],c.v1.vector[0]=n.vector[0],c.v1.vector[1]=n.vector[1],c.v1.texCoords[0]=n.texCoords[0],c.v1.texCoords[1]=n.texCoords[1],c.v1.direction[0]=n.direction[0],c.v1.direction[1]=n.direction[1],c.v1.base=n.base,n=(b+1)%2,n=H[n][t[n][Math.floor((b+1)/2)]],c.v2.vector[0]=n.vector[0],c.v2.vector[1]=n.vector[1],c.v2.texCoords[0]=n.texCoords[0],c.v2.texCoords[1]=n.texCoords[1],c.v2.direction[0]=n.direction[0],c.v2.direction[1]=n.direction[1],c.v2.base=n.base,n=(b+2)%2,
n=H[n][t[n][Math.floor((b+2)/2)]],c.v3.vector[0]=n.vector[0],c.v3.vector[1]=n.vector[1],c.v3.texCoords[0]=n.texCoords[0],c.v3.texCoords[1]=n.texCoords[1],c.v3.direction[0]=n.direction[0],c.v3.direction[1]=n.direction[1],c.v3.base=n.base,n=c.v1.base&&c.v1.base.point||S,k=c.v2.base&&c.v2.base.point||S,g=c.v3.base&&c.v3.base.point||S,G[0]=n[0]+c.v1.vector[0],G[1]=n[1]+c.v1.vector[1],E[0]=k[0]+c.v2.vector[0],E[1]=k[1]+c.v2.vector[1],P[0]=g[0]+c.v3.vector[0],P[1]=g[1]+c.v3.vector[1],0>(E[0]-G[0])*(P[1]-
G[1])-(P[0]-G[0])*(E[1]-G[1])||m(c.v2,c.v3)};a.prototype.pie=function(a,b){if(0===b.lists[p.CAP].count)a.count=0;else if(1===b.lists[p.CAP].count)console.error("A single vector is not enough to define a pie."),a.count=0;else{a.count=b.lists[p.CAP].count-1;var c;for(c=0;c<a.count;++c){var f=a.items[c],g=b.vectors.items[b.lists[p.CAP].items[c]];f.v1.vector[0]=g.vector[0];f.v1.vector[1]=g.vector[1];f.v1.texCoords[0]=g.texCoords[0];f.v1.texCoords[1]=g.texCoords[1];f.v1.direction[0]=g.direction[0];f.v1.direction[1]=
g.direction[1];f.v1.base=g.base;g=b.vectors.items[b.lists[p.CAP].items[c+1]];f.v2.vector[0]=g.vector[0];f.v2.vector[1]=g.vector[1];f.v2.texCoords[0]=g.texCoords[0];f.v2.texCoords[1]=g.texCoords[1];f.v2.direction[0]=g.direction[0];f.v2.direction[1]=g.direction[1];f.v2.base=g.base;g=b.vectors.items[b.capCenter];f.v3.vector[0]=g.vector[0];f.v3.vector[1]=g.vector[1];f.v3.texCoords[0]=g.texCoords[0];f.v3.texCoords[1]=g.texCoords[1];f.v3.direction[0]=g.direction[0];f.v3.direction[1]=g.direction[1];f.v3.base=
g.base;var g=f.v1.base&&f.v1.base.point||S,d=f.v2.base&&f.v2.base.point||S,n=f.v3.base&&f.v3.base.point||S;G[0]=g[0]+f.v1.vector[0];G[1]=g[1]+f.v1.vector[1];E[0]=d[0]+f.v2.vector[0];E[1]=d[1]+f.v2.vector[1];P[0]=n[0]+f.v3.vector[0];P[1]=n[1]+f.v3.vector[1];0>(E[0]-G[0])*(P[1]-G[1])-(P[0]-G[0])*(E[1]-G[1])||m(f.v2,f.v3)}}};a.prototype.buttCap=function(a,b,c){this.fastMiterJoin(a,b,c)};a.prototype.roundCap=function(a,b,c,f,g,d){void 0===d&&(d=0);this.fastMiterJoin(a,b,c);c=f===w.START?0:1;f=f===w.START?
1:0;a.capCenter=a.vectors.count;b=a.vectors.items[a.capCenter];b.vector[0]=0;b.vector[1]=0;b.texCoords[0]=0;b.texCoords[1]=0;b.direction[0]=0;b.direction[1]=0;++a.vectors.count;z(r,a.vectors.items[c].vector,a.vectors.items[f].vector,g,!1);g=a.vectors.count;b=a.lists[p.CAP];b.items[0]=c;c=a.vectors.items[c].texCoords[1];var n=a.vectors.items[f].texCoords[1],k;for(k=0;k<r.count;++k){var e=d*(1-Math.abs(r.count/2-k)/(r.count/2)),q=c+k/(r.count-1)*(n-c),m=r.items[k],D=a.vectors.items[g+k];D.vector[0]=
m[0];D.vector[1]=m[1];D.texCoords[0]=e;D.texCoords[1]=q;D.direction[0]=0;D.direction[1]=0;b.items[k+1]=g+k}b.items[r.count+1]=f;b.count=r.count+2;a.vectors.count=g+r.count};a.prototype.squareCap=function(a,b,f,g){this.fastMiterJoin(a,b,f);b=g===w.START?0:1;f=g===w.START?1:0;var d=A[0],n=A[1],k=A[2],e=A[3];g=A[4];var p=a.vectors.items[b].vector;d[0]=R*p[0]-L*p[1];d[1]=L*p[0]+R*p[1];c(e,d,M);n[0]=R*d[0]-L*d[1];n[1]=L*d[0]+R*d[1];k[0]=R*n[0]-L*n[1];k[1]=L*n[0]+R*n[1];c(g,k,M);b=a.vectors.items[b];b.vector[0]=
e[0];b.vector[1]=e[1];a=a.vectors.items[f];a.vector[0]=g[0];a.vector[1]=g[1]};a.prototype.fastMiterJoin=function(a,b,c){c=g(A[0],c);b=f(A[1],c);var d=a.vectors.items[0];d.vector[0]=c[0];d.vector[1]=c[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=0;c=a.vectors.items[1];c.vector[0]=b[0];c.vector[1]=b[1];c.texCoords[0]=0;c.texCoords[1]=1;c.direction[0]=0;c.direction[1]=0;a.vectors.count=2;b=a.lists[p.ENTRY];b.items[0]=0;b.items[1]=1;b.count=2;b=a.lists[p.EXIT];b.items[0]=0;b.items[1]=
1;b.count=2;a.lists[p.CAP].count=0;a.capCenter=void 0};a.prototype.miterJoin=function(a,b,n){var k=g(A[0],b),e=g(A[1],n),m=A[2];m[0]=k[0]+e[0];m[1]=k[1]+e[1];e=q(A[3],m);k=d(e,k);e=c(A[4],e,1/k);k=f(A[5],e);this._distanceAlongCorrection?(m=a.vectors.items[0],m.vector[0]=e[0],m.vector[1]=e[1],m.texCoords[0]=0,m.texCoords[1]=-1,m.direction[0]=b[0],m.direction[1]=b[1],m=a.vectors.items[1],m.vector[0]=k[0],m.vector[1]=k[1],m.texCoords[0]=0,m.texCoords[1]=1,m.direction[0]=b[0],m.direction[1]=b[1],b=a.vectors.items[2],
b.vector[0]=e[0],b.vector[1]=e[1],b.texCoords[0]=0,b.texCoords[1]=-1,b.direction[0]=n[0],b.direction[1]=n[1],b=a.vectors.items[3],b.vector[0]=k[0],b.vector[1]=k[1],b.texCoords[0]=0,b.texCoords[1]=1,b.direction[0]=n[0],b.direction[1]=n[1],a.vectors.count=4,n=a.lists[p.ENTRY],n.items[0]=0,n.items[1]=1,n.count=2,n=a.lists[p.EXIT],n.items[0]=2,n.items[1]=3):(m=a.vectors.items[0],m.vector[0]=e[0],m.vector[1]=e[1],m.texCoords[0]=0,m.texCoords[1]=-1,m.direction[0]=0,m.direction[1]=0,m=a.vectors.items[1],
m.vector[0]=k[0],m.vector[1]=k[1],m.texCoords[0]=0,m.texCoords[1]=1,m.direction[0]=0,m.direction[1]=0,a.vectors.count=2,n=a.lists[p.ENTRY],n.items[0]=0,n.items[1]=1,n.count=2,n=a.lists[p.EXIT],n.items[0]=0,n.items[1]=1);n.count=2;a.lists[p.CAP].count=0;a.capCenter=void 0};a.prototype.bevelJoin=function(a,k,e,m){var w=m*m;m=b(k,e);var C=0<m?[-1,1]:[1,-1],r=C[0],C=C[1],t=0<m?f(A[0],g(A[1],k)):g(A[2],k),z=0<m?f(A[3],g(A[4],e)):g(A[5],e),G=A[6];G[0]=t[0]+z[0];G[1]=t[1]+z[1];var x=q(A[7],G),B=f(A[8],x),
E=d(x,t),G=b(x,t),F=Math.abs(G/E),G=1+F*F,y=G<I?[F,this._distanceAlongCorrection]:[Math.sqrt(I-1),!0],H=y[0],y=y[1],K=G<w?[F,this._distanceAlongCorrection]:[Math.sqrt(w-1),!0],F=K[0];(K=K[1])&&y?(y=a.vectors.items[0],n(y.vector,f(A[9],t),c(A[10],f(A[11],k),H)),y.texCoords[0]=0,y.texCoords[1]=r,y.direction[0]=this._distanceAlongCorrection?k[0]:0,y.direction[1]=this._distanceAlongCorrection?k[1]:0,B=a.vectors.items[1],n(B.vector,f(A[12],z),c(A[13],e,H)),B.texCoords[0]=0,B.texCoords[1]=r,B.direction[0]=
this._distanceAlongCorrection?e[0]:0,B.direction[1]=this._distanceAlongCorrection?e[1]:0,r=a.vectors.items[2],r.vector[0]=0,r.vector[1]=0,r.texCoords[0]=0,r.texCoords[1]=0,r.direction[0]=0,r.direction[1]=0,r=a.vectors.items[3],n(r.vector,t,c(A[14],k,F)),r.texCoords[0]=0,r.texCoords[1]=C,r.direction[0]=this._distanceAlongCorrection?k[0]:0,r.direction[1]=this._distanceAlongCorrection?k[1]:0,k=a.vectors.items[4],n(k.vector,z,c(A[15],f(A[16],e),F)),k.texCoords[0]=0,k.texCoords[1]=C,k.direction[0]=this._distanceAlongCorrection?
e[0]:0,k.direction[1]=this._distanceAlongCorrection?e[1]:0,a.vectors.count=5,e=a.lists[p.ENTRY],e.items[0]=0,e.items[1]=2,e.items[2]=3,e.count=3,e=a.lists[p.EXIT],e.items[0]=1,e.items[1]=2,e.items[2]=4,e.count=3,G<w?(w=a.lists[p.CAP],w.count=0,a.capCenter=void 0):(w=a.lists[p.CAP],w.items[0]=3,w.items[1]=4,w.count=2,a.capCenter=2)):!K&&y?(y=a.vectors.items[0],n(y.vector,f(A[9],t),c(A[10],f(A[11],k),H)),y.texCoords[0]=0,y.texCoords[1]=r,y.direction[0]=this._distanceAlongCorrection?k[0]:0,y.direction[1]=
this._distanceAlongCorrection?k[1]:0,B=a.vectors.items[1],n(B.vector,f(A[12],z),c(A[13],e,H)),B.texCoords[0]=0,B.texCoords[1]=r,B.direction[0]=this._distanceAlongCorrection?e[0]:0,B.direction[1]=this._distanceAlongCorrection?e[1]:0,r=a.vectors.items[2],r.vector[0]=0,r.vector[1]=0,r.texCoords[0]=0,r.texCoords[1]=0,r.direction[0]=0,r.direction[1]=0,r=a.vectors.items[3],c(r.vector,x,1/E),r.texCoords[0]=0,r.texCoords[1]=C,r.direction[0]=0,r.direction[1]=0,a.vectors.count=4,e=a.lists[p.ENTRY],e.items[0]=
0,e.items[1]=2,e.items[2]=3,e.count=3,e=a.lists[p.EXIT],e.items[0]=1,e.items[1]=2,e.items[2]=3,e.count=3,a.lists[p.CAP].count=0,a.capCenter=void 0):K&&!y?(y=a.vectors.items[0],c(y.vector,B,1/E),y.texCoords[0]=0,y.texCoords[1]=r,y.direction[0]=0,y.direction[1]=0,B=a.vectors.items[1],B.vector[0]=0,B.vector[1]=0,B.texCoords[0]=0,B.texCoords[1]=0,B.direction[0]=0,B.direction[1]=0,r=a.vectors.items[2],n(r.vector,t,c(A[9],k,F)),r.texCoords[0]=0,r.texCoords[1]=C,r.direction[0]=this._distanceAlongCorrection?
k[0]:0,r.direction[1]=this._distanceAlongCorrection?k[1]:0,r=a.vectors.items[3],n(r.vector,z,c(A[10],f(A[11],e),F)),r.texCoords[0]=0,r.texCoords[1]=C,r.direction[0]=this._distanceAlongCorrection?e[0]:0,r.direction[1]=this._distanceAlongCorrection?e[1]:0,a.vectors.count=4,e=a.lists[p.ENTRY],e.items[0]=0,e.items[1]=1,e.items[2]=2,e.count=3,e=a.lists[p.EXIT],e.items[0]=0,e.items[1]=1,e.items[2]=3,e.count=3,G<w?(w=a.lists[p.CAP],w.count=0,a.capCenter=void 0):(w=a.lists[p.CAP],w.items[0]=2,w.items[1]=
3,w.count=2,a.capCenter=1)):K||y||(y=a.vectors.items[0],c(y.vector,B,1/E),y.texCoords[0]=0,y.texCoords[1]=r,y.direction[0]=0,y.direction[1]=0,B=a.vectors.items[1],c(B.vector,x,1/E),B.texCoords[0]=0,B.texCoords[1]=C,B.direction[0]=0,B.direction[1]=0,a.vectors.count=2,e=a.lists[p.ENTRY],e.items[0]=0,e.items[1]=1,e.count=2,e=a.lists[p.EXIT],e.items[0]=0,e.items[1]=1,e.count=2,a.lists[p.CAP].count=0,a.capCenter=void 0);0>m&&(D(a.lists[p.ENTRY]),D(a.lists[p.EXIT]))};a.prototype.roundJoin=function(a,k,
e,m){var w=b(k,e),C=0<w?[-1,1]:[1,-1],t=C[0],C=C[1],B=0<w?f(A[0],g(A[1],k)):g(A[2],k),G=0<w?f(A[3],g(A[4],e)):g(A[5],e),E=A[6];E[0]=B[0]+G[0];E[1]=B[1]+G[1];var x=q(A[7],E),E=f(A[8],x),F=d(x,B),x=b(x,B),x=Math.abs(x/F),y=1+x*x<I?[x,this._distanceAlongCorrection]:[Math.sqrt(I-1),!0],x=y[0];y[1]?(y=a.vectors.items[0],y.vector[0]=B[0],y.vector[1]=B[1],y.texCoords[0]=0,y.texCoords[1]=C,y.direction[0]=0,y.direction[1]=0,y=a.vectors.items[1],y.vector[0]=G[0],y.vector[1]=G[1],y.texCoords[0]=0,y.texCoords[1]=
C,y.direction[0]=0,y.direction[1]=0,y=a.vectors.items[2],n(y.vector,f(A[9],B),c(A[10],f(A[11],k),x)),y.texCoords[0]=0,y.texCoords[1]=t,y.direction[0]=this._distanceAlongCorrection?k[0]:0,y.direction[1]=this._distanceAlongCorrection?k[1]:0,k=a.vectors.items[3],n(k.vector,f(A[12],G),c(A[13],e,x)),k.texCoords[0]=0,k.texCoords[1]=t,k.direction[0]=this._distanceAlongCorrection?e[0]:0,k.direction[1]=this._distanceAlongCorrection?e[1]:0,e=a.vectors.items[4],e.vector[0]=0,e.vector[1]=0,e.texCoords[0]=0,e.texCoords[1]=
0,e.direction[0]=0,e.direction[1]=0,a.vectors.count=5,e=a.lists[p.ENTRY],e.items[0]=2,e.items[1]=4,e.items[2]=0,e.count=3,e=a.lists[p.EXIT],e.items[0]=3,e.items[1]=4,e.items[2]=1,e.count=3,a.capCenter=4):(y=a.vectors.items[0],y.vector[0]=B[0],y.vector[1]=B[1],y.texCoords[0]=0,y.texCoords[1]=C,y.direction[0]=0,y.direction[1]=0,y=a.vectors.items[1],y.vector[0]=G[0],y.vector[1]=G[1],y.texCoords[0]=0,y.texCoords[1]=C,y.direction[0]=0,y.direction[1]=0,y=a.vectors.items[2],c(y.vector,E,1/F),y.texCoords[0]=
0,y.texCoords[1]=t,y.direction[0]=0,y.direction[1]=0,k=a.vectors.items[3],k.vector[0]=0,k.vector[1]=0,k.texCoords[0]=0,k.texCoords[1]=0,k.direction[0]=0,k.direction[1]=0,a.vectors.count=4,e=a.lists[p.ENTRY],e.items[0]=2,e.items[1]=3,e.items[2]=0,e.count=3,e=a.lists[p.EXIT],e.items[0]=2,e.items[1]=3,e.items[2]=1,e.count=3,a.capCenter=3);z(r,B,G,m,0>w);m=a.vectors.count;B=a.lists[p.CAP];for(G=B.items[0]=0;G<r.count;++G)e=r.items[G],t=a.vectors.items[m+G],t.vector[0]=e[0],t.vector[1]=e[1],t.texCoords[0]=
0,t.texCoords[1]=C,t.direction[0]=0,t.direction[1]=0,B.items[G+1]=m+G;B.items[r.count+1]=1;B.count=r.count+2;a.vectors.count=m+r.count;0>w&&(D(a.lists[p.ENTRY]),D(a.lists[p.EXIT]))};a.prototype.unitRoundJoin=function(a,c,d,n){var e=b(c,d),k=0<e?[-1,1]:[1,-1],m=k[0],k=k[1];c=0<e?f(A[0],g(A[1],c)):g(A[2],c);d=0<e?f(A[3],g(A[4],d)):g(A[5],d);var q=a.vectors.items[0];q.vector[0]=c[0];q.vector[1]=c[1];q.texCoords[0]=0;q.texCoords[1]=k;q.direction[0]=0;q.direction[1]=0;q=a.vectors.items[1];q.vector[0]=
d[0];q.vector[1]=d[1];q.texCoords[0]=0;q.texCoords[1]=k;q.direction[0]=0;q.direction[1]=0;q=a.vectors.items[2];f(q.vector,c);q.texCoords[0]=0;q.texCoords[1]=m;q.direction[0]=0;q.direction[1]=0;q=a.vectors.items[3];f(q.vector,d);q.texCoords[0]=0;q.texCoords[1]=m;q.direction[0]=0;q.direction[1]=0;m=a.vectors.items[4];m.vector[0]=0;m.vector[1]=0;m.texCoords[0]=0;m.texCoords[1]=0;m.direction[0]=0;m.direction[1]=0;a.vectors.count=5;m=a.lists[p.ENTRY];m.items[0]=2;m.items[1]=0;m.count=2;m=a.lists[p.EXIT];
m.items[0]=3;m.items[1]=1;m.count=2;a.capCenter=4;z(r,c,d,n,0>e);n=a.vectors.count;c=a.lists[p.CAP];for(m=c.items[0]=0;m<r.count;++m)d=r.items[m],q=a.vectors.items[n+m],q.vector[0]=d[0],q.vector[1]=d[1],q.texCoords[0]=0,q.texCoords[1]=k,q.direction[0]=0,q.direction[1]=0,c.items[m+1]=n+m;c.items[r.count+1]=1;c.count=r.count+2;a.vectors.count=n+r.count;0>e&&(D(a.lists[p.ENTRY]),D(a.lists[p.EXIT]))};a.prototype.rectJoin=function(a,b,c){b=g(A[0],b);c=g(A[1],c);var d=a.vectors.items[0];d.vector[0]=b[0];
d.vector[1]=b[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=0;d=a.vectors.items[1];d.vector[0]=c[0];d.vector[1]=c[1];d.texCoords[0]=0;d.texCoords[1]=-1;d.direction[0]=0;d.direction[1]=0;d=a.vectors.items[2];f(d.vector,b);d.texCoords[0]=0;d.texCoords[1]=1;d.direction[0]=0;d.direction[1]=0;b=a.vectors.items[3];f(b.vector,c);b.texCoords[0]=0;b.texCoords[1]=1;b.direction[0]=0;b.direction[1]=0;a.vectors.count=4;b=a.lists[p.ENTRY];b.items[0]=0;b.items[1]=2;b.count=2;b=a.lists[p.EXIT];
b.items[0]=1;b.items[1]=3;b.count=2;a.capCenter=void 0};return a}();a.Tessellator=u})},"esri/views/vectorTiles/style/StyleLayer":function(){define("require exports ../../../core/tsSupport/extendsHelper ../../../core/tsSupport/decorateHelper ./Filter ./StyleDefinition ./StyleProperty".split(" "),function(u,a,e,m,d,k,q){Object.defineProperty(a,"__esModule",{value:!0});u=function(){function a(a,f,c){this.type=a;this.id=f.id;this.source=f.source;this.sourceLayer=f["source-layer"];this.minzoom=f.minzoom;
this.maxzoom=f.maxzoom;this.filter=f.filter;this.layout=f.layout;this.paint=f.paint;this.z=c;switch(a){case 0:this._layoutDefinition=k.StyleDefinition.backgroundLayoutDefinition;this._paintDefinition=k.StyleDefinition.backgroundPaintDefinition;break;case 1:this._layoutDefinition=k.StyleDefinition.fillLayoutDefinition;this._paintDefinition=k.StyleDefinition.fillPaintDefinition;break;case 2:this._layoutDefinition=k.StyleDefinition.lineLayoutDefinition;this._paintDefinition=k.StyleDefinition.linePaintDefinition;
break;case 3:this._layoutDefinition=k.StyleDefinition.symbolLayoutDefinition;this._paintDefinition=k.StyleDefinition.symbolPaintDefinition;break;case 4:this._layoutDefinition=k.StyleDefinition.circleLayoutDefinition,this._paintDefinition=k.StyleDefinition.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout);this._paintProperties=this._parsePaint(this.paint)}a.prototype.getFeatureFilter=function(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=d.createFilter(this.filter)};
a.prototype.getLayoutProperty=function(a){var b=this._layoutProperties;if(b)return b[a]};a.prototype.getPaintProperty=function(a){var b=this._paintProperties;if(b)return b[a]};a.prototype.getLayoutValue=function(a,f,c){var b,g=this._layoutProperties;g&&(g=g[a])&&(b=g.getValue(f,c));a=this._layoutDefinition[a];void 0===b&&(b=a["default"]);"enum"===a.type&&(b=a.values.indexOf(b));return b};a.prototype.getPaintValue=function(a,f,c){var b,g=this._paintProperties;g&&(g=g[a])&&(b=g.getValue(f,c));a=this._paintDefinition[a];
void 0===b&&(b=a["default"]);"enum"===a.type&&(b=a.values.indexOf(b));return b};a.prototype._parseLayout=function(a){var b={},c;for(c in a){var g=this._layoutDefinition[c];g&&(b[c]=new q(c,g,a[c]))}return b};a.prototype._parsePaint=function(a){var b={},c;for(c in a){var g=this._paintDefinition[c];g&&(b[c]=new q(c,g,a[c]))}return b};return a}();a.StyleLayer=u;m=function(a){function b(b,c,g){return a.call(this,b,c,g)||this}e(b,a);return b}(u);a.BackgroundStyleLayer=m;m=function(a){function b(b,c,g){b=
a.call(this,b,c,g)||this;c=b.getPaintProperty("fill-color");b.hasDataDrivenColor=c?c.isDataDriven:!1;c=b.getPaintProperty("fill-opacity");b.hasDataDrivenOpacity=c?c.isDataDriven:!1;b.hasDataDrivenFill=b.hasDataDrivenColor||b.hasDataDrivenOpacity;c=b.getPaintProperty("fill-outline-color");b.outlineUsesFillColor=!c;b.hasDataDrivenOutlineColor=c?c.isDataDriven:!1;b.hasDataDrivenOutline=(c?b.hasDataDrivenOutlineColor:b.hasDataDrivenColor)||b.hasDataDrivenOpacity;return b}e(b,a);return b}(u);a.FillStyleLayer=
m;m=function(a){function b(b,c,g){b=a.call(this,b,c,g)||this;c=b.getPaintProperty("line-color");b.hasDataDrivenColor=c?c.isDataDriven:!1;c=b.getPaintProperty("line-opacity");b.hasDataDrivenOpacity=c?c.isDataDriven:!1;c=b.getPaintProperty("line-width");b.hasDataDrivenWidth=c?c.isDataDriven:!1;b.hasDataDrivenLine=b.hasDataDrivenColor||b.hasDataDrivenOpacity||b.hasDataDrivenWidth;return b}e(b,a);return b}(u);a.LineStyleLayer=m;m=function(a){function b(b,c,g){b=a.call(this,b,c,g)||this;c=b.getPaintProperty("icon-color");
b.hasDataDrivenIconColor=c?c.isDataDriven:!1;c=b.getPaintProperty("icon-opacity");b.hasDataDrivenIconOpacity=c?c.isDataDriven:!1;c=b.getLayoutProperty("icon-size");b.hasDataDrivenIconSize=c?c.isDataDriven:!1;b.hasDataDrivenIcon=b.hasDataDrivenIconColor||b.hasDataDrivenIconOpacity||b.hasDataDrivenIconSize;c=b.getPaintProperty("text-color");b.hasDataDrivenTextColor=c?c.isDataDriven:!1;c=b.getPaintProperty("text-opacity");b.hasDataDrivenTextOpacity=c?c.isDataDriven:!1;c=b.getLayoutProperty("text-size");
b.hasDataDrivenTextSize=c?c.isDataDriven:!1;b.hasDataDrivenText=b.hasDataDrivenTextColor||b.hasDataDrivenTextOpacity||b.hasDataDrivenTextSize;return b}e(b,a);return b}(u);a.SymbolStyleLayer=m;u=function(a){function b(b,c,g){b=a.call(this,b,c,g)||this;c=b.getPaintProperty("circle-radius");b.hasDataDrivenRadius=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-color");b.hasDataDrivenColor=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-opacity");b.hasDataDrivenOpacity=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-width");
b.hasDataDrivenStrokeWidth=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-color");b.hasDataDrivenStrokeColor=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-stroke-opacity");b.hasDataDrivenStrokeOpacity=c?c.isDataDriven:!1;c=b.getPaintProperty("circle-blur");b.hasDataDrivenBlur=c?c.isDataDriven:!1;return b}e(b,a);return b}(u);a.CircleStyleLayer=u;u=function(){return function(a,b,f){this.cap=a.getLayoutValue("line-cap",b,f);this.join=a.getLayoutValue("line-join",b,f);this.miterLimit=a.getLayoutValue("line-miter-limit",
b,f);this.roundLimit=a.getLayoutValue("line-round-limit",b,f)}}();a.LineLayout=u;u=function(){return function(a,b,f,c){this.allowOverlap=a.getLayoutValue("icon-allow-overlap",b,c);this.ignorePlacement=a.getLayoutValue("icon-ignore-placement",b,c);this.optional=a.getLayoutValue("icon-optional",b,c);this.rotationAlignment=a.getLayoutValue("icon-rotation-alignment",b,c);this.size=a.getLayoutValue("icon-size",b,c);this.rotate=a.getLayoutValue("icon-rotate",b,c);this.padding=a.getLayoutValue("icon-padding",
b,c);this.keepUpright=a.getLayoutValue("icon-keep-upright",b,c);this.offset=a.getLayoutValue("icon-offset",b,c);2===this.rotationAlignment&&(this.rotationAlignment=f?0:1)}}();a.IconLayout=u;u=function(){return function(a,b,f,c){this.allowOverlap=a.getLayoutValue("text-allow-overlap",b,c);this.ignorePlacement=a.getLayoutValue("text-ignore-placement",b,c);this.optional=a.getLayoutValue("text-optional",b,c);this.rotationAlignment=a.getLayoutValue("text-rotation-alignment",b,c);this.fontArray=a.getLayoutValue("text-font",
b,c);this.maxWidth=a.getLayoutValue("text-max-width",b,c);this.lineHeight=a.getLayoutValue("text-line-height",b,c);this.letterSpacing=a.getLayoutValue("text-letter-spacing",b,c);this.justify=a.getLayoutValue("text-justify",b,c);this.anchor=a.getLayoutValue("text-anchor",b,c);this.maxAngle=a.getLayoutValue("text-max-angle",b,c);this.size=a.getLayoutValue("text-size",b,c);this.rotate=a.getLayoutValue("text-rotate",b,c);this.padding=a.getLayoutValue("text-padding",b,c);this.keepUpright=a.getLayoutValue("text-keep-upright",
b,c);this.transform=a.getLayoutValue("text-transform",b,c);this.offset=a.getLayoutValue("text-offset",b,c);2===this.rotationAlignment&&(this.rotationAlignment=f?0:1)}}();a.TextLayout=u})},"esri/views/vectorTiles/style/Filter":function(){define(["require","exports"],function(u,a){return function(){function a(e,d,k){this._op=e;"$type"===d?(this._val=k instanceof Array?k.map(function(d){return a._types.indexOf(d)}):a._types.indexOf(k),this._op+=11):(this._key=d,this._val=k)}a.prototype.filter=function(a){switch(this._op){case 0:return this._val;
case 1:return a.values[this._key]===this._val;case 2:return a.values[this._key]!==this._val;case 3:return a.values[this._key]<this._val;case 4:return a.values[this._key]>this._val;case 5:return a.values[this._key]<=this._val;case 6:return a.values[this._key]>=this._val;case 7:return-1!==this._val.indexOf(a.values[this._key]);case 8:return-1===this._val.indexOf(a.values[this._key]);case 9:for(var d=0,k=this._val;d<k.length;d++){var e=k[d];if(e.filter(a))return!0}return!1;case 10:d=0;for(k=this._val;d<
k.length;d++)if(e=k[d],!e.filter(a))return!1;return!0;case 11:d=0;for(k=this._val;d<k.length;d++)if(e=k[d],e.filter(a))return!1;return!0;case 12:return a.type===this._val;case 13:return a.type!==this._val;case 14:return a.type<this._val;case 15:return a.type>this._val;case 16:return a.type>=this._val;case 17:return a.type<=this._val;case 18:return-1!==this._val.indexOf(a.type);case 19:return-1===this._val.indexOf(a.type)}};a.createFilter=function(e){if(!e)return new a(0,void 0,!0);var d=e[0];if(1>=
e.length)return new a(0,void 0,"any"!==d);switch(d){case "\x3d\x3d":return new a(1,e[1],e[2]);case "!\x3d":return new a(2,e[1],e[2]);case "\x3e":return new a(4,e[1],e[2]);case "\x3c":return new a(3,e[1],e[2]);case "\x3e\x3d":return new a(6,e[1],e[2]);case "\x3c\x3d":return new a(5,e[1],e[2]);case "in":return new a(7,e[1],e.slice(2));case "!in":return new a(8,e[1],e.slice(2));case "any":return new a(9,void 0,e.slice(1).map(a.createFilter.bind(this)));case "all":return new a(10,void 0,e.slice(1).map(a.createFilter.bind(this)));
case "none":return new a(11,void 0,e.slice(1).map(a.createFilter.bind(this)));default:throw Error("invalid operator: "+d);}};a._types=["Unknown","Point","LineString","Polygon"];return a}()})},"esri/views/vectorTiles/style/StyleDefinition":function(){define(["require","exports"],function(u,a){Object.defineProperty(a,"__esModule",{value:!0});u=function(){function a(){}a.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.fillLayoutDefinition={visibility:{type:"enum",
values:["visible","none"],default:"visible"}};a.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"line-cap":{type:"enum",values:["butt","round","square"],default:"butt"},"line-join":{type:"enum",values:["bevel","round","miter"],default:"miter"},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}};a.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"},"symbol-placement":{type:"enum",
values:["point","line"],default:"point"},"symbol-spacing":{type:"number",minimum:1,default:250},"symbol-avoid-edges":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-allow-overlap":{type:"boolean",default:!1},"icon-ignore-placement":{type:"boolean",default:!1},"icon-optional":{type:"boolean",default:!1},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"icon-size":{type:"number",minimum:0,default:1},"icon-rotate":{type:"number",default:0},"icon-padding":{type:"number",
minimum:0,default:2},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-field":{type:"string"},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:"auto"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-size":{type:"number",minimum:0,default:16},"text-max-width":{type:"number",minimum:0,default:10},"text-line-height":{type:"number",default:1.2},
"text-letter-spacing":{type:"number",default:0},"text-justify":{type:"enum",values:["left","center","right"],default:"center"},"text-anchor":{type:"enum",values:"center left right top bottom top-left top-right bottom-left bottom-right".split(" "),default:"center"},"text-max-angle":{type:"number",minimum:0,default:45},"text-rotate":{type:"number",default:0},"text-padding":{type:"number",minimum:0,default:2},"text-keep-upright":{type:"boolean",default:!0},"text-transform":{type:"enum",values:["none",
"uppercase","lowercase"],default:"none"},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-allow-overlap":{type:"boolean",default:!1},"text-ignore-placement":{type:"boolean",default:!1},"text-optional":{type:"boolean",default:!1}};a.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:"visible"}};a.backgroundPaintDefinition={"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-color":{type:"color",default:[0,0,0,1]},"background-pattern":{type:"string"}};
a.fillPaintDefinition={"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"fill-pattern":{type:"string"}};a.linePaintDefinition={"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-color":{type:"color",
default:[0,0,0,1]},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"line-width":{type:"number",minimum:0,default:1},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-blur":{type:"number",minimum:0,default:0},"line-dasharray":{type:"array",value:"number",default:[]},"line-pattern":{type:"string"}};a.symbolPaintDefinition={"icon-opacity":{type:"number",
minimum:0,maximum:1,default:1},"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-color":{type:"color",
default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-halo-blur":{type:"number",minimum:0,default:0},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"}};a.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",
minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}};a.circlePaintDefinition={"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-color":{type:"color",default:[0,0,0,1]},"circle-blur":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",
length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:"map"},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1}};return a}();a.StyleDefinition=u})},"esri/views/vectorTiles/style/StyleProperty":function(){define(["require","exports","../../../Color","../GeometryUtils"],function(u,a,e,m){return function(){function a(d,e,g){this.isDataDriven=
!1;switch(e.type){case "number":d=!0;break;case "color":d=!0;g=a._parseColor(g);break;case "array":d="number"===e.value;break;default:d=!1}null==g&&(g=e.default);d&&"interval"===g.type&&(d=!1);var b=g&&g.stops&&0<g.stops.length;if(b)for(var f=0,c=g.stops;f<c.length;f++){var n=c[f];n[1]=this._validate(n[1],e)}if(this.isDataDriven=g?!!g.property:!1)if(void 0!==g.default&&(g.default=this._validate(g.default,e)),b)switch(g.type){case "identity":this.getValue=this._buildIdentity(g,e);break;case "categorical":this.getValue=
this._buildCategorical(g,e);break;default:this.getValue=d?this._buildInterpolate(g,e):this._buildInterval(g,e)}else this.getValue=this._buildIdentity(g,e);else b?this.getValue=d?this._buildZoomInterpolate(g):this._buildZoomInterval(g):(g=this._validate(g,e),this.getValue=this._buildSimple(g))}a.prototype._validate=function(a,d){if("number"===d.type){if(a<d.minimum)return d.minimum;if(a>d.maximum)return d.maximum}return a};a.prototype._buildSimple=function(a){return function(){return a}};a.prototype._buildIdentity=
function(d,e){var g=this;return function(b,f){var c;f&&(c=f.values[d.property],"color"===e.type&&(c=a._parseColor(c)));void 0===c&&(c=d.default);return void 0!==c?g._validate(c,e):e.default}};a.prototype._buildCategorical=function(a,d){var g=this;return function(b,f){var c;f&&(c=f.values[a.property]);c=g._categorical(c,a.stops);return void 0!==c?c:void 0!==a.default?a.default:d.default}};a.prototype._buildInterval=function(a,d){var g=this;return function(b,f){var c;f&&(c=f.values[a.property]);return"number"===
typeof c?g._interval(c,a.stops):void 0!==a.default?a.default:d.default}};a.prototype._buildInterpolate=function(a,d){var g=this;return function(b,f){var c;f&&(c=f.values[a.property]);return"number"===typeof c?g._interpolate(c,a.stops,a.base||1):void 0!==a.default?a.default:d.default}};a.prototype._buildZoomInterpolate=function(a){var d=this;return function(g){return d._interpolate(g,a.stops,a.base||1)}};a.prototype._buildZoomInterval=function(a){var d=this;return function(g){return d._interval(g,
a.stops)}};a.prototype._categorical=function(a,d){for(var g=d.length,b=0;b<g;b++)if(d[b][0]===a)return d[b][1]};a.prototype._interval=function(a,d){for(var g=d.length,b=0,f=0;f<g;f++)if(d[f][0]<=a)b=f;else break;return d[b][1]};a.prototype._interpolate=function(a,d,g){for(var b,f,c=d.length,e=0;e<c;e++){var k=d[e];if(k[0]<=a)b=k;else{f=k;break}}if(b&&f){e=f[0]-b[0];a-=b[0];g=1===g?a/e:(Math.pow(g,a)-1)/(Math.pow(g,e)-1);if(Array.isArray(b[1])){b=b[1];f=f[1];a=[];for(e=0;e<b.length;e++)a.push(m.interpolate(b[e],
f[e],g));return a}return m.interpolate(b[1],f[1],g)}if(b)return b[1];if(f)return f[1]};a._isEmpty=function(a){for(var d in a)if(a.hasOwnProperty(d))return!1;return!0};a._parseColor=function(d){if(Array.isArray(d))return d;if("string"===typeof d){if(d=new e(d),!this._isEmpty(d))return e.toUnitRGBA(d)}else return d&&d.default&&(d.default=a._parseColor(d.default)),d&&d.stops&&(d.stops=d.stops.map(function(d){return[d[0],a._parseColor(d[1])]})),d};return a}()})},"esri/Color":function(){define(["./core/declare",
"./core/accessorSupport/ensureType","dojo/colors"],function(u,a,e){function m(d){return Math.max(0,Math.min(a.ensureInteger(d),255))}var d=u([e],{declaredClass:"esri.Color",toJSON:function(){return[m(this.r),m(this.g),m(this.b),1<this.a?this.a:m(255*this.a)]},clone:function(){return new d(this.toRgba())}});d.toJSON=function(a){return a&&[m(a.r),m(a.g),m(a.b),1<a.a?a.a:m(255*a.a)]};d.fromJSON=function(a){return a&&new d([a[0],a[1],a[2],a[3]/255])};d.toUnitRGB=function(a){return[a.r/255,a.g/255,a.b/
255]};d.toUnitRGBA=function(a){return[a.r/255,a.g/255,a.b/255,null!=a.a?a.a:1]};var k="named blendColors fromRgb fromHex fromArray fromString".split(" ");for(u=0;u<k.length;u++)d[k[u]]=e[k[u]];d.named.rebeccapurple=[102,51,153];return d})},"esri/core/declare":function(){define(["require","exports","dojo/_base/declare"],function(u,a,e){function m(a,b){a&&!Array.isArray(a)&&"function"!==typeof a&&(b=a,a=null);a=a||[];b=b||{};return d([this].concat(a),b)}function d(a,b){a&&!Array.isArray(a)&&"function"!==
typeof a&&(b=a,a=null);"function"===typeof a?a=[a]:a||(a=[]);b=b||{};var f,c;f=0;for(c=k.length;f<c;f++)k[f](a,b);a=e(a,b);a.createSubclass=m;f=0;for(c=q.length;f<c;f++)q[f](a);return a}var k=[],q=[];(function(a){a.hasMixin=function(a,f){a=Array.isArray(a)?a.reduce(function(a,b){return b._meta?a.concat(b._meta.bases):a},[]):a._meta?a._meta.bases:a;if(!a)return!1;if("string"===typeof f)for(var b=a.length-1;0<=b;b--)if(a[b].prototype.declaredClass===f)return!0;return-1!==a.indexOf(f)};a.safeMixin=function(a,
f){return e.safeMixin(a,f)};a.before=function(a){k.push(a)};a.after=function(a){q.push(a)}})(d||(d={}));return d})},"esri/core/accessorSupport/ensureType":function(){define(["require","exports","../Logger"],function(u,a,e){function m(a,b){return b.isInstanceOf?b.isInstanceOf(a):b instanceof a}function d(a){return null==a?a:new Date(a)}function k(a){return null==a?a:!!a}function q(a){return null==a?a:a.toString()}function g(a){return null==a?a:parseFloat(a)}function b(a){return null==a?a:Math.round(parseFloat(a))}
function f(a){return a&&a.constructor&&void 0!==a.constructor._meta}function c(a,b){return null!=b&&a&&!m(a,b)}function n(a){return a&&("isCollection"in a||a._meta&&a._meta.bases&&a._meta.bases.some(function(a){return"isCollection"in a}))}function C(a){return a&&a.Type?"function"===typeof a.Type?a.Type:a.Type.base:null}function z(a,b){if(!b||!b.constructor||!n(b.constructor))return D(a,b)?b:new a(b);var c=C(a.prototype.itemType),f=C(b.constructor.prototype.itemType);if(!c)return b;if(!f)return new a(b);
if(c===f)return b;if((f=f._meta&&f._meta.bases)&&-1!==f.indexOf(c))return new a(b);D(a,b);return b}function D(a,b){return f(b)?(H.error("Accessor#set","Assigning an instance of '"+(b.declaredClass||"unknown")+"' which is not a subclass of '"+(a&&a.prototype&&a.prototype.declaredClass||"unknown")+"'"),!0):!1}function p(a,b){return null==b?b:n(a)?z(a,b):c(a,b)?D(a,b)?b:new a(b):b}function w(a){switch(a){case Number:return g;case S:return b;case Boolean:return k;case String:return q;case Date:return d;
default:return p.bind(null,a)}}function I(a,b){var c=w(a);return 1===arguments.length?c:c(b)}function F(a,b){return 1===arguments.length?F.bind(null,a):b?Array.isArray(b)?b.map(a):[a(b)]:b}function B(a,b,c){return 0!==b&&Array.isArray(c)?c.map(function(c){return B(a,b-1,c)}):a(c)}function A(a,b,c){if(2===arguments.length)return A.bind(null,a,b);if(!c)return c;c=B(a,b,c);for(var f=b,g=c;0<f&&Array.isArray(g);)f--,g=g[0];if(void 0!==g)for(g=0;g<f;g++)c=[c];return c}function r(a,b){if(2===arguments.length)return r(a).call(null,
b);for(var c=new Set,f=0;f<a.length;f++)c.add(a[f]);var g=null;return function(b,f){if(null==b)return b;c.has(b)||(g||(g=a.map(function(a){return"string"===typeof a?"'"+a+"'":""+a}).join(", ")),H.error("Accessor#set","'"+b+"' is not a valid value for this property, only the following values are valid: "+g),f&&(f.valid=!1));return b}}function t(a,b){if(2===arguments.length)return t(a).call(null,b);var g={},d=[],e=[],n;for(n in a.typeMap){var k=a.typeMap[n];g[n]=I(k);d.push(k&&k.prototype&&k.prototype.declaredClass||
"unknown");e.push(n)}var p="string"===typeof a.key?function(b){return b[a.key]}:a.key;return function(b){if(a.base&&!c(a.base,b))return b;var n=p(b)||a.defaultKeyValue,k=g[n];if(!k)return H.error("Accessor#set","Invalid property value, value needs to be one of "+("'"+d.join("', '")+"'")+", or a plain object that can autocast (having .type \x3d "+("'"+e.join("', '")+"'")+")"),null;if(!c(a.typeMap[n],b))return b;if("string"!==typeof a.key||f(b))return k(b);var n={},m;for(m in b)m!==a.key&&(n[m]=b[m]);
return k(n)}}Object.defineProperty(a,"__esModule",{value:!0});var H=e.getLogger("esri.core.Accessor");a.isInstanceOf=m;a.ensureDate=d;a.ensureBoolean=k;a.ensureString=q;a.ensureNumber=g;a.ensureInteger=b;a.isClassedType=f;a.requiresType=c;a.ensureClass=p;a.ensureType=I;a.ensureArrayTyped=F;a.ensureArray=function(a,b){return 1===arguments.length?F(I.bind(null,a)):F(I.bind(null,a),b)};a.ensureNArrayTyped=A;a.ensureNArray=function(a,b,c){return 2===arguments.length?A(I.bind(null,a),b):A(I.bind(null,
a),b,c)};a.isOneOf=function(a){if(!Array.isArray(a))return!1;a=typeof a[0];return"string"===a||"number"===a};a.ensureOneOf=r;a.ensureOneOfType=t;var S=function(){return function(){}}();a.Integer=S;a.default=I})},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(u,a,e,m){var d={};a.setObject("dojo.colors",d);var k=function(a,b,f){0>f&&++f;1<f&&--f;var c=6*f;return 1>c?a+(b-a)*c:1>2*f?b:2>3*f?a+(b-a)*(2/3-f)*6:a};u.colorFromRgb=e.fromRgb=function(a,
b){var f=a.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(f){a=f[2].split(/\s*,\s*/);var c=a.length,f=f[1];if("rgb"==f&&3==c||"rgba"==f&&4==c)return f=a[0],"%"==f.charAt(f.length-1)?(f=m.map(a,function(a){return 2.56*parseFloat(a)}),4==c&&(f[3]=a[3]),e.fromArray(f,b)):e.fromArray(a,b);if("hsl"==f&&3==c||"hsla"==f&&4==c){var f=(parseFloat(a[0])%360+360)%360/360,g=parseFloat(a[1])/100,d=parseFloat(a[2])/100,g=.5>=d?d*(g+1):d+g-d*g,d=2*d-g,f=[256*k(d,g,f+1/3),256*k(d,g,f),256*k(d,g,f-1/
3),1];4==c&&(f[3]=a[3]);return e.fromArray(f,b)}}return null};var q=function(a,b,f){a=Number(a);return isNaN(a)?f:a<b?b:a>f?f:a};e.prototype.sanitize=function(){this.r=Math.round(q(this.r,0,255));this.g=Math.round(q(this.g,0,255));this.b=Math.round(q(this.b,0,255));this.a=q(this.a,0,1);return this};d.makeGrey=e.makeGrey=function(a,b){return e.fromArray([a,a,a,b])};a.mixin(e.named,{aliceblue:[240,248,255],antiquewhite:[250,235,215],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,
228,196],blanchedalmond:[255,235,205],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,
140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],
greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,
178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,
255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],oldlace:[253,245,230],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,
128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],whitesmoke:[245,245,245],yellowgreen:[154,205,50]});return e})},"esri/views/vectorTiles/Placement":function(){define(["require",
"exports","../2d/engine/webgl/Geometry","./Conflict","./GeometryUtils"],function(u,a,e,m,d){Object.defineProperty(a,"__esModule",{value:!0});u=function(){return function(a,c,g,d,e){void 0===g&&(g=0);void 0===d&&(d=-1);void 0===e&&(e=b);this.x=a;this.y=c;this.angle=g;this.segment=d;this.minzoom=e}}();a.Anchor=u;var k=function(){return function(a,c,g,e,k,m,p){void 0===k&&(k=!1);void 0===m&&(m=b);void 0===p&&(p=d.C_INFINITY);this.anchor=a;this.labelAngle=c;this.glyphAngle=g;this.page=e;this.upsideDown=
k;this.minzoom=m;this.maxzoom=p}}(),q=function(){return function(a,b,g,d,e,k,p,m,q,F){this.tl=a;this.tr=b;this.bl=g;this.br=d;this.mosaicRect=e;this.labelAngle=k;this.anchor=p;this.minzoom=m;this.maxzoom=q;this.page=F}}();a.PlacedSymbol=q;var g=function(){return function(a,b){this.footprint=a;this.shapes=b}}();a.Placement=g;var b=.5;u=function(){function a(){this.mapAngle=0;this._conflictEngine=new m.ConflictEngine}a.prototype.reset=function(){this._conflictEngine.reset()};a.prototype.setAngle=function(a){this.mapAngle=
a;this._conflictEngine.setAngle(a)};a.prototype.getIconPlacement=function(a,f,k,z,D,p,w){var c=k.width/k.pixelRatio,n=k.height/k.pixelRatio;D=p.offset[0]-c/2;var C=p.offset[1]-n/2,c=D+c,n=C+n,A=k.rect,r=k.sdf?17:2,t=D-r,H=C-r,u=t+A.width/k.pixelRatio,G=H+A.height/k.pixelRatio;k=new e.Point(t,H);r=new e.Point(u,G);G=new e.Point(t,G);H=new e.Point(u,H);u=p.rotate*d.C_DEG_TO_RAD;t=1===p.rotationAlignment;0<=a.segment&&!t&&(u+=a.angle);if(0!==u){var E=Math.cos(u),P=Math.sin(u);k.rotate(E,P);r.rotate(E,
P);G.rotate(E,P);H.rotate(E,P)}E=8*p.padding;P=new e.Point(a.x,a.y);a=new m.Footprint(this.mapAngle,E,t);a.addBox(P,new m.Box(D,C,c,n),z,u,f,b,d.C_INFINITY);f=new q(k,H,G,r,A,0,P,b,d.C_INFINITY,0);f=new g(a,[f]);z=b;p.allowOverlap||(z=this._conflictEngine.getMinZoom(f.footprint,z,w,t));a.minzoom=z;return f};a.prototype.getTextPlacement=function(a,f,C,z,D,p,w,I){for(var c=new e.Point(a.x,a.y),n=w.rotate*d.C_DEG_TO_RAD,A=0===w.rotationAlignment,r=w.keepUpright,t=b,H=!A,u=H?0:a.angle,G=0<=a.segment&&
A,E=new m.Footprint(this.mapAngle,8*w.padding,H),P=[],R=!G,L=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,J=L,x=M,y=G?r:A&&r,K,T=0;T<z.length;T++){var U=z[T],Q=U.glyphMosaicItem;if(Q&&!Q.rect.isEmpty){var V=Q.rect,Y=Q.metrics,W=Q.page;R&&(K&&K!==U.y&&(E.addBox(c,new m.Box(L,J,M,x),D,n,f,b,d.C_INFINITY),L=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY,J=L,x=M),K=U.y);var ca=[];if(G){if(Q=(C.x+U.x+Y.left-4+.5*Q.metrics.width)*D,t=this._placeGlyph(a,t,Q,p,a.segment,1,W,ca),r&&(t=this._placeGlyph(a,
t,Q,p,a.segment,-1,W,ca)),2<=t)break}else ca.push(new k(c,u,u,W)),A&&r&&ca.push(new k(c,u+d.C_PI,u+d.C_PI,W,!0));for(var W=U.x+C.x+Y.left,U=U.y+C.y-Y.top,Q=W+Y.width,Y=U+Y.height,Z=new e.Point(W-4,U-4),ea=new e.Point(Z.x+V.width,Z.y+V.height),ba=new e.Point(Z.x,ea.y),ha=new e.Point(ea.x,Z.y),aa=0;aa<ca.length;aa++){var da=ca[aa],ia=Z.clone(),ma=ba.clone(),ka=ha.clone(),oa=ea.clone(),la=U,na=Y,fa=da.glyphAngle+n;if(0!==fa){var N=Math.cos(fa),X=Math.sin(fa);ia.rotate(N,X);oa.rotate(N,X);ma.rotate(N,
X);ka.rotate(N,X)}P.push(new q(ia,ka,ma,oa,V,da.labelAngle,da.anchor,da.minzoom,da.maxzoom,da.page));if(!y||this._legible(da.labelAngle))R?(W<L&&(L=W),la<J&&(J=la),Q>M&&(M=Q),na>x&&(x=na)):2>da.minzoom&&E.addBox(da.anchor,new m.Box(W,la,Q,na),D,fa,f,da.minzoom,da.maxzoom)}}}if(2<=t)return null;R&&E.addBox(c,new m.Box(L,J,M,x),D,n,f,b,d.C_INFINITY);a=new g(E,P);w.allowOverlap||(t=this._conflictEngine.getMinZoom(a.footprint,t,I,H));E.minzoom=t;return a};a.prototype.add=function(a){this._conflictEngine.add(a.footprint)};
a.prototype._legible=function(a){a=d.radToByte(a);return 65>a||193<=a};a.prototype._placeGlyph=function(a,b,f,g,m,p,w,q){var c=0>p?d.positiveMod(a.angle+d.C_PI,d.C_2PI):a.angle,n=this._legible(c),D=0;0>f&&(p*=-1,f*=-1,D=d.C_PI);0<p&&++m;a=new e.Point(a.x,a.y);var r=g[m],t=d.C_INFINITY;if(g.length<=m)return t;for(;;){var C=r.x-a.x,I=r.y-a.y,z=Math.sqrt(C*C+I*I),E=Math.max(f/z,b),C=d.positiveMod(Math.atan2(I/z,C/z)+D,d.C_2PI);q.push(new k(a,c,C,w,n,E,t));if(E<=b)return E;a=r.clone();do{m+=p;if(g.length<=
m||0>m)return E;r=g[m]}while(a.isEqual(r));t=r.x-a.x;C=r.y-a.y;I=Math.sqrt(t*t+C*C);t*=z/I;C*=z/I;a.x-=t;a.y-=C;t=E}};return a}();a.PlacementEngine=u})},"esri/views/vectorTiles/Conflict":function(){define(["require","exports","../2d/engine/webgl/Geometry","./GeometryUtils"],function(u,a,e,m){Object.defineProperty(a,"__esModule",{value:!0});u=function(){function a(a,b,f,c){this.left=a;this.top=b;this.right=f;this.bottom=c}a.prototype.clone=function(){return new a(this.left,this.top,this.right,this.bottom)};
a.prototype.move=function(a,b){this.left+=a;this.top+=b;this.right+=a;this.bottom+=b};a.prototype.rotate=function(a,b){var f=this.left,c=this.right,g=this.top,d=this.bottom,e=f*a-g*b,k=f*b+g*a,p=c*a-g*b,g=c*b+g*a,m=f*a-d*b,f=f*b+d*a,q=c*a-d*b;a=c*b+d*a;this.left=Math.min(e,p,m,q);this.top=Math.min(k,g,f,a);this.right=Math.max(e,p,m,q);this.bottom=Math.max(k,g,f,a)};a.overlaps=function(a,b){return a.right>b.left&&a.left<b.right&&a.bottom>b.top&&a.top<b.bottom};return a}();a.Box=u;var d=function(){function a(a,
b,f,c){this.anchor=a;this.corners=b;this.minzoom=f;this.maxzoom=c}a.prototype.left=function(){return this.corners[0].x};a.prototype.right=function(){return this.corners[2].x};a.prototype.top=function(){return this.corners[1].y};a.prototype.bottom=function(){return this.corners[3].y};return a}();a.Obstacle=d;u=function(){function a(a,b,f){this.obstacles=[];this.mapAngle=a;this.padding=b;this.isScreenAligned=f;this.minzoom=k}a.prototype.addBox=function(a,b,f,c,n,k,m){var g=b.left*f-this.padding,p=b.top*
f-this.padding,w=b.right*f+this.padding;b=b.bottom*f+this.padding;g=[new e.Point(g,p),new e.Point(w,p),new e.Point(w,b),new e.Point(g,b)];0!==this.mapAngle&&(p=Math.cos(this.mapAngle),w=Math.sin(this.mapAngle),a=a.clone(),a.rotate(p,w));this.isScreenAligned||(c+=this.mapAngle);if(0!==c){p=Math.cos(c);w=Math.sin(c);g[0].rotate(p,w);g[1].rotate(p,w);g[2].rotate(p,w);g[3].rotate(p,w);c=0;for(p=1;4>p;p++)g[p].x<g[c].x?c=p:g[p].x===g[c].x&&g[p].y<g[c].y&&(c=p);if(c){w=[];for(p=0;4>p;p++)w.push(g[(p+c)%
4]);g=w}}if(n)for(c=0,p=g;c<p.length;c++)p[c].move(n[0],n[1]);this.obstacles.push(new d(a,g,k,m))};return a}();a.Footprint=u;var k=.5;u=function(){function a(){this._grid=[]}a.prototype.setAngle=function(a){};a.prototype.reset=function(){this._grid=[]};a.prototype.add=function(g){var b=this._grid,f=0;for(g=g.obstacles;f<g.length;f++)for(var c=g[f],d=c.anchor,e=a._gridClamp(Math.min(c.left()+d.x,d.x)),k=a._gridClamp(Math.max(c.right()+d.x,d.x)),m=a._gridClamp(Math.min(c.top()+d.y,d.y)),d=a._gridClamp(Math.max(c.bottom()+
d.y,d.y));m<=d;m++)for(var p=e;p<=k;p++){var w=b[16*m+p];w||(w=b[16*m+p]=[]);w.push(c)}};a.prototype.getMinZoom=function(g,b,f,c){if(0===g.obstacles.length)return m.C_INFINITY;f=this._grid;c=0;for(g=g.obstacles;c<g.length;c++)for(var d=g[c],e=d.anchor,k=a._gridClamp(Math.min(d.left()+e.x,e.x)),q=a._gridClamp(Math.max(d.right()+e.x,e.x)),p=a._gridClamp(Math.min(d.top()+e.y,e.y)),e=a._gridClamp(Math.max(d.bottom()+e.y,e.y));p<=e;p++)for(var w=k;w<=q;w++){var I=f[16*p+w];if(I)for(var F=0;F<I.length;F++){var B=
I[F];if(!(d.minzoom>=B.maxzoom||B.minzoom>=d.maxzoom)&&(b=a._calcPlacementZoom(d,B,b),2<=b))return m.C_INFINITY}}return 2>b?b:m.C_INFINITY};a._gridClamp=function(a){return m.clamp(a>>9,-7,8)};a._calcPlacementZoom=function(g,b,f){var c=b.anchor.x-g.anchor.x;if(0===c&&(g.right()<b.left()||b.right()<g.left()))return f;var d=b.anchor.y-g.anchor.y;if(0===d&&(g.bottom()<b.top()||b.bottom()<g.top()))return f;var e=m.C_INFINITY;if(0!==c){var k=(0<c?g.right()-b.left():g.left()-b.right())/c;k<e&&(e=k);c=0<
c?a._calcExtZoomX(g,b,k):a._calcExtZoomX(b,g,k);c<e&&(e=c)}0!==d&&(c=(0<d?g.bottom()-b.top():g.top()-b.bottom())/d,c<e&&(e=c),d=0<d?a._calcExtZoomY(g,b,c):a._calcExtZoomY(b,g,c),d<e&&(e=d));if(e<g.minzoom||e<b.minzoom)return f;e=Math.min(e,g.maxzoom,b.maxzoom);e<f&&(e=f);return e};a._calcExtZoomX=function(a,b,f){var c,d,g;if(a.anchor.y+a.corners[2].y/f<b.anchor.y+b.corners[0].y/f){c=a.corners[2].x-a.corners[3].x;g=a.corners[2].y-a.corners[3].y;var e=b.corners[1].x-b.corners[0].x;d=b.corners[1].y-
b.corners[0].y;0<=c*d-g*e?a.anchor.y+a.corners[3].y/f<b.anchor.y+b.corners[0].y/f?(f=a.corners[3],c=b.corners[0],d=b.corners[1],g=1):(f=b.corners[0],c=a.corners[3],d=a.corners[2],g=-1):a.anchor.y+a.corners[2].y/f>b.anchor.y+b.corners[1].y/f?(f=a.corners[2],c=b.corners[0],d=b.corners[1],g=1):(f=b.corners[1],c=a.corners[3],d=a.corners[2],g=-1)}else c=a.corners[2].x-a.corners[1].x,g=a.corners[2].y-a.corners[1].y,e=b.corners[3].x-b.corners[0].x,d=b.corners[3].y-b.corners[0].y,0>c*d-g*e?a.anchor.y+a.corners[1].y/
f>b.anchor.y+b.corners[0].y/f?(f=a.corners[1],c=b.corners[0],d=b.corners[3],g=1):(f=b.corners[0],c=a.corners[1],d=a.corners[2],g=-1):a.anchor.y+a.corners[2].y/f<b.anchor.y+b.corners[3].y/f?(f=a.corners[2],c=b.corners[0],d=b.corners[3],g=1):(f=b.corners[3],c=a.corners[1],d=a.corners[2],g=-1);e=d.x-c.x;d=d.y-c.y;return g*((f.y-c.y)*e-(f.x-c.x)*d)/((a.anchor.x-b.anchor.x)*d-(a.anchor.y-b.anchor.y)*e)};a._calcExtZoomY=function(a,b,f){var c,d,g;if(a.anchor.x+a.corners[3].x/f<b.anchor.x+b.corners[1].x/
f){c=a.corners[3].x-a.corners[2].x;g=a.corners[3].y-a.corners[2].y;var e=b.corners[0].x-b.corners[1].x;d=b.corners[0].y-b.corners[1].y;0>c*d-g*e?a.anchor.x+a.corners[2].x/f<b.anchor.x+b.corners[1].x/f?(f=a.corners[2],c=b.corners[1],d=b.corners[0],g=1):(f=b.corners[1],c=a.corners[2],d=a.corners[3],g=-1):a.anchor.x+a.corners[3].x/f>b.anchor.x+b.corners[0].x/f?(f=a.corners[3],c=b.corners[1],d=b.corners[0],g=1):(f=b.corners[0],c=a.corners[2],d=a.corners[3],g=-1)}else c=a.corners[3].x-a.corners[0].x,g=
a.corners[3].y-a.corners[0].y,e=b.corners[2].x-b.corners[1].x,d=b.corners[2].y-b.corners[1].y,0<c*d-g*e?a.anchor.x+a.corners[0].x/f>b.anchor.x+b.corners[1].x/f?(f=a.corners[0],c=b.corners[1],d=b.corners[2],g=1):(f=b.corners[1],c=a.corners[0],d=a.corners[3],g=-1):a.anchor.x+a.corners[3].x/f<b.anchor.x+b.corners[2].x/f?(f=a.corners[3],c=b.corners[1],d=b.corners[2],g=1):(f=b.corners[2],c=a.corners[0],d=a.corners[3],g=-1);e=d.x-c.x;d=d.y-c.y;return g*((f.y-c.y)*e-(f.x-c.x)*d)/((a.anchor.x-b.anchor.x)*
d-(a.anchor.y-b.anchor.y)*e)};return a}();a.ConflictEngine=u})},"esri/views/vectorTiles/SymbolBucket":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper dojox/string/BidiEngine ../2d/engine/webgl/Geometry ../2d/engine/webgl/TextShaping ./Bucket ./GeometryUtils ./Placement ./style/StyleLayer".split(" "),function(u,a,e,m,d,k,q,g,b,f,c){function n(a,b){if(a.iconMosaicItem&&b.iconMosaicItem){if(a.iconMosaicItem.page!==b.iconMosaicItem.page)return a.iconMosaicItem.page<
b.iconMosaicItem.page?-1:1}else{if(a.iconMosaicItem&&!b.iconMosaicItem)return 1;if(!a.iconMosaicItem&&b.iconMosaicItem)return-1}return 0}(function(){return function(){}})();return function(a){function g(b,c,f,d,g,e,k,n){c=a.call(this,b,c)||this;c._markerMap=new Map;c._glyphMap=new Map;c._glyphBufferDataStorage=new Map;c._sdfMarkers=!1;if(b.hasDataDrivenIcon!==f.isDataDriven())throw Error("incompatible icon buffer");if(b.hasDataDrivenText!==g.isDataDriven())throw Error("incompatible text buffer");
c._iconVertexBuffer=f;c._iconIndexBuffer=d;c._textVertexBuffer=g;c._textIndexBuffer=e;c._placementEngine=k;c._workerTileHandler=n;return c}e(g,a);Object.defineProperty(g.prototype,"markerPageMap",{get:function(){return this._markerMap},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"glyphsPageMap",{get:function(){return this._glyphMap},enumerable:!0,configurable:!0});Object.defineProperty(g.prototype,"sdfMarker",{get:function(){return this._sdfMarkers},enumerable:!0,configurable:!0});
g.prototype.copy=function(a,b,c,f,d){a=new g(this.layer,this.zoom,a,b,c,f,d,this._workerTileHandler);a.layerIndex=this.layerIndex;a.layerExtent=this.layerExtent;a._iconIndexStart=b.index;a._textIndexStart=f.index;a._iconIndexCount=0;a._textIndexCount=0;a._symbolInstances=this._symbolInstances;a._workerTileHandler=this._workerTileHandler;a._fontArray=this._fontArray;a._textLayout=this._textLayout;a._iconLayout=this._iconLayout;a._isLinePlacement=this._isLinePlacement;a._avoidEdges=this._avoidEdges;
return a};g.prototype.getResources=function(a,b,c){var f=this.layer,d=this.zoom,e=f.hasDataDrivenIcon,k=f.hasDataDrivenText;a&&a.setExtent(this.layerExtent);for(var n=f.getLayoutProperty("icon-image"),p=f.getLayoutProperty("text-field"),m=f.getLayoutValue("text-font",d),w=f.getLayoutValue("text-transform",d),q=[],D=[1,1,1,1],C=1,z=1,u=[1,1,1,1],M=1,J=1,x=0,y=this._features;x<y.length;x++){var K=y[x],T=K.getGeometry(a);if(T&&0!==T.length){var U=void 0;n&&(U=f.getLayoutValue("icon-image",d,K),n.isDataDriven||
(U=this._replaceKeys(U,K.values)),U&&b.add(U));var Q=void 0,V=!1;if(p&&(Q=f.getLayoutValue("text-field",d,K),p.isDataDriven||(Q=this._replaceKeys(Q,K.values)),Q=Q.replace(/\\n/g,"\n"))){switch(w){case 2:Q=Q.toLowerCase();break;case 1:Q=Q.toUpperCase()}g._bidiEngine.hasBidiChar(Q)&&(V=void 0,V="rtl"===g._bidiEngine.checkContextual(Q)?"IDNNN":"ICNNN",Q=g._bidiEngine.bidiTransform(Q,V,"VLYSN"),V=!0);var Y=Q.length;if(0<Y)for(var W=0,ca=m;W<ca.length;W++){var Z=ca[W],ea=c[Z];ea||(ea=c[Z]=new Set);for(Z=
0;Z<Y;Z++){var ba=Q.charCodeAt(Z);ea.add(ba)}}}if(U||Q)Y=f.getLayoutValue("icon-size",d,K),W=f.getLayoutValue("text-size",d,K),f.hasDataDrivenIconColor&&(D=f.getPaintValue("icon-color",d,K)),f.hasDataDrivenIconOpacity&&(C=f.getPaintValue("icon-opacity",d,K)),f.hasDataDrivenIconSize&&(z=Y),f.hasDataDrivenTextColor&&(u=f.getPaintValue("text-color",d,K)),f.hasDataDrivenTextOpacity&&(M=f.getPaintValue("text-opacity",d,K)),f.hasDataDrivenTextSize&&(J=W),K={sprite:U,label:Q,rtl:V,type:K.type,geometry:T,
iconSize:Y,iconRotate:f.getLayoutValue("icon-rotate",d,K),ddIconValues:e?{color:D,opacity:C,size:z}:null,textSize:W,textRotate:f.getLayoutValue("text-rotate",d,K),ddTextValues:k?{color:u,opacity:M,size:J}:null},q.push(K)}}this._symbolFeatures=q};g.prototype.processFeatures=function(a,d){a&&a.setExtent(this.layerExtent);var e=this.layer,k=this.zoom;d=this._isLinePlacement=1===e.getLayoutValue("symbol-placement",k);a=this._avoidEdges=e.getLayoutValue("symbol-avoid-edges",k)&&!d;var p=8*e.getLayoutValue("symbol-spacing",
k),m=e.getLayoutProperty("icon-image"),D=e.getLayoutProperty("text-field"),r=this._workerTileHandler,t,C;m&&(this._iconLayout=new c.IconLayout(e,k,d),t=r.getSpriteItems(),C=this._getTranslate(!0));var z,u,E;if(D){z=this._textLayout=new c.TextLayout(e,k,d);this._fontArray=z.fontArray;E=.5;switch(z.anchor){case 5:case 1:case 7:E=0;break;case 6:case 2:case 8:E=1}u=.5;switch(z.anchor){case 5:case 3:case 6:u=0;break;case 7:case 4:case 8:u=1}e=.5;switch(z.justify){case 0:e=0;break;case 2:e=1}var k=24*z.letterSpacing,
m=d?0:24*z.maxWidth,D=24*z.lineHeight,P=[24*z.offset[0],24*z.offset[1]];z=this._fontArray.map(function(a){return r.getGlyphItems(a)});u=new q(z,m,D,k,P,E,u,e);E=this._getTranslate(!1)}this._iconIndexStart=this._iconIndexBuffer.index;this._textIndexStart=this._textIndexBuffer.index;this._textIndexCount=this._iconIndexCount=0;this._markerMap.clear();this._glyphMap.clear();this._symbolInstances=e=[];k=this._textLayout;m=1;k&&k.size&&(m=k.size/24);D=k?k.maxAngle*b.C_DEG_TO_RAD:0;z=k?8*k.size:0;for(var P=
0,R=this._symbolFeatures;P<R.length;P++){var L=R[P],M=void 0;L.sprite&&(M=t[L.sprite])&&M.sdf&&(this._sdfMarkers=!0);var J=void 0,x=L.label,y=0;if(x&&(J=u.getShaping(x,L.rtl))&&0<J.length){for(var y=1E30,x=-1E30,K=0,T=J;K<T.length;K++)var U=T[K],y=Math.min(y,U.x),x=Math.max(x,U.x);y=(x-y+48)*m*8}x=0;for(K=L.geometry;x<K.length;x++){var T=K[x],Q=void 0;d?(J&&0<J.length&&k&&k.size&&g._smoothVertices(T,8*k.size*(2+Math.min(2,4*Math.abs(k.offset[1])))),Q=g._findAnchors(T,p,y)):Q=3===L.type?g._findCentroid(T):
[new f.Anchor(T[0].x,T[0].y)];for(U=0;U<Q.length;U++){var V=Q[U];0>V.x||4096<V.x||0>V.y||4096<V.y||d&&0<y&&0===k.rotationAlignment&&!g._honorsTextMaxAngle(T,V,y,D,z)||e.push({shaping:J,line:T,iconMosaicItem:M,anchor:V,iconSize:L.iconSize,iconRotate:L.iconRotate,ddIconValues:L.ddIconValues,textSize:L.textSize,textRotate:L.textRotate,ddTextValues:L.ddTextValues})}}}e.sort(n);for(t=0;t<e.length;t++)this._processFeature(e[t],C,E,a);this._addPlacedGlyphs()};g.prototype.updateSymbols=function(){this._iconIndexStart=
this._iconIndexBuffer.index;this._textIndexStart=this._textIndexBuffer.index;this._textIndexCount=this._iconIndexCount=0;this._markerMap.clear();this._glyphMap.clear();var a=this._avoidEdges,b=this.layer,c;b.getLayoutProperty("icon-image")&&(c=this._getTranslate(!0));var f;b.getLayoutProperty("text-field")&&(f=this._getTranslate(!1));for(var b=0,d=this._symbolInstances;b<d.length;b++)this._processFeature(d[b],c,f,a);this._addPlacedGlyphs()};g.prototype._getTranslate=function(a){var b=this.layer.getPaintValue(a?
"icon-translate":"text-translate",this.zoom);if(0!==b[0]||0!==b[1]){var c=this._placementEngine.mapAngle;return 0!==c&&0===this.layer.getPaintValue(a?"icon-translate-anchor":"text-translate-anchor",this.zoom)?(a=Math.sin(c),c=Math.cos(c),[8*(b[0]*c-b[1]*a),8*(b[0]*a+b[1]*c)]):[8*b[0],8*b[1]]}};g.prototype._replaceKeys=function(a,b){return a.replace(/{([^{}]+)}/g,function(a,c){return c in b?b[c]:""})};g.prototype._processFeature=function(a,c,f,d){var g=a.line,e=a.iconMosaicItem,n=a.shaping,p=a.anchor,
m=this._iconLayout,w=m&&!!e,q=!0,D=1;w&&(m.size=a.iconSize,m.rotate=a.iconRotate,D=8*m.size,q=m.optional||!e);var C=this._textLayout,z=C&&n&&0<n.length,I;I=1;var u=!0;z&&(C.size=a.textSize,C.rotate=a.textRotate,I=C.size/24,I*=8,u=C.optional||!n||0===n.length);var M=new k.Point(0,-17),J;w&&(J=this._placementEngine.getIconPlacement(p,c,e,D,g,m,d),p.minzoom>J.footprint.minzoom&&(J.footprint.minzoom=p.minzoom),J.footprint.minzoom===b.C_INFINITY&&(J=null));if(J||q){var x;z&&(x=this._placementEngine.getTextPlacement(p,
f,M,n,I,g,C,d))&&(p.minzoom>x.footprint.minzoom&&(x.footprint.minzoom=p.minzoom),x.footprint.minzoom===b.C_INFINITY&&(x=null));if(x||u)J&&x||(u||q?u||x?q||J||(x=null):J=null:x=J=null),J&&x&&!u&&!q&&(c=Math.max(J.footprint.minzoom,x.footprint.minzoom),J.footprint.minzoom=c,x.footprint.minzoom=c),x&&(C.ignorePlacement||this._placementEngine.add(x),this._storePlacedGlyphs(x.shapes,x.footprint.minzoom,this.zoom,a.ddTextValues)),J&&(m.ignorePlacement||this._placementEngine.add(J),this._addPlacedIcons(J.shapes,
J.footprint.minzoom,this.zoom,e.page,a.ddIconValues))}};g.prototype._addPlacedIcons=function(a,c,f,d,g){c=Math.max(f+b.log2(c),0);for(var e=this._iconVertexBuffer,k=this._iconIndexBuffer,n=0;n<a.length;n++){var m=a[n],p=Math.max(f+b.log2(m.minzoom),c),q=Math.min(f+b.log2(m.maxzoom),25);if(!(q<=p)){var w=m.tl,D=m.tr,C=m.bl,z=m.br,I=m.mosaicRect,u=m.labelAngle,m=m.anchor,F=e.index,x=I.x,y=I.y,K=x+I.width,I=y+I.height;e.add(m.x,m.y,w.x,w.y,x,y,u,p,q,c,g);e.add(m.x,m.y,D.x,D.y,K,y,u,p,q,c,g);e.add(m.x,
m.y,C.x,C.y,x,I,u,p,q,c,g);e.add(m.x,m.y,z.x,z.y,K,I,u,p,q,c,g);k.add(F+0,F+1,F+2);k.add(F+1,F+2,F+3);this._markerMap.has(d)?this._markerMap.get(d)[1]+=6:this._markerMap.set(d,[this._iconIndexStart+this._iconIndexCount,6]);this._iconIndexCount+=2}}};g.prototype._addPlacedGlyphs=function(){var a=this,b=this._textVertexBuffer,c=this._textIndexBuffer;this._glyphBufferDataStorage.forEach(function(f,d){for(var g=0;g<f.length;g++){var e=f[g],k=b.index;b.add(e.glyphAnchor[0],e.glyphAnchor[1],e.tl[0],e.tl[1],
e.xmin,e.ymin,e.labelAngle,e.minLod,e.maxLod,e.placementLod,e.ddValues);b.add(e.glyphAnchor[0],e.glyphAnchor[1],e.tr[0],e.tr[1],e.xmax,e.ymin,e.labelAngle,e.minLod,e.maxLod,e.placementLod,e.ddValues);b.add(e.glyphAnchor[0],e.glyphAnchor[1],e.bl[0],e.bl[1],e.xmin,e.ymax,e.labelAngle,e.minLod,e.maxLod,e.placementLod,e.ddValues);b.add(e.glyphAnchor[0],e.glyphAnchor[1],e.br[0],e.br[1],e.xmax,e.ymax,e.labelAngle,e.minLod,e.maxLod,e.placementLod,e.ddValues);c.add(k+0,k+1,k+2);c.add(k+1,k+2,k+3);a._glyphMap.has(d)?
a._glyphMap.get(d)[1]+=6:a._glyphMap.set(d,[a._textIndexStart+a._textIndexCount,6]);a._textIndexCount+=2}});this._glyphBufferDataStorage.clear()};g.prototype._storePlacedGlyphs=function(a,c,f,d){c=Math.max(f+b.log2(c),0);for(var g=0;g<a.length;g++){var e=a[g],k=Math.max(f+b.log2(e.minzoom),c),n=Math.min(f+b.log2(e.maxzoom),25);if(!(n<=k)){var m=e.tl,p=e.tr,q=e.bl,w=e.br,D=e.labelAngle,C=e.anchor,z=e.mosaicRect;this._glyphBufferDataStorage.has(e.page)||this._glyphBufferDataStorage.set(e.page,[]);this._glyphBufferDataStorage.get(e.page).push({glyphAnchor:[C.x,
C.y],tl:[m.x,m.y],tr:[p.x,p.y],bl:[q.x,q.y],br:[w.x,w.y],xmin:z.x,ymin:z.y,xmax:z.x+z.width,ymax:z.y+z.height,labelAngle:D,minLod:k,maxLod:n,placementLod:c,ddValues:d})}}};g._findAnchors=function(a,c,d){c+=d;for(var g=0,e=a.length-1,n=0;n<e;n++)g+=k.Point.distance(a[n],a[n+1]);n=.5*(d||c);if(g<=n)return[];d=n/g;c=g/Math.max(Math.round(g/c),1);for(var g=0,e=-c/2,m=[],p=a.length-1,n=0;n<p;n++){for(var q=a[n],w=a[n+1],D=w.x-q.x,C=w.y-q.y,z=Math.sqrt(D*D+C*C),u=void 0;e+c<g+z;){var e=e+c,R=(e-g)/z,L=
b.interpolate(q.x,w.x,R),R=b.interpolate(q.y,w.y,R);void 0===u&&(u=Math.atan2(C,D));m.push(new f.Anchor(L,R,u,n,d))}g+=z}return m};g._deviation=function(a,b,c){return Math.atan2((b.x-a.x)*(c.y-b.y)-(b.y-a.y)*(c.x-b.x),(b.x-a.x)*(c.x-b.x)+(b.y-a.y)*(c.y-b.y))};g._honorsTextMaxAngle=function(a,b,c,f,d){var g=0;c/=2;for(var e=new k.Point(b.x,b.y),n=b.segment+1;g>-c;){--n;if(0>n)return!1;g-=k.Point.distance(a[n],e);e=a[n]}g+=k.Point.distance(a[n],a[n+1]);b=[];for(var e=0,m=a.length;g<c;){var p=a[n],q=
void 0;do{++n;if(n===m)return!1;q=a[n]}while(q.isEqual(p));var w=n,C=void 0;do{++w;if(w===m)return!1;C=a[w]}while(C.isEqual(q));p=this._deviation(p,q,C);b.push({deviation:p,distToAnchor:g});for(e+=p;g-b[0].distToAnchor>d;)e-=b.shift().deviation;if(Math.abs(e)>f)return!1;g+=k.Point.distance(q,C)}return!0};g._smoothVertices=function(a,b){if(!(0>=b)){var c=a.length;if(!(3>c)){var f=[],d=0;f.push(0);for(var g=1;g<c;g++)d+=k.Point.distance(a[g],a[g-1]),f.push(d);b=Math.min(b,.2*d);d=[];d.push(a[0].x);
d.push(a[0].y);var e=a[c-1].x,n=a[c-1].y,g=k.Point.sub(a[0],a[1]);g.normalize();a[0].x+=b*g.x;a[0].y+=b*g.y;g.assignSub(a[c-1],a[c-2]);g.normalize();a[c-1].x+=b*g.x;a[c-1].y+=b*g.y;for(g=1;g<c;g++)f[g]+=b;f[c-1]+=b;for(var m=.5*b,g=1;g<c-1;g++){for(var p=0,q=0,C=0,z=g-1;0<=z&&!(f[z+1]<f[g]-m);z--){var D=m+f[z+1]-f[g],u=f[z+1]-f[z],L=f[g]-f[z]<m?1:D/u;if(1E-6>Math.abs(L))break;var M=L*L,J=L*D-.5*M*u,x=L*u/b,y=a[z+1],K=a[z].x-y.x,T=a[z].y-y.y,p=p+x/J*(y.x*L*D+.5*M*(D*K-u*y.x)-M*L*u*K/3),q=q+x/J*(y.y*
L*D+.5*M*(D*T-u*y.y)-M*L*u*T/3),C=C+x}for(z=g+1;z<c&&!(f[z-1]>f[g]+m);z++){D=m-f[z-1]+f[g];u=f[z]-f[z-1];L=f[z]-f[g]<m?1:D/u;if(1E-6>Math.abs(L))break;M=L*L;J=L*D-.5*M*u;x=L*u/b;y=a[z-1];K=a[z].x-y.x;T=a[z].y-y.y;p+=x/J*(y.x*L*D+.5*M*(D*K-u*y.x)-M*L*u*K/3);q+=x/J*(y.y*L*D+.5*M*(D*T-u*y.y)-M*L*u*T/3);C+=x}d.push(p/C);d.push(q/C)}d.push(e);d.push(n);for(z=g=0;g<c;g++)a[g].x=d[z++],a[g].y=d[z++]}}};g._findCentroid=function(a){var b=a.length-1,c=0,d=0,g=0,e=a[0].x,k=a[0].y;4096<e&&(e=4096);0>e&&(e=0);
4096<k&&(k=4096);0>k&&(k=0);for(var n=1;n<b;n++){var m=a[n].x,q=a[n].y,C=a[n+1].x,z=a[n+1].y;4096<m&&(m=4096);0>m&&(m=0);4096<q&&(q=4096);0>q&&(q=0);4096<C&&(C=4096);0>C&&(C=0);4096<z&&(z=4096);0>z&&(z=0);var D=(m-e)*(z-k)-(C-e)*(q-k),c=c+D*(e+m+C),d=d+D*(k+q+z),g=g+D}c/=3*g;d/=3*g;return isNaN(c)||isNaN(d)?[]:[new f.Anchor(c,d)]};g._bidiEngine=new d;return g}(g)})},"dojox/string/BidiEngine":function(){define(["dojo/_base/lang","dojo/_base/declare","dojo/Stateful"],function(u,a,e){function m(a,b,
c,f,e){var h=a;void 0===b&&(b=e.defInFormat);void 0===c&&(c=e.defOutFormat);void 0===f&&(f=e.defSwap);if(b!==c){var l,n=b.substring(0,1);l=b.substring(1,4);var p=c.substring(0,1),q=c.substring(1,4);"C"===l.charAt(0)&&(l=d(h),l="ltr"===l||"rtl"===l?l.toUpperCase():"L"===b.charAt(2)?"LTR":"RTL",b=n+l);"C"===q.charAt(0)&&(l=d(h),"rtl"===l?q="RTL":"ltr"===l?(h=h.split(""),h.reverse(),l=d(h.join("")),q=l.toUpperCase()):q="L"===c.charAt(2)?"LTR":"RTL",c=p+q)}if(b===c)return a;p=b.substring(0,1);h=b.substring(1,
4);n=c.substring(0,1);q=c.substring(1,4);e.inFormat=b;e.outFormat=c;e.swap=f;if("L"===p&&"VLTR"===c){if("LTR"===h)return e.dir=H,k(a,e);if("RTL"===h)return e.dir=S,k(a,e)}if("V"===p&&"V"===n)return e.dir="RTL"===h?S:H,g(a,e);if("L"===p&&"VRTL"===c)return e.dir="LTR"===h?H:S,a=k(a,e),g(a);if("VLTR"===b&&"LLTR"===c)return e.dir=H,k(a,e);if("V"===p&&"L"===n&&h!==q)return a=g(a),"RTL"===h?m(a,"LLTR","VLTR",f,e):m(a,"LRTL","VRTL",f,e);if("VRTL"===b&&"LRTL"===c)return m(a,"LRTL","VRTL",f,e);if("L"===p&&
"L"===n)return b=e.swap,e.swap=b.substr(0,1)+"N","RTL"===h?(e.dir=S,a=k(a,e),e.swap="N"+b.substr(1,2),e.dir=H,a=k(a,e)):(e.dir=H,a=k(a,e),e.swap="N"+b.substr(1,2),a=m(a,"VLTR","LRTL",e.swap,e)),a}function d(a){return(a=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(a))?"z">=a[0]?"ltr":"rtl":""}function k(a,b){a=a.split("");var f=[];q(a,f,b);if(0!==b.hiLevel&&b.swap.substr(0,1)!==b.swap.substr(1,2))for(var d=0;d<a.length;d++)if(1===f[d]){var g=d,e;b:{e=a[d];for(var h=
void 0,k=0,l=P.length-1;k<=l;)if(h=Math.floor((k+l)/2),e<P[h][0])l=h-1;else if(e>P[h][0])k=h+1;else{e=P[h][1];break b}}a[g]=e}c(2,a,f,b);c(1,a,f,b);B=f;return a.join("")}function q(a,b,c){var f=a.length,d=c.dir?ca:W,g=null,e=null,h=null,g=0,e=e=null,k=-1,l=e=null,m=[],p=[];c.hiLevel=c.dir;c.lastArabic=!1;c.hasUbatAl=!1;c.hasUbatB=!1;c.hasUbatS=!1;for(e=0;e<f;e++){var l=e,h=a[e].charCodeAt(0),q=qa[h>>8];m[l]=q<fa?q:ra[q-fa][h&255]}for(l=0;l<f;l++){p[l]=e=n(a,m,p,l,c);g=d[g][e];e=g&240;g&=15;b[l]=h=
d[g][r];if(0<e){if(16===e)for(e=k;e<l;e++)b[e]=1;k=-1}if(e=d[g][t])-1===k&&(k=l);else if(-1<k){for(e=k;e<l;e++)b[e]=h;k=-1}m[l]===da&&(b[l]=0);c.hiLevel|=h}if(c.hasUbatS)for(a=0;a<f;a++)if(m[a]===ia)for(b[a]=c.dir,d=a-1;0<=d;d--)if(m[d]===ka)b[d]=c.dir;else break}function g(a,b){a=a.split("");if(b){var c=[];q(a,c,b);B=c}a.reverse();I.reverse();return a.join("")}function b(a){for(var b=0;b<V.length;b++)if(a>=V[b]&&a<=Y[b])return!0;return!1}function f(a,c,f,d){for(;c*f<d&&z(a[c]);)c+=f;return c*f<d&&
b(a[c])?!0:!1}function c(a,b,c,f){if(!(f.hiLevel<a))if(1!==a||f.dir!==S||f.hasUbatB){f=b.length;for(var d=0,g,e,h;d<f;){if(c[d]>=a){for(g=d+1;g<f&&c[g]>=a;)g++;for(e=g-1;d<e;d++,e--)h=b[d],b[d]=b[e],b[e]=h,h=I[d],I[d]=I[e],I[e]=h;d=g}d++}}else b.reverse(),I.reverse()}function n(a,b,c,f,d){return{UBAT_L:function(){d.lastArabic=!1;return Z},UBAT_R:function(){d.lastArabic=!1;return ea},UBAT_ON:function(){return aa},UBAT_AN:function(){return ha},UBAT_EN:function(){return d.lastArabic?ha:ba},UBAT_AL:function(){d.lastArabic=
!0;d.hasUbatAl=!0;return ea},UBAT_WS:function(){return aa},UBAT_CS:function(){var a,g;if(1>f||f+1>=b.length||(a=c[f-1])!==ba&&a!==ha||(g=b[f+1])!==ba&&g!==ha)return aa;d.lastArabic&&(g=ha);return g===a?g:aa},UBAT_ES:function(){return(0<f?c[f-1]:da)===ba&&f+1<b.length&&b[f+1]===ba?ba:aa},UBAT_ET:function(){if(0<f&&c[f-1]===ba)return ba;if(d.lastArabic)return aa;for(var a=f+1,g=b.length;a<g&&b[a]===oa;)a++;return a<g&&b[a]===ba?ba:aa},UBAT_NSM:function(){if("VLTR"===d.inFormat){for(var g=b.length,e=
f+1;e<g&&b[e]===la;)e++;if(e<g&&(g=a[f],e=b[e],(1425<=g&&2303>=g||64286===g)&&(e===ea||e===ma)))return ea}return 1>f||b[f-1]===da?aa:c[f-1]},UBAT_B:function(){d.lastArabic=!0;d.hasUbatB=!0;return d.dir},UBAT_S:function(){d.hasUbatS=!0;return aa},UBAT_LRE:function(){d.lastArabic=!1;return aa},UBAT_RLE:function(){d.lastArabic=!1;return aa},UBAT_LRO:function(){d.lastArabic=!1;return aa},UBAT_RLO:function(){d.lastArabic=!1;return aa},UBAT_PDF:function(){d.lastArabic=!1;return aa},UBAT_BN:function(){return aa}}[na[b[f]]]()}
function C(a,b){for(var c=0;c<J.length;c++)if(a===J[c])return b[c];return a}function z(a){return"\u064b"<=a&&"\u0655">=a?!0:!1}function D(a){if("L"===a)return"LTR";if("R"===a)return"RTL";if("C"===a)return"CLR";if("D"===a)return"CRL"}function p(a,b){for(var c=0;c<R.length;c++)if(a===R[c])return b[c];return a}function w(a,b,c,f){for(var d=0;d<a.length;d++)if(a[d]>b||!c&&a[d]===b)a[d]+=f}u.getObject("string",!0,dojox);u=a("dojox.string.BidiEngine",e,{inputFormat:"ILYNN",outputFormat:"VLNNN",sourceToTarget:[],
targetToSource:[],levels:[],bidiTransform:function(a,c,d){this.sourceToTarget=[];this.targetToSource=[];if(!a)return"";var g=this.sourceToTarget,e=this.targetToSource,h=a.length;I=[];B=[];for(var k=0;k<h;k++)g[k]=k,e[k]=k,I[k]=k;if(!this.checkParameters(c,d))return a;c=this.inputFormat;d=this.outputFormat;var g=a,g=A,k=D(c.charAt(1)),e=D(d.charAt(1)),l="I"===c.charAt(0)?"L":c.charAt(0),h="I"===d.charAt(0)?"L":d.charAt(0),k=l+k,e=h+e,h=c.charAt(2)+d.charAt(2);g.defInFormat=k;g.defOutFormat=e;g.defSwap=
h;a=m(a,k,e,h,g);g=!1;if("R"===d.charAt(1))g=!0;else if("C"===d.charAt(1)||"D"===d.charAt(1))g=this.checkContextual(a);e=this.sourceToTarget=I;h=Array(e.length);for(k=0;k<e.length;k++)h[e[k]]=k;F=this.targetToSource=h;if(c.charAt(3)===d.charAt(3))g=a;else if("S"===d.charAt(3))if(c=g,d=!0,0===a.length)g=void 0;else{void 0===c&&(c=!0);void 0===d&&(d=!0);a=String(a);a=a.split("");var n=0,e=1,g=a.length;c||(n=a.length-1,e=-1,g=1);for(var h=g,k=d,q=0,g=[],l=0;n*e<h;n+=e)if(b(a[n])||z(a[n])){var r;if(r=
"\u0644"===a[n])b:{for(var t=a,v=n+e,u=e,E=h;v*u<E&&z(t[v]);)v+=u;r=" ";if(v*u<E)for(r=t[v],t=0;t<R.length;t++)if(R[t]===r){r=!0;break b}r=!1}if(r){a[n]=0===q?p(a[n+e],L):p(a[n+e],M);n+=e;q=a;r=n;t=e;for(v=h;r*t<v&&z(q[r]);)r+=t;r*t<v&&(q[r]=" ");k&&(g[l]=n,l++);q=0}else{r=a[n];if(1===q){t=n;if(f(a,n+e,e,h))b:for(v=a[n],u=0;u<J.length;u++){if(v===J[u]){v=K[u];break b}}else v=C(a[n],y);a[t]=v}else!0===f(a,n+e,e,h)?a[n]=C(a[n],T):a[n]=C(a[n],x);z(r)||(q=1);b:{for(t=0;t<U.length;t++)if(U[t]===r){r=!0;
break b}r=!1}!0===r&&(q=0)}}else q=0;e="";for(h=0;h<a.length;h++){if(k=d){b:{for(k=0;k<g.length;k++)if(g[k]===h)break b;k=-1}k=-1<k}k?(w(F,h,!c,-1),I.splice(h,1)):e+=a[h]}g=e}else if(c=a,d=g,a=!0,0===c.length)g=void 0;else for(void 0===a&&(a=!0),void 0===d&&(d=!0),c=String(c),g="",e=[],e=c.split(""),h=0;h<c.length;h++)k=!1,"\ufe70"<=e[h]&&"\ufeff">e[h]?(l=c.charCodeAt(h),"\ufef5"<=e[h]&&"\ufefc">=e[h]?(d?(0<h&&a&&" "===e[h-1]?g=g.substring(0,g.length-1)+"\u0644":(g+="\u0644",k=!0),g+=R[(l-65269)/
2]):(g+=R[(l-65269)/2],g+="\u0644",h+1<c.length&&a&&" "===e[h+1]?h++:k=!0),k&&(w(F,h,!0,1),I.splice(h,0,I[h]))):g+=Q[l-65136]):g+=e[h];this.sourceToTarget=I;this.targetToSource=F;this.levels=B;return g},_inputFormatSetter:function(a){if(!G.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=a},_outputFormatSetter:function(a){if(!G.test(a))throw Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=a},checkParameters:function(a,
b){a?this.set("inputFormat",a):a=this.inputFormat;b?this.set("outputFormat",b):b=this.outputFormat;return a===b?!1:!0},checkContextual:function(a){a=d(a);if("ltr"!==a&&"rtl"!==a){try{a=document.dir.toLowerCase()}catch(sa){}"ltr"!==a&&"rtl"!==a&&(a="ltr")}return a},hasBidiChar:function(a){return E.test(a)}});var I=[],F=[],B=[],A={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1},r=5,
t=6,H=0,S=1,G=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,E=/[\u0591-\u06ff\ufb1d-\ufefc]/,P=[["(",")"],[")","("],["\x3c","\x3e"],["\x3e","\x3c"],["[","]"],["]","["],["{","}"],["}","{"],["\u00ab","\u00bb"],["\u00bb","\u00ab"],["\u2039","\u203a"],["\u203a","\u2039"],["\u207d","\u207e"],["\u207e","\u207d"],["\u208d","\u208e"],["\u208e","\u208d"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232a"],["\u232a","\u2329"],["\ufe59","\ufe5a"],["\ufe5a","\ufe59"],["\ufe5b","\ufe5c"],["\ufe5c","\ufe5b"],
["\ufe5d","\ufe5e"],["\ufe5e","\ufe5d"],["\ufe64","\ufe65"],["\ufe65","\ufe64"]],R=["\u0622","\u0623","\u0625","\u0627"],L=["\ufef5","\ufef7","\ufef9","\ufefb"],M=["\ufef6","\ufef8","\ufefa","\ufefc"],J="\u0627\u0628\u062a\u062b\u062c\u062d\u062e\u062f\u0630\u0631\u0632\u0633\u0634\u0635\u0636\u0637\u0638\u0639\u063a\u0641\u0642\u0643\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u0644\u0645\u0646\u0647\u0648\u064a\u0625\u0623\u0622\u0629\u0649\u06cc\u0626\u0624".split(""),x="\ufe8d\ufe8f\ufe95\ufe99\ufe9d\ufea1\ufea5\ufea9\ufeab\ufead\ufeaf\ufeb1\ufeb5\ufeb9\ufebd\ufec1\ufec5\ufec9\ufecd\ufed1\ufed5\ufed9\ufedd\ufee1\ufee5\ufee9\ufeed\ufef1\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfc\ufe89\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe89\ufe85".split(""),
y="\ufe8e\ufe90\ufe96\ufe9a\ufe9e\ufea2\ufea6\ufeaa\ufeac\ufeae\ufeb0\ufeb2\ufeb6\ufeba\ufebe\ufec2\ufec6\ufeca\ufece\ufed2\ufed6\ufeda\ufede\ufee2\ufee6\ufeea\ufeee\ufef2\ufe88\ufe84\ufe82\ufe94\ufef0\ufbfd\ufe8a\ufe86\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8a\ufe86".split(""),K="\ufe8e\ufe92\ufe98\ufe9c\ufea0\ufea4\ufea8\ufeaa\ufeac\ufeae\ufeb0\ufeb4\ufeb8\ufebc\ufec0\ufec4\ufec8\ufecc\ufed0\ufed4\ufed8\ufedc\ufee0\ufee4\ufee8\ufeec\ufeee\ufef4\ufe88\ufe84\ufe82\ufe94\ufef0\ufbff\ufe8c\ufe86\ufe71\ufe72\ufe74\ufe77\ufe79\ufe7b\ufe7d\ufe7f\ufe80\ufe8c\ufe86".split(""),
T="\ufe8d\ufe91\ufe97\ufe9b\ufe9f\ufea3\ufea7\ufea9\ufeab\ufead\ufeaf\ufeb3\ufeb7\ufebb\ufebf\ufec3\ufec7\ufecb\ufecf\ufed3\ufed7\ufedb\ufedf\ufee3\ufee7\ufeeb\ufeed\ufef3\ufe87\ufe83\ufe81\ufe93\ufeef\ufbfe\ufe8b\ufe85\ufe70\ufe72\ufe74\ufe76\ufe78\ufe7a\ufe7c\ufe7e\ufe80\ufe8b\ufe85".split(""),U="\u0621\u0622\u0623\u0624\u0625\u0627\u0629\u062f\u0630\u0631\u0632\u0648\u0649".split(""),Q="\u064b\u064b\u064c\u061f\u064d\u061f\u064e\u064e\u064f\u064f\u0650\u0650\u0651\u0651\u0652\u0652\u0621\u0622\u0622\u0623\u0623\u0624\u0624\u0625\u0625\u0626\u0626\u0626\u0626\u0627\u0627\u0628\u0628\u0628\u0628\u0629\u0629\u062a\u062a\u062a\u062a\u062b\u062b\u062b\u062b\u062c\u062c\u062c\u062c\u062d\u062d\u062d\u062d\u062e\u062e\u062e\u062e\u062f\u062f\u0630\u0630\u0631\u0631\u0632\u0632\u0633\u0633\u0633\u0633\u0634\u0634\u0634\u0634\u0635\u0635\u0635\u0635\u0636\u0636\u0636\u0636\u0637\u0637\u0637\u0637\u0638\u0638\u0638\u0638\u0639\u0639\u0639\u0639\u063a\u063a\u063a\u063a\u0641\u0641\u0641\u0641\u0642\u0642\u0642\u0642\u0643\u0643\u0643\u0643\u0644\u0644\u0644\u0644\u0645\u0645\u0645\u0645\u0646\u0646\u0646\u0646\u0647\u0647\u0647\u0647\u0648\u0648\u0649\u0649\u064a\u064a\u064a\u064a\ufef5\ufef6\ufef7\ufef8\ufef9\ufefa\ufefb\ufefc\u061f\u061f\u061f".split(""),
V=["\u0621","\u0641"],Y=["\u063a","\u064a"],W=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],ca=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Z=0,ea=1,ba=2,ha=3,aa=4,da=5,ia=6,ma=7,ka=8,oa=11,la=12,na="UBAT_L UBAT_R UBAT_EN UBAT_AN UBAT_ON UBAT_B UBAT_S UBAT_AL UBAT_WS UBAT_CS UBAT_ES UBAT_ET UBAT_NSM UBAT_LRE UBAT_RLE UBAT_PDF UBAT_LRO UBAT_RLO UBAT_BN".split(" "),fa=100;a=Z;e=ea;var N=ba,X=ha,h=aa,ja=da,pa=ia,l=ma,ga=ka,
O=oa,v=la,qa=[fa+0,a,a,a,a,fa+1,fa+2,fa+3,e,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,fa+4,h,h,h,a,h,a,h,a,h,h,h,a,a,h,h,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,a,a,h,h,a,a,h,h,a,a,h,h,h,h,h,h,h,h,h,h,h,
h,h,h,h,h,h,h,h,h,h,h,h,a,a,a,fa+5,l,l,fa+6,fa+7],ra=[[18,18,18,18,18,18,18,18,18,pa,ja,pa,ga,ja,18,18,18,18,18,18,18,18,18,18,18,18,18,18,ja,ja,ja,pa,ga,h,h,O,O,O,h,h,h,h,h,10,9,10,9,9,N,N,N,N,N,N,N,N,N,N,9,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,18,18,18,18,18,18,ja,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,18,9,h,O,O,O,O,h,h,h,h,a,h,h,18,h,h,O,O,N,N,h,a,h,h,h,N,a,h,h,
h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,a,a,a,a,a,a,a,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,a,h,h,h,h,h,h,h,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,
v,v,v,v,v,v,v,e,v,e,v,v,e,v,v,e,v,h,h,h,h,h,h,h,h,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,h,h,h,h,h,e,e,e,e,e,h,h,h,h,h,h,h,h,h,h,h],[X,X,X,X,h,h,h,h,l,O,O,l,9,l,h,h,v,v,v,v,v,v,v,v,v,v,v,l,h,h,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,X,X,X,X,X,X,X,X,X,X,O,X,X,l,l,l,v,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,
l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,v,v,v,v,v,v,v,X,h,v,v,v,v,v,v,l,l,v,v,h,v,v,v,v,l,l,N,N,N,N,N,N,N,N,N,N,l,l,l,l,l,l],[l,l,l,l,l,l,l,l,l,l,l,l,l,l,h,l,l,v,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,h,h,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,v,v,v,v,v,
v,v,v,v,v,v,l,h,h,h,h,h,h,h,h,h,h,h,h,h,h,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,e,v,v,v,v,v,v,v,v,v,e,e,h,h,h,h,e,h,h,h,h,h],[ga,ga,ga,ga,ga,ga,ga,ga,ga,ga,ga,18,18,18,a,e,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,ga,ja,13,14,15,16,17,9,O,O,O,O,O,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,9,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,ga,18,18,18,18,18,h,h,h,h,h,18,18,18,18,18,18,N,a,h,h,N,N,N,N,N,N,10,10,h,h,h,a,N,N,N,N,N,N,N,N,N,N,10,10,h,h,h,h,a,a,
a,a,a,a,a,a,a,a,a,a,a,h,h,h,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,O,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h],[a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,h,h,h,h,h,e,v,e,e,e,e,e,e,e,e,e,e,10,e,e,e,e,e,e,e,e,e,e,e,e,e,h,e,e,e,e,e,h,e,h,e,e,h,e,e,h,e,e,e,e,e,e,e,e,e,e,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,
l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l],[v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,v,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,v,v,v,v,v,v,v,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,9,h,9,h,h,9,h,h,h,h,h,h,h,h,h,O,h,h,10,10,h,h,h,h,h,O,O,h,h,h,h,h,l,l,l,l,l,h,l,l,l,l,l,l,l,l,l,l,l,l,l,l,
l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,l,h,h,18],[h,h,h,O,O,O,h,h,h,h,h,10,9,10,9,9,N,N,N,N,N,N,N,N,N,N,9,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,h,h,h,h,h,h,h,h,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,
a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,h,h,h,a,a,a,a,a,a,h,h,a,a,a,a,a,a,h,h,a,a,a,a,a,a,h,h,a,a,a,h,h,h,O,O,h,h,h,O,O,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h]];return u})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(u,a,e,m){return u("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(a){var d=this._attrPairNames;return d[a]?
d[a]:d[a]={s:"_"+a+"Setter",g:"_"+a+"Getter"}},postscript:function(a){a&&this.set(a)},_get:function(a,e){return"function"===typeof this[e.g]?this[e.g]():this[a]},get:function(a){return this._get(a,this._getAttrNames(a))},set:function(a,e){if("object"===typeof a){for(var d in a)a.hasOwnProperty(d)&&"_watchCallbacks"!=d&&this.set(d,a[d]);return this}d=this._getAttrNames(a);var g=this._get(a,d);d=this[d.s];var b;"function"===typeof d?b=d.apply(this,Array.prototype.slice.call(arguments,1)):this[a]=e;
if(this._watchCallbacks){var f=this;m(b,function(){f._watchCallbacks(a,g,e)})}return this},_changeAttrValue:function(a,e){var d=this.get(a);this[a]=e;this._watchCallbacks&&this._watchCallbacks(a,d,e);return this},watch:function(a,k){var d=this._watchCallbacks;if(!d)var g=this,d=this._watchCallbacks=function(a,b,e,k){var c=function(c){if(c){c=c.slice();for(var f=0,d=c.length;f<d;f++)c[f].call(g,a,b,e)}};c(d["_"+a]);k||c(d["*"])};k||"function"!==typeof a?a="_"+a:(k=a,a="*");var b=d[a];"object"!==typeof b&&
(b=d[a]=[]);b.push(k);a={};a.unwatch=a.remove=function(){var a=e.indexOf(b,k);-1<a&&b.splice(a,1)};return a}})})},"esri/views/2d/engine/webgl/TextShaping":function(){define(["require","exports","./Rect"],function(u,a,e){return function(){function a(a,e,m,g,b,f,c,n){this._glyphItems=a;this._maxWidth=e;this._lineHeight=m;this._letterSpacing=g;this._offset=b;this._hAnchor=f;this._vAnchor=c;this._justify=n}a.prototype.getShaping=function(a,e){for(var d=this._letterSpacing,g=this._lineHeight,b=this._justify,
f=this._maxWidth,c=[],k=0,m=0,z=0,u=0,p=-1,w=0,I=-1,F=a.length,B=0;B<F;B++){var A=a.charCodeAt(B);if(10===A){if(B!==F-1){if(p>=u){var k=c[p],r=k.x+k.glyphMosaicItem.metrics.advance,w=Math.max(r,w);b&&this._applyJustification(c,u,p);u=c.length}m=e?m-g:m+g;k=0;++z}}else{for(var r=void 0,t=0,H=this._glyphItems;t<H.length&&!(r=H[t][A]);t++);if(r){c.push({codePoint:A,x:k,y:m,glyphMosaicItem:r});k+=r.metrics.advance+d;if(0<f&&k>f&&0<=I){t=I+1;r=c[t].x;w=Math.max(r,w);for(H=t;H<c.length;H++)c[H].y=e?c[H].y-
g:c[H].y+g,c[H].x-=r;b&&this._applyJustification(c,u,I);m=e?m-g:m+g;k-=r;++z;u=t;I=-1}++p;32===A&&(I=c.length-1)}}}p>=u&&(k=c[p],w=Math.max(w,k.x+k.glyphMosaicItem.metrics.advance),b&&this._applyJustification(c,u,p));if(0<c.length)for(a=(b-this._hAnchor)*w,d=(-this._vAnchor*(z+1)+.5)*g,e&&z&&(d+=z*g),a+=this._offset[0],d+=this._offset[1],e=0;e<c.length;e++)g=c[e],g.x+=a,g.y+=d;return c};a.getBox=function(a){var d=a.length;if(0!==d){for(var e=a[0].x+a[0].glyphMosaicItem.metrics.left,g=e,b=a[0].y,f=
b,c=b,n=1;n<d;n++){var m=a[n],z=m.x+m.glyphMosaicItem.metrics.left;z<e&&(e=z);z>g&&(g=z);m=m.y;m<b&&(b=m);m>f&&(f=m);m!==c&&(g=Math.max(g,a[n-1].x+a[n-1].glyphMosaicItem.metrics.left+a[n-1].glyphMosaicItem.metrics.width),c=m)}g=Math.max(g,a[d-1].x+a[d-1].glyphMosaicItem.metrics.left+a[d-1].glyphMosaicItem.metrics.width);f+=12;return{x:e,y:f,width:g-e,height:f-(b-12)}}};a.addDecoration=function(a,k){var d=a.length;if(0!==d){for(var g=a[0].x+a[0].glyphMosaicItem.metrics.left,b=a[0].y,f=1;f<d;f++){var c=
a[f];if(c.y!==b){var n=a[f-1].x+a[f-1].glyphMosaicItem.metrics.left+a[f-1].glyphMosaicItem.metrics.width;a.push({codePoint:0,x:g,y:b+k-3,glyphMosaicItem:{rect:new e(4,0,4,8),metrics:{width:n-g,height:8,left:0,top:0,advance:0},page:0}});b=c.y;g=c.x+c.glyphMosaicItem.metrics.left}}d=a[d-1].x+a[d-1].glyphMosaicItem.metrics.left+a[d-1].glyphMosaicItem.metrics.width;a.push({codePoint:0,x:g,y:b+k-3,glyphMosaicItem:{rect:new e(4,0,4,8),metrics:{width:d-g,height:8,left:0,top:0,advance:0},page:0}})}};a.prototype._applyJustification=
function(a,e,m){for(var d=a[m],d=(d.x+d.glyphMosaicItem.metrics.advance)*this._justify;e<=m;e++)a[e].x-=d};return a}()})},"esri/views/2d/engine/webgl/Rect":function(){define(["require","exports"],function(u,a){return function(){function a(a,d,e,q){void 0===a&&(a=0);void 0===d&&(d=0);void 0===e&&(e=0);void 0===q&&(q=0);this.x=a;this.y=d;this.width=e;this.height=q}Object.defineProperty(a.prototype,"isEmpty",{get:function(){return 0>=this.width||0>=this.height},enumerable:!0,configurable:!0});return a}()})},
"esri/views/vectorTiles/TileParser":function(){define("require exports dojo/promise/all ../../core/executeAsync ../../core/pbf ../../core/promiseUtils ../2d/engine/webgl/TileClipper ../2d/tiling/enums ./BackgroundBucket ./CircleBucket ./Feature ./FillBucket ./LineBucket ./SourceLayerData ./SymbolBucket".split(" "),function(u,a,e,m,d,k,q,g,b,f,c,n,C,z,D){return function(){function a(a,b,c){this._pbfTile=new d(new Uint8Array(a),new DataView(a));this._tile=b;this._connection=c;this._layers=b.getLayers();
c=b.tileKey.split("/").map(parseFloat);var f=c[0];a=c[1];c=c[2];this._level=f;b.refKey&&(b=b.refKey.split("/").map(parseFloat)[0],b=f-b,0<b&&(f=(1<<b)-1,this._tileClipper=new q.TileClipper(b,a&f,c&f)));this._tileClipper||(this._tileClipper=new q.SimpleBuilder)}a.prototype.parse=function(){for(var a=this,b=this._parseTileData(this._pbfTile),f=this._layers,d=f.length,n=this._level,p,q=[],z={},C=new Set,d=d-1;0<=d;d--)if(p=f[d],!(p.minzoom&&n<p.minzoom||p.maxzoom&&n>=p.maxzoom||p.layout&&"none"===p.layout.visibility))if(0===
p.type)p=this._createBucket(p),p.layerIndex=d,q.push(p);else{var u=p.sourceLayer,D=b[u];D&&(C.add(u),p=this._createBucket(p))&&(p.layerIndex=d,p.layerExtent=D.extent,(D=z[u])||(D=z[u]=[]),D.push(p))}var P=10*this._level,R=10*(this._level+1),L=[],M=[],J=[],x=[],y=this._tileClipper,K=new Set,T={},U=[];C.forEach(function(a){return U.push(a)});var Q=0,V=0,Y=U.length;return m(function(){if(a._tile.status===g.TileStatus.INVALID)return!0;switch(Q){case 0:if(V<Y){var f=U[V++],d=b[f],e=z[f];if(e&&0!==e.length)for(f=
d.getData();f.next(2);){var k=new c(f.getMessage(),d),n=k.values;if(n){var m=n._minzoom;if(m&&m>=R)continue;if((n=n._maxzoom)&&n<=P)continue}for(var m=0,p=e;m<p.length;m++)n=p[m],n.pushFeature(k)}}else{d=a._tile;for(f in z)for(e=z[f],k=0;k<e.length;k++)n=e[k],n.hasFeatures()&&(3===n.layer.type?(L.push(n),d.addBucket(n)):n.layer.refLayerId?J.push(n):(M.push(n),x[n.layer.id]=n));Q=1;V=0;Y=L.length}break;case 1:V<Y?L[V++].getResources(y,K,T):Q=2}return 2===Q}).then(function(){if(a._tile.status===g.TileStatus.INVALID)return[];
var b=[],c=a._tile.getWorkerTileHandler(),f;0<K.size&&(f=c.fetchSprites(K,a._connection),b.push(f));for(var d in T)f=T[d],0<f.size&&(f=c.fetchGlyphs(a._tile.tileKey,d,f,a._connection),b.push(f));return e(b).then(function(b){if(a._tile.status===g.TileStatus.INVALID)return[];var c=0,f=0,d=M.length;return m(function(){if(a._tile.status===g.TileStatus.INVALID)return!0;switch(c){case 0:if(f<d){var b=M[f++];b.processFeatures(y,a._tile);q.push(b)}else c=1,f=0,d=J.length;break;case 1:for(var e=0;e<J.length;e++){var b=
J[e],k=x[b.layer.refLayerId];k&&(k.assignBufferInfo(b),q.push(b))}c=2;f=0;d=L.length;break;case 2:f<d?(b=L[f++],b.processFeatures(y,a._tile),q.push(b)):c=3}return 3===c}).then(function(){q.sort(function(a,b){return a.layerIndex-b.layerIndex});return q})}).catch(function(a){return k.reject(Error(a))})}).catch(function(a){return k.reject(Error(a))})};a.prototype._parseTileData=function(a){for(var b={};a.next();)switch(a.tag()){case 3:var c=new z(a.getMessage());b[c.name]=c;break;default:a.skip()}return b};
a.prototype._createBucket=function(a){switch(a.type){case 0:return this._createBackgroundBucket(a);case 1:return this._createFillBucket(a);case 2:return this._createLineBucket(a);case 4:return this._createCircleBucket(a);case 3:return this._createSymbolBucket(a)}};a.prototype._createBackgroundBucket=function(a){return new b(a,this._level)};a.prototype._createFillBucket=function(a){var b=this._tile;return new n(a,this._level,a.hasDataDrivenFill?b.fillDDVertexBuffer:b.fillVertexBuffer,b.fillIndexBuffer,
a.hasDataDrivenOutline?b.outlineDDVertexBuffer:b.outlineVertexBuffer,b.outlineIndexBuffer)};a.prototype._createLineBucket=function(a){var b=this._tile;return new C(a,this._level,a.hasDataDrivenLine?b.lineDDVertexBuffer:b.lineVertexBuffer,b.lineIndexBuffer)};a.prototype._createCircleBucket=function(a){var b=this._tile;return new f(a,this._level,b.circleVertexBuffer,b.circleIndexBuffer)};a.prototype._createSymbolBucket=function(a){var b=this._tile;return new D(a,this._level,a.hasDataDrivenIcon?b.iconDDVertexBuffer:
b.iconVertexBuffer,b.iconIndexBuffer,a.hasDataDrivenText?b.textDDVertexBuffer:b.textVertexBuffer,b.textIndexBuffer,b.placementEngine,b.getWorkerTileHandler())};return a}()})},"esri/core/pbf":function(){define(["require","exports"],function(u,a){return function(){function a(a,d,e,q){this._tag=0;this._dataType=99;this._data=a;this._dataView=d;this._pos=e||0;this._end=q||a.byteLength}a.prototype.clone=function(){return new a(this._data,this._dataView,this._pos,this._end)};a.prototype.pos=function(){return this._pos};
a.prototype.next=function(a){for(;;){if(this._pos===this._end)return!1;var d=this._decodeVarint();this._tag=d>>3;this._dataType=d&7;if(!a||a===this._tag)break;this.skip()}return!0};a.prototype.empty=function(){return this._pos>=this._end};a.prototype.tag=function(){return this._tag};a.prototype.getInt32=function(){return this._decodeVarint()};a.prototype.getInt64=function(){return this._decodeVarint()};a.prototype.getUInt32=function(){var a=4294967295,a=(this._data[this._pos]&127)>>>0;if(128>this._data[this._pos++])return a;
a=(a|(this._data[this._pos]&127)<<7)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<14)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&127)<<21)>>>0;if(128>this._data[this._pos++])return a;a=(a|(this._data[this._pos]&15)<<28)>>>0;if(128>this._data[this._pos++])return a};a.prototype.getUInt64=function(){return this._decodeVarint()};a.prototype.getSInt32=function(){var a=this.getUInt32();return a>>>1^-(a&1)|0};a.prototype.getSInt64=function(){return this._decodeSVarint()};
a.prototype.getBool=function(){var a=0!==this._data[this._pos];this._skip(1);return a};a.prototype.getEnum=function(){return this._decodeVarint()};a.prototype.getFixed64=function(){var a=this._dataView,d=this._pos,a=a.getUint32(d,!0)+4294967296*a.getUint32(d+4,!0);this._skip(8);return a};a.prototype.getSFixed64=function(){var a=this._dataView,d=this._pos,a=a.getUint32(d,!0)+4294967296*a.getInt32(d+4,!0);this._skip(8);return a};a.prototype.getDouble=function(){var a=this._dataView.getFloat64(this._pos,
!0);this._skip(8);return a};a.prototype.getFixed32=function(){var a=this._dataView.getUint32(this._pos,!0);this._skip(4);return a};a.prototype.getSFixed32=function(){var a=this._dataView.getInt32(this._pos,!0);this._skip(4);return a};a.prototype.getFloat=function(){var a=this._dataView.getFloat32(this._pos,!0);this._skip(4);return a};a.prototype.getString=function(){var a=this._getLength(),d=this._pos,d=this._toString(this._data,d,d+a);this._skip(a);return d};a.prototype.getBytes=function(){var a=
this._getLength(),d=this._pos,d=this._toBytes(this._data,d,d+a);this._skip(a);return d};a.prototype.getMessage=function(){var e=this._getLength(),d=this._pos,d=new a(this._data,this._dataView,d,d+e);this._skip(e);return d};a.prototype.skip=function(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw Error("Invalid data type!");}};a.prototype._skip=function(a){if(this._pos+a>this._end)throw Error("Attempt to skip past the end of buffer!");
this._pos+=a};a.prototype._decodeVarint=function(){var a=this._data,d=this._pos,e=0,q;if(10<=this._end-d){if(q=a[d++],e|=q&127,0!==(q&128)&&(q=a[d++],e|=(q&127)<<7,0!==(q&128)&&(q=a[d++],e|=(q&127)<<14,0!==(q&128)&&(q=a[d++],e|=(q&127)<<21,0!==(q&128)&&(q=a[d++],e+=268435456*(q&127),0!==(q&128)&&(q=a[d++],e+=34359738368*(q&127),0!==(q&128)&&(q=a[d++],e+=4398046511104*(q&127),0!==(q&128)&&(q=a[d++],e+=562949953421312*(q&127),0!==(q&128)&&(q=a[d++],e+=72057594037927936*(q&127),0!==(q&128)&&(q=a[d++],
e+=0x7fffffffffffffff*(q&127),0!==(q&128)))))))))))throw Error("Varint too long!");}else{for(var g=1;d!==this._end;){q=a[d];if(0===(q&128))break;++d;e+=(q&127)*g;g*=128}if(d===this._end)throw Error("Varint overrun!");++d;e+=q*g}this._pos=d;return e};a.prototype._decodeSVarint=function(){var a=this._decodeVarint();return a%2?-(a+1)/2:a/2};a.prototype._getLength=function(){if(2!==this._dataType)throw Error("Not a delimited data type!");return this._decodeVarint()};a.prototype._toString=function(a,d,
e){var k="",g="";for(e=Math.min(this._end,e);d<e;++d){var b=a[d];b&128?g+="%"+b.toString(16):(k+=decodeURIComponent(g)+String.fromCharCode(b),g="")}g.length&&(k+=decodeURIComponent(g));return k};a.prototype._toBytes=function(a,d,e){e=Math.min(this._end,e);return new Uint8Array(a.buffer,d,e-d)};return a}()})},"esri/views/2d/engine/webgl/TileClipper":function(){define(["require","exports","./definitions","./Geometry","./GeometryUtils"],function(u,a,e,m,d){Object.defineProperty(a,"__esModule",{value:!0});
var k=function(){return function(a,b,f){this.ratio=a;this.x=b;this.y=f}}();u=function(){function a(a,f,c,d,g){void 0===d&&(d=8);void 0===g&&(g=8);this.lines=[];this.starts=[];this.pixelRatio=d;this.pixelMargin=g;this.tileSize=e.TILE_SIZE*d;this.dz=a;this.yPos=f;this.xPos=c}a.prototype.setExtent=function(a){this.finalRatio=this.tileSize/a*(1<<this.dz);var b=this.pixelRatio*this.pixelMargin,b=b/this.finalRatio;a>>=this.dz;b>a&&(b=a);this.margin=b;this.xmin=a*this.xPos-b;this.ymin=a*this.yPos-b;this.xmax=
this.xmin+a+2*b;this.ymax=this.ymin+a+2*b};a.prototype.reset=function(a){this.type=a;this.lines=[];this.starts=[];this.line=null;this.start=0};a.prototype.moveTo=function(a,f){this._pushLine();this._prevIsIn=this._isIn(a,f);this._moveTo(a,f,this._prevIsIn);this._prevPt=new m.Point(a,f);this._firstPt=new m.Point(a,f);this._dist=0};a.prototype.lineTo=function(a,f){var b=this._isIn(a,f),d=new m.Point(a,f),e=m.Point.distance(this._prevPt,d),g,q,p;if(b)this._prevIsIn?this._lineTo(a,f,!0):(g=this._prevPt,
q=d,a=this._intersect(q,g),this.start=this._dist+e*(1-this._r),this._lineTo(a.x,a.y,!0),this._lineTo(q.x,q.y,!0));else if(this._prevIsIn)q=this._prevPt,g=d,a=this._intersect(q,g),this._lineTo(a.x,a.y,!0),this._lineTo(g.x,g.y,!1);else{var w=this._prevPt;if(!(w.x<=this.xmin&&d.x<=this.xmin||w.x>=this.xmax&&d.x>=this.xmax||w.y<=this.ymin&&d.y<=this.ymin||w.y>=this.ymax&&d.y>=this.ymax)){a=[];if(w.x<this.xmin&&d.x>this.xmin||w.x>this.xmin&&d.x<this.xmin)f=(this.xmin-w.x)/(d.x-w.x),p=w.y+f*(d.y-w.y),p<=
this.ymin?q=!1:p>=this.ymax?q=!0:a.push(new k(f,this.xmin,p));if(w.x<this.xmax&&d.x>this.xmax||w.x>this.xmax&&d.x<this.xmax)f=(this.xmax-w.x)/(d.x-w.x),p=w.y+f*(d.y-w.y),p<=this.ymin?q=!1:p>=this.ymax?q=!0:a.push(new k(f,this.xmax,p));if(w.y<this.ymin&&d.y>this.ymin||w.y>this.ymin&&d.y<this.ymin)f=(this.ymin-w.y)/(d.y-w.y),p=w.x+f*(d.x-w.x),p<=this.xmin?g=!1:p>=this.xmax?g=!0:a.push(new k(f,p,this.ymin));if(w.y<this.ymax&&d.y>this.ymax||w.y>this.ymax&&d.y<this.ymax)f=(this.ymax-w.y)/(d.y-w.y),p=w.x+
f*(d.x-w.x),p<=this.xmin?g=!1:p>=this.xmax?g=!0:a.push(new k(f,p,this.ymax));if(0===a.length)g?q?this._lineTo(this.xmax,this.ymax,!0):this._lineTo(this.xmax,this.ymin,!0):q?this._lineTo(this.xmin,this.ymax,!0):this._lineTo(this.xmin,this.ymin,!0);else if(1<a.length&&a[0].ratio>a[1].ratio)this.start=this._dist+e*a[1].ratio,this._lineTo(a[1].x,a[1].y,!0),this._lineTo(a[0].x,a[0].y,!0);else for(this.start=this._dist+e*a[0].ratio,g=0;g<a.length;g++)this._lineTo(a[g].x,a[g].y,!0)}this._lineTo(d.x,d.y,
!1)}this._dist+=e;this._prevIsIn=b;this._prevPt=d};a.prototype.close=function(){if(2<this.line.length){var a=this._firstPt,f=this._prevPt;a.x===f.x&&a.y===f.y||this.lineTo(a.x,a.y);a=this.line;for(f=a.length;4<=f;)if(a[0].x===a[1].x&&a[0].x===a[f-2].x||a[0].y===a[1].y&&a[0].y===a[f-2].y)a.pop(),a[0].x=a[f-2].x,a[0].y=a[f-2].y,--f;else break}};a.prototype.result=function(a){void 0===a&&(a=!0);this._pushLine();if(0===this.lines.length)return null;3===this.type&&a&&q.simplify(this.tileSize,this.margin*
this.finalRatio,this.lines);return this.lines};a.prototype.resultWithStarts=function(){if(2!==this.type)throw Error("Only valid for lines");this._pushLine();var a=this.lines,f=a.length;if(0===f)return null;for(var c=[],d=0;d<f;d++)c.push({line:a[d],start:this.starts[d]||0});return c};a.prototype._isIn=function(a,f){return a>=this.xmin&&a<=this.xmax&&f>=this.ymin&&f<=this.ymax};a.prototype._intersect=function(a,f){var b,d,e;if(f.x>=this.xmin&&f.x<=this.xmax)d=f.y<=this.ymin?this.ymin:this.ymax,e=(d-
a.y)/(f.y-a.y),b=a.x+e*(f.x-a.x);else if(f.y>=this.ymin&&f.y<=this.ymax)b=f.x<=this.xmin?this.xmin:this.xmax,e=(b-a.x)/(f.x-a.x),d=a.y+e*(f.y-a.y);else{d=f.y<=this.ymin?this.ymin:this.ymax;b=f.x<=this.xmin?this.xmin:this.xmax;var g=(b-a.x)/(f.x-a.x),k=(d-a.y)/(f.y-a.y);g<k?(e=g,d=a.y+g*(f.y-a.y)):(e=k,b=a.x+k*(f.x-a.x))}this._r=e;return new m.Point(b,d)};a.prototype._pushLine=function(){this.line&&(1===this.type?0<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):2===this.type?
1<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)):3===this.type&&3<this.line.length&&(this.lines.push(this.line),this.starts.push(this.start)));this.line=[];this.start=0};a.prototype._moveTo=function(a,f,c){3!==this.type?c&&(a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),f=Math.round((f-(this.ymin+this.margin))*this.finalRatio),this.line.push(new m.Point(a,f))):(c||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),f<this.ymin&&(f=this.ymin),f>this.ymax&&
(f=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),f=Math.round((f-(this.ymin+this.margin))*this.finalRatio),this.line.push(new m.Point(a,f)),this._is_v=this._is_h=!1)};a.prototype._lineTo=function(a,f,c){if(3!==this.type)if(c){a=Math.round((a-(this.xmin+this.margin))*this.finalRatio);f=Math.round((f-(this.ymin+this.margin))*this.finalRatio);if(0<this.line.length&&(c=this.line[this.line.length-1],c.equals(a,f)))return;this.line.push(new m.Point(a,f))}else this.line&&0<this.line.length&&
this._pushLine();else if(c||(a<this.xmin&&(a=this.xmin),a>this.xmax&&(a=this.xmax),f<this.ymin&&(f=this.ymin),f>this.ymax&&(f=this.ymax)),a=Math.round((a-(this.xmin+this.margin))*this.finalRatio),f=Math.round((f-(this.ymin+this.margin))*this.finalRatio),this.line&&0<this.line.length){c=this.line[this.line.length-1];var b=c.x===a,d=c.y===f;b&&d||(this._is_h&&b?(c.x=a,c.y=f,c=this.line[this.line.length-2],c.x===a&&c.y===f?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(c=this.line[this.line.length-
2],this._is_h=c.x===a,this._is_v=c.y===f)):(this._is_h=c.x===a,this._is_v=c.y===f)):this._is_v&&d?(c.x=a,c.y=f,c=this.line[this.line.length-2],c.x===a&&c.y===f?(this.line.pop(),1>=this.line.length?this._is_v=this._is_h=!1:(c=this.line[this.line.length-2],this._is_h=c.x===a,this._is_v=c.y===f)):(this._is_h=c.x===a,this._is_v=c.y===f)):(this.line.push(new m.Point(a,f)),this._is_h=b,this._is_v=d))}else this.line.push(new m.Point(a,f))};return a}();a.TileClipper=u;u=function(){function a(){}a.prototype.setExtent=
function(a){this._ratio=4096===a?1:4096/a};a.prototype.reset=function(a){this.type=a;this.lines=[];this.line=null};a.prototype.moveTo=function(a,d){this.line&&this.lines.push(this.line);this.line=[];var b=this._ratio;this.line.push(new m.Point(Math.round(a*b),Math.round(d*b)))};a.prototype.lineTo=function(a,d){var b=this._ratio;this.line.push(new m.Point(Math.round(a*b),Math.round(d*b)))};a.prototype.close=function(){var a=this.line;a&&!a[0].isEqual(a[a.length-1])&&a.push(a[0])};a.prototype.result=
function(){this.line&&this.lines.push(this.line);if(0===this.lines.length)return null;3===this.type&&1!==this._ratio&&q.simplify(4096,64,this.lines);return this.lines};return a}();a.SimpleBuilder=u;var q=function(){function a(){}a.simplify=function(b,d,c){if(c){var f=-d,e=b+d,g=-d,k=b+d;b=[];d=[];for(var m=c.length,q=0;q<m;++q){var u=c[q];if(u&&!(2>u.length))for(var F=u[0],B=void 0,A=u.length,r=1;r<A;++r)B=u[r],F.x===B.x&&(F.x<=f&&(F.y>B.y?(b.push(q),b.push(r),b.push(0),b.push(-1)):(d.push(q),d.push(r),
d.push(0),d.push(-1))),F.x>=e&&(F.y<B.y?(b.push(q),b.push(r),b.push(1),b.push(-1)):(d.push(q),d.push(r),d.push(1),d.push(-1)))),F.y===B.y&&(F.y<=g&&(F.x<B.x?(b.push(q),b.push(r),b.push(2),b.push(-1)):(d.push(q),d.push(r),d.push(2),d.push(-1))),F.y>=k&&(F.x>B.x?(b.push(q),b.push(r),b.push(3),b.push(-1)):(d.push(q),d.push(r),d.push(3),d.push(-1)))),F=B}0!==b.length&&0!==d.length&&(a.fillParent(c,d,b),a.fillParent(c,b,d),f=[],a.calcDeltas(f,d,b),a.calcDeltas(f,b,d),a.addDeltas(f,c))}};a.fillParent=function(a,
f,c){for(var b=c.length,e=f.length,g=0;g<e;g+=4){for(var k=f[g],m=f[g+1],q=f[g+2],u=a[k][m-1],k=a[k][m],m=8092,F=-1,B=0;B<b;B+=4)if(c[B+2]===q){var A=c[B],r=c[B+1],t=a[A][r-1],A=a[A][r];switch(q){case 0:case 1:d.between(u.y,t.y,A.y)&&d.between(k.y,t.y,A.y)&&(t=Math.abs(A.y-t.y),t<m&&(m=t,F=B));break;case 2:case 3:d.between(u.x,t.x,A.x)&&d.between(k.x,t.x,A.x)&&(t=Math.abs(A.x-t.x),t<m&&(m=t,F=B))}}f[g+3]=F}};a.calcDeltas=function(b,d,c){for(var f=d.length,e=0;e<f;e+=4){var g=a.calcDelta(e,d,c,[]);
b.push(d[e]);b.push(d[e+1]);b.push(d[e+2]);b.push(g)}};a.calcDelta=function(b,d,c,e){b=d[b+3];if(-1===b)return 0;var f=e.length;if(1<f&&e[f-2]===b)return 0;e.push(b);return a.calcDelta(b,c,d,e)+1};a.addDeltas=function(a,d){for(var b=a.length,f=0,e=0;e<b;e+=4){var g=a[e+3];g>f&&(f=g)}for(e=0;e<b;e+=4){var k=d[a[e]],m=a[e+1],g=f-a[e+3];switch(a[e+2]){case 0:k[m-1].x-=g;k[m].x-=g;1===m&&(k[k.length-1].x-=g);m===k.length-1&&(k[0].x-=g);break;case 1:k[m-1].x+=g;k[m].x+=g;1===m&&(k[k.length-1].x+=g);m===
k.length-1&&(k[0].x+=g);break;case 2:k[m-1].y-=g;k[m].y-=g;1===m&&(k[k.length-1].y-=g);m===k.length-1&&(k[0].y-=g);break;case 3:k[m-1].y+=g,k[m].y+=g,1===m&&(k[k.length-1].y+=g),m===k.length-1&&(k[0].y+=g)}}};return a}()})},"esri/views/2d/engine/webgl/definitions":function(){define(["require","exports"],function(u,a){Object.defineProperty(a,"__esModule",{value:!0});a.EXTRUDE_SCALE=64;a.PICTURE_FILL_COLOR=4294967295;a.TILE_SIZE=512;a.ANGLE_FACTOR_256=256/360;a.COLLISION_BUCKET_SIZE=128;a.COLLISION_MAX_ZOOM_DELTA=
4;a.COLLISION_EARLY_REJECT_BUCKET_SIZE=32})},"esri/views/2d/engine/webgl/GeometryUtils":function(){define(["require","exports"],function(u,a){function e(a,e){a%=e;return 0<=a?a:a+e}Object.defineProperty(a,"__esModule",{value:!0});a.C_INFINITY=Number.POSITIVE_INFINITY;a.C_PI=Math.PI;a.C_2PI=2*a.C_PI;a.C_PI_BY_2=a.C_PI/2;a.C_RAD_TO_256=128/a.C_PI;a.C_256_TO_RAD=a.C_PI/128;a.C_DEG_TO_256=256/360;a.C_DEG_TO_RAD=a.C_PI/180;a.C_SQRT2=1.414213562;a.C_SQRT2_INV=1/a.C_SQRT2;var m=1/Math.LN2;a.positiveMod=
e;a.radToByte=function(d){return e(d*a.C_RAD_TO_256,256)};a.degToByte=function(d){return e(d*a.C_DEG_TO_256,256)};a.log2=function(a){return Math.log(a)*m};a.sqr=function(a){return a*a};a.clamp=function(a,e,m){return Math.min(Math.max(a,e),m)};a.interpolate=function(a,e,m){return a*(1-m)+e*m};a.between=function(a,e,m){return a>=e&&a<=m||a>=m&&a<=e}})},"esri/views/vectorTiles/Feature":function(){define(["require","exports","../2d/engine/webgl/Geometry"],function(u,a,e){return function(){function a(a,
e){this.values={};var d=e.keys;for(e=e.values;a.next();)switch(a.tag()){case 1:this.id=a.getUInt64();break;case 2:for(var g=a.getMessage(),b=this.values;!g.empty();){var f=g.getUInt32(),c=g.getUInt32();b[d[f]]=e[c]}break;case 3:this.type=a.getUInt32();break;case 4:this._pbfGeometry=a.getMessage();break;default:a.skip()}}a.prototype.getGeometry=function(a){if(void 0!==this._geometry)return this._geometry;var d=this._pbfGeometry,m,g;a?a.reset(this.type):m=[];for(var b=1,f=0,c=0,n=0;!d.empty();)switch(0===
f&&(f=d.getUInt32(),b=f&7,f>>=3),f--,b){case 1:c+=d.getSInt32();n+=d.getSInt32();a?a.moveTo(c,n):(g&&m.push(g),g=[],g.push(new e.Point(c,n)));break;case 2:c+=d.getSInt32();n+=d.getSInt32();a?a.lineTo(c,n):g.push(new e.Point(c,n));break;case 7:a?a.close():g&&!g[0].equals(c,n)&&g.push(g[0].clone());break;default:throw Error("Invalid path operation");}a?a=a.result():(g&&m.push(g),a=m);return this._geometry=a};return a}()})},"esri/views/vectorTiles/SourceLayerData":function(){define(["require","exports"],
function(u,a){return function(){function a(e){this.extent=4096;this.keys=[];this.values=[];for(this._pbfLayer=e.clone();e.next();)switch(e.tag()){case 1:this.name=e.getString();break;case 3:this.keys.push(e.getString());break;case 4:this.values.push(a._parseValue(e.getMessage()));break;case 5:this.extent=e.getUInt32();break;default:e.skip()}}a.prototype.getData=function(){return this._pbfLayer};a._parseValue=function(a){for(;a.next();)switch(a.tag()){case 1:return a.getString();case 2:return a.getFloat();
case 3:return a.getDouble();case 4:return a.getInt64();case 5:return a.getUInt64();case 6:return a.getSInt64();case 7:return a.getBool();default:a.skip()}return null};return a}()})},"esri/views/vectorTiles/VertexMemoryBuffer":function(){define("require exports ../../core/tsSupport/extendsHelper ../../core/tsSupport/decorateHelper ./GeometryUtils ./MemoryBuffer".split(" "),function(u,a,e,m,d,k){Object.defineProperty(a,"__esModule",{value:!0});var q=new Float32Array(1),g=new Uint32Array(q.buffer);u=
function(a){function b(b){var c=a.call(this,b?20:12)||this;c._isDataDriven=b;return c}e(b,a);b.prototype.isDataDriven=function(){return this._isDataDriven};b.prototype.add=function(a,b,d,e,f,m,u,I){var c=this.array;a=k.i1616to32(a,b);c.push(a);a=k.i8888to32(Math.round(31*d),Math.round(31*e),Math.round(31*f),Math.round(31*m));c.push(a);a=k.i1616to32(u,0);c.push(a);if(this._isDataDriven){if(!I)throw Error("Expecting data driven values.");d=I.color;e=d[3]*I.opacity*255;c.push(k.i8888to32(d[0]*e,d[1]*
e,d[2]*e,e));q[0]=I.size;c.push(g[0])}};return b}(k);a.LineVertexBuffer=u;u=function(a){function b(b){var c=a.call(this,b?8:4)||this;c._isDataDriven=b;return c}e(b,a);b.prototype.isDataDriven=function(){return this._isDataDriven};b.prototype.add=function(a,b,d){var c=this.array;c.push(k.i1616to32(a,b));if(this._isDataDriven){if(!d)throw Error("Expecting data driven values.");a=d.color;d=a[3]*d.opacity*255;c.push(k.i8888to32(a[0]*d,a[1]*d,a[2]*d,d))}};return b}(k);a.FillVertexBuffer=u;u=function(a){function b(b){var c=
a.call(this,b?12:8)||this;c._isDataDriven=b;return c}e(b,a);b.prototype.isDataDriven=function(){return this._isDataDriven};b.prototype.add=function(a,b,d,e,f,g,m){var c=this.array,n=this.index;a=k.i1616to32(a,b);c.push(a);a=k.i8888to32(Math.round(15*d),Math.round(15*e),f,g);c.push(a);if(this._isDataDriven){if(!m)throw Error("Expecting data driven values.");d=m.color;m=d[3]*m.opacity*255;c.push(k.i8888to32(d[0]*m,d[1]*m,d[2]*m,m))}return n};return b}(k);a.OutlineVertexBuffer=u;u=function(a){function b(b){var c=
a.call(this,b?24:16)||this;c._isDataDriven=b;return c}e(b,a);b.prototype.isDataDriven=function(){return this._isDataDriven};b.prototype.add=function(a,b,e,f,m,p,u,I,F,B,A){var c=this.array;a=k.i1616to32(a,b);c.push(a);a=k.i1616to32(Math.round(8*e),Math.round(8*f));c.push(a);a=k.i8888to32(m/4,p/4,0,0);c.push(a);a=k.i8888to32(Math.ceil(10*B),d.radToByte(u),10*I,Math.min(10*F,255));c.push(a);if(this._isDataDriven){if(!A)throw Error("Expecting data driven values.");e=A.color;f=e[3]*A.opacity*255;c.push(k.i8888to32(e[0]*
f,e[1]*f,e[2]*f,f));q[0]=A.size;c.push(g[0])}};return b}(k);a.SymbolVertexBuffer=u;u=function(a){function b(){return a.call(this,16)||this}e(b,a);b.prototype.add=function(a,b,d,e,f,g,m,q,u,B,A){var c=this.array;a=k.i1616to32(2*a+d,2*b+e);c.push(a);m=g[3]*m*255;a=k.i8888to32(g[0]*m,g[1]*m,g[2]*m,m);c.push(a);g=B[3]*A*255;a=k.i8888to32(B[0]*g,B[1]*g,B[2]*g,g);c.push(a);a=k.i8888to32(Math.min(32*q,255),Math.min(4*u,255),Math.min(f,255),0);c.push(a)};return b}(k);a.CircleVertexBuffer=u})},"esri/views/vectorTiles/style/StyleRepository":function(){define(["require",
"exports","../../../core/has","./StyleLayer"],function(u,a,e,m){return function(){function a(d,e){this.styleJSON=d;this.version=parseFloat(d.version);this.sprite=e?e.spriteUrl:d.sprite;this.glyphs=e?e.glyphsUrl:d.glyphs;this.layers=(d.layers||[]).map(a._create);this._identifyRefLayers()}a.prototype._identifyRefLayers=function(){for(var a=[],d=[],e=0,b=0,f=this.layers;b<f.length;b++){var c=f[b];if(1===c.type){var n=c,m=c.sourceLayer,m=m+("|"+JSON.stringify(c.minzoom)),m=m+("|"+JSON.stringify(c.maxzoom)),
m=m+("|"+JSON.stringify(c.filter));if(n.hasDataDrivenFill||n.hasDataDrivenOutline)m+="|"+JSON.stringify(e);a.push({key:m,layer:c})}2===c.type&&(n=c,m=c.sourceLayer,m+="|"+JSON.stringify(c.minzoom),m+="|"+JSON.stringify(c.maxzoom),m+="|"+JSON.stringify(c.filter),m+="|"+JSON.stringify(c.layout&&c.layout["line-cap"]),m+="|"+JSON.stringify(c.layout&&c.layout["line-join"]),n.hasDataDrivenLine&&(m+="|"+JSON.stringify(e)),d.push({key:m,layer:c}));++e}this._assignRefLayers(a);this._assignRefLayers(d)};a.prototype._assignRefLayers=
function(a){a.sort(function(a,b){return a.key<b.key?-1:a.key>b.key?1:0});for(var d,e,b=a.length,f=0;f<b;f++){var c=a[f];if(c.key===d)c.layer.refLayerId=e;else if(d=c.key,e=c.layer.id,1===c.layer.type&&!c.layer.getPaintProperty("fill-outline-color"))for(var k=f+1;k<b;k++){var m=a[k];if(m.key===d){if(m.layer.getPaintProperty("fill-outline-color")){a[f]=m;a[k]=c;e=m.layer.id;break}}else break}}};a._create=function(a,d,e){d=1-1/(e.length+1)*(1+d);switch(a.type){case "background":return new m.BackgroundStyleLayer(0,
a,d);case "fill":return new m.FillStyleLayer(1,a,d);case "line":return new m.LineStyleLayer(2,a,d);case "symbol":return new m.SymbolStyleLayer(3,a,d);case "raster":throw Error("Unsupported vector tile raster layer");case "circle":return new m.CircleStyleLayer(4,a,d)}throw Error("Unknown vector tile layer");};return a}()})},"*noref":1}});
define("require exports dojo/Deferred ../../request ../../core/promiseUtils ../2d/tiling/enums ./WorkerTile ./style/StyleRepository".split(" "),function(u,a,e,m,d,k,q,g){return function(){function a(){this._tiles=new Map;this._spriteInfo={};this._glyphInfo={}}a.prototype.reset=function(){var a=new e;this._spriteInfo={};this._glyphInfo={};var b=this._tiles;b.forEach(function(a){return a.setObsolete()});b.clear();a.resolve();return a.promise};a.prototype.getLayers=function(){return this._layers};a.prototype.setLayers=
function(a){this._layers=(new g(a)).layers;return d.resolve({data:""})};a.prototype.getTile=function(a,b){var c=this,e=a.key,f=q.pool.acquire();f.initialize(a.key,a.refKey,this,a.rotation);var g=a.cacheTile;return m(a.url,{responseType:"array-buffer"}).then(function(a){return f.setDataAndParse(a.data,b).then(function(a){g&&f.status!==k.TileStatus.INVALID&&c._tiles.set(e,f);return a}).catch(function(a){f.setObsolete();q.pool.release(f);c._tiles["delete"](f.tileKey);return d.reject(a)})}).catch(function(a){f.setObsolete();
if(c._tiles.has(f.tileKey))c._tiles["delete"](f.tileKey);return d.reject(a)}).always(function(a){g||q.pool.release(f);return a})};a.prototype.update=function(a){var b=this._tiles.get(a.key);return b?b.updateSymbols(a.rotation):d.reject()};a.prototype.destructTileData=function(a){this._tiles.has(a)&&(q.pool.release(this._tiles.get(a)),this._tiles["delete"](a));return d.resolve()};a.prototype.fetchSprites=function(a,b){var c=[],e=this._spriteInfo;a.forEach(function(a){void 0===e[a]&&c.push(a)});return 0===
c.length?d.resolve():b.invoke("getSprites",c).then(function(a){for(var b in a)e[b]=a[b]})};a.prototype.getSpriteItems=function(){return this._spriteInfo};a.prototype.fetchGlyphs=function(a,b,e,g){var c=[],f=this._glyphInfo[b];f?e.forEach(function(a){f[a]||c.push(a)}):(f=this._glyphInfo[b]=[],e.forEach(function(a){return c.push(a)}));return 0===c.length?d.resolve():g.invoke("getGlyphs",{tileID:a,font:b,codePoints:c}).then(function(a){for(var b in a)f[b]=a[b]})};a.prototype.getGlyphItems=function(a){return this._glyphInfo[a]};
return a}()});
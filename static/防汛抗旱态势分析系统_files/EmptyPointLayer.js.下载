//封装空的点模块
define([
  "esri/layers/FeatureLayer",
  "esri/layers/support/LabelClass",
  "esri/geometry/Point",
],
  function (FeatureLayer, LabelClass, Point) {
    /**
     * name：label需要显示的字段 fieldId：需要显示的字段，featureLayerID
     */
    return function (name, fieldId, featureLayerID) {
      var minScale = 250000000; //label在视图中可见的最小比例
      var symbol3D = {
        type: "label-3d", // autocasts as new LabelSymbol3D()
        symbolLayers: [{
          type: "text", // autocasts as new TextSymbol3DLayer()
          material: {
            color: "black"
          },
          halo: {
            size: 1,
            color: "white"
          },
          size: 10
        }]
      }
      var symbol2D = {
        type: "text",  // autocasts as new TextSymbol()
        color: "black",
        haloSize: 1,
        haloColor: "white",
        size: 10
      }
      var statesLabelClass = new LabelClass({
        labelExpressionInfo: {
          expression: "$feature." + name
        },
        labelPlacement: "above-center",
        minScale: minScale,
        symbol: dimension === "3D" ? symbol3D : symbol2D
      });
      var pointLayer = new FeatureLayer({
        id: featureLayerID,
        objectIdField: "ObjectID",
        source: [{
          geometry: new Point(),
          attributes: {
            ObjectID: "911",
          }
        }],
        // fields: [{
        //   fieldName: name,
        //   label: name,
        //   visible: true
        // }, {
        //   fieldName: fieldId,
        //   label: fieldId,
        //   visible: true
        // }],
        renderer: {
          type: "class-breaks", // autocasts as new ClassBreaksRenderer()
          field: fieldId,
          classBreakInfos: []
        },
        labelingInfo: [statesLabelClass]
      });
      return pointLayer;
    }
  }
)
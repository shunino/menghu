var WindowManager = function () {
}
WindowManager.windows = new MapObj();
WindowManager.windowMaxZIndex = 0;
WindowManager.newWindow = false;

$(window).resize(function () {
  winWidth = $("body").width();
  winHeight = $('body').height();
  //所有图表改变大小
  var keys = WindowManager.windows.keySet();
  for (var i = 0; i < keys.length; i++)
    WindowManager.windows.get(keys[i]).resize();
});
WindowManager.getWinMaxZIndex = function () {
  var winIds = WindowManager.windows.keySet();
  for (var i = 0; i < winIds.length; i++) {
    var z = WindowManager.windows.get(winIds[i]).getZIndex();
    if (z > WindowManager.windowMaxZIndex)
      WindowManager.windowMaxZIndex = z;
  }
  return WindowManager.windowMaxZIndex;
}
WindowManager.setWinMaxZIndex = function (z) {
  WindowManager.windowMaxZIndex = z;
}

WindowManager.setNewWindow = function (value) {
  WindowManager.newWindow = value;
}

WindowManager.getNewWindow = function () {
  return WindowManager.newWindow;
}

WindowManager.isExist = function (id) {
  var exist = false;
  var winIds = WindowManager.windows.keySet();
  for (var i = 0; i < winIds.length; i++) {
    var _id = WindowManager.windows.get(winIds[i]).id;
    if (_id != id)
      continue;
    exist = true;
    break;
  }
  return exist;
}

/**
 * 窗口剧中
 * @param _win 窗体dom对象
 */
WindowManager.windowToCenter = function (_win) {
  if (typeof(_win) == "object") {
    _win.css("top", parseInt($('body').height() - _win.height()) / 2 + 'px');
    _win.css("left", parseInt($('body').width() - _win.width()) / 2 + 'px');
  }
}
/**
 * 隐藏所有MyWindow对象创建的窗口
 */
WindowManager.hideMyWindowAll = function () {
  var keys = WindowManager.windows.keySet();
  for (var i = 0; i < keys.length; i++)
    WindowManager.windows.get(keys[i]).hide();
}
WindowManager.getMyWindowById = function (_id) {
  return WindowManager.windows.get(_id);
}
WindowManager.hideMyWindowById = function (_id) {
  if (_id)
    WindowManager.windows.get(_id).hide();
}
WindowManager.closeMyWindowById = function (_id) {
  if (_id)
    WindowManager.windows.get(_id).close();
}
/**
 * 关闭对象属性窗口
 */
WindowManager.closeInfoBox = function () {
  $('#point-data').hide(500);
}

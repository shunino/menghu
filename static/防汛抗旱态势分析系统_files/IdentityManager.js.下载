// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.9/esri/copyright.txt for details.
//>>built
require({cache:{"esri/identity/IdentityManagerDialog":function(){define("dojo/_base/kernel ../core/declare dojo/Deferred dojo/dom-attr dojo/keys dijit/registry dijit/Dialog ../kernel ../core/lang ../core/Error ../core/domUtils ./Credential ./IdentityManagerBase dojo/i18n!./nls/identity dojo/query dijit/form/Button dijit/form/Form dijit/form/ValidationTextBox".split(" "),function(n,h,l,m,d,f,k,c,b,a,e,q,t,w){return h([t],{declaredClass:"esri.identity.IdentityManager",constructor:function(a){b.mixin(this,
a)},_dialogContent:"\x3cdiv data-dojo-type\x3d'dijit.form.Form' data-dojo-props\x3d'\"class\":\"esriIdForm\"'\x3e\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{info}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3ctable style\x3d'width: 100%;'\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblUser}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"text\", \"class\":\"esriIdUser\", required:true, trim:true, style:\"width: 100%;\", autocapitalize:\"none\", autocorrect:\"off\", spellcheck:false' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3ctr\x3e\x3ctd\x3e\x3clabel\x3e{lblPwd}\x3cbr/\x3e\x3cinput data-dojo-type\x3d'dijit.form.ValidationTextBox' data-dojo-props\x3d'type:\"password\", \"class\":\"esriIdPwd\", required:true, style:\"width: 100%;\"' /\x3e\x3c/label\x3e\x3c/td\x3e\x3c/tr\x3e\x3c/table\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e\x3c/div\x3e",
signIn:function(b,c,d){this._nls||(this._nls=w);this._loginDialog||(this._loginDialog=this.dialog=this._createLoginDialog(),this.emit("dialog-create"));var q=this._loginDialog,k=d&&d.error,p=d&&d.token,f=new l(function(){q.onCancel()});if(q.open)return b=new a("identity-manager:busy","BUSY"),f.reject(b),f.promise;e.hide(q.errMsg_);k&&k.details&&403==k.details.httpStatus&&p&&(m.set(q.errMsg_,"innerHTML",this._nls.forbidden),e.show(q.errMsg_));q.dfd_=f;q.serverInfo_=c;q.resUrl_=b;q.admin_=d&&d.isAdmin;
m.set(q.resLink_,{title:b,innerHTML:"("+(this.getResourceName(b)||this._nls.lblItem)+")"});m.set(q.serverLink_,{title:c.server,innerHTML:(-1!==c.server.toLowerCase().indexOf("arcgis.com")?"ArcGIS Online":c.server)+" "});q.txtPwd_.set("value","");q.show();return f.promise},_createLoginDialog:function(){var w=this._nls,p=b.substitute(w,this._dialogContent),p=b.substitute({resource:"\x3cspan class\x3d'resLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e",server:"\x3cspan class\x3d'serverLink' style\x3d'word-wrap: break-word;'\x3e\x3c/span\x3e"},
p),x=new k({title:w.title,content:p,"class":" esri-widget esriSignInDialog esriIdentityDialog",style:"width: 18em;",esriIdMgr_:this,onShow:function(){this.domNode.classList.add("esriIdentityDialog--visible")},onHide:function(){this.domNode.classList.remove("esriIdentityDialog--visible")},keypressed_:function(a){a.charOrCode===d.ENTER&&this.execute_()},execute_:function(){var a=this.txtUser_.get("value"),b=this.txtPwd_.get("value"),d=this.dfd_,p=this;if(this.form_.validate()&&a&&b){this.btnSubmit_.set("label",
w.lblSigning);var f=c.id.findCredential(p.resUrl_,a),x=function(b){p.btnSubmit_.set("label",w.lblOk);p.btnSubmit_.set("disabled",!1);e.hide(p.errMsg_);p.hide();k._DialogLevelManager.hide(p);var c=p.serverInfo_;p.dfd_=p.serverInfo_=p.generateDfd_=p.resUrl_=null;var u,g,r=f,E;b&&(u=b.token,g=null!=b.expires?Number(b.expires):null,E=!!b.ssl,r?(r.userId=a,r.token=u,r.expires=g,r.validity=b.validity,r.ssl=E,r.creationTime=(new Date).getTime()):r=new q({userId:a,server:c.server,token:u,expires:g,ssl:E,
isAdmin:p.admin_,validity:b.validity}));d.resolve(r)};f&&!f._enqueued?x():(p.btnSubmit_.set("disabled",!0),p.generateDfd_=c.id.generateToken(this.serverInfo_,{username:a,password:b},{isAdmin:this.admin_}).then(x).then(null,function(a){p.btnSubmit_.set("disabled",!1);p.generateDfd_=null;p.btnSubmit_.set("label",w.lblOk);m.set(p.errMsg_,"innerHTML",a&&a.details&&a.details.httpStatus?w.invalidUser:w.noAuthService);e.show(p.errMsg_)}))}},cancel_:function(){x.generateDfd_&&x.generateDfd_.cancel();var b=
x.dfd_,c=x.resUrl_,p=x.serverInfo_;x.btnSubmit_.set("disabled",!1);x.dfd_=x.serverInfo_=x.generateDfd_=x.resUrl_=null;e.hide(x.errMsg_);k._DialogLevelManager.hide(x);x.esriIdMgr_.emit("dialog-cancel",{resourceUrl:c,serverInfo:p});c=new a("identity-manager:user-aborted","ABORTED");b.reject(c)}}),p=x.domNode;x.form_=f.byNode(n.query(".esriIdForm",p)[0]);x.txtUser_=f.byNode(n.query(".esriIdUser",p)[0]);x.txtPwd_=f.byNode(n.query(".esriIdPwd",p)[0]);x.btnSubmit_=f.byNode(n.query(".esriIdSubmit",p)[0]);
x.btnCancel_=f.byNode(n.query(".esriIdCancel",p)[0]);x.resLink_=n.query(".resLink",p)[0];x.serverLink_=n.query(".serverLink",p)[0];x.errMsg_=n.query(".esriErrorMsg",p)[0];x.connect(x.txtUser_,"onKeyPress",x.keypressed_);x.connect(x.txtPwd_,"onKeyPress",x.keypressed_);x.connect(x.btnSubmit_,"onClick",x.execute_);x.connect(x.btnCancel_,"onClick",x.onCancel);x.connect(x,"onCancel",x.cancel_);return x}})})},"dijit/registry":function(){define(["dojo/_base/array","dojo/_base/window","./main"],function(n,
h,l){var m={},d={},f={length:0,add:function(k){if(d[k.id])throw Error("Tried to register widget with id\x3d\x3d"+k.id+" but that id is already registered");d[k.id]=k;this.length++},remove:function(k){d[k]&&(delete d[k],this.length--)},byId:function(k){return"string"==typeof k?d[k]:k},byNode:function(k){return d[k.getAttribute("widgetId")]},toArray:function(){var k=[],c;for(c in d)k.push(d[c]);return k},getUniqueId:function(k){var c;do c=k+"_"+(k in m?++m[k]:m[k]=0);while(d[c]);return"dijit"==l._scopeName?
c:l._scopeName+"_"+c},findWidgets:function(k,c){function b(e){for(e=e.firstChild;e;e=e.nextSibling)if(1==e.nodeType){var q=e.getAttribute("widgetId");q?(q=d[q])&&a.push(q):e!==c&&b(e)}}var a=[];b(k);return a},_destroyAll:function(){l._curFocus=null;l._prevFocus=null;l._activeStack=[];n.forEach(f.findWidgets(h.body()),function(d){d._destroyed||(d.destroyRecursive?d.destroyRecursive():d.destroy&&d.destroy())})},getEnclosingWidget:function(f){for(;f;){var c=1==f.nodeType&&f.getAttribute("widgetId");
if(c)return d[c];f=f.parentNode}return null},_hash:d};return l.registry=f})},"dijit/main":function(){define(["dojo/_base/kernel"],function(n){return n.dijit})},"dijit/Dialog":function(){define("require dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/fx dojo/i18n dojo/keys dojo/_base/lang dojo/on dojo/ready dojo/sniff dojo/touch dojo/window dojo/dnd/Moveable dojo/dnd/TimedMoveable ./focus ./_base/manager ./_Widget ./_TemplatedMixin ./_CssStateMixin ./form/_FormMixin ./_DialogMixin ./DialogUnderlay ./layout/ContentPane ./layout/utils dojo/text!./templates/Dialog.html ./a11yclick dojo/i18n!./nls/common".split(" "),
function(n,h,l,m,d,f,k,c,b,a,e,q,t,w,z,p,x,F,y,v,A,u,B,G,H,D,g,r,E,M,O){function I(){}var J=new d;J.resolve(!0);u=m("dijit._DialogBase"+(p("dojo-bidi")?"_NoBidi":""),[G,D,g,H],{templateString:O,baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},_setTitleAttr:{node:"titleNode",type:"innerHTML"},open:!1,duration:u.defaultDuration,refocus:!0,autofocus:!0,_firstFocusItem:null,_lastFocusItem:null,draggable:!0,_setDraggableAttr:function(g){this._set("draggable",g)},maxRatio:.9,
closable:!0,_setClosableAttr:function(g){this.closeButtonNode.style.display=g?"":"none";this._set("closable",g)},postMixInProperties:function(){var g=e.getLocalization("dijit","common");t.mixin(this,g);this.inherited(arguments)},postCreate:function(){b.set(this.domNode,{display:"none",position:"absolute"});this.ownerDocumentBody.appendChild(this.domNode);this.inherited(arguments);l.after(this,"onExecute",t.hitch(this,"hide"),!0);l.after(this,"onCancel",t.hitch(this,"hide"),!0);w(this.closeButtonNode,
x.press,function(g){g.stopPropagation()});this._modalconnects=[]},onLoad:function(){this.resize();this._position();this.autofocus&&N.isTop(this)&&(this._getFocusItems(),A.focus(this._firstFocusItem));this.inherited(arguments)},focus:function(){this._getFocusItems();A.focus(this._firstFocusItem)},_endDrag:function(){var g=c.position(this.domNode),a=F.getBox(this.ownerDocument);g.y=Math.min(Math.max(g.y,0),a.h-g.h);g.x=Math.min(Math.max(g.x,0),a.w-g.w);this._relativePosition=g;this._position()},_setup:function(){var g=
this.domNode;this.titleBar&&this.draggable?(this._moveable=new (6==p("ie")?v:y)(g,{handle:this.titleBar}),l.after(this._moveable,"onMoveStop",t.hitch(this,"_endDrag"),!0)):k.add(g,"dijitDialogFixed");this.underlayAttrs={dialogId:this.id,"class":h.map(this["class"].split(/\s/),function(g){return g+"_underlay"}).join(" "),_onKeyDown:t.hitch(this,"_onKey"),ownerDocument:this.ownerDocument}},_size:function(){this.resize()},_position:function(){if(!k.contains(this.ownerDocumentBody,"dojoMove")){var g=
this.domNode,a=F.getBox(this.ownerDocument),r=this._relativePosition,e=c.position(g);b.set(g,{left:Math.floor(a.l+(r?Math.min(r.x,a.w-e.w):(a.w-e.w)/2))+"px",top:Math.floor(a.t+(r?Math.min(r.y,a.h-e.h):(a.h-e.h)/2))+"px"})}},_onKey:function(g){if(g.keyCode==q.TAB){this._getFocusItems();var a=g.target;this._firstFocusItem==this._lastFocusItem?(g.stopPropagation(),g.preventDefault()):a==this._firstFocusItem&&g.shiftKey?(A.focus(this._lastFocusItem),g.stopPropagation(),g.preventDefault()):a!=this._lastFocusItem||
g.shiftKey||(A.focus(this._firstFocusItem),g.stopPropagation(),g.preventDefault())}else this.closable&&g.keyCode==q.ESCAPE&&(this.onCancel(),g.stopPropagation(),g.preventDefault())},show:function(){if(this.open)return J.promise;this._started||this.startup();this._alreadyInitialized||(this._setup(),this._alreadyInitialized=!0);this._fadeOutDeferred&&(this._fadeOutDeferred.cancel(),N.hide(this));var g=F.get(this.ownerDocument);this._modalconnects.push(w(g,"scroll",t.hitch(this,"resize",null)));this._modalconnects.push(w(this.domNode,
"keydown",t.hitch(this,"_onKey")));b.set(this.domNode,{opacity:0,display:""});this._set("open",!0);this._onShow();this.resize();this._position();var r;this._fadeInDeferred=new d(t.hitch(this,function(){r.stop();delete this._fadeInDeferred}));this._fadeInDeferred.then(void 0,I);g=this._fadeInDeferred.promise;r=a.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:t.hitch(this,function(){N.show(this,this.underlayAttrs)}),onEnd:t.hitch(this,function(){this.autofocus&&N.isTop(this)&&(this._getFocusItems(),
A.focus(this._firstFocusItem));this._fadeInDeferred.resolve(!0);delete this._fadeInDeferred})}).play();return g},hide:function(){if(!this._alreadyInitialized||!this.open)return J.promise;this._fadeInDeferred&&this._fadeInDeferred.cancel();var g;this._fadeOutDeferred=new d(t.hitch(this,function(){g.stop();delete this._fadeOutDeferred}));this._fadeOutDeferred.then(void 0,I);this._fadeOutDeferred.then(t.hitch(this,"onHide"));var r=this._fadeOutDeferred.promise;g=a.fadeOut({node:this.domNode,duration:this.duration,
onEnd:t.hitch(this,function(){this.domNode.style.display="none";N.hide(this);this._fadeOutDeferred.resolve(!0);delete this._fadeOutDeferred})}).play();this._scrollConnected&&(this._scrollConnected=!1);for(var b;b=this._modalconnects.pop();)b.remove();this._relativePosition&&delete this._relativePosition;this._set("open",!1);return r},resize:function(g){if("none"!=this.domNode.style.display){this._checkIfSingleChild();if(!g){this._shrunk&&(this._singleChild&&"undefined"!=typeof this._singleChildOriginalStyle&&
(this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle,delete this._singleChildOriginalStyle),h.forEach([this.domNode,this.containerNode,this.titleBar,this.actionBarNode],function(g){g&&b.set(g,{position:"static",width:"auto",height:"auto"})}),this.domNode.style.position="absolute");var a=F.getBox(this.ownerDocument);a.w*=this.maxRatio;a.h*=this.maxRatio;var r=c.position(this.domNode);r.w>=a.w||r.h>=a.h?(g={w:Math.min(r.w,a.w),h:Math.min(r.h,a.h)},this._shrunk=!0):this._shrunk=!1}if(g){c.setMarginBox(this.domNode,
g);a=[];this.titleBar&&a.push({domNode:this.titleBar,region:"top"});this.actionBarNode&&a.push({domNode:this.actionBarNode,region:"bottom"});r={domNode:this.containerNode,region:"center"};a.push(r);var e=M.marginBox2contentBox(this.domNode,g);M.layoutChildren(this.domNode,e,a);this._singleChild?(a=M.marginBox2contentBox(this.containerNode,r),this._singleChild.resize({w:a.w,h:a.h})):(this.containerNode.style.overflow="auto",this._layoutChildren())}else this._layoutChildren();p("touch")||g||this._position()}},
_layoutChildren:function(){h.forEach(this.getChildren(),function(g){g.resize&&g.resize()})},destroy:function(){this._fadeInDeferred&&this._fadeInDeferred.cancel();this._fadeOutDeferred&&this._fadeOutDeferred.cancel();this._moveable&&this._moveable.destroy();for(var g;g=this._modalconnects.pop();)g.remove();N.hide(this);this.inherited(arguments)}});p("dojo-bidi")&&(u=m("dijit._DialogBase",u,{_setTitleAttr:function(g){this._set("title",g);this.titleNode.innerHTML=g;this.applyTextDir(this.titleNode)},
_setTextDirAttr:function(g){this._created&&this.textDir!=g&&(this._set("textDir",g),this.set("title",this.title))}}));var L=m("dijit.Dialog",[E,u],{});L._DialogBase=u;var N=L._DialogLevelManager={_beginZIndex:950,show:function(g,a){C[C.length-1].focus=A.curNode;var e=C[C.length-1].dialog?C[C.length-1].zIndex+2:L._DialogLevelManager._beginZIndex;b.set(g.domNode,"zIndex",e);r.show(a,e-1);C.push({dialog:g,underlayAttrs:a,zIndex:e})},hide:function(g){if(C[C.length-1].dialog==g){C.pop();var a=C[C.length-
1];1==C.length?r.hide():r.show(a.underlayAttrs,a.zIndex-1);if(g.refocus&&(g=a.focus,!a.dialog||g&&f.isDescendant(g,a.dialog.domNode)||(a.dialog._getFocusItems(),g=a.dialog._firstFocusItem),g))try{g.focus()}catch(K){}}else a=h.indexOf(h.map(C,function(g){return g.dialog}),g),-1!=a&&C.splice(a,1)},isTop:function(g){return C[C.length-1].dialog==g}},C=L._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];A.watch("curNode",function(g,a,r){g=C[C.length-1].dialog;if(r&&g&&!g._fadeOutDeferred&&r.ownerDocument==
g.ownerDocument){do if(r==g.domNode||k.contains(r,"dijitPopup"))return;while(r=r.parentNode);g.focus()}});p("dijit-legacy-requires")&&z(0,function(){n(["dijit/TooltipDialog"])});return L})},"dojo/touch":function(){define("./_base/kernel ./aspect ./dom ./dom-class ./_base/lang ./on ./has ./mouse ./domReady ./_base/window".split(" "),function(n,h,l,m,d,f,k,c,b,a){function e(a,r,b){return z&&b?function(g,a){return f(g,b,a)}:x?function(b,e){var c=f(b,r,function(a){e.call(this,a);g=(new Date).getTime()}),
d=f(b,a,function(a){(!g||(new Date).getTime()>g+1E3)&&e.call(this,a)});return{remove:function(){c.remove();d.remove()}}}:function(g,r){return f(g,a,r)}}function q(g){do if(void 0!==g.dojoClick)return g;while(g=g.parentNode)}function t(g,r,b){if(!c.isRight(g)){var e=q(g.target);if(y=!g.target.disabled&&e&&e.dojoClick)if(A=(v="useTarget"==y)?e:g.target,v&&g.preventDefault(),u=g.changedTouches?g.changedTouches[0].pageX-a.global.pageXOffset:g.clientX,B=g.changedTouches?g.changedTouches[0].pageY-a.global.pageYOffset:
g.clientY,G=("object"==typeof y?y.x:"number"==typeof y?y:0)||4,H=("object"==typeof y?y.y:"number"==typeof y?y:0)||4,!F){g=function(g){a.doc.addEventListener(g,function(a){var r=a.target;y&&!a._dojo_click&&(new Date).getTime()<=D+1E3&&("INPUT"!=r.tagName||!m.contains(r,"dijitOffScreen"))&&(a.stopPropagation(),a.stopImmediatePropagation&&a.stopImmediatePropagation(),"click"==g&&("INPUT"!=r.tagName||"radio"==r.type&&(m.contains(r,"dijitCheckBoxInput")||m.contains(r,"mblRadioButton"))||"checkbox"==r.type&&
(m.contains(r,"dijitCheckBoxInput")||m.contains(r,"mblCheckBox")))&&"TEXTAREA"!=r.tagName&&"AUDIO"!=r.tagName&&"VIDEO"!=r.tagName&&a.preventDefault())},!0)};var d=function(g){y=v?l.isDescendant(a.doc.elementFromPoint(g.changedTouches?g.changedTouches[0].pageX-a.global.pageXOffset:g.clientX,g.changedTouches?g.changedTouches[0].pageY-a.global.pageYOffset:g.clientY),A):y&&(g.changedTouches?g.changedTouches[0].target:g.target)==A&&Math.abs((g.changedTouches?g.changedTouches[0].pageX-a.global.pageXOffset:
g.clientX)-u)<=G&&Math.abs((g.changedTouches?g.changedTouches[0].pageY-a.global.pageYOffset:g.clientY)-B)<=H};F=!0;a.doc.addEventListener(r,function(g){c.isRight(g)||(d(g),v&&g.preventDefault())},!0);a.doc.addEventListener(b,function(g){if(!c.isRight(g)&&(d(g),y)){var a=function(a){var r=document.createEvent("MouseEvents");r._dojo_click=!0;r.initMouseEvent(a,!0,!0,g.view,g.detail,b.screenX,b.screenY,b.clientX,b.clientY,g.ctrlKey,g.altKey,g.shiftKey,g.metaKey,0,null);return r};D=(new Date).getTime();
var r=v?A:g.target;"LABEL"===r.tagName&&(r=l.byId(r.getAttribute("for"))||r);var b=g.changedTouches?g.changedTouches[0]:g,e=a("mousedown"),p=a("mouseup"),q=a("click");setTimeout(function(){f.emit(r,"mousedown",e);f.emit(r,"mouseup",p);f.emit(r,"click",q);D=(new Date).getTime()},0)}},!0);g("click");g("mousedown");g("mouseup")}}}var w=5>k("ios"),z=k("pointer-events")||0,p=function(){var g={},a;for(a in{down:1,move:1,up:1,cancel:1,over:1,out:1})g[a]="pointer"+a;return g}(),x=k("touch-events"),F,y,v=
!1,A,u,B,G,H,D,g,r;k("touch")&&(z?b(function(){a.doc.addEventListener(p.down,function(g){t(g,p.move,p.up)},!0)}):b(function(){function b(g){var a=d.delegate(g,{bubbles:!0});6<=k("ios")&&(a.touches=g.touches,a.altKey=g.altKey,a.changedTouches=g.changedTouches,a.ctrlKey=g.ctrlKey,a.metaKey=g.metaKey,a.shiftKey=g.shiftKey,a.targetTouches=g.targetTouches);return a}r=a.body();a.doc.addEventListener("touchstart",function(a){g=(new Date).getTime();var b=r;r=a.target;f.emit(b,"dojotouchout",{relatedTarget:r,
bubbles:!0});f.emit(r,"dojotouchover",{relatedTarget:b,bubbles:!0});t(a,"touchmove","touchend")},!0);f(a.doc,"touchmove",function(e){g=(new Date).getTime();var c=a.doc.elementFromPoint(e.pageX-(w?0:a.global.pageXOffset),e.pageY-(w?0:a.global.pageYOffset));c&&(r!==c&&(f.emit(r,"dojotouchout",{relatedTarget:c,bubbles:!0}),f.emit(c,"dojotouchover",{relatedTarget:r,bubbles:!0}),r=c),f.emit(c,"dojotouchmove",b(e))||e.preventDefault())});f(a.doc,"touchend",function(r){g=(new Date).getTime();var e=a.doc.elementFromPoint(r.pageX-
(w?0:a.global.pageXOffset),r.pageY-(w?0:a.global.pageYOffset))||a.body();f.emit(e,"dojotouchend",b(r))})}));h={press:e("mousedown","touchstart",p.down),move:e("mousemove","dojotouchmove",p.move),release:e("mouseup","dojotouchend",p.up),cancel:e(c.leave,"touchcancel",z?p.cancel:null),over:e("mouseover","dojotouchover",p.over),out:e("mouseout","dojotouchout",p.out),enter:c._eventHandler(e("mouseover","dojotouchover",p.over)),leave:c._eventHandler(e("mouseout","dojotouchout",p.out))};return n.touch=
h})},"dojo/window":function(){define("./_base/lang ./sniff ./_base/window ./dom ./dom-geometry ./dom-style ./dom-construct".split(" "),function(n,h,l,m,d,f,k){h.add("rtl-adjust-position-for-verticalScrollBar",function(b,a){b=l.body(a);a=k.create("div",{style:{overflow:"scroll",overflowX:"visible",direction:"rtl",visibility:"hidden",position:"absolute",left:"0",top:"0",width:"64px",height:"64px"}},b,"last");var e=k.create("div",{style:{overflow:"hidden",direction:"ltr"}},a,"last"),c=0!=d.position(e).x;
a.removeChild(e);b.removeChild(a);return c});h.add("position-fixed-support",function(b,a){b=l.body(a);a=k.create("span",{style:{visibility:"hidden",position:"fixed",left:"1px",top:"1px"}},b,"last");var e=k.create("span",{style:{position:"fixed",left:"0",top:"0"}},a,"last"),c=d.position(e).x!=d.position(a).x;a.removeChild(e);b.removeChild(a);return c});var c={getBox:function(b){b=b||l.doc;var a="BackCompat"==b.compatMode?l.body(b):b.documentElement,e=d.docScroll(b);if(h("touch")){var q=c.get(b);b=
q.innerWidth||a.clientWidth;a=q.innerHeight||a.clientHeight}else b=a.clientWidth,a=a.clientHeight;return{l:e.x,t:e.y,w:b,h:a}},get:function(b){if(h("ie")&&c!==document.parentWindow){b.parentWindow.execScript("document._parentWindow \x3d window;","Javascript");var a=b._parentWindow;b._parentWindow=null;return a}return b.parentWindow||b.defaultView},scrollIntoView:function(b,a){try{b=m.byId(b);var e=b.ownerDocument||l.doc,c=l.body(e),k=e.documentElement||c.parentNode,w=h("ie")||h("trident"),z=h("webkit");
if(b!=c&&b!=k)if(!(h("mozilla")||w||z||h("opera")||h("trident")||h("edge"))&&"scrollIntoView"in b)b.scrollIntoView(!1);else{var p="BackCompat"==e.compatMode,x=Math.min(c.clientWidth||k.clientWidth,k.clientWidth||c.clientWidth),n=Math.min(c.clientHeight||k.clientHeight,k.clientHeight||c.clientHeight),e=z||p?c:k,y=a||d.position(b),v=b.parentNode;a=function(g){return 6>=w||7==w&&p?!1:h("position-fixed-support")&&"fixed"==f.get(g,"position").toLowerCase()};var A=this,z=function(g,a,r){"BODY"==g.tagName||
"HTML"==g.tagName?A.get(g.ownerDocument).scrollBy(a,r):(a&&(g.scrollLeft+=a),r&&(g.scrollTop+=r))};if(!a(b))for(;v;){v==c&&(v=e);var u=d.position(v),B=a(v),G="rtl"==f.getComputedStyle(v).direction.toLowerCase();if(v==e)u.w=x,u.h=n,e==k&&(w||h("trident"))&&G&&(u.x+=e.offsetWidth-u.w),u.x=0,u.y=0;else{var H=d.getPadBorderExtents(v);u.w-=H.w;u.h-=H.h;u.x+=H.l;u.y+=H.t;var D=v.clientWidth,g=u.w-D;0<D&&0<g&&(G&&h("rtl-adjust-position-for-verticalScrollBar")&&(u.x+=g),u.w=D);D=v.clientHeight;g=u.h-D;0<
D&&0<g&&(u.h=D)}B&&(0>u.y&&(u.h+=u.y,u.y=0),0>u.x&&(u.w+=u.x,u.x=0),u.y+u.h>n&&(u.h=n-u.y),u.x+u.w>x&&(u.w=x-u.x));var r=y.x-u.x,E=y.y-u.y,M=r+y.w-u.w,O=E+y.h-u.h,I,J;0<M*r&&(v.scrollLeft||v==e||v.scrollWidth>v.offsetHeight)&&(I=Math[0>r?"max":"min"](r,M),G&&(8==w&&!p||5<=h("trident"))&&(I=-I),J=v.scrollLeft,z(v,I,0),I=v.scrollLeft-J,y.x-=I);0<O*E&&(v.scrollTop||v==e||v.scrollHeight>v.offsetHeight)&&(I=Math.ceil(Math[0>E?"max":"min"](E,O)),J=v.scrollTop,z(v,0,I),I=v.scrollTop-J,y.y-=I);v=v!=e&&!B&&
v.parentNode}}}catch(L){console.error("scrollIntoView: "+L),b.scrollIntoView(!1)}}};n.setObject("dojo.window",c);return c})},"dojo/dnd/Moveable":function(){define("../_base/array ../_base/declare ../_base/lang ../dom ../dom-class ../Evented ../has ../on ../topic ../touch ./common ./Mover ../_base/window".split(" "),function(n,h,l,m,d,f,k,c,b,a,e,q,t){var w,z=function(){},z=function(a,b){"touchAction"in document.body.style?w="touchAction":"msTouchAction"in document.body.style&&(w="msTouchAction");
z=function(a,b){a.style[w]=b};z(a,b)};return h("dojo.dnd.Moveable",[f],{handle:"",delay:0,skip:!1,constructor:function(b,e){this.node=m.byId(b);z(this.node,"none");e||(e={});this.handle=e.handle?m.byId(e.handle):null;this.handle||(this.handle=this.node);this.delay=0<e.delay?e.delay:0;this.skip=e.skip;this.mover=e.mover?e.mover:q;this.events=[c(this.handle,a.press,l.hitch(this,"onMouseDown")),c(this.handle,"dragstart",l.hitch(this,"onSelectStart")),c(this.handle,"selectstart",l.hitch(this,"onSelectStart"))]},
markupFactory:function(a,b,e){return new e(b,a)},destroy:function(){n.forEach(this.events,function(a){a.remove()});z(this.node,"");this.events=this.node=this.handle=null},onMouseDown:function(b){if(!this.skip||!e.isFormElement(b)){if(this.delay)this.events.push(c(this.handle,a.move,l.hitch(this,"onMouseMove")),c(this.handle.ownerDocument,a.release,l.hitch(this,"onMouseUp"))),this._lastX=b.pageX,this._lastY=b.pageY;else this.onDragDetected(b);b.stopPropagation();b.preventDefault()}},onMouseMove:function(a){if(Math.abs(a.pageX-
this._lastX)>this.delay||Math.abs(a.pageY-this._lastY)>this.delay)this.onMouseUp(a),this.onDragDetected(a);a.stopPropagation();a.preventDefault()},onMouseUp:function(a){for(var b=0;2>b;++b)this.events.pop().remove();a.stopPropagation();a.preventDefault()},onSelectStart:function(a){this.skip&&e.isFormElement(a)||(a.stopPropagation(),a.preventDefault())},onDragDetected:function(a){new this.mover(this.node,a,this)},onMoveStart:function(a){b.publish("/dnd/move/start",a);d.add(t.body(),"dojoMove");d.add(this.node,
"dojoMoveItem")},onMoveStop:function(a){b.publish("/dnd/move/stop",a);d.remove(t.body(),"dojoMove");d.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(a,b){this.onMoving(a,b);var e=a.node.style;e.left=b.l+"px";e.top=b.t+"px";this.onMoved(a,b)},onMoving:function(){},onMoved:function(){}})})},"dojo/dnd/common":function(){define(["../sniff","../_base/kernel","../_base/lang","../dom"],function(n,h,l,m){var d=l.getObject("dojo.dnd",!0);d.getCopyKeyState=function(d){return d[n("mac")?
"metaKey":"ctrlKey"]};d._uniqueId=0;d.getUniqueId=function(){var f;do f=h._scopeName+"Unique"+ ++d._uniqueId;while(m.byId(f));return f};d._empty={};d.isFormElement=function(d){d=d.target;3==d.nodeType&&(d=d.parentNode);return 0<=" a button textarea input select option ".indexOf(" "+d.tagName.toLowerCase()+" ")};return d})},"dojo/dnd/Mover":function(){define("../_base/array ../_base/declare ../_base/lang ../sniff ../_base/window ../dom ../dom-geometry ../dom-style ../Evented ../on ../touch ./common ./autoscroll".split(" "),
function(n,h,l,m,d,f,k,c,b,a,e,q,t){return h("dojo.dnd.Mover",[b],{constructor:function(b,c,d){function q(a){a.preventDefault();a.stopPropagation()}this.node=f.byId(b);this.marginBox={l:c.pageX,t:c.pageY};this.mouseButton=c.button;c=this.host=d;b=b.ownerDocument;this.events=[a(b,e.move,l.hitch(this,"onFirstMove")),a(b,e.move,l.hitch(this,"onMouseMove")),a(b,e.release,l.hitch(this,"onMouseUp")),a(b,"dragstart",q),a(b.body,"selectstart",q)];t.autoScrollStart(b);if(c&&c.onMoveStart)c.onMoveStart(this)},
onMouseMove:function(a){t.autoScroll(a);var b=this.marginBox;this.host.onMove(this,{l:b.l+a.pageX,t:b.t+a.pageY},a);a.preventDefault();a.stopPropagation()},onMouseUp:function(a){(m("webkit")&&m("mac")&&2==this.mouseButton?0==a.button:this.mouseButton==a.button)&&this.destroy();a.preventDefault();a.stopPropagation()},onFirstMove:function(a){var b=this.node.style,e,q=this.host;switch(b.position){case "relative":case "absolute":e=Math.round(parseFloat(b.left))||0;b=Math.round(parseFloat(b.top))||0;break;
default:b.position="absolute";b=k.getMarginBox(this.node);e=d.doc.body;var f=c.getComputedStyle(e),t=k.getMarginBox(e,f),f=k.getContentBox(e,f);e=b.l-(f.l-t.l);b=b.t-(f.t-t.t)}this.marginBox.l=e-this.marginBox.l;this.marginBox.t=b-this.marginBox.t;if(q&&q.onFirstMove)q.onFirstMove(this,a);this.events.shift().remove()},destroy:function(){n.forEach(this.events,function(a){a.remove()});var a=this.host;if(a&&a.onMoveStop)a.onMoveStop(this);this.events=this.node=this.host=null}})})},"dojo/dnd/autoscroll":function(){define("../_base/lang ../sniff ../_base/window ../dom-geometry ../dom-style ../window".split(" "),
function(n,h,l,m,d,f){var k={};n.setObject("dojo.dnd.autoscroll",k);k.getViewport=f.getBox;k.V_TRIGGER_AUTOSCROLL=32;k.H_TRIGGER_AUTOSCROLL=32;k.V_AUTOSCROLL_VALUE=16;k.H_AUTOSCROLL_VALUE=16;var c,b=l.doc,a=Infinity,e=Infinity;k.autoScrollStart=function(d){b=d;c=f.getBox(b);d=l.body(b).parentNode;a=Math.max(d.scrollHeight-c.h,0);e=Math.max(d.scrollWidth-c.w,0)};k.autoScroll=function(d){var q=c||f.getBox(b),w=l.body(b).parentNode,h=0,p=0;d.clientX<k.H_TRIGGER_AUTOSCROLL?h=-k.H_AUTOSCROLL_VALUE:d.clientX>
q.w-k.H_TRIGGER_AUTOSCROLL&&(h=Math.min(k.H_AUTOSCROLL_VALUE,e-w.scrollLeft));d.clientY<k.V_TRIGGER_AUTOSCROLL?p=-k.V_AUTOSCROLL_VALUE:d.clientY>q.h-k.V_TRIGGER_AUTOSCROLL&&(p=Math.min(k.V_AUTOSCROLL_VALUE,a-w.scrollTop));window.scrollBy(h,p)};k._validNodes={div:1,p:1,td:1};k._validOverflow={auto:1,scroll:1};k.autoScrollNodes=function(a){for(var b,e,c,f,q,n=0,y=0,v=a.target;v;){if(1==v.nodeType&&v.tagName.toLowerCase()in k._validNodes){c=d.getComputedStyle(v);q=c.overflowX.toLowerCase()in k._validOverflow;
f=c.overflowY.toLowerCase()in k._validOverflow;if(q||f)b=m.getContentBox(v,c),e=m.position(v,!0);if(q){c=Math.min(k.H_TRIGGER_AUTOSCROLL,b.w/2);q=a.pageX-e.x;if(h("webkit")||h("opera"))q+=l.body().scrollLeft;n=0;0<q&&q<b.w&&(q<c?n=-c:q>b.w-c&&(n=c),v.scrollLeft+=n)}if(f){f=Math.min(k.V_TRIGGER_AUTOSCROLL,b.h/2);c=a.pageY-e.y;if(h("webkit")||h("opera"))c+=l.body().scrollTop;y=0;0<c&&c<b.h&&(c<f?y=-f:c>b.h-f&&(y=f),v.scrollTop+=y)}if(n||y)return}try{v=v.parentNode}catch(A){v=null}}k.autoScroll(a)};
return k})},"dojo/dnd/TimedMoveable":function(){define(["../_base/declare","./Moveable"],function(n,h){var l=h.prototype.onMove;return n("dojo.dnd.TimedMoveable",h,{timeout:40,constructor:function(h,d){d||(d={});d.timeout&&"number"==typeof d.timeout&&0<=d.timeout&&(this.timeout=d.timeout)},onMoveStop:function(m){m._timer&&(clearTimeout(m._timer),l.call(this,m,m._leftTop));h.prototype.onMoveStop.apply(this,arguments)},onMove:function(h,d){h._leftTop=d;if(!h._timer){var f=this;h._timer=setTimeout(function(){h._timer=
null;l.call(f,h,h._leftTop)},this.timeout)}}})})},"dijit/focus":function(){define("dojo/aspect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/Evented dojo/_base/lang dojo/on dojo/domReady dojo/sniff dojo/Stateful dojo/_base/window dojo/window ./a11y ./registry ./main".split(" "),function(n,h,l,m,d,f,k,c,b,a,e,q,t,w,z,p,x){var F,y,v=new (h([q,k],{curNode:null,activeStack:[],constructor:function(){var a=c.hitch(this,function(a){l.isDescendant(this.curNode,a)&&this.set("curNode",
null);l.isDescendant(this.prevNode,a)&&this.set("prevNode",null)});n.before(f,"empty",a);n.before(f,"destroy",a)},registerIframe:function(a){return this.registerWin(a.contentWindow,a)},registerWin:function(a,c){var d=this,f=a.document&&a.document.body;if(f){var q=e("pointer-events")?"pointerdown":e("touch-events")?"mousedown, touchstart":"mousedown",g=b(a.document,q,function(g){g&&g.target&&null==g.target.parentNode||d._onTouchNode(c||g.target,"mouse")}),r=b(f,"focusin",function(g){if(g.target.tagName){var a=
g.target.tagName.toLowerCase();"#document"!=a&&"body"!=a&&(z.isFocusable(g.target)?d._onFocusNode(c||g.target):d._onTouchNode(c||g.target))}}),k=b(f,"focusout",function(g){d._onBlurNode(c||g.target)});return{remove:function(){g.remove();r.remove();k.remove();f=g=r=k=null}}}},_onBlurNode:function(a){a=(new Date).getTime();a<F+100||(this._clearFocusTimer&&clearTimeout(this._clearFocusTimer),this._clearFocusTimer=setTimeout(c.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",
null)}),0),this._clearActiveWidgetsTimer&&clearTimeout(this._clearActiveWidgetsTimer),a<y+100||(this._clearActiveWidgetsTimer=setTimeout(c.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([])}),0)))},_onTouchNode:function(a,b){y=(new Date).getTime();this._clearActiveWidgetsTimer&&(clearTimeout(this._clearActiveWidgetsTimer),delete this._clearActiveWidgetsTimer);d.contains(a,"dijitPopup")&&(a=a.firstChild);var e=[];try{for(;a;){var c=m.get(a,"dijitPopupParent");if(c)a=p.byId(c).domNode;
else if(a.tagName&&"body"==a.tagName.toLowerCase()){if(a===t.body())break;a=w.get(a.ownerDocument).frameElement}else{var f=a.getAttribute&&a.getAttribute("widgetId"),g=f&&p.byId(f);!g||"mouse"==b&&g.get("disabled")||e.unshift(f);a=a.parentNode}}}catch(r){}this._setStack(e,b)},_onFocusNode:function(a){a&&9!=a.nodeType&&(F=(new Date).getTime(),this._clearFocusTimer&&(clearTimeout(this._clearFocusTimer),delete this._clearFocusTimer),this._onTouchNode(a),a!=this.curNode&&(this.set("prevNode",this.curNode),
this.set("curNode",a)))},_setStack:function(a,b){var e=this.activeStack,c=e.length-1,d=a.length-1;if(a[d]!=e[c]){this.set("activeStack",a);var g;for(g=c;0<=g&&e[g]!=a[g];g--)if(c=p.byId(e[g]))c._hasBeenBlurred=!0,c.set("focused",!1),c._focusManager==this&&c._onBlur(b),this.emit("widget-blur",c,b);for(g++;g<=d;g++)if(c=p.byId(a[g]))c.set("focused",!0),c._focusManager==this&&c._onFocus(b),this.emit("widget-focus",c,b)}},focus:function(a){if(a)try{a.focus()}catch(B){}}}));a(function(){var a=v.registerWin(w.get(document));
e("ie")&&b(window,"unload",function(){a&&(a.remove(),a=null)})});x.focus=function(a){v.focus(a)};for(var A in v)/^_/.test(A)||(x.focus[A]="function"==typeof v[A]?c.hitch(v,A):v[A]);v.watch(function(a,b,e){x.focus[a]=e});return v})},"dojo/Stateful":function(){define(["./_base/declare","./_base/lang","./_base/array","./when"],function(n,h,l,m){return n("dojo.Stateful",null,{_attrPairNames:{},_getAttrNames:function(d){var f=this._attrPairNames;return f[d]?f[d]:f[d]={s:"_"+d+"Setter",g:"_"+d+"Getter"}},
postscript:function(d){d&&this.set(d)},_get:function(d,f){return"function"===typeof this[f.g]?this[f.g]():this[d]},get:function(d){return this._get(d,this._getAttrNames(d))},set:function(d,f){if("object"===typeof d){for(var k in d)d.hasOwnProperty(k)&&"_watchCallbacks"!=k&&this.set(k,d[k]);return this}k=this._getAttrNames(d);var c=this._get(d,k);k=this[k.s];var b;"function"===typeof k?b=k.apply(this,Array.prototype.slice.call(arguments,1)):this[d]=f;if(this._watchCallbacks){var a=this;m(b,function(){a._watchCallbacks(d,
c,f)})}return this},_changeAttrValue:function(d,f){var k=this.get(d);this[d]=f;this._watchCallbacks&&this._watchCallbacks(d,k,f);return this},watch:function(d,f){var k=this._watchCallbacks;if(!k)var c=this,k=this._watchCallbacks=function(a,b,d,f){var e=function(e){if(e){e=e.slice();for(var f=0,q=e.length;f<q;f++)e[f].call(c,a,b,d)}};e(k["_"+a]);f||e(k["*"])};f||"function"!==typeof d?d="_"+d:(f=d,d="*");var b=k[d];"object"!==typeof b&&(b=k[d]=[]);b.push(f);d={};d.unwatch=d.remove=function(){var a=
l.indexOf(b,f);-1<a&&b.splice(a,1)};return d}})})},"dijit/a11y":function(){define("dojo/_base/array dojo/dom dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/sniff ./main".split(" "),function(n,h,l,m,d,f,k){var c={_isElementShown:function(b){var a=m.get(b);return"hidden"!=a.visibility&&"collapsed"!=a.visibility&&"none"!=a.display&&"hidden"!=l.get(b,"type")},hasDefaultTabStop:function(b){switch(b.nodeName.toLowerCase()){case "a":return l.has(b,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return!0;
case "iframe":var a;try{var e=b.contentDocument;if("designMode"in e&&"on"==e.designMode)return!0;a=e.body}catch(q){try{a=b.contentWindow.document.body}catch(t){return!1}}return a&&("true"==a.contentEditable||a.firstChild&&"true"==a.firstChild.contentEditable);default:return"true"==b.contentEditable}},effectiveTabIndex:function(b){if(!l.get(b,"disabled"))return l.has(b,"tabIndex")?+l.get(b,"tabIndex"):c.hasDefaultTabStop(b)?0:void 0},isTabNavigable:function(b){return 0<=c.effectiveTabIndex(b)},isFocusable:function(b){return-1<=
c.effectiveTabIndex(b)},_getTabNavigable:function(b){function a(a){return a&&"input"==a.tagName.toLowerCase()&&a.type&&"radio"==a.type.toLowerCase()&&a.name&&a.name.toLowerCase()}function e(b){return n[a(b)]||b}var d,k,h,m,p,x,n={},y=c._isElementShown,v=c.effectiveTabIndex,A=function(b){for(b=b.firstChild;b;b=b.nextSibling)if(!(1!=b.nodeType||9>=f("ie")&&"HTML"!==b.scopeName)&&y(b)){var e=v(b);if(0<=e){if(0==e)d||(d=b),k=b;else if(0<e){if(!h||e<m)m=e,h=b;if(!p||e>=x)x=e,p=b}e=a(b);l.get(b,"checked")&&
e&&(n[e]=b)}"SELECT"!=b.nodeName.toUpperCase()&&A(b)}};y(b)&&A(b);return{first:e(d),last:e(k),lowest:e(h),highest:e(p)}},getFirstInTabbingOrder:function(b,a){b=c._getTabNavigable(h.byId(b,a));return b.lowest?b.lowest:b.first},getLastInTabbingOrder:function(b,a){b=c._getTabNavigable(h.byId(b,a));return b.last?b.last:b.highest}};d.mixin(k,c);return c})},"dijit/_base/manager":function(){define(["dojo/_base/array","dojo/_base/config","dojo/_base/lang","../registry","../main"],function(n,h,l,m,d){var f=
{};n.forEach("byId getUniqueId findWidgets _destroyAll byNode getEnclosingWidget".split(" "),function(d){f[d]=m[d]});l.mixin(f,{defaultDuration:h.defaultDuration||200});l.mixin(d,f);return d})},"dijit/_Widget":function(){define("dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/has dojo/_base/kernel dojo/_base/lang dojo/query dojo/ready ./registry ./_WidgetBase ./_OnDijitClickMixin ./_FocusMixin dojo/uacss ./hccss".split(" "),function(n,h,l,m,d,f,k,c,b,a,e,q,t){function w(){}
function z(a){return function(b,e,c,d){return b&&"string"==typeof e&&b[e]==w?b.on(e.substring(2).toLowerCase(),k.hitch(c,d)):a.apply(l,arguments)}}n.around(l,"connect",z);f.connect&&n.around(f,"connect",z);n=m("dijit._Widget",[e,q,t],{onClick:w,onDblClick:w,onKeyDown:w,onKeyPress:w,onKeyUp:w,onMouseDown:w,onMouseMove:w,onMouseOut:w,onMouseOver:w,onMouseLeave:w,onMouseEnter:w,onMouseUp:w,constructor:function(a){this._toConnect={};for(var b in a)this[b]===w&&(this._toConnect[b.replace(/^on/,"").toLowerCase()]=
a[b],delete a[b])},postCreate:function(){this.inherited(arguments);for(var a in this._toConnect)this.on(a,this._toConnect[a]);delete this._toConnect},on:function(a,b){return this[this._onMap(a)]===w?l.connect(this.domNode,a.toLowerCase(),this,b):this.inherited(arguments)},_setFocusedAttr:function(a){this._focused=a;this._set("focused",a)},setAttribute:function(a,b){f.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(a,b)},attr:function(a,
b){return 2<=arguments.length||"object"===typeof a?this.set.apply(this,arguments):this.get(a)},getDescendants:function(){f.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?c("[widgetId]",this.containerNode).map(a.byNode):[]},_onShow:function(){this.onShow()},onShow:function(){},onHide:function(){},onClose:function(){return!0}});d("dijit-legacy-requires")&&b(0,function(){require(["dijit/_base"])});return n})},"dijit/_WidgetBase":function(){define("require dojo/_base/array dojo/aspect dojo/_base/config dojo/_base/connect dojo/_base/declare dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-construct dojo/dom-geometry dojo/dom-style dojo/has dojo/_base/kernel dojo/_base/lang dojo/on dojo/ready dojo/Stateful dojo/topic dojo/_base/window ./Destroyable dojo/has!dojo-bidi?./_BidiMixin ./registry".split(" "),
function(n,h,l,m,d,f,k,c,b,a,e,q,t,w,z,p,x,F,y,v,A,u,B){function G(a){return function(g){c[g?"set":"remove"](this.domNode,a,g);this._set(a,g)}}t.add("dijit-legacy-requires",!w.isAsync);t.add("dojo-bidi",!1);t("dijit-legacy-requires")&&x(0,function(){n(["dijit/_base/manager"])});var H={};m=f("dijit._WidgetBase",[F,A],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:G("lang"),dir:"",_setDirAttr:G("dir"),"class":"",_setClassAttr:{node:"domNode",type:"class"},_setTypeAttr:null,style:"",title:"",tooltip:"",
baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(a){this._set("ownerDocument",a)},attributeMap:{},_blankGif:m.blankGif||n.toUrl("dojo/resources/blank.gif"),textDir:"",_introspect:function(){var a=this.constructor;if(!a._setterAttrs){var g=a.prototype,b=a._setterAttrs=[],a=a._onMap={},e;for(e in g.attributeMap)b.push(e);for(e in g)/^on/.test(e)&&(a[e.substring(2).toLowerCase()]=e),/^_set[A-Z](.*)Attr$/.test(e)&&(e=e.charAt(4).toLowerCase()+
e.substr(5,e.length-9),g.attributeMap&&e in g.attributeMap||b.push(e))}},postscript:function(a,g){this.create(a,g)},create:function(a,g){this._introspect();this.srcNodeRef=k.byId(g);this._connects=[];this._supportingWidgets=[];this.srcNodeRef&&this.srcNodeRef.id&&"string"==typeof this.srcNodeRef.id&&(this.id=this.srcNodeRef.id);a&&(this.params=a,z.mixin(this,a));this.postMixInProperties();this.id||(this.id=B.getUniqueId(this.declaredClass.replace(/\./g,"_")),this.params&&delete this.params.id);this.ownerDocument=
this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:document);this.ownerDocumentBody=v.body(this.ownerDocument);B.add(this);this.buildRendering();var b;this.domNode&&(this._applyAttributes(),(a=this.srcNodeRef)&&a.parentNode&&this.domNode!==a&&(a.parentNode.replaceChild(this.domNode,a),b=!0),this.domNode.setAttribute("widgetId",this.id));this.postCreate();b&&delete this.srcNodeRef;this._created=!0},_applyAttributes:function(){var a={},g;for(g in this.params||{})a[g]=this._get(g);h.forEach(this.constructor._setterAttrs,
function(g){if(!(g in a)){var b=this._get(g);b&&this.set(g,b)}},this);for(g in a)this.set(g,a[g])},postMixInProperties:function(){},buildRendering:function(){this.domNode||(this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div"));if(this.baseClass){var a=this.baseClass.split(" ");this.isLeftToRight()||(a=a.concat(h.map(a,function(a){return a+"Rtl"})));b.add(this.domNode,a)}},postCreate:function(){},startup:function(){this._started||(this._started=!0,h.forEach(this.getChildren(),function(a){a._started||
a._destroyed||!z.isFunction(a.startup)||(a.startup(),a._started=!0)}))},destroyRecursive:function(a){this._beingDestroyed=!0;this.destroyDescendants(a);this.destroy(a)},destroy:function(a){function g(g){g.destroyRecursive?g.destroyRecursive(a):g.destroy&&g.destroy(a)}this._beingDestroyed=!0;this.uninitialize();h.forEach(this._connects,z.hitch(this,"disconnect"));h.forEach(this._supportingWidgets,g);this.domNode&&h.forEach(B.findWidgets(this.domNode,this.containerNode),g);this.destroyRendering(a);
B.remove(this.id);this._destroyed=!0},destroyRendering:function(b){this.bgIframe&&(this.bgIframe.destroy(b),delete this.bgIframe);this.domNode&&(b?c.remove(this.domNode,"widgetId"):a.destroy(this.domNode),delete this.domNode);this.srcNodeRef&&(b||a.destroy(this.srcNodeRef),delete this.srcNodeRef)},destroyDescendants:function(a){h.forEach(this.getChildren(),function(g){g.destroyRecursive&&g.destroyRecursive(a)})},uninitialize:function(){return!1},_setStyleAttr:function(a){var g=this.domNode;z.isObject(a)?
q.set(g,a):g.style.cssText=g.style.cssText?g.style.cssText+("; "+a):a;this._set("style",a)},_attrToDom:function(a,g,e){e=3<=arguments.length?e:this.attributeMap[a];h.forEach(z.isArray(e)?e:[e],function(e){var r=this[e.node||e||"domNode"];switch(e.type||"attribute"){case "attribute":z.isFunction(g)&&(g=z.hitch(this,g));e=e.attribute?e.attribute:/^on[A-Z][a-zA-Z]*$/.test(a)?a.toLowerCase():a;r.tagName?c.set(r,e,g):r.set(e,g);break;case "innerText":r.innerHTML="";r.appendChild(this.ownerDocument.createTextNode(g));
break;case "textContent":r.textContent=g;break;case "innerHTML":r.innerHTML=g;break;case "class":b.replace(r,g,this[a]);break;case "toggleClass":b.toggle(r,e.className||a,g)}},this)},get:function(a){var g=this._getAttrNames(a);return this[g.g]?this[g.g]():this._get(a)},set:function(a,g){if("object"===typeof a){for(var b in a)this.set(b,a[b]);return this}b=this._getAttrNames(a);var e=this[b.s];if(z.isFunction(e))var c=e.apply(this,Array.prototype.slice.call(arguments,1));else{var e=this.focusNode&&
!z.isFunction(this.focusNode)?"focusNode":"domNode",d=this[e]&&this[e].tagName,f;if((f=d)&&!(f=H[d])){f=this[e];var q={},k;for(k in f)q[k.toLowerCase()]=!0;f=H[d]=q}k=f;b=a in this.attributeMap?this.attributeMap[a]:b.s in this?this[b.s]:k&&b.l in k&&"function"!=typeof g||/^aria-|^data-|^role$/.test(a)?e:null;null!=b&&this._attrToDom(a,g,b);this._set(a,g)}return c||this},_attrPairNames:{},_getAttrNames:function(a){var g=this._attrPairNames;if(g[a])return g[a];var b=a.replace(/^[a-z]|-[a-zA-Z]/g,function(a){return a.charAt(a.length-
1).toUpperCase()});return g[a]={n:a+"Node",s:"_set"+b+"Attr",g:"_get"+b+"Attr",l:b.toLowerCase()}},_set:function(a,g){var b=this[a];this[a]=g;!this._created||b===g||b!==b&&g!==g||(this._watchCallbacks&&this._watchCallbacks(a,b,g),this.emit("attrmodified-"+a,{detail:{prevValue:b,newValue:g}}))},_get:function(a){return this[a]},emit:function(a,g,b){g=g||{};void 0===g.bubbles&&(g.bubbles=!0);void 0===g.cancelable&&(g.cancelable=!0);g.detail||(g.detail={});g.detail.widget=this;var e,r=this["on"+a];r&&
(e=r.apply(this,b?b:[g]));this._started&&!this._beingDestroyed&&p.emit(this.domNode,a.toLowerCase(),g);return e},on:function(a,g){var b=this._onMap(a);return b?l.after(this,b,g,!0):this.own(p(this.domNode,a,g))[0]},_onMap:function(a){var g=this.constructor,b=g._onMap;if(!b){var b=g._onMap={},e;for(e in g.prototype)/^on/.test(e)&&(b[e.replace(/^on/,"").toLowerCase()]=e)}return b["string"==typeof a&&a.toLowerCase()]},toString:function(){return"[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]"},
getChildren:function(){return this.containerNode?B.findWidgets(this.containerNode):[]},getParent:function(){return B.getEnclosingWidget(this.domNode.parentNode)},connect:function(a,g,b){return this.own(d.connect(a,g,this,b))[0]},disconnect:function(a){a.remove()},subscribe:function(a,g){return this.own(y.subscribe(a,z.hitch(this,g)))[0]},unsubscribe:function(a){a.remove()},isLeftToRight:function(){return this.dir?"ltr"==this.dir.toLowerCase():e.isBodyLtr(this.ownerDocument)},isFocusable:function(){return this.focus&&
"none"!=q.get(this.domNode,"display")},placeAt:function(b,g){var e=!b.tagName&&B.byId(b);!e||!e.addChild||g&&"number"!==typeof g?(b=e&&"domNode"in e?e.containerNode&&!/after|before|replace/.test(g||"")?e.containerNode:e.domNode:k.byId(b,this.ownerDocument),a.place(this.domNode,b,g),!this._started&&(this.getParent()||{})._started&&this.startup()):e.addChild(this,g);return this},defer:function(a,g){var b=setTimeout(z.hitch(this,function(){b&&(b=null,this._destroyed||z.hitch(this,a)())}),g||0);return{remove:function(){b&&
(clearTimeout(b),b=null);return null}}}});t("dojo-bidi")&&m.extend(u);return m})},"dijit/Destroyable":function(){define(["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(n,h,l){return l("dijit.Destroyable",null,{destroy:function(h){this._destroyed=!0},own:function(){var m=["destroyRecursive","destroy","remove"];n.forEach(arguments,function(d){function f(){c.remove();n.forEach(b,function(a){a.remove()})}var k,c=h.before(this,"destroy",function(a){d[k](a)}),b=[];d.then?(k="cancel",d.then(f,
f)):n.forEach(m,function(a){"function"===typeof d[a]&&(k||(k=a),b.push(h.after(d,a,f,!0)))})},this);return arguments}})})},"dijit/_OnDijitClickMixin":function(){define("dojo/on dojo/_base/array dojo/keys dojo/_base/declare dojo/has ./a11yclick".split(" "),function(n,h,l,m,d,f){n=m("dijit._OnDijitClickMixin",null,{connect:function(d,c,b){return this.inherited(arguments,[d,"ondijitclick"==c?f:c,b])}});n.a11yclick=f;return n})},"dijit/a11yclick":function(){define(["dojo/keys","dojo/mouse","dojo/on",
"dojo/touch"],function(n,h,l,m){function d(c){if((c.keyCode===n.ENTER||c.keyCode===n.SPACE)&&!/input|button|textarea/i.test(c.target.nodeName))for(c=c.target;c;c=c.parentNode)if(c.dojoClick)return!0}var f;l(document,"keydown",function(c){d(c)?(f=c.target,c.preventDefault()):f=null});l(document,"keyup",function(c){d(c)&&c.target==f&&(f=null,l.emit(c.target,"click",{cancelable:!0,bubbles:!0,ctrlKey:c.ctrlKey,shiftKey:c.shiftKey,metaKey:c.metaKey,altKey:c.altKey,_origType:c.type}))});var k=function(c,
b){c.dojoClick=!0;return l(c,"click",b)};k.click=k;k.press=function(c,b){var a=l(c,m.press,function(a){("mousedown"!=a.type||h.isLeft(a))&&b(a)}),e=l(c,"keydown",function(a){a.keyCode!==n.ENTER&&a.keyCode!==n.SPACE||b(a)});return{remove:function(){a.remove();e.remove()}}};k.release=function(c,b){var a=l(c,m.release,function(a){("mouseup"!=a.type||h.isLeft(a))&&b(a)}),e=l(c,"keyup",function(a){a.keyCode!==n.ENTER&&a.keyCode!==n.SPACE||b(a)});return{remove:function(){a.remove();e.remove()}}};k.move=
m.move;return k})},"dijit/_FocusMixin":function(){define(["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(n,h,l,m){m.extend(h,{focused:!1,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus()},_onBlur:function(){this.onBlur()}});return l("dijit._FocusMixin",null,{_focusManager:n})})},"dojo/uacss":function(){define(["./dom-geometry","./_base/lang","./domReady","./sniff","./_base/window"],function(n,h,l,m,d){var f=d.doc.documentElement;d=m("ie");var k=
m("trident"),c=m("opera"),b=Math.floor,a=m("ff"),e=n.boxModel.replace(/-/,""),c={dj_quirks:0,dj_opera:c,dj_khtml:0,dj_webkit:m("webkit"),dj_safari:m("safari"),dj_chrome:m("chrome"),dj_edge:m("edge"),dj_gecko:m("mozilla"),dj_ios:m("ios"),dj_android:0};d&&(c.dj_ie=!0,c["dj_ie"+b(d)]=!0,c.dj_iequirks=0);k&&(c.dj_trident=!0,c["dj_trident"+b(k)]=!0);a&&(c["dj_ff"+b(a)]=!0);c["dj_"+e]=!0;var q="",t;for(t in c)c[t]&&(q+=t+" ");f.className=h.trim(f.className+" "+q);l(function(){if(!n.isBodyLtr()){var a="dj_rtl dijitRtl "+
q.replace(/ /g,"-rtl ");f.className=h.trim(f.className+" "+a+"dj_rtl dijitRtl "+q.replace(/ /g,"-rtl "))}});return m})},"dijit/hccss":function(){define(["dojo/dom-class","dojo/hccss","dojo/domReady","dojo/_base/window"],function(n,h,l,m){l(function(){h("highcontrast")&&n.add(m.body(),"dijit_a11y")});return h})},"dojo/hccss":function(){define("require ./_base/config ./dom-class ./dom-style ./has ./domReady ./_base/window".split(" "),function(n,h,l,m,d,f,k){d.add("highcontrast",function(){var c=k.doc.createElement("div");
try{c.style.cssText='border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;background-image: url("'+(h.blankGif||n.toUrl("./resources/blank.gif"))+'");';k.body().appendChild(c);var b=m.getComputedStyle(c),a=b.backgroundImage;return b.borderTopColor==b.borderRightColor||a&&("none"==a||"url(invalid-url:)"==a)}catch(e){return console.warn("hccss: exception detecting high-contrast mode, document is likely hidden: "+e.toString()),!1}finally{8>=d("ie")?c.outerHTML="":k.body().removeChild(c)}});
f(function(){d("highcontrast")&&l.add(k.body(),"dj_a11y")});return d})},"dijit/_TemplatedMixin":function(){define("dojo/cache dojo/_base/declare dojo/dom-construct dojo/_base/lang dojo/on dojo/sniff dojo/string ./_AttachMixin".split(" "),function(n,h,l,m,d,f,k,c){var b=h("dijit._TemplatedMixin",c,{templateString:null,templatePath:null,_skipNodeCache:!1,searchContainerNode:!0,_stringRepl:function(a){var b=this.declaredClass,c=this;return k.substitute(a,this,function(a,e){"!"==e.charAt(0)&&(a=m.getObject(e.substr(1),
!1,c));if("undefined"==typeof a)throw Error(b+" template:"+e);return null==a?"":"!"==e.charAt(0)?a:this._escapeValue(""+a)},this)},_escapeValue:function(a){return a.replace(/["'<>&]/g,function(a){return{"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#x27;"}[a]})},buildRendering:function(){if(!this._rendered){this.templateString||(this.templateString=n(this.templatePath,{sanitize:!0}));var a=b.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument),
e;if(m.isString(a)){if(e=l.toDom(this._stringRepl(a),this.ownerDocument),1!=e.nodeType)throw Error("Invalid template: "+a);}else e=a.cloneNode(!0);this.domNode=e}this.inherited(arguments);this._rendered||this._fillContent(this.srcNodeRef);this._rendered=!0},_fillContent:function(a){var b=this.containerNode;if(a&&b)for(;a.hasChildNodes();)b.appendChild(a.firstChild)}});b._templateCache={};b.getCachedTemplate=function(a,e,c){var d=b._templateCache,f=a,q=d[f];if(q){try{if(!q.ownerDocument||q.ownerDocument==
(c||document))return q}catch(p){}l.destroy(q)}a=k.trim(a);if(e||a.match(/\$\{([^\}]+)\}/g))return d[f]=a;e=l.toDom(a,c);if(1!=e.nodeType)throw Error("Invalid template: "+a);return d[f]=e};f("ie")&&d(window,"unload",function(){var a=b._templateCache,e;for(e in a){var c=a[e];"object"==typeof c&&l.destroy(c);delete a[e]}});return b})},"dojo/cache":function(){define(["./_base/kernel","./text"],function(n){return n.cache})},"dojo/text":function(){define(["./_base/kernel","require","./has","./has!host-browser?./request"],
function(n,h,l,m){var d;l("host-browser")?d=function(a,b,c){m(a,{sync:!!b,headers:{"X-Requested-With":null}}).then(c)}:h.getText?d=h.getText:console.error("dojo/text plugin failed to load because loader does not support getText");var f={},k=function(a){if(a){a=a.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var b=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);b&&(a=b[1])}else a="";return a},c={},b={};n.cache=function(a,b,c){var e;"string"==typeof a?/\//.test(a)?(e=a,c=b):
e=h.toUrl(a.replace(/\./g,"/")+(b?"/"+b:"")):(e=a+"",c=b);a=void 0!=c&&"string"!=typeof c?c.value:c;c=c&&c.sanitize;if("string"==typeof a)return f[e]=a,c?k(a):a;if(null===a)return delete f[e],null;e in f||d(e,!0,function(a){f[e]=a});return c?k(f[e]):f[e]};return{dynamic:!0,normalize:function(a,b){a=a.split("!");var e=a[0];return(/^\./.test(e)?b(e):e)+(a[1]?"!"+a[1]:"")},load:function(a,e,q){a=a.split("!");var h=1<a.length,m=a[0],l=e.toUrl(a[0]);a="url:"+l;var p=c,x=function(a){q(h?k(a):a)};m in f?
p=f[m]:e.cache&&a in e.cache?p=e.cache[a]:l in f&&(p=f[l]);if(p===c)if(b[l])b[l].push(x);else{var n=b[l]=[x];d(l,!e.async,function(a){f[m]=f[l]=a;for(var e=0;e<n.length;)n[e++](a);delete b[l]})}else x(p)}}})},"dijit/_AttachMixin":function(){define("require dojo/_base/array dojo/_base/connect dojo/_base/declare dojo/_base/lang dojo/mouse dojo/on dojo/touch ./_WidgetBase".split(" "),function(n,h,l,m,d,f,k,c,b){var a=d.delegate(c,{mouseenter:f.enter,mouseleave:f.leave,keypress:l._keypress}),e;l=m("dijit._AttachMixin",
null,{constructor:function(){this._attachPoints=[];this._attachEvents=[]},buildRendering:function(){this.inherited(arguments);this._attachTemplateNodes(this.domNode);this._beforeFillContent()},_beforeFillContent:function(){},_attachTemplateNodes:function(a){for(var b=a;;)if(1==b.nodeType&&(this._processTemplateNode(b,function(a,b){return a.getAttribute(b)},this._attach)||this.searchContainerNode)&&b.firstChild)b=b.firstChild;else{if(b==a)break;for(;!b.nextSibling;)if(b=b.parentNode,b==a)return;b=
b.nextSibling}},_processTemplateNode:function(a,b,e){var c=!0,f=this.attachScope||this,k=b(a,"dojoAttachPoint")||b(a,"data-dojo-attach-point");if(k)for(var h=k.split(/\s*,\s*/);k=h.shift();)d.isArray(f[k])?f[k].push(a):f[k]=a,c="containerNode"!=k,this._attachPoints.push(k);if(b=b(a,"dojoAttachEvent")||b(a,"data-dojo-attach-event"))for(k=b.split(/\s*,\s*/),h=d.trim;b=k.shift();)if(b){var q=null;-1!=b.indexOf(":")?(q=b.split(":"),b=h(q[0]),q=h(q[1])):b=h(b);q||(q=b);this._attachEvents.push(e(a,b,d.hitch(f,
q)))}return c},_attach:function(b,c,d){c=c.replace(/^on/,"").toLowerCase();c="dijitclick"==c?e||(e=n("./a11yclick")):a[c]||c;return k(b,c,d)},_detachTemplateNodes:function(){var a=this.attachScope||this;h.forEach(this._attachPoints,function(b){delete a[b]});this._attachPoints=[];h.forEach(this._attachEvents,function(a){a.remove()});this._attachEvents=[]},destroyRendering:function(){this._detachTemplateNodes();this.inherited(arguments)}});d.extend(b,{dojoAttachEvent:"",dojoAttachPoint:""});return l})},
"dijit/_CssStateMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/dom-class dojo/has dojo/_base/lang dojo/on dojo/domReady dojo/touch dojo/_base/window ./a11yclick ./registry".split(" "),function(n,h,l,m,d,f,k,c,b,a,e,q){h=h("dijit._CssStateMixin",[],{hovering:!1,active:!1,_applyAttributes:function(){this.inherited(arguments);n.forEach("disabled readOnly checked selected focused state hovering active _opened".split(" "),function(a){this.watch(a,f.hitch(this,"_setStateClass"))},
this);for(var a in this.cssStateNodes||{})this._trackMouseState(this[a],this.cssStateNodes[a]);this._trackMouseState(this.domNode,this.baseClass);this._setStateClass()},_cssMouseEvent:function(a){if(!this.disabled)switch(a.type){case "mouseover":case "MSPointerOver":case "pointerover":this._set("hovering",!0);this._set("active",this._mouseDown);break;case "mouseout":case "MSPointerOut":case "pointerout":this._set("hovering",!1);this._set("active",!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":this._set("active",
!0);break;case "mouseup":case "dojotouchend":case "MSPointerUp":case "pointerup":case "keyup":this._set("active",!1)}},_setStateClass:function(){function a(a){b=b.concat(n.map(b,function(b){return b+a}),"dijit"+a)}var b=this.baseClass.split(" ");this.isLeftToRight()||a("Rtl");var e="mixed"==this.checked?"Mixed":this.checked?"Checked":"";this.checked&&a(e);this.state&&a(this.state);this.selected&&a("Selected");this._opened&&a("Opened");this.disabled?a("Disabled"):this.readOnly?a("ReadOnly"):this.active?
a("Active"):this.hovering&&a("Hover");this.focused&&a("Focused");var e=this.stateNode||this.domNode,c={};n.forEach(e.className.split(" "),function(a){c[a]=!0});"_stateClasses"in this&&n.forEach(this._stateClasses,function(a){delete c[a]});n.forEach(b,function(a){c[a]=!0});var d=[],f;for(f in c)d.push(f);e.className=d.join(" ");this._stateClasses=b},_subnodeCssMouseEvent:function(a,b,e){function c(e){m.toggle(a,b+"Active",e)}if(!this.disabled&&!this.readOnly)switch(e.type){case "mouseover":case "MSPointerOver":case "pointerover":m.toggle(a,
b+"Hover",!0);break;case "mouseout":case "MSPointerOut":case "pointerout":m.toggle(a,b+"Hover",!1);c(!1);break;case "mousedown":case "touchstart":case "MSPointerDown":case "pointerdown":case "keydown":c(!0);break;case "mouseup":case "MSPointerUp":case "pointerup":case "dojotouchend":case "keyup":c(!1);break;case "focus":case "focusin":m.toggle(a,b+"Focused",!0);break;case "blur":case "focusout":m.toggle(a,b+"Focused",!1)}},_trackMouseState:function(a,b){a._cssState=b}});c(function(){function c(a,
b,e){if(!e||!l.isDescendant(e,b))for(;b&&b!=e;b=b.parentNode)if(b._cssState){var c=q.getEnclosingWidget(b);c&&(b==c.domNode?c._cssMouseEvent(a):c._subnodeCssMouseEvent(b,b._cssState,a))}}var d=a.body(),f;k(d,b.over,function(a){c(a,a.target,a.relatedTarget)});k(d,b.out,function(a){c(a,a.target,a.relatedTarget)});k(d,e.press,function(a){f=a.target;c(a,f)});k(d,e.release,function(a){c(a,f);f=null});k(d,"focusin, focusout",function(a){var b=a.target;if(b._cssState&&!b.getAttribute("widgetId")){var e=
q.getEnclosingWidget(b);e&&e._subnodeCssMouseEvent(b,b._cssState,a)}})});return h})},"dijit/form/_FormMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/on dojo/window".split(" "),function(n,h,l,m,d,f){return h("dijit.form._FormMixin",null,{state:"",_getDescendantFormWidgets:function(d){var c=[];n.forEach(d||this.getChildren(),function(b){"value"in b?c.push(b):c=c.concat(this._getDescendantFormWidgets(b.getChildren()))},this);return c},reset:function(){n.forEach(this._getDescendantFormWidgets(),
function(d){d.reset&&d.reset()})},validate:function(){var d=!1;return n.every(n.map(this._getDescendantFormWidgets(),function(c){c._hasBeenBlurred=!0;var b=c.disabled||!c.validate||c.validate();b||d||(f.scrollIntoView(c.containerNode||c.domNode),c.focus(),d=!0);return b}),function(c){return c})},setValues:function(d){l.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",d)},_setValueAttr:function(d){var c={};n.forEach(this._getDescendantFormWidgets(),
function(a){a.name&&(c[a.name]||(c[a.name]=[])).push(a)});for(var b in c)if(c.hasOwnProperty(b)){var a=c[b],e=m.getObject(b,!1,d);void 0!==e&&(e=[].concat(e),"boolean"==typeof a[0].checked?n.forEach(a,function(a){a.set("value",-1!=n.indexOf(e,a._get("value")))}):a[0].multiple?a[0].set("value",e):n.forEach(a,function(a,b){a.set("value",e[b])}))}},getValues:function(){l.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value")},_getValueAttr:function(){var d=
{};n.forEach(this._getDescendantFormWidgets(),function(c){var b=c.name;if(b&&!c.disabled){var a=c.get("value");"boolean"==typeof c.checked?/Radio/.test(c.declaredClass)?!1!==a?m.setObject(b,a,d):(a=m.getObject(b,!1,d),void 0===a&&m.setObject(b,null,d)):(c=m.getObject(b,!1,d),c||(c=[],m.setObject(b,c,d)),!1!==a&&c.push(a)):(c=m.getObject(b,!1,d),"undefined"!=typeof c?m.isArray(c)?c.push(a):m.setObject(b,[c,a],d):m.setObject(b,a,d))}});return d},isValid:function(){return""==this.state},onValidStateChange:function(){},
_getState:function(){var d=n.map(this._descendants,function(c){return c.get("state")||""});return 0<=n.indexOf(d,"Error")?"Error":0<=n.indexOf(d,"Incomplete")?"Incomplete":""},disconnectChildren:function(){},connectChildren:function(d){this._descendants=this._getDescendantFormWidgets();n.forEach(this._descendants,function(c){c._started||c.startup()});d||this._onChildChange()},_onChildChange:function(d){d&&"state"!=d&&"disabled"!=d||this._set("state",this._getState());d&&"value"!=d&&"disabled"!=d&&
"checked"!=d||(this._onChangeDelayTimer&&this._onChangeDelayTimer.remove(),this._onChangeDelayTimer=this.defer(function(){delete this._onChangeDelayTimer;this._set("value",this.get("value"))},10))},startup:function(){this.inherited(arguments);this._descendants=this._getDescendantFormWidgets();this.value=this.get("value");this.state=this._getState();var f=this;this.own(d(this.containerNode,"attrmodified-state, attrmodified-disabled, attrmodified-value, attrmodified-checked",function(c){c.target!=f.domNode&&
f._onChildChange(c.type.replace("attrmodified-",""))}));this.watch("state",function(c,b,a){this.onValidStateChange(""==a)})},destroy:function(){this.inherited(arguments)}})})},"dijit/_DialogMixin":function(){define(["dojo/_base/declare","./a11y"],function(n,h){return n("dijit._DialogMixin",null,{actionBarTemplate:"",execute:function(){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"))},_getFocusItems:function(){var l=h._getTabNavigable(this.domNode);
this._firstFocusItem=l.lowest||l.first||this.closeButtonNode||this.domNode;this._lastFocusItem=l.last||l.highest||this._firstFocusItem}})})},"dijit/DialogUnderlay":function(){define("dojo/_base/declare dojo/_base/lang dojo/aspect dojo/dom-attr dojo/dom-style dojo/on dojo/window ./_Widget ./_TemplatedMixin ./BackgroundIframe ./Viewport ./main".split(" "),function(n,h,l,m,d,f,k,c,b,a,e,q){var t=n("dijit.DialogUnderlay",[c,b],{templateString:"\x3cdiv class\x3d'dijitDialogUnderlayWrapper'\x3e\x3cdiv class\x3d'dijitDialogUnderlay' tabIndex\x3d'-1' data-dojo-attach-point\x3d'node'\x3e\x3c/div\x3e\x3c/div\x3e",
dialogId:"","class":"",_modalConnects:[],_setDialogIdAttr:function(a){m.set(this.node,"id",a+"_underlay");this._set("dialogId",a)},_setClassAttr:function(a){this.node.className="dijitDialogUnderlay "+a;this._set("class",a)},postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.own(f(this.domNode,"keydown",h.hitch(this,"_onKeyDown")));this.inherited(arguments)},layout:function(){var a=this.node.style,b=this.domNode.style;b.display="none";var e=k.getBox(this.ownerDocument);b.top=
e.t+"px";b.left=e.l+"px";a.width=e.w+"px";a.height=e.h+"px";b.display="block"},show:function(){this.domNode.style.display="block";this.open=!0;this.layout();this.bgIframe=new a(this.domNode);var b=k.get(this.ownerDocument);this._modalConnects=[e.on("resize",h.hitch(this,"layout")),f(b,"scroll",h.hitch(this,"layout"))]},hide:function(){this.bgIframe.destroy();delete this.bgIframe;for(this.domNode.style.display="none";this._modalConnects.length;)this._modalConnects.pop().remove();this.open=!1},destroy:function(){for(;this._modalConnects.length;)this._modalConnects.pop().remove();
this.inherited(arguments)},_onKeyDown:function(){}});t.show=function(a,b){var e=t._singleton;!e||e._destroyed?e=q._underlay=t._singleton=new t(a):a&&e.set(a);d.set(e.domNode,"zIndex",b);e.open||e.show()};t.hide=function(){var a=t._singleton;a&&!a._destroyed&&a.hide()};return t})},"dijit/BackgroundIframe":function(){define("require ./main dojo/_base/config dojo/dom-construct dojo/dom-style dojo/_base/lang dojo/on dojo/sniff".split(" "),function(n,h,l,m,d,f,k,c){c.add("config-bgIframe",(c("ie")||c("trident"))&&
!/IEMobile\/10\.0/.test(navigator.userAgent));var b=new function(){var a=[];this.pop=function(){var b;a.length?(b=a.pop(),b.style.display=""):(9>c("ie")?(b=l.dojoBlankHtmlUrl||n.toUrl("dojo/resources/blank.html")||'javascript:""',b=document.createElement("\x3ciframe src\x3d'"+b+"' role\x3d'presentation' style\x3d'position: absolute; left: 0px; top: 0px;z-index: -1; filter:Alpha(Opacity\x3d\"0\");'\x3e")):(b=m.create("iframe"),b.src='javascript:""',b.className="dijitBackgroundIframe",b.setAttribute("role",
"presentation"),d.set(b,"opacity",.1)),b.tabIndex=-1);return b};this.push=function(b){b.style.display="none";a.push(b)}};h.BackgroundIframe=function(a){if(!a.id)throw Error("no id");if(c("config-bgIframe")){var e=this.iframe=b.pop();a.appendChild(e);7>c("ie")?(this.resize(a),this._conn=k(a,"resize",f.hitch(this,"resize",a))):d.set(e,{width:"100%",height:"100%"})}};f.extend(h.BackgroundIframe,{resize:function(a){this.iframe&&d.set(this.iframe,{width:a.offsetWidth+"px",height:a.offsetHeight+"px"})},
destroy:function(){this._conn&&(this._conn.remove(),this._conn=null);this.iframe&&(this.iframe.parentNode.removeChild(this.iframe),b.push(this.iframe),delete this.iframe)}});return h.BackgroundIframe})},"dijit/Viewport":function(){define(["dojo/Evented","dojo/on","dojo/domReady","dojo/sniff","dojo/window"],function(n,h,l,m,d){var f=new n,k;l(function(){var c=d.getBox();f._rlh=h(window,"resize",function(){var a=d.getBox();if(c.h!=a.h||c.w!=a.w)c=a,f.emit("resize")});if(8==m("ie")){var b=screen.deviceXDPI;
setInterval(function(){screen.deviceXDPI!=b&&(b=screen.deviceXDPI,f.emit("resize"))},500)}m("ios")&&(h(document,"focusin",function(a){k=a.target}),h(document,"focusout",function(a){k=null}))});f.getEffectiveBox=function(c){c=d.getBox(c);var b=k&&k.tagName&&k.tagName.toLowerCase();m("ios")&&k&&!k.readOnly&&("textarea"==b||"input"==b&&/^(color|email|number|password|search|tel|text|url)$/.test(k.type))&&(c.h*=0==orientation||180==orientation?.66:.4,b=k.getBoundingClientRect(),c.h=Math.max(c.h,b.top+
b.height));return c};return f})},"dijit/layout/ContentPane":function(){define("dojo/_base/kernel dojo/_base/lang ../_Widget ../_Container ./_ContentPaneResizeMixin dojo/string dojo/html dojo/_base/array dojo/_base/declare dojo/_base/Deferred dojo/dom dojo/dom-attr dojo/dom-construct dojo/_base/xhr dojo/i18n dojo/when dojo/i18n!../nls/loading".split(" "),function(n,h,l,m,d,f,k,c,b,a,e,q,t,w,z,p){return b("dijit.layout.ContentPane",[l,m,d],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:n._scopeName,
preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"\x3cspan class\x3d'dijitContentPaneLoading'\x3e\x3cspan class\x3d'dijitInline dijitIconLoading'\x3e\x3c/span\x3e${loadingState}\x3c/span\x3e",errorMessage:"\x3cspan class\x3d'dijitContentPaneError'\x3e\x3cspan class\x3d'dijitInline dijitIconError'\x3e\x3c/span\x3e${errorState}\x3c/span\x3e",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(a,b,e){var c=
new e(a,b);return!c.href&&c._contentSetter&&c._contentSetter.parseDeferred&&!c._contentSetter.parseDeferred.isFulfilled()?c._contentSetter.parseDeferred.then(function(){return c}):c},create:function(a,b){if(!(a&&a.template||!b||"href"in a||"content"in a)){b=e.byId(b);for(var c=b.ownerDocument.createDocumentFragment();b.firstChild;)c.appendChild(b.firstChild);a=h.delegate(a,{content:c})}this.inherited(arguments,[a,b])},postMixInProperties:function(){this.inherited(arguments);var a=z.getLocalization("dijit",
"loading",this.lang);this.loadingMessage=f.substitute(this.loadingMessage,a);this.errorMessage=f.substitute(this.errorMessage,a)},buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode);this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments);this._contentSetter&&c.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},_startChildren:function(){c.forEach(this.getChildren(),
function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)});this._contentSetter&&c.forEach(this._contentSetter.parseResults,function(a){a._started||a._destroyed||!h.isFunction(a.startup)||(a.startup(),a._started=!0)},this)},setHref:function(a){n.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",a)},_setHrefAttr:function(b){this.cancel();this.onLoadDeferred=new a(h.hitch(this,"cancel"));this.onLoadDeferred.then(h.hitch(this,
"onLoad"));this._set("href",b);this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0;return this.onLoadDeferred},setContent:function(a){n.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",a)},_setContentAttr:function(b){this._set("href","");this.cancel();this.onLoadDeferred=new a(h.hitch(this,"cancel"));this._created&&this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._setContent(b||"");this._isDownloaded=
!1;return this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel();delete this._xhrDfd;this.onLoadDeferred=null},destroy:function(){this.cancel();this.inherited(arguments)},destroyRecursive:function(a){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){this.inherited(arguments);if(this.href&&!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow))return this.refresh()},
refresh:function(){this.cancel();this.onLoadDeferred=new a(h.hitch(this,"cancel"));this.onLoadDeferred.then(h.hitch(this,"onLoad"));this._load();return this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var a=this,b={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};h.isObject(this.ioArgs)&&h.mixin(b,this.ioArgs);var e=this._xhrDfd=(this.ioMethod||w.get)(b),c;e.then(function(b){c=b;try{return a._isDownloaded=!0,a._setContent(b,!1)}catch(u){a._onError("Content",
u)}},function(b){e.canceled||a._onError("Download",b);delete a._xhrDfd;return b}).then(function(){a.onDownloadEnd();delete a._xhrDfd;return c});delete this._hrefChanged},_onLoadHandler:function(a){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(a)}catch(F){console.error("Error "+(this.widgetId||this.id)+" running custom onLoad code: "+F.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(x){console.error("Error "+this.widgetId+" running custom onUnload code: "+
x.message)}},destroyDescendants:function(a){this.isLoaded&&this._onUnloadHandler();var b=this._contentSetter;c.forEach(this.getChildren(),function(b){b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a);b._destroyed=!0});b&&(c.forEach(b.parseResults,function(b){b._destroyed||(b.destroyRecursive?b.destroyRecursive(a):b.destroy&&b.destroy(a),b._destroyed=!0)}),delete b.parseResults);a||t.empty(this.containerNode);delete this._singleChild},_setContent:function(a,b){a=this.preprocessContent(a);
this.destroyDescendants();var e=this._contentSetter;e&&e instanceof k._ContentSetter||(e=this._contentSetter=new k._ContentSetter({node:this.containerNode,_onError:h.hitch(this,this._onError),onContentError:h.hitch(this,function(a){a=this.onContentError(a);try{this.containerNode.innerHTML=a}catch(B){console.error("Fatal "+this.id+" could not change content due to "+B.message,B)}})}));var c=h.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!a.domNode&&this.parseOnLoad,
parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),c=e.set(h.isObject(a)&&a.domNode?a.domNode:a,c),d=this;return p(c&&c.then?c:e.parseDeferred,function(){delete d._contentSetterParams;b||(d._started&&(d._startChildren(),d._scheduleLayout()),d._onLoadHandler(a))})},preprocessContent:function(a){return a},_onError:function(a,b,e){this.onLoadDeferred.reject(b);a=this["on"+a+"Error"].call(this,b);e?console.error(e,b):a&&this._setContent(a,
!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})})},"dijit/_Container":function(){define(["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(n,h,l,m){return h("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);this.containerNode||(this.containerNode=this.domNode)},addChild:function(d,
f){var k=this.containerNode;if(0<f){for(k=k.firstChild;0<f;)1==k.nodeType&&f--,k=k.nextSibling;k?f="before":(k=this.containerNode,f="last")}l.place(d.domNode,k,f);this._started&&!d._started&&d.startup()},removeChild:function(d){"number"==typeof d&&(d=this.getChildren()[d]);d&&(d=d.domNode)&&d.parentNode&&d.parentNode.removeChild(d)},hasChildren:function(){return 0<this.getChildren().length},_getSiblingOfChild:function(d,f){var k=this.getChildren();d=n.indexOf(k,d);return k[d+f]},getIndexOfChild:function(d){return n.indexOf(this.getChildren(),
d)}})})},"dijit/layout/_ContentPaneResizeMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/query ../registry ../Viewport ./utils".split(" "),function(n,h,l,m,d,f,k,c,b,a){return h("dijit.layout._ContentPaneResizeMixin",null,{doLayout:!0,isLayoutContainer:!0,startup:function(){if(!this._started){var a=this.getParent();this._childOfLayoutWidget=a&&a.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);
this._isShown()&&this._onShow();this._childOfLayoutWidget||this.own(b.on("resize",f.hitch(this,"resize")))}},_checkIfSingleChild:function(){if(this.doLayout){var a=[],b=!1;k("\x3e *",this.containerNode).some(function(e){var d=c.byNode(e);d&&d.resize?a.push(d):!/script|link|style/i.test(e.nodeName)&&e.offsetHeight&&(b=!0)});this._singleChild=1!=a.length||b?null:a[0];l.toggle(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild)}},resize:function(a,b){this._resizeCalled=!0;this._scheduleLayout(a,
b)},_scheduleLayout:function(a,b){this._isShown()?this._layout(a,b):(this._needLayout=!0,this._changeSize=a,this._resultSize=b)},_layout:function(b,c){delete this._needLayout;this._wasShown||!1===this.open||this._onShow();b&&m.setMarginBox(this.domNode,b);var e=this.containerNode;e===this.domNode?(c=c||{},f.mixin(c,b||{}),"h"in c&&"w"in c||(c=f.mixin(m.getMarginBox(e),c)),this._contentBox=a.marginBox2contentBox(e,c)):this._contentBox=m.getContentBox(e);this._layoutChildren()},_layoutChildren:function(){this._checkIfSingleChild();
if(this._singleChild&&this._singleChild.resize){var a=this._contentBox||m.getContentBox(this.containerNode);this._singleChild.resize({w:a.w,h:a.h})}else for(var a=this.getChildren(),b,c=0;b=a[c++];)b.resize&&b.resize()},_isShown:function(){if(this._childOfLayoutWidget)return this._resizeCalled&&"open"in this?this.open:this._resizeCalled;if("open"in this)return this.open;var a=this.domNode,b=this.domNode.parentNode;return"none"!=a.style.display&&"hidden"!=a.style.visibility&&!l.contains(a,"dijitHidden")&&
b&&b.style&&"none"!=b.style.display},_onShow:function(){this._wasShown=!0;this._needLayout&&this._layout(this._changeSize,this._resultSize);this.inherited(arguments)}})})},"dijit/layout/utils":function(){define(["dojo/_base/array","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang"],function(n,h,l,m,d){function f(b){return b.substring(0,1).toUpperCase()+b.substring(1)}function k(b,a){var e=b.resize?b.resize(a):l.setMarginBox(b.domNode,a);e?d.mixin(b,e):(d.mixin(b,l.getMarginBox(b.domNode)),
d.mixin(b,a))}var c={marginBox2contentBox:function(b,a){var e=m.getComputedStyle(b),c=l.getMarginExtents(b,e),d=l.getPadBorderExtents(b,e);return{l:m.toPixelValue(b,e.paddingLeft),t:m.toPixelValue(b,e.paddingTop),w:a.w-(c.w+d.w),h:a.h-(c.h+d.h)}},layoutChildren:function(b,a,e,c,m){a=d.mixin({},a);h.add(b,"dijitLayoutContainer");e=n.filter(e,function(a){return"center"!=a.region&&"client"!=a.layoutAlign}).concat(n.filter(e,function(a){return"center"==a.region||"client"==a.layoutAlign}));n.forEach(e,
function(b){var e=b.domNode,d=b.region||b.layoutAlign;if(!d)throw Error("No region setting for "+b.id);var l=e.style;l.left=a.l+"px";l.top=a.t+"px";l.position="absolute";h.add(e,"dijitAlign"+f(d));e={};c&&c==b.id&&(e["top"==b.region||"bottom"==b.region?"h":"w"]=m);"leading"==d&&(d=b.isLeftToRight()?"left":"right");"trailing"==d&&(d=b.isLeftToRight()?"right":"left");"top"==d||"bottom"==d?(e.w=a.w,k(b,e),a.h-=b.h,"top"==d?a.t+=b.h:l.top=a.t+a.h+"px"):"left"==d||"right"==d?(e.h=a.h,k(b,e),a.w-=b.w,"left"==
d?a.l+=b.w:l.left=a.l+a.w+"px"):"client"!=d&&"center"!=d||k(b,a)})}};d.setObject("dijit.layout.utils",c);return c})},"dojo/html":function(){define("./_base/kernel ./_base/lang ./_base/array ./_base/declare ./dom ./dom-construct ./parser".split(" "),function(n,h,l,m,d,f,k){var c=0,b={_secureForInnerHtml:function(a){return a.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"")},_emptyNode:f.empty,_setNodeContent:function(a,b){f.empty(a);if(b)if("number"==typeof b&&(b=b.toString()),
"string"==typeof b&&(b=f.toDom(b,a.ownerDocument)),!b.nodeType&&h.isArrayLike(b))for(var e=b.length,c=0;c<b.length;c=e==b.length?c+1:0)f.place(b[c],a,"last");else f.place(b,a,"last");return a},_ContentSetter:m("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:!1,extractContent:!1,parseContent:!1,parserScope:n._scopeName,startup:!0,constructor:function(a,b){h.mixin(this,a||{});b=this.node=d.byId(this.node||b);this.id||(this.id=["Setter",b?b.id||b.tagName:"",c++].join("_"))},set:function(a,
b){void 0!==a&&(this.content=a);"number"==typeof a&&(a=a.toString());b&&this._mixin(b);this.onBegin();this.setContent();return(a=this.onEnd())&&a.then?a:this.node},setContent:function(){var a=this.node;if(!a)throw Error(this.declaredClass+": setContent given no node");try{a=b._setNodeContent(a,this.content)}catch(q){var c=this.onContentError(q);try{a.innerHTML=c}catch(t){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+t.message,t)}}this.node=a},empty:function(){this.parseDeferred&&
(this.parseDeferred.isResolved()||this.parseDeferred.cancel(),delete this.parseDeferred);this.parseResults&&this.parseResults.length&&(l.forEach(this.parseResults,function(a){a.destroy&&a.destroy()}),delete this.parseResults);f.empty(this.node)},onBegin:function(){var a=this.content;if(h.isString(a)&&(this.cleanContent&&(a=b._secureForInnerHtml(a)),this.extractContent)){var c=a.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);c&&(a=c[1])}this.empty();this.content=a;return this.node},onEnd:function(){this.parseContent&&
this._parse();return this.node},tearDown:function(){delete this.parseResults;delete this.parseDeferred;delete this.node;delete this.content},onContentError:function(a){return"Error occurred setting content: "+a},onExecError:function(a){return"Error occurred executing scripts: "+a},_mixin:function(a){var b={},c;for(c in a)c in b||(this[c]=a[c])},_parse:function(){var a=this.node;try{var b={};l.forEach(["dir","lang","textDir"],function(a){this[a]&&(b[a]=this[a])},this);var c=this;this.parseDeferred=
k.parse({rootNode:a,noStart:!this.startup,inherited:b,scope:this.parserScope}).then(function(a){return c.parseResults=a},function(a){c._onError("Content",a,"Error parsing in _ContentSetter#"+c.id)})}catch(t){this._onError("Content",t,"Error parsing in _ContentSetter#"+this.id)}},_onError:function(a,c,d){a=this["on"+a+"Error"].call(this,c);d?console.error(d,c):a&&b._setNodeContent(this.node,a,!0)}}),set:function(a,c,d){void 0==c&&(console.warn("dojo.html.set: no cont argument provided, using empty string"),
c="");"number"==typeof c&&(c=c.toString());return d?(new b._ContentSetter(h.mixin(d,{content:c,node:a}))).set():b._setNodeContent(a,c,!0)}};h.setObject("dojo.html",b);return b})},"dojo/parser":function(){define("require ./_base/kernel ./_base/lang ./_base/array ./_base/config ./dom ./_base/window ./_base/url ./aspect ./promise/all ./date/stamp ./Deferred ./has ./query ./on ./ready".split(" "),function(n,h,l,m,d,f,k,c,b,a,e,q,t,w,z,p){function x(a){return eval("("+a+")")}function F(a){var b=a._nameCaseMap,
c=a.prototype;if(!b||b._extendCnt<v){var b=a._nameCaseMap={},e;for(e in c)"_"!==e.charAt(0)&&(b[e.toLowerCase()]=e);b._extendCnt=v}return b}function y(a,b){b||(b=n);var c=b._dojoParserCtorMap||(b._dojoParserCtorMap={}),e=a.join();if(!c[e]){for(var d=[],f=0,g=a.length;f<g;f++){var r=a[f];d[d.length]=c[r]=c[r]||l.getObject(r)||~r.indexOf("/")&&b(r)}a=d.shift();c[e]=d.length?a.createSubclass?a.createSubclass(d):a.extend.apply(a,d):a}return c[e]}new Date("X");var v=0;b.after(l,"extend",function(){v++},
!0);t={_clearCache:function(){v++;_ctorMap={}},_functionFromScript:function(a,b){var c="",e="",d=a.getAttribute(b+"args")||a.getAttribute("args");b=a.getAttribute("with");d=(d||"").split(/\s*,\s*/);b&&b.length&&m.forEach(b.split(/\s*,\s*/),function(a){c+="with("+a+"){";e+="}"});return new Function(d,c+a.innerHTML+e)},instantiate:function(a,b,c){b=b||{};c=c||{};var e=(c.scope||h._scopeName)+"Type",d="data-"+(c.scope||h._scopeName)+"-",f=d+"type",g=d+"mixins",r=[];m.forEach(a,function(a){var c=e in
b?b[e]:a.getAttribute(f)||a.getAttribute(e);if(c){var d=a.getAttribute(g),c=d?[c].concat(d.split(/\s*,\s*/)):[c];r.push({node:a,types:c})}});return this._instantiate(r,b,c)},_instantiate:function(b,c,e,d){function f(a){c._started||e.noStart||m.forEach(a,function(a){"function"!==typeof a.startup||a._started||a.startup()});return a}b=m.map(b,function(a){var b=a.ctor||y(a.types,e.contextRequire);if(!b)throw Error("Unable to resolve constructor for: '"+a.types.join()+"'");return this.construct(b,a.node,
c,e,a.scripts,a.inherited)},this);return d?a(b).then(f):f(b)},construct:function(a,d,f,k,m,q){function g(a){A&&l.setObject(A,a);for(t=0;t<K.length;t++)b[K[t].advice||"after"](a,K[t].method,l.hitch(a,K[t].func),!0);for(t=0;t<P.length;t++)P[t].call(a);for(t=0;t<G.length;t++)a.watch(G[t].prop,G[t].func);for(t=0;t<D.length;t++)z(a,D[t].event,D[t].func);return a}var r=a&&a.prototype;k=k||{};var E={};k.defaults&&l.mixin(E,k.defaults);q&&l.mixin(E,q);var n;n=d.attributes;var p=k.scope||h._scopeName;q="data-"+
p+"-";var u={};"dojo"!==p&&(u[q+"props"]="data-dojo-props",u[q+"type"]="data-dojo-type",u[q+"mixins"]="data-dojo-mixins",u[p+"type"]="dojotype",u[q+"id"]="data-dojo-id");for(var t=0,v,p=[],A,C;v=n[t++];){var B=v.name,y=B.toLowerCase();v=v.value;switch(u[y]||y){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":C=v;break;case "data-dojo-id":case "jsid":A=v;break;case "data-dojo-attach-point":case "dojoattachpoint":E.dojoAttachPoint=v;break;case "data-dojo-attach-event":case "dojoattachevent":E.dojoAttachEvent=
v;break;case "class":E["class"]=d.className;break;case "style":E.style=d.style&&d.style.cssText;break;default:if(B in r||(B=F(a)[y]||B),B in r)switch(typeof r[B]){case "string":E[B]=v;break;case "number":E[B]=v.length?Number(v):NaN;break;case "boolean":E[B]="false"!=v.toLowerCase();break;case "function":""===v||-1!=v.search(/[^\w\.]+/i)?E[B]=new Function(v):E[B]=l.getObject(v,!1)||new Function(v);p.push(B);break;default:y=r[B],E[B]=y&&"length"in y?v?v.split(/\s*,\s*/):[]:y instanceof Date?""==v?new Date(""):
"now"==v?new Date:e.fromISOString(v):y instanceof c?h.baseUrl+v:x(v)}else E[B]=v}}for(n=0;n<p.length;n++)u=p[n].toLowerCase(),d.removeAttribute(u),d[u]=null;if(C)try{C=x.call(k.propsThis,"{"+C+"}"),l.mixin(E,C)}catch(Q){throw Error(Q.toString()+" in data-dojo-props\x3d'"+C+"'");}l.mixin(E,f);m||(m=a&&(a._noScript||r._noScript)?[]:w("\x3e script[type^\x3d'dojo/']",d));var K=[],P=[],G=[],D=[];if(m)for(t=0;t<m.length;t++)u=m[t],d.removeChild(u),f=u.getAttribute(q+"event")||u.getAttribute("event"),k=
u.getAttribute(q+"prop"),C=u.getAttribute(q+"method"),p=u.getAttribute(q+"advice"),n=u.getAttribute("type"),u=this._functionFromScript(u,q),f?"dojo/connect"==n?K.push({method:f,func:u}):"dojo/on"==n?D.push({event:f,func:u}):E[f]=u:"dojo/aspect"==n?K.push({method:C,advice:p,func:u}):"dojo/watch"==n?G.push({prop:k,func:u}):P.push(u);a=(m=a.markupFactory||r.markupFactory)?m(E,d,a):new a(E,d);return a.then?a.then(g):g(a)},scan:function(a,b){function c(a){if(!a.inherited){a.inherited={};var b=a.node,g=
c(a.parent),b={dir:b.getAttribute("dir")||g.dir,lang:b.getAttribute("lang")||g.lang,textDir:b.getAttribute(l)||g.textDir},e;for(e in b)b[e]&&(a.inherited[e]=b[e])}return a.inherited}var e=[],d=[],f={},g=(b.scope||h._scopeName)+"Type",r="data-"+(b.scope||h._scopeName)+"-",k=r+"type",l=r+"textdir",r=r+"mixins",p=a.firstChild,u=b.inherited;if(!u){var w=function(a,b){return a.getAttribute&&a.getAttribute(b)||a.parentNode&&w(a.parentNode,b)},u={dir:w(a,"dir"),lang:w(a,"lang"),textDir:w(a,l)},t;for(t in u)u[t]||
delete u[t]}t={inherited:u};for(var v,C;;)if(p)if(1!=p.nodeType)p=p.nextSibling;else if(v&&"script"==p.nodeName.toLowerCase())(u=p.getAttribute("type"))&&/^dojo\/\w/i.test(u)&&v.push(p),p=p.nextSibling;else if(C)p=p.nextSibling;else if(u=p.getAttribute(k)||p.getAttribute(g),a=p.firstChild,u||a&&(3!=a.nodeType||a.nextSibling)){C=null;if(u){var x=p.getAttribute(r);v=x?[u].concat(x.split(/\s*,\s*/)):[u];try{C=y(v,b.contextRequire)}catch(K){}C||m.forEach(v,function(a){~a.indexOf("/")&&!f[a]&&(f[a]=!0,
d[d.length]=a)});x=C&&!C.prototype._noScript?[]:null;t={types:v,ctor:C,parent:t,node:p,scripts:x};t.inherited=c(t);e.push(t)}else t={node:p,scripts:v,parent:t};v=x;C=p.stopParser||C&&C.prototype.stopParser&&!b.template;p=a}else p=p.nextSibling;else{if(!t||!t.node)break;p=t.node.nextSibling;C=!1;t=t.parent;v=t.scripts}var z=new q;d.length?(b.contextRequire||n)(d,function(){z.resolve(m.filter(e,function(a){if(!a.ctor)try{a.ctor=y(a.types,b.contextRequire)}catch(R){}for(var g=a.parent;g&&!g.types;)g=
g.parent;var c=a.ctor&&a.ctor.prototype;a.instantiateChildren=!(c&&c.stopParser&&!b.template);a.instantiate=!g||g.instantiate&&g.instantiateChildren;return a.instantiate}))}):z.resolve(e);return z.promise},_require:function(a,b){a=x("{"+a.innerHTML+"}");var c=[],e=[],d=new q;b=b&&b.contextRequire||n;for(var f in a)c.push(f),e.push(a[f]);b(e,function(){for(var a=0;a<c.length;a++)l.setObject(c[a],arguments[a]);d.resolve(arguments)});return d.promise},_scanAmd:function(a,b){var c=new q,e=c.promise;c.resolve(!0);
var d=this;w("script[type\x3d'dojo/require']",a).forEach(function(a){e=e.then(function(){return d._require(a,b)});a.parentNode.removeChild(a)});return e},parse:function(a,b){!a||"string"==typeof a||"nodeType"in a||(b=a,a=b.rootNode);var c=a?f.byId(a):k.body();b=b||{};var e=b.template?{template:!0}:{},d=[],h=this;a=this._scanAmd(c,b).then(function(){return h.scan(c,b)}).then(function(a){return h._instantiate(a,e,b,!0)}).then(function(a){return d=d.concat(a)}).otherwise(function(a){console.error("dojo/parser::parse() error",
a);throw a;});l.mixin(d,a);return d}};h.parser=t;d.parseOnLoad&&p(100,t,"parse");return t})},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(n,h){var l={};n.setObject("dojo.date.stamp",l);l.fromISOString=function(m,d){l._isoRegExp||(l._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/);var f=l._isoRegExp.exec(m);m=null;if(f){f.shift();f[1]&&f[1]--;f[6]&&(f[6]*=1E3);d&&(d=new Date(d),h.forEach(h.map("FullYear Month Date Hours Minutes Seconds Milliseconds".split(" "),
function(b){return d["get"+b]()}),function(b,a){f[a]=f[a]||b}));m=new Date(f[0]||1970,f[1]||0,f[2]||1,f[3]||0,f[4]||0,f[5]||0,f[6]||0);100>f[0]&&m.setFullYear(f[0]||1970);var k=0,c=f[7]&&f[7].charAt(0);"Z"!=c&&(k=60*(f[8]||0)+(Number(f[9])||0),"-"!=c&&(k*=-1));c&&(k-=m.getTimezoneOffset());k&&m.setTime(m.getTime()+6E4*k)}return m};l.toISOString=function(h,d){var f=function(a){return 10>a?"0"+a:a};d=d||{};var k=[],c=d.zulu?"getUTC":"get",b="";"time"!=d.selector&&(b=h[c+"FullYear"](),b=["0000".substr((b+
"").length)+b,f(h[c+"Month"]()+1),f(h[c+"Date"]())].join("-"));k.push(b);"date"!=d.selector&&(b=[f(h[c+"Hours"]()),f(h[c+"Minutes"]()),f(h[c+"Seconds"]())].join(":"),c=h[c+"Milliseconds"](),d.milliseconds&&(b+="."+(100>c?"0":"")+f(c)),d.zulu?b+="Z":"time"!=d.selector&&(h=h.getTimezoneOffset(),d=Math.abs(h),b+=(0<h?"-":"+")+f(Math.floor(d/60))+":"+f(d%60)),k.push(b));return k.join("T")};return l})},"esri/core/domUtils":function(){define(["dojo/on","dojo/dom-style","./has"],function(n,h,l){var m={show:function(d){if(d=
m.getNode(d))d.style.display="block"},getNode:function(d){return d&&d.domNode||d},hide:function(d){if(d=m.getNode(d))d.style.display="none"},toggle:function(d){if(d=m.getNode(d))d.style.display="none"===d.style.display?"block":"none"},documentBox:8>=l("ie")?{w:document.documentElement.clientWidth,h:document.documentElement.clientHeight}:{w:window.innerWidth,h:window.innerHeight},setScrollable:function(d){if(d=this.getNode(d)){var f=0,k=0,c=0,b=0,a=0,e=0;return[n(d,"touchstart",function(h){f=h.touches[0].screenX;
k=h.touches[0].screenY;c=d.scrollWidth;b=d.scrollHeight;a=d.clientWidth;e=d.clientHeight}),n(d,"touchmove",function(l){l.preventDefault();var m=d.firstChild;m instanceof Text&&(m=d.childNodes[1]);var q=m._currentX||0,n=m._currentY||0,q=q+(l.touches[0].screenX-f);0<q?q=0:0>q&&Math.abs(q)+a>c&&(q=-1*(c-a));m._currentX=q;n+=l.touches[0].screenY-k;0<n?n=0:0>n&&Math.abs(n)+e>b&&(n=-1*(b-e));m._currentY=n;h.set(m,{"-webkit-transition-property":"-webkit-transform","-webkit-transform":"translate("+q+"px, "+
n+"px)"});f=l.touches[0].screenX;k=l.touches[0].screenY})]}}};return m})},"esri/identity/Credential":function(){define(["./IdentityManagerBase"],function(n){return n.Credential})},"esri/identity/IdentityManagerBase":function(){define("../core/declare dojo/_base/array dojo/Deferred dojo/_base/url dojo/cookie dojo/io-query dojo/regexp ../kernel ../config ../core/global ../core/has ../core/lang ../core/object ./ServerInfo ../core/urlUtils ../core/deferredUtils ../core/Accessor ../request ../core/Error ../core/Evented ./OAuthCredential ./OAuthInfo".split(" "),
function(n,h,l,m,d,f,k,c,b,a,e,q,t,w,z,p,x,F,y,v,A,u){var B={},G=function(a){var b=(new m(a.owningSystemUrl)).host;a=(new m(a.server)).host;var g=/.+\.arcgis\.com$/i;return g.test(b)&&g.test(a)},H=function(a,b){return!!(G(a)&&b&&h.some(b,function(b){return b.test(a.server)}))},D;n=n(v,{declaredClass:"esri.identity.IdentityManagerBase",constructor:function(){this._portalConfig=a.esriGeowConfig;this.serverInfos=[];this.oAuthInfos=[];this.credentials=[];this._soReqs=[];this._xoReqs=[];this._portals=
[];this._getOAuthHash();window.addEventListener("pageshow",function(a){this._pageShowHandler(a)}.bind(this))},defaultOAuthInfo:null,defaultTokenValidity:60,tokenValidity:null,signInPage:null,useSignInPage:!0,normalizeWebTierAuth:!1,_busy:null,_rejectOnPersistedPageShow:!1,_oAuthHash:null,_gwTokenUrl:"/sharing/generateToken",_agsRest:"/rest/services",_agsPortal:/\/sharing(\/|$)/i,_agsAdmin:/https?:\/\/[^\/]+\/[^\/]+\/admin\/?(\/.*)?$/i,_adminSvcs:/\/admin\/services(\/|$)/i,_agolSuffix:".arcgis.com",
_gwDomains:[{regex:/https?:\/\/www\.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/dev\.arcgis\.com/i,tokenServiceUrl:"https://dev.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*dev[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://devext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*qa[^.]*\.arcgis\.com/i,tokenServiceUrl:"https://qaext.arcgis.com/sharing/generateToken"},{regex:/https?:\/\/.*.arcgis\.com/i,tokenServiceUrl:"https://www.arcgis.com/sharing/generateToken"}],
_legacyFed:[],_regexSDirUrl:/http.+\/rest\/services\/?/ig,_regexServerType:/(\/(MapServer|GeocodeServer|GPServer|GeometryServer|ImageServer|NAServer|FeatureServer|GeoDataServer|GlobeServer|MobileServer|GeoenrichmentServer|VectorTileServer|SceneServer)).*/ig,_gwUser:/http.+\/users\/([^\/]+)\/?.*/i,_gwItem:/http.+\/items\/([^\/]+)\/?.*/i,_gwGroup:/http.+\/groups\/([^\/]+)\/?.*/i,_errorCodes:[499,498,403,401],_rePortalTokenSvc:/\/sharing(\/rest)?\/generatetoken/i,_publicUrls:[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,
/\/rest\/info/i],_createDefaultOAuthInfo:!0,_hasTestedIfAppIsOnPortal:!1,registerServers:function(a){var b=this.serverInfos;b?(a=h.filter(a,function(a){return!this.findServerInfo(a.server)},this),this.serverInfos=b.concat(a)):this.serverInfos=a;h.forEach(a,function(a){a.owningSystemUrl&&this._portals.push(a.owningSystemUrl);a.hasPortal&&this._portals.push(a.server)},this)},registerOAuthInfos:function(a){var b=this.oAuthInfos;b?(a=h.filter(a,function(a){return!this.findOAuthInfo(a.portalUrl)},this),
this.oAuthInfos=b.concat(a)):this.oAuthInfos=a},registerToken:function(a){a=q.mixin({},a);var b=this._sanitizeUrl(a.server),g=this.findServerInfo(b),c=this._isServerRsrc(b),e=!0,d;g||(g=new w,g.server=this._getServerInstanceRoot(b),c?g.hasServer=!0:(g.tokenServiceUrl=this._getTokenSvcUrl(b),g.hasPortal=!0),this.registerServers([g]));(d=this._findCredential(b))?(delete a.server,q.mixin(d,a),e=!1):(d=new D({userId:a.userId,server:g.server,token:a.token,expires:a.expires,ssl:a.ssl,scope:c?"server":"portal"}),
d.resources=[b],this.credentials.push(d));d.emitTokenChange(!1);e||d.refreshServerTokens()},toJSON:function(){return q.fixJson({serverInfos:h.map(this.serverInfos,function(a){return a.toJSON()}),oAuthInfos:h.map(this.oAuthInfos,function(a){return a.toJSON()}),credentials:h.map(this.credentials,function(a){return a.toJSON()})})},initialize:function(a){if(a){"string"===typeof a&&(a=JSON.parse(a));var b=a.serverInfos,g=a.oAuthInfos;a=a.credentials;if(b){var c=[];h.forEach(b,function(a){a.server&&a.tokenServiceUrl&&
c.push(a.declaredClass?a:new w(a))});c.length&&this.registerServers(c)}if(g){var e=[];h.forEach(g,function(a){a.appId&&e.push(a.declaredClass?a:new u(a))});e.length&&this.registerOAuthInfos(e)}a&&h.forEach(a,function(a){a.server&&a.token&&a.expires&&a.expires>(new Date).getTime()&&(a=a.declaredClass?a:new D(a),a.emitTokenChange(),this.credentials.push(a))},this)}},findServerInfo:function(a){var b;a=this._sanitizeUrl(a);h.some(this.serverInfos,function(g){this._hasSameServerInstance(g.server,a)&&(b=
g);return!!b},this);return b},findOAuthInfo:function(a){var b;a=this._sanitizeUrl(a);h.some(this.oAuthInfos,function(g){this._hasSameServerInstance(g.portalUrl,a)&&(b=g);return!!b},this);return b},findCredential:function(a,b){var g,c;a=this._sanitizeUrl(a);c=this._isServerRsrc(a)?"server":"portal";b?h.some(this.credentials,function(e){this._hasSameServerInstance(e.server,a)&&b===e.userId&&e.scope===c&&(g=e);return!!g},this):h.some(this.credentials,function(b){this._hasSameServerInstance(b.server,
a)&&-1!==this._getIdenticalSvcIdx(a,b)&&b.scope===c&&(g=b);return!!g},this);return g},getCredential:function(a,b){var g,c,e=!0;null!=b&&("object"===typeof b?(g=!!b.token,c=b.error,e=!1!==b.prompt):g=b);a=this._sanitizeUrl(a);var f=p.makeDeferredCancellingPending(),r=this._isAdminResource(a),k=g&&this._doPortalSignIn(a)?this._getEsriAuthCookie():null;if((g=g?this.findCredential(a):null)&&c&&498===c.code)g.destroy(),k&&k.token===b.token&&d("esri_auth",null,{expires:-1,path:"/",domain:document.domain});
else if(k||g)return a=new y("identity-manager:not-authorized","You are currently signed in as: '"+(k&&k.email||g&&g.userId)+"'. You do not have access to this resource: "+a,{error:c}),f.reject(a),f.promise;if(c=this._findCredential(a,b))return f.resolve(c),f.promise;c=this.findServerInfo(a);if(c)!c.hasServer&&this._isServerRsrc(a)&&(c._restInfoPms=this._getTokenSvcUrl(a),c.hasServer=!0);else{k=this._getTokenSvcUrl(a);if(!k)return a=new y("identity-manager:unknown-resource","Unknown resource - could not find token service endpoint."),
f.reject(a),f.promise;c=new w;c.server=this._getServerInstanceRoot(a);"string"===typeof k?(c.tokenServiceUrl=k,c.hasPortal=!0):(c._restInfoPms=k,c.hasServer=!0);this.registerServers([c])}e&&c.hasPortal&&void 0===c._selfReq&&!this._findOAuthInfo(a)&&(c._selfReq={owningTenant:b&&b.owningTenant,selfDfd:this._getPortalSelf(c.tokenServiceUrl.replace(this._rePortalTokenSvc,"/sharing/rest/portals/self"),a)});return this._enqueue(a,c,b,f,r)},getResourceName:function(a){return this._isRESTService(a)?a.replace(this._regexSDirUrl,
"").replace(this._regexServerType,"")||"":this._gwUser.test(a)&&a.replace(this._gwUser,"$1")||this._gwItem.test(a)&&a.replace(this._gwItem,"$1")||this._gwGroup.test(a)&&a.replace(this._gwGroup,"$1")||""},generateToken:function(a,b,e){var g,d,f,r,k,h,l=this._rePortalTokenSvc.test(a.tokenServiceUrl),n=new m(window.location.href.toLowerCase()),p=this._getEsriAuthCookie(),u,E=!b;r=a.shortLivedTokenValidity;var t;b&&(t=c.id.tokenValidity||r||c.id.defaultTokenValidity,t>r&&0<r&&(t=r));e&&(g=e.isAdmin,d=
e.serverUrl,f=e.token,h=e.ssl,a.customParameters=e.customParameters);g?r=a.adminTokenServiceUrl:(r=a.tokenServiceUrl,k=new m(r.toLowerCase()),p&&(u=(u=p.auth_tier)&&u.toLowerCase()),("web"===u||a.webTierAuth)&&e&&e.serverUrl&&!h&&"http"===n.scheme&&(z.hasSameOrigin(n.uri,r,!0)||"https"===k.scheme&&n.host===k.host&&"7080"===n.port&&"7443"===k.port)&&(r=r.replace(/^https:/i,"http:").replace(/:7443/i,":7080")),E&&l&&(r=r.replace(/\/rest/i,"")));e=q.mixin({query:q.mixin({request:"getToken",username:b&&
b.username,password:b&&b.password,serverUrl:d,token:f,expiration:t,referer:g||l?window.location.host:null,client:g?"referer":null,f:"json"},a.customParameters),method:E?"auto":"post",authMode:"anonymous",useProxy:this._useProxy(a,e),responseType:"json"},e&&e.ioArgs);l||(e.withCredentials=!1);return F(r,e).then(function(g){g=g.data;if(!g||!g.token)return new y("identity-manager:authentication-failed","Unable to generate token");var c=a.server;B[c]||(B[c]={});b&&(B[c][b.username]=b.password);g.validity=
t;return g})},isBusy:function(){return!!this._busy},checkSignInStatus:function(a){return this.getCredential(a,{prompt:!1}).then(function(a){return a.token?F(a.server+("portal"===a.scope?"/sharing/rest":"/rest/services"),{query:{f:"json",token:a.token},authMode:"anonymous"}).then(function(){return a}).catch(function(b){if(498===b.code)throw a.destroy(),new y("identity-manager:not-authenticated","User is not signed in.");return a}):a})},setRedirectionHandler:function(a){this._redirectFunc=a},setProtocolErrorHandler:function(a){this._protocolFunc=
a},signIn:function(){},oAuthSignIn:function(){},destroyCredentials:function(){if(this.credentials){var a=this.credentials.slice();h.forEach(a,function(a){a.destroy()})}this.emit("credentials-destroy")},_getOAuthHash:function(){var a=window.location.hash;if(a){"#"===a.charAt(0)&&(a=a.substring(1));var a=f.queryToObject(a),b=!1;a.access_token&&a.expires_in&&a.state&&a.hasOwnProperty("username")?(a.state=JSON.parse(a.state),this._oAuthHash=a,b=!0):a.error&&a.error_description&&(console.log("IdentityManager OAuth Error: ",
a.error," - ",a.error_description),"access_denied"===a.error&&(b=!0));b&&(!e("ie")||8<e("ie"))&&(window.location.hash="")}},_pageShowHandler:function(a){a.persisted&&this.isBusy()&&this._rejectOnPersistedPageShow&&(a=new y("identity-manager:user-aborted","ABORTED"),this._errbackFunc(a))},_findCredential:function(a,b){var g=-1,c,e,d,f=b&&b.token;b=b&&b.resource;var r=this._isServerRsrc(a)?"server":"portal",k=h.filter(this.credentials,function(b){return this._hasSameServerInstance(b.server,a)&&b.scope===
r},this);a=b||a;if(k.length)if(1===k.length)if(b=k[0],e=(c=(d=this.findServerInfo(b.server))&&d.owningSystemUrl)&&this.findCredential(c,b.userId),g=this._getIdenticalSvcIdx(a,b),f)-1!==g&&(b.resources.splice(g,1),this._removeResource(a,e));else return-1===g&&b.resources.push(a),this._addResource(a,e),b;else{var l,m;h.some(k,function(b){m=this._getIdenticalSvcIdx(a,b);return-1!==m?(l=b,e=(c=(d=this.findServerInfo(l.server))&&d.owningSystemUrl)&&this.findCredential(c,l.userId),g=m,!0):!1},this);if(f)l&&
(l.resources.splice(g,1),this._removeResource(a,e));else if(l)return this._addResource(a,e),l}},_findOAuthInfo:function(a){var b=this.findOAuthInfo(a);b||h.some(this.oAuthInfos,function(g){this._isIdProvider(g.portalUrl,a)&&(b=g);return!!b},this);return b},_addResource:function(a,b){b&&-1===this._getIdenticalSvcIdx(a,b)&&b.resources.push(a)},_removeResource:function(a,b){var g=-1;b&&(g=this._getIdenticalSvcIdx(a,b),-1<g&&b.resources.splice(g,1))},_useProxy:function(a,b){return b&&b.isAdmin&&!z.hasSameOrigin(a.adminTokenServiceUrl,
window.location.href)||!this._isPortalDomain(a.tokenServiceUrl)&&10.1==a.currentVersion&&!z.hasSameOrigin(a.tokenServiceUrl,window.location.href)},_getOrigin:function(a){a=new m(a);return a.scheme+"://"+a.host+(null!=a.port?":"+a.port:"")},_getServerInstanceRoot:function(a){var b=a.toLowerCase(),g=b.indexOf(this._agsRest);-1===g&&this._isAdminResource(a)&&(g=b.indexOf("/admin"));-1===g&&(g=b.indexOf("/sharing"));-1===g&&"/"===b.substr(-1)&&(g=b.length-1);return-1<g?a.substring(0,g):a},_hasSameServerInstance:function(a,
b){"/"===a.substr(-1)&&(a=a.slice(0,-1));a=a.toLowerCase();b=this._getServerInstanceRoot(b).toLowerCase();a=this._normalizeAGOLorgDomain(a);b=this._normalizeAGOLorgDomain(b);a=a.substr(a.indexOf(":"));b=b.substr(b.indexOf(":"));return a===b},_normalizeAGOLorgDomain:function(a){var b=/^https?:\/\/.+\.maps\.arcgis\.com/i,g=/^https?:\/\/.+\.mapsdevext\.arcgis\.com/i,c=/^https?:\/\/.+\.mapsqa\.arcgis\.com/i;b.test(a)?a=a.replace(b,"https://www.arcgis.com"):g.test(a)?a=a.replace(g,"https://devext.arcgis.com"):
c.test(a)&&(a=a.replace(c,"https://qaext.arcgis.com"));return a},_sanitizeUrl:function(a){var c=(b.request.proxyUrl||"").toLowerCase(),g=c?a.toLowerCase().indexOf(c+"?"):-1;-1!==g&&(a=a.substring(g+c.length+1));a=z.normalize(a);return z.urlToObject(a).path},_isRESTService:function(a){return-1<a.indexOf(this._agsRest)},_isAdminResource:function(a){return this._agsAdmin.test(a)||this._adminSvcs.test(a)},_isServerRsrc:function(a){return this._isRESTService(a)||this._isAdminResource(a)},_isIdenticalService:function(a,
b){var c;this._isRESTService(a)&&this._isRESTService(b)?(a=this._getSuffix(a).toLowerCase(),b=this._getSuffix(b).toLowerCase(),c=a===b,c||(c=/(.*)\/(MapServer|FeatureServer).*/ig,c=a.replace(c,"$1")===b.replace(c,"$1"))):this._isAdminResource(a)&&this._isAdminResource(b)?c=!0:this._isServerRsrc(a)||this._isServerRsrc(b)||!this._isPortalDomain(a)||(c=!0);return c},_isPortalDomain:function(b){b=b.toLowerCase();var c=(new m(b)).authority,g=this._portalConfig,e=-1!==c.indexOf(this._agolSuffix);!e&&g&&
(e=this._hasSameServerInstance(this._getServerInstanceRoot(g.restBaseUrl),b));e||(!this._arcgisUrl&&(g=t.getDeepValue("esri.arcgis.utils.arcgisUrl",a))&&(this._arcgisUrl=(new m(g)).authority),this._arcgisUrl&&(e=this._arcgisUrl.toLowerCase()===c));e||(e=h.some(this._portals,function(a){return this._hasSameServerInstance(a,b)},this));return e=e||this._agsPortal.test(b)},_isIdProvider:function(a,b){var c=-1,g=-1;h.forEach(this._gwDomains,function(e,d){-1===c&&e.regex.test(a)&&(c=d);-1===g&&e.regex.test(b)&&
(g=d)});var e=!1;if(-1<c&&-1<g)if(0===c||4===c){if(0===g||4===g)e=!0}else if(1===c){if(1===g||2===g)e=!0}else 2===c?2===g&&(e=!0):3===c&&3===g&&(e=!0);if(!e){var d=this.findServerInfo(b),f=d&&d.owningSystemUrl;f&&G(d)&&this._isPortalDomain(f)&&this._isIdProvider(a,f)&&(e=!0)}return e},_isPublic:function(a){a=this._sanitizeUrl(a);return h.some(this._publicUrls,function(b){return b.test(a)})},_getIdenticalSvcIdx:function(a,b){var c=-1;h.some(b.resources,function(b,g){return this._isIdenticalService(a,
b)?(c=g,!0):!1},this);return c},_getSuffix:function(a){return a.replace(this._regexSDirUrl,"").replace(this._regexServerType,"$1")},_getTokenSvcUrl:function(a){var b,c,g=this._isRESTService(a);if(g||this._isAdminResource(a))return c=a.toLowerCase().indexOf(g?this._agsRest:"/admin/"),b=a.substring(0,c)+"/admin/generateToken",a=a.substring(0,c)+(g?"/rest/info":"/info"),c=F(a,{query:{f:"json"},responseType:"json"}).then(function(a){return a.data}),{adminUrl:b,promise:c};if(this._isPortalDomain(a)){var e=
"";h.some(this._gwDomains,function(b){b.regex.test(a)&&(e=b.tokenServiceUrl);return!!e});e||h.some(this._portals,function(b){this._hasSameServerInstance(b,a)&&(e=b+this._gwTokenUrl);return!!e},this);e||(c=a.toLowerCase().indexOf("/sharing"),-1!==c&&(e=a.substring(0,c)+this._gwTokenUrl));e||(e=this._getOrigin(a)+this._gwTokenUrl);e&&(b=(new m(a)).port,/^http:\/\//i.test(a)&&"7080"===b&&(e=e.replace(/:7080/i,":7443")),e=e.replace(/http:/i,"https:"));return e}if(-1!==a.toLowerCase().indexOf("premium.arcgisonline.com"))return"https://premium.arcgisonline.com/server/tokens"},
_getPortalSelf:function(a,b){"https:"===window.location.protocol?a=a.replace(/^http:/i,"https:").replace(/:7080/i,":7443"):/^http:/i.test(b)&&(a=a.replace(/^https:/i,"http:").replace(/:7443/i,":7080"));return F(a,{query:{f:"json"},authMode:"anonymous",responseType:"json",withCredentials:!0}).then(function(a){return a.data})},_hasPortalSession:function(){return!!this._getEsriAuthCookie()},_getEsriAuthCookie:function(){var a=null;if(d.isSupported()){var b=this._getAllCookies("esri_auth"),c;for(c=0;c<
b.length;c++){var e=JSON.parse(b[c]);if(e.portalApp){a=e;break}}}a&&(b=null,a.expires&&("number"===typeof a.expires?b=a.expires:"string"===typeof a.expires&&(b=Date.parse(a.expires)),isNaN(b)&&(b=null),a.expires=b),b&&b<Date.now()&&(a=null));return a},_getAllCookies:function(a){var b=[],c=document.cookie.match(new RegExp("(?:^|; )"+k.escapeString(a)+"\x3d([^;]*)","g"));if(c)for(a=0;a<c.length;a++){var e=c[a],g=e.indexOf("\x3d");-1<g&&(e=e.substring(g+1),b.push(decodeURIComponent(e)))}return b},_doPortalSignIn:function(a){if(d.isSupported()){var b=
this._getEsriAuthCookie(),c=this._portalConfig,e=window.location.href,g=this.findServerInfo(a);if(this.useSignInPage&&(c||this._isPortalDomain(e)||b)&&(g?g.hasPortal||g.owningSystemUrl&&this._isPortalDomain(g.owningSystemUrl):this._isPortalDomain(a))&&(this._isIdProvider(e,a)||c&&(this._hasSameServerInstance(this._getServerInstanceRoot(c.restBaseUrl),a)||this._isIdProvider(c.restBaseUrl,a))||z.hasSameOrigin(e,a,!0)))return!0}return!1},_checkProtocol:function(a,b,c,e){var g=!0;e=e?b.adminTokenServiceUrl:
b.tokenServiceUrl;0===e.trim().toLowerCase().indexOf("https:")&&0!==window.location.href.toLowerCase().indexOf("https:")&&z.getProxyRule(e)&&(g=this._protocolFunc?!!this._protocolFunc({resourceUrl:a,serverInfo:b}):!1,g||(a=new y("identity-manager:aborted","Aborted the Sign-In process to avoid sending password over insecure connection."),c(a)));return g},_enqueue:function(a,b,c,e,d,f){e||(e=p.makeDeferredCancellingPending());e.resUrl_=a;e.sinfo_=b;e.options_=c;e.admin_=d;e.refresh_=f;this._busy?this._hasSameServerInstance(this._getServerInstanceRoot(a),
this._busy.resUrl_)?(this._oAuthDfd&&this._oAuthDfd.oAuthWin_&&this._oAuthDfd.oAuthWin_.focus(),this._soReqs.push(e)):this._xoReqs.push(e):this._doSignIn(e);return e.promise},_doSignIn:function(a){this._busy=a;this._rejectOnPersistedPageShow=!1;var b=this,c=function(c){var e=a.options_&&a.options_.resource,d=a.resUrl_,g=a.refresh_,f=!1;-1===h.indexOf(b.credentials,c)&&(g&&-1!==h.indexOf(b.credentials,g)?(g.userId=c.userId,g.token=c.token,g.expires=c.expires,g.validity=c.validity,g.ssl=c.ssl,g.creationTime=
c.creationTime,f=!0,c=g):b.credentials.push(c));c.resources||(c.resources=[]);c.resources.push(e||d);c.scope=b._isServerRsrc(d)?"server":"portal";c.emitTokenChange();var e=b._soReqs,k={};b._soReqs=[];h.forEach(e,function(a){if(!this._isIdenticalService(d,a.resUrl_)){var b=this._getSuffix(a.resUrl_);k[b]||(k[b]=!0,c.resources.push(a.resUrl_))}},b);a.resolve(c);h.forEach(e,function(a){this._hasSameServerInstance(this._getServerInstanceRoot(d),a.resUrl_)?a.resolve(c):this._soReqs.push(a)},b);b._busy=
a.resUrl_=a.sinfo_=a.refresh_=null;f||b.emit("credential-create",{credential:c});b._soReqs.length?b._doSignIn(b._soReqs.shift()):b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},e=function(c){a.reject(c);b._busy=a.resUrl_=a.sinfo_=a.refresh_=null;b._soReqs.length?b._doSignIn(b._soReqs.shift()):b._xoReqs.length&&b._doSignIn(b._xoReqs.shift())},d=function(d,g,f,k){var h=a.sinfo_,l=!a.options_||!1!==a.options_.prompt,m=h.hasPortal&&b._findOAuthInfo(a.resUrl_);b._doPortalSignIn(a.resUrl_)?(d=b._getEsriAuthCookie(),
m=b._portalConfig,d?(h.webTierAuth||"web"!==(d.auth_tier&&d.auth_tier.toLowerCase())||(h.webTierAuth=!0),c(new D({userId:d.email,server:h.server,token:d.token,expires:d.expires}))):l?(l="",d=window.location.href,l=b.signInPage?b.signInPage:m?m.baseUrl+m.signin:b._isIdProvider(d,a.resUrl_)?b._getOrigin(d)+"/home/signin.html":h.tokenServiceUrl.replace(b._rePortalTokenSvc,"")+"/home/signin.html",l=l.replace(/http:/i,"https:"),m&&!1===m.useSSL&&(l=l.replace(/https:/i,"http:")),0===d.toLowerCase().replace("https",
"http").indexOf(l.toLowerCase().replace("https","http"))?(h=new y("identity-manager:unexpected-error","Cannot redirect to Sign-In page from within Sign-In page. URL of the resource that triggered this workflow: "+a.resUrl_),e(h)):(b._rejectOnPersistedPageShow=!0,b._redirectFunc?b._redirectFunc({signInPage:l,returnUrlParamName:"returnUrl",returnUrl:d,resourceUrl:a.resUrl_,serverInfo:h}):window.location=l+"?returnUrl\x3d"+window.escape(d))):(h=new y("identity-manager:not-authenticated","User is not signed in."),
e(h))):d?c(new D({userId:d,server:h.server,token:f,expires:null!=k?Number(k):null,ssl:!!g})):m?(d=m._oAuthCred,d||(g=new A(m,window.localStorage),f=new A(m,window.sessionStorage),g.isValid()&&f.isValid()?g.expires>f.expires?(d=g,f.destroy()):(d=f,g.destroy()):d=g.isValid()?g:f,m._oAuthCred=d),d.isValid()?c(new D({userId:d.userId,server:h.server,token:d.token,expires:d.expires,ssl:d.ssl,_oAuthCred:d})):b._oAuthHash&&b._oAuthHash.state.portalUrl===m.portalUrl?(l=b._oAuthHash,h=new D({userId:l.username,
server:h.server,token:l.access_token,expires:(new Date).getTime()+1E3*Number(l.expires_in),ssl:"true"===l.ssl,oAuthState:l.state,_oAuthCred:d}),d.storage=l.persist?window.localStorage:window.sessionStorage,d.token=h.token,d.expires=h.expires,d.userId=h.userId,d.ssl=h.ssl,d.save(),b._oAuthHash=null,c(h)):l?a._pendingDfd=b.oAuthSignIn(a.resUrl_,h,m,a.options_).then(c,e):(h=new y("identity-manager:not-authenticated","User is not signed in."),e(h))):l?b._checkProtocol(a.resUrl_,h,e,a.admin_)&&(l=a.options_,
a.admin_&&(l=l||{},l.isAdmin=!0),a._pendingDfd=b.signIn(a.resUrl_,h,l).then(c,e)):(h=new y("identity-manager:not-authenticated","User is not signed in."),e(h))},g=function(){var d=a.sinfo_,g=d.owningSystemUrl,f=a.options_,k,l,m,n;f&&(k=f.token,l=f.error,m=f.prompt);(n=b._findCredential(g,{token:k,resource:a.resUrl_}))||h.some(b.credentials,function(a){this._isIdProvider(g,a.server)&&(n=a);return!!n},b);n?(f=b.findCredential(a.resUrl_,n.userId))?c(f):H(d,b._legacyFed)?(f=n.toJSON(),f.server=d.server,
f.resources=null,c(new D(f))):(a._pendingDfd=b.generateToken(b.findServerInfo(n.server),null,{serverUrl:a.resUrl_,token:n.token,ssl:n.ssl})).then(function(b){c(new D({userId:n.userId,server:d.server,token:b.token,expires:null!=b.expires?Number(b.expires):null,ssl:!!b.ssl,isAdmin:a.admin_,validity:b.validity}))},e):(b._busy=null,k&&(a.options_.token=null),(a._pendingDfd=b.getCredential(g.replace(/\/?$/,"/sharing"),{resource:a.resUrl_,owningTenant:d.owningTenant,token:k,error:l,prompt:m})).then(function(c){b._enqueue(a.resUrl_,
a.sinfo_,a.options_,a,a.admin_)},function(a){e(a)}))};this._errbackFunc=e;var f=a.sinfo_.owningSystemUrl,k=this._isServerRsrc(a.resUrl_),l=a.sinfo_._restInfoPms;l?l.promise.then(function(c){var e=a.sinfo_;e.adminTokenServiceUrl=e._restInfoPms.adminUrl;e._restInfoPms=null;e.tokenServiceUrl=t.getDeepValue("authInfo.tokenServicesUrl",c)||t.getDeepValue("authInfo.tokenServiceUrl",c)||t.getDeepValue("tokenServiceUrl",c);e.shortLivedTokenValidity=t.getDeepValue("authInfo.shortLivedTokenValidity",c);e.currentVersion=
c.currentVersion;e.owningTenant=c.owningTenant;(c=e.owningSystemUrl=c.owningSystemUrl)&&b._portals.push(c);k&&c?g():d()},function(){a.sinfo_._restInfoPms=null;var b=new y("identity-manager:server-identification-failed","Unknown resource - could not find token service endpoint.");e(b)}):k&&f?g():a.sinfo_._selfReq?a.sinfo_._selfReq.selfDfd.then(function(c){var e={},d,g,f,k;c&&(d=c.user&&c.user.username,e.username=d,e.allSSL=c.allSSL,g=c.supportsOAuth,f=c.currentVersion,"multitenant"===c.portalMode&&
(k=c.customBaseUrl));a.sinfo_.webTierAuth=!!d;return d&&b.normalizeWebTierAuth?b.generateToken(a.sinfo_,null,{ssl:e.allSSL}).always(function(a){e.portalToken=a&&a.token;e.tokenExpiration=a&&a.expires;return e}):!d&&g&&4.4<=parseFloat(f)&&!b._doPortalSignIn(a.resUrl_)?b._generateOAuthInfo({portalUrl:a.sinfo_.server,customBaseUrl:k,owningTenant:a.sinfo_._selfReq.owningTenant}).always(function(){return e}):e}).always(function(b){a.sinfo_._selfReq=null;b?d(b.username,b.allSSL,b.portalToken,b.tokenExpiration):
d()}):d()},_generateOAuthInfo:function(a){var b=this,c,e=a.portalUrl,d=a.customBaseUrl,g=a.owningTenant;if(a=!this.defaultOAuthInfo&&this._createDefaultOAuthInfo&&!this._hasTestedIfAppIsOnPortal){c=window.location.href;var f=c.indexOf("?");-1<f&&(c=c.slice(0,f));f=c.search(/\/(apps|home)\//);c=-1<f?c.slice(0,f):null}a&&c?(this._hasTestedIfAppIsOnPortal=!0,a=F(c+"/sharing/rest",{query:{f:"json"},responseType:"json"}).then(function(){b.defaultOAuthInfo=new u({appId:"arcgisonline",popup:!0,popupCallbackUrl:c+
"/home/oauth-callback.html"})})):(a=new l,a.resolve(),a=a.promise);return a.then(function(){if(b.defaultOAuthInfo)return e=e.replace(/^http:/i,"https:"),F(e+"/sharing/rest/oauth2/validateRedirectUri",{query:{accountId:g,client_id:b.defaultOAuthInfo.appId,redirect_uri:z.makeAbsolute(b.defaultOAuthInfo.popupCallbackUrl),f:"json"},responseType:"json"}).then(function(a){if(a.data.valid){var c=b.defaultOAuthInfo.clone();c.portalUrl=a.data.urlKey&&d?"https://"+a.data.urlKey+"."+d:e;b.oAuthInfos.push(c)}})})}});
D=x.createSubclass([v],{declaredClass:"esri.identity.Credential",constructor:function(a){a&&a._oAuthCred&&(this._oAuthCred=a._oAuthCred)},initialize:function(){this.resources=this.resources||[];null==this.creationTime&&(this.creationTime=(new Date).getTime())},_oAuthCred:null,properties:{creationTime:{},expires:{},isAdmin:{},oAuthState:{},resources:{},scope:{},server:{},ssl:{},token:{},tokenRefreshBuffer:2,userId:{},validity:{}},refreshToken:function(){var a=this,b=this.resources&&this.resources[0],
e=c.id.findServerInfo(this.server),d=e&&e.owningSystemUrl,f=!!d&&"server"===this.scope,k=f&&H(e,c.id._legacyFed),l=f&&c.id.findServerInfo(d),m,n=(m=e.webTierAuth)&&c.id.normalizeWebTierAuth,q=B[this.server],q=q&&q[this.userId],p={username:this.userId,password:q},u;if(!m||n)if(f&&!l&&h.some(c.id.serverInfos,function(a){c.id._isIdProvider(d,a.server)&&(l=a);return!!l}),m=l&&c.id.findCredential(l.server,this.userId),!f||m)if(k)m.refreshToken();else{if(f)u={serverUrl:b,token:m&&m.token,ssl:m&&m.ssl};
else if(n)p=null,u={ssl:this.ssl};else if(q)this.isAdmin&&(u={isAdmin:!0});else{var t;b&&(b=c.id._sanitizeUrl(b),this._enqueued=1,t=c.id._enqueue(b,e,null,null,this.isAdmin,this),t.then(function(){a._enqueued=0;a.refreshServerTokens()}).then(null,function(){a._enqueued=0}));return t}return c.id.generateToken(f?l:e,f?null:p,u).then(function(b){a.token=b.token;a.expires=null!=b.expires?Number(b.expires):null;a.creationTime=(new Date).getTime();a.validity=b.validity;a.emitTokenChange();a.refreshServerTokens()}).then(null,
function(){})}},refreshServerTokens:function(){"portal"===this.scope&&h.forEach(c.id.credentials,function(a){var b=c.id.findServerInfo(a.server),e=b&&b.owningSystemUrl;a!==this&&a.userId===this.userId&&e&&"server"===a.scope&&(c.id._hasSameServerInstance(this.server,e)||c.id._isIdProvider(e,this.server))&&(H(b,c.id._legacyFed)?(a.token=this.token,a.expires=this.expires,a.creationTime=this.creationTime,a.validity=this.validity,a.emitTokenChange()):a.refreshToken())},this)},emitTokenChange:function(a){clearTimeout(this._refreshTimer);
var b=this.server&&c.id.findServerInfo(this.server),e=(b=b&&b.owningSystemUrl)&&c.id.findServerInfo(b);!1===a||b&&"portal"!==this.scope&&(!e||!e.webTierAuth||c.id.normalizeWebTierAuth)||null==this.expires&&null==this.validity||this._startRefreshTimer();this.emit("token-change")},destroy:function(){this.userId=this.server=this.token=this.expires=this.validity=this.resources=this.creationTime=null;this._oAuthCred&&(this._oAuthCred.destroy(),this._oAuthCred=null);var a=h.indexOf(c.id.credentials,this);
-1<a&&c.id.credentials.splice(a,1);this.emitTokenChange();this.emit("destroy")},toJSON:function(){var a=q.fixJson({userId:this.userId,server:this.server,token:this.token,expires:this.expires,validity:this.validity,ssl:this.ssl,isAdmin:this.isAdmin,creationTime:this.creationTime,scope:this.scope}),b=this.resources;b&&0<b.length&&(a.resources=b.slice());return a},_startRefreshTimer:function(){clearTimeout(this._refreshTimer);var a=6E4*this.tokenRefreshBuffer,b=(this.validity?this.creationTime+6E4*this.validity:
this.expires)-(new Date).getTime();0>b&&(b=0);this._refreshTimer=setTimeout(this.refreshToken.bind(this),b>a?b-a:b)}});n.Credential=D;return n})},"dojo/cookie":function(){define(["./_base/kernel","./regexp"],function(n,h){n.cookie=function(l,m,d){var f=document.cookie,k;if(1==arguments.length)k=(k=f.match(new RegExp("(?:^|; )"+h.escapeString(l)+"\x3d([^;]*)")))?decodeURIComponent(k[1]):void 0;else{d=d||{};f=d.expires;if("number"==typeof f){var c=new Date;c.setTime(c.getTime()+864E5*f);f=d.expires=
c}f&&f.toUTCString&&(d.expires=f.toUTCString());m=encodeURIComponent(m);var f=l+"\x3d"+m,b;for(b in d)f+="; "+b,c=d[b],!0!==c&&(f+="\x3d"+c);document.cookie=f}return k};n.cookie.isSupported=function(){"cookieEnabled"in navigator||(this("__djCookieTest__","CookiesAllowed"),navigator.cookieEnabled="CookiesAllowed"==this("__djCookieTest__"),navigator.cookieEnabled&&this("__djCookieTest__","",{expires:-1}));return navigator.cookieEnabled};return n.cookie})},"esri/identity/ServerInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(n,h,l,m,d,f){return function(d){function c(b){b=d.call(this)||this;b.adminTokenServiceUrl=null;b.currentVersion=null;b.hasPortal=null;b.hasServer=null;b.owningSystemUrl=null;b.owningTenant=null;b.server=null;b.shortLivedTokenValidity=null;b.tokenServiceUrl=null;b.webTierAuth=null;return b}l(c,d);m([f.property({json:{write:!0}})],c.prototype,"adminTokenServiceUrl",void 0);m([f.property({json:{write:!0}})],c.prototype,"currentVersion",void 0);m([f.property({json:{write:!0}})],c.prototype,"hasPortal",
void 0);m([f.property({json:{write:!0}})],c.prototype,"hasServer",void 0);m([f.property({json:{write:!0}})],c.prototype,"owningSystemUrl",void 0);m([f.property({json:{write:!0}})],c.prototype,"owningTenant",void 0);m([f.property({json:{write:!0}})],c.prototype,"server",void 0);m([f.property({json:{write:!0}})],c.prototype,"shortLivedTokenValidity",void 0);m([f.property({json:{write:!0}})],c.prototype,"tokenServiceUrl",void 0);m([f.property({json:{write:!0}})],c.prototype,"webTierAuth",void 0);return c=
m([f.subclass("esri.identity.ServerInfo")],c)}(f.declared(d))})},"esri/identity/OAuthCredential":function(){define(["../core/declare"],function(n){return n(null,{declaredClass:"esri.identity.OAuthCredential",oAuthInfo:null,storage:null,expires:null,ssl:null,token:null,userId:null,constructor:function(h,l){this.oAuthInfo=h;this.storage=l;this._init()},isValid:function(){var h=!1;if(this.oAuthInfo&&this.token&&this.userId){var l=(new Date).getTime();this.expires>l&&(this.expires-l)/1E3>60*this.oAuthInfo.minTimeUntilExpiration&&
(h=!0)}return h},save:function(){if(this.storage){var h=this._load(),l=this.oAuthInfo;if(l&&l.authNamespace&&l.portalUrl){var m=h[l.authNamespace];m||(m=h[l.authNamespace]={});m[l.portalUrl]={expires:this.expires,ssl:this.ssl,token:this.token,userId:this.userId};try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(h))}catch(d){console.log(d)}}}},destroy:function(){var h=this._load(),l=this.oAuthInfo;if(l&&l.authNamespace&&l.portalUrl&&this.storage){var m=h[l.authNamespace];if(m){delete m[l.portalUrl];
try{this.storage.setItem("esriJSAPIOAuth",JSON.stringify(h))}catch(d){console.log(d)}}}l&&(this.oAuthInfo=l._oAuthCred=null)},_init:function(){var h=this._load(),l=this.oAuthInfo;l&&l.authNamespace&&l.portalUrl&&(h=h[l.authNamespace])&&(h=h[l.portalUrl])&&(this.expires=h.expires,this.ssl=h.ssl,this.token=h.token,this.userId=h.userId)},_load:function(){var h={};if(this.storage){var l=this.storage.getItem("esriJSAPIOAuth");if(l)try{h=JSON.parse(l)}catch(m){console.log(m)}}return h}})})},"esri/identity/OAuthInfo":function(){define("require exports ../core/tsSupport/declareExtendsHelper ../core/tsSupport/decorateHelper ../core/JSONSupport ../core/accessorSupport/decorators".split(" "),
function(n,h,l,m,d,f){return function(d){function c(a){a=d.call(this)||this;a._oAuthCred=null;a.appId=null;a.authNamespace="/";a.expiration=20160;a.forceLogin=!1;a.locale=null;a.minTimeUntilExpiration=30;a.popup=!1;a.popupCallbackUrl="oauth-callback.html";a.popupWindowFeatures="height\x3d490,width\x3d800,resizable,scrollbars,status";a.portalUrl="https://www.arcgis.com";return a}l(c,d);b=c;c.prototype.clone=function(){return b.fromJSON(this.toJSON())};var b;m([f.property({json:{write:!0}})],c.prototype,
"appId",void 0);m([f.property({json:{write:!0}})],c.prototype,"authNamespace",void 0);m([f.property({json:{write:!0}})],c.prototype,"expiration",void 0);m([f.property({json:{write:!0}})],c.prototype,"forceLogin",void 0);m([f.property({json:{write:!0}})],c.prototype,"locale",void 0);m([f.property({json:{write:!0}})],c.prototype,"minTimeUntilExpiration",void 0);m([f.property({json:{write:!0}})],c.prototype,"popup",void 0);m([f.property({json:{write:!0}})],c.prototype,"popupCallbackUrl",void 0);m([f.property({json:{write:!0}})],
c.prototype,"popupWindowFeatures",void 0);m([f.property({json:{write:!0}})],c.prototype,"portalUrl",void 0);return c=b=m([f.subclass("esri.identity.OAuthInfo")],c)}(f.declared(d))})},"dijit/form/Button":function(){define("require dojo/_base/declare dojo/dom-class dojo/has dojo/_base/kernel dojo/_base/lang dojo/ready ./_FormWidget ./_ButtonMixin dojo/text!./templates/Button.html ../a11yclick".split(" "),function(n,h,l,m,d,f,k,c,b,a){m("dijit-legacy-requires")&&k(0,function(){n(["dijit/form/DropDownButton",
"dijit/form/ComboButton","dijit/form/ToggleButton"])});k=h("dijit.form.Button"+(m("dojo-bidi")?"_NoBidi":""),[c,b],{showLabel:!0,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:a,_setValueAttr:"valueNode",_setNameAttr:function(a){this.valueNode&&this.valueNode.setAttribute("name",a)},postCreate:function(){this.inherited(arguments);this._setLabelFromContainer()},_setLabelFromContainer:function(){this.containerNode&&!this.label&&(this.label=
f.trim(this.containerNode.innerHTML),this.onLabelSet())},_setShowLabelAttr:function(a){this.containerNode&&l.toggle(this.containerNode,"dijitDisplayNone",!a);this._set("showLabel",a)},setLabel:function(a){d.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",a)},onLabelSet:function(){this.inherited(arguments);this.showLabel||"title"in this.params||(this.titleNode.title=f.trim(this.containerNode.innerText||this.containerNode.textContent||
""))}});m("dojo-bidi")&&(k=h("dijit.form.Button",k,{onLabelSet:function(){this.inherited(arguments);this.titleNode.title&&this.applyTextDir(this.titleNode,this.titleNode.title)},_setTextDirAttr:function(a){this._created&&this.textDir!=a&&(this._set("textDir",a),this._setLabelAttr(this.label))}}));return k})},"dijit/form/_FormWidget":function(){define("dojo/_base/declare dojo/sniff dojo/_base/kernel dojo/ready ../_Widget ../_CssStateMixin ../_TemplatedMixin ./_FormWidgetMixin".split(" "),function(n,
h,l,m,d,f,k,c){h("dijit-legacy-requires")&&m(0,function(){require(["dijit/form/_FormValueWidget"])});return n("dijit.form._FormWidget",[d,k,f,c],{setDisabled:function(b){l.deprecated("setDisabled("+b+") is deprecated. Use set('disabled',"+b+") instead.","","2.0");this.set("disabled",b)},setValue:function(b){l.deprecated("dijit.form._FormWidget:setValue("+b+") is deprecated.  Use set('value',"+b+") instead.","","2.0");this.set("value",b)},getValue:function(){l.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.",
"","2.0");return this.get("value")},postMixInProperties:function(){this.nameAttrSetting=this.name?'name\x3d"'+this.name.replace(/"/g,"\x26quot;")+'"':"";this.inherited(arguments)}})})},"dijit/form/_FormWidgetMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom-attr dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff dojo/window ../a11y".split(" "),function(n,h,l,m,d,f,k,c,b,a){return h("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",
tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:!1,intermediateChanges:!1,scrollOnFocus:!0,_setIdAttr:"focusNode",_setDisabledAttr:function(b){this._set("disabled",b);/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)?(l.set(this.focusNode,"disabled",b),c("trident")&&"readOnly"in this&&l.set(this.focusNode,"readonly",b||this.readOnly)):this.focusNode.setAttribute("aria-disabled",b?"true":"false");this.valueNode&&l.set(this.valueNode,"disabled",b);b?(this._set("hovering",
!1),this._set("active",!1),b="tabIndex"in this.attributeMap?this.attributeMap.tabIndex:"_setTabIndexAttr"in this?this._setTabIndexAttr:"focusNode",n.forEach(d.isArray(b)?b:[b],function(b){b=this[b];c("webkit")||a.hasDefaultTabStop(b)?b.setAttribute("tabIndex","-1"):b.removeAttribute("tabIndex")},this)):""!=this.tabIndex&&this.set("tabIndex",this.tabIndex)},_onFocus:function(a){if("mouse"==a&&this.isFocusable())var e=this.own(k(this.focusNode,"focus",function(){h.remove();e.remove()}))[0],f=c("pointer-events")?
"pointerup":c("touch-events")?"touchend, mouseup":"mouseup",h=this.own(k(this.ownerDocumentBody,f,d.hitch(this,function(a){h.remove();e.remove();this.focused&&("touchend"==a.type?this.defer("focus"):this.focus())})))[0];this.scrollOnFocus&&this.defer(function(){b.scrollIntoView(this.domNode)});this.inherited(arguments)},isFocusable:function(){return!this.disabled&&this.focusNode&&"none"!=m.get(this.domNode,"display")},focus:function(){if(!this.disabled&&this.focusNode.focus)try{this.focusNode.focus()}catch(e){}},
compare:function(a,b){return"number"==typeof a&&"number"==typeof b?isNaN(a)&&isNaN(b)?0:a-b:a>b?1:a<b?-1:0},onChange:function(){},_onChangeActive:!1,_handleOnChange:function(a,b){void 0!=this._lastValueReported||null!==b&&this._onChangeActive||(this._resetValue=this._lastValueReported=a);this._pendingOnChange=this._pendingOnChange||typeof a!=typeof this._lastValueReported||0!=this.compare(a,this._lastValueReported);(this.intermediateChanges||b||void 0===b)&&this._pendingOnChange&&(this._lastValueReported=
a,this._pendingOnChange=!1,this._onChangeActive&&(this._onChangeHandle&&this._onChangeHandle.remove(),this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(a)})))},create:function(){this.inherited(arguments);this._onChangeActive=!0},destroy:function(){this._onChangeHandle&&(this._onChangeHandle.remove(),this.onChange(this._lastValueReported));this.inherited(arguments)}})})},"dijit/form/_ButtonMixin":function(){define(["dojo/_base/declare","dojo/dom","dojo/has","../registry"],
function(n,h,l,m){var d=n("dijit.form._ButtonMixin"+(l("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(d){d.stopPropagation();d.preventDefault();this.disabled||this.valueNode.click(d);return!1},_onClick:function(d){if(this.disabled)return d.stopPropagation(),d.preventDefault(),!1;!1===this.onClick(d)&&d.preventDefault();var f=d.defaultPrevented;if(!f&&"submit"==this.type&&!(this.valueNode||this.focusNode).form)for(var c=this.domNode;c.parentNode;c=c.parentNode){var b=m.byNode(c);
if(b&&"function"==typeof b._onSubmit){b._onSubmit(d);d.preventDefault();f=!0;break}}return!f},postCreate:function(){this.inherited(arguments);h.setSelectable(this.focusNode,!1)},onClick:function(){return!0},_setLabelAttr:function(d){this._set("label",d);(this.containerNode||this.focusNode).innerHTML=d;this.onLabelSet()},onLabelSet:function(){}});l("dojo-bidi")&&(d=n("dijit.form._ButtonMixin",d,{onLabelSet:function(){this.inherited(arguments);this.applyTextDir(this.containerNode||this.focusNode)}}));
return d})},"dijit/form/Form":function(){define("dojo/_base/declare dojo/dom-attr dojo/_base/kernel dojo/sniff ../_Widget ../_TemplatedMixin ./_FormMixin ../layout/_ContentPaneResizeMixin".split(" "),function(n,h,l,m,d,f,k,c){return n("dijit.form.Form",[d,f,k,c],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"\x3cform data-dojo-attach-point\x3d'containerNode' data-dojo-attach-event\x3d'onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}\x3e\x3c/form\x3e",
postMixInProperties:function(){this.nameAttrSetting=this.name?"name\x3d'"+this.name+"'":"";this.inherited(arguments)},execute:function(){},onExecute:function(){},_setEncTypeAttr:function(b){h.set(this.domNode,"encType",b);m("ie")&&(this.domNode.encoding=b);this._set("encType",b)},reset:function(b){var a={returnValue:!0,preventDefault:function(){this.returnValue=!1},stopPropagation:function(){},currentTarget:b?b.target:this.domNode,target:b?b.target:this.domNode};!1!==this.onReset(a)&&a.returnValue&&
this.inherited(arguments,[])},onReset:function(){return!0},_onReset:function(b){this.reset(b);b.stopPropagation();b.preventDefault();return!1},_onSubmit:function(b){var a=this.constructor.prototype;if(this.execute!=a.execute||this.onExecute!=a.onExecute)l.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0"),this.onExecute(),this.execute(this.getValues());!1===this.onSubmit(b)&&(b.stopPropagation(),b.preventDefault())},onSubmit:function(){return this.isValid()},
submit:function(){!1!==this.onSubmit()&&this.containerNode.submit()}})})},"dijit/form/ValidationTextBox":function(){define("dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/i18n ./TextBox ../Tooltip dojo/text!./templates/ValidationTextBox.html dojo/i18n!./nls/validate".split(" "),function(n,h,l,m,d,f,k){var c=n("dijit.form.ValidationTextBox",d,{templateString:k,required:!1,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",
regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(b,a){a!=c.prototype[b]&&(h.deprecated("ValidationTextBox id\x3d"+this.id+", set('"+b+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0"),this.set("pattern",a))},_setRegExpGenAttr:function(b){this._deprecateRegExp("regExpGen",b);this._set("regExpGen",this._computeRegexp)},_setRegExpAttr:function(b){this._deprecateRegExp("regExp",b)},_setValueAttr:function(){this.inherited(arguments);this._refreshState()},
validator:function(b,a){return(new RegExp("^(?:"+this._computeRegexp(a)+")"+(this.required?"":"?")+"$")).test(b)&&(!this.required||!this._isEmpty(b))&&(this._isEmpty(b)||void 0!==this.parse(b,a))},_isValidSubset:function(){return 0==this.textbox.value.search(this._partialre)},isValid:function(){return this.validator(this.textbox.value,this.get("constraints"))},_isEmpty:function(b){return(this.trim?/^\s*$/:/^$/).test(b)},getErrorMessage:function(){var b="$_unset_$"==this.invalidMessage?this.messages.invalidMessage:
this.invalidMessage?this.invalidMessage:this.promptMessage,a="$_unset_$"==this.missingMessage?this.messages.missingMessage:this.missingMessage?this.missingMessage:b;return this.required&&this._isEmpty(this.textbox.value)?a:b},getPromptMessage:function(){return this.promptMessage},_maskValidSubsetError:!0,validate:function(b){var a="",c=this.disabled||this.isValid(b);c&&(this._maskValidSubsetError=!0);var d=this._isEmpty(this.textbox.value),f=!c&&b&&this._isValidSubset();this._set("state",c?"":((!this._hasBeenBlurred||
b)&&d||f)&&(this._maskValidSubsetError||f&&!this._hasBeenBlurred&&b)?"Incomplete":"Error");this.focusNode.setAttribute("aria-invalid","Error"==this.state?"true":"false");"Error"==this.state?(this._maskValidSubsetError=b&&f,a=this.getErrorMessage(b)):"Incomplete"==this.state?(a=this.getPromptMessage(b),this._maskValidSubsetError=!this._hasBeenBlurred||b):d&&(a=this.getPromptMessage(b));this.set("message",a);return c},displayMessage:function(b){b&&this.focused?f.show(b,this.domNode,this.tooltipPosition,
!this.isLeftToRight()):f.hide(this.domNode)},_refreshState:function(){this._created&&this.validate(this.focused);this.inherited(arguments)},constructor:function(b){this.constraints=l.clone(this.constraints);this.baseClass+=" dijitValidationTextBox"},startup:function(){this.inherited(arguments);this._refreshState()},_setConstraintsAttr:function(b){!b.locale&&this.lang&&(b.locale=this.lang);this._set("constraints",b);this._refreshState()},_setPatternAttr:function(b){this._set("pattern",b);this._refreshState()},
_computeRegexp:function(b){var a=this.pattern;"function"==typeof a&&(a=a.call(this,b));if(a!=this._lastRegExp){var c="";this._lastRegExp=a;".*"!=a&&a.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(a){switch(a.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":c+=a;break;case ")":c+="|$)";break;default:c+="(?:"+a+"|$)"}});try{"".search(c)}catch(q){c=this.pattern,console.warn("RegExp error in "+this.declaredClass+": "+this.pattern)}this._partialre="^(?:"+
c+")$"}return a},postMixInProperties:function(){this.inherited(arguments);this.messages=m.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints)},_setDisabledAttr:function(b){this.inherited(arguments);this._refreshState()},_setRequiredAttr:function(b){this._set("required",b);this.focusNode.setAttribute("aria-required",b);this._refreshState()},_setMessageAttr:function(b){this._set("message",b);this.displayMessage(b)},reset:function(){this._maskValidSubsetError=
!0;this.inherited(arguments)},_onBlur:function(){this.displayMessage("");this.inherited(arguments)},destroy:function(){f.hide(this.domNode);this.inherited(arguments)}});return c})},"dijit/form/TextBox":function(){define("dojo/_base/declare dojo/dom-construct dojo/dom-style dojo/_base/kernel dojo/_base/lang dojo/on dojo/sniff ./_FormValueWidget ./_TextBoxMixin dojo/text!./templates/TextBox.html ../main".split(" "),function(n,h,l,m,d,f,k,c,b,a,e){c=n("dijit.form.TextBox"+(k("dojo-bidi")?"_NoBidi":""),
[c,b],{templateString:a,_singleNodeTemplate:'\x3cinput class\x3d"dijit dijitReset dijitLeft dijitInputField" data-dojo-attach-point\x3d"textbox,focusNode" autocomplete\x3d"off" type\x3d"${type}" ${!nameAttrSetting} /\x3e',_buttonInputDisabled:k("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var a=this.type.toLowerCase();if(this.templateString&&"input"==this.templateString.toLowerCase()||("hidden"==a||"file"==a)&&this.templateString==this.constructor.prototype.templateString)this.templateString=
this._singleNodeTemplate;this.inherited(arguments)},postCreate:function(){this.inherited(arguments);9>k("ie")&&this.defer(function(){try{var a=l.getComputedStyle(this.domNode);if(a){var b=a.fontFamily;if(b){var c=this.domNode.getElementsByTagName("INPUT");if(c)for(a=0;a<c.length;a++)c[a].style.fontFamily=b}}}catch(z){}})},_setPlaceHolderAttr:function(a){this._set("placeHolder",a);this._phspan||(this._attachPoints.push("_phspan"),this._phspan=h.create("span",{className:"dijitPlaceHolder dijitInputField"},
this.textbox,"after"),this.own(f(this._phspan,"mousedown",function(a){a.preventDefault()}),f(this._phspan,"touchend, pointerup, MSPointerUp",d.hitch(this,function(){this.focus()}))));this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(a));this._updatePlaceHolder()},_onInput:function(a){this.inherited(arguments);this._updatePlaceHolder()},_updatePlaceHolder:function(){this._phspan&&(this._phspan.style.display=this.placeHolder&&!this.textbox.value?"":"none")},
_setValueAttr:function(a,b,c){this.inherited(arguments);this._updatePlaceHolder()},getDisplayedValue:function(){m.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue")},setDisplayedValue:function(a){m.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",a)},_onBlur:function(a){this.disabled||(this.inherited(arguments),
this._updatePlaceHolder(),k("mozilla")&&this.selectOnClick&&(this.textbox.selectionStart=this.textbox.selectionEnd=void 0))},_onFocus:function(a){this.disabled||this.readOnly||(this.inherited(arguments),this._updatePlaceHolder())}});9>k("ie")&&(c.prototype._isTextSelected=function(){var a=this.ownerDocument.selection.createRange();return a.parentElement()==this.textbox&&0<a.text.length},e._setSelectionRange=b._setSelectionRange=function(a,b,c){a.createTextRange&&(a=a.createTextRange(),a.collapse(!0),
a.moveStart("character",-99999),a.moveStart("character",b),a.moveEnd("character",c-b),a.select())});k("dojo-bidi")&&(c=n("dijit.form.TextBox",c,{_setPlaceHolderAttr:function(a){this.inherited(arguments);this.applyTextDir(this._phspan)}}));return c})},"dijit/form/_FormValueWidget":function(){define(["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(n,h,l,m){return n("dijit.form._FormValueWidget",[l,m],{_layoutHackIE7:function(){if(7==h("ie"))for(var d=this.domNode,f=d.parentNode,
k=d.firstChild||d,c=k.style.filter,b=this;f&&0==f.clientHeight;)(function(){var a=b.connect(f,"onscroll",function(){b.disconnect(a);k.style.filter=(new Date).getMilliseconds();b.defer(function(){k.style.filter=c})})})(),f=f.parentNode}})})},"dijit/form/_FormValueMixin":function(){define("dojo/_base/declare dojo/dom-attr dojo/keys dojo/_base/lang dojo/on dojo/sniff ./_FormWidgetMixin".split(" "),function(n,h,l,m,d,f,k){return n("dijit.form._FormValueMixin",k,{readOnly:!1,_setReadOnlyAttr:function(c){f("trident")&&
"disabled"in this?h.set(this.focusNode,"readOnly",c||this.disabled):h.set(this.focusNode,"readOnly",c);this._set("readOnly",c)},postCreate:function(){this.inherited(arguments);void 0===this._resetValue&&(this._lastValueReported=this._resetValue=this.value)},_setValueAttr:function(c,b){this._handleOnChange(c,b)},_handleOnChange:function(c,b){this._set("value",c);this.inherited(arguments)},undo:function(){this._setValueAttr(this._lastValueReported,!1)},reset:function(){this._hasBeenBlurred=!1;this._setValueAttr(this._resetValue,
!0)}})})},"dijit/form/_TextBoxMixin":function(){define("dojo/_base/array dojo/_base/declare dojo/dom dojo/sniff dojo/keys dojo/_base/lang dojo/on ../main".split(" "),function(n,h,l,m,d,f,k,c){var b=h("dijit.form._TextBoxMixin"+(m("dojo-bidi")?"_NoBidi":""),null,{trim:!1,uppercase:!1,lowercase:!1,propercase:!1,maxLength:"",selectOnClick:!1,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints)},_setValueAttr:function(a,b,c){var e;void 0!==a&&(e=this.filter(a),
"string"!=typeof c&&(c=null===e||"number"==typeof e&&isNaN(e)?"":this.filter(this.format(e,this.constraints)),0!=this.compare(e,this.filter(this.parse(c,this.constraints)))&&(c=null)));null==c||"number"==typeof c&&isNaN(c)||this.textbox.value==c||(this.textbox.value=c,this._set("displayedValue",this.get("displayedValue")));this.inherited(arguments,[e,b])},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value)},_setDisplayedValueAttr:function(a){null==a?a="":"string"!=
typeof a&&(a=String(a));this.textbox.value=a;this._setValueAttr(this.get("value"),void 0);this._set("displayedValue",this.get("displayedValue"))},format:function(a){return null==a?"":a.toString?a.toString():a},parse:function(a){return a},_refreshState:function(){},onInput:function(){},_onInput:function(a){this._lastInputEventValue=this.textbox.value;this._processInput(this._lastInputProducingEvent||a);delete this._lastInputProducingEvent;this.intermediateChanges&&this._handleOnChange(this.get("value"),
!1)},_processInput:function(){this._refreshState();this._set("displayedValue",this.get("displayedValue"))},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);this.own(k(this.textbox,"keydown, keypress, paste, cut, compositionend",f.hitch(this,function(a){var b;if("keydown"==a.type&&229!=a.keyCode){b=a.keyCode;switch(b){case d.SHIFT:case d.ALT:case d.CTRL:case d.META:case d.CAPS_LOCK:case d.NUM_LOCK:case d.SCROLL_LOCK:return}if(!a.ctrlKey&&!a.metaKey&&
!a.altKey){switch(b){case d.NUMPAD_0:case d.NUMPAD_1:case d.NUMPAD_2:case d.NUMPAD_3:case d.NUMPAD_4:case d.NUMPAD_5:case d.NUMPAD_6:case d.NUMPAD_7:case d.NUMPAD_8:case d.NUMPAD_9:case d.NUMPAD_MULTIPLY:case d.NUMPAD_PLUS:case d.NUMPAD_ENTER:case d.NUMPAD_MINUS:case d.NUMPAD_PERIOD:case d.NUMPAD_DIVIDE:return}if(65<=b&&90>=b||48<=b&&57>=b||b==d.SPACE)return;b=!1;for(var c in d)if(d[c]===a.keyCode){b=!0;break}if(!b)return}}(b=32<=a.charCode?String.fromCharCode(a.charCode):a.charCode)||(b=65<=a.keyCode&&
90>=a.keyCode||48<=a.keyCode&&57>=a.keyCode||a.keyCode==d.SPACE?String.fromCharCode(a.keyCode):a.keyCode);b||(b=229);if("keypress"==a.type){if("string"!=typeof b)return;if("a"<=b&&"z">=b||"A"<=b&&"Z">=b||"0"<=b&&"9">=b||" "===b)if(a.ctrlKey||a.metaKey||a.altKey)return}var h={faux:!0},l;for(l in a)/^(layer[XY]|returnValue|keyLocation)$/.test(l)||(c=a[l],"function"!=typeof c&&"undefined"!=typeof c&&(h[l]=c));f.mixin(h,{charOrCode:b,_wasConsumed:!1,preventDefault:function(){h._wasConsumed=!0;a.preventDefault()},
stopPropagation:function(){a.stopPropagation()}});this._lastInputProducingEvent=h;!1===this.onInput(h)&&(h.preventDefault(),h.stopPropagation());if(!h._wasConsumed&&9>=m("ie"))switch(a.keyCode){case d.TAB:case d.ESCAPE:case d.DOWN_ARROW:case d.UP_ARROW:case d.LEFT_ARROW:case d.RIGHT_ARROW:break;default:a.keyCode==d.ENTER&&"textarea"!=this.textbox.tagName.toLowerCase()||this.defer(function(){this.textbox.value!==this._lastInputEventValue&&k.emit(this.textbox,"input",{bubbles:!0})})}})),k(this.textbox,
"input",f.hitch(this,"_onInput")),k(this.domNode,"keypress",function(a){a.stopPropagation()}))},_blankValue:"",filter:function(a){if(null===a)return this._blankValue;if("string"!=typeof a)return a;this.trim&&(a=f.trim(a));this.uppercase&&(a=a.toUpperCase());this.lowercase&&(a=a.toLowerCase());this.propercase&&(a=a.replace(/[^\s]+/g,function(a){return a.substring(0,1).toUpperCase()+a.substring(1)}));return a},_setBlurValue:function(){this._setValueAttr(this.get("value"),!0)},_onBlur:function(a){this.disabled||
(this._setBlurValue(),this.inherited(arguments))},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd},_onFocus:function(a){this.disabled||this.readOnly||(this.selectOnClick&&"mouse"==a&&(this._selectOnClickHandle=k.once(this.domNode,"mouseup, touchend",f.hitch(this,function(a){this._isTextSelected()||b.selectInputText(this.textbox)})),this.own(this._selectOnClickHandle),this.defer(function(){this._selectOnClickHandle&&(this._selectOnClickHandle.remove(),this._selectOnClickHandle=
null)},500)),this.inherited(arguments),this._refreshState())},reset:function(){this.textbox.value="";this.inherited(arguments)}});m("dojo-bidi")&&(b=h("dijit.form._TextBoxMixin",b,{_setValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_setDisplayedValueAttr:function(){this.inherited(arguments);this.applyTextDir(this.focusNode)},_onInput:function(){this.applyTextDir(this.focusNode);this.inherited(arguments)}}));b._setSelectionRange=c._setSelectionRange=function(a,b,
c){a.setSelectionRange&&a.setSelectionRange(b,c)};b.selectInputText=c.selectInputText=function(a,c,d){a=l.byId(a);isNaN(c)&&(c=0);isNaN(d)&&(d=a.value?a.value.length:0);try{a.focus(),b._setSelectionRange(a,c,d)}catch(t){}};return b})},"dijit/Tooltip":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/fx dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/_base/lang dojo/mouse dojo/on dojo/sniff ./_base/manager ./place ./_Widget ./_TemplatedMixin ./BackgroundIframe dojo/text!./templates/Tooltip.html ./main".split(" "),
function(n,h,l,m,d,f,k,c,b,a,e,q,t,w,z,p,x,F){function y(){}var v=h("dijit._MasterTooltip",[w,z],{duration:q.defaultDuration,templateString:x,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new p(this.domNode);this.fadeIn=l.fadeIn({node:this.domNode,duration:this.duration,onEnd:c.hitch(this,"_onShow")});this.fadeOut=l.fadeOut({node:this.domNode,duration:this.duration,onEnd:c.hitch(this,"_onHide")})},show:function(a,b,d,e,f,g,h){if(!this.aroundNode||this.aroundNode!==
b||this.containerNode.innerHTML!=a)if("playing"==this.fadeOut.status())this._onDeck=arguments;else{this.containerNode.innerHTML=a;f&&this.set("textDir",f);this.containerNode.align=e?"right":"left";var l=t.around(this.domNode,b,d&&d.length?d:A.defaultPosition,!e,c.hitch(this,"orient")),m=l.aroundNodePos;"M"==l.corner.charAt(0)&&"M"==l.aroundCorner.charAt(0)?(this.connectorNode.style.top=m.y+(m.h-this.connectorNode.offsetHeight>>1)-l.y+"px",this.connectorNode.style.left=""):"M"==l.corner.charAt(1)&&
"M"==l.aroundCorner.charAt(1)?this.connectorNode.style.left=m.x+(m.w-this.connectorNode.offsetWidth>>1)-l.x+"px":(this.connectorNode.style.left="",this.connectorNode.style.top="");k.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=!0;this.aroundNode=b;this.onMouseEnter=g||y;this.onMouseLeave=h||y}},orient:function(a,b,c,d,h){this.connectorNode.style.top="";var g=d.h;d=d.w;a.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove",
"BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[b+"-"+c];this.domNode.style.width="auto";var k=f.position(this.domNode);if(e("ie")||e("trident"))k.w+=2;f.setMarginBox(this.domNode,{w:Math.min(Math.max(d,1),k.w)});"B"==c.charAt(0)&&"B"==b.charAt(0)?(a=f.position(a),b=this.connectorNode.offsetHeight,
a.h>g?(this.connectorNode.style.top=g-(h.h+b>>1)+"px",this.connectorNode.style.bottom=""):(this.connectorNode.style.bottom=Math.min(Math.max(h.h/2-b/2,0),a.h-b)+"px",this.connectorNode.style.top="")):(this.connectorNode.style.top="",this.connectorNode.style.bottom="");return Math.max(0,k.w-d)},_onShow:function(){e("ie")&&(this.domNode.style.filter="")},hide:function(a){this._onDeck&&this._onDeck[1]==a?this._onDeck=null:this.aroundNode===a&&(this.fadeIn.stop(),this.isShowingNow=!1,this.aroundNode=
null,this.fadeOut.play());this.onMouseEnter=this.onMouseLeave=y},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";this._onDeck&&(this.show.apply(this,this._onDeck),this._onDeck=null)}});e("dojo-bidi")&&v.extend({_setAutoTextDir:function(a){this.applyTextDir(a);n.forEach(a.children,function(a){this._setAutoTextDir(a)},this)},_setTextDirAttr:function(a){this._set("textDir",a);"auto"==a?this._setAutoTextDir(this.containerNode):this.containerNode.dir=this.textDir}});F.showTooltip=
function(a,b,c,d,e,g,f){c&&(c=n.map(c,function(a){return{after:"after-centered",before:"before-centered"}[a]||a}));A._masterTT||(F._masterTT=A._masterTT=new v);return A._masterTT.show(a,b,c,d,e,g,f)};F.hideTooltip=function(a){return A._masterTT&&A._masterTT.hide(a)};var A=h("dijit.Tooltip",w,{label:"",showDelay:400,hideDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(d){n.forEach(this._connections||[],function(a){n.forEach(a,function(a){a.remove()})},this);this._connectIds=
n.filter(c.isArrayLike(d)?d:d?[d]:[],function(a){return m.byId(a,this.ownerDocument)},this);this._connections=n.map(this._connectIds,function(d){d=m.byId(d,this.ownerDocument);var e=this.selector,f=e?function(b){return a.selector(e,b)}:function(a){return a},h=this;return[a(d,f(b.enter),function(){h._onHover(this)}),a(d,f("focusin"),function(){h._onHover(this)}),a(d,f(b.leave),c.hitch(h,"_onUnHover")),a(d,f("focusout"),c.hitch(h,"set","state","DORMANT"))]},this);this._set("connectId",d)},addTarget:function(a){a=
a.id||a;-1==n.indexOf(this._connectIds,a)&&this.set("connectId",this._connectIds.concat(a))},removeTarget:function(a){a=n.indexOf(this._connectIds,a.id||a);0<=a&&(this._connectIds.splice(a,1),this.set("connectId",this._connectIds))},buildRendering:function(){this.inherited(arguments);d.add(this.domNode,"dijitTooltipData")},startup:function(){this.inherited(arguments);var a=this.connectId;n.forEach(c.isArrayLike(a)?a:[a],this.addTarget,this)},getContent:function(a){return this.label||this.domNode.innerHTML},
state:"DORMANT",_setStateAttr:function(a){if(!(this.state==a||"SHOW TIMER"==a&&"SHOWING"==this.state||"HIDE TIMER"==a&&"DORMANT"==this.state)){this._hideTimer&&(this._hideTimer.remove(),delete this._hideTimer);this._showTimer&&(this._showTimer.remove(),delete this._showTimer);switch(a){case "DORMANT":this._connectNode&&(A.hide(this._connectNode),delete this._connectNode,this.onHide());break;case "SHOW TIMER":"SHOWING"!=this.state&&(this._showTimer=this.defer(function(){this.set("state","SHOWING")},
this.showDelay));break;case "SHOWING":var b=this.getContent(this._connectNode);if(!b){this.set("state","DORMANT");return}A.show(b,this._connectNode,this.position,!this.isLeftToRight(),this.textDir,c.hitch(this,"set","state","SHOWING"),c.hitch(this,"set","state","HIDE TIMER"));this.onShow(this._connectNode,this.position);break;case "HIDE TIMER":this._hideTimer=this.defer(function(){this.set("state","DORMANT")},this.hideDelay)}this._set("state",a)}},_onHover:function(a){this._connectNode&&a!=this._connectNode&&
this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOW TIMER")},_onUnHover:function(a){this.set("state","HIDE TIMER")},open:function(a){this.set("state","DORMANT");this._connectNode=a;this.set("state","SHOWING")},close:function(){this.set("state","DORMANT")},onShow:function(){},onHide:function(){},destroy:function(){this.set("state","DORMANT");n.forEach(this._connections||[],function(a){n.forEach(a,function(a){a.remove()})},this);this.inherited(arguments)}});A._MasterTooltip=v;A.show=
F.showTooltip;A.hide=F.hideTooltip;A.defaultPosition=["after-centered","before-centered"];return A})},"dijit/place":function(){define("dojo/_base/array dojo/dom-geometry dojo/dom-style dojo/_base/kernel dojo/_base/window ./Viewport ./main".split(" "),function(n,h,l,m,d,f,k){function c(a,b,c,k){var e=f.getEffectiveBox(a.ownerDocument);a.parentNode&&"body"==String(a.parentNode.tagName).toLowerCase()||d.body(a.ownerDocument).appendChild(a);var m=null;n.some(b,function(b){var d=b.corner,f=b.pos,l=0,n=
{w:{L:e.l+e.w-f.x,R:f.x-e.l,M:e.w}[d.charAt(1)],h:{T:e.t+e.h-f.y,B:f.y-e.t,M:e.h}[d.charAt(0)]},p=a.style;p.left=p.right="auto";c&&(l=c(a,b.aroundCorner,d,n,k),l="undefined"==typeof l?0:l);var q=a.style,t=q.display,w=q.visibility;"none"==q.display&&(q.visibility="hidden",q.display="");p=h.position(a);q.display=t;q.visibility=w;t={L:f.x,R:f.x-p.w,M:Math.max(e.l,Math.min(e.l+e.w,f.x+(p.w>>1))-p.w)}[d.charAt(1)];w={T:f.y,B:f.y-p.h,M:Math.max(e.t,Math.min(e.t+e.h,f.y+(p.h>>1))-p.h)}[d.charAt(0)];f=Math.max(e.l,
t);q=Math.max(e.t,w);t=Math.min(e.l+e.w,t+p.w)-f;w=Math.min(e.t+e.h,w+p.h)-q;l+=p.w-t+(p.h-w);if(null==m||l<m.overflow)m={corner:d,aroundCorner:b.aroundCorner,x:f,y:q,w:t,h:w,overflow:l,spaceAvailable:n};return!l});m.overflow&&c&&c(a,m.aroundCorner,m.corner,m.spaceAvailable,k);b=m.y;var p=m.x,q=d.body(a.ownerDocument);/relative|absolute/.test(l.get(q,"position"))&&(b-=l.get(q,"marginTop"),p-=l.get(q,"marginLeft"));q=a.style;q.top=b+"px";q.left=p+"px";q.right="auto";return m}var b={TL:"BR",TR:"BL",
BL:"TR",BR:"TL"};return k.place={at:function(a,d,f,h,k){f=n.map(f,function(a){var c={corner:a,aroundCorner:b[a],pos:{x:d.x,y:d.y}};h&&(c.pos.x+="L"==a.charAt(1)?h.x:-h.x,c.pos.y+="T"==a.charAt(0)?h.y:-h.y);return c});return c(a,f,k)},around:function(a,b,d,f,k){function e(a,b){D.push({aroundCorner:a,corner:b,pos:{x:{L:u,R:u+G,M:u+(G>>1)}[a.charAt(1)],y:{T:B,B:B+H,M:B+(H>>1)}[a.charAt(0)]}})}var p;if("string"==typeof b||"offsetWidth"in b||"ownerSVGElement"in b){if(p=h.position(b,!0),/^(above|below)/.test(d[0])){var q=
h.getBorderExtents(b),t=b.firstChild?h.getBorderExtents(b.firstChild):{t:0,l:0,b:0,r:0},w=h.getBorderExtents(a),v=a.firstChild?h.getBorderExtents(a.firstChild):{t:0,l:0,b:0,r:0};p.y+=Math.min(q.t+t.t,w.t+v.t);p.h-=Math.min(q.t+t.t,w.t+v.t)+Math.min(q.b+t.b,w.b+v.b)}}else p=b;if(b.parentNode)for(q="absolute"==l.getComputedStyle(b).position,b=b.parentNode;b&&1==b.nodeType&&"BODY"!=b.nodeName;){t=h.position(b,!0);w=l.getComputedStyle(b);/relative|absolute/.test(w.position)&&(q=!1);if(!q&&/hidden|auto|scroll/.test(w.overflow)){var v=
Math.min(p.y+p.h,t.y+t.h),A=Math.min(p.x+p.w,t.x+t.w);p.x=Math.max(p.x,t.x);p.y=Math.max(p.y,t.y);p.h=v-p.y;p.w=A-p.x}"absolute"==w.position&&(q=!0);b=b.parentNode}var u=p.x,B=p.y,G="w"in p?p.w:p.w=p.width,H="h"in p?p.h:(m.deprecated("place.around: dijit/place.__Rectangle: { x:"+u+", y:"+B+", height:"+p.height+", width:"+G+" } has been deprecated.  Please use { x:"+u+", y:"+B+", h:"+p.height+", w:"+G+" }","","2.0"),p.h=p.height),D=[];n.forEach(d,function(a){var b=f;switch(a){case "above-centered":e("TM",
"BM");break;case "below-centered":e("BM","TM");break;case "after-centered":b=!b;case "before-centered":e(b?"ML":"MR",b?"MR":"ML");break;case "after":b=!b;case "before":e(b?"TL":"TR",b?"TR":"TL");e(b?"BL":"BR",b?"BR":"BL");break;case "below-alt":b=!b;case "below":e(b?"BL":"BR",b?"TL":"TR");e(b?"BR":"BL",b?"TR":"TL");break;case "above-alt":b=!b;case "above":e(b?"TL":"TR",b?"BL":"BR");e(b?"TR":"TL",b?"BR":"BL");break;default:e(a.aroundCorner,a.corner)}});a=c(a,D,k,{w:G,h:H});a.aroundNodePos=p;return a}}})},
"esri/identity/OAuthSignInHandler":function(){define("./Credential ../core/domUtils ../core/has ../core/lang ../core/Error ../core/urlUtils dijit/Dialog dijit/registry dojo/Deferred dojo/_base/kernel dojo/dom-attr dojo/i18n!./nls/identity dojo/io-query dijit/form/Button dojo/query".split(" "),function(n,h,l,m,d,f,k,c,b,a,e,q,t){return{_oAuthDfd:null,_oAuthIntervalId:0,_oAuthDialogContent:"\x3cdiv class\x3d'dijitDialogPaneContentArea'\x3e\x3cdiv style\x3d'padding-bottom: 5px; word-wrap: break-word;'\x3e{oAuthInfo}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'esriErrorMsg' style\x3d'display: none; color: white; background-color: #D46464; text-align: center; padding-top: 3px; padding-bottom: 3px;'\x3e{invalidUser}\x3c/div\x3e\x3cdiv style\x3d'margin: 0px; padding: 0px; height: 10px;'\x3e\x3c/div\x3e\x3cdiv class\x3d'dijitDialogPaneActionBar'\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdSubmit\"'\x3e{lblOk}\x3c/button\x3e\x3cbutton data-dojo-type\x3d'dijit.form.Button' data-dojo-props\x3d'type:\"button\", \"class\":\"esriIdCancel\"'\x3e{lblCancel}\x3c/button\x3e\x3c/div\x3e",
setOAuthRedirectionHandler:function(a){this._oAuthRedirectFunc=a},oAuthSignIn:function(a,c,d,f){var k=this._oAuthDfd=new b;k.resUrl_=a;k.sinfo_=c;k.oinfo_=d;var l=!f||!1!==f.oAuthPopupConfirmation;if(!d.popup||!l)return this._doOAuthSignIn(a,c,d),k.promise;this._nls||(this._nls=q);this.oAuthDialog||(this.oAuthDialog=this._createOAuthDialog());a=this.oAuthDialog;c=f&&f.error;f=f&&f.token;h.hide(a.errMsg_);c&&c.details&&403==c.details.httpStatus&&f&&(e.set(a.errMsg_,"innerHTML",this._nls.forbidden),
h.show(a.errMsg_));a.show();return k.promise},setOAuthResponseHash:function(a){var b=this._oAuthDfd;this._oAuthDfd=null;if(b&&a)if(clearInterval(this._oAuthIntervalId),"#"===a.charAt(0)&&(a=a.substring(1)),a=t.queryToObject(a),a.error){var c="access_denied"===a.error;a=new d(c?"identity-manager:user-aborted":"identity-manager:authentication-failed",c?"ABORTED":"OAuth: "+a.error+" - "+a.error_description);b.reject(a)}else{var c=b.oinfo_._oAuthCred,e=new n({userId:a.username,server:b.sinfo_.server,
token:a.access_token,expires:(new Date).getTime()+1E3*Number(a.expires_in),ssl:"true"===a.ssl,_oAuthCred:c});c.storage=a.persist?window.localStorage:window.sessionStorage;c.token=e.token;c.expires=e.expires;c.userId=e.userId;c.ssl=e.ssl;c.save();b.resolve(e)}},_createOAuthDialog:function(){var b=this._nls,e=m.substitute(b,this._oAuthDialogContent),f=new k({title:b.title,content:e,"class":"esri-widget esriOAuthSignInDialog esriIdentityDialog",style:"min-width: 18em;",esriIdMgr_:this,execute_:function(){var a=
f.esriIdMgr_._oAuthDfd;f.hide_();f.esriIdMgr_._doOAuthSignIn(a.resUrl_,a.sinfo_,a.oinfo_)},cancel_:function(){var a=f.esriIdMgr_._oAuthDfd;f.esriIdMgr_._oAuthDfd=null;f.hide_();var b=new d("identity-manager:user-aborted","ABORTED");a.reject(b)},hide_:function(){h.hide(f.errMsg_);f.hide();k._DialogLevelManager.hide(f)}}),b=f.domNode;f.btnSubmit_=c.byNode(a.query(".esriIdSubmit",b)[0]);f.btnCancel_=c.byNode(a.query(".esriIdCancel",b)[0]);f.errMsg_=a.query(".esriErrorMsg",b)[0];f.connect(f.btnSubmit_,
"onClick",f.execute_);f.connect(f.btnCancel_,"onClick",f.onCancel);f.connect(f,"onCancel",f.cancel_);return f},_doOAuthSignIn:function(a,b,c){var e=this,h={client_id:c.appId,response_type:"token",state:JSON.stringify({portalUrl:c.portalUrl}),expiration:c.expiration,locale:c.locale,redirect_uri:c.popup?f.makeAbsolute(c.popupCallbackUrl):window.location.href.replace(/#.*$/,"")};c.forceLogin&&(h.force_login=!0);var k=c.portalUrl.replace(/^http:/i,"https:")+"/sharing/oauth2/authorize",m=k+"?"+t.objectToQuery(h);
if(c.popup){var n;7===l("ie")?(n=window.open(c.popupCallbackUrl,"esriJSAPIOAuth",c.popupWindowFeatures),n.location=m):n=window.open(m,"esriJSAPIOAuth",c.popupWindowFeatures);n?(n.focus(),this._oAuthDfd.oAuthWin_=n,this._oAuthIntervalId=setInterval(function(){if(n.closed){clearInterval(e._oAuthIntervalId);var a=e._oAuthDfd;if(a){var b=new d("identity-manager:user-aborted","ABORTED");a.reject(b)}}},500)):(a=new d("identity-manager:popup-blocked","ABORTED"),this._oAuthDfd.reject(a))}else this._rejectOnPersistedPageShow=
!0,this._oAuthRedirectFunc?this._oAuthRedirectFunc({authorizeParams:h,authorizeUrl:k,resourceUrl:a,serverInfo:b,oAuthInfo:c}):window.location=m}}})},"url:dijit/templates/Dialog.html":'\x3cdiv class\x3d"dijitDialog" role\x3d"dialog" aria-labelledby\x3d"${id}_title"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"titleBar" class\x3d"dijitDialogTitleBar"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"titleNode" class\x3d"dijitDialogTitle" id\x3d"${id}_title"\r\n\t\t\t\trole\x3d"heading" level\x3d"1"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"closeButtonNode" class\x3d"dijitDialogCloseIcon" data-dojo-attach-event\x3d"ondijitclick: onCancel" title\x3d"${buttonCancel}" role\x3d"button" tabindex\x3d"-1"\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"closeText" class\x3d"closeText" title\x3d"${buttonCancel}"\x3ex\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitDialogPaneContent"\x3e\x3c/div\x3e\r\n\t${!actionBarTemplate}\r\n\x3c/div\x3e\r\n\r\n',
"url:dijit/form/templates/Button.html":'\x3cspan class\x3d"dijit dijitReset dijitInline" role\x3d"presentation"\r\n\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonNode"\r\n\t\tdata-dojo-attach-event\x3d"ondijitclick:__onClick" role\x3d"presentation"\r\n\t\t\x3e\x3cspan class\x3d"dijitReset dijitStretch dijitButtonContents"\r\n\t\t\tdata-dojo-attach-point\x3d"titleNode,focusNode"\r\n\t\t\trole\x3d"button" aria-labelledby\x3d"${id}_label"\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitToggleButtonIconChar"\x3e\x26#x25CF;\x3c/span\r\n\t\t\t\x3e\x3cspan class\x3d"dijitReset dijitInline dijitButtonText"\r\n\t\t\t\tid\x3d"${id}_label"\r\n\t\t\t\tdata-dojo-attach-point\x3d"containerNode"\r\n\t\t\t\x3e\x3c/span\r\n\t\t\x3e\x3c/span\r\n\t\x3e\x3c/span\r\n\t\x3e\x3cinput ${!nameAttrSetting} type\x3d"${type}" value\x3d"${value}" class\x3d"dijitOffScreen"\r\n\t\tdata-dojo-attach-event\x3d"onclick:_onClick"\r\n\t\ttabIndex\x3d"-1" aria-hidden\x3d"true" data-dojo-attach-point\x3d"valueNode"\r\n/\x3e\x3c/span\x3e\r\n',
"url:dijit/form/templates/TextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft" id\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',"url:dijit/templates/Tooltip.html":'\x3cdiv class\x3d"dijitTooltip dijitTooltipLeft" id\x3d"dojoTooltip" data-dojo-attach-event\x3d"mouseenter:onMouseEnter,mouseleave:onMouseLeave"\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipConnector" data-dojo-attach-point\x3d"connectorNode"\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitTooltipContainer dijitTooltipContents" data-dojo-attach-point\x3d"containerNode" role\x3d\'alert\'\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"url:dijit/form/templates/ValidationTextBox.html":'\x3cdiv class\x3d"dijit dijitReset dijitInline dijitLeft"\r\n\tid\x3d"widget_${id}" role\x3d"presentation"\r\n\t\x3e\x3cdiv class\x3d\'dijitReset dijitValidationContainer\'\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputField dijitValidationIcon dijitValidationInner" value\x3d"\x26#935; " type\x3d"text" tabIndex\x3d"-1" readonly\x3d"readonly" role\x3d"presentation"\r\n\t/\x3e\x3c/div\r\n\t\x3e\x3cdiv class\x3d"dijitReset dijitInputField dijitInputContainer"\r\n\t\t\x3e\x3cinput class\x3d"dijitReset dijitInputInner" data-dojo-attach-point\x3d\'textbox,focusNode\' autocomplete\x3d"off"\r\n\t\t\t${!nameAttrSetting} type\x3d\'${type}\'\r\n\t/\x3e\x3c/div\r\n\x3e\x3c/div\x3e\r\n',
"*now":function(n){n(['dojo/i18n!*preload*esri/identity/nls/IdentityManager*["ar","ca","cs","da","de","el","en-gb","en-us","es-es","fi-fi","fr-fr","he-il","hu","it-it","ja-jp","ko-kr","nl-nl","nb","pl","pt-br","pt-pt","ru","sk","sl","sv","th","tr","zh-tw","zh-cn","ROOT"]'])},"*noref":1}});define(["./IdentityManagerDialog","../kernel","./OAuthSignInHandler","../core/declare"],function(n,h,l,m){n=new n;h.id=m.safeMixin(n,l);return h.id});